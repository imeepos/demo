import{r as Qy,g as $r,a as PB,c as Xg}from"./vendor-c5ypKtDW.js";function wz(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var k1={exports:{}},Cv={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vO;function Nz(){if(vO)return Cv;vO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var u in i)u!=="key"&&(a[u]=i[u])}else a=i;return i=a.ref,{$$typeof:e,type:n,key:o,ref:i!==void 0?i:null,props:a}}return Cv.Fragment=t,Cv.jsx=r,Cv.jsxs=r,Cv}var mO;function Iz(){return mO||(mO=1,k1.exports=Nz()),k1.exports}var ze=Iz(),sp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Pz={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Dz=class{#e=Pz;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Ef=new Dz;function Lz(e){setTimeout(e,0)}var Nf=typeof window>"u"||"Deno"in globalThis;function pa(){}function Bz(e,t){return typeof e=="function"?e(t):e}function Qx(e){return typeof e=="number"&&e>=0&&e!==1/0}function DB(e,t){return Math.max(e+(t||0)-Date.now(),0)}function oc(e,t){return typeof e=="function"?e(t):e}function _o(e,t){return typeof e=="function"?e(t):e}function _O(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:a,queryKey:o,stale:u}=e;if(o){if(n){if(t.queryHash!==S2(o,t.options))return!1}else if(!Lm(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||i&&i!==t.state.fetchStatus||a&&!a(t))}function gO(e,t){const{exact:r,status:n,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(If(t.options.mutationKey)!==If(a))return!1}else if(!Lm(t.options.mutationKey,a))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function S2(e,t){return(t?.queryKeyHashFn||If)(e)}function If(e){return JSON.stringify(e,(t,r)=>Jx(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Lm(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Lm(e[r],t[r])):!1}var Fz=Object.prototype.hasOwnProperty;function LB(e,t){if(e===t)return e;const r=yO(e)&&yO(t);if(!r&&!(Jx(e)&&Jx(t)))return t;const i=(r?e:Object.keys(e)).length,a=r?t:Object.keys(t),o=a.length,u=r?new Array(o):{};let c=0;for(let f=0;f<o;f++){const h=r?f:a[f],p=e[h],m=t[h];if(p===m){u[h]=p,(r?f<i:Fz.call(e,h))&&c++;continue}if(p===null||m===null||typeof p!="object"||typeof m!="object"){u[h]=m;continue}const _=LB(p,m);u[h]=_,_===p&&c++}return i===o&&c===i?e:u}function X0(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function yO(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Jx(e){if(!EO(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!EO(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function EO(e){return Object.prototype.toString.call(e)==="[object Object]"}function Uz(e){return new Promise(t=>{Ef.setTimeout(t,e)})}function eR(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?LB(e,t):t}function kz(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function zz(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var A2=Symbol();function BB(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===A2?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function FB(e,t){return typeof e=="function"?e(...t):!!e}var jz=class extends sp{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Nf&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},x2=new jz;function tR(){let e,t;const r=new Promise((i,a)=>{e=i,t=a});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}var Vz=Lz;function Hz(){let e=[],t=0,r=u=>{u()},n=u=>{u()},i=Vz;const a=u=>{t?e.push(u):i(()=>{r(u)})},o=()=>{const u=e;e=[],u.length&&i(()=>{n(()=>{u.forEach(c=>{r(c)})})})};return{batch:u=>{let c;t++;try{c=u()}finally{t--,t||o()}return c},batchCalls:u=>(...c)=>{a(()=>{u(...c)})},schedule:a,setNotifyFunction:u=>{r=u},setBatchNotifyFunction:u=>{n=u},setScheduler:u=>{i=u}}}var Ti=Hz(),Xz=class extends sp{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Nf&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},G0=new Xz;function Gz(e){return Math.min(1e3*2**e,3e4)}function UB(e){return(e??"online")==="online"?G0.isOnline():!0}var rR=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function kB(e){let t=!1,r=0,n;const i=tR(),a=()=>i.status!=="pending",o=E=>{if(!a()){const b=new rR(E);m(b),e.onCancel?.(b)}},u=()=>{t=!0},c=()=>{t=!1},f=()=>x2.isFocused()&&(e.networkMode==="always"||G0.isOnline())&&e.canRun(),h=()=>UB(e.networkMode)&&e.canRun(),p=E=>{a()||(n?.(),i.resolve(E))},m=E=>{a()||(n?.(),i.reject(E))},_=()=>new Promise(E=>{n=b=>{(a()||f())&&E(b)},e.onPause?.()}).then(()=>{n=void 0,a()||e.onContinue?.()}),y=()=>{if(a())return;let E;const b=r===0?e.initialPromise:void 0;try{E=b??e.fn()}catch(S){E=Promise.reject(S)}Promise.resolve(E).then(p).catch(S=>{if(a())return;const A=e.retry??(Nf?0:3),R=e.retryDelay??Gz,M=typeof R=="function"?R(r,S):R,P=A===!0||typeof A=="number"&&r<A||typeof A=="function"&&A(r,S);if(t||!P){m(S);return}r++,e.onFail?.(r,S),Uz(M).then(()=>f()?void 0:_()).then(()=>{t?m(S):y()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n?.(),i),cancelRetry:u,continueRetry:c,canStart:h,start:()=>(h()?y():_().then(y),i)}}var zB=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Qx(this.gcTime)&&(this.#e=Ef.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Nf?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Ef.clearTimeout(this.#e),this.#e=void 0)}},qz=class extends zB{#e;#t;#r;#i;#n;#o;#s;constructor(e){super(),this.#s=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#r=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=bO(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=bO(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=eR(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(pa).catch(pa):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>_o(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===A2||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>oc(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!DB(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#s?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const u=this.observers.find(c=>c.options.queryFn);u&&this.setOptions(u.options)}const r=new AbortController,n=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#s=!0,r.signal)})},i=()=>{const u=BB(this.options,t),f=(()=>{const h={client:this.#i,queryKey:this.queryKey,meta:this.meta};return n(h),h})();return this.#s=!1,this.options.persister?this.options.persister(u,f,this):u(f)},o=(()=>{const u={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:i};return n(u),u})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#a({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=kB({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:u=>{u instanceof rR&&u.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(u,c)=>{this.#a({type:"failed",failureCount:u,error:c})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const u=await this.#n.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#r.config.onSuccess?.(u,this),this.#r.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof rR){if(u.silent)return this.#n.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#a({type:"error",error:u}),this.#r.config.onError?.(u,this),this.#r.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#a(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...jB(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?n:void 0,n;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Ti.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function jB(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:UB(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function bO(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Wz=class extends sp{constructor(e,t){super(),this.options=t,this.#e=e,this.#a=null,this.#s=tR(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#i=void 0;#n;#o;#s;#a;#v;#d;#h;#l;#c;#u;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),TO(this.#t,this.options)?this.#f():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return nR(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return nR(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#E(),this.#b(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof _o(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#T(),this.#t.setOptions(this.options),t._defaulted&&!X0(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&SO(this.#t,r,this.options,t)&&this.#f(),this.updateResult(),n&&(this.#t!==r||_o(this.options.enabled,this.#t)!==_o(t.enabled,this.#t)||oc(this.options.staleTime,this.#t)!==oc(t.staleTime,this.#t))&&this.#m();const i=this.#_();n&&(this.#t!==r||_o(this.options.enabled,this.#t)!==_o(t.enabled,this.#t)||i!==this.#u)&&this.#g(i)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return Yz(this,r)&&(this.#i=r,this.#o=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#i}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t?.(n),n==="promise"&&!this.options.experimental_prefetchInRender&&this.#s.status==="pending"&&this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,n))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#f({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#f(e){this.#T();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(pa)),t}#m(){this.#E();const e=oc(this.options.staleTime,this.#t);if(Nf||this.#i.isStale||!Qx(e))return;const r=DB(this.#i.dataUpdatedAt,e)+1;this.#l=Ef.setTimeout(()=>{this.#i.isStale||this.updateResult()},r)}#_(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#g(e){this.#b(),this.#u=e,!(Nf||_o(this.options.enabled,this.#t)===!1||!Qx(this.#u)||this.#u===0)&&(this.#c=Ef.setInterval(()=>{(this.options.refetchIntervalInBackground||x2.isFocused())&&this.#f()},this.#u))}#y(){this.#m(),this.#g(this.#_())}#E(){this.#l&&(Ef.clearTimeout(this.#l),this.#l=void 0)}#b(){this.#c&&(Ef.clearInterval(this.#c),this.#c=void 0)}createResult(e,t){const r=this.#t,n=this.options,i=this.#i,a=this.#n,o=this.#o,c=e!==r?e.state:this.#r,{state:f}=e;let h={...f},p=!1,m;if(t._optimisticResults){const U=this.hasListeners(),re=!U&&TO(e,t),K=U&&SO(e,r,t,n);(re||K)&&(h={...h,...jB(f.data,e.options)}),t._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:_,errorUpdatedAt:y,status:E}=h;m=h.data;let b=!1;if(t.placeholderData!==void 0&&m===void 0&&E==="pending"){let U;i?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(U=i.data,b=!0):U=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,U!==void 0&&(E="success",m=eR(i?.data,U,t),p=!0)}if(t.select&&m!==void 0&&!b)if(i&&m===a?.data&&t.select===this.#v)m=this.#d;else try{this.#v=t.select,m=t.select(m),m=eR(i?.data,m,t),this.#d=m,this.#a=null}catch(U){this.#a=U}this.#a&&(_=this.#a,m=this.#d,y=Date.now(),E="error");const S=h.fetchStatus==="fetching",A=E==="pending",R=E==="error",M=A&&S,P=m!==void 0,w={status:E,fetchStatus:h.fetchStatus,isPending:A,isSuccess:E==="success",isError:R,isInitialLoading:M,isLoading:M,data:m,dataUpdatedAt:h.dataUpdatedAt,error:_,errorUpdatedAt:y,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:S,isRefetching:S&&!A,isLoadingError:R&&!P,isPaused:h.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:R&&P,isStale:R2(e,t),refetch:this.refetch,promise:this.#s,isEnabled:_o(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const U=H=>{w.status==="error"?H.reject(w.error):w.data!==void 0&&H.resolve(w.data)},re=()=>{const H=this.#s=w.promise=tR();U(H)},K=this.#s;switch(K.status){case"pending":e.queryHash===r.queryHash&&U(K);break;case"fulfilled":(w.status==="error"||w.data!==K.value)&&re();break;case"rejected":(w.status!=="error"||w.error!==K.reason)&&re();break}}return w}updateResult(){const e=this.#i,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#o=this.options,this.#n.data!==void 0&&(this.#h=this.#t),X0(t,e))return;this.#i=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!this.#p.size)return!0;const a=new Set(i??this.#p);return this.options.throwOnError&&a.add("error"),Object.keys(this.#i).some(o=>{const u=o;return this.#i[u]!==e[u]&&a.has(u)})};this.#S({listeners:r()})}#T(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#S(e){Ti.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function $z(e,t){return _o(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function TO(e,t){return $z(e,t)||e.state.data!==void 0&&nR(e,t,t.refetchOnMount)}function nR(e,t,r){if(_o(t.enabled,e)!==!1&&oc(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&R2(e,t)}return!1}function SO(e,t,r,n){return(e!==t||_o(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&R2(e,r)}function R2(e,t){return _o(t.enabled,e)!==!1&&e.isStaleByTime(oc(t.staleTime,e))}function Yz(e,t){return!X0(e.getCurrentResult(),t)}function AO(e){return{onFetch:(t,r)=>{const n=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,a=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let u={pages:[],pageParams:[]},c=0;const f=async()=>{let h=!1;const p=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?h=!0:t.signal.addEventListener("abort",()=>{h=!0}),t.signal)})},m=BB(t.options,t.fetchOptions),_=async(y,E,b)=>{if(h)return Promise.reject();if(E==null&&y.pages.length)return Promise.resolve(y);const A=(()=>{const I={client:t.client,queryKey:t.queryKey,pageParam:E,direction:b?"backward":"forward",meta:t.options.meta};return p(I),I})(),R=await m(A),{maxPages:M}=t.options,P=b?zz:kz;return{pages:P(y.pages,R,M),pageParams:P(y.pageParams,E,M)}};if(i&&a.length){const y=i==="backward",E=y?Zz:xO,b={pages:a,pageParams:o},S=E(n,b);u=await _(b,S,y)}else{const y=e??a.length;do{const E=c===0?o[0]??n.initialPageParam:xO(n,u);if(c>0&&E==null)break;u=await _(u,E),c++}while(c<y)}return u};t.options.persister?t.fetchFn=()=>t.options.persister?.(f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=f}}}function xO(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Zz(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var Kz=class extends zB{#e;#t;#r;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||VB(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=kB({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(a,o)=>{this.#n({type:"failed",failureCount:a,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",i=!this.#i.canStart();try{if(n)t();else{this.#n({type:"pending",variables:e,isPaused:i}),await this.#r.config.onMutate?.(e,this,r);const o=await this.options.onMutate?.(e,r);o!==this.state.context&&this.#n({type:"pending",context:o,variables:e,isPaused:i})}const a=await this.#i.start();return await this.#r.config.onSuccess?.(a,e,this.state.context,this,r),await this.options.onSuccess?.(a,e,this.state.context,r),await this.#r.config.onSettled?.(a,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(a,null,e,this.state.context,r),this.#n({type:"success",data:a}),a}catch(a){try{throw await this.#r.config.onError?.(a,e,this.state.context,this,r),await this.options.onError?.(a,e,this.state.context,r),await this.#r.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,a,e,this.state.context,r),a}finally{this.#n({type:"error",error:a})}}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ti.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function VB(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qz=class extends sp{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const n=new Kz({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#e.add(e);const t=Gg(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Gg(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Gg(e);if(typeof t=="string"){const n=this.#t.get(t)?.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=Gg(e);return typeof t=="string"?this.#t.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ti.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>gO(t,r))}findAll(e={}){return this.getAll().filter(t=>gO(e,t))}notify(e){Ti.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Ti.batch(()=>Promise.all(e.map(t=>t.continue().catch(pa))))}};function Gg(e){return e.options.scope?.id}var Jz=class extends sp{#e;#t=void 0;#r;#i;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),X0(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&If(r.mutationKey)!==If(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#o(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#o()}mutate(t,r){return this.#i=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??VB();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#o(t){Ti.batch(()=>{if(this.#i&&this.hasListeners()){const r=this.#t.variables,n=this.#t.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#i.onSuccess?.(t.data,r,n,i),this.#i.onSettled?.(t.data,null,r,n,i)):t?.type==="error"&&(this.#i.onError?.(t.error,r,n,i),this.#i.onSettled?.(void 0,t.error,r,n,i))}this.listeners.forEach(r=>{r(this.#t)})})}},ej=class extends sp{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const n=t.queryKey,i=t.queryHash??S2(n,t);let a=this.get(i);return a||(a=new qz({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ti.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>_O(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>_O(e,r)):t}notify(e){Ti.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Ti.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ti.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},tj=class{#e;#t;#r;#i;#n;#o;#s;#a;constructor(e={}){this.#e=e.queryCache||new ej,this.#t=e.mutationCache||new Qz,this.#r=e.defaultOptions||{},this.#i=new Map,this.#n=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#s=x2.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=G0.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#s?.(),this.#s=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(oc(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=this.#e.get(n.queryHash)?.state.data,o=Bz(t,a);if(o!==void 0)return this.#e.build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Ti.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Ti.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Ti.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Ti.batch(()=>this.#e.findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(pa).catch(pa)}invalidateQueries(e,t={}){return Ti.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Ti.batch(()=>this.#e.findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,r);return r.throwOnError||(a=a.catch(pa)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(pa)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(oc(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(pa).catch(pa)}fetchInfiniteQuery(e){return e.behavior=AO(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(pa).catch(pa)}ensureInfiniteQueryData(e){return e.behavior=AO(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return G0.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#i.set(If(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#i.values()],r={};return t.forEach(n=>{Lm(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(If(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(n=>{Lm(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=S2(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===A2&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},z=Qy();const un=$r(z),HB=wz({__proto__:null,default:un},[z]);var XB=z.createContext(void 0),i_=e=>{const t=z.useContext(XB);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},rj=({client:e,children:t})=>(z.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),ze.jsx(XB.Provider,{value:e,children:t})),GB=z.createContext(!1),nj=()=>z.useContext(GB);GB.Provider;function ij(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var aj=z.createContext(ij()),oj=()=>z.useContext(aj),sj=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},uj=e=>{z.useEffect(()=>{e.clearReset()},[e])},lj=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&e.data===void 0||FB(r,[e.error,n])),cj=e=>{if(e.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},fj=(e,t)=>e.isLoading&&e.isFetching&&!t,dj=(e,t)=>e?.suspense&&t.isPending,RO=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function hj(e,t,r){const n=nj(),i=oj(),a=i_(),o=a.defaultQueryOptions(e);a.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=n?"isRestoring":"optimistic",cj(o),sj(o,i),uj(i);const u=!a.getQueryCache().get(o.queryHash),[c]=z.useState(()=>new t(a,o)),f=c.getOptimisticResult(o),h=!n&&e.subscribed!==!1;if(z.useSyncExternalStore(z.useCallback(p=>{const m=h?c.subscribe(Ti.batchCalls(p)):pa;return c.updateResult(),m},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),z.useEffect(()=>{c.setOptions(o)},[o,c]),dj(o,f))throw RO(o,c,i);if(lj({result:f,errorResetBoundary:i,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw f.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(o,f),o.experimental_prefetchInRender&&!Nf&&fj(f,n)&&(u?RO(o,c,i):a.getQueryCache().get(o.queryHash)?.promise)?.catch(pa).finally(()=>{c.updateResult()}),o.notifyOnChangeProps?f:c.trackResult(f)}function qB(e,t){return hj(e,Wz)}function C2(e,t){const r=i_(),[n]=z.useState(()=>new Jz(r,e));z.useEffect(()=>{n.setOptions(e)},[n,e]);const i=z.useSyncExternalStore(z.useCallback(o=>n.subscribe(Ti.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=z.useCallback((o,u)=>{n.mutate(o,u).catch(pa)},[n]);if(i.error&&FB(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}const Ch=new WeakMap,S0=new WeakMap,q0={current:[]};let z1=!1,Am=0;const um=new Set,qg=new Map;function WB(e){const t=Array.from(e).sort((r,n)=>r instanceof Oh&&r.options.deps.includes(n)?1:n instanceof Oh&&n.options.deps.includes(r)?-1:0);for(const r of t){if(q0.current.includes(r))continue;q0.current.push(r),r.recompute();const n=S0.get(r);if(n)for(const i of n){const a=Ch.get(i);a&&WB(a)}}}function pj(e){const t={prevVal:e.prevState,currentVal:e.state};for(const r of e.listeners)r(t)}function vj(e){const t={prevVal:e.prevState,currentVal:e.state};for(const r of e.listeners)r(t)}function $B(e){if(Am>0&&!qg.has(e)&&qg.set(e,e.prevState),um.add(e),!(Am>0)&&!z1)try{for(z1=!0;um.size>0;){const t=Array.from(um);um.clear();for(const r of t){const n=qg.get(r)??r.prevState;r.prevState=n,pj(r)}for(const r of t){const n=Ch.get(r);n&&(q0.current.push(r),WB(n))}for(const r of t){const n=Ch.get(r);if(n)for(const i of n)vj(i)}}}finally{z1=!1,q0.current=[],qg.clear()}}function xm(e){Am++;try{e()}finally{if(Am--,Am===0){const t=um.values().next().value;t&&$B(t)}}}function mj(e){return typeof e=="function"}class iR{constructor(t,r){this.listeners=new Set,this.subscribe=n=>{var i,a;this.listeners.add(n);const o=(a=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:a.call(i,n,this);return()=>{this.listeners.delete(n),o?.()}},this.prevState=t,this.state=t,this.options=r}setState(t){var r,n,i;this.prevState=this.state,(r=this.options)!=null&&r.updateFn?this.state=this.options.updateFn(this.prevState)(t):mj(t)?this.state=t(this.prevState):this.state=t,(i=(n=this.options)==null?void 0:n.onUpdate)==null||i.call(n),$B(this)}}class Oh{constructor(t){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const r=this.options.deps.length,n=new Array(r),i=new Array(r);for(let a=0;a<r;a++){const o=this.options.deps[a];n[a]=o.prevState,i[a]=o.state}return this.lastSeenDepValues=i,{prevDepVals:n,currDepVals:i,prevVal:this.prevState??void 0}},this.recompute=()=>{var r,n;this.prevState=this.state;const i=this.getDepVals();this.state=this.options.fn(i),(n=(r=this.options).onUpdate)==null||n.call(r)},this.checkIfRecalculationNeededDeeply=()=>{for(const a of this.options.deps)a instanceof Oh&&a.checkIfRecalculationNeededDeeply();let r=!1;const n=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let a=0;a<i.length;a++)if(i[a]!==n[a]){r=!0;break}r&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const r of this._subscriptions)r()}),this.subscribe=r=>{var n,i;this.listeners.add(r);const a=(i=(n=this.options).onSubscribe)==null?void 0:i.call(n,r,this);return()=>{this.listeners.delete(r),a?.()}},this.options=t,this.state=t.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(t=this.options.deps){for(const r of t)if(r instanceof Oh)r.registerOnGraph(),this.registerOnGraph(r.options.deps);else if(r instanceof iR){let n=Ch.get(r);n||(n=new Set,Ch.set(r,n)),n.add(this);let i=S0.get(this);i||(i=new Set,S0.set(this,i)),i.add(r)}}unregisterFromGraph(t=this.options.deps){for(const r of t)if(r instanceof Oh)this.unregisterFromGraph(r.options.deps);else if(r instanceof iR){const n=Ch.get(r);n&&n.delete(this);const i=S0.get(this);i&&i.delete(r)}}}const sc="__TSR_index",CO="popstate",OO="beforeunload";function _j(e){let t=e.getLocation();const r=new Set,n=o=>{t=e.getLocation(),r.forEach(u=>u({location:t,action:o}))},i=o=>{e.notifyOnIndexChange??!0?n(o):t=e.getLocation()},a=async({task:o,navigateOpts:u,...c})=>{if(u?.ignoreBlocker??!1){o();return}const h=e.getBlockers?.()??[],p=c.type==="PUSH"||c.type==="REPLACE";if(typeof document<"u"&&h.length&&p)for(const m of h){const _=W0(c.path,c.state);if(await m.blockerFn({currentLocation:t,nextLocation:_,action:c.type})){e.onBlocked?.();return}}o()};return{get location(){return t},get length(){return e.getLength()},subscribers:r,subscribe:o=>(r.add(o),()=>{r.delete(o)}),push:(o,u,c)=>{const f=t.state[sc];u=MO(f+1,u),a({task:()=>{e.pushState(o,u),n({type:"PUSH"})},navigateOpts:c,type:"PUSH",path:o,state:u})},replace:(o,u,c)=>{const f=t.state[sc];u=MO(f,u),a({task:()=>{e.replaceState(o,u),n({type:"REPLACE"})},navigateOpts:c,type:"REPLACE",path:o,state:u})},go:(o,u)=>{a({task:()=>{e.go(o),i({type:"GO",index:o})},navigateOpts:u,type:"GO"})},back:o=>{a({task:()=>{e.back(o?.ignoreBlocker??!1),i({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{a({task:()=>{e.forward(o?.ignoreBlocker??!1),i({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>t.state[sc]!==0,createHref:o=>e.createHref(o),block:o=>{if(!e.setBlockers)return()=>{};const u=e.getBlockers?.()??[];return e.setBlockers([...u,o]),()=>{const c=e.getBlockers?.()??[];e.setBlockers?.(c.filter(f=>f!==o))}},flush:()=>e.flush?.(),destroy:()=>e.destroy?.(),notify:n}}function MO(e,t){t||(t={});const r=O2();return{...t,key:r,__TSR_key:r,[sc]:e}}function gj(e){const t=typeof document<"u"?window:void 0,r=t.history.pushState,n=t.history.replaceState;let i=[];const a=()=>i,o=U=>i=U,u=(U=>U),c=(()=>W0(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state));if(!t.history.state?.__TSR_key&&!t.history.state?.key){const U=O2();t.history.replaceState({[sc]:0,key:U,__TSR_key:U},"")}let f=c(),h,p=!1,m=!1,_=!1,y=!1;const E=()=>f;let b,S;const A=()=>{b&&(w._ignoreSubscribers=!0,(b.isPush?t.history.pushState:t.history.replaceState)(b.state,"",b.href),w._ignoreSubscribers=!1,b=void 0,S=void 0,h=void 0)},R=(U,re,K)=>{const H=u(re);S||(h=f),f=W0(re,K),b={href:H,state:K,isPush:b?.isPush||U==="push"},S||(S=Promise.resolve().then(()=>A()))},M=U=>{f=c(),w.notify({type:U})},P=async()=>{if(m){m=!1;return}const U=c(),re=U.state[sc]-f.state[sc],K=re===1,H=re===-1,x=!K&&!H||p;p=!1;const N=x?"GO":H?"BACK":"FORWARD",j=x?{type:"GO",index:re}:{type:H?"BACK":"FORWARD"};if(_)_=!1;else{const fe=a();if(typeof document<"u"&&fe.length){for(const O of fe)if(await O.blockerFn({currentLocation:f,nextLocation:U,action:N})){m=!0,t.history.go(1),w.notify(j);return}}}f=c(),w.notify(j)},I=U=>{if(y){y=!1;return}let re=!1;const K=a();if(typeof document<"u"&&K.length)for(const H of K){const x=H.enableBeforeUnload??!0;if(x===!0){re=!0;break}if(typeof x=="function"&&x()===!0){re=!0;break}}if(re)return U.preventDefault(),U.returnValue=""},w=_j({getLocation:E,getLength:()=>t.history.length,pushState:(U,re)=>R("push",U,re),replaceState:(U,re)=>R("replace",U,re),back:U=>(U&&(_=!0),y=!0,t.history.back()),forward:U=>{U&&(_=!0),y=!0,t.history.forward()},go:U=>{p=!0,t.history.go(U)},createHref:U=>u(U),flush:A,destroy:()=>{t.history.pushState=r,t.history.replaceState=n,t.removeEventListener(OO,I,{capture:!0}),t.removeEventListener(CO,P)},onBlocked:()=>{h&&f!==h&&(f=h)},getBlockers:a,setBlockers:o,notifyOnIndexChange:!1});return t.addEventListener(OO,I,{capture:!0}),t.addEventListener(CO,P),t.history.pushState=function(...U){const re=r.apply(t.history,U);return w._ignoreSubscribers||M("PUSH"),re},t.history.replaceState=function(...U){const re=n.apply(t.history,U);return w._ignoreSubscribers||M("REPLACE"),re},w}function W0(e,t){const r=e.indexOf("#"),n=e.indexOf("?"),i=O2();return{href:e,pathname:e.substring(0,r>0?n>0?Math.min(r,n):r:n>0?n:e.length),hash:r>-1?e.substring(r):"",search:n>-1?e.slice(n,r===-1?void 0:r):"",state:t||{[sc]:0,key:i,__TSR_key:i}}}function O2(){return(Math.random()+1).toString(36).substring(7)}function aR(e){return e[e.length-1]}function yj(e){return typeof e=="function"}function Af(e,t){return yj(e)?e(t):e}const Ej=Object.prototype.hasOwnProperty;function vo(e,t){if(e===t)return e;const r=t,n=IO(e)&&IO(r);if(!n&&!($0(e)&&$0(r)))return r;const i=n?e:wO(e);if(!i)return r;const a=n?r:wO(r);if(!a)return r;const o=i.length,u=a.length,c=n?new Array(u):{};let f=0;for(let h=0;h<u;h++){const p=n?h:a[h],m=e[p],_=r[p];if(m===_){c[p]=m,(n?h<o:Ej.call(e,p))&&f++;continue}if(m===null||_===null||typeof m!="object"||typeof _!="object"){c[p]=_;continue}const y=vo(m,_);c[p]=y,y===m&&f++}return o===u&&f===o?e:c}function wO(e){const t=[],r=Object.getOwnPropertyNames(e);for(const i of r){if(!Object.prototype.propertyIsEnumerable.call(e,i))return!1;t.push(i)}const n=Object.getOwnPropertySymbols(e);for(const i of n){if(!Object.prototype.propertyIsEnumerable.call(e,i))return!1;t.push(i)}return t}function $0(e){if(!NO(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const r=t.prototype;return!(!NO(r)||!r.hasOwnProperty("isPrototypeOf"))}function NO(e){return Object.prototype.toString.call(e)==="[object Object]"}function IO(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function xf(e,t,r){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!xf(e[n],t[n],r))return!1;return!0}if($0(e)&&$0(t)){const n=r?.ignoreUndefined??!0;if(r?.partial){for(const o in t)if((!n||t[o]!==void 0)&&!xf(e[o],t[o],r))return!1;return!0}let i=0;if(!n)i=Object.keys(e).length;else for(const o in e)e[o]!==void 0&&i++;let a=0;for(const o in t)if((!n||t[o]!==void 0)&&(a++,a>i||!xf(e[o],t[o],r)))return!1;return i===a}return!1}function kh(e){let t,r;const n=new Promise((i,a)=>{t=i,r=a});return n.status="pending",n.resolve=i=>{n.status="resolved",n.value=i,t(i),e?.(i)},n.reject=i=>{n.status="rejected",r(i)},n}function uc(e){return!!(e&&typeof e=="object"&&typeof e.then=="function")}var bj="Invariant failed";function Uu(e,t){if(!e)throw new Error(bj)}const zs=0,Pf=1,zh=2,jh=3;function Lu(e){return M2(e.filter(t=>t!==void 0).join("/"))}function M2(e){return e.replace(/\/{2,}/g,"/")}function w2(e){return e==="/"?e:e.replace(/^\/{1,}/,"")}function lc(e){return e==="/"?e:e.replace(/\/{1,}$/,"")}function oR(e){return lc(w2(e))}function Y0(e,t){return e?.endsWith("/")&&e!=="/"&&e!==`${t}/`?e.slice(0,-1):e}function Tj(e,t,r){return Y0(e,r)===Y0(t,r)}function Sj(e){const{type:t,value:r}=e;if(t===zs)return r;const{prefixSegment:n,suffixSegment:i}=e;if(t===Pf){const a=r.substring(1);if(n&&i)return`${n}{$${a}}${i}`;if(n)return`${n}{$${a}}`;if(i)return`{$${a}}${i}`}if(t===jh){const a=r.substring(1);return n&&i?`${n}{-$${a}}${i}`:n?`${n}{-$${a}}`:i?`{-$${a}}${i}`:`{-$${a}}`}if(t===zh){if(n&&i)return`${n}{$}${i}`;if(n)return`${n}{$}`;if(i)return`{$}${i}`}return r}function Aj({base:e,to:t,trailingSlash:r="never",parseCache:n}){let i=YB(e,n).slice();const a=Jy(t,n);i.length>1&&aR(i)?.value==="/"&&i.pop();for(let c=0,f=a.length;c<f;c++){const h=a[c],p=h.value;p==="/"?c?c===f-1&&i.push(h):i=[h]:p===".."?i.pop():p==="."||i.push(h)}i.length>1&&(aR(i).value==="/"?r==="never"&&i.pop():r==="always"&&i.push({type:zs,value:"/"}));const o=i.map(Sj);return Lu(o)}const YB=(e,t)=>ZB(e,t,!0),Jy=(e,t)=>ZB(e,t,!1),ZB=(e,t,r)=>{if(!e)return[];const n=t?.get(e);if(n)return n;const i=wj(e,r);return t?.set(e,i),i},xj=/^\$.{1,}$/,Rj=/^(.*?)\{(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,Cj=/^(.*?)\{-(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,Oj=/^\$$/,Mj=/^(.*?)\{\$\}(.*)$/;function wj(e,t){e=M2(e);const r=[];if(e.slice(0,1)==="/"&&(e=e.substring(1),r.push({type:zs,value:"/"})),!e)return r;const n=e.split("/").filter(Boolean);return r.push(...n.map(i=>{const a=!t&&i.slice(-1)==="_"?i.slice(0,-1):i,o=a.match(Mj);if(o){const f=o[1],h=o[2];return{type:zh,value:"$",prefixSegment:f||void 0,suffixSegment:h||void 0}}const u=a.match(Cj);if(u){const f=u[1],h=u[2],p=u[3];return{type:jh,value:h,prefixSegment:f||void 0,suffixSegment:p||void 0}}const c=a.match(Rj);if(c){const f=c[1],h=c[2],p=c[3];return{type:Pf,value:""+h,prefixSegment:f||void 0,suffixSegment:p||void 0}}if(xj.test(a)){const f=a.substring(1);return{type:Pf,value:"$"+f,prefixSegment:void 0,suffixSegment:void 0}}return Oj.test(a)?{type:zh,value:"$",prefixSegment:void 0,suffixSegment:void 0}:{type:zs,value:a.includes("%25")?a.split("%25").map(f=>decodeURI(f)).join("%25"):decodeURI(a)}})),e.slice(-1)==="/"&&(e=e.substring(1),r.push({type:zs,value:"/"})),r}function Wg({path:e,params:t,leaveWildcards:r,leaveParams:n,decodeCharMap:i,parseCache:a}){const o=Jy(e,a);function u(p){const m=t[p],_=typeof m=="string";return p==="*"||p==="_splat"?_?encodeURI(m):m:_?Nj(m,i):m}let c=!1;const f={},h=Lu(o.map(p=>{if(p.type===zs)return p.value;if(p.type===zh){f._splat=t._splat,f["*"]=t._splat;const m=p.prefixSegment||"",_=p.suffixSegment||"";if(!("_splat"in t))return c=!0,r?`${m}${p.value}${_}`:m||_?`${m}${_}`:void 0;const y=u("_splat");return r?`${m}${p.value}${y??""}${_}`:`${m}${y}${_}`}if(p.type===Pf){const m=p.value.substring(1);!c&&!(m in t)&&(c=!0),f[m]=t[m];const _=p.prefixSegment||"",y=p.suffixSegment||"";if(n){const E=u(p.value);return`${_}${p.value}${E??""}${y}`}return`${_}${u(m)??"undefined"}${y}`}if(p.type===jh){const m=p.value.substring(1),_=p.prefixSegment||"",y=p.suffixSegment||"";if(!(m in t)||t[m]==null)return r?`${_}${m}${y}`:_||y?`${_}${y}`:void 0;if(f[m]=t[m],n){const E=u(p.value);return`${_}${p.value}${E??""}${y}`}return r?`${_}${m}${u(m)??""}${y}`:`${_}${u(m)??""}${y}`}return p.value}));return{usedParams:f,interpolatedPath:h,isMissingParams:c}}function Nj(e,t){let r=encodeURIComponent(e);if(t)for(const[n,i]of t)r=r.replaceAll(n,i);return r}function sR(e,t,r){const n=Ij(e,t,r);if(!(t.to&&!n))return n??{}}function Ij(e,{to:t,fuzzy:r,caseSensitive:n},i){const a=t,o=YB(e.startsWith("/")?e:`/${e}`,i),u=Jy(a.startsWith("/")?a:`/${a}`,i),c={};return Pj(o,u,c,r,n)?c:void 0}function Pj(e,t,r,n,i){let a=0,o=0;for(;a<e.length||o<t.length;){const u=e[a],c=t[o];if(c){if(c.type===zh){const f=e.slice(a);let h;if(c.prefixSegment||c.suffixSegment){if(!u)return!1;const p=c.prefixSegment||"",m=c.suffixSegment||"",_=u.value;if("prefixSegment"in c&&!_.startsWith(p)||"suffixSegment"in c&&!e[e.length-1]?.value.endsWith(m))return!1;let y=decodeURI(Lu(f.map(E=>E.value)));p&&y.startsWith(p)&&(y=y.slice(p.length)),m&&y.endsWith(m)&&(y=y.slice(0,y.length-m.length)),h=y}else h=decodeURI(Lu(f.map(p=>p.value)));return r["*"]=h,r._splat=h,!0}if(c.type===zs){if(c.value==="/"&&!u?.value){o++;continue}if(u){if(i){if(c.value!==u.value)return!1}else if(c.value.toLowerCase()!==u.value.toLowerCase())return!1;a++,o++;continue}else return!1}if(c.type===Pf){if(!u||u.value==="/")return!1;let f="",h=!1;if(c.prefixSegment||c.suffixSegment){const p=c.prefixSegment||"",m=c.suffixSegment||"",_=u.value;if(p&&!_.startsWith(p)||m&&!_.endsWith(m))return!1;let y=_;p&&y.startsWith(p)&&(y=y.slice(p.length)),m&&y.endsWith(m)&&(y=y.slice(0,y.length-m.length)),f=decodeURIComponent(y),h=!0}else f=decodeURIComponent(u.value),h=!0;h&&(r[c.value.substring(1)]=f,a++),o++;continue}if(c.type===jh){if(!u){o++;continue}if(u.value==="/"){o++;continue}let f="",h=!1;if(c.prefixSegment||c.suffixSegment){const p=c.prefixSegment||"",m=c.suffixSegment||"",_=u.value;if((!p||_.startsWith(p))&&(!m||_.endsWith(m))){let y=_;p&&y.startsWith(p)&&(y=y.slice(p.length)),m&&y.endsWith(m)&&(y=y.slice(0,y.length-m.length)),f=decodeURIComponent(y),h=!0}}else{let p=!0;for(let m=o+1;m<t.length;m++){const _=t[m];if(_?.type===zs&&_.value===u.value){p=!1;break}if(_?.type===Pf||_?.type===zh){e.length<t.length&&(p=!1);break}}p&&(f=decodeURIComponent(u.value),h=!0)}h&&(r[c.value.substring(1)]=f,a++),o++;continue}}if(a<e.length&&o>=t.length)return r["**"]=Lu(e.slice(a).map(f=>f.value)),!!n&&t[t.length-1]?.value!=="/";if(o<t.length&&a>=e.length){for(let f=o;f<t.length;f++)if(t[f]?.type!==jh)return!1;break}break}return!0}const Dj=.75,Lj=1,Bj=.5,Fj=.4,Uj=.25,kj=.2,zj=.05,jj=.02,Vj=.01,PO=2e-4,DO=1e-4;function LO(e,t){return e.prefixSegment&&e.suffixSegment?t+zj+PO*e.prefixSegment.length+DO*e.suffixSegment.length:e.prefixSegment?t+jj+PO*e.prefixSegment.length:e.suffixSegment?t+Vj+DO*e.suffixSegment.length:t}function Hj(e){const t=[];return e.forEach((n,i)=>{if(n.isRoot||!n.path)return;const a=w2(n.fullPath);let o=Jy(a),u=0;for(;o.length>u+1&&o[u]?.value==="/";)u++;u>0&&(o=o.slice(u));let c=0,f=!1;const h=o.map((p,m)=>{if(p.value==="/")return Dj;if(p.type===zs)return Lj;let _;p.type===Pf?_=Bj:p.type===jh?(_=Fj,c++):_=Uj;for(let y=m+1;y<o.length;y++){const E=o[y];if(E.type===zs&&E.value!=="/")return f=!0,LO(p,_+kj)}return LO(p,_)});t.push({child:n,trimmed:a,parsed:o,index:i,scores:h,optionalParamCount:c,hasStaticAfter:f})}),t.sort((n,i)=>{const a=Math.min(n.scores.length,i.scores.length);for(let o=0;o<a;o++)if(n.scores[o]!==i.scores[o])return i.scores[o]-n.scores[o];if(n.scores.length!==i.scores.length){if(n.optionalParamCount!==i.optionalParamCount){if(n.hasStaticAfter===i.hasStaticAfter)return n.optionalParamCount-i.optionalParamCount;if(n.hasStaticAfter&&!i.hasStaticAfter)return-1;if(!n.hasStaticAfter&&i.hasStaticAfter)return 1}return i.scores.length-n.scores.length}for(let o=0;o<a;o++)if(n.parsed[o].value!==i.parsed[o].value)return n.parsed[o].value>i.parsed[o].value?1:-1;return n.index-i.index}).map((n,i)=>(n.child.rank=i,n.child))}function Xj({routeTree:e,initRoute:t}){const r={},n={},i=o=>{o.forEach((u,c)=>{t?.(u,c);const f=r[u.id];if(Uu(!f,`Duplicate routes found with id: ${String(u.id)}`),r[u.id]=u,!u.isRoot&&u.path){const p=lc(u.fullPath);(!n[p]||u.fullPath.endsWith("/"))&&(n[p]=u)}const h=u.children;h?.length&&i(h)})};i([e]);const a=Hj(Object.values(r));return{routesById:r,routesByPath:n,flatRoutes:a}}function Xs(e){return!!e?.isNotFound}function Gj(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const Z0="tsr-scroll-restoration-v1_3",qj=(e,t)=>{let r;return(...n)=>{r||(r=setTimeout(()=>{e(...n),r=null},t))}};function Wj(){const e=Gj();if(!e)return null;const t=e.getItem(Z0);let r=t?JSON.parse(t):{};return{state:r,set:n=>(r=Af(n,r)||r,e.setItem(Z0,JSON.stringify(r)))}}const $g=Wj(),uR=e=>e.state.__TSR_key||e.href;function $j(e){const t=[];let r;for(;r=e.parentNode;)t.push(`${e.tagName}:nth-child(${Array.prototype.indexOf.call(r.children,e)+1})`),e=r;return`${t.reverse().join(" > ")}`.toLowerCase()}let K0=!1;function KB({storageKey:e,key:t,behavior:r,shouldScrollRestoration:n,scrollToTopSelectors:i,location:a}){let o;try{o=JSON.parse(sessionStorage.getItem(e)||"{}")}catch(f){console.error(f);return}const u=t||window.history.state?.__TSR_key,c=o[u];K0=!0;e:{if(n&&c&&Object.keys(c).length>0){for(const p in c){const m=c[p];if(p==="window")window.scrollTo({top:m.scrollY,left:m.scrollX,behavior:r});else if(p){const _=document.querySelector(p);_&&(_.scrollLeft=m.scrollX,_.scrollTop=m.scrollY)}}break e}const f=(a??window.location).hash.split("#",2)[1];if(f){const p=window.history.state?.__hashScrollIntoViewOptions??!0;if(p){const m=document.getElementById(f);m&&m.scrollIntoView(p)}break e}const h={top:0,left:0,behavior:r};if(window.scrollTo(h),i)for(const p of i){if(p==="window")continue;const m=typeof p=="function"?p():document.querySelector(p);m&&m.scrollTo(h)}}K0=!1}function Yj(e,t){if(!$g&&!e.isServer||((e.options.scrollRestoration??!1)&&(e.isScrollRestoring=!0),e.isServer||e.isScrollRestorationSetup||!$g))return;e.isScrollRestorationSetup=!0,K0=!1;const n=e.options.getScrollRestorationKey||uR;window.history.scrollRestoration="manual";const i=a=>{if(K0||!e.isScrollRestoring)return;let o="";if(a.target===document||a.target===window)o="window";else{const c=a.target.getAttribute("data-scroll-restoration-id");c?o=`[data-scroll-restoration-id="${c}"]`:o=$j(a.target)}const u=n(e.state.location);$g.set(c=>{const f=c[u]||={},h=f[o]||={};if(o==="window")h.scrollX=window.scrollX||0,h.scrollY=window.scrollY||0;else if(o){const p=document.querySelector(o);p&&(h.scrollX=p.scrollLeft||0,h.scrollY=p.scrollTop||0)}return c})};typeof document<"u"&&document.addEventListener("scroll",qj(i,100),!0),e.subscribe("onRendered",a=>{const o=n(a.toLocation);if(!e.resetNextScroll){e.resetNextScroll=!0;return}typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation})||(KB({storageKey:Z0,key:o,behavior:e.options.scrollRestorationBehavior,shouldScrollRestoration:e.isScrollRestoring,scrollToTopSelectors:e.options.scrollToTopSelectors,location:e.history.location}),e.isScrollRestoring&&$g.set(u=>(u[o]||={},u)))})}function Zj(e){if(typeof document<"u"&&document.querySelector){const t=e.state.location.state.__hashScrollIntoViewOptions??!0;if(t&&e.state.location.hash!==""){const r=document.getElementById(e.state.location.hash);r&&r.scrollIntoView(t)}}}function Kj(e,t=String){const r=new URLSearchParams;for(const n in e){const i=e[n];i!==void 0&&r.set(n,t(i))}return r.toString()}function j1(e){return e?e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e:""}function Qj(e){const t=new URLSearchParams(e),r={};for(const[n,i]of t.entries()){const a=r[n];a==null?r[n]=j1(i):Array.isArray(a)?a.push(j1(i)):r[n]=[a,j1(i)]}return r}const Jj=tV(JSON.parse),eV=rV(JSON.stringify,JSON.parse);function tV(e){return t=>{t[0]==="?"&&(t=t.substring(1));const r=Qj(t);for(const n in r){const i=r[n];if(typeof i=="string")try{r[n]=e(i)}catch{}}return r}}function rV(e,t){const r=typeof t=="function";function n(i){if(typeof i=="object"&&i!==null)try{return e(i)}catch{}else if(r&&typeof i=="string")try{return t(i),e(i)}catch{}return i}return i=>{const a=Kj(i,n);return a?`?${a}`:""}}const go="__root__";function nV(e){if(e.statusCode=e.statusCode||e.code||307,!e.reloadDocument&&typeof e.href=="string")try{new URL(e.href),e.reloadDocument=!0}catch{}const t=new Headers(e.headers);e.href&&t.get("Location")===null&&t.set("Location",e.href);const r=new Response(null,{status:e.statusCode,headers:t});if(r.options=e,e.throw)throw r;return r}function Fs(e){return e instanceof Response&&!!e.options}function iV(e){const t=new Map;let r,n;const i=a=>{a.next&&(a.prev?(a.prev.next=a.next,a.next.prev=a.prev,a.next=void 0,n&&(n.next=a,a.prev=n)):(a.next.prev=void 0,r=a.next,a.next=void 0,n&&(a.prev=n,n.next=a)),n=a)};return{get(a){const o=t.get(a);if(o)return i(o),o.value},set(a,o){if(t.size>=e&&r){const c=r;t.delete(c.key),c.next&&(r=c.next,c.next.prev=void 0),c===n&&(n=void 0)}const u=t.get(a);if(u)u.value=o,i(u);else{const c={key:a,value:o,prev:n};n&&(n.next=c),n=c,r||(r=c),t.set(a,c)}}}}const A0=e=>{if(!e.rendered)return e.rendered=!0,e.onReady?.()},eE=(e,t)=>!!(e.preload&&!e.router.state.matches.some(r=>r.id===t)),QB=(e,t)=>{const r=e.router.routesById[t.routeId??""]??e.router.routeTree;!r.options.notFoundComponent&&e.router.options?.defaultNotFoundComponent&&(r.options.notFoundComponent=e.router.options.defaultNotFoundComponent),Uu(r.options.notFoundComponent);const n=e.matches.find(i=>i.routeId===r.id);Uu(n,"Could not find match for route: "+r.id),e.updateMatch(n.id,i=>({...i,status:"notFound",error:t,isFetching:!1})),t.routerCode==="BEFORE_LOAD"&&r.parentRoute&&(t.routeId=r.parentRoute.id,QB(e,t))},tc=(e,t,r)=>{if(!(!Fs(r)&&!Xs(r))){if(Fs(r)&&r.redirectHandled&&!r.options.reloadDocument)throw r;if(t){t._nonReactive.beforeLoadPromise?.resolve(),t._nonReactive.loaderPromise?.resolve(),t._nonReactive.beforeLoadPromise=void 0,t._nonReactive.loaderPromise=void 0;const n=Fs(r)?"redirected":"notFound";e.updateMatch(t.id,i=>({...i,status:n,isFetching:!1,error:r})),Xs(r)&&!r.routeId&&(r.routeId=t.routeId),t._nonReactive.loadPromise?.resolve()}throw Fs(r)?(e.rendered=!0,r.options._fromLocation=e.location,r.redirectHandled=!0,r=e.router.resolveRedirect(r),r):(QB(e,r),r)}},JB=(e,t)=>{const r=e.router.getMatch(t);return!!(!e.router.isServer&&r._nonReactive.dehydrated||e.router.isServer&&r.ssr===!1)},Ov=(e,t,r,n)=>{const{id:i,routeId:a}=e.matches[t],o=e.router.looseRoutesById[a];if(r instanceof Promise)throw r;r.routerCode=n,e.firstBadMatchIndex??=t,tc(e,e.router.getMatch(i),r);try{o.options.onError?.(r)}catch(u){r=u,tc(e,e.router.getMatch(i),r)}e.updateMatch(i,u=>(u._nonReactive.beforeLoadPromise?.resolve(),u._nonReactive.beforeLoadPromise=void 0,u._nonReactive.loadPromise?.resolve(),{...u,error:r,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},aV=(e,t,r,n)=>{const i=e.router.getMatch(t),a=e.matches[r-1]?.id,o=a?e.router.getMatch(a):void 0;if(e.router.isShell()){i.ssr=t===go;return}if(o?.ssr===!1){i.ssr=!1;return}const u=_=>_===!0&&o?.ssr==="data-only"?"data-only":_,c=e.router.options.defaultSsr??!0;if(n.options.ssr===void 0){i.ssr=u(c);return}if(typeof n.options.ssr!="function"){i.ssr=u(n.options.ssr);return}const{search:f,params:h}=i,p={search:Yg(f,i.searchError),params:Yg(h,i.paramsError),location:e.location,matches:e.matches.map(_=>({index:_.index,pathname:_.pathname,fullPath:_.fullPath,staticData:_.staticData,id:_.id,routeId:_.routeId,search:Yg(_.search,_.searchError),params:Yg(_.params,_.paramsError),ssr:_.ssr}))},m=n.options.ssr(p);if(uc(m))return m.then(_=>{i.ssr=u(_??c)});i.ssr=u(m??c)},eF=(e,t,r,n)=>{if(n._nonReactive.pendingTimeout!==void 0)return;const i=r.options.pendingMs??e.router.options.defaultPendingMs;if(!!(e.onReady&&!e.router.isServer&&!eE(e,t)&&(r.options.loader||r.options.beforeLoad||nF(r))&&typeof i=="number"&&i!==1/0&&(r.options.pendingComponent??e.router.options?.defaultPendingComponent))){const o=setTimeout(()=>{A0(e)},i);n._nonReactive.pendingTimeout=o}},oV=(e,t,r)=>{const n=e.router.getMatch(t);if(!n._nonReactive.beforeLoadPromise&&!n._nonReactive.loaderPromise)return;eF(e,t,r,n);const i=()=>{const a=e.router.getMatch(t);a.preload&&(a.status==="redirected"||a.status==="notFound")&&tc(e,a,a.error)};return n._nonReactive.beforeLoadPromise?n._nonReactive.beforeLoadPromise.then(i):i()},sV=(e,t,r,n)=>{const i=e.router.getMatch(t),a=i._nonReactive.loadPromise;i._nonReactive.loadPromise=kh(()=>{a?.resolve()});const{paramsError:o,searchError:u}=i;o&&Ov(e,r,o,"PARSE_PARAMS"),u&&Ov(e,r,u,"VALIDATE_SEARCH"),eF(e,t,n,i);const c=new AbortController,f=e.matches[r-1]?.id,m={...(f?e.router.getMatch(f):void 0)?.context??e.router.options.context??void 0,...i.__routeContext};let _=!1;const y=()=>{_||(_=!0,e.updateMatch(t,w=>({...w,isFetching:"beforeLoad",fetchCount:w.fetchCount+1,abortController:c,context:m})))},E=()=>{i._nonReactive.beforeLoadPromise?.resolve(),i._nonReactive.beforeLoadPromise=void 0,e.updateMatch(t,w=>({...w,isFetching:!1}))};if(!n.options.beforeLoad){xm(()=>{y(),E()});return}i._nonReactive.beforeLoadPromise=kh();const{search:b,params:S,cause:A}=i,R=eE(e,t),M={search:b,abortController:c,params:S,preload:R,context:m,location:e.location,navigate:w=>e.router.navigate({...w,_fromLocation:e.location}),buildLocation:e.router.buildLocation,cause:R?"preload":A,matches:e.matches,...e.router.options.additionalContext},P=w=>{if(w===void 0){xm(()=>{y(),E()});return}(Fs(w)||Xs(w))&&(y(),Ov(e,r,w,"BEFORE_LOAD")),xm(()=>{y(),e.updateMatch(t,U=>({...U,__beforeLoadContext:w,context:{...U.context,...w}})),E()})};let I;try{if(I=n.options.beforeLoad(M),uc(I))return y(),I.catch(w=>{Ov(e,r,w,"BEFORE_LOAD")}).then(P)}catch(w){y(),Ov(e,r,w,"BEFORE_LOAD")}P(I)},uV=(e,t)=>{const{id:r,routeId:n}=e.matches[t],i=e.router.looseRoutesById[n],a=()=>{if(e.router.isServer){const c=aV(e,r,t,i);if(uc(c))return c.then(u)}return u()},o=()=>sV(e,r,t,i),u=()=>{if(JB(e,r))return;const c=oV(e,r,i);return uc(c)?c.then(o):o()};return a()},Rm=(e,t,r)=>{const n=e.router.getMatch(t);if(!n||!r.options.head&&!r.options.scripts&&!r.options.headers)return;const i={matches:e.matches,match:n,params:n.params,loaderData:n.loaderData};return Promise.all([r.options.head?.(i),r.options.scripts?.(i),r.options.headers?.(i)]).then(([a,o,u])=>{const c=a?.meta,f=a?.links,h=a?.scripts,p=a?.styles;return{meta:c,links:f,headScripts:h,headers:u,scripts:o,styles:p}})},tF=(e,t,r,n)=>{const i=e.matchPromises[r-1],{params:a,loaderDeps:o,abortController:u,context:c,cause:f}=e.router.getMatch(t),h=eE(e,t);return{params:a,deps:o,preload:!!h,parentMatchPromise:i,abortController:u,context:c,location:e.location,navigate:p=>e.router.navigate({...p,_fromLocation:e.location}),cause:h?"preload":f,route:n,...e.router.options.additionalContext}},BO=async(e,t,r,n)=>{try{const i=e.router.getMatch(t);try{(!e.router.isServer||i.ssr===!0)&&rF(n);const a=n.options.loader?.(tF(e,t,r,n)),o=n.options.loader&&uc(a);if(!!(o||n._lazyPromise||n._componentsPromise||n.options.head||n.options.scripts||n.options.headers||i._nonReactive.minPendingPromise)&&e.updateMatch(t,p=>({...p,isFetching:"loader"})),n.options.loader){const p=o?await a:a;tc(e,e.router.getMatch(t),p),p!==void 0&&e.updateMatch(t,m=>({...m,loaderData:p}))}n._lazyPromise&&await n._lazyPromise;const c=Rm(e,t,n),f=c?await c:void 0,h=i._nonReactive.minPendingPromise;h&&await h,n._componentsPromise&&await n._componentsPromise,e.updateMatch(t,p=>({...p,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),...f}))}catch(a){let o=a;const u=i._nonReactive.minPendingPromise;u&&await u,tc(e,e.router.getMatch(t),a);try{n.options.onError?.(a)}catch(h){o=h,tc(e,e.router.getMatch(t),h)}const c=Rm(e,t,n),f=c?await c:void 0;e.updateMatch(t,h=>({...h,error:o,status:"error",isFetching:!1,...f}))}}catch(i){const a=e.router.getMatch(t);if(a){const o=Rm(e,t,n);if(o){const u=await o;e.updateMatch(t,c=>({...c,...u}))}a._nonReactive.loaderPromise=void 0}tc(e,a,i)}},lV=async(e,t)=>{const{id:r,routeId:n}=e.matches[t];let i=!1,a=!1;const o=e.router.looseRoutesById[n];if(JB(e,r)){if(e.router.isServer){const f=Rm(e,r,o);if(f){const h=await f;e.updateMatch(r,p=>({...p,...h}))}return e.router.getMatch(r)}}else{const f=e.router.getMatch(r);if(f._nonReactive.loaderPromise){if(f.status==="success"&&!e.sync&&!f.preload)return f;await f._nonReactive.loaderPromise;const h=e.router.getMatch(r);h.error&&tc(e,h,h.error)}else{const h=Date.now()-f.updatedAt,p=eE(e,r),m=p?o.options.preloadStaleTime??e.router.options.defaultPreloadStaleTime??3e4:o.options.staleTime??e.router.options.defaultStaleTime??0,_=o.options.shouldReload,y=typeof _=="function"?_(tF(e,r,t,o)):_,E=!!p&&!e.router.state.matches.some(R=>R.id===r),b=e.router.getMatch(r);b._nonReactive.loaderPromise=kh(),E!==b.preload&&e.updateMatch(r,R=>({...R,preload:E}));const{status:S,invalid:A}=b;if(i=S==="success"&&(A||(y??h>m)),!(p&&o.options.preload===!1))if(i&&!e.sync)a=!0,(async()=>{try{await BO(e,r,t,o);const R=e.router.getMatch(r);R._nonReactive.loaderPromise?.resolve(),R._nonReactive.loadPromise?.resolve(),R._nonReactive.loaderPromise=void 0}catch(R){Fs(R)&&await e.router.navigate(R.options)}})();else if(S!=="success"||i&&e.sync)await BO(e,r,t,o);else{const R=Rm(e,r,o);if(R){const M=await R;e.updateMatch(r,P=>({...P,...M}))}}}}const u=e.router.getMatch(r);a||(u._nonReactive.loaderPromise?.resolve(),u._nonReactive.loadPromise?.resolve()),clearTimeout(u._nonReactive.pendingTimeout),u._nonReactive.pendingTimeout=void 0,a||(u._nonReactive.loaderPromise=void 0),u._nonReactive.dehydrated=void 0;const c=a?u.isFetching:!1;return c!==u.isFetching||u.invalid!==!1?(e.updateMatch(r,f=>({...f,isFetching:c,invalid:!1})),e.router.getMatch(r)):u};async function FO(e){const t=Object.assign(e,{matchPromises:[]});!t.router.isServer&&t.router.state.matches.some(r=>r._forcePending)&&A0(t);try{for(let i=0;i<t.matches.length;i++){const a=uV(t,i);uc(a)&&await a}const r=t.firstBadMatchIndex??t.matches.length;for(let i=0;i<r;i++)t.matchPromises.push(lV(t,i));await Promise.all(t.matchPromises);const n=A0(t);uc(n)&&await n}catch(r){if(Xs(r)&&!t.preload){const n=A0(t);throw uc(n)&&await n,r}if(Fs(r))throw r}return t.matches}async function rF(e){if(!e._lazyLoaded&&e._lazyPromise===void 0&&(e.lazyFn?e._lazyPromise=e.lazyFn().then(t=>{const{id:r,...n}=t.options;Object.assign(e.options,n),e._lazyLoaded=!0,e._lazyPromise=void 0}):e._lazyLoaded=!0),!e._componentsLoaded&&e._componentsPromise===void 0){const t=()=>{const r=[];for(const n of iF){const i=e.options[n]?.preload;i&&r.push(i())}if(r.length)return Promise.all(r).then(()=>{e._componentsLoaded=!0,e._componentsPromise=void 0});e._componentsLoaded=!0,e._componentsPromise=void 0};e._componentsPromise=e._lazyPromise?e._lazyPromise.then(t):t()}return e._componentsPromise}function Yg(e,t){return t?{status:"error",error:t}:{status:"success",value:e}}function nF(e){for(const t of iF)if(e.options[t]?.preload)return!0;return!1}const iF=["component","errorComponent","pendingComponent","notFoundComponent"];function cV(e){return{input:({url:t})=>{for(const r of e)t=aF(r,t);return t},output:({url:t})=>{for(let r=e.length-1;r>=0;r--)t=oF(e[r],t);return t}}}function fV(e){const t=oR(e.basepath),r=new RegExp(`^/${t}/`,e.caseSensitive?"":"i");return{input:({url:n})=>(n.pathname=n.pathname.replace(r,"/"),n),output:({url:n})=>(n.pathname=Lu(["/",t,n.pathname]),n)}}function aF(e,t){const r=e?.input?.({url:t});if(r){if(typeof r=="string")return new URL(r);if(r instanceof URL)return r}return t}function oF(e,t){const r=e?.output?.({url:t});if(r){if(typeof r=="string")return new URL(r);if(r instanceof URL)return r}return t}function Rf(e){const t=e.resolvedLocation,r=e.location,n=t?.pathname!==r.pathname,i=t?.href!==r.href,a=t?.hash!==r.hash;return{fromLocation:t,toLocation:r,pathChanged:n,hrefChanged:i,hashChanged:a}}class dV{constructor(t){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=r=>r(),this.update=r=>{if(r.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info."),this.options={...this.options,...r},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(n=>[encodeURIComponent(n),n])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=gj())),this.options.basepath){const n=fV({basepath:this.options.basepath});this.options.rewrite?this.rewrite=cV([n,this.options.rewrite]):this.rewrite=n}else this.rewrite=this.options.rewrite;this.origin=this.options.origin,this.origin||(this.isServer?this.origin="http://localhost":this.origin=window.origin),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new iR(pV(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(n=>!["redirected"].includes(n.status))}}}),Yj(this)),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:r,routesByPath:n,flatRoutes:i}=Xj({routeTree:this.routeTree,initRoute:(o,u)=>{o.init({originalIndex:u})}});this.routesById=r,this.routesByPath=n,this.flatRoutes=i;const a=this.options.notFoundRoute;a&&(a.init({originalIndex:99999999999}),this.routesById[a.id]=a)},this.subscribe=(r,n)=>{const i={eventType:r,fn:n};return this.subscribers.add(i),()=>{this.subscribers.delete(i)}},this.emit=r=>{this.subscribers.forEach(n=>{n.eventType===r.type&&n.fn(r)})},this.parseLocation=(r,n)=>{const i=({href:c,state:f})=>{const h=new URL(c,this.origin),p=aF(this.rewrite,h),m=this.options.parseSearch(p.search),_=this.options.stringifySearch(m);p.search=_;const y=p.href.replace(p.origin,""),{pathname:E,hash:b}=p;return{href:y,publicHref:c,url:p.href,pathname:E,searchStr:_,search:vo(n?.search,m),hash:b.split("#").reverse()[0]??"",state:vo(n?.state,f)}},a=i(r),{__tempLocation:o,__tempKey:u}=a.state;if(o&&(!u||u===this.tempLocationKey)){const c=i(o);return c.state.key=a.state.key,c.state.__TSR_key=a.state.__TSR_key,delete c.state.__tempLocation,{...c,maskedLocation:a}}return a},this.resolvePathWithBase=(r,n)=>Aj({base:r,to:M2(n),trailingSlash:this.options.trailingSlash,parseCache:this.parsePathnameCache}),this.matchRoutes=(r,n,i)=>typeof r=="string"?this.matchRoutesInternal({pathname:r,search:n},i):this.matchRoutesInternal(r,n),this.parsePathnameCache=iV(1e3),this.getMatchedRoutes=(r,n)=>vV({pathname:r,routePathname:n,caseSensitive:this.options.caseSensitive,routesByPath:this.routesByPath,routesById:this.routesById,flatRoutes:this.flatRoutes,parseCache:this.parsePathnameCache}),this.cancelMatch=r=>{const n=this.getMatch(r);n&&(n.abortController.abort(),clearTimeout(n._nonReactive.pendingTimeout),n._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{this.state.pendingMatches?.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=r=>{const n=(a={})=>{const o=a._fromLocation||this.latestLocation,u=this.matchRoutes(o,{_buildLocation:!0}),c=aR(u);a.from;const f=a.unsafeRelative==="path"?o.pathname:a.from??c.fullPath,h=this.resolvePathWithBase(f,"."),p=c.search,m={...c.params},_=a.to?this.resolvePathWithBase(h,`${a.to}`):this.resolvePathWithBase(h,"."),y=a.params===!1||a.params===null?{}:(a.params??!0)===!0?m:Object.assign(m,Af(a.params,m)),E=Wg({path:_,params:y,parseCache:this.parsePathnameCache}).interpolatedPath,b=this.matchRoutes(E,void 0,{_buildLocation:!0}).map(K=>this.looseRoutesById[K.routeId]);if(Object.keys(y).length>0)for(const K of b){const H=K.options.params?.stringify??K.options.stringifyParams;H&&Object.assign(y,H(y))}const S=Wg({path:_,params:y,leaveWildcards:!1,leaveParams:r.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath;let A=p;if(r._includeValidateSearch&&this.options.search?.strict){const K={};b.forEach(H=>{if(H.options.validateSearch)try{Object.assign(K,lR(H.options.validateSearch,{...K,...A}))}catch{}}),A=K}A=mV({search:A,dest:a,destRoutes:b,_includeValidateSearch:r._includeValidateSearch}),A=vo(p,A);const R=this.options.stringifySearch(A),M=a.hash===!0?o.hash:a.hash?Af(a.hash,o.hash):void 0,P=M?`#${M}`:"";let I=a.state===!0?o.state:a.state?Af(a.state,o.state):{};I=vo(o.state,I);const w=`${S}${R}${P}`,U=new URL(w,this.origin),re=oF(this.rewrite,U);return{publicHref:re.pathname+re.search+re.hash,href:w,url:re.href,pathname:S,search:A,searchStr:R,state:I,hash:M??"",unmaskOnReload:a.unmaskOnReload}},i=(a={},o)=>{const u=n(a);let c=o?n(o):void 0;if(!c){let f={};const h=this.options.routeMasks?.find(p=>{const m=sR(u.pathname,{to:p.from,caseSensitive:!1,fuzzy:!1},this.parsePathnameCache);return m?(f=m,!0):!1});if(h){const{from:p,...m}=h;o={from:r.from,...m,params:f},c=n(o)}}return c&&(u.maskedLocation=c),u};return r.mask?i(r,{from:r.from,...r.mask}):i(r)},this.commitLocation=({viewTransition:r,ignoreBlocker:n,...i})=>{const a=()=>{const c=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];c.forEach(h=>{i.state[h]=this.latestLocation.state[h]});const f=xf(i.state,this.latestLocation.state);return c.forEach(h=>{delete i.state[h]}),f},o=lc(this.latestLocation.href)===lc(i.href),u=this.commitLocationPromise;if(this.commitLocationPromise=kh(()=>{u?.resolve()}),o&&a())this.load();else{let{maskedLocation:c,hashScrollIntoView:f,...h}=i;c&&(h={...c,state:{...c.state,__tempKey:void 0,__tempLocation:{...h,search:h.searchStr,state:{...h.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(h.unmaskOnReload??this.options.unmaskOnReload??!1)&&(h.state.__tempKey=this.tempLocationKey)),h.state.__hashScrollIntoViewOptions=f??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=r,this.history[i.replace?"replace":"push"](h.publicHref,h.state,{ignoreBlocker:n})}return this.resetNextScroll=i.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:r,resetScroll:n,hashScrollIntoView:i,viewTransition:a,ignoreBlocker:o,href:u,...c}={})=>{if(u){const h=this.history.location.state.__TSR_index,p=W0(u,{__TSR_index:r?h:h+1});c.to=p.pathname,c.search=this.options.parseSearch(p.search),c.hash=p.hash.slice(1)}const f=this.buildLocation({...c,_includeValidateSearch:!0});return this.commitLocation({...f,viewTransition:a,replace:r,resetScroll:n,hashScrollIntoView:i,ignoreBlocker:o})},this.navigate=({to:r,reloadDocument:n,href:i,...a})=>{if(!n&&i)try{new URL(`${i}`),n=!0}catch{}return n?(i||(i=this.buildLocation({to:r,...a}).href),a.replace?window.location.replace(i):window.location.href=i,Promise.resolve()):this.buildAndCommitLocation({...a,href:i,to:r,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const n=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0}),i=a=>{try{return encodeURI(decodeURI(a))}catch{return a}};if(oR(i(this.latestLocation.href))!==oR(i(n.href)))throw nV({href:n.href})}const r=this.matchRoutes(this.latestLocation);this.__store.setState(n=>({...n,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:r,cachedMatches:n.cachedMatches.filter(i=>!r.some(a=>a.id===i.id))}))},this.load=async r=>{let n,i,a;for(a=new Promise(o=>{this.startTransition(async()=>{try{this.beforeLoad();const u=this.latestLocation,c=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...Rf({resolvedLocation:c,location:u})}),this.emit({type:"onBeforeLoad",...Rf({resolvedLocation:c,location:u})}),await FO({router:this,sync:r?.sync,matches:this.state.pendingMatches,location:u,updateMatch:this.updateMatch,onReady:async()=>{this.startViewTransition(async()=>{let f,h,p;xm(()=>{this.__store.setState(m=>{const _=m.matches,y=m.pendingMatches||m.matches;return f=_.filter(E=>!y.some(b=>b.id===E.id)),h=y.filter(E=>!_.some(b=>b.id===E.id)),p=_.filter(E=>y.some(b=>b.id===E.id)),{...m,isLoading:!1,loadedAt:Date.now(),matches:y,pendingMatches:void 0,cachedMatches:[...m.cachedMatches,...f.filter(E=>E.status!=="error")]}}),this.clearExpiredCache()}),[[f,"onLeave"],[h,"onEnter"],[p,"onStay"]].forEach(([m,_])=>{m.forEach(y=>{this.looseRoutesById[y.routeId].options[_]?.(y)})})})}})}catch(u){Fs(u)?(n=u,this.isServer||this.navigate({...n.options,replace:!0,ignoreBlocker:!0})):Xs(u)&&(i=u),this.__store.setState(c=>({...c,statusCode:n?n.status:i?404:c.matches.some(f=>f.status==="error")?500:200,redirect:n}))}this.latestLoadPromise===a&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),o()})}),this.latestLoadPromise=a,await a;this.latestLoadPromise&&a!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(o=>({...o,statusCode:404}))},this.startViewTransition=r=>{const n=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,n&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let i;if(typeof n=="object"&&this.isViewTransitionTypesSupported){const a=this.latestLocation,o=this.state.resolvedLocation,u=typeof n.types=="function"?n.types(Rf({resolvedLocation:o,location:a})):n.types;i={update:r,types:u}}else i=r;document.startViewTransition(i)}else r()},this.updateMatch=(r,n)=>{const i=this.state.pendingMatches?.some(a=>a.id===r)?"pendingMatches":this.state.matches.some(a=>a.id===r)?"matches":this.state.cachedMatches.some(a=>a.id===r)?"cachedMatches":"";i&&this.__store.setState(a=>({...a,[i]:a[i]?.map(o=>o.id===r?n(o):o)}))},this.getMatch=r=>{const n=i=>i.id===r;return this.state.cachedMatches.find(n)??this.state.pendingMatches?.find(n)??this.state.matches.find(n)},this.invalidate=r=>{const n=i=>r?.filter?.(i)??!0?{...i,invalid:!0,...r?.forcePending||i.status==="error"?{status:"pending",error:void 0}:void 0}:i;return this.__store.setState(i=>({...i,matches:i.matches.map(n),cachedMatches:i.cachedMatches.map(n),pendingMatches:i.pendingMatches?.map(n)})),this.shouldViewTransition=!1,this.load({sync:r?.sync})},this.resolveRedirect=r=>(r.options.href||(r.options.href=this.buildLocation(r.options).href,r.headers.set("Location",r.options.href)),r.headers.get("Location")||r.headers.set("Location",r.options.href),r),this.clearCache=r=>{const n=r?.filter;n!==void 0?this.__store.setState(i=>({...i,cachedMatches:i.cachedMatches.filter(a=>!n(a))})):this.__store.setState(i=>({...i,cachedMatches:[]}))},this.clearExpiredCache=()=>{const r=n=>{const i=this.looseRoutesById[n.routeId];if(!i.options.loader)return!0;const a=(n.preload?i.options.preloadGcTime??this.options.defaultPreloadGcTime:i.options.gcTime??this.options.defaultGcTime)??300*1e3;return n.status==="error"?!0:Date.now()-n.updatedAt>=a};this.clearCache({filter:r})},this.loadRouteChunk=rF,this.preloadRoute=async r=>{const n=this.buildLocation(r);let i=this.matchRoutes(n,{throwOnError:!0,preload:!0,dest:r});const a=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(u=>u.id)),o=new Set([...a,...this.state.cachedMatches.map(u=>u.id)]);xm(()=>{i.forEach(u=>{o.has(u.id)||this.__store.setState(c=>({...c,cachedMatches:[...c.cachedMatches,u]}))})});try{return i=await FO({router:this,matches:i,location:n,preload:!0,updateMatch:(u,c)=>{a.has(u)?i=i.map(f=>f.id===u?c(f):f):this.updateMatch(u,c)}}),i}catch(u){if(Fs(u))return u.options.reloadDocument?void 0:await this.preloadRoute({...u.options,_fromLocation:n});Xs(u)||console.error(u);return}},this.matchRoute=(r,n)=>{const i={...r,to:r.to?this.resolvePathWithBase(r.from||"",r.to):void 0,params:r.params||{},leaveParams:!0},a=this.buildLocation(i);if(n?.pending&&this.state.status!=="pending")return!1;const u=(n?.pending===void 0?!this.state.isLoading:n.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,c=sR(u.pathname,{...n,to:a.pathname},this.parsePathnameCache);return!c||r.params&&!xf(c,r.params,{partial:!0})?!1:c&&(n?.includeSearch??!0)?xf(u.search,a.search,{partial:!0})?c:!1:c},this.hasNotFoundMatch=()=>this.__store.state.matches.some(r=>r.status==="notFound"||r.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...t,caseSensitive:t.caseSensitive??!1,notFoundMode:t.notFoundMode??"fuzzy",stringifySearch:t.stringifySearch??eV,parseSearch:t.parseSearch??Jj}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(t,r){const{foundRoute:n,matchedRoutes:i,routeParams:a}=this.getMatchedRoutes(t.pathname,r?.dest?.to);let o=!1;(n?n.path!=="/"&&a["**"]:lc(t.pathname))&&(this.options.notFoundRoute?i.push(this.options.notFoundRoute):o=!0);const u=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let h=i.length-1;h>=0;h--){const p=i[h];if(p.children)return p.id}return go}})(),c=[],f=h=>h?.id?h.context??this.options.context??void 0:this.options.context??void 0;return i.forEach((h,p)=>{const m=c[p-1],[_,y,E]=(()=>{const x=m?.search??t.search,N=m?._strictSearch??void 0;try{const j=lR(h.options.validateSearch,{...x})??void 0;return[{...x,...j},{...N,...j},void 0]}catch(j){let fe=j;if(j instanceof Q0||(fe=new Q0(j.message,{cause:j})),r?.throwOnError)throw fe;return[x,{},fe]}})(),b=h.options.loaderDeps?.({search:_})??"",S=b?JSON.stringify(b):"",{interpolatedPath:A,usedParams:R}=Wg({path:h.fullPath,params:a,decodeCharMap:this.pathParamsDecodeCharMap}),M=Wg({path:h.id,params:a,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath+S,P=this.getMatch(M),I=this.state.matches.find(x=>x.routeId===h.id),w=P?._strictParams??R;let U;if(!P){const x=h.options.params?.parse??h.options.parseParams;if(x)try{Object.assign(w,x(w))}catch(N){if(U=new hV(N.message,{cause:N}),r?.throwOnError)throw U}}Object.assign(a,w);const re=I?"stay":"enter";let K;if(P)K={...P,cause:re,params:I?vo(I.params,a):a,_strictParams:w,search:vo(I?I.search:P.search,_),_strictSearch:y};else{const x=h.options.loader||h.options.beforeLoad||h.lazyFn||nF(h)?"pending":"success";K={id:M,index:p,routeId:h.id,params:I?vo(I.params,a):a,_strictParams:w,pathname:A,updatedAt:Date.now(),search:I?vo(I.search,_):_,_strictSearch:y,searchError:void 0,status:x,isFetching:!1,error:void 0,paramsError:U,__routeContext:void 0,_nonReactive:{loadPromise:kh()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:re,loaderDeps:I?vo(I.loaderDeps,b):b,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:h.options.staticData||{},fullPath:h.fullPath}}r?.preload||(K.globalNotFound=u===h.id),K.searchError=E;const H=f(m);K.context={...H,...K.__routeContext,...K.__beforeLoadContext},c.push(K)}),c.forEach((h,p)=>{const m=this.looseRoutesById[h.routeId];if(!this.getMatch(h.id)&&r?._buildLocation!==!0){const y=c[p-1],E=f(y);if(m.options.context){const b={deps:h.loaderDeps,params:h.params,context:E??{},location:t,navigate:S=>this.navigate({...S,_fromLocation:t}),buildLocation:this.buildLocation,cause:h.cause,abortController:h.abortController,preload:!!h.preload,matches:c};h.__routeContext=m.options.context(b)??void 0}h.context={...E,...h.__routeContext,...h.__beforeLoadContext}}}),c}}class Q0 extends Error{}class hV extends Error{}function pV(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function lR(e,t){if(e==null)return{};if("~standard"in e){const r=e["~standard"].validate(t);if(r instanceof Promise)throw new Q0("Async validation not supported");if(r.issues)throw new Q0(JSON.stringify(r.issues,void 0,2),{cause:r});return r.value}return"parse"in e?e.parse(t):typeof e=="function"?e(t):{}}function vV({pathname:e,routePathname:t,caseSensitive:r,routesByPath:n,routesById:i,flatRoutes:a,parseCache:o}){let u={};const c=lc(e),f=_=>sR(c,{to:_.fullPath,caseSensitive:_.options?.caseSensitive??r,fuzzy:!0},o);let h=t!==void 0?n[t]:void 0;if(h)u=f(h);else{let _;for(const y of a){const E=f(y);if(E)if(y.path!=="/"&&E["**"])_||(_={foundRoute:y,routeParams:E});else{h=y,u=E;break}}!h&&_&&(h=_.foundRoute,u=_.routeParams)}let p=h||i[go];const m=[p];for(;p.parentRoute;)p=p.parentRoute,m.push(p);return m.reverse(),{matchedRoutes:m,routeParams:u,foundRoute:h}}function mV({search:e,dest:t,destRoutes:r,_includeValidateSearch:n}){const i=r.reduce((u,c)=>{const f=[];if("search"in c.options)c.options.search?.middlewares&&f.push(...c.options.search.middlewares);else if(c.options.preSearchFilters||c.options.postSearchFilters){const h=({search:p,next:m})=>{let _=p;"preSearchFilters"in c.options&&c.options.preSearchFilters&&(_=c.options.preSearchFilters.reduce((E,b)=>b(E),p));const y=m(_);return"postSearchFilters"in c.options&&c.options.postSearchFilters?c.options.postSearchFilters.reduce((E,b)=>b(E),y):y};f.push(h)}if(n&&c.options.validateSearch){const h=({search:p,next:m})=>{const _=m(p);try{return{..._,...lR(c.options.validateSearch,_)??void 0}}catch{return _}};f.push(h)}return u.concat(f)},[])??[],a=({search:u})=>t.search?t.search===!0?u:Af(t.search,u):{};i.push(a);const o=(u,c)=>{if(u>=i.length)return c;const f=i[u];return f({search:c,next:p=>o(u+1,p)})};return o(0,e)}const _V="Error preloading route! ";class sF{constructor(t){if(this.init=r=>{this.originalIndex=r.originalIndex;const n=this.options,i=!n?.path&&!n?.id;this.parentRoute=this.options.getParentRoute?.(),i?this._path=go:this.parentRoute||Uu(!1);let a=i?go:n?.path;a&&a!=="/"&&(a=w2(a));const o=n?.id||a;let u=i?go:Lu([this.parentRoute.id===go?"":this.parentRoute.id,o]);a===go&&(a="/"),u!==go&&(u=Lu(["/",u]));const c=u===go?"/":Lu([this.parentRoute.fullPath,a]);this._path=a,this._id=u,this._fullPath=c,this._to=c},this.clone=r=>{this._path=r._path,this._id=r._id,this._fullPath=r._fullPath,this._to=r._to,this.options.getParentRoute=r.options.getParentRoute,this.children=r.children},this.addChildren=r=>this._addFileChildren(r),this._addFileChildren=r=>(Array.isArray(r)&&(this.children=r),typeof r=="object"&&r!==null&&(this.children=Object.values(r)),this),this._addFileTypes=()=>this,this.updateLoader=r=>(Object.assign(this.options,r),this),this.update=r=>(Object.assign(this.options,r),this),this.lazy=r=>(this.lazyFn=r,this),this.options=t||{},this.isRoot=!t?.getParentRoute,t?.id&&t?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class gV extends sF{constructor(t){super(t)}}function N2(e){const t=e.errorComponent??tE;return ze.jsx(yV,{getResetKey:e.getResetKey,onCatch:e.onCatch,children:({error:r,reset:n})=>r?z.createElement(t,{error:r,reset:n}):e.children})}class yV extends z.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(t){return{resetKey:t.getResetKey()}}static getDerivedStateFromError(t){return{error:t}}reset(){this.setState({error:null})}componentDidUpdate(t,r){r.error&&r.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(t,r){this.props.onCatch&&this.props.onCatch(t,r)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function tE({error:e}){const[t,r]=z.useState(!1);return ze.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[ze.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[ze.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),ze.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>r(n=>!n),children:t?"Hide Error":"Show Error"})]}),ze.jsx("div",{style:{height:".25rem"}}),t?ze.jsx("div",{children:ze.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:e.message?ze.jsx("code",{children:e.message}):null})}):null]})}function EV({children:e,fallback:t=null}){return bV()?ze.jsx(un.Fragment,{children:e}):ze.jsx(un.Fragment,{children:t})}function bV(){return un.useSyncExternalStore(TV,()=>!0,()=>!1)}function TV(){return()=>{}}var V1={exports:{}},H1={},X1={exports:{}},G1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UO;function SV(){if(UO)return G1;UO=1;var e=Qy();function t(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,a=e.useLayoutEffect,o=e.useDebugValue;function u(p,m){var _=m(),y=n({inst:{value:_,getSnapshot:m}}),E=y[0].inst,b=y[1];return a(function(){E.value=_,E.getSnapshot=m,c(E)&&b({inst:E})},[p,_,m]),i(function(){return c(E)&&b({inst:E}),p(function(){c(E)&&b({inst:E})})},[p]),o(_),_}function c(p){var m=p.getSnapshot;p=p.value;try{var _=m();return!r(p,_)}catch{return!0}}function f(p,m){return m()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return G1.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,G1}var kO;function AV(){return kO||(kO=1,X1.exports=SV()),X1.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zO;function xV(){if(zO)return H1;zO=1;var e=Qy(),t=AV();function r(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,a=e.useRef,o=e.useEffect,u=e.useMemo,c=e.useDebugValue;return H1.useSyncExternalStoreWithSelector=function(f,h,p,m,_){var y=a(null);if(y.current===null){var E={hasValue:!1,value:null};y.current=E}else E=y.current;y=u(function(){function S(I){if(!A){if(A=!0,R=I,I=m(I),_!==void 0&&E.hasValue){var w=E.value;if(_(w,I))return M=w}return M=I}if(w=M,n(R,I))return w;var U=m(I);return _!==void 0&&_(w,U)?(R=I,w):(R=I,M=U)}var A=!1,R,M,P=p===void 0?null:p;return[function(){return S(h())},P===null?void 0:function(){return S(P())}]},[h,p,m,_]);var b=i(f,y[0],y[1]);return o(function(){E.hasValue=!0,E.value=b},[b]),c(b),b},H1}var jO;function RV(){return jO||(jO=1,V1.exports=xV()),V1.exports}var CV=RV();function OV(e,t=r=>r){return CV.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,MV)}function MV(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,i]of e)if(!t.has(n)||!Object.is(i,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();const r=VO(e);if(r.length!==VO(t).length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!Object.is(e[r[n]],t[r[n]]))return!1;return!0}function VO(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}const q1=z.createContext(null);function uF(){return typeof document>"u"?q1:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=q1,q1)}function Qa(e){const t=z.useContext(uF());return e?.warn,t}function Pa(e){const t=Qa({warn:e?.router===void 0}),r=e?.router||t,n=z.useRef(void 0);return OV(r.__store,i=>{if(e?.select){if(e.structuralSharing??r.options.defaultStructuralSharing){const a=vo(n.current,e.select(i));return n.current=a,a}return e.select(i)}return i})}const rE=z.createContext(void 0),wV=z.createContext(void 0);function Gs(e){const t=z.useContext(e.from?wV:rE);return Pa({select:n=>{const i=n.matches.find(a=>e.from?e.from===a.routeId:a.id===t);if(Uu(!((e.shouldThrow??!0)&&!i),`Could not find ${e.from?`an active match from "${e.from}"`:"a nearest match!"}`),i!==void 0)return e.select?e.select(i):i},structuralSharing:e.structuralSharing})}function I2(e){return Gs({from:e.from,strict:e.strict,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.loaderData):t.loaderData})}function P2(e){const{select:t,...r}=e;return Gs({...r,select:n=>t?t(n.loaderDeps):n.loaderDeps})}function D2(e){return Gs({from:e.from,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,strict:e.strict,select:t=>{const r=e.strict===!1?t.params:t._strictParams;return e.select?e.select(r):r}})}function L2(e){return Gs({from:e.from,strict:e.strict,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.search):t.search})}function B2(e){const t=Qa();return z.useCallback(r=>t.navigate({...r,from:r.from??e?.from}),[e?.from,t])}var up=PB();const NV=$r(up),Zg=typeof window<"u"?z.useLayoutEffect:z.useEffect;function W1(e){const t=z.useRef({value:e,prev:null}),r=t.current.value;return e!==r&&(t.current={value:e,prev:r}),t.current.prev}function IV(e,t,r={},n={}){z.useEffect(()=>{if(!e.current||n.disabled||typeof IntersectionObserver!="function")return;const i=new IntersectionObserver(([a])=>{t(a)},r);return i.observe(e.current),()=>{i.disconnect()}},[t,r,n.disabled,e])}function PV(e){const t=z.useRef(null);return z.useImperativeHandle(e,()=>t.current,[]),t}function DV(e,t){const r=Qa(),[n,i]=z.useState(!1),a=z.useRef(!1),o=PV(t),{activeProps:u,inactiveProps:c,activeOptions:f,to:h,preload:p,preloadDelay:m,hashScrollIntoView:_,replace:y,startTransition:E,resetScroll:b,viewTransition:S,children:A,target:R,disabled:M,style:P,className:I,onClick:w,onFocus:U,onMouseEnter:re,onMouseLeave:K,onTouchStart:H,ignoreBlocker:x,params:N,search:j,hash:fe,state:O,mask:k,reloadDocument:V,unsafeRelative:ee,from:oe,_fromLocation:ge,...Ee}=e,De=Pa({select:F=>F.location.search,structuralSharing:!0}),tt=e.from,$e=z.useMemo(()=>({...e,from:tt}),[r,De,tt,e._fromLocation,e.hash,e.to,e.search,e.params,e.state,e.mask,e.unsafeRelative]),It=z.useMemo(()=>r.buildLocation({...$e}),[r,$e]),qe=z.useMemo(()=>{if(M)return;let F=It.maskedLocation?It.maskedLocation.url:It.url,vt=!1;return r.origin&&(F.startsWith(r.origin)?F=F.replace(r.origin,"")||"/":vt=!0),{href:F,external:vt}},[M,It.maskedLocation,It.url,r.origin]),St=z.useMemo(()=>{if(qe?.external)return qe.href;try{return new URL(h),h}catch{}},[h,qe]),ke=e.reloadDocument||St?!1:p??r.options.defaultPreload,_e=m??r.options.defaultPreloadDelay??0,ot=Pa({select:F=>{if(St)return!1;if(f?.exact){if(!Tj(F.location.pathname,It.pathname,r.basepath))return!1}else{const vt=Y0(F.location.pathname,r.basepath),ht=Y0(It.pathname,r.basepath);if(!(vt.startsWith(ht)&&(vt.length===ht.length||vt[ht.length]==="/")))return!1}return(f?.includeSearch??!0)&&!xf(F.location.search,It.search,{partial:!f?.exact,ignoreUndefined:!f?.explicitUndefined})?!1:f?.includeHash?F.location.hash===It.hash:!0}}),Ce=z.useCallback(()=>{r.preloadRoute({...$e}).catch(F=>{console.warn(F),console.warn(_V)})},[r,$e]),Wt=z.useCallback(F=>{F?.isIntersecting&&Ce()},[Ce]);IV(o,Wt,kV,{disabled:!!M||ke!=="viewport"}),z.useEffect(()=>{a.current||!M&&ke==="render"&&(Ce(),a.current=!0)},[M,Ce,ke]);const Xt=F=>{const vt=F.currentTarget.target,ht=R!==void 0?R:vt;if(!M&&!zV(F)&&!F.defaultPrevented&&(!ht||ht==="_self")&&F.button===0){F.preventDefault(),up.flushSync(()=>{i(!0)});const Ft=r.subscribe("onResolved",()=>{Ft(),i(!1)});r.navigate({...$e,replace:y,resetScroll:b,hashScrollIntoView:_,startTransition:E,viewTransition:S,ignoreBlocker:x})}};if(St)return{...Ee,ref:o,href:St,...A&&{children:A},...R&&{target:R},...M&&{disabled:M},...P&&{style:P},...I&&{className:I},...w&&{onClick:w},...U&&{onFocus:U},...re&&{onMouseEnter:re},...K&&{onMouseLeave:K},...H&&{onTouchStart:H}};const bt=F=>{M||ke&&Ce()},Pt=bt,Nt=F=>{if(!(M||!ke))if(!_e)Ce();else{const vt=F.target;if(Mv.has(vt))return;const ht=setTimeout(()=>{Mv.delete(vt),Ce()},_e);Mv.set(vt,ht)}},Jt=F=>{if(M||!ke||!_e)return;const vt=F.target,ht=Mv.get(vt);ht&&(clearTimeout(ht),Mv.delete(vt))},Br=ot?Af(u,{})??LV:$1,se=ot?$1:Af(c,{})??$1,be=[I,Br.className,se.className].filter(Boolean).join(" "),Fe=(P||Br.style||se.style)&&{...P,...Br.style,...se.style};return{...Ee,...Br,...se,href:qe?.href,ref:o,onClick:wv([w,Xt]),onFocus:wv([U,bt]),onMouseEnter:wv([re,Nt]),onMouseLeave:wv([K,Jt]),onTouchStart:wv([H,Pt]),disabled:!!M,target:R,...Fe&&{style:Fe},...be&&{className:be},...M&&BV,...ot&&FV,...n&&UV}}const $1={},LV={className:"active"},BV={role:"link","aria-disabled":!0},FV={"data-status":"active","aria-current":"page"},UV={"data-transitioning":"transitioning"},Mv=new WeakMap,kV={rootMargin:"100px"},wv=e=>t=>{for(const r of e)if(r){if(t.defaultPrevented)return;r(t)}},F2=z.forwardRef((e,t)=>{const{_asChild:r,...n}=e,{type:i,ref:a,...o}=DV(n,t),u=typeof n.children=="function"?n.children({isActive:o["data-status"]==="active"}):n.children;return r===void 0&&delete o.disabled,z.createElement(r||"a",{...o,ref:a},u)});function zV(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}class jV extends sF{constructor(t){super(t),this.useMatch=r=>Gs({select:r?.select,from:this.id,structuralSharing:r?.structuralSharing}),this.useRouteContext=r=>Gs({...r,from:this.id,select:n=>r?.select?r.select(n.context):n.context}),this.useSearch=r=>L2({select:r?.select,structuralSharing:r?.structuralSharing,from:this.id}),this.useParams=r=>D2({select:r?.select,structuralSharing:r?.structuralSharing,from:this.id}),this.useLoaderDeps=r=>P2({...r,from:this.id}),this.useLoaderData=r=>I2({...r,from:this.id}),this.useNavigate=()=>B2({from:this.fullPath}),this.Link=un.forwardRef((r,n)=>ze.jsx(F2,{ref:n,from:this.fullPath,...r})),this.$$typeof=Symbol.for("react.memo")}}function nE(e){return new jV(e)}class VV extends gV{constructor(t){super(t),this.useMatch=r=>Gs({select:r?.select,from:this.id,structuralSharing:r?.structuralSharing}),this.useRouteContext=r=>Gs({...r,from:this.id,select:n=>r?.select?r.select(n.context):n.context}),this.useSearch=r=>L2({select:r?.select,structuralSharing:r?.structuralSharing,from:this.id}),this.useParams=r=>D2({select:r?.select,structuralSharing:r?.structuralSharing,from:this.id}),this.useLoaderDeps=r=>P2({...r,from:this.id}),this.useLoaderData=r=>I2({...r,from:this.id}),this.useNavigate=()=>B2({from:this.fullPath}),this.Link=un.forwardRef((r,n)=>ze.jsx(F2,{ref:n,from:this.fullPath,...r})),this.$$typeof=Symbol.for("react.memo")}}function HV(e){return new VV(e)}function HO(e){return typeof e=="object"?new XO(e,{silent:!0}).createRoute(e):new XO(e,{silent:!0}).createRoute}class XO{constructor(t,r){this.path=t,this.createRoute=n=>{this.silent;const i=nE(n);return i.isRoot=!1,i},this.silent=r?.silent}}class GO{constructor(t){this.useMatch=r=>Gs({select:r?.select,from:this.options.id,structuralSharing:r?.structuralSharing}),this.useRouteContext=r=>Gs({from:this.options.id,select:n=>r?.select?r.select(n.context):n.context}),this.useSearch=r=>L2({select:r?.select,structuralSharing:r?.structuralSharing,from:this.options.id}),this.useParams=r=>D2({select:r?.select,structuralSharing:r?.structuralSharing,from:this.options.id}),this.useLoaderDeps=r=>P2({...r,from:this.options.id}),this.useLoaderData=r=>I2({...r,from:this.options.id}),this.useNavigate=()=>{const r=Qa();return B2({from:r.routesById[this.options.id].fullPath})},this.options=t,this.$$typeof=Symbol.for("react.memo")}}function qO(e){return typeof e=="object"?new GO(e):t=>new GO({id:e,...t})}function XV(){const e=Qa(),t=z.useRef({router:e,mounted:!1}),[r,n]=z.useState(!1),{hasPendingMatches:i,isLoading:a}=Pa({select:p=>({isLoading:p.isLoading,hasPendingMatches:p.matches.some(m=>m.status==="pending")}),structuralSharing:!0}),o=W1(a),u=a||r||i,c=W1(u),f=a||i,h=W1(f);return e.startTransition=p=>{n(!0),z.startTransition(()=>{p(),n(!1)})},z.useEffect(()=>{const p=e.history.subscribe(e.load),m=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return lc(e.latestLocation.href)!==lc(m.href)&&e.commitLocation({...m,replace:!0}),()=>{p()}},[e,e.history]),Zg(()=>{if(typeof window<"u"&&e.ssr||t.current.router===e&&t.current.mounted)return;t.current={router:e,mounted:!0},(async()=>{try{await e.load()}catch(m){console.error(m)}})()},[e]),Zg(()=>{o&&!a&&e.emit({type:"onLoad",...Rf(e.state)})},[o,e,a]),Zg(()=>{h&&!f&&e.emit({type:"onBeforeRouteMount",...Rf(e.state)})},[f,h,e]),Zg(()=>{c&&!u&&(e.emit({type:"onResolved",...Rf(e.state)}),e.__store.setState(p=>({...p,status:"idle",resolvedLocation:p.location})),Zj(e))},[u,c,e]),null}function GV(e){const t=Pa({select:r=>`not-found-${r.location.pathname}-${r.status}`});return ze.jsx(N2,{getResetKey:()=>t,onCatch:(r,n)=>{if(Xs(r))e.onCatch?.(r,n);else throw r},errorComponent:({error:r})=>{if(Xs(r))return e.fallback?.(r);throw r},children:e.children})}function qV(){return ze.jsx("p",{children:"Not Found"})}function yh(e){return ze.jsx(ze.Fragment,{children:e.children})}function lF(e,t,r){return t.options.notFoundComponent?ze.jsx(t.options.notFoundComponent,{data:r}):e.options.defaultNotFoundComponent?ze.jsx(e.options.defaultNotFoundComponent,{data:r}):ze.jsx(qV,{})}function WV({children:e}){const t=Qa();return t.isServer?ze.jsx("script",{nonce:t.options.ssr?.nonce,className:"$tsr",dangerouslySetInnerHTML:{__html:[e].filter(Boolean).join(`
`)+";$_TSR.c()"}}):null}function $V(){const e=Qa();if(!e.isScrollRestoring||!e.isServer||typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation}))return null;const r=(e.options.getScrollRestorationKey||uR)(e.latestLocation),n=r!==uR(e.latestLocation)?r:void 0,i={storageKey:Z0,shouldScrollRestoration:!0};return n&&(i.key=n),ze.jsx(WV,{children:`(${KB.toString()})(${JSON.stringify(i)})`})}const cF=z.memo(function({matchId:t}){const r=Qa(),n=Pa({select:S=>{const A=S.matches.find(R=>R.id===t);return Uu(A),{routeId:A.routeId,ssr:A.ssr,_displayPending:A._displayPending}},structuralSharing:!0}),i=r.routesById[n.routeId],a=i.options.pendingComponent??r.options.defaultPendingComponent,o=a?ze.jsx(a,{}):null,u=i.options.errorComponent??r.options.defaultErrorComponent,c=i.options.onCatch??r.options.defaultOnCatch,f=i.isRoot?i.options.notFoundComponent??r.options.notFoundRoute?.options.component:i.options.notFoundComponent,h=n.ssr===!1||n.ssr==="data-only",p=(!i.isRoot||i.options.wrapInSuspense||h)&&(i.options.wrapInSuspense??a??(i.options.errorComponent?.preload||h))?z.Suspense:yh,m=u?N2:yh,_=f?GV:yh,y=Pa({select:S=>S.loadedAt}),E=Pa({select:S=>{const A=S.matches.findIndex(R=>R.id===t);return S.matches[A-1]?.routeId}}),b=i.isRoot?i.options.shellComponent??yh:yh;return ze.jsxs(b,{children:[ze.jsx(rE.Provider,{value:t,children:ze.jsx(p,{fallback:o,children:ze.jsx(m,{getResetKey:()=>y,errorComponent:u||tE,onCatch:(S,A)=>{if(Xs(S))throw S;c?.(S,A)},children:ze.jsx(_,{fallback:S=>{if(!f||S.routeId&&S.routeId!==n.routeId||!S.routeId&&!i.isRoot)throw S;return z.createElement(f,S)},children:h||n._displayPending?ze.jsx(EV,{fallback:o,children:ze.jsx(WO,{matchId:t})}):ze.jsx(WO,{matchId:t})})})})}),E===go&&r.options.scrollRestoration?ze.jsxs(ze.Fragment,{children:[ze.jsx(YV,{}),ze.jsx($V,{})]}):null]})});function YV(){const e=Qa(),t=z.useRef(void 0);return ze.jsx("script",{suppressHydrationWarning:!0,ref:r=>{r&&(t.current===void 0||t.current.href!==e.latestLocation.href)&&(e.emit({type:"onRendered",...Rf(e.state)}),t.current=e.latestLocation)}},e.latestLocation.state.__TSR_key)}const WO=z.memo(function({matchId:t}){const r=Qa(),{match:n,key:i,routeId:a}=Pa({select:c=>{const f=c.matches.find(y=>y.id===t),h=f.routeId,m=(r.routesById[h].options.remountDeps??r.options.defaultRemountDeps)?.({routeId:h,loaderDeps:f.loaderDeps,params:f._strictParams,search:f._strictSearch});return{key:m?JSON.stringify(m):void 0,routeId:h,match:{id:f.id,status:f.status,error:f.error,_forcePending:f._forcePending,_displayPending:f._displayPending}}},structuralSharing:!0}),o=r.routesById[a],u=z.useMemo(()=>{const c=o.options.component??r.options.defaultComponent;return c?ze.jsx(c,{},i):ze.jsx(fF,{})},[i,o.options.component,r.options.defaultComponent]);if(n._displayPending)throw r.getMatch(n.id)?._nonReactive.displayPendingPromise;if(n._forcePending)throw r.getMatch(n.id)?._nonReactive.minPendingPromise;if(n.status==="pending"){const c=o.options.pendingMinMs??r.options.defaultPendingMinMs;if(c){const f=r.getMatch(n.id);if(f&&!f._nonReactive.minPendingPromise&&!r.isServer){const h=kh();f._nonReactive.minPendingPromise=h,setTimeout(()=>{h.resolve(),f._nonReactive.minPendingPromise=void 0},c)}}throw r.getMatch(n.id)?._nonReactive.loadPromise}if(n.status==="notFound")return Uu(Xs(n.error)),lF(r,o,n.error);if(n.status==="redirected")throw Uu(Fs(n.error)),r.getMatch(n.id)?._nonReactive.loadPromise;if(n.status==="error"){if(r.isServer){const c=(o.options.errorComponent??r.options.defaultErrorComponent)||tE;return ze.jsx(c,{error:n.error,reset:void 0,info:{componentStack:""}})}throw n.error}return u}),fF=z.memo(function(){const t=Qa(),r=z.useContext(rE),n=Pa({select:f=>f.matches.find(h=>h.id===r)?.routeId}),i=t.routesById[n],a=Pa({select:f=>{const p=f.matches.find(m=>m.id===r);return Uu(p),p.globalNotFound}}),o=Pa({select:f=>{const h=f.matches,p=h.findIndex(m=>m.id===r);return h[p+1]?.id}}),u=t.options.defaultPendingComponent?ze.jsx(t.options.defaultPendingComponent,{}):null;if(a)return lF(t,i,void 0);if(!o)return null;const c=ze.jsx(cF,{matchId:o});return r===go?ze.jsx(z.Suspense,{fallback:u,children:c}):c});function ZV(){const e=Qa(),t=e.options.defaultPendingComponent?ze.jsx(e.options.defaultPendingComponent,{}):null,r=e.isServer||typeof document<"u"&&e.ssr?yh:z.Suspense,n=ze.jsxs(r,{fallback:t,children:[!e.isServer&&ze.jsx(XV,{}),ze.jsx(KV,{})]});return e.options.InnerWrap?ze.jsx(e.options.InnerWrap,{children:n}):n}function KV(){const e=Qa(),t=Pa({select:i=>i.matches[0]?.id}),r=Pa({select:i=>i.loadedAt}),n=t?ze.jsx(cF,{matchId:t}):null;return ze.jsx(rE.Provider,{value:t,children:e.options.disableGlobalCatchBoundary?n:ze.jsx(N2,{getResetKey:()=>r,errorComponent:tE,onCatch:i=>{i.message||i.toString()},children:n})})}const QV=e=>new JV(e);class JV extends dV{constructor(t){super(t)}}typeof globalThis<"u"?(globalThis.createFileRoute=HO,globalThis.createLazyFileRoute=qO):typeof window<"u"&&(window.createFileRoute=HO,window.createLazyFileRoute=qO);function eH({router:e,children:t,...r}){Object.keys(r).length>0&&e.update({...e.options,...r,context:{...e.options.context,...r.context}});const n=uF(),i=ze.jsx(n.Provider,{value:e,children:t});return e.options.Wrap?ze.jsx(e.options.Wrap,{children:i}):i}function tH({router:e,...t}){return ze.jsx(eH,{router:e,...t,children:ze.jsx(ZV,{})})}var Y1={exports:{}},Nv={},Z1={exports:{}},K1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $O;function rH(){return $O||($O=1,(function(e){function t(O,k){var V=O.length;O.push(k);e:for(;0<V;){var ee=V-1>>>1,oe=O[ee];if(0<i(oe,k))O[ee]=k,O[V]=oe,V=ee;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var k=O[0],V=O.pop();if(V!==k){O[0]=V;e:for(var ee=0,oe=O.length,ge=oe>>>1;ee<ge;){var Ee=2*(ee+1)-1,De=O[Ee],tt=Ee+1,$e=O[tt];if(0>i(De,V))tt<oe&&0>i($e,De)?(O[ee]=$e,O[tt]=V,ee=tt):(O[ee]=De,O[Ee]=V,ee=Ee);else if(tt<oe&&0>i($e,V))O[ee]=$e,O[tt]=V,ee=tt;else break e}}return k}function i(O,k){var V=O.sortIndex-k.sortIndex;return V!==0?V:O.id-k.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,u=o.now();e.unstable_now=function(){return o.now()-u}}var c=[],f=[],h=1,p=null,m=3,_=!1,y=!1,E=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function M(O){for(var k=r(f);k!==null;){if(k.callback===null)n(f);else if(k.startTime<=O)n(f),k.sortIndex=k.expirationTime,t(c,k);else break;k=r(f)}}function P(O){if(E=!1,M(O),!y)if(r(c)!==null)y=!0,I||(I=!0,x());else{var k=r(f);k!==null&&fe(P,k.startTime-O)}}var I=!1,w=-1,U=5,re=-1;function K(){return b?!0:!(e.unstable_now()-re<U)}function H(){if(b=!1,I){var O=e.unstable_now();re=O;var k=!0;try{e:{y=!1,E&&(E=!1,A(w),w=-1),_=!0;var V=m;try{t:{for(M(O),p=r(c);p!==null&&!(p.expirationTime>O&&K());){var ee=p.callback;if(typeof ee=="function"){p.callback=null,m=p.priorityLevel;var oe=ee(p.expirationTime<=O);if(O=e.unstable_now(),typeof oe=="function"){p.callback=oe,M(O),k=!0;break t}p===r(c)&&n(c),M(O)}else n(c);p=r(c)}if(p!==null)k=!0;else{var ge=r(f);ge!==null&&fe(P,ge.startTime-O),k=!1}}break e}finally{p=null,m=V,_=!1}k=void 0}}finally{k?x():I=!1}}}var x;if(typeof R=="function")x=function(){R(H)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,j=N.port2;N.port1.onmessage=H,x=function(){j.postMessage(null)}}else x=function(){S(H,0)};function fe(O,k){w=S(function(){O(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(O){switch(m){case 1:case 2:case 3:var k=3;break;default:k=m}var V=m;m=k;try{return O()}finally{m=V}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(O,k){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var V=m;m=O;try{return k()}finally{m=V}},e.unstable_scheduleCallback=function(O,k,V){var ee=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ee+V:ee):V=ee,O){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=V+oe,O={id:h++,callback:k,priorityLevel:O,startTime:V,expirationTime:oe,sortIndex:-1},V>ee?(O.sortIndex=V,t(f,O),r(c)===null&&O===r(f)&&(E?(A(w),w=-1):E=!0,fe(P,V-ee))):(O.sortIndex=oe,t(c,O),y||_||(y=!0,I||(I=!0,x()))),O},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(O){var k=m;return function(){var V=m;m=k;try{return O.apply(this,arguments)}finally{m=V}}}})(K1)),K1}var YO;function nH(){return YO||(YO=1,Z1.exports=rH()),Z1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZO;function iH(){if(ZO)return Nv;ZO=1;var e=nH(),t=Qy(),r=PB();function n(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(n(188))}function c(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(n(188));return l!==s?null:s}for(var d=s,v=l;;){var g=d.return;if(g===null)break;var T=g.alternate;if(T===null){if(v=g.return,v!==null){d=v;continue}break}if(g.child===T.child){for(T=g.child;T;){if(T===d)return u(g),s;if(T===v)return u(g),l;T=T.sibling}throw Error(n(188))}if(d.return!==v.return)d=g,v=T;else{for(var L=!1,q=g.child;q;){if(q===d){L=!0,d=g,v=T;break}if(q===v){L=!0,v=g,d=T;break}q=q.sibling}if(!L){for(q=T.child;q;){if(q===d){L=!0,d=T,v=g;break}if(q===v){L=!0,v=T,d=g;break}q=q.sibling}if(!L)throw Error(n(189))}}if(d.alternate!==v)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?s:l}function f(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=f(s),l!==null)return l;s=s.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),R=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function x(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var N=Symbol.for("react.client.reference");function j(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===N?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case y:return"Fragment";case b:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case I:return"SuspenseList";case re:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case R:return(s.displayName||"Context")+".Provider";case A:return(s._context.displayName||"Context")+".Consumer";case M:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case w:return l=s.displayName||null,l!==null?l:j(s.type)||"Memo";case U:l=s._payload,s=s._init;try{return j(s(l))}catch{}}return null}var fe=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},ee=[],oe=-1;function ge(s){return{current:s}}function Ee(s){0>oe||(s.current=ee[oe],ee[oe]=null,oe--)}function De(s,l){oe++,ee[oe]=s.current,s.current=l}var tt=ge(null),$e=ge(null),It=ge(null),qe=ge(null);function St(s,l){switch(De(It,l),De($e,s),De(tt,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?H3(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=H3(l),s=X3(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Ee(tt),De(tt,s)}function ke(){Ee(tt),Ee($e),Ee(It)}function _e(s){s.memoizedState!==null&&De(qe,s);var l=tt.current,d=X3(l,s.type);l!==d&&(De($e,s),De(tt,d))}function ot(s){$e.current===s&&(Ee(tt),Ee($e)),qe.current===s&&(Ee(qe),Tv._currentValue=V)}var Ce=Object.prototype.hasOwnProperty,Wt=e.unstable_scheduleCallback,Xt=e.unstable_cancelCallback,bt=e.unstable_shouldYield,Pt=e.unstable_requestPaint,Nt=e.unstable_now,Jt=e.unstable_getCurrentPriorityLevel,Br=e.unstable_ImmediatePriority,se=e.unstable_UserBlockingPriority,be=e.unstable_NormalPriority,Fe=e.unstable_LowPriority,F=e.unstable_IdlePriority,vt=e.log,ht=e.unstable_setDisableYieldValue,Ft=null,sr=null;function fr(s){if(typeof vt=="function"&&ht(s),sr&&typeof sr.setStrictMode=="function")try{sr.setStrictMode(Ft,s)}catch{}}var dr=Math.clz32?Math.clz32:oi,Fn=Math.log,En=Math.LN2;function oi(s){return s>>>=0,s===0?32:31-(Fn(s)/En|0)|0}var Kr=256,mn=4194304;function Hi(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ra(s,l,d){var v=s.pendingLanes;if(v===0)return 0;var g=0,T=s.suspendedLanes,L=s.pingedLanes;s=s.warmLanes;var q=v&134217727;return q!==0?(v=q&~T,v!==0?g=Hi(v):(L&=q,L!==0?g=Hi(L):d||(d=q&~s,d!==0&&(g=Hi(d))))):(q=v&~T,q!==0?g=Hi(q):L!==0?g=Hi(L):d||(d=v&~s,d!==0&&(g=Hi(d)))),g===0?0:l!==0&&l!==g&&(l&T)===0&&(T=g&-g,d=l&-l,T>=d||T===32&&(d&4194048)!==0)?l:g}function Ba(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Oo(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kf(){var s=Kr;return Kr<<=1,(Kr&4194048)===0&&(Kr=256),s}function Qf(){var s=mn;return mn<<=1,(mn&62914560)===0&&(mn=4194304),s}function Zs(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function Mo(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Cc(s,l,d,v,g,T){var L=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var q=s.entanglements,ce=s.expirationTimes,Pe=s.hiddenUpdates;for(d=L&~d;0<d;){var it=31-dr(d),pt=1<<it;q[it]=0,ce[it]=-1;var je=Pe[it];if(je!==null)for(Pe[it]=null,it=0;it<je.length;it++){var He=je[it];He!==null&&(He.lane&=-536870913)}d&=~pt}v!==0&&Jf(s,v,0),T!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=T&~(L&~l))}function Jf(s,l,d){s.pendingLanes|=l,s.suspendedLanes&=~l;var v=31-dr(l);s.entangledLanes|=l,s.entanglements[v]=s.entanglements[v]|1073741824|d&4194090}function Ri(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var v=31-dr(d),g=1<<v;g&l|s[v]&l&&(s[v]|=l),d&=~g}}function Oc(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function qu(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ed(){var s=k.p;return s!==0?s:(s=window.event,s===void 0?32:lO(s.type))}function gp(s,l){var d=k.p;try{return k.p=s,l()}finally{k.p=d}}var eo=Math.random().toString(36).slice(2),Gn="__reactFiber$"+eo,Ci="__reactProps$"+eo,cs="__reactContainer$"+eo,Ks="__reactEvents$"+eo,Wu="__reactListeners$"+eo,bn="__reactHandles$"+eo,Mc="__reactResources$"+eo,Qs="__reactMarker$"+eo;function $u(s){delete s[Gn],delete s[Ci],delete s[Ks],delete s[Wu],delete s[bn]}function wo(s){var l=s[Gn];if(l)return l;for(var d=s.parentNode;d;){if(l=d[cs]||d[Gn]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=$3(s);s!==null;){if(d=s[Gn])return d;s=$3(s)}return l}s=d,d=s.parentNode}return null}function No(s){if(s=s[Gn]||s[cs]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function fs(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(n(33))}function to(s){var l=s[Mc];return l||(l=s[Mc]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function dn(s){s[Qs]=!0}var ds=new Set,hs={};function ga(s,l){ro(s,l),ro(s+"Capture",l)}function ro(s,l){for(hs[s]=l,s=0;s<l.length;s++)ds.add(l[s])}var yp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),td={},Js={};function Xi(s){return Ce.call(Js,s)?!0:Ce.call(td,s)?!1:yp.test(s)?Js[s]=!0:(td[s]=!0,!1)}function Fa(s,l,d){if(Xi(l))if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var v=l.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+d)}}function na(s,l,d){if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+d)}}function ti(s,l,d,v){if(v===null)s.removeAttribute(d);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(l,d,""+v)}}var Io,ia;function Oi(s){if(Io===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Io=l&&l[1]||"",ia=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Io+s+ia}var Yu=!1;function Zu(s,l){if(!s||Yu)return"";Yu=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(l){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(He){var je=He}Reflect.construct(s,[],pt)}else{try{pt.call()}catch(He){je=He}s.call(pt.prototype)}}else{try{throw Error()}catch(He){je=He}(pt=s())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(He){if(He&&je&&typeof He.stack=="string")return[He.stack,je.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=v.DetermineComponentFrameRoot(),L=T[0],q=T[1];if(L&&q){var ce=L.split(`
`),Pe=q.split(`
`);for(g=v=0;v<ce.length&&!ce[v].includes("DetermineComponentFrameRoot");)v++;for(;g<Pe.length&&!Pe[g].includes("DetermineComponentFrameRoot");)g++;if(v===ce.length||g===Pe.length)for(v=ce.length-1,g=Pe.length-1;1<=v&&0<=g&&ce[v]!==Pe[g];)g--;for(;1<=v&&0<=g;v--,g--)if(ce[v]!==Pe[g]){if(v!==1||g!==1)do if(v--,g--,0>g||ce[v]!==Pe[g]){var it=`
`+ce[v].replace(" at new "," at ");return s.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",s.displayName)),it}while(1<=v&&0<=g);break}}}finally{Yu=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?Oi(d):""}function Ku(s){switch(s.tag){case 26:case 27:case 5:return Oi(s.type);case 16:return Oi("Lazy");case 13:return Oi("Suspense");case 19:return Oi("SuspenseList");case 0:case 15:return Zu(s.type,!1);case 11:return Zu(s.type.render,!1);case 1:return Zu(s.type,!0);case 31:return Oi("Activity");default:return""}}function Gi(s){try{var l="";do l+=Ku(s),s=s.return;while(s);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function mi(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Po(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Qu(s){var l=Po(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),v=""+s[l];if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,T=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return g.call(this)},set:function(L){v=""+L,T.call(this,L)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return v},setValue:function(L){v=""+L},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function ps(s){s._valueTracker||(s._valueTracker=Qu(s))}function Ju(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),v="";return s&&(v=Po(s)?s.checked?"true":"false":s.value),s=v,s!==d?(l.setValue(s),!0):!1}function aa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ya=/[\n"\\]/g;function Bi(s){return s.replace(ya,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function vs(s,l,d,v,g,T,L,q){s.name="",L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?s.type=L:s.removeAttribute("type"),l!=null?L==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+mi(l)):s.value!==""+mi(l)&&(s.value=""+mi(l)):L!=="submit"&&L!=="reset"||s.removeAttribute("value"),l!=null?tl(s,L,mi(l)):d!=null?tl(s,L,mi(d)):v!=null&&s.removeAttribute("value"),g==null&&T!=null&&(s.defaultChecked=!!T),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?s.name=""+mi(q):s.removeAttribute("name")}function el(s,l,d,v,g,T,L,q){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.type=T),l!=null||d!=null){if(!(T!=="submit"&&T!=="reset"||l!=null))return;d=d!=null?""+mi(d):"",l=l!=null?""+mi(l):d,q||l===s.value||(s.value=l),s.defaultValue=l}v=v??g,v=typeof v!="function"&&typeof v!="symbol"&&!!v,s.checked=q?s.checked:!!v,s.defaultChecked=!!v,L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(s.name=L)}function tl(s,l,d){l==="number"&&aa(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function ms(s,l,d,v){if(s=s.options,l){l={};for(var g=0;g<d.length;g++)l["$"+d[g]]=!0;for(d=0;d<s.length;d++)g=l.hasOwnProperty("$"+s[d].value),s[d].selected!==g&&(s[d].selected=g),g&&v&&(s[d].defaultSelected=!0)}else{for(d=""+mi(d),l=null,g=0;g<s.length;g++){if(s[g].value===d){s[g].selected=!0,v&&(s[g].defaultSelected=!0);return}l!==null||s[g].disabled||(l=s[g])}l!==null&&(l.selected=!0)}}function rd(s,l,d){if(l!=null&&(l=""+mi(l),l!==s.value&&(s.value=l),d==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=d!=null?""+mi(d):""}function G(s,l,d,v){if(l==null){if(v!=null){if(d!=null)throw Error(n(92));if(fe(v)){if(1<v.length)throw Error(n(93));v=v[0]}d=v}d==null&&(d=""),l=d}d=mi(l),s.defaultValue=d,v=s.textContent,v===d&&v!==""&&v!==null&&(s.value=v)}function Z(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var he=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ve(s,l,d){var v=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?v?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":v?s.setProperty(l,d):typeof d!="number"||d===0||he.has(l)?l==="float"?s.cssFloat=d:s[l]=(""+d).trim():s[l]=d+"px"}function yt(s,l,d){if(l!=null&&typeof l!="object")throw Error(n(62));if(s=s.style,d!=null){for(var v in d)!d.hasOwnProperty(v)||l!=null&&l.hasOwnProperty(v)||(v.indexOf("--")===0?s.setProperty(v,""):v==="float"?s.cssFloat="":s[v]="");for(var g in l)v=l[g],l.hasOwnProperty(g)&&d[g]!==v&&Ve(s,g,v)}else for(var T in l)l.hasOwnProperty(T)&&Ve(s,T,l[T])}function Ut(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Un(s){return Zn.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var qn=null;function qi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var rl=null,nl=null;function E_(s){var l=No(s);if(l&&(s=l.stateNode)){var d=s[Ci]||null;e:switch(s=l.stateNode,l.type){case"input":if(vs(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Bi(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var v=d[l];if(v!==s&&v.form===s.form){var g=v[Ci]||null;if(!g)throw Error(n(90));vs(v,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(l=0;l<d.length;l++)v=d[l],v.form===s.form&&Ju(v)}break e;case"textarea":rd(s,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&ms(s,!!d.multiple,l,!1)}}}var Ep=!1;function b_(s,l,d){if(Ep)return s(l,d);Ep=!0;try{var v=s(l);return v}finally{if(Ep=!1,(rl!==null||nl!==null)&&(Sg(),rl&&(l=rl,s=nl,nl=rl=null,E_(l),s)))for(l=0;l<s.length;l++)E_(s[l])}}function wc(s,l){var d=s.stateNode;if(d===null)return null;var v=d[Ci]||null;if(v===null)return null;d=v[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(s=s.type,v=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!v;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var Do=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lo=!1;if(Do)try{var Nc={};Object.defineProperty(Nc,"passive",{get:function(){Lo=!0}}),window.addEventListener("test",Nc,Nc),window.removeEventListener("test",Nc,Nc)}catch{Lo=!1}var _s=null,il=null,al=null;function bp(){if(al)return al;var s,l=il,d=l.length,v,g="value"in _s?_s.value:_s.textContent,T=g.length;for(s=0;s<d&&l[s]===g[s];s++);var L=d-s;for(v=1;v<=L&&l[d-v]===g[T-v];v++);return al=g.slice(s,1<v?1-v:void 0)}function Ic(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function nd(){return!0}function id(){return!1}function Mi(s){function l(d,v,g,T,L){this._reactName=d,this._targetInst=g,this.type=v,this.nativeEvent=T,this.target=L,this.currentTarget=null;for(var q in s)s.hasOwnProperty(q)&&(d=s[q],this[q]=d?d(T):T[q]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?nd:id,this.isPropagationStopped=id,this}return h(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=nd)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=nd)},persist:function(){},isPersistent:nd}),l}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eu=Mi(Wi),ol=h({},Wi,{view:0,detail:0}),T_=Mi(ol),Tp,Sp,Pc,ad=h({},ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rp,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Pc&&(Pc&&s.type==="mousemove"?(Tp=s.screenX-Pc.screenX,Sp=s.screenY-Pc.screenY):Sp=Tp=0,Pc=s),Tp)},movementY:function(s){return"movementY"in s?s.movementY:Sp}}),S_=Mi(ad),zE=h({},ad,{dataTransfer:0}),jE=Mi(zE),sl=h({},ol,{relatedTarget:0}),Ap=Mi(sl),VE=h({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),Dc=Mi(VE),HE=h({},Wi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ul=Mi(HE),A_=h({},Wi,{data:0}),tu=Mi(A_),x_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XE(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=xp[s])?!!l[s]:!1}function Rp(){return XE}var GE=h({},ol,{key:function(s){if(s.key){var l=x_[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Ic(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ru[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rp,charCode:function(s){return s.type==="keypress"?Ic(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ic(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),R_=Mi(GE),qE=h({},ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C_=Mi(qE),O_=h({},ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rp}),xn=Mi(O_),M_=h({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),WE=Mi(M_),Bo=h({},ad,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),w_=Mi(Bo),od=h({},Wi,{newState:0,oldState:0}),nu=Mi(od),Cp=[9,13,27,32],ll=Do&&"CompositionEvent"in window,Fo=null;Do&&"documentMode"in document&&(Fo=document.documentMode);var sd=Do&&"TextEvent"in window&&!Fo,Op=Do&&(!ll||Fo&&8<Fo&&11>=Fo),ud=" ",Mp=!1;function N_(s,l){switch(s){case"keyup":return Cp.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I_(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var cl=!1;function $E(s,l){switch(s){case"compositionend":return I_(l);case"keypress":return l.which!==32?null:(Mp=!0,ud);case"textInput":return s=l.data,s===ud&&Mp?null:s;default:return null}}function wp(s,l){if(cl)return s==="compositionend"||!ll&&N_(s,l)?(s=bp(),al=il=_s=null,cl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Op&&l.locale!=="ko"?null:l.data;default:return null}}var ld={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cd(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!ld[s.type]:l==="textarea"}function fd(s,l,d,v){rl?nl?nl.push(v):nl=[v]:rl=v,l=Mg(l,"onChange"),0<l.length&&(d=new eu("onChange","change",null,d,v),s.push({event:d,listeners:l}))}var no=null,iu=null;function Np(s){U3(s,0)}function fl(s){var l=fs(s);if(Ju(l))return s}function dd(s,l){if(s==="change")return l}var Ip=!1;if(Do){var hd;if(Do){var pd="oninput"in document;if(!pd){var Pp=document.createElement("div");Pp.setAttribute("oninput","return;"),pd=typeof Pp.oninput=="function"}hd=pd}else hd=!1;Ip=hd&&(!document.documentMode||9<document.documentMode)}function Dp(){no&&(no.detachEvent("onpropertychange",Lp),iu=no=null)}function Lp(s){if(s.propertyName==="value"&&fl(iu)){var l=[];fd(l,iu,s,qi(s)),b_(Np,l)}}function P_(s,l,d){s==="focusin"?(Dp(),no=l,iu=d,no.attachEvent("onpropertychange",Lp)):s==="focusout"&&Dp()}function D_(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return fl(iu)}function dl(s,l){if(s==="click")return fl(l)}function Bp(s,l){if(s==="input"||s==="change")return fl(l)}function Fp(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var _i=typeof Object.is=="function"?Object.is:Fp;function Lc(s,l){if(_i(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),v=Object.keys(l);if(d.length!==v.length)return!1;for(v=0;v<d.length;v++){var g=d[v];if(!Ce.call(l,g)||!_i(s[g],l[g]))return!1}return!0}function L_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function B_(s,l){var d=L_(s);s=0;for(var v;d;){if(d.nodeType===3){if(v=s+d.textContent.length,s<=l&&v>=l)return{node:d,offset:l-s};s=v}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=L_(d)}}function vd(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?vd(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function F_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=aa(s.document);l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=aa(s.document)}return l}function Up(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var YE=Do&&"documentMode"in document&&11>=document.documentMode,gs=null,kp=null,au=null,md=!1;function zp(s,l,d){var v=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;md||gs==null||gs!==aa(v)||(v=gs,"selectionStart"in v&&Up(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),au&&Lc(au,v)||(au=v,v=Mg(kp,"onSelect"),0<v.length&&(l=new eu("onSelect","select",null,l,d),s.push({event:l,listeners:v}),l.target=gs)))}function Uo(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var hl={animationend:Uo("Animation","AnimationEnd"),animationiteration:Uo("Animation","AnimationIteration"),animationstart:Uo("Animation","AnimationStart"),transitionrun:Uo("Transition","TransitionRun"),transitionstart:Uo("Transition","TransitionStart"),transitioncancel:Uo("Transition","TransitionCancel"),transitionend:Uo("Transition","TransitionEnd")},pl={},U_={};Do&&(U_=document.createElement("div").style,"AnimationEvent"in window||(delete hl.animationend.animation,delete hl.animationiteration.animation,delete hl.animationstart.animation),"TransitionEvent"in window||delete hl.transitionend.transition);function ou(s){if(pl[s])return pl[s];if(!hl[s])return s;var l=hl[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in U_)return pl[s]=l[d];return s}var k_=ou("animationend"),z_=ou("animationiteration"),j_=ou("animationstart"),ZE=ou("transitionrun"),KE=ou("transitionstart"),V_=ou("transitioncancel"),Bc=ou("transitionend"),H_=new Map,vl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vl.push("scrollEnd");function kn(s,l){H_.set(s,l),ga(l,[s])}var su=new WeakMap;function oa(s,l){if(typeof s=="object"&&s!==null){var d=su.get(s);return d!==void 0?d:(l={value:s,source:l,stack:Gi(l)},su.set(s,l),l)}return{value:s,source:l,stack:Gi(l)}}var sa=[],uu=0,_d=0;function Fc(){for(var s=uu,l=_d=uu=0;l<s;){var d=sa[l];sa[l++]=null;var v=sa[l];sa[l++]=null;var g=sa[l];sa[l++]=null;var T=sa[l];if(sa[l++]=null,v!==null&&g!==null){var L=v.pending;L===null?g.next=g:(g.next=L.next,L.next=g),v.pending=g}T!==0&&ri(d,g,T)}}function Uc(s,l,d,v){sa[uu++]=s,sa[uu++]=l,sa[uu++]=d,sa[uu++]=v,_d|=v,s.lanes|=v,s=s.alternate,s!==null&&(s.lanes|=v)}function jp(s,l,d,v){return Uc(s,l,d,v),kc(s)}function Ua(s,l){return Uc(s,null,null,l),kc(s)}function ri(s,l,d){s.lanes|=d;var v=s.alternate;v!==null&&(v.lanes|=d);for(var g=!1,T=s.return;T!==null;)T.childLanes|=d,v=T.alternate,v!==null&&(v.childLanes|=d),T.tag===22&&(s=T.stateNode,s===null||s._visibility&1||(g=!0)),s=T,T=T.return;return s.tag===3?(T=s.stateNode,g&&l!==null&&(g=31-dr(d),s=T.hiddenUpdates,v=s[g],v===null?s[g]=[l]:v.push(l),l.lane=d|536870912),T):null}function kc(s){if(50<pv)throw pv=0,l1=null,Error(n(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var lu={};function cu(s,l,d,v){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $i(s,l,d,v){return new cu(s,l,d,v)}function gd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ko(s,l){var d=s.alternate;return d===null?(d=$i(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&65011712,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function X_(s,l){s.flags&=65011714;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,l=d.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function yd(s,l,d,v,g,T){var L=0;if(v=s,typeof s=="function")gd(s)&&(L=1);else if(typeof s=="string")L=_z(s,d,tt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case re:return s=$i(31,d,l,g),s.elementType=re,s.lanes=T,s;case y:return fu(d.children,g,T,l);case E:L=8,g|=24;break;case b:return s=$i(12,d,l,g|2),s.elementType=b,s.lanes=T,s;case P:return s=$i(13,d,l,g),s.elementType=P,s.lanes=T,s;case I:return s=$i(19,d,l,g),s.elementType=I,s.lanes=T,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case S:case R:L=10;break e;case A:L=9;break e;case M:L=11;break e;case w:L=14;break e;case U:L=16,v=null;break e}L=29,d=Error(n(130,s===null?"null":typeof s,"")),v=null}return l=$i(L,d,l,g),l.elementType=s,l.type=v,l.lanes=T,l}function fu(s,l,d,v){return s=$i(7,s,v,l),s.lanes=d,s}function zc(s,l,d){return s=$i(6,s,null,l),s.lanes=d,s}function Ed(s,l,d){return l=$i(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var ml=[],du=0,jc=null,bd=0,Fi=[],Ea=0,Yi=null,ba=1,io="";function ys(s,l){ml[du++]=bd,ml[du++]=jc,jc=s,bd=l}function Vp(s,l,d){Fi[Ea++]=ba,Fi[Ea++]=io,Fi[Ea++]=Yi,Yi=s;var v=ba;s=io;var g=32-dr(v)-1;v&=~(1<<g),d+=1;var T=32-dr(l)+g;if(30<T){var L=g-g%5;T=(v&(1<<L)-1).toString(32),v>>=L,g-=L,ba=1<<32-dr(l)+g|d<<g|v,io=T+s}else ba=1<<T|d<<g|v,io=s}function Td(s){s.return!==null&&(ys(s,1),Vp(s,1,0))}function Sd(s){for(;s===jc;)jc=ml[--du],ml[du]=null,bd=ml[--du],ml[du]=null;for(;s===Yi;)Yi=Fi[--Ea],Fi[Ea]=null,io=Fi[--Ea],Fi[Ea]=null,ba=Fi[--Ea],Fi[Ea]=null}var wi=null,Rn=null,Yr=!1,Es=null,Kn=!1,Ad=Error(n(519));function hu(s){var l=Error(n(418,""));throw _l(oa(l,s)),Ad}function ao(s){var l=s.stateNode,d=s.type,v=s.memoizedProps;switch(l[Gn]=s,l[Ci]=v,d){case"dialog":Gr("cancel",l),Gr("close",l);break;case"iframe":case"object":case"embed":Gr("load",l);break;case"video":case"audio":for(d=0;d<mv.length;d++)Gr(mv[d],l);break;case"source":Gr("error",l);break;case"img":case"image":case"link":Gr("error",l),Gr("load",l);break;case"details":Gr("toggle",l);break;case"input":Gr("invalid",l),el(l,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),ps(l);break;case"select":Gr("invalid",l);break;case"textarea":Gr("invalid",l),G(l,v.value,v.defaultValue,v.children),ps(l)}d=v.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||v.suppressHydrationWarning===!0||V3(l.textContent,d)?(v.popover!=null&&(Gr("beforetoggle",l),Gr("toggle",l)),v.onScroll!=null&&Gr("scroll",l),v.onScrollEnd!=null&&Gr("scrollend",l),v.onClick!=null&&(l.onclick=wg),l=!0):l=!1,l||hu(s)}function xd(s){for(wi=s.return;wi;)switch(wi.tag){case 5:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:wi=wi.return}}function ka(s){if(s!==wi)return!1;if(!Yr)return xd(s),Yr=!0,!1;var l=s.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||x1(s.type,s.memoizedProps)),d=!d),d&&Rn&&hu(s),xd(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(d=s.data,d==="/$"){if(l===0){Rn=Yo(s.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;s=s.nextSibling}Rn=null}}else l===27?(l=Rn,Fl(s.type)?(s=M1,M1=null,Rn=s):Rn=l):Rn=wi?Yo(s.stateNode.nextSibling):null;return!0}function bs(){Rn=wi=null,Yr=!1}function Hp(){var s=Es;return s!==null&&(Aa===null?Aa=s:Aa.push.apply(Aa,s),Es=null),s}function _l(s){Es===null?Es=[s]:Es.push(s)}var Rd=ge(null),Ts=null,oo=null;function Ss(s,l,d){De(Rd,l._currentValue),l._currentValue=d}function zo(s){s._currentValue=Rd.current,Ee(Rd)}function Xp(s,l,d){for(;s!==null;){var v=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,v!==null&&(v.childLanes|=l)):v!==null&&(v.childLanes&l)!==l&&(v.childLanes|=l),s===d)break;s=s.return}}function Gp(s,l,d,v){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var T=g.dependencies;if(T!==null){var L=g.child;T=T.firstContext;e:for(;T!==null;){var q=T;T=g;for(var ce=0;ce<l.length;ce++)if(q.context===l[ce]){T.lanes|=d,q=T.alternate,q!==null&&(q.lanes|=d),Xp(T.return,d,s),v||(L=null);break e}T=q.next}}else if(g.tag===18){if(L=g.return,L===null)throw Error(n(341));L.lanes|=d,T=L.alternate,T!==null&&(T.lanes|=d),Xp(L,d,s),L=null}else L=g.child;if(L!==null)L.return=g;else for(L=g;L!==null;){if(L===s){L=null;break}if(g=L.sibling,g!==null){g.return=L.return,L=g;break}L=L.return}g=L}}function Vc(s,l,d,v){s=null;for(var g=l,T=!1;g!==null;){if(!T){if((g.flags&524288)!==0)T=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var L=g.alternate;if(L===null)throw Error(n(387));if(L=L.memoizedProps,L!==null){var q=g.type;_i(g.pendingProps.value,L.value)||(s!==null?s.push(q):s=[q])}}else if(g===qe.current){if(L=g.alternate,L===null)throw Error(n(387));L.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Tv):s=[Tv])}g=g.return}s!==null&&Gp(l,s,d,v),l.flags|=262144}function Cd(s){for(s=s.firstContext;s!==null;){if(!_i(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function pu(s){Ts=s,oo=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function gi(s){return G_(Ts,s)}function Hc(s,l){return Ts===null&&pu(s),G_(s,l)}function G_(s,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},oo===null){if(s===null)throw Error(n(308));oo=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else oo=oo.next=l;return d}var QE=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(d,v){s.push(v)}};this.abort=function(){l.aborted=!0,s.forEach(function(d){return d()})}},qp=e.unstable_scheduleCallback,Od=e.unstable_NormalPriority,ni={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wp(){return{controller:new QE,data:new Map,refCount:0}}function Xc(s){s.refCount--,s.refCount===0&&qp(Od,function(){s.controller.abort()})}var Gc=null,$p=0,vu=0,gl=null;function JE(s,l){if(Gc===null){var d=Gc=[];$p=0,vu=m1(),gl={status:"pending",value:void 0,then:function(v){d.push(v)}}}return $p++,l.then(q_,q_),l}function q_(){if(--$p===0&&Gc!==null){gl!==null&&(gl.status="fulfilled");var s=Gc;Gc=null,vu=0,gl=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function e1(s,l){var d=[],v={status:"pending",value:null,reason:null,then:function(g){d.push(g)}};return s.then(function(){v.status="fulfilled",v.value=l;for(var g=0;g<d.length;g++)(0,d[g])(l)},function(g){for(v.status="rejected",v.reason=g,g=0;g<d.length;g++)(0,d[g])(void 0)}),v}var W_=O.S;O.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&JE(s,l),W_!==null&&W_(s,l)};var Ta=ge(null);function Yp(){var s=Ta.current;return s!==null?s:gr.pooledCache}function Md(s,l){l===null?De(Ta,Ta.current):De(Ta,l.pool)}function Zp(){var s=Yp();return s===null?null:{parent:ni._currentValue,pool:s}}var mu=Error(n(460)),$_=Error(n(474)),qc=Error(n(542)),Kp={then:function(){}};function Y_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function wd(){}function Z_(s,l,d){switch(d=s[d],d===void 0?s.push(l):d!==l&&(l.then(wd,wd),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,K_(s),s;default:if(typeof l.status=="string")l.then(wd,wd);else{if(s=gr,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=l,s.status="pending",s.then(function(v){if(l.status==="pending"){var g=l;g.status="fulfilled",g.value=v}},function(v){if(l.status==="pending"){var g=l;g.status="rejected",g.reason=v}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,K_(s),s}throw Wc=l,mu}}var Wc=null;function yl(){if(Wc===null)throw Error(n(459));var s=Wc;return Wc=null,s}function K_(s){if(s===mu||s===qc)throw Error(n(483))}var za=!1;function Qp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function As(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ua(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function xs(s,l,d){var v=s.updateQueue;if(v===null)return null;if(v=v.shared,(Gt&2)!==0){var g=v.pending;return g===null?l.next=l:(l.next=g.next,g.next=l),v.pending=l,l=kc(s),ri(s,null,d),l}return Uc(s,v,l,d),kc(s)}function so(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var v=l.lanes;v&=s.pendingLanes,d|=v,l.lanes=d,Ri(s,d)}}function Nd(s,l){var d=s.updateQueue,v=s.alternate;if(v!==null&&(v=v.updateQueue,d===v)){var g=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var L={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};T===null?g=T=L:T=T.next=L,d=d.next}while(d!==null);T===null?g=T=l:T=T.next=l}else g=T=l;d={baseState:v.baseState,firstBaseUpdate:g,lastBaseUpdate:T,shared:v.shared,callbacks:v.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}var Rs=!1;function _u(){if(Rs){var s=gl;if(s!==null)throw s}}function El(s,l,d,v){Rs=!1;var g=s.updateQueue;za=!1;var T=g.firstBaseUpdate,L=g.lastBaseUpdate,q=g.shared.pending;if(q!==null){g.shared.pending=null;var ce=q,Pe=ce.next;ce.next=null,L===null?T=Pe:L.next=Pe,L=ce;var it=s.alternate;it!==null&&(it=it.updateQueue,q=it.lastBaseUpdate,q!==L&&(q===null?it.firstBaseUpdate=Pe:q.next=Pe,it.lastBaseUpdate=ce))}if(T!==null){var pt=g.baseState;L=0,it=Pe=ce=null,q=T;do{var je=q.lane&-536870913,He=je!==q.lane;if(He?(zr&je)===je:(v&je)===je){je!==0&&je===vu&&(Rs=!0),it!==null&&(it=it.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var Tr=s,vr=q;je=l;var pn=d;switch(vr.tag){case 1:if(Tr=vr.payload,typeof Tr=="function"){pt=Tr.call(pn,pt,je);break e}pt=Tr;break e;case 3:Tr.flags=Tr.flags&-65537|128;case 0:if(Tr=vr.payload,je=typeof Tr=="function"?Tr.call(pn,pt,je):Tr,je==null)break e;pt=h({},pt,je);break e;case 2:za=!0}}je=q.callback,je!==null&&(s.flags|=64,He&&(s.flags|=8192),He=g.callbacks,He===null?g.callbacks=[je]:He.push(je))}else He={lane:je,tag:q.tag,payload:q.payload,callback:q.callback,next:null},it===null?(Pe=it=He,ce=pt):it=it.next=He,L|=je;if(q=q.next,q===null){if(q=g.shared.pending,q===null)break;He=q,q=He.next,He.next=null,g.lastBaseUpdate=He,g.shared.pending=null}}while(!0);it===null&&(ce=pt),g.baseState=ce,g.firstBaseUpdate=Pe,g.lastBaseUpdate=it,T===null&&(g.shared.lanes=0),Pl|=L,s.lanes=L,s.memoizedState=pt}}function Jp(s,l){if(typeof s!="function")throw Error(n(191,s));s.call(l)}function ev(s,l){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)Jp(d[s],l)}var gu=ge(null),bl=ge(0);function tv(s,l){s=Ru,De(bl,s),De(gu,l),Ru=s|l.baseLanes}function Id(){De(bl,Ru),De(gu,gu.current)}function Pd(){Ru=bl.current,Ee(gu),Ee(bl)}var uo=0,Mr=null,on=null,Wn=null,$c=!1,yu=!1,jo=!1,Yc=0,Tl=0,Cs=null,rv=0;function zn(){throw Error(n(321))}function Zc(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!_i(s[d],l[d]))return!1;return!0}function Dd(s,l,d,v,g,T){return uo=T,Mr=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,O.H=s===null||s.memoizedState===null?dg:Wo,jo=!1,T=d(v,g),jo=!1,yu&&(T=Ld(l,d,v,g)),nv(s),T}function nv(s){O.H=Gd;var l=on!==null&&on.next!==null;if(uo=0,Wn=on=Mr=null,$c=!1,Tl=0,Cs=null,l)throw Error(n(300));s===null||ii||(s=s.dependencies,s!==null&&Cd(s)&&(ii=!0))}function Ld(s,l,d,v){Mr=s;var g=0;do{if(yu&&(Cs=null),Tl=0,yu=!1,25<=g)throw Error(n(301));if(g+=1,Wn=on=null,s.updateQueue!=null){var T=s.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}O.H=hg,T=l(d,v)}while(yu);return T}function Q_(){var s=O.H,l=s.useState()[0];return l=typeof l.then=="function"?la(l):l,s=s.useState()[0],(on!==null?on.memoizedState:null)!==s&&(Mr.flags|=1024),l}function Bd(){var s=Yc!==0;return Yc=0,s}function Kc(s,l,d){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~d}function Qc(s){if($c){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}$c=!1}uo=0,Wn=on=Mr=null,yu=!1,Tl=Yc=0,Cs=null}function si(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?Mr.memoizedState=Wn=s:Wn=Wn.next=s,Wn}function $n(){if(on===null){var s=Mr.alternate;s=s!==null?s.memoizedState:null}else s=on.next;var l=Wn===null?Mr.memoizedState:Wn.next;if(l!==null)Wn=l,on=s;else{if(s===null)throw Mr.alternate===null?Error(n(467)):Error(n(310));on=s,s={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},Wn===null?Mr.memoizedState=Wn=s:Wn=Wn.next=s}return Wn}function Sl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function la(s){var l=Tl;return Tl+=1,Cs===null&&(Cs=[]),s=Z_(Cs,s,l),l=Mr,(Wn===null?l.memoizedState:Wn.next)===null&&(l=l.alternate,O.H=l===null||l.memoizedState===null?dg:Wo),s}function Os(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return la(s);if(s.$$typeof===R)return gi(s)}throw Error(n(438,String(s)))}function Vo(s){var l=null,d=Mr.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var v=Mr.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(l={data:v.data.map(function(g){return g.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=Sl(),Mr.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(s),v=0;v<s;v++)d[v]=K;return l.index++,d}function ca(s,l){return typeof l=="function"?l(s):l}function Ms(s){var l=$n();return Ho(l,on,s)}function Ho(s,l,d){var v=s.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=d;var g=s.baseQueue,T=v.pending;if(T!==null){if(g!==null){var L=g.next;g.next=T.next,T.next=L}l.baseQueue=g=T,v.pending=null}if(T=s.baseState,g===null)s.memoizedState=T;else{l=g.next;var q=L=null,ce=null,Pe=l,it=!1;do{var pt=Pe.lane&-536870913;if(pt!==Pe.lane?(zr&pt)===pt:(uo&pt)===pt){var je=Pe.revertLane;if(je===0)ce!==null&&(ce=ce.next={lane:0,revertLane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),pt===vu&&(it=!0);else if((uo&je)===je){Pe=Pe.next,je===vu&&(it=!0);continue}else pt={lane:0,revertLane:Pe.revertLane,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},ce===null?(q=ce=pt,L=T):ce=ce.next=pt,Mr.lanes|=je,Pl|=je;pt=Pe.action,jo&&d(T,pt),T=Pe.hasEagerState?Pe.eagerState:d(T,pt)}else je={lane:pt,revertLane:Pe.revertLane,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},ce===null?(q=ce=je,L=T):ce=ce.next=je,Mr.lanes|=pt,Pl|=pt;Pe=Pe.next}while(Pe!==null&&Pe!==l);if(ce===null?L=T:ce.next=q,!_i(T,s.memoizedState)&&(ii=!0,it&&(d=gl,d!==null)))throw d;s.memoizedState=T,s.baseState=L,s.baseQueue=ce,v.lastRenderedState=T}return g===null&&(v.lanes=0),[s.memoizedState,v.dispatch]}function Xo(s){var l=$n(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var v=d.dispatch,g=d.pending,T=l.memoizedState;if(g!==null){d.pending=null;var L=g=g.next;do T=s(T,L.action),L=L.next;while(L!==g);_i(T,l.memoizedState)||(ii=!0),l.memoizedState=T,l.baseQueue===null&&(l.baseState=T),d.lastRenderedState=T}return[T,v]}function ws(s,l,d){var v=Mr,g=$n(),T=Yr;if(T){if(d===void 0)throw Error(n(407));d=d()}else d=l();var L=!_i((on||g).memoizedState,d);L&&(g.memoizedState=d,ii=!0),g=g.queue;var q=Al.bind(null,v,g,s);if(tf(2048,8,q,[s]),g.getSnapshot!==l||L||Wn!==null&&Wn.memoizedState.tag&1){if(v.flags|=2048,xl(9,zd(),ef.bind(null,v,g,d,l),null),gr===null)throw Error(n(349));T||(uo&124)!==0||Jc(v,l,d)}return d}function Jc(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=Mr.updateQueue,l===null?(l=Sl(),Mr.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function ef(s,l,d,v){l.value=d,l.getSnapshot=v,Fd(l)&&Ud(s)}function Al(s,l,d){return d(function(){Fd(l)&&Ud(s)})}function Fd(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!_i(s,d)}catch{return!0}}function Ud(s){var l=Ua(s,2);l!==null&&Ga(l,s,2)}function Ns(s){var l=si();if(typeof s=="function"){var d=s;if(s=d(),jo){fr(!0);try{d()}finally{fr(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:s},l}function Eu(s,l,d,v){return s.baseState=d,Ho(s,on,typeof v=="function"?v:ca)}function t1(s,l,d,v,g){if(ff(s))throw Error(n(485));if(s=l.action,s!==null){var T={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(L){T.listeners.push(L)}};O.T!==null?d(!0):T.isTransition=!1,v(T),d=l.pending,d===null?(T.next=l.pending=T,J_(l,T)):(T.next=d.next,l.pending=d.next=T)}}function J_(s,l){var d=l.action,v=l.payload,g=s.state;if(l.isTransition){var T=O.T,L={};O.T=L;try{var q=d(g,v),ce=O.S;ce!==null&&ce(L,q),iv(s,l,q)}catch(Pe){kd(s,l,Pe)}finally{O.T=T}}else try{T=d(g,v),iv(s,l,T)}catch(Pe){kd(s,l,Pe)}}function iv(s,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(v){av(s,l,v)},function(v){return kd(s,l,v)}):av(s,l,d)}function av(s,l,d){l.status="fulfilled",l.value=d,eg(l),s.state=d,l=s.pending,l!==null&&(d=l.next,d===l?s.pending=null:(d=d.next,l.next=d,J_(s,d)))}function kd(s,l,d){var v=s.pending;if(s.pending=null,v!==null){v=v.next;do l.status="rejected",l.reason=d,eg(l),l=l.next;while(l!==v)}s.action=null}function eg(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function bu(s,l){return l}function tg(s,l){if(Yr){var d=gr.formState;if(d!==null){e:{var v=Mr;if(Yr){if(Rn){t:{for(var g=Rn,T=Kn;g.nodeType!==8;){if(!T){g=null;break t}if(g=Yo(g.nextSibling),g===null){g=null;break t}}T=g.data,g=T==="F!"||T==="F"?g:null}if(g){Rn=Yo(g.nextSibling),v=g.data==="F!";break e}}hu(v)}v=!1}v&&(l=d[0])}}return d=si(),d.memoizedState=d.baseState=l,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bu,lastRenderedState:l},d.queue=v,d=sv.bind(null,Mr,v),v.dispatch=d,v=Ns(!1),T=qo.bind(null,Mr,!1,v.queue),v=si(),g={state:l,dispatch:null,action:s,pending:null},v.queue=g,d=t1.bind(null,Mr,g,T,d),g.dispatch=d,v.memoizedState=s,[l,d,!1]}function rg(s){var l=$n();return ng(l,on,s)}function ng(s,l,d){if(l=Ho(s,l,bu)[0],s=Ms(ca)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var v=la(l)}catch(L){throw L===mu?qc:L}else v=l;l=$n();var g=l.queue,T=g.dispatch;return d!==l.memoizedState&&(Mr.flags|=2048,xl(9,zd(),ig.bind(null,g,d),null)),[v,T,s]}function ig(s,l){s.action=l}function ag(s){var l=$n(),d=on;if(d!==null)return ng(l,d,s);$n(),l=l.memoizedState,d=$n();var v=d.queue.dispatch;return d.memoizedState=s,[l,v,!1]}function xl(s,l,d,v){return s={tag:s,create:d,deps:v,inst:l,next:null},l=Mr.updateQueue,l===null&&(l=Sl(),Mr.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=s.next=s:(v=d.next,d.next=s,s.next=v,l.lastEffect=s),s}function zd(){return{destroy:void 0,resource:void 0}}function og(){return $n().memoizedState}function jd(s,l,d,v){var g=si();v=v===void 0?null:v,Mr.flags|=s,g.memoizedState=xl(1|l,zd(),d,v)}function tf(s,l,d,v){var g=$n();v=v===void 0?null:v;var T=g.memoizedState.inst;on!==null&&v!==null&&Zc(v,on.memoizedState.deps)?g.memoizedState=xl(l,T,d,v):(Mr.flags|=s,g.memoizedState=xl(1|l,T,d,v))}function sg(s,l){jd(8390656,8,s,l)}function ug(s,l){tf(2048,8,s,l)}function lg(s,l){return tf(4,2,s,l)}function cg(s,l){return tf(4,4,s,l)}function Vd(s,l){if(typeof l=="function"){s=s();var d=l(s);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function rf(s,l,d){d=d!=null?d.concat([s]):null,tf(4,4,Vd.bind(null,l,s),d)}function Rl(){}function nf(s,l){var d=$n();l=l===void 0?null:l;var v=d.memoizedState;return l!==null&&Zc(l,v[1])?v[0]:(d.memoizedState=[s,l],s)}function Hd(s,l){var d=$n();l=l===void 0?null:l;var v=d.memoizedState;if(l!==null&&Zc(l,v[1]))return v[0];if(v=s(),jo){fr(!0);try{s()}finally{fr(!1)}}return d.memoizedState=[v,l],v}function Cl(s,l,d){return d===void 0||(uo&1073741824)!==0?s.memoizedState=l:(s.memoizedState=d,s=v3(),Mr.lanes|=s,Pl|=s,d)}function af(s,l,d,v){return _i(d,l)?d:gu.current!==null?(s=Cl(s,d,v),_i(s,l)||(ii=!0),s):(uo&42)===0?(ii=!0,s.memoizedState=d):(s=v3(),Mr.lanes|=s,Pl|=s,l)}function of(s,l,d,v,g){var T=k.p;k.p=T!==0&&8>T?T:8;var L=O.T,q={};O.T=q,qo(s,!1,l,d);try{var ce=g(),Pe=O.S;if(Pe!==null&&Pe(q,ce),ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var it=e1(ce,v);Go(s,l,it,Xa(s))}else Go(s,l,v,Xa(s))}catch(pt){Go(s,l,{then:function(){},status:"rejected",reason:pt},Xa())}finally{k.p=T,O.T=L}}function ov(){}function Ol(s,l,d,v){if(s.tag!==5)throw Error(n(476));var g=sf(s).queue;of(s,g,l,V,d===null?ov:function(){return uf(s),d(v)})}function sf(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:V},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:d},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function uf(s){var l=sf(s).next.queue;Go(s,l,{},Xa())}function Tu(){return gi(Tv)}function Ml(){return $n().memoizedState}function wl(){return $n().memoizedState}function lf(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var d=Xa();s=ua(d);var v=xs(l,s,d);v!==null&&(Ga(v,l,d),so(v,l,d)),l={cache:Wp()},s.payload=l;return}l=l.return}}function cf(s,l,d){var v=Xa();d={lane:v,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},ff(s)?Xd(l,d):(d=jp(s,l,d,v),d!==null&&(Ga(d,s,v),fg(d,l,v)))}function sv(s,l,d){var v=Xa();Go(s,l,d,v)}function Go(s,l,d,v){var g={lane:v,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(ff(s))Xd(l,g);else{var T=s.alternate;if(s.lanes===0&&(T===null||T.lanes===0)&&(T=l.lastRenderedReducer,T!==null))try{var L=l.lastRenderedState,q=T(L,d);if(g.hasEagerState=!0,g.eagerState=q,_i(q,L))return Uc(s,l,g,0),gr===null&&Fc(),!1}catch{}finally{}if(d=jp(s,l,g,v),d!==null)return Ga(d,s,v),fg(d,l,v),!0}return!1}function qo(s,l,d,v){if(v={lane:2,revertLane:m1(),action:v,hasEagerState:!1,eagerState:null,next:null},ff(s)){if(l)throw Error(n(479))}else l=jp(s,d,v,2),l!==null&&Ga(l,s,2)}function ff(s){var l=s.alternate;return s===Mr||l!==null&&l===Mr}function Xd(s,l){yu=$c=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function fg(s,l,d){if((d&4194048)!==0){var v=l.lanes;v&=s.pendingLanes,d|=v,l.lanes=d,Ri(s,d)}}var Gd={readContext:gi,use:Os,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useLayoutEffect:zn,useInsertionEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useSyncExternalStore:zn,useId:zn,useHostTransitionStatus:zn,useFormState:zn,useActionState:zn,useOptimistic:zn,useMemoCache:zn,useCacheRefresh:zn},dg={readContext:gi,use:Os,useCallback:function(s,l){return si().memoizedState=[s,l===void 0?null:l],s},useContext:gi,useEffect:sg,useImperativeHandle:function(s,l,d){d=d!=null?d.concat([s]):null,jd(4194308,4,Vd.bind(null,l,s),d)},useLayoutEffect:function(s,l){return jd(4194308,4,s,l)},useInsertionEffect:function(s,l){jd(4,2,s,l)},useMemo:function(s,l){var d=si();l=l===void 0?null:l;var v=s();if(jo){fr(!0);try{s()}finally{fr(!1)}}return d.memoizedState=[v,l],v},useReducer:function(s,l,d){var v=si();if(d!==void 0){var g=d(l);if(jo){fr(!0);try{d(l)}finally{fr(!1)}}}else g=l;return v.memoizedState=v.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},v.queue=s,s=s.dispatch=cf.bind(null,Mr,s),[v.memoizedState,s]},useRef:function(s){var l=si();return s={current:s},l.memoizedState=s},useState:function(s){s=Ns(s);var l=s.queue,d=sv.bind(null,Mr,l);return l.dispatch=d,[s.memoizedState,d]},useDebugValue:Rl,useDeferredValue:function(s,l){var d=si();return Cl(d,s,l)},useTransition:function(){var s=Ns(!1);return s=of.bind(null,Mr,s.queue,!0,!1),si().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,d){var v=Mr,g=si();if(Yr){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),gr===null)throw Error(n(349));(zr&124)!==0||Jc(v,l,d)}g.memoizedState=d;var T={value:d,getSnapshot:l};return g.queue=T,sg(Al.bind(null,v,T,s),[s]),v.flags|=2048,xl(9,zd(),ef.bind(null,v,T,d,l),null),d},useId:function(){var s=si(),l=gr.identifierPrefix;if(Yr){var d=io,v=ba;d=(v&~(1<<32-dr(v)-1)).toString(32)+d,l=""+l+"R"+d,d=Yc++,0<d&&(l+="H"+d.toString(32)),l+=""}else d=rv++,l=""+l+"r"+d.toString(32)+"";return s.memoizedState=l},useHostTransitionStatus:Tu,useFormState:tg,useActionState:tg,useOptimistic:function(s){var l=si();l.memoizedState=l.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=qo.bind(null,Mr,!0,d),d.dispatch=l,[s,l]},useMemoCache:Vo,useCacheRefresh:function(){return si().memoizedState=lf.bind(null,Mr)}},Wo={readContext:gi,use:Os,useCallback:nf,useContext:gi,useEffect:ug,useImperativeHandle:rf,useInsertionEffect:lg,useLayoutEffect:cg,useMemo:Hd,useReducer:Ms,useRef:og,useState:function(){return Ms(ca)},useDebugValue:Rl,useDeferredValue:function(s,l){var d=$n();return af(d,on.memoizedState,s,l)},useTransition:function(){var s=Ms(ca)[0],l=$n().memoizedState;return[typeof s=="boolean"?s:la(s),l]},useSyncExternalStore:ws,useId:Ml,useHostTransitionStatus:Tu,useFormState:rg,useActionState:rg,useOptimistic:function(s,l){var d=$n();return Eu(d,on,s,l)},useMemoCache:Vo,useCacheRefresh:wl},hg={readContext:gi,use:Os,useCallback:nf,useContext:gi,useEffect:ug,useImperativeHandle:rf,useInsertionEffect:lg,useLayoutEffect:cg,useMemo:Hd,useReducer:Xo,useRef:og,useState:function(){return Xo(ca)},useDebugValue:Rl,useDeferredValue:function(s,l){var d=$n();return on===null?Cl(d,s,l):af(d,on.memoizedState,s,l)},useTransition:function(){var s=Xo(ca)[0],l=$n().memoizedState;return[typeof s=="boolean"?s:la(s),l]},useSyncExternalStore:ws,useId:Ml,useHostTransitionStatus:Tu,useFormState:ag,useActionState:ag,useOptimistic:function(s,l){var d=$n();return on!==null?Eu(d,on,s,l):(d.baseState=s,[s,d.queue.dispatch])},useMemoCache:Vo,useCacheRefresh:wl},Su=null,Nl=0;function qd(s){var l=Nl;return Nl+=1,Su===null&&(Su=[]),Z_(Su,s,l)}function Il(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Wd(s,l){throw l.$$typeof===p?Error(n(525)):(s=Object.prototype.toString.call(l),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function ja(s){var l=s._init;return l(s._payload)}function uv(s){function l(Ae,me){if(s){var Ne=Ae.deletions;Ne===null?(Ae.deletions=[me],Ae.flags|=16):Ne.push(me)}}function d(Ae,me){if(!s)return null;for(;me!==null;)l(Ae,me),me=me.sibling;return null}function v(Ae){for(var me=new Map;Ae!==null;)Ae.key!==null?me.set(Ae.key,Ae):me.set(Ae.index,Ae),Ae=Ae.sibling;return me}function g(Ae,me){return Ae=ko(Ae,me),Ae.index=0,Ae.sibling=null,Ae}function T(Ae,me,Ne){return Ae.index=Ne,s?(Ne=Ae.alternate,Ne!==null?(Ne=Ne.index,Ne<me?(Ae.flags|=67108866,me):Ne):(Ae.flags|=67108866,me)):(Ae.flags|=1048576,me)}function L(Ae){return s&&Ae.alternate===null&&(Ae.flags|=67108866),Ae}function q(Ae,me,Ne,st){return me===null||me.tag!==6?(me=zc(Ne,Ae.mode,st),me.return=Ae,me):(me=g(me,Ne),me.return=Ae,me)}function ce(Ae,me,Ne,st){var Kt=Ne.type;return Kt===y?it(Ae,me,Ne.props.children,st,Ne.key):me!==null&&(me.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===U&&ja(Kt)===me.type)?(me=g(me,Ne.props),Il(me,Ne),me.return=Ae,me):(me=yd(Ne.type,Ne.key,Ne.props,null,Ae.mode,st),Il(me,Ne),me.return=Ae,me)}function Pe(Ae,me,Ne,st){return me===null||me.tag!==4||me.stateNode.containerInfo!==Ne.containerInfo||me.stateNode.implementation!==Ne.implementation?(me=Ed(Ne,Ae.mode,st),me.return=Ae,me):(me=g(me,Ne.children||[]),me.return=Ae,me)}function it(Ae,me,Ne,st,Kt){return me===null||me.tag!==7?(me=fu(Ne,Ae.mode,st,Kt),me.return=Ae,me):(me=g(me,Ne),me.return=Ae,me)}function pt(Ae,me,Ne){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=zc(""+me,Ae.mode,Ne),me.return=Ae,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case m:return Ne=yd(me.type,me.key,me.props,null,Ae.mode,Ne),Il(Ne,me),Ne.return=Ae,Ne;case _:return me=Ed(me,Ae.mode,Ne),me.return=Ae,me;case U:var st=me._init;return me=st(me._payload),pt(Ae,me,Ne)}if(fe(me)||x(me))return me=fu(me,Ae.mode,Ne,null),me.return=Ae,me;if(typeof me.then=="function")return pt(Ae,qd(me),Ne);if(me.$$typeof===R)return pt(Ae,Hc(Ae,me),Ne);Wd(Ae,me)}return null}function je(Ae,me,Ne,st){var Kt=me!==null?me.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return Kt!==null?null:q(Ae,me,""+Ne,st);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case m:return Ne.key===Kt?ce(Ae,me,Ne,st):null;case _:return Ne.key===Kt?Pe(Ae,me,Ne,st):null;case U:return Kt=Ne._init,Ne=Kt(Ne._payload),je(Ae,me,Ne,st)}if(fe(Ne)||x(Ne))return Kt!==null?null:it(Ae,me,Ne,st,null);if(typeof Ne.then=="function")return je(Ae,me,qd(Ne),st);if(Ne.$$typeof===R)return je(Ae,me,Hc(Ae,Ne),st);Wd(Ae,Ne)}return null}function He(Ae,me,Ne,st,Kt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return Ae=Ae.get(Ne)||null,q(me,Ae,""+st,Kt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case m:return Ae=Ae.get(st.key===null?Ne:st.key)||null,ce(me,Ae,st,Kt);case _:return Ae=Ae.get(st.key===null?Ne:st.key)||null,Pe(me,Ae,st,Kt);case U:var jr=st._init;return st=jr(st._payload),He(Ae,me,Ne,st,Kt)}if(fe(st)||x(st))return Ae=Ae.get(Ne)||null,it(me,Ae,st,Kt,null);if(typeof st.then=="function")return He(Ae,me,Ne,qd(st),Kt);if(st.$$typeof===R)return He(Ae,me,Ne,Hc(me,st),Kt);Wd(me,st)}return null}function Tr(Ae,me,Ne,st){for(var Kt=null,jr=null,or=me,_r=me=0,Pi=null;or!==null&&_r<Ne.length;_r++){or.index>_r?(Pi=or,or=null):Pi=or.sibling;var rn=je(Ae,or,Ne[_r],st);if(rn===null){or===null&&(or=Pi);break}s&&or&&rn.alternate===null&&l(Ae,or),me=T(rn,me,_r),jr===null?Kt=rn:jr.sibling=rn,jr=rn,or=Pi}if(_r===Ne.length)return d(Ae,or),Yr&&ys(Ae,_r),Kt;if(or===null){for(;_r<Ne.length;_r++)or=pt(Ae,Ne[_r],st),or!==null&&(me=T(or,me,_r),jr===null?Kt=or:jr.sibling=or,jr=or);return Yr&&ys(Ae,_r),Kt}for(or=v(or);_r<Ne.length;_r++)Pi=He(or,Ae,_r,Ne[_r],st),Pi!==null&&(s&&Pi.alternate!==null&&or.delete(Pi.key===null?_r:Pi.key),me=T(Pi,me,_r),jr===null?Kt=Pi:jr.sibling=Pi,jr=Pi);return s&&or.forEach(function(Vl){return l(Ae,Vl)}),Yr&&ys(Ae,_r),Kt}function vr(Ae,me,Ne,st){if(Ne==null)throw Error(n(151));for(var Kt=null,jr=null,or=me,_r=me=0,Pi=null,rn=Ne.next();or!==null&&!rn.done;_r++,rn=Ne.next()){or.index>_r?(Pi=or,or=null):Pi=or.sibling;var Vl=je(Ae,or,rn.value,st);if(Vl===null){or===null&&(or=Pi);break}s&&or&&Vl.alternate===null&&l(Ae,or),me=T(Vl,me,_r),jr===null?Kt=Vl:jr.sibling=Vl,jr=Vl,or=Pi}if(rn.done)return d(Ae,or),Yr&&ys(Ae,_r),Kt;if(or===null){for(;!rn.done;_r++,rn=Ne.next())rn=pt(Ae,rn.value,st),rn!==null&&(me=T(rn,me,_r),jr===null?Kt=rn:jr.sibling=rn,jr=rn);return Yr&&ys(Ae,_r),Kt}for(or=v(or);!rn.done;_r++,rn=Ne.next())rn=He(or,Ae,_r,rn.value,st),rn!==null&&(s&&rn.alternate!==null&&or.delete(rn.key===null?_r:rn.key),me=T(rn,me,_r),jr===null?Kt=rn:jr.sibling=rn,jr=rn);return s&&or.forEach(function(Mz){return l(Ae,Mz)}),Yr&&ys(Ae,_r),Kt}function pn(Ae,me,Ne,st){if(typeof Ne=="object"&&Ne!==null&&Ne.type===y&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case m:e:{for(var Kt=Ne.key;me!==null;){if(me.key===Kt){if(Kt=Ne.type,Kt===y){if(me.tag===7){d(Ae,me.sibling),st=g(me,Ne.props.children),st.return=Ae,Ae=st;break e}}else if(me.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===U&&ja(Kt)===me.type){d(Ae,me.sibling),st=g(me,Ne.props),Il(st,Ne),st.return=Ae,Ae=st;break e}d(Ae,me);break}else l(Ae,me);me=me.sibling}Ne.type===y?(st=fu(Ne.props.children,Ae.mode,st,Ne.key),st.return=Ae,Ae=st):(st=yd(Ne.type,Ne.key,Ne.props,null,Ae.mode,st),Il(st,Ne),st.return=Ae,Ae=st)}return L(Ae);case _:e:{for(Kt=Ne.key;me!==null;){if(me.key===Kt)if(me.tag===4&&me.stateNode.containerInfo===Ne.containerInfo&&me.stateNode.implementation===Ne.implementation){d(Ae,me.sibling),st=g(me,Ne.children||[]),st.return=Ae,Ae=st;break e}else{d(Ae,me);break}else l(Ae,me);me=me.sibling}st=Ed(Ne,Ae.mode,st),st.return=Ae,Ae=st}return L(Ae);case U:return Kt=Ne._init,Ne=Kt(Ne._payload),pn(Ae,me,Ne,st)}if(fe(Ne))return Tr(Ae,me,Ne,st);if(x(Ne)){if(Kt=x(Ne),typeof Kt!="function")throw Error(n(150));return Ne=Kt.call(Ne),vr(Ae,me,Ne,st)}if(typeof Ne.then=="function")return pn(Ae,me,qd(Ne),st);if(Ne.$$typeof===R)return pn(Ae,me,Hc(Ae,Ne),st);Wd(Ae,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint"?(Ne=""+Ne,me!==null&&me.tag===6?(d(Ae,me.sibling),st=g(me,Ne),st.return=Ae,Ae=st):(d(Ae,me),st=zc(Ne,Ae.mode,st),st.return=Ae,Ae=st),L(Ae)):d(Ae,me)}return function(Ae,me,Ne,st){try{Nl=0;var Kt=pn(Ae,me,Ne,st);return Su=null,Kt}catch(or){if(or===mu||or===qc)throw or;var jr=$i(29,or,null,Ae.mode);return jr.lanes=st,jr.return=Ae,jr}finally{}}}var Va=uv(!0),$o=uv(!1),fa=ge(null),Sa=null;function Ha(s){var l=s.alternate;De(Nr,Nr.current&1),De(fa,s),Sa===null&&(l===null||gu.current!==null||l.memoizedState!==null)&&(Sa=s)}function lv(s){if(s.tag===22){if(De(Nr,Nr.current),De(fa,s),Sa===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(Sa=s)}}else Qn()}function Qn(){De(Nr,Nr.current),De(fa,fa.current)}function Ni(s){Ee(fa),Sa===s&&(Sa=null),Ee(Nr)}var Nr=ge(0);function yi(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||O1(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function $d(s,l,d,v){l=s.memoizedState,d=d(v,l),d=d==null?l:h({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var cv={enqueueSetState:function(s,l,d){s=s._reactInternals;var v=Xa(),g=ua(v);g.payload=l,d!=null&&(g.callback=d),l=xs(s,g,v),l!==null&&(Ga(l,s,v),so(l,s,v))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var v=Xa(),g=ua(v);g.tag=1,g.payload=l,d!=null&&(g.callback=d),l=xs(s,g,v),l!==null&&(Ga(l,s,v),so(l,s,v))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=Xa(),v=ua(d);v.tag=2,l!=null&&(v.callback=l),l=xs(s,v,d),l!==null&&(Ga(l,s,d),so(l,s,d))}};function pg(s,l,d,v,g,T,L){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(v,T,L):l.prototype&&l.prototype.isPureReactComponent?!Lc(d,v)||!Lc(g,T):!0}function vg(s,l,d,v){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,v),l.state!==s&&cv.enqueueReplaceState(l,l.state,null)}function Au(s,l){var d=l;if("ref"in l){d={};for(var v in l)v!=="ref"&&(d[v]=l[v])}if(s=s.defaultProps){d===l&&(d=h({},d));for(var g in s)d[g]===void 0&&(d[g]=s[g])}return d}var df=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function mg(s){df(s)}function _g(s){console.error(s)}function gg(s){df(s)}function Yd(s,l){try{var d=s.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(v){setTimeout(function(){throw v})}}function yg(s,l,d){try{var v=s.onCaughtError;v(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Zd(s,l,d){return d=ua(d),d.tag=3,d.payload={element:null},d.callback=function(){Yd(s,l)},d}function fv(s){return s=ua(s),s.tag=3,s}function dv(s,l,d,v){var g=d.type.getDerivedStateFromError;if(typeof g=="function"){var T=v.value;s.payload=function(){return g(T)},s.callback=function(){yg(l,d,v)}}var L=d.stateNode;L!==null&&typeof L.componentDidCatch=="function"&&(s.callback=function(){yg(l,d,v),typeof g!="function"&&(Dl===null?Dl=new Set([this]):Dl.add(this));var q=v.stack;this.componentDidCatch(v.value,{componentStack:q!==null?q:""})})}function r1(s,l,d,v,g){if(d.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(l=d.alternate,l!==null&&Vc(l,d,g,!0),d=fa.current,d!==null){switch(d.tag){case 13:return Sa===null?f1():d.alternate===null&&Jn===0&&(Jn=3),d.flags&=-257,d.flags|=65536,d.lanes=g,v===Kp?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([v]):l.add(v),h1(s,v,g)),!1;case 22:return d.flags|=65536,v===Kp?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([v])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([v]):d.add(v)),h1(s,v,g)),!1}throw Error(n(435,d.tag))}return h1(s,v,g),f1(),!1}if(Yr)return l=fa.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=g,v!==Ad&&(s=Error(n(422),{cause:v}),_l(oa(s,d)))):(v!==Ad&&(l=Error(n(423),{cause:v}),_l(oa(l,d))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,v=oa(v,d),g=Zd(s.stateNode,v,g),Nd(s,g),Jn!==4&&(Jn=2)),!1;var T=Error(n(520),{cause:v});if(T=oa(T,d),hv===null?hv=[T]:hv.push(T),Jn!==4&&(Jn=2),l===null)return!0;v=oa(v,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,s=g&-g,d.lanes|=s,s=Zd(d.stateNode,v,s),Nd(d,s),!1;case 1:if(l=d.type,T=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Dl===null||!Dl.has(T))))return d.flags|=65536,g&=-g,d.lanes|=g,g=fv(g),dv(g,s,d,v),Nd(d,g),!1}d=d.return}while(d!==null);return!1}var Eg=Error(n(461)),ii=!1;function Ei(s,l,d,v){l.child=s===null?$o(l,null,d,v):Va(l,s.child,d,v)}function C(s,l,d,v,g){d=d.render;var T=l.ref;if("ref"in v){var L={};for(var q in v)q!=="ref"&&(L[q]=v[q])}else L=v;return pu(l),v=Dd(s,l,d,L,T,g),q=Bd(),s!==null&&!ii?(Kc(s,l,g),Rt(s,l,g)):(Yr&&q&&Td(l),l.flags|=1,Ei(s,l,v,g),l.child)}function W(s,l,d,v,g){if(s===null){var T=d.type;return typeof T=="function"&&!gd(T)&&T.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=T,ie(s,l,T,v,g)):(s=yd(d.type,null,v,l,l.mode,g),s.ref=l.ref,s.return=l,l.child=s)}if(T=s.child,!ct(s,g)){var L=T.memoizedProps;if(d=d.compare,d=d!==null?d:Lc,d(L,v)&&s.ref===l.ref)return Rt(s,l,g)}return l.flags|=1,s=ko(T,v),s.ref=l.ref,s.return=l,l.child=s}function ie(s,l,d,v,g){if(s!==null){var T=s.memoizedProps;if(Lc(T,v)&&s.ref===l.ref)if(ii=!1,l.pendingProps=v=T,ct(s,g))(s.flags&131072)!==0&&(ii=!0);else return l.lanes=s.lanes,Rt(s,l,g)}return Ue(s,l,d,v,g)}function Re(s,l,d){var v=l.pendingProps,g=v.children,T=s!==null?s.memoizedState:null;if(v.mode==="hidden"){if((l.flags&128)!==0){if(v=T!==null?T.baseLanes|d:d,s!==null){for(g=l.child=s.child,T=0;g!==null;)T=T|g.lanes|g.childLanes,g=g.sibling;l.childLanes=T&~v}else l.childLanes=0,l.child=null;return Ge(s,l,v,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Md(l,T!==null?T.cachePool:null),T!==null?tv(l,T):Id(),lv(l);else return l.lanes=l.childLanes=536870912,Ge(s,l,T!==null?T.baseLanes|d:d,d)}else T!==null?(Md(l,T.cachePool),tv(l,T),Qn(),l.memoizedState=null):(s!==null&&Md(l,null),Id(),Qn());return Ei(s,l,g,d),l.child}function Ge(s,l,d,v){var g=Yp();return g=g===null?null:{parent:ni._currentValue,pool:g},l.memoizedState={baseLanes:d,cachePool:g},s!==null&&Md(l,null),Id(),lv(l),s!==null&&Vc(s,l,v,!0),null}function Me(s,l){var d=l.ref;if(d===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(n(284));(s===null||s.ref!==d)&&(l.flags|=4194816)}}function Ue(s,l,d,v,g){return pu(l),d=Dd(s,l,d,v,void 0,g),v=Bd(),s!==null&&!ii?(Kc(s,l,g),Rt(s,l,g)):(Yr&&v&&Td(l),l.flags|=1,Ei(s,l,d,g),l.child)}function ut(s,l,d,v,g,T){return pu(l),l.updateQueue=null,d=Ld(l,v,d,g),nv(s),v=Bd(),s!==null&&!ii?(Kc(s,l,T),Rt(s,l,T)):(Yr&&v&&Td(l),l.flags|=1,Ei(s,l,d,T),l.child)}function ft(s,l,d,v,g){if(pu(l),l.stateNode===null){var T=lu,L=d.contextType;typeof L=="object"&&L!==null&&(T=gi(L)),T=new d(v,T),l.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=cv,l.stateNode=T,T._reactInternals=l,T=l.stateNode,T.props=v,T.state=l.memoizedState,T.refs={},Qp(l),L=d.contextType,T.context=typeof L=="object"&&L!==null?gi(L):lu,T.state=l.memoizedState,L=d.getDerivedStateFromProps,typeof L=="function"&&($d(l,d,L,v),T.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(L=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),L!==T.state&&cv.enqueueReplaceState(T,T.state,null),El(l,v,T,g),_u(),T.state=l.memoizedState),typeof T.componentDidMount=="function"&&(l.flags|=4194308),v=!0}else if(s===null){T=l.stateNode;var q=l.memoizedProps,ce=Au(d,q);T.props=ce;var Pe=T.context,it=d.contextType;L=lu,typeof it=="object"&&it!==null&&(L=gi(it));var pt=d.getDerivedStateFromProps;it=typeof pt=="function"||typeof T.getSnapshotBeforeUpdate=="function",q=l.pendingProps!==q,it||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(q||Pe!==L)&&vg(l,T,v,L),za=!1;var je=l.memoizedState;T.state=je,El(l,v,T,g),_u(),Pe=l.memoizedState,q||je!==Pe||za?(typeof pt=="function"&&($d(l,d,pt,v),Pe=l.memoizedState),(ce=za||pg(l,d,ce,v,je,Pe,L))?(it||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(l.flags|=4194308)):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=v,l.memoizedState=Pe),T.props=v,T.state=Pe,T.context=L,v=ce):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),v=!1)}else{T=l.stateNode,As(s,l),L=l.memoizedProps,it=Au(d,L),T.props=it,pt=l.pendingProps,je=T.context,Pe=d.contextType,ce=lu,typeof Pe=="object"&&Pe!==null&&(ce=gi(Pe)),q=d.getDerivedStateFromProps,(Pe=typeof q=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(L!==pt||je!==ce)&&vg(l,T,v,ce),za=!1,je=l.memoizedState,T.state=je,El(l,v,T,g),_u();var He=l.memoizedState;L!==pt||je!==He||za||s!==null&&s.dependencies!==null&&Cd(s.dependencies)?(typeof q=="function"&&($d(l,d,q,v),He=l.memoizedState),(it=za||pg(l,d,it,v,je,He,ce)||s!==null&&s.dependencies!==null&&Cd(s.dependencies))?(Pe||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(v,He,ce),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(v,He,ce)),typeof T.componentDidUpdate=="function"&&(l.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof T.componentDidUpdate!="function"||L===s.memoizedProps&&je===s.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||L===s.memoizedProps&&je===s.memoizedState||(l.flags|=1024),l.memoizedProps=v,l.memoizedState=He),T.props=v,T.state=He,T.context=ce,v=it):(typeof T.componentDidUpdate!="function"||L===s.memoizedProps&&je===s.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||L===s.memoizedProps&&je===s.memoizedState||(l.flags|=1024),v=!1)}return T=v,Me(s,l),v=(l.flags&128)!==0,T||v?(T=l.stateNode,d=v&&typeof d.getDerivedStateFromError!="function"?null:T.render(),l.flags|=1,s!==null&&v?(l.child=Va(l,s.child,null,g),l.child=Va(l,null,d,g)):Ei(s,l,d,g),l.memoizedState=T.state,s=l.child):s=Rt(s,l,g),s}function Tt(s,l,d,v){return bs(),l.flags|=256,Ei(s,l,d,v),l.child}var dt={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mt(s){return{baseLanes:s,cachePool:Zp()}}function Et(s,l,d){return s=s!==null?s.childLanes&~d:0,l&&(s|=lo),s}function nt(s,l,d){var v=l.pendingProps,g=!1,T=(l.flags&128)!==0,L;if((L=T)||(L=s!==null&&s.memoizedState===null?!1:(Nr.current&2)!==0),L&&(g=!0,l.flags&=-129),L=(l.flags&32)!==0,l.flags&=-33,s===null){if(Yr){if(g?Ha(l):Qn(),Yr){var q=Rn,ce;if(ce=q){e:{for(ce=q,q=Kn;ce.nodeType!==8;){if(!q){q=null;break e}if(ce=Yo(ce.nextSibling),ce===null){q=null;break e}}q=ce}q!==null?(l.memoizedState={dehydrated:q,treeContext:Yi!==null?{id:ba,overflow:io}:null,retryLane:536870912,hydrationErrors:null},ce=$i(18,null,null,0),ce.stateNode=q,ce.return=l,l.child=ce,wi=l,Rn=null,ce=!0):ce=!1}ce||hu(l)}if(q=l.memoizedState,q!==null&&(q=q.dehydrated,q!==null))return O1(q)?l.lanes=32:l.lanes=536870912,null;Ni(l)}return q=v.children,v=v.fallback,g?(Qn(),g=l.mode,q=ye({mode:"hidden",children:q},g),v=fu(v,g,d,null),q.return=l,v.return=l,q.sibling=v,l.child=q,g=l.child,g.memoizedState=mt(d),g.childLanes=Et(s,L,d),l.memoizedState=dt,v):(Ha(l),_t(l,q))}if(ce=s.memoizedState,ce!==null&&(q=ce.dehydrated,q!==null)){if(T)l.flags&256?(Ha(l),l.flags&=-257,l=Ie(s,l,d)):l.memoizedState!==null?(Qn(),l.child=s.child,l.flags|=128,l=null):(Qn(),g=v.fallback,q=l.mode,v=ye({mode:"visible",children:v.children},q),g=fu(g,q,d,null),g.flags|=2,v.return=l,g.return=l,v.sibling=g,l.child=v,Va(l,s.child,null,d),v=l.child,v.memoizedState=mt(d),v.childLanes=Et(s,L,d),l.memoizedState=dt,l=g);else if(Ha(l),O1(q)){if(L=q.nextSibling&&q.nextSibling.dataset,L)var Pe=L.dgst;L=Pe,v=Error(n(419)),v.stack="",v.digest=L,_l({value:v,source:null,stack:null}),l=Ie(s,l,d)}else if(ii||Vc(s,l,d,!1),L=(d&s.childLanes)!==0,ii||L){if(L=gr,L!==null&&(v=d&-d,v=(v&42)!==0?1:Oc(v),v=(v&(L.suspendedLanes|d))!==0?0:v,v!==0&&v!==ce.retryLane))throw ce.retryLane=v,Ua(s,v),Ga(L,s,v),Eg;q.data==="$?"||f1(),l=Ie(s,l,d)}else q.data==="$?"?(l.flags|=192,l.child=s.child,l=null):(s=ce.treeContext,Rn=Yo(q.nextSibling),wi=l,Yr=!0,Es=null,Kn=!1,s!==null&&(Fi[Ea++]=ba,Fi[Ea++]=io,Fi[Ea++]=Yi,ba=s.id,io=s.overflow,Yi=l),l=_t(l,v.children),l.flags|=4096);return l}return g?(Qn(),g=v.fallback,q=l.mode,ce=s.child,Pe=ce.sibling,v=ko(ce,{mode:"hidden",children:v.children}),v.subtreeFlags=ce.subtreeFlags&65011712,Pe!==null?g=ko(Pe,g):(g=fu(g,q,d,null),g.flags|=2),g.return=l,v.return=l,v.sibling=g,l.child=v,v=g,g=l.child,q=s.child.memoizedState,q===null?q=mt(d):(ce=q.cachePool,ce!==null?(Pe=ni._currentValue,ce=ce.parent!==Pe?{parent:Pe,pool:Pe}:ce):ce=Zp(),q={baseLanes:q.baseLanes|d,cachePool:ce}),g.memoizedState=q,g.childLanes=Et(s,L,d),l.memoizedState=dt,v):(Ha(l),d=s.child,s=d.sibling,d=ko(d,{mode:"visible",children:v.children}),d.return=l,d.sibling=null,s!==null&&(L=l.deletions,L===null?(l.deletions=[s],l.flags|=16):L.push(s)),l.child=d,l.memoizedState=null,d)}function _t(s,l){return l=ye({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function ye(s,l){return s=$i(22,s,null,l),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Ie(s,l,d){return Va(l,s.child,null,d),s=_t(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function lt(s,l,d){s.lanes|=l;var v=s.alternate;v!==null&&(v.lanes|=l),Xp(s.return,l,d)}function xt(s,l,d,v,g){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:d,tailMode:g}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=v,T.tail=d,T.tailMode=g)}function Qe(s,l,d){var v=l.pendingProps,g=v.revealOrder,T=v.tail;if(Ei(s,l,v.children,d),v=Nr.current,(v&2)!==0)v=v&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&lt(s,d,l);else if(s.tag===19)lt(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}v&=1}switch(De(Nr,v),g){case"forwards":for(d=l.child,g=null;d!==null;)s=d.alternate,s!==null&&yi(s)===null&&(g=d),d=d.sibling;d=g,d===null?(g=l.child,l.child=null):(g=d.sibling,d.sibling=null),xt(l,!1,g,d,T);break;case"backwards":for(d=null,g=l.child,l.child=null;g!==null;){if(s=g.alternate,s!==null&&yi(s)===null){l.child=g;break}s=g.sibling,g.sibling=d,d=g,g=s}xt(l,!0,d,null,T);break;case"together":xt(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Rt(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),Pl|=l.lanes,(d&l.childLanes)===0)if(s!==null){if(Vc(s,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(n(153));if(l.child!==null){for(s=l.child,d=ko(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=ko(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function ct(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&Cd(s)))}function Ct(s,l,d){switch(l.tag){case 3:St(l,l.stateNode.containerInfo),Ss(l,ni,s.memoizedState.cache),bs();break;case 27:case 5:_e(l);break;case 4:St(l,l.stateNode.containerInfo);break;case 10:Ss(l,l.type,l.memoizedProps.value);break;case 13:var v=l.memoizedState;if(v!==null)return v.dehydrated!==null?(Ha(l),l.flags|=128,null):(d&l.child.childLanes)!==0?nt(s,l,d):(Ha(l),s=Rt(s,l,d),s!==null?s.sibling:null);Ha(l);break;case 19:var g=(s.flags&128)!==0;if(v=(d&l.childLanes)!==0,v||(Vc(s,l,d,!1),v=(d&l.childLanes)!==0),g){if(v)return Qe(s,l,d);l.flags|=128}if(g=l.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),De(Nr,Nr.current),v)break;return null;case 22:case 23:return l.lanes=0,Re(s,l,d);case 24:Ss(l,ni,s.memoizedState.cache)}return Rt(s,l,d)}function et(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps)ii=!0;else{if(!ct(s,d)&&(l.flags&128)===0)return ii=!1,Ct(s,l,d);ii=(s.flags&131072)!==0}else ii=!1,Yr&&(l.flags&1048576)!==0&&Vp(l,bd,l.index);switch(l.lanes=0,l.tag){case 16:e:{s=l.pendingProps;var v=l.elementType,g=v._init;if(v=g(v._payload),l.type=v,typeof v=="function")gd(v)?(s=Au(v,s),l.tag=1,l=ft(null,l,v,s,d)):(l.tag=0,l=Ue(null,l,v,s,d));else{if(v!=null){if(g=v.$$typeof,g===M){l.tag=11,l=C(null,l,v,s,d);break e}else if(g===w){l.tag=14,l=W(null,l,v,s,d);break e}}throw l=j(v)||v,Error(n(306,l,""))}}return l;case 0:return Ue(s,l,l.type,l.pendingProps,d);case 1:return v=l.type,g=Au(v,l.pendingProps),ft(s,l,v,g,d);case 3:e:{if(St(l,l.stateNode.containerInfo),s===null)throw Error(n(387));v=l.pendingProps;var T=l.memoizedState;g=T.element,As(s,l),El(l,v,null,d);var L=l.memoizedState;if(v=L.cache,Ss(l,ni,v),v!==T.cache&&Gp(l,[ni],d,!0),_u(),v=L.element,T.isDehydrated)if(T={element:v,isDehydrated:!1,cache:L.cache},l.updateQueue.baseState=T,l.memoizedState=T,l.flags&256){l=Tt(s,l,v,d);break e}else if(v!==g){g=oa(Error(n(424)),l),_l(g),l=Tt(s,l,v,d);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Rn=Yo(s.firstChild),wi=l,Yr=!0,Es=null,Kn=!0,d=$o(l,null,v,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(bs(),v===g){l=Rt(s,l,d);break e}Ei(s,l,v,d)}l=l.child}return l;case 26:return Me(s,l),s===null?(d=Q3(l.type,null,l.pendingProps,null))?l.memoizedState=d:Yr||(d=l.type,s=l.pendingProps,v=Ng(It.current).createElement(d),v[Gn]=l,v[Ci]=s,ki(v,d,s),dn(v),l.stateNode=v):l.memoizedState=Q3(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return _e(l),s===null&&Yr&&(v=l.stateNode=Y3(l.type,l.pendingProps,It.current),wi=l,Kn=!0,g=Rn,Fl(l.type)?(M1=g,Rn=Yo(v.firstChild)):Rn=g),Ei(s,l,l.pendingProps.children,d),Me(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&Yr&&((g=v=Rn)&&(v=iz(v,l.type,l.pendingProps,Kn),v!==null?(l.stateNode=v,wi=l,Rn=Yo(v.firstChild),Kn=!1,g=!0):g=!1),g||hu(l)),_e(l),g=l.type,T=l.pendingProps,L=s!==null?s.memoizedProps:null,v=T.children,x1(g,T)?v=null:L!==null&&x1(g,L)&&(l.flags|=32),l.memoizedState!==null&&(g=Dd(s,l,Q_,null,null,d),Tv._currentValue=g),Me(s,l),Ei(s,l,v,d),l.child;case 6:return s===null&&Yr&&((s=d=Rn)&&(d=az(d,l.pendingProps,Kn),d!==null?(l.stateNode=d,wi=l,Rn=null,s=!0):s=!1),s||hu(l)),null;case 13:return nt(s,l,d);case 4:return St(l,l.stateNode.containerInfo),v=l.pendingProps,s===null?l.child=Va(l,null,v,d):Ei(s,l,v,d),l.child;case 11:return C(s,l,l.type,l.pendingProps,d);case 7:return Ei(s,l,l.pendingProps,d),l.child;case 8:return Ei(s,l,l.pendingProps.children,d),l.child;case 12:return Ei(s,l,l.pendingProps.children,d),l.child;case 10:return v=l.pendingProps,Ss(l,l.type,v.value),Ei(s,l,v.children,d),l.child;case 9:return g=l.type._context,v=l.pendingProps.children,pu(l),g=gi(g),v=v(g),l.flags|=1,Ei(s,l,v,d),l.child;case 14:return W(s,l,l.type,l.pendingProps,d);case 15:return ie(s,l,l.type,l.pendingProps,d);case 19:return Qe(s,l,d);case 31:return v=l.pendingProps,d=l.mode,v={mode:v.mode,children:v.children},s===null?(d=ye(v,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=ko(s.child,v),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return Re(s,l,d);case 24:return pu(l),v=gi(ni),s===null?(g=Yp(),g===null&&(g=gr,T=Wp(),g.pooledCache=T,T.refCount++,T!==null&&(g.pooledCacheLanes|=d),g=T),l.memoizedState={parent:v,cache:g},Qp(l),Ss(l,ni,g)):((s.lanes&d)!==0&&(As(s,l),El(l,null,null,d),_u()),g=s.memoizedState,T=l.memoizedState,g.parent!==v?(g={parent:v,cache:v},l.memoizedState=g,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=g),Ss(l,ni,v)):(v=T.cache,Ss(l,ni,v),v!==g.cache&&Gp(l,[ni],d,!0))),Ei(s,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function gt(s){s.flags|=4}function Vt(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!nO(l)){if(l=fa.current,l!==null&&((zr&4194048)===zr?Sa!==null:(zr&62914560)!==zr&&(zr&536870912)===0||l!==Sa))throw Wc=Kp,$_;s.flags|=8192}}function tr(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Qf():536870912,s.lanes|=l,Kd|=l)}function At(s,l){if(!Yr)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:v.sibling=null}}function We(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,v=0;if(l)for(var g=s.child;g!==null;)d|=g.lanes|g.childLanes,v|=g.subtreeFlags&65011712,v|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)d|=g.lanes|g.childLanes,v|=g.subtreeFlags,v|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=v,s.childLanes=d,l}function Ze(s,l,d){var v=l.pendingProps;switch(Sd(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(l),null;case 1:return We(l),null;case 3:return d=l.stateNode,v=null,s!==null&&(v=s.memoizedState.cache),l.memoizedState.cache!==v&&(l.flags|=2048),zo(ni),ke(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(ka(l)?gt(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Hp())),We(l),null;case 26:return d=l.memoizedState,s===null?(gt(l),d!==null?(We(l),Vt(l,d)):(We(l),l.flags&=-16777217)):d?d!==s.memoizedState?(gt(l),We(l),Vt(l,d)):(We(l),l.flags&=-16777217):(s.memoizedProps!==v&&gt(l),We(l),l.flags&=-16777217),null;case 27:ot(l),d=It.current;var g=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==v&&gt(l);else{if(!v){if(l.stateNode===null)throw Error(n(166));return We(l),null}s=tt.current,ka(l)?ao(l):(s=Y3(g,v,d),l.stateNode=s,gt(l))}return We(l),null;case 5:if(ot(l),d=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==v&&gt(l);else{if(!v){if(l.stateNode===null)throw Error(n(166));return We(l),null}if(s=tt.current,ka(l))ao(l);else{switch(g=Ng(It.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof v.is=="string"?g.createElement("select",{is:v.is}):g.createElement("select"),v.multiple?s.multiple=!0:v.size&&(s.size=v.size);break;default:s=typeof v.is=="string"?g.createElement(d,{is:v.is}):g.createElement(d)}}s[Gn]=l,s[Ci]=v;e:for(g=l.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===l)break e;for(;g.sibling===null;){if(g.return===null||g.return===l)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}l.stateNode=s;e:switch(ki(s,d,v),d){case"button":case"input":case"select":case"textarea":s=!!v.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&gt(l)}}return We(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==v&&gt(l);else{if(typeof v!="string"&&l.stateNode===null)throw Error(n(166));if(s=It.current,ka(l)){if(s=l.stateNode,d=l.memoizedProps,v=null,g=wi,g!==null)switch(g.tag){case 27:case 5:v=g.memoizedProps}s[Gn]=l,s=!!(s.nodeValue===d||v!==null&&v.suppressHydrationWarning===!0||V3(s.nodeValue,d)),s||hu(l)}else s=Ng(s).createTextNode(v),s[Gn]=l,l.stateNode=s}return We(l),null;case 13:if(v=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=ka(l),v!==null&&v.dehydrated!==null){if(s===null){if(!g)throw Error(n(318));if(g=l.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[Gn]=l}else bs(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;We(l),g=!1}else g=Hp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return l.flags&256?(Ni(l),l):(Ni(l),null)}if(Ni(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=v!==null,s=s!==null&&s.memoizedState!==null,d){v=l.child,g=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(g=v.alternate.memoizedState.cachePool.pool);var T=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(T=v.memoizedState.cachePool.pool),T!==g&&(v.flags|=2048)}return d!==s&&d&&(l.child.flags|=8192),tr(l,l.updateQueue),We(l),null;case 4:return ke(),s===null&&E1(l.stateNode.containerInfo),We(l),null;case 10:return zo(l.type),We(l),null;case 19:if(Ee(Nr),g=l.memoizedState,g===null)return We(l),null;if(v=(l.flags&128)!==0,T=g.rendering,T===null)if(v)At(g,!1);else{if(Jn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(T=yi(s),T!==null){for(l.flags|=128,At(g,!1),s=T.updateQueue,l.updateQueue=s,tr(l,s),l.subtreeFlags=0,s=d,d=l.child;d!==null;)X_(d,s),d=d.sibling;return De(Nr,Nr.current&1|2),l.child}s=s.sibling}g.tail!==null&&Nt()>bg&&(l.flags|=128,v=!0,At(g,!1),l.lanes=4194304)}else{if(!v)if(s=yi(T),s!==null){if(l.flags|=128,v=!0,s=s.updateQueue,l.updateQueue=s,tr(l,s),At(g,!0),g.tail===null&&g.tailMode==="hidden"&&!T.alternate&&!Yr)return We(l),null}else 2*Nt()-g.renderingStartTime>bg&&d!==536870912&&(l.flags|=128,v=!0,At(g,!1),l.lanes=4194304);g.isBackwards?(T.sibling=l.child,l.child=T):(s=g.last,s!==null?s.sibling=T:l.child=T,g.last=T)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=Nt(),l.sibling=null,s=Nr.current,De(Nr,v?s&1|2:s&1),l):(We(l),null);case 22:case 23:return Ni(l),Pd(),v=l.memoizedState!==null,s!==null?s.memoizedState!==null!==v&&(l.flags|=8192):v&&(l.flags|=8192),v?(d&536870912)!==0&&(l.flags&128)===0&&(We(l),l.subtreeFlags&6&&(l.flags|=8192)):We(l),d=l.updateQueue,d!==null&&tr(l,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),v=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),v!==d&&(l.flags|=2048),s!==null&&Ee(Ta),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),zo(ni),We(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function ir(s,l){switch(Sd(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return zo(ni),ke(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return ot(l),null;case 13:if(Ni(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(n(340));bs()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Ee(Nr),null;case 4:return ke(),null;case 10:return zo(l.type),null;case 22:case 23:return Ni(l),Pd(),s!==null&&Ee(Ta),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return zo(ni),null;case 25:return null;default:return null}}function Sr(s,l){switch(Sd(l),l.tag){case 3:zo(ni),ke();break;case 26:case 27:case 5:ot(l);break;case 4:ke();break;case 13:Ni(l);break;case 19:Ee(Nr);break;case 10:zo(l.type);break;case 22:case 23:Ni(l),Pd(),s!==null&&Ee(Ta);break;case 24:zo(ni)}}function Lt(s,l){try{var d=l.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var g=v.next;d=g;do{if((d.tag&s)===s){v=void 0;var T=d.create,L=d.inst;v=T(),L.destroy=v}d=d.next}while(d!==g)}}catch(q){_n(l,l.return,q)}}function ur(s,l,d){try{var v=l.updateQueue,g=v!==null?v.lastEffect:null;if(g!==null){var T=g.next;v=T;do{if((v.tag&s)===s){var L=v.inst,q=L.destroy;if(q!==void 0){L.destroy=void 0,g=l;var ce=d,Pe=q;try{Pe()}catch(it){_n(g,ce,it)}}}v=v.next}while(v!==T)}}catch(it){_n(l,l.return,it)}}function ar(s){var l=s.updateQueue;if(l!==null){var d=s.stateNode;try{ev(l,d)}catch(v){_n(s,s.return,v)}}}function pr(s,l,d){d.props=Au(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(v){_n(s,l,v)}}function Ar(s,l){try{var d=s.ref;if(d!==null){switch(s.tag){case 26:case 27:case 5:var v=s.stateNode;break;case 30:v=s.stateNode;break;default:v=s.stateNode}typeof d=="function"?s.refCleanup=d(v):d.current=v}}catch(g){_n(s,l,g)}}function Qr(s,l){var d=s.ref,v=s.refCleanup;if(d!==null)if(typeof v=="function")try{v()}catch(g){_n(s,l,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(g){_n(s,l,g)}else d.current=null}function Yn(s){var l=s.type,d=s.memoizedProps,v=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&v.focus();break e;case"img":d.src?v.src=d.src:d.srcSet&&(v.srcset=d.srcSet)}}catch(g){_n(s,s.return,g)}}function Er(s,l,d){try{var v=s.stateNode;J9(v,s.type,d,l),v[Ci]=l}catch(g){_n(s,s.return,g)}}function jn(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Fl(s.type)||s.tag===4}function tn(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||jn(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Fl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Tn(s,l,d){var v=s.tag;if(v===5||v===6)s=s.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(s,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(s),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=wg));else if(v!==4&&(v===27&&Fl(s.type)&&(d=s.stateNode,l=null),s=s.child,s!==null))for(Tn(s,l,d),s=s.sibling;s!==null;)Tn(s,l,d),s=s.sibling}function Sn(s,l,d){var v=s.tag;if(v===5||v===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(v!==4&&(v===27&&Fl(s.type)&&(d=s.stateNode),s=s.child,s!==null))for(Sn(s,l,d),s=s.sibling;s!==null;)Sn(s,l,d),s=s.sibling}function Vn(s){var l=s.stateNode,d=s.memoizedProps;try{for(var v=s.type,g=l.attributes;g.length;)l.removeAttributeNode(g[0]);ki(l,v,d),l[Gn]=s,l[Ci]=d}catch(T){_n(s,s.return,T)}}var cn=!1,Fr=!1,Cn=!1,hr=typeof WeakSet=="function"?WeakSet:Set,Xr=null;function Ur(s,l){if(s=s.containerInfo,S1=Fg,s=F_(s),Up(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var v=d.getSelection&&d.getSelection();if(v&&v.rangeCount!==0){d=v.anchorNode;var g=v.anchorOffset,T=v.focusNode;v=v.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var L=0,q=-1,ce=-1,Pe=0,it=0,pt=s,je=null;t:for(;;){for(var He;pt!==d||g!==0&&pt.nodeType!==3||(q=L+g),pt!==T||v!==0&&pt.nodeType!==3||(ce=L+v),pt.nodeType===3&&(L+=pt.nodeValue.length),(He=pt.firstChild)!==null;)je=pt,pt=He;for(;;){if(pt===s)break t;if(je===d&&++Pe===g&&(q=L),je===T&&++it===v&&(ce=L),(He=pt.nextSibling)!==null)break;pt=je,je=pt.parentNode}pt=He}d=q===-1||ce===-1?null:{start:q,end:ce}}else d=null}d=d||{start:0,end:0}}else d=null;for(A1={focusedElem:s,selectionRange:d},Fg=!1,Xr=l;Xr!==null;)if(l=Xr,s=l.child,(l.subtreeFlags&1024)!==0&&s!==null)s.return=l,Xr=s;else for(;Xr!==null;){switch(l=Xr,T=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&T!==null){s=void 0,d=l,g=T.memoizedProps,T=T.memoizedState,v=d.stateNode;try{var Tr=Au(d.type,g,d.elementType===d.type);s=v.getSnapshotBeforeUpdate(Tr,T),v.__reactInternalSnapshotBeforeUpdate=s}catch(vr){_n(d,d.return,vr)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,d=s.nodeType,d===9)C1(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":C1(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=l.sibling,s!==null){s.return=l.return,Xr=s;break}Xr=l.return}}function $t(s,l,d){var v=d.flags;switch(d.tag){case 0:case 11:case 15:Te(s,d),v&4&&Lt(5,d);break;case 1:if(Te(s,d),v&4)if(s=d.stateNode,l===null)try{s.componentDidMount()}catch(L){_n(d,d.return,L)}else{var g=Au(d.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(g,l,s.__reactInternalSnapshotBeforeUpdate)}catch(L){_n(d,d.return,L)}}v&64&&ar(d),v&512&&Ar(d,d.return);break;case 3:if(Te(s,d),v&64&&(s=d.updateQueue,s!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{ev(s,l)}catch(L){_n(d,d.return,L)}}break;case 27:l===null&&v&4&&Vn(d);case 26:case 5:Te(s,d),l===null&&v&4&&Yn(d),v&512&&Ar(d,d.return);break;case 12:Te(s,d);break;case 13:Te(s,d),v&4&&we(s,d),v&64&&(s=d.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(d=V9.bind(null,d),oz(s,d))));break;case 22:if(v=d.memoizedState!==null||cn,!v){l=l!==null&&l.memoizedState!==null||Fr,g=cn;var T=Fr;cn=v,(Fr=l)&&!T?ae(s,d,(d.subtreeFlags&8772)!==0):Te(s,d),cn=g,Fr=T}break;case 30:break;default:Te(s,d)}}function br(s){var l=s.alternate;l!==null&&(s.alternate=null,br(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&$u(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Yt=null,kr=!1;function ui(s,l,d){for(d=d.child;d!==null;)J(s,l,d),d=d.sibling}function J(s,l,d){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(Ft,d)}catch{}switch(d.tag){case 26:Fr||Qr(d,l),ui(s,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Fr||Qr(d,l);var v=Yt,g=kr;Fl(d.type)&&(Yt=d.stateNode,kr=!1),ui(s,l,d),gv(d.stateNode),Yt=v,kr=g;break;case 5:Fr||Qr(d,l);case 6:if(v=Yt,g=kr,Yt=null,ui(s,l,d),Yt=v,kr=g,Yt!==null)if(kr)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(d.stateNode)}catch(T){_n(d,l,T)}else try{Yt.removeChild(d.stateNode)}catch(T){_n(d,l,T)}break;case 18:Yt!==null&&(kr?(s=Yt,W3(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,d.stateNode),Rv(s)):W3(Yt,d.stateNode));break;case 4:v=Yt,g=kr,Yt=d.stateNode.containerInfo,kr=!0,ui(s,l,d),Yt=v,kr=g;break;case 0:case 11:case 14:case 15:Fr||ur(2,d,l),Fr||ur(4,d,l),ui(s,l,d);break;case 1:Fr||(Qr(d,l),v=d.stateNode,typeof v.componentWillUnmount=="function"&&pr(d,l,v)),ui(s,l,d);break;case 21:ui(s,l,d);break;case 22:Fr=(v=Fr)||d.memoizedState!==null,ui(s,l,d),Fr=v;break;default:ui(s,l,d)}}function we(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Rv(s)}catch(d){_n(l,l.return,d)}}function xe(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new hr),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new hr),l;default:throw Error(n(435,s.tag))}}function Mt(s,l){var d=xe(s);l.forEach(function(v){var g=H9.bind(null,s,v);d.has(v)||(d.add(v),v.then(g,g))})}function rr(s,l){var d=l.deletions;if(d!==null)for(var v=0;v<d.length;v++){var g=d[v],T=s,L=l,q=L;e:for(;q!==null;){switch(q.tag){case 27:if(Fl(q.type)){Yt=q.stateNode,kr=!1;break e}break;case 5:Yt=q.stateNode,kr=!1;break e;case 3:case 4:Yt=q.stateNode.containerInfo,kr=!0;break e}q=q.return}if(Yt===null)throw Error(n(160));J(T,L,g),Yt=null,kr=!1,T=g.alternate,T!==null&&(T.return=null),g.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)X(l,s),l=l.sibling}var Ir=null;function X(s,l){var d=s.alternate,v=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:rr(l,s),$(s),v&4&&(ur(3,s,s.return),Lt(3,s),ur(5,s,s.return));break;case 1:rr(l,s),$(s),v&512&&(Fr||d===null||Qr(d,d.return)),v&64&&cn&&(s=s.updateQueue,s!==null&&(v=s.callbacks,v!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?v:d.concat(v))));break;case 26:var g=Ir;if(rr(l,s),$(s),v&512&&(Fr||d===null||Qr(d,d.return)),v&4){var T=d!==null?d.memoizedState:null;if(v=s.memoizedState,d===null)if(v===null)if(s.stateNode===null){e:{v=s.type,d=s.memoizedProps,g=g.ownerDocument||g;t:switch(v){case"title":T=g.getElementsByTagName("title")[0],(!T||T[Qs]||T[Gn]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=g.createElement(v),g.head.insertBefore(T,g.querySelector("head > title"))),ki(T,v,d),T[Gn]=s,dn(T),v=T;break e;case"link":var L=tO("link","href",g).get(v+(d.href||""));if(L){for(var q=0;q<L.length;q++)if(T=L[q],T.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&T.getAttribute("rel")===(d.rel==null?null:d.rel)&&T.getAttribute("title")===(d.title==null?null:d.title)&&T.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){L.splice(q,1);break t}}T=g.createElement(v),ki(T,v,d),g.head.appendChild(T);break;case"meta":if(L=tO("meta","content",g).get(v+(d.content||""))){for(q=0;q<L.length;q++)if(T=L[q],T.getAttribute("content")===(d.content==null?null:""+d.content)&&T.getAttribute("name")===(d.name==null?null:d.name)&&T.getAttribute("property")===(d.property==null?null:d.property)&&T.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&T.getAttribute("charset")===(d.charSet==null?null:d.charSet)){L.splice(q,1);break t}}T=g.createElement(v),ki(T,v,d),g.head.appendChild(T);break;default:throw Error(n(468,v))}T[Gn]=s,dn(T),v=T}s.stateNode=v}else rO(g,s.type,s.stateNode);else s.stateNode=eO(g,v,s.memoizedProps);else T!==v?(T===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):T.count--,v===null?rO(g,s.type,s.stateNode):eO(g,v,s.memoizedProps)):v===null&&s.stateNode!==null&&Er(s,s.memoizedProps,d.memoizedProps)}break;case 27:rr(l,s),$(s),v&512&&(Fr||d===null||Qr(d,d.return)),d!==null&&v&4&&Er(s,s.memoizedProps,d.memoizedProps);break;case 5:if(rr(l,s),$(s),v&512&&(Fr||d===null||Qr(d,d.return)),s.flags&32){g=s.stateNode;try{Z(g,"")}catch(He){_n(s,s.return,He)}}v&4&&s.stateNode!=null&&(g=s.memoizedProps,Er(s,g,d!==null?d.memoizedProps:g)),v&1024&&(Cn=!0);break;case 6:if(rr(l,s),$(s),v&4){if(s.stateNode===null)throw Error(n(162));v=s.memoizedProps,d=s.stateNode;try{d.nodeValue=v}catch(He){_n(s,s.return,He)}}break;case 3:if(Dg=null,g=Ir,Ir=Ig(l.containerInfo),rr(l,s),Ir=g,$(s),v&4&&d!==null&&d.memoizedState.isDehydrated)try{Rv(l.containerInfo)}catch(He){_n(s,s.return,He)}Cn&&(Cn=!1,ne(s));break;case 4:v=Ir,Ir=Ig(s.stateNode.containerInfo),rr(l,s),$(s),Ir=v;break;case 12:rr(l,s),$(s);break;case 13:rr(l,s),$(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(o1=Nt()),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,Mt(s,v)));break;case 22:g=s.memoizedState!==null;var ce=d!==null&&d.memoizedState!==null,Pe=cn,it=Fr;if(cn=Pe||g,Fr=it||ce,rr(l,s),Fr=it,cn=Pe,$(s),v&8192)e:for(l=s.stateNode,l._visibility=g?l._visibility&-2:l._visibility|1,g&&(d===null||ce||cn||Fr||Se(s)),d=null,l=s;;){if(l.tag===5||l.tag===26){if(d===null){ce=d=l;try{if(T=ce.stateNode,g)L=T.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{q=ce.stateNode;var pt=ce.memoizedProps.style,je=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;q.style.display=je==null||typeof je=="boolean"?"":(""+je).trim()}}catch(He){_n(ce,ce.return,He)}}}else if(l.tag===6){if(d===null){ce=l;try{ce.stateNode.nodeValue=g?"":ce.memoizedProps}catch(He){_n(ce,ce.return,He)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}v&4&&(v=s.updateQueue,v!==null&&(d=v.retryQueue,d!==null&&(v.retryQueue=null,Mt(s,d))));break;case 19:rr(l,s),$(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,Mt(s,v)));break;case 30:break;case 21:break;default:rr(l,s),$(s)}}function $(s){var l=s.flags;if(l&2){try{for(var d,v=s.return;v!==null;){if(jn(v)){d=v;break}v=v.return}if(d==null)throw Error(n(160));switch(d.tag){case 27:var g=d.stateNode,T=tn(s);Sn(s,T,g);break;case 5:var L=d.stateNode;d.flags&32&&(Z(L,""),d.flags&=-33);var q=tn(s);Sn(s,q,L);break;case 3:case 4:var ce=d.stateNode.containerInfo,Pe=tn(s);Tn(s,Pe,ce);break;default:throw Error(n(161))}}catch(it){_n(s,s.return,it)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function ne(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;ne(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function Te(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)$t(s,l.alternate,l),l=l.sibling}function Se(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:ur(4,l,l.return),Se(l);break;case 1:Qr(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&pr(l,l.return,d),Se(l);break;case 27:gv(l.stateNode);case 26:case 5:Qr(l,l.return),Se(l);break;case 22:l.memoizedState===null&&Se(l);break;case 30:Se(l);break;default:Se(l)}s=s.sibling}}function ae(s,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var v=l.alternate,g=s,T=l,L=T.flags;switch(T.tag){case 0:case 11:case 15:ae(g,T,d),Lt(4,T);break;case 1:if(ae(g,T,d),v=T,g=v.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Pe){_n(v,v.return,Pe)}if(v=T,g=v.updateQueue,g!==null){var q=v.stateNode;try{var ce=g.shared.hiddenCallbacks;if(ce!==null)for(g.shared.hiddenCallbacks=null,g=0;g<ce.length;g++)Jp(ce[g],q)}catch(Pe){_n(v,v.return,Pe)}}d&&L&64&&ar(T),Ar(T,T.return);break;case 27:Vn(T);case 26:case 5:ae(g,T,d),d&&v===null&&L&4&&Yn(T),Ar(T,T.return);break;case 12:ae(g,T,d);break;case 13:ae(g,T,d),d&&L&4&&we(g,T);break;case 22:T.memoizedState===null&&ae(g,T,d),Ar(T,T.return);break;case 30:break;default:ae(g,T,d)}l=l.sibling}}function de(s,l){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&Xc(d))}function pe(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Xc(s))}function Q(s,l,d,v){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)ue(s,l,d,v),l=l.sibling}function ue(s,l,d,v){var g=l.flags;switch(l.tag){case 0:case 11:case 15:Q(s,l,d,v),g&2048&&Lt(9,l);break;case 1:Q(s,l,d,v);break;case 3:Q(s,l,d,v),g&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Xc(s)));break;case 12:if(g&2048){Q(s,l,d,v),s=l.stateNode;try{var T=l.memoizedProps,L=T.id,q=T.onPostCommit;typeof q=="function"&&q(L,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ce){_n(l,l.return,ce)}}else Q(s,l,d,v);break;case 13:Q(s,l,d,v);break;case 23:break;case 22:T=l.stateNode,L=l.alternate,l.memoizedState!==null?T._visibility&2?Q(s,l,d,v):le(s,l):T._visibility&2?Q(s,l,d,v):(T._visibility|=2,Y(s,l,d,v,(l.subtreeFlags&10256)!==0)),g&2048&&de(L,l);break;case 24:Q(s,l,d,v),g&2048&&pe(l.alternate,l);break;default:Q(s,l,d,v)}}function Y(s,l,d,v,g){for(g=g&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var T=s,L=l,q=d,ce=v,Pe=L.flags;switch(L.tag){case 0:case 11:case 15:Y(T,L,q,ce,g),Lt(8,L);break;case 23:break;case 22:var it=L.stateNode;L.memoizedState!==null?it._visibility&2?Y(T,L,q,ce,g):le(T,L):(it._visibility|=2,Y(T,L,q,ce,g)),g&&Pe&2048&&de(L.alternate,L);break;case 24:Y(T,L,q,ce,g),g&&Pe&2048&&pe(L.alternate,L);break;default:Y(T,L,q,ce,g)}l=l.sibling}}function le(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=s,v=l,g=v.flags;switch(v.tag){case 22:le(d,v),g&2048&&de(v.alternate,v);break;case 24:le(d,v),g&2048&&pe(v.alternate,v);break;default:le(d,v)}l=l.sibling}}var Oe=8192;function Be(s){if(s.subtreeFlags&Oe)for(s=s.child;s!==null;)rt(s),s=s.sibling}function rt(s){switch(s.tag){case 26:Be(s),s.flags&Oe&&s.memoizedState!==null&&yz(Ir,s.memoizedState,s.memoizedProps);break;case 5:Be(s);break;case 3:case 4:var l=Ir;Ir=Ig(s.stateNode.containerInfo),Be(s),Ir=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=Oe,Oe=16777216,Be(s),Oe=l):Be(s));break;default:Be(s)}}function Ye(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function at(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var v=l[d];Xr=v,Dt(v,s)}Ye(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)kt(s),s=s.sibling}function kt(s){switch(s.tag){case 0:case 11:case 15:at(s),s.flags&2048&&ur(9,s,s.return);break;case 3:at(s);break;case 12:at(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,lr(s)):at(s);break;default:at(s)}}function lr(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var v=l[d];Xr=v,Dt(v,s)}Ye(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:ur(8,l,l.return),lr(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,lr(l));break;default:lr(l)}s=s.sibling}}function Dt(s,l){for(;Xr!==null;){var d=Xr;switch(d.tag){case 0:case 11:case 15:ur(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var v=d.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Xc(d.memoizedState.cache)}if(v=d.child,v!==null)v.return=d,Xr=v;else e:for(d=s;Xr!==null;){v=Xr;var g=v.sibling,T=v.return;if(br(v),v===d){Xr=null;break e}if(g!==null){g.return=T,Xr=g;break e}Xr=T}}}var Zt={getCacheForType:function(s){var l=gi(ni),d=l.data.get(s);return d===void 0&&(d=s(),l.data.set(s,d)),d}},cr=typeof WeakMap=="function"?WeakMap:Map,Gt=0,gr=null,yr=null,zr=0,Pr=0,Zi=null,Ii=!1,xu=!1,n1=!1,Ru=0,Jn=0,Pl=0,hf=0,i1=0,lo=0,Kd=0,hv=null,Aa=null,a1=!1,o1=0,bg=1/0,Tg=null,Dl=null,Ui=0,Ll=null,Qd=null,Jd=0,s1=0,u1=null,p3=null,pv=0,l1=null;function Xa(){if((Gt&2)!==0&&zr!==0)return zr&-zr;if(O.T!==null){var s=vu;return s!==0?s:m1()}return ed()}function v3(){lo===0&&(lo=(zr&536870912)===0||Yr?Kf():536870912);var s=fa.current;return s!==null&&(s.flags|=32),lo}function Ga(s,l,d){(s===gr&&(Pr===2||Pr===9)||s.cancelPendingCommit!==null)&&(eh(s,0),Bl(s,zr,lo,!1)),Mo(s,d),((Gt&2)===0||s!==gr)&&(s===gr&&((Gt&2)===0&&(hf|=d),Jn===4&&Bl(s,zr,lo,!1)),Is(s))}function m3(s,l,d){if((Gt&6)!==0)throw Error(n(327));var v=!d&&(l&124)===0&&(l&s.expiredLanes)===0||Ba(s,l),g=v?k9(s,l):d1(s,l,!0),T=v;do{if(g===0){xu&&!v&&Bl(s,l,0,!1);break}else{if(d=s.current.alternate,T&&!F9(d)){g=d1(s,l,!1),T=!1;continue}if(g===2){if(T=l,s.errorRecoveryDisabledLanes&T)var L=0;else L=s.pendingLanes&-536870913,L=L!==0?L:L&536870912?536870912:0;if(L!==0){l=L;e:{var q=s;g=hv;var ce=q.current.memoizedState.isDehydrated;if(ce&&(eh(q,L).flags|=256),L=d1(q,L,!1),L!==2){if(n1&&!ce){q.errorRecoveryDisabledLanes|=T,hf|=T,g=4;break e}T=Aa,Aa=g,T!==null&&(Aa===null?Aa=T:Aa.push.apply(Aa,T))}g=L}if(T=!1,g!==2)continue}}if(g===1){eh(s,0),Bl(s,l,0,!0);break}e:{switch(v=s,T=g,T){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:Bl(v,l,lo,!Ii);break e;case 2:Aa=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(g=o1+300-Nt(),10<g)){if(Bl(v,l,lo,!Ii),ra(v,0,!0)!==0)break e;v.timeoutHandle=G3(_3.bind(null,v,d,Aa,Tg,a1,l,lo,hf,Kd,Ii,T,2,-0,0),g);break e}_3(v,d,Aa,Tg,a1,l,lo,hf,Kd,Ii,T,0,-0,0)}}break}while(!0);Is(s)}function _3(s,l,d,v,g,T,L,q,ce,Pe,it,pt,je,He){if(s.timeoutHandle=-1,pt=l.subtreeFlags,(pt&8192||(pt&16785408)===16785408)&&(bv={stylesheets:null,count:0,unsuspend:gz},rt(l),pt=Ez(),pt!==null)){s.cancelPendingCommit=pt(A3.bind(null,s,l,T,d,v,g,L,q,ce,it,1,je,He)),Bl(s,T,L,!Pe);return}A3(s,l,T,d,v,g,L,q,ce)}function F9(s){for(var l=s;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var v=0;v<d.length;v++){var g=d[v],T=g.getSnapshot;g=g.value;try{if(!_i(T(),g))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Bl(s,l,d,v){l&=~i1,l&=~hf,s.suspendedLanes|=l,s.pingedLanes&=~l,v&&(s.warmLanes|=l),v=s.expirationTimes;for(var g=l;0<g;){var T=31-dr(g),L=1<<T;v[T]=-1,g&=~L}d!==0&&Jf(s,d,l)}function Sg(){return(Gt&6)===0?(vv(0),!1):!0}function c1(){if(yr!==null){if(Pr===0)var s=yr.return;else s=yr,oo=Ts=null,Qc(s),Su=null,Nl=0,s=yr;for(;s!==null;)Sr(s.alternate,s),s=s.return;yr=null}}function eh(s,l){var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,tz(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),c1(),gr=s,yr=d=ko(s.current,null),zr=l,Pr=0,Zi=null,Ii=!1,xu=Ba(s,l),n1=!1,Kd=lo=i1=hf=Pl=Jn=0,Aa=hv=null,a1=!1,(l&8)!==0&&(l|=l&32);var v=s.entangledLanes;if(v!==0)for(s=s.entanglements,v&=l;0<v;){var g=31-dr(v),T=1<<g;l|=s[g],v&=~T}return Ru=l,Fc(),d}function g3(s,l){Mr=null,O.H=Gd,l===mu||l===qc?(l=yl(),Pr=3):l===$_?(l=yl(),Pr=4):Pr=l===Eg?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Zi=l,yr===null&&(Jn=1,Yd(s,oa(l,s.current)))}function y3(){var s=O.H;return O.H=Gd,s===null?Gd:s}function E3(){var s=O.A;return O.A=Zt,s}function f1(){Jn=4,Ii||(zr&4194048)!==zr&&fa.current!==null||(xu=!0),(Pl&134217727)===0&&(hf&134217727)===0||gr===null||Bl(gr,zr,lo,!1)}function d1(s,l,d){var v=Gt;Gt|=2;var g=y3(),T=E3();(gr!==s||zr!==l)&&(Tg=null,eh(s,l)),l=!1;var L=Jn;e:do try{if(Pr!==0&&yr!==null){var q=yr,ce=Zi;switch(Pr){case 8:c1(),L=6;break e;case 3:case 2:case 9:case 6:fa.current===null&&(l=!0);var Pe=Pr;if(Pr=0,Zi=null,th(s,q,ce,Pe),d&&xu){L=0;break e}break;default:Pe=Pr,Pr=0,Zi=null,th(s,q,ce,Pe)}}U9(),L=Jn;break}catch(it){g3(s,it)}while(!0);return l&&s.shellSuspendCounter++,oo=Ts=null,Gt=v,O.H=g,O.A=T,yr===null&&(gr=null,zr=0,Fc()),L}function U9(){for(;yr!==null;)b3(yr)}function k9(s,l){var d=Gt;Gt|=2;var v=y3(),g=E3();gr!==s||zr!==l?(Tg=null,bg=Nt()+500,eh(s,l)):xu=Ba(s,l);e:do try{if(Pr!==0&&yr!==null){l=yr;var T=Zi;t:switch(Pr){case 1:Pr=0,Zi=null,th(s,l,T,1);break;case 2:case 9:if(Y_(T)){Pr=0,Zi=null,T3(l);break}l=function(){Pr!==2&&Pr!==9||gr!==s||(Pr=7),Is(s)},T.then(l,l);break e;case 3:Pr=7;break e;case 4:Pr=5;break e;case 7:Y_(T)?(Pr=0,Zi=null,T3(l)):(Pr=0,Zi=null,th(s,l,T,7));break;case 5:var L=null;switch(yr.tag){case 26:L=yr.memoizedState;case 5:case 27:var q=yr;if(!L||nO(L)){Pr=0,Zi=null;var ce=q.sibling;if(ce!==null)yr=ce;else{var Pe=q.return;Pe!==null?(yr=Pe,Ag(Pe)):yr=null}break t}}Pr=0,Zi=null,th(s,l,T,5);break;case 6:Pr=0,Zi=null,th(s,l,T,6);break;case 8:c1(),Jn=6;break e;default:throw Error(n(462))}}z9();break}catch(it){g3(s,it)}while(!0);return oo=Ts=null,O.H=v,O.A=g,Gt=d,yr!==null?0:(gr=null,zr=0,Fc(),Jn)}function z9(){for(;yr!==null&&!bt();)b3(yr)}function b3(s){var l=et(s.alternate,s,Ru);s.memoizedProps=s.pendingProps,l===null?Ag(s):yr=l}function T3(s){var l=s,d=l.alternate;switch(l.tag){case 15:case 0:l=ut(d,l,l.pendingProps,l.type,void 0,zr);break;case 11:l=ut(d,l,l.pendingProps,l.type.render,l.ref,zr);break;case 5:Qc(l);default:Sr(d,l),l=yr=X_(l,Ru),l=et(d,l,Ru)}s.memoizedProps=s.pendingProps,l===null?Ag(s):yr=l}function th(s,l,d,v){oo=Ts=null,Qc(l),Su=null,Nl=0;var g=l.return;try{if(r1(s,g,l,d,zr)){Jn=1,Yd(s,oa(d,s.current)),yr=null;return}}catch(T){if(g!==null)throw yr=g,T;Jn=1,Yd(s,oa(d,s.current)),yr=null;return}l.flags&32768?(Yr||v===1?s=!0:xu||(zr&536870912)!==0?s=!1:(Ii=s=!0,(v===2||v===9||v===3||v===6)&&(v=fa.current,v!==null&&v.tag===13&&(v.flags|=16384))),S3(l,s)):Ag(l)}function Ag(s){var l=s;do{if((l.flags&32768)!==0){S3(l,Ii);return}s=l.return;var d=Ze(l.alternate,l,Ru);if(d!==null){yr=d;return}if(l=l.sibling,l!==null){yr=l;return}yr=l=s}while(l!==null);Jn===0&&(Jn=5)}function S3(s,l){do{var d=ir(s.alternate,s);if(d!==null){d.flags&=32767,yr=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(s=s.sibling,s!==null)){yr=s;return}yr=s=d}while(s!==null);Jn=6,yr=null}function A3(s,l,d,v,g,T,L,q,ce){s.cancelPendingCommit=null;do xg();while(Ui!==0);if((Gt&6)!==0)throw Error(n(327));if(l!==null){if(l===s.current)throw Error(n(177));if(T=l.lanes|l.childLanes,T|=_d,Cc(s,d,T,L,q,ce),s===gr&&(yr=gr=null,zr=0),Qd=l,Ll=s,Jd=d,s1=T,u1=g,p3=v,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,X9(be,function(){return M3(),null})):(s.callbackNode=null,s.callbackPriority=0),v=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||v){v=O.T,O.T=null,g=k.p,k.p=2,L=Gt,Gt|=4;try{Ur(s,l,d)}finally{Gt=L,k.p=g,O.T=v}}Ui=1,x3(),R3(),C3()}}function x3(){if(Ui===1){Ui=0;var s=Ll,l=Qd,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=O.T,O.T=null;var v=k.p;k.p=2;var g=Gt;Gt|=4;try{X(l,s);var T=A1,L=F_(s.containerInfo),q=T.focusedElem,ce=T.selectionRange;if(L!==q&&q&&q.ownerDocument&&vd(q.ownerDocument.documentElement,q)){if(ce!==null&&Up(q)){var Pe=ce.start,it=ce.end;if(it===void 0&&(it=Pe),"selectionStart"in q)q.selectionStart=Pe,q.selectionEnd=Math.min(it,q.value.length);else{var pt=q.ownerDocument||document,je=pt&&pt.defaultView||window;if(je.getSelection){var He=je.getSelection(),Tr=q.textContent.length,vr=Math.min(ce.start,Tr),pn=ce.end===void 0?vr:Math.min(ce.end,Tr);!He.extend&&vr>pn&&(L=pn,pn=vr,vr=L);var Ae=B_(q,vr),me=B_(q,pn);if(Ae&&me&&(He.rangeCount!==1||He.anchorNode!==Ae.node||He.anchorOffset!==Ae.offset||He.focusNode!==me.node||He.focusOffset!==me.offset)){var Ne=pt.createRange();Ne.setStart(Ae.node,Ae.offset),He.removeAllRanges(),vr>pn?(He.addRange(Ne),He.extend(me.node,me.offset)):(Ne.setEnd(me.node,me.offset),He.addRange(Ne))}}}}for(pt=[],He=q;He=He.parentNode;)He.nodeType===1&&pt.push({element:He,left:He.scrollLeft,top:He.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<pt.length;q++){var st=pt[q];st.element.scrollLeft=st.left,st.element.scrollTop=st.top}}Fg=!!S1,A1=S1=null}finally{Gt=g,k.p=v,O.T=d}}s.current=l,Ui=2}}function R3(){if(Ui===2){Ui=0;var s=Ll,l=Qd,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=O.T,O.T=null;var v=k.p;k.p=2;var g=Gt;Gt|=4;try{$t(s,l.alternate,l)}finally{Gt=g,k.p=v,O.T=d}}Ui=3}}function C3(){if(Ui===4||Ui===3){Ui=0,Pt();var s=Ll,l=Qd,d=Jd,v=p3;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Ui=5:(Ui=0,Qd=Ll=null,O3(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Dl=null),qu(d),l=l.stateNode,sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(Ft,l,void 0,(l.current.flags&128)===128)}catch{}if(v!==null){l=O.T,g=k.p,k.p=2,O.T=null;try{for(var T=s.onRecoverableError,L=0;L<v.length;L++){var q=v[L];T(q.value,{componentStack:q.stack})}}finally{O.T=l,k.p=g}}(Jd&3)!==0&&xg(),Is(s),g=s.pendingLanes,(d&4194090)!==0&&(g&42)!==0?s===l1?pv++:(pv=0,l1=s):pv=0,vv(0)}}function O3(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Xc(l)))}function xg(s){return x3(),R3(),C3(),M3()}function M3(){if(Ui!==5)return!1;var s=Ll,l=s1;s1=0;var d=qu(Jd),v=O.T,g=k.p;try{k.p=32>d?32:d,O.T=null,d=u1,u1=null;var T=Ll,L=Jd;if(Ui=0,Qd=Ll=null,Jd=0,(Gt&6)!==0)throw Error(n(331));var q=Gt;if(Gt|=4,kt(T.current),ue(T,T.current,L,d),Gt=q,vv(0,!1),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(Ft,T)}catch{}return!0}finally{k.p=g,O.T=v,O3(s,l)}}function w3(s,l,d){l=oa(d,l),l=Zd(s.stateNode,l,2),s=xs(s,l,2),s!==null&&(Mo(s,2),Is(s))}function _n(s,l,d){if(s.tag===3)w3(s,s,d);else for(;l!==null;){if(l.tag===3){w3(l,s,d);break}else if(l.tag===1){var v=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Dl===null||!Dl.has(v))){s=oa(d,s),d=fv(2),v=xs(l,d,2),v!==null&&(dv(d,v,l,s),Mo(v,2),Is(v));break}}l=l.return}}function h1(s,l,d){var v=s.pingCache;if(v===null){v=s.pingCache=new cr;var g=new Set;v.set(l,g)}else g=v.get(l),g===void 0&&(g=new Set,v.set(l,g));g.has(d)||(n1=!0,g.add(d),s=j9.bind(null,s,l,d),l.then(s,s))}function j9(s,l,d){var v=s.pingCache;v!==null&&v.delete(l),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,gr===s&&(zr&d)===d&&(Jn===4||Jn===3&&(zr&62914560)===zr&&300>Nt()-o1?(Gt&2)===0&&eh(s,0):i1|=d,Kd===zr&&(Kd=0)),Is(s)}function N3(s,l){l===0&&(l=Qf()),s=Ua(s,l),s!==null&&(Mo(s,l),Is(s))}function V9(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),N3(s,d)}function H9(s,l){var d=0;switch(s.tag){case 13:var v=s.stateNode,g=s.memoizedState;g!==null&&(d=g.retryLane);break;case 19:v=s.stateNode;break;case 22:v=s.stateNode._retryCache;break;default:throw Error(n(314))}v!==null&&v.delete(l),N3(s,d)}function X9(s,l){return Wt(s,l)}var Rg=null,rh=null,p1=!1,Cg=!1,v1=!1,pf=0;function Is(s){s!==rh&&s.next===null&&(rh===null?Rg=rh=s:rh=rh.next=s),Cg=!0,p1||(p1=!0,q9())}function vv(s,l){if(!v1&&Cg){v1=!0;do for(var d=!1,v=Rg;v!==null;){if(s!==0){var g=v.pendingLanes;if(g===0)var T=0;else{var L=v.suspendedLanes,q=v.pingedLanes;T=(1<<31-dr(42|s)+1)-1,T&=g&~(L&~q),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(d=!0,L3(v,T))}else T=zr,T=ra(v,v===gr?T:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(T&3)===0||Ba(v,T)||(d=!0,L3(v,T));v=v.next}while(d);v1=!1}}function G9(){I3()}function I3(){Cg=p1=!1;var s=0;pf!==0&&(ez()&&(s=pf),pf=0);for(var l=Nt(),d=null,v=Rg;v!==null;){var g=v.next,T=P3(v,l);T===0?(v.next=null,d===null?Rg=g:d.next=g,g===null&&(rh=d)):(d=v,(s!==0||(T&3)!==0)&&(Cg=!0)),v=g}vv(s)}function P3(s,l){for(var d=s.suspendedLanes,v=s.pingedLanes,g=s.expirationTimes,T=s.pendingLanes&-62914561;0<T;){var L=31-dr(T),q=1<<L,ce=g[L];ce===-1?((q&d)===0||(q&v)!==0)&&(g[L]=Oo(q,l)):ce<=l&&(s.expiredLanes|=q),T&=~q}if(l=gr,d=zr,d=ra(s,s===l?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v=s.callbackNode,d===0||s===l&&(Pr===2||Pr===9)||s.cancelPendingCommit!==null)return v!==null&&v!==null&&Xt(v),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||Ba(s,d)){if(l=d&-d,l===s.callbackPriority)return l;switch(v!==null&&Xt(v),qu(d)){case 2:case 8:d=se;break;case 32:d=be;break;case 268435456:d=F;break;default:d=be}return v=D3.bind(null,s),d=Wt(d,v),s.callbackPriority=l,s.callbackNode=d,l}return v!==null&&v!==null&&Xt(v),s.callbackPriority=2,s.callbackNode=null,2}function D3(s,l){if(Ui!==0&&Ui!==5)return s.callbackNode=null,s.callbackPriority=0,null;var d=s.callbackNode;if(xg()&&s.callbackNode!==d)return null;var v=zr;return v=ra(s,s===gr?v:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v===0?null:(m3(s,v,l),P3(s,Nt()),s.callbackNode!=null&&s.callbackNode===d?D3.bind(null,s):null)}function L3(s,l){if(xg())return null;m3(s,l,!0)}function q9(){rz(function(){(Gt&6)!==0?Wt(Br,G9):I3()})}function m1(){return pf===0&&(pf=Kf()),pf}function B3(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Un(""+s)}function F3(s,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,s.id&&d.setAttribute("form",s.id),l.parentNode.insertBefore(d,l),s=new FormData(s),d.parentNode.removeChild(d),s}function W9(s,l,d,v,g){if(l==="submit"&&d&&d.stateNode===g){var T=B3((g[Ci]||null).action),L=v.submitter;L&&(l=(l=L[Ci]||null)?B3(l.formAction):L.getAttribute("formAction"),l!==null&&(T=l,L=null));var q=new eu("action","action",null,v,g);s.push({event:q,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(pf!==0){var ce=L?F3(g,L):new FormData(g);Ol(d,{pending:!0,data:ce,method:g.method,action:T},null,ce)}}else typeof T=="function"&&(q.preventDefault(),ce=L?F3(g,L):new FormData(g),Ol(d,{pending:!0,data:ce,method:g.method,action:T},T,ce))},currentTarget:g}]})}}for(var _1=0;_1<vl.length;_1++){var g1=vl[_1],$9=g1.toLowerCase(),Y9=g1[0].toUpperCase()+g1.slice(1);kn($9,"on"+Y9)}kn(k_,"onAnimationEnd"),kn(z_,"onAnimationIteration"),kn(j_,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(ZE,"onTransitionRun"),kn(KE,"onTransitionStart"),kn(V_,"onTransitionCancel"),kn(Bc,"onTransitionEnd"),ro("onMouseEnter",["mouseout","mouseover"]),ro("onMouseLeave",["mouseout","mouseover"]),ro("onPointerEnter",["pointerout","pointerover"]),ro("onPointerLeave",["pointerout","pointerover"]),ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ga("onBeforeInput",["compositionend","keypress","textInput","paste"]),ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mv));function U3(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var v=s[d],g=v.event;v=v.listeners;e:{var T=void 0;if(l)for(var L=v.length-1;0<=L;L--){var q=v[L],ce=q.instance,Pe=q.currentTarget;if(q=q.listener,ce!==T&&g.isPropagationStopped())break e;T=q,g.currentTarget=Pe;try{T(g)}catch(it){df(it)}g.currentTarget=null,T=ce}else for(L=0;L<v.length;L++){if(q=v[L],ce=q.instance,Pe=q.currentTarget,q=q.listener,ce!==T&&g.isPropagationStopped())break e;T=q,g.currentTarget=Pe;try{T(g)}catch(it){df(it)}g.currentTarget=null,T=ce}}}}function Gr(s,l){var d=l[Ks];d===void 0&&(d=l[Ks]=new Set);var v=s+"__bubble";d.has(v)||(k3(l,s,2,!1),d.add(v))}function y1(s,l,d){var v=0;l&&(v|=4),k3(d,s,v,l)}var Og="_reactListening"+Math.random().toString(36).slice(2);function E1(s){if(!s[Og]){s[Og]=!0,ds.forEach(function(d){d!=="selectionchange"&&(Z9.has(d)||y1(d,!1,s),y1(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Og]||(l[Og]=!0,y1("selectionchange",!1,l))}}function k3(s,l,d,v){switch(lO(l)){case 2:var g=Sz;break;case 8:g=Az;break;default:g=D1}d=g.bind(null,l,d,s),g=void 0,!Lo||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(g=!0),v?g!==void 0?s.addEventListener(l,d,{capture:!0,passive:g}):s.addEventListener(l,d,!0):g!==void 0?s.addEventListener(l,d,{passive:g}):s.addEventListener(l,d,!1)}function b1(s,l,d,v,g){var T=v;if((l&1)===0&&(l&2)===0&&v!==null)e:for(;;){if(v===null)return;var L=v.tag;if(L===3||L===4){var q=v.stateNode.containerInfo;if(q===g)break;if(L===4)for(L=v.return;L!==null;){var ce=L.tag;if((ce===3||ce===4)&&L.stateNode.containerInfo===g)return;L=L.return}for(;q!==null;){if(L=wo(q),L===null)return;if(ce=L.tag,ce===5||ce===6||ce===26||ce===27){v=T=L;continue e}q=q.parentNode}}v=v.return}b_(function(){var Pe=T,it=qi(d),pt=[];e:{var je=H_.get(s);if(je!==void 0){var He=eu,Tr=s;switch(s){case"keypress":if(Ic(d)===0)break e;case"keydown":case"keyup":He=R_;break;case"focusin":Tr="focus",He=Ap;break;case"focusout":Tr="blur",He=Ap;break;case"beforeblur":case"afterblur":He=Ap;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=S_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=jE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=xn;break;case k_:case z_:case j_:He=Dc;break;case Bc:He=WE;break;case"scroll":case"scrollend":He=T_;break;case"wheel":He=w_;break;case"copy":case"cut":case"paste":He=ul;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=C_;break;case"toggle":case"beforetoggle":He=nu}var vr=(l&4)!==0,pn=!vr&&(s==="scroll"||s==="scrollend"),Ae=vr?je!==null?je+"Capture":null:je;vr=[];for(var me=Pe,Ne;me!==null;){var st=me;if(Ne=st.stateNode,st=st.tag,st!==5&&st!==26&&st!==27||Ne===null||Ae===null||(st=wc(me,Ae),st!=null&&vr.push(_v(me,st,Ne))),pn)break;me=me.return}0<vr.length&&(je=new He(je,Tr,null,d,it),pt.push({event:je,listeners:vr}))}}if((l&7)===0){e:{if(je=s==="mouseover"||s==="pointerover",He=s==="mouseout"||s==="pointerout",je&&d!==qn&&(Tr=d.relatedTarget||d.fromElement)&&(wo(Tr)||Tr[cs]))break e;if((He||je)&&(je=it.window===it?it:(je=it.ownerDocument)?je.defaultView||je.parentWindow:window,He?(Tr=d.relatedTarget||d.toElement,He=Pe,Tr=Tr?wo(Tr):null,Tr!==null&&(pn=a(Tr),vr=Tr.tag,Tr!==pn||vr!==5&&vr!==27&&vr!==6)&&(Tr=null)):(He=null,Tr=Pe),He!==Tr)){if(vr=S_,st="onMouseLeave",Ae="onMouseEnter",me="mouse",(s==="pointerout"||s==="pointerover")&&(vr=C_,st="onPointerLeave",Ae="onPointerEnter",me="pointer"),pn=He==null?je:fs(He),Ne=Tr==null?je:fs(Tr),je=new vr(st,me+"leave",He,d,it),je.target=pn,je.relatedTarget=Ne,st=null,wo(it)===Pe&&(vr=new vr(Ae,me+"enter",Tr,d,it),vr.target=Ne,vr.relatedTarget=pn,st=vr),pn=st,He&&Tr)t:{for(vr=He,Ae=Tr,me=0,Ne=vr;Ne;Ne=nh(Ne))me++;for(Ne=0,st=Ae;st;st=nh(st))Ne++;for(;0<me-Ne;)vr=nh(vr),me--;for(;0<Ne-me;)Ae=nh(Ae),Ne--;for(;me--;){if(vr===Ae||Ae!==null&&vr===Ae.alternate)break t;vr=nh(vr),Ae=nh(Ae)}vr=null}else vr=null;He!==null&&z3(pt,je,He,vr,!1),Tr!==null&&pn!==null&&z3(pt,pn,Tr,vr,!0)}}e:{if(je=Pe?fs(Pe):window,He=je.nodeName&&je.nodeName.toLowerCase(),He==="select"||He==="input"&&je.type==="file")var Kt=dd;else if(cd(je))if(Ip)Kt=Bp;else{Kt=D_;var jr=P_}else He=je.nodeName,!He||He.toLowerCase()!=="input"||je.type!=="checkbox"&&je.type!=="radio"?Pe&&Ut(Pe.elementType)&&(Kt=dd):Kt=dl;if(Kt&&(Kt=Kt(s,Pe))){fd(pt,Kt,d,it);break e}jr&&jr(s,je,Pe),s==="focusout"&&Pe&&je.type==="number"&&Pe.memoizedProps.value!=null&&tl(je,"number",je.value)}switch(jr=Pe?fs(Pe):window,s){case"focusin":(cd(jr)||jr.contentEditable==="true")&&(gs=jr,kp=Pe,au=null);break;case"focusout":au=kp=gs=null;break;case"mousedown":md=!0;break;case"contextmenu":case"mouseup":case"dragend":md=!1,zp(pt,d,it);break;case"selectionchange":if(YE)break;case"keydown":case"keyup":zp(pt,d,it)}var or;if(ll)e:{switch(s){case"compositionstart":var _r="onCompositionStart";break e;case"compositionend":_r="onCompositionEnd";break e;case"compositionupdate":_r="onCompositionUpdate";break e}_r=void 0}else cl?N_(s,d)&&(_r="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(_r="onCompositionStart");_r&&(Op&&d.locale!=="ko"&&(cl||_r!=="onCompositionStart"?_r==="onCompositionEnd"&&cl&&(or=bp()):(_s=it,il="value"in _s?_s.value:_s.textContent,cl=!0)),jr=Mg(Pe,_r),0<jr.length&&(_r=new tu(_r,s,null,d,it),pt.push({event:_r,listeners:jr}),or?_r.data=or:(or=I_(d),or!==null&&(_r.data=or)))),(or=sd?$E(s,d):wp(s,d))&&(_r=Mg(Pe,"onBeforeInput"),0<_r.length&&(jr=new tu("onBeforeInput","beforeinput",null,d,it),pt.push({event:jr,listeners:_r}),jr.data=or)),W9(pt,s,Pe,d,it)}U3(pt,l)})}function _v(s,l,d){return{instance:s,listener:l,currentTarget:d}}function Mg(s,l){for(var d=l+"Capture",v=[];s!==null;){var g=s,T=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||T===null||(g=wc(s,d),g!=null&&v.unshift(_v(s,g,T)),g=wc(s,l),g!=null&&v.push(_v(s,g,T))),s.tag===3)return v;s=s.return}return[]}function nh(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function z3(s,l,d,v,g){for(var T=l._reactName,L=[];d!==null&&d!==v;){var q=d,ce=q.alternate,Pe=q.stateNode;if(q=q.tag,ce!==null&&ce===v)break;q!==5&&q!==26&&q!==27||Pe===null||(ce=Pe,g?(Pe=wc(d,T),Pe!=null&&L.unshift(_v(d,Pe,ce))):g||(Pe=wc(d,T),Pe!=null&&L.push(_v(d,Pe,ce)))),d=d.return}L.length!==0&&s.push({event:l,listeners:L})}var K9=/\r\n?/g,Q9=/\u0000|\uFFFD/g;function j3(s){return(typeof s=="string"?s:""+s).replace(K9,`
`).replace(Q9,"")}function V3(s,l){return l=j3(l),j3(s)===l}function wg(){}function hn(s,l,d,v,g,T){switch(d){case"children":typeof v=="string"?l==="body"||l==="textarea"&&v===""||Z(s,v):(typeof v=="number"||typeof v=="bigint")&&l!=="body"&&Z(s,""+v);break;case"className":na(s,"class",v);break;case"tabIndex":na(s,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":na(s,d,v);break;case"style":yt(s,v,T);break;case"data":if(l!=="object"){na(s,"data",v);break}case"src":case"href":if(v===""&&(l!=="a"||d!=="href")){s.removeAttribute(d);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(d);break}v=Un(""+v),s.setAttribute(d,v);break;case"action":case"formAction":if(typeof v=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(d==="formAction"?(l!=="input"&&hn(s,l,"name",g.name,g,null),hn(s,l,"formEncType",g.formEncType,g,null),hn(s,l,"formMethod",g.formMethod,g,null),hn(s,l,"formTarget",g.formTarget,g,null)):(hn(s,l,"encType",g.encType,g,null),hn(s,l,"method",g.method,g,null),hn(s,l,"target",g.target,g,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(d);break}v=Un(""+v),s.setAttribute(d,v);break;case"onClick":v!=null&&(s.onclick=wg);break;case"onScroll":v!=null&&Gr("scroll",s);break;case"onScrollEnd":v!=null&&Gr("scrollend",s);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(d=v.__html,d!=null){if(g.children!=null)throw Error(n(60));s.innerHTML=d}}break;case"multiple":s.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":s.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){s.removeAttribute("xlink:href");break}d=Un(""+v),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(d,""+v):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":v===!0?s.setAttribute(d,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(d,v):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?s.setAttribute(d,v):s.removeAttribute(d);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?s.removeAttribute(d):s.setAttribute(d,v);break;case"popover":Gr("beforetoggle",s),Gr("toggle",s),Fa(s,"popover",v);break;case"xlinkActuate":ti(s,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":ti(s,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":ti(s,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":ti(s,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":ti(s,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":ti(s,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":ti(s,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":ti(s,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":ti(s,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Fa(s,"is",v);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=wr.get(d)||d,Fa(s,d,v))}}function T1(s,l,d,v,g,T){switch(d){case"style":yt(s,v,T);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(d=v.__html,d!=null){if(g.children!=null)throw Error(n(60));s.innerHTML=d}}break;case"children":typeof v=="string"?Z(s,v):(typeof v=="number"||typeof v=="bigint")&&Z(s,""+v);break;case"onScroll":v!=null&&Gr("scroll",s);break;case"onScrollEnd":v!=null&&Gr("scrollend",s);break;case"onClick":v!=null&&(s.onclick=wg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hs.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(g=d.endsWith("Capture"),l=d.slice(2,g?d.length-7:void 0),T=s[Ci]||null,T=T!=null?T[d]:null,typeof T=="function"&&s.removeEventListener(l,T,g),typeof v=="function")){typeof T!="function"&&T!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(l,v,g);break e}d in s?s[d]=v:v===!0?s.setAttribute(d,""):Fa(s,d,v)}}}function ki(s,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gr("error",s),Gr("load",s);var v=!1,g=!1,T;for(T in d)if(d.hasOwnProperty(T)){var L=d[T];if(L!=null)switch(T){case"src":v=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:hn(s,l,T,L,d,null)}}g&&hn(s,l,"srcSet",d.srcSet,d,null),v&&hn(s,l,"src",d.src,d,null);return;case"input":Gr("invalid",s);var q=T=L=g=null,ce=null,Pe=null;for(v in d)if(d.hasOwnProperty(v)){var it=d[v];if(it!=null)switch(v){case"name":g=it;break;case"type":L=it;break;case"checked":ce=it;break;case"defaultChecked":Pe=it;break;case"value":T=it;break;case"defaultValue":q=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(n(137,l));break;default:hn(s,l,v,it,d,null)}}el(s,T,q,ce,Pe,L,g,!1),ps(s);return;case"select":Gr("invalid",s),v=L=T=null;for(g in d)if(d.hasOwnProperty(g)&&(q=d[g],q!=null))switch(g){case"value":T=q;break;case"defaultValue":L=q;break;case"multiple":v=q;default:hn(s,l,g,q,d,null)}l=T,d=L,s.multiple=!!v,l!=null?ms(s,!!v,l,!1):d!=null&&ms(s,!!v,d,!0);return;case"textarea":Gr("invalid",s),T=g=v=null;for(L in d)if(d.hasOwnProperty(L)&&(q=d[L],q!=null))switch(L){case"value":v=q;break;case"defaultValue":g=q;break;case"children":T=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(91));break;default:hn(s,l,L,q,d,null)}G(s,v,g,T),ps(s);return;case"option":for(ce in d)if(d.hasOwnProperty(ce)&&(v=d[ce],v!=null))switch(ce){case"selected":s.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:hn(s,l,ce,v,d,null)}return;case"dialog":Gr("beforetoggle",s),Gr("toggle",s),Gr("cancel",s),Gr("close",s);break;case"iframe":case"object":Gr("load",s);break;case"video":case"audio":for(v=0;v<mv.length;v++)Gr(mv[v],s);break;case"image":Gr("error",s),Gr("load",s);break;case"details":Gr("toggle",s);break;case"embed":case"source":case"link":Gr("error",s),Gr("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Pe in d)if(d.hasOwnProperty(Pe)&&(v=d[Pe],v!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:hn(s,l,Pe,v,d,null)}return;default:if(Ut(l)){for(it in d)d.hasOwnProperty(it)&&(v=d[it],v!==void 0&&T1(s,l,it,v,d,void 0));return}}for(q in d)d.hasOwnProperty(q)&&(v=d[q],v!=null&&hn(s,l,q,v,d,null))}function J9(s,l,d,v){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,T=null,L=null,q=null,ce=null,Pe=null,it=null;for(He in d){var pt=d[He];if(d.hasOwnProperty(He)&&pt!=null)switch(He){case"checked":break;case"value":break;case"defaultValue":ce=pt;default:v.hasOwnProperty(He)||hn(s,l,He,null,v,pt)}}for(var je in v){var He=v[je];if(pt=d[je],v.hasOwnProperty(je)&&(He!=null||pt!=null))switch(je){case"type":T=He;break;case"name":g=He;break;case"checked":Pe=He;break;case"defaultChecked":it=He;break;case"value":L=He;break;case"defaultValue":q=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(n(137,l));break;default:He!==pt&&hn(s,l,je,He,v,pt)}}vs(s,L,q,ce,Pe,it,T,g);return;case"select":He=L=q=je=null;for(T in d)if(ce=d[T],d.hasOwnProperty(T)&&ce!=null)switch(T){case"value":break;case"multiple":He=ce;default:v.hasOwnProperty(T)||hn(s,l,T,null,v,ce)}for(g in v)if(T=v[g],ce=d[g],v.hasOwnProperty(g)&&(T!=null||ce!=null))switch(g){case"value":je=T;break;case"defaultValue":q=T;break;case"multiple":L=T;default:T!==ce&&hn(s,l,g,T,v,ce)}l=q,d=L,v=He,je!=null?ms(s,!!d,je,!1):!!v!=!!d&&(l!=null?ms(s,!!d,l,!0):ms(s,!!d,d?[]:"",!1));return;case"textarea":He=je=null;for(q in d)if(g=d[q],d.hasOwnProperty(q)&&g!=null&&!v.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:hn(s,l,q,null,v,g)}for(L in v)if(g=v[L],T=d[L],v.hasOwnProperty(L)&&(g!=null||T!=null))switch(L){case"value":je=g;break;case"defaultValue":He=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==T&&hn(s,l,L,g,v,T)}rd(s,je,He);return;case"option":for(var Tr in d)if(je=d[Tr],d.hasOwnProperty(Tr)&&je!=null&&!v.hasOwnProperty(Tr))switch(Tr){case"selected":s.selected=!1;break;default:hn(s,l,Tr,null,v,je)}for(ce in v)if(je=v[ce],He=d[ce],v.hasOwnProperty(ce)&&je!==He&&(je!=null||He!=null))switch(ce){case"selected":s.selected=je&&typeof je!="function"&&typeof je!="symbol";break;default:hn(s,l,ce,je,v,He)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vr in d)je=d[vr],d.hasOwnProperty(vr)&&je!=null&&!v.hasOwnProperty(vr)&&hn(s,l,vr,null,v,je);for(Pe in v)if(je=v[Pe],He=d[Pe],v.hasOwnProperty(Pe)&&je!==He&&(je!=null||He!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(n(137,l));break;default:hn(s,l,Pe,je,v,He)}return;default:if(Ut(l)){for(var pn in d)je=d[pn],d.hasOwnProperty(pn)&&je!==void 0&&!v.hasOwnProperty(pn)&&T1(s,l,pn,void 0,v,je);for(it in v)je=v[it],He=d[it],!v.hasOwnProperty(it)||je===He||je===void 0&&He===void 0||T1(s,l,it,je,v,He);return}}for(var Ae in d)je=d[Ae],d.hasOwnProperty(Ae)&&je!=null&&!v.hasOwnProperty(Ae)&&hn(s,l,Ae,null,v,je);for(pt in v)je=v[pt],He=d[pt],!v.hasOwnProperty(pt)||je===He||je==null&&He==null||hn(s,l,pt,je,v,He)}var S1=null,A1=null;function Ng(s){return s.nodeType===9?s:s.ownerDocument}function H3(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function X3(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function x1(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var R1=null;function ez(){var s=window.event;return s&&s.type==="popstate"?s===R1?!1:(R1=s,!0):(R1=null,!1)}var G3=typeof setTimeout=="function"?setTimeout:void 0,tz=typeof clearTimeout=="function"?clearTimeout:void 0,q3=typeof Promise=="function"?Promise:void 0,rz=typeof queueMicrotask=="function"?queueMicrotask:typeof q3<"u"?function(s){return q3.resolve(null).then(s).catch(nz)}:G3;function nz(s){setTimeout(function(){throw s})}function Fl(s){return s==="head"}function W3(s,l){var d=l,v=0,g=0;do{var T=d.nextSibling;if(s.removeChild(d),T&&T.nodeType===8)if(d=T.data,d==="/$"){if(0<v&&8>v){d=v;var L=s.ownerDocument;if(d&1&&gv(L.documentElement),d&2&&gv(L.body),d&4)for(d=L.head,gv(d),L=d.firstChild;L;){var q=L.nextSibling,ce=L.nodeName;L[Qs]||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&L.rel.toLowerCase()==="stylesheet"||d.removeChild(L),L=q}}if(g===0){s.removeChild(T),Rv(l);return}g--}else d==="$"||d==="$?"||d==="$!"?g++:v=d.charCodeAt(0)-48;else v=0;d=T}while(d);Rv(l)}function C1(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":C1(d),$u(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function iz(s,l,d,v){for(;s.nodeType===1;){var g=d;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!v&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(v){if(!s[Qs])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(T=s.getAttribute("rel"),T==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(T!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(T=s.getAttribute("src"),(T!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&T&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var T=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===T)return s}else return s;if(s=Yo(s.nextSibling),s===null)break}return null}function az(s,l,d){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=Yo(s.nextSibling),s===null))return null;return s}function O1(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function oz(s,l){var d=s.ownerDocument;if(s.data!=="$?"||d.readyState==="complete")l();else{var v=function(){l(),d.removeEventListener("DOMContentLoaded",v)};d.addEventListener("DOMContentLoaded",v),s._reactRetry=v}}function Yo(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}var M1=null;function $3(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return s;l--}else d==="/$"&&l++}s=s.previousSibling}return null}function Y3(s,l,d){switch(l=Ng(d),s){case"html":if(s=l.documentElement,!s)throw Error(n(452));return s;case"head":if(s=l.head,!s)throw Error(n(453));return s;case"body":if(s=l.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function gv(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);$u(s)}var co=new Map,Z3=new Set;function Ig(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Cu=k.d;k.d={f:sz,r:uz,D:lz,C:cz,L:fz,m:dz,X:pz,S:hz,M:vz};function sz(){var s=Cu.f(),l=Sg();return s||l}function uz(s){var l=No(s);l!==null&&l.tag===5&&l.type==="form"?uf(l):Cu.r(s)}var ih=typeof document>"u"?null:document;function K3(s,l,d){var v=ih;if(v&&typeof l=="string"&&l){var g=Bi(l);g='link[rel="'+s+'"][href="'+g+'"]',typeof d=="string"&&(g+='[crossorigin="'+d+'"]'),Z3.has(g)||(Z3.add(g),s={rel:s,crossOrigin:d,href:l},v.querySelector(g)===null&&(l=v.createElement("link"),ki(l,"link",s),dn(l),v.head.appendChild(l)))}}function lz(s){Cu.D(s),K3("dns-prefetch",s,null)}function cz(s,l){Cu.C(s,l),K3("preconnect",s,l)}function fz(s,l,d){Cu.L(s,l,d);var v=ih;if(v&&s&&l){var g='link[rel="preload"][as="'+Bi(l)+'"]';l==="image"&&d&&d.imageSrcSet?(g+='[imagesrcset="'+Bi(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(g+='[imagesizes="'+Bi(d.imageSizes)+'"]')):g+='[href="'+Bi(s)+'"]';var T=g;switch(l){case"style":T=ah(s);break;case"script":T=oh(s)}co.has(T)||(s=h({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:s,as:l},d),co.set(T,s),v.querySelector(g)!==null||l==="style"&&v.querySelector(yv(T))||l==="script"&&v.querySelector(Ev(T))||(l=v.createElement("link"),ki(l,"link",s),dn(l),v.head.appendChild(l)))}}function dz(s,l){Cu.m(s,l);var d=ih;if(d&&s){var v=l&&typeof l.as=="string"?l.as:"script",g='link[rel="modulepreload"][as="'+Bi(v)+'"][href="'+Bi(s)+'"]',T=g;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=oh(s)}if(!co.has(T)&&(s=h({rel:"modulepreload",href:s},l),co.set(T,s),d.querySelector(g)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Ev(T)))return}v=d.createElement("link"),ki(v,"link",s),dn(v),d.head.appendChild(v)}}}function hz(s,l,d){Cu.S(s,l,d);var v=ih;if(v&&s){var g=to(v).hoistableStyles,T=ah(s);l=l||"default";var L=g.get(T);if(!L){var q={loading:0,preload:null};if(L=v.querySelector(yv(T)))q.loading=5;else{s=h({rel:"stylesheet",href:s,"data-precedence":l},d),(d=co.get(T))&&w1(s,d);var ce=L=v.createElement("link");dn(ce),ki(ce,"link",s),ce._p=new Promise(function(Pe,it){ce.onload=Pe,ce.onerror=it}),ce.addEventListener("load",function(){q.loading|=1}),ce.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Pg(L,l,v)}L={type:"stylesheet",instance:L,count:1,state:q},g.set(T,L)}}}function pz(s,l){Cu.X(s,l);var d=ih;if(d&&s){var v=to(d).hoistableScripts,g=oh(s),T=v.get(g);T||(T=d.querySelector(Ev(g)),T||(s=h({src:s,async:!0},l),(l=co.get(g))&&N1(s,l),T=d.createElement("script"),dn(T),ki(T,"link",s),d.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},v.set(g,T))}}function vz(s,l){Cu.M(s,l);var d=ih;if(d&&s){var v=to(d).hoistableScripts,g=oh(s),T=v.get(g);T||(T=d.querySelector(Ev(g)),T||(s=h({src:s,async:!0,type:"module"},l),(l=co.get(g))&&N1(s,l),T=d.createElement("script"),dn(T),ki(T,"link",s),d.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},v.set(g,T))}}function Q3(s,l,d,v){var g=(g=It.current)?Ig(g):null;if(!g)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=ah(d.href),d=to(g).hoistableStyles,v=d.get(l),v||(v={type:"style",instance:null,count:0,state:null},d.set(l,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=ah(d.href);var T=to(g).hoistableStyles,L=T.get(s);if(L||(g=g.ownerDocument||g,L={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(s,L),(T=g.querySelector(yv(s)))&&!T._p&&(L.instance=T,L.state.loading=5),co.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},co.set(s,d),T||mz(g,s,d,L.state))),l&&v===null)throw Error(n(528,""));return L}if(l&&v!==null)throw Error(n(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=oh(d),d=to(g).hoistableScripts,v=d.get(l),v||(v={type:"script",instance:null,count:0,state:null},d.set(l,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function ah(s){return'href="'+Bi(s)+'"'}function yv(s){return'link[rel="stylesheet"]['+s+"]"}function J3(s){return h({},s,{"data-precedence":s.precedence,precedence:null})}function mz(s,l,d,v){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?v.loading=1:(l=s.createElement("link"),v.preload=l,l.addEventListener("load",function(){return v.loading|=1}),l.addEventListener("error",function(){return v.loading|=2}),ki(l,"link",d),dn(l),s.head.appendChild(l))}function oh(s){return'[src="'+Bi(s)+'"]'}function Ev(s){return"script[async]"+s}function eO(s,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var v=s.querySelector('style[data-href~="'+Bi(d.href)+'"]');if(v)return l.instance=v,dn(v),v;var g=h({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return v=(s.ownerDocument||s).createElement("style"),dn(v),ki(v,"style",g),Pg(v,d.precedence,s),l.instance=v;case"stylesheet":g=ah(d.href);var T=s.querySelector(yv(g));if(T)return l.state.loading|=4,l.instance=T,dn(T),T;v=J3(d),(g=co.get(g))&&w1(v,g),T=(s.ownerDocument||s).createElement("link"),dn(T);var L=T;return L._p=new Promise(function(q,ce){L.onload=q,L.onerror=ce}),ki(T,"link",v),l.state.loading|=4,Pg(T,d.precedence,s),l.instance=T;case"script":return T=oh(d.src),(g=s.querySelector(Ev(T)))?(l.instance=g,dn(g),g):(v=d,(g=co.get(T))&&(v=h({},d),N1(v,g)),s=s.ownerDocument||s,g=s.createElement("script"),dn(g),ki(g,"link",v),s.head.appendChild(g),l.instance=g);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(v=l.instance,l.state.loading|=4,Pg(v,d.precedence,s));return l.instance}function Pg(s,l,d){for(var v=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=v.length?v[v.length-1]:null,T=g,L=0;L<v.length;L++){var q=v[L];if(q.dataset.precedence===l)T=q;else if(T!==g)break}T?T.parentNode.insertBefore(s,T.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(s,l.firstChild))}function w1(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function N1(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Dg=null;function tO(s,l,d){if(Dg===null){var v=new Map,g=Dg=new Map;g.set(d,v)}else g=Dg,v=g.get(d),v||(v=new Map,g.set(d,v));if(v.has(s))return v;for(v.set(s,null),d=d.getElementsByTagName(s),g=0;g<d.length;g++){var T=d[g];if(!(T[Qs]||T[Gn]||s==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var L=T.getAttribute(l)||"";L=s+L;var q=v.get(L);q?q.push(T):v.set(L,[T])}}return v}function rO(s,l,d){s=s.ownerDocument||s,s.head.insertBefore(d,l==="title"?s.querySelector("head > title"):null)}function _z(s,l,d){if(d===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function nO(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var bv=null;function gz(){}function yz(s,l,d){if(bv===null)throw Error(n(475));var v=bv;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=ah(d.href),T=s.querySelector(yv(g));if(T){s=T._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(v.count++,v=Lg.bind(v),s.then(v,v)),l.state.loading|=4,l.instance=T,dn(T);return}T=s.ownerDocument||s,d=J3(d),(g=co.get(g))&&w1(d,g),T=T.createElement("link"),dn(T);var L=T;L._p=new Promise(function(q,ce){L.onload=q,L.onerror=ce}),ki(T,"link",d),l.instance=T}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(v.count++,l=Lg.bind(v),s.addEventListener("load",l),s.addEventListener("error",l))}}function Ez(){if(bv===null)throw Error(n(475));var s=bv;return s.stylesheets&&s.count===0&&I1(s,s.stylesheets),0<s.count?function(l){var d=setTimeout(function(){if(s.stylesheets&&I1(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(d)}}:null}function Lg(){if(this.count--,this.count===0){if(this.stylesheets)I1(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Bg=null;function I1(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Bg=new Map,l.forEach(bz,s),Bg=null,Lg.call(s))}function bz(s,l){if(!(l.state.loading&4)){var d=Bg.get(s);if(d)var v=d.get(null);else{d=new Map,Bg.set(s,d);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<g.length;T++){var L=g[T];(L.nodeName==="LINK"||L.getAttribute("media")!=="not all")&&(d.set(L.dataset.precedence,L),v=L)}v&&d.set(null,v)}g=l.instance,L=g.getAttribute("data-precedence"),T=d.get(L)||v,T===v&&d.set(null,g),d.set(L,g),this.count++,v=Lg.bind(this),g.addEventListener("load",v),g.addEventListener("error",v),T?T.parentNode.insertBefore(g,T.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),l.state.loading|=4}}var Tv={$$typeof:R,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function Tz(s,l,d,v,g,T,L,q){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zs(0),this.hiddenUpdates=Zs(null),this.identifierPrefix=v,this.onUncaughtError=g,this.onCaughtError=T,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function iO(s,l,d,v,g,T,L,q,ce,Pe,it,pt){return s=new Tz(s,l,d,L,q,ce,Pe,pt),l=1,T===!0&&(l|=24),T=$i(3,null,null,l),s.current=T,T.stateNode=s,l=Wp(),l.refCount++,s.pooledCache=l,l.refCount++,T.memoizedState={element:v,isDehydrated:d,cache:l},Qp(T),s}function aO(s){return s?(s=lu,s):lu}function oO(s,l,d,v,g,T){g=aO(g),v.context===null?v.context=g:v.pendingContext=g,v=ua(l),v.payload={element:d},T=T===void 0?null:T,T!==null&&(v.callback=T),d=xs(s,v,l),d!==null&&(Ga(d,s,l),so(d,s,l))}function sO(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function P1(s,l){sO(s,l),(s=s.alternate)&&sO(s,l)}function uO(s){if(s.tag===13){var l=Ua(s,67108864);l!==null&&Ga(l,s,67108864),P1(s,67108864)}}var Fg=!0;function Sz(s,l,d,v){var g=O.T;O.T=null;var T=k.p;try{k.p=2,D1(s,l,d,v)}finally{k.p=T,O.T=g}}function Az(s,l,d,v){var g=O.T;O.T=null;var T=k.p;try{k.p=8,D1(s,l,d,v)}finally{k.p=T,O.T=g}}function D1(s,l,d,v){if(Fg){var g=L1(v);if(g===null)b1(s,l,v,Ug,d),cO(s,v);else if(Rz(g,s,l,d,v))v.stopPropagation();else if(cO(s,v),l&4&&-1<xz.indexOf(s)){for(;g!==null;){var T=No(g);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var L=Hi(T.pendingLanes);if(L!==0){var q=T;for(q.pendingLanes|=2,q.entangledLanes|=2;L;){var ce=1<<31-dr(L);q.entanglements[1]|=ce,L&=~ce}Is(T),(Gt&6)===0&&(bg=Nt()+500,vv(0))}}break;case 13:q=Ua(T,2),q!==null&&Ga(q,T,2),Sg(),P1(T,2)}if(T=L1(v),T===null&&b1(s,l,v,Ug,d),T===g)break;g=T}g!==null&&v.stopPropagation()}else b1(s,l,v,null,d)}}function L1(s){return s=qi(s),B1(s)}var Ug=null;function B1(s){if(Ug=null,s=wo(s),s!==null){var l=a(s);if(l===null)s=null;else{var d=l.tag;if(d===13){if(s=o(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Ug=s,null}function lO(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jt()){case Br:return 2;case se:return 8;case be:case Fe:return 32;case F:return 268435456;default:return 32}default:return 32}}var F1=!1,Ul=null,kl=null,zl=null,Sv=new Map,Av=new Map,jl=[],xz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cO(s,l){switch(s){case"focusin":case"focusout":Ul=null;break;case"dragenter":case"dragleave":kl=null;break;case"mouseover":case"mouseout":zl=null;break;case"pointerover":case"pointerout":Sv.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Av.delete(l.pointerId)}}function xv(s,l,d,v,g,T){return s===null||s.nativeEvent!==T?(s={blockedOn:l,domEventName:d,eventSystemFlags:v,nativeEvent:T,targetContainers:[g]},l!==null&&(l=No(l),l!==null&&uO(l)),s):(s.eventSystemFlags|=v,l=s.targetContainers,g!==null&&l.indexOf(g)===-1&&l.push(g),s)}function Rz(s,l,d,v,g){switch(l){case"focusin":return Ul=xv(Ul,s,l,d,v,g),!0;case"dragenter":return kl=xv(kl,s,l,d,v,g),!0;case"mouseover":return zl=xv(zl,s,l,d,v,g),!0;case"pointerover":var T=g.pointerId;return Sv.set(T,xv(Sv.get(T)||null,s,l,d,v,g)),!0;case"gotpointercapture":return T=g.pointerId,Av.set(T,xv(Av.get(T)||null,s,l,d,v,g)),!0}return!1}function fO(s){var l=wo(s.target);if(l!==null){var d=a(l);if(d!==null){if(l=d.tag,l===13){if(l=o(d),l!==null){s.blockedOn=l,gp(s.priority,function(){if(d.tag===13){var v=Xa();v=Oc(v);var g=Ua(d,v);g!==null&&Ga(g,d,v),P1(d,v)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function kg(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=L1(s.nativeEvent);if(d===null){d=s.nativeEvent;var v=new d.constructor(d.type,d);qn=v,d.target.dispatchEvent(v),qn=null}else return l=No(d),l!==null&&uO(l),s.blockedOn=d,!1;l.shift()}return!0}function dO(s,l,d){kg(s)&&d.delete(l)}function Cz(){F1=!1,Ul!==null&&kg(Ul)&&(Ul=null),kl!==null&&kg(kl)&&(kl=null),zl!==null&&kg(zl)&&(zl=null),Sv.forEach(dO),Av.forEach(dO)}function zg(s,l){s.blockedOn===l&&(s.blockedOn=null,F1||(F1=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Cz)))}var jg=null;function hO(s){jg!==s&&(jg=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){jg===s&&(jg=null);for(var l=0;l<s.length;l+=3){var d=s[l],v=s[l+1],g=s[l+2];if(typeof v!="function"){if(B1(v||d)===null)continue;break}var T=No(d);T!==null&&(s.splice(l,3),l-=3,Ol(T,{pending:!0,data:g,method:d.method,action:v},v,g))}}))}function Rv(s){function l(ce){return zg(ce,s)}Ul!==null&&zg(Ul,s),kl!==null&&zg(kl,s),zl!==null&&zg(zl,s),Sv.forEach(l),Av.forEach(l);for(var d=0;d<jl.length;d++){var v=jl[d];v.blockedOn===s&&(v.blockedOn=null)}for(;0<jl.length&&(d=jl[0],d.blockedOn===null);)fO(d),d.blockedOn===null&&jl.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(v=0;v<d.length;v+=3){var g=d[v],T=d[v+1],L=g[Ci]||null;if(typeof T=="function")L||hO(d);else if(L){var q=null;if(T&&T.hasAttribute("formAction")){if(g=T,L=T[Ci]||null)q=L.formAction;else if(B1(g)!==null)continue}else q=L.action;typeof q=="function"?d[v+1]=q:(d.splice(v,3),v-=3),hO(d)}}}function U1(s){this._internalRoot=s}Vg.prototype.render=U1.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(n(409));var d=l.current,v=Xa();oO(d,v,s,l,null,null)},Vg.prototype.unmount=U1.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;oO(s.current,2,null,s,null,null),Sg(),l[cs]=null}};function Vg(s){this._internalRoot=s}Vg.prototype.unstable_scheduleHydration=function(s){if(s){var l=ed();s={blockedOn:null,target:s,priority:l};for(var d=0;d<jl.length&&l!==0&&l<jl[d].priority;d++);jl.splice(d,0,s),d===0&&fO(s)}};var pO=t.version;if(pO!=="19.1.1")throw Error(n(527,pO,"19.1.1"));k.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=c(l),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var Oz={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hg.isDisabled&&Hg.supportsFiber)try{Ft=Hg.inject(Oz),sr=Hg}catch{}}return Nv.createRoot=function(s,l){if(!i(s))throw Error(n(299));var d=!1,v="",g=mg,T=_g,L=gg,q=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(L=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(q=l.unstable_transitionCallbacks)),l=iO(s,1,!1,null,null,d,v,g,T,L,q,null),s[cs]=l.current,E1(s),new U1(l)},Nv.hydrateRoot=function(s,l,d){if(!i(s))throw Error(n(299));var v=!1,g="",T=mg,L=_g,q=gg,ce=null,Pe=null;return d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(g=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(L=d.onCaughtError),d.onRecoverableError!==void 0&&(q=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(ce=d.unstable_transitionCallbacks),d.formState!==void 0&&(Pe=d.formState)),l=iO(s,1,!0,l,d??null,v,g,T,L,q,ce,Pe),l.context=aO(null),d=l.current,v=Xa(),v=Oc(v),g=ua(v),g.callback=null,xs(d,g,v),d=v,l.current.lanes=d,Mo(l,d),Is(l),s[cs]=l.current,E1(s),new Vg(l)},Nv.version="19.1.1",Nv}var KO;function aH(){if(KO)return Y1.exports;KO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Y1.exports=iH(),Y1.exports}var oH=aH();let sH={data:""},uH=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||sH,lH=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,cH=/\/\*[^]*?\*\/|  +/g,QO=/\n+/g,Kl=(e,t)=>{let r="",n="",i="";for(let a in e){let o=e[a];a[0]=="@"?a[1]=="i"?r=a+" "+o+";":n+=a[1]=="f"?Kl(o,a):a+"{"+Kl(o,a[1]=="k"?"":t)+"}":typeof o=="object"?n+=Kl(o,t?t.replace(/([^,])+/g,u=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,u):u?u+" "+c:c)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Kl.p?Kl.p(a,o):a+":"+o+";")}return r+(t&&i?t+"{"+i+"}":i)+n},Ou={},dF=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+dF(e[r]);return t}return e},fH=(e,t,r,n,i)=>{let a=dF(e),o=Ou[a]||(Ou[a]=(c=>{let f=0,h=11;for(;f<c.length;)h=101*h+c.charCodeAt(f++)>>>0;return"go"+h})(a));if(!Ou[o]){let c=a!==e?e:(f=>{let h,p,m=[{}];for(;h=lH.exec(f.replace(cH,""));)h[4]?m.shift():h[3]?(p=h[3].replace(QO," ").trim(),m.unshift(m[0][p]=m[0][p]||{})):m[0][h[1]]=h[2].replace(QO," ").trim();return m[0]})(e);Ou[o]=Kl(i?{["@keyframes "+o]:c}:c,r?"":"."+o)}let u=r&&Ou.g?Ou.g:null;return r&&(Ou.g=Ou[o]),((c,f,h,p)=>{p?f.data=f.data.replace(p,c):f.data.indexOf(c)===-1&&(f.data=h?c+f.data:f.data+c)})(Ou[o],t,n,u),o},dH=(e,t,r)=>e.reduce((n,i,a)=>{let o=t[a];if(o&&o.call){let u=o(r),c=u&&u.props&&u.props.className||/^go/.test(u)&&u;o=c?"."+c:u&&typeof u=="object"?u.props?"":Kl(u,""):u===!1?"":u}return n+i+(o??"")},"");function iE(e){let t=this||{},r=e.call?e(t.p):e;return fH(r.unshift?r.raw?dH(r,[].slice.call(arguments,1),t.p):r.reduce((n,i)=>Object.assign(n,i&&i.call?i(t.p):i),{}):r,uH(t.target),t.g,t.o,t.k)}let hF,cR,fR;iE.bind({g:1});let ku=iE.bind({k:1});function hH(e,t,r,n){Kl.p=t,hF=e,cR=r,fR=n}function Tc(e,t){let r=this||{};return function(){let n=arguments;function i(a,o){let u=Object.assign({},a),c=u.className||i.className;r.p=Object.assign({theme:cR&&cR()},u),r.o=/ *go\d+/.test(c),u.className=iE.apply(r,n)+(c?" "+c:"");let f=e;return e[0]&&(f=u.as||e,delete u.as),fR&&f[0]&&fR(u),hF(f,u)}return i}}var pH=e=>typeof e=="function",J0=(e,t)=>pH(e)?e(t):e,vH=(()=>{let e=0;return()=>(++e).toString()})(),pF=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),mH=20,U2="default",vF=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return vF(e,{type:e.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},x0=[],mF={toasts:[],pausedAt:void 0,settings:{toastLimit:mH}},Us={},_F=(e,t=U2)=>{Us[t]=vF(Us[t]||mF,e),x0.forEach(([r,n])=>{r===t&&n(Us[t])})},gF=e=>Object.keys(Us).forEach(t=>_F(e,t)),_H=e=>Object.keys(Us).find(t=>Us[t].toasts.some(r=>r.id===e)),aE=(e=U2)=>t=>{_F(t,e)},gH={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},yH=(e={},t=U2)=>{let[r,n]=z.useState(Us[t]||mF),i=z.useRef(Us[t]);z.useEffect(()=>(i.current!==Us[t]&&n(Us[t]),x0.push([t,n]),()=>{let o=x0.findIndex(([u])=>u===t);o>-1&&x0.splice(o,1)}),[t]);let a=r.toasts.map(o=>{var u,c,f;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((u=e[o.type])==null?void 0:u.removeDelay)||e?.removeDelay,duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||e?.duration||gH[o.type],style:{...e.style,...(f=e[o.type])==null?void 0:f.style,...o.style}}});return{...r,toasts:a}},EH=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:r?.id||vH()}),a_=e=>(t,r)=>{let n=EH(t,e,r);return aE(n.toasterId||_H(n.id))({type:2,toast:n}),n.id},Hn=(e,t)=>a_("blank")(e,t);Hn.error=a_("error");Hn.success=a_("success");Hn.loading=a_("loading");Hn.custom=a_("custom");Hn.dismiss=(e,t)=>{let r={type:3,toastId:e};t?aE(t)(r):gF(r)};Hn.dismissAll=e=>Hn.dismiss(void 0,e);Hn.remove=(e,t)=>{let r={type:4,toastId:e};t?aE(t)(r):gF(r)};Hn.removeAll=e=>Hn.remove(void 0,e);Hn.promise=(e,t,r)=>{let n=Hn.loading(t.loading,{...r,...r?.loading});return typeof e=="function"&&(e=e()),e.then(i=>{let a=t.success?J0(t.success,i):void 0;return a?Hn.success(a,{id:n,...r,...r?.success}):Hn.dismiss(n),i}).catch(i=>{let a=t.error?J0(t.error,i):void 0;a?Hn.error(a,{id:n,...r,...r?.error}):Hn.dismiss(n)}),e};var bH=1e3,TH=(e,t="default")=>{let{toasts:r,pausedAt:n}=yH(e,t),i=z.useRef(new Map).current,a=z.useCallback((p,m=bH)=>{if(i.has(p))return;let _=setTimeout(()=>{i.delete(p),o({type:4,toastId:p})},m);i.set(p,_)},[]);z.useEffect(()=>{if(n)return;let p=Date.now(),m=r.map(_=>{if(_.duration===1/0)return;let y=(_.duration||0)+_.pauseDuration-(p-_.createdAt);if(y<0){_.visible&&Hn.dismiss(_.id);return}return setTimeout(()=>Hn.dismiss(_.id,t),y)});return()=>{m.forEach(_=>_&&clearTimeout(_))}},[r,n,t]);let o=z.useCallback(aE(t),[t]),u=z.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=z.useCallback((p,m)=>{o({type:1,toast:{id:p,height:m}})},[o]),f=z.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),h=z.useCallback((p,m)=>{let{reverseOrder:_=!1,gutter:y=8,defaultPosition:E}=m||{},b=r.filter(R=>(R.position||E)===(p.position||E)&&R.height),S=b.findIndex(R=>R.id===p.id),A=b.filter((R,M)=>M<S&&R.visible).length;return b.filter(R=>R.visible).slice(..._?[A+1]:[0,A]).reduce((R,M)=>R+(M.height||0)+y,0)},[r]);return z.useEffect(()=>{r.forEach(p=>{if(p.dismissed)a(p.id,p.removeDelay);else{let m=i.get(p.id);m&&(clearTimeout(m),i.delete(p.id))}})},[r,a]),{toasts:r,handlers:{updateHeight:c,startPause:u,endPause:f,calculateOffset:h}}},SH=ku`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,AH=ku`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,xH=ku`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,RH=Tc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${SH} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${AH} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${xH} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,CH=ku`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,OH=Tc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${CH} 1s linear infinite;
`,MH=ku`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,wH=ku`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,NH=Tc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${MH} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${wH} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,IH=Tc("div")`
  position: absolute;
`,PH=Tc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,DH=ku`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,LH=Tc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${DH} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,BH=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?z.createElement(LH,null,t):t:r==="blank"?null:z.createElement(PH,null,z.createElement(OH,{...n}),r!=="loading"&&z.createElement(IH,null,r==="error"?z.createElement(RH,{...n}):z.createElement(NH,{...n})))},FH=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,UH=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,kH="0%{opacity:0;} 100%{opacity:1;}",zH="0%{opacity:1;} 100%{opacity:0;}",jH=Tc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,VH=Tc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,HH=(e,t)=>{let r=e.includes("top")?1:-1,[n,i]=pF()?[kH,zH]:[FH(r),UH(r)];return{animation:t?`${ku(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ku(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},XH=z.memo(({toast:e,position:t,style:r,children:n})=>{let i=e.height?HH(e.position||t||"top-center",e.visible):{opacity:0},a=z.createElement(BH,{toast:e}),o=z.createElement(VH,{...e.ariaProps},J0(e.message,e));return z.createElement(jH,{className:e.className,style:{...i,...r,...e.style}},typeof n=="function"?n({icon:a,message:o}):z.createElement(z.Fragment,null,a,o))});hH(z.createElement);var GH=({id:e,className:t,style:r,onHeightUpdate:n,children:i})=>{let a=z.useCallback(o=>{if(o){let u=()=>{let c=o.getBoundingClientRect().height;n(e,c)};u(),new MutationObserver(u).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return z.createElement("div",{ref:a,className:t,style:r},i)},qH=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:pF()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...i}},WH=iE`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Kg=16,$H=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:i,toasterId:a,containerStyle:o,containerClassName:u})=>{let{toasts:c,handlers:f}=TH(r,a);return z.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:Kg,left:Kg,right:Kg,bottom:Kg,pointerEvents:"none",...o},className:u,onMouseEnter:f.startPause,onMouseLeave:f.endPause},c.map(h=>{let p=h.position||t,m=f.calculateOffset(h,{reverseOrder:e,gutter:n,defaultPosition:t}),_=qH(p,m);return z.createElement(GH,{id:h.id,key:h.id,onHeightUpdate:f.updateHeight,className:h.visible?WH:"",style:_},h.type==="custom"?J0(h.message,h):i?i(h):z.createElement(XH,{toast:h,position:p}))}))};const YH=z.createContext(void 0),ZH=({children:e})=>{const[t,r]=z.useState(""),[n,i]=z.useState(!1),a=()=>{r(""),i(!1)},o=z.useMemo(()=>({searchQuery:t,setSearchQuery:r,isSearching:n,setIsSearching:i,clearSearch:a}),[t,n]);return ze.jsx(YH.Provider,{value:o,children:e})},KH=new tj({defaultOptions:{queries:{staleTime:300*1e3,gcTime:600*1e3,retry:2,retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!1,refetchOnReconnect:!0},mutations:{retry:1}}});function QH(){return ze.jsx("div",{className:"min-h-screen bg-background text-foreground",children:ze.jsx("main",{className:"py-0 px-0",children:ze.jsx(fF,{})})})}function JH({title:e,description:t}){return ze.jsxs("div",{className:"p-6 bg-card border rounded-lg",children:[ze.jsx("h3",{className:"text-xl font-semibold mb-2",children:e}),ze.jsx("p",{className:"text-muted-foreground",children:t})]})}const eX=[{title:"React 19",description:" React "},{title:"TanStack Router",description:""},{title:"TailwindCSS v4",description:" CSS "}];function tX(){return ze.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:eX.map(e=>ze.jsx(JH,{title:e.title,description:e.description},e.title))})}function rX(){return ze.jsxs("div",{className:"text-center",children:[ze.jsx("h2",{className:"text-3xl font-bold mb-4",children:" SKER "}),ze.jsx("p",{className:"text-lg text-muted-foreground",children:" React 19 + TanStack Router "})]})}function nX(){return ze.jsxs("div",{className:"space-y-6",children:[ze.jsx(rX,{}),ze.jsx(tX,{}),ze.jsx("div",{className:"text-center pt-8",children:ze.jsx(F2,{to:"/dashboard",className:"inline-flex items-center px-6 py-3 bg-primary text-primary-foreground rounded-lg font-medium hover:bg-primary/90 transition-colors",children:" "})})]})}var yF={},EF={},JO=e=>EF[e],Ja=(e,t)=>{EF[e]=t},iX=e=>yF[e],lp=(e,t)=>{yF[e]=t},eM={},Q1={},J1=34,Iv=10,eb=13;function bF(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+'] || ""'}).join(",")+"}")}function aX(e,t){var r=bF(e);return function(n,i){return t(r(n),i,e)}}function tM(e){var t=Object.create(null),r=[];return e.forEach(function(n){for(var i in n)i in t||r.push(t[i]=i)}),r}function xa(e,t){var r=e+"",n=r.length;return n<t?new Array(t-n+1).join(0)+r:r}function oX(e){return e<0?"-"+xa(-e,6):e>9999?"+"+xa(e,6):xa(e,4)}function sX(e){var t=e.getUTCHours(),r=e.getUTCMinutes(),n=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":oX(e.getUTCFullYear())+"-"+xa(e.getUTCMonth()+1,2)+"-"+xa(e.getUTCDate(),2)+(i?"T"+xa(t,2)+":"+xa(r,2)+":"+xa(n,2)+"."+xa(i,3)+"Z":n?"T"+xa(t,2)+":"+xa(r,2)+":"+xa(n,2)+"Z":r||t?"T"+xa(t,2)+":"+xa(r,2)+"Z":"")}function uX(e){var t=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function n(p,m){var _,y,E=i(p,function(b,S){if(_)return _(b,S-1);y=b,_=m?aX(b,m):bF(b)});return E.columns=y||[],E}function i(p,m){var _=[],y=p.length,E=0,b=0,S,A=y<=0,R=!1;p.charCodeAt(y-1)===Iv&&--y,p.charCodeAt(y-1)===eb&&--y;function M(){if(A)return Q1;if(R)return R=!1,eM;var I,w=E,U;if(p.charCodeAt(w)===J1){for(;E++<y&&p.charCodeAt(E)!==J1||p.charCodeAt(++E)===J1;);return(I=E)>=y?A=!0:(U=p.charCodeAt(E++))===Iv?R=!0:U===eb&&(R=!0,p.charCodeAt(E)===Iv&&++E),p.slice(w+1,I-1).replace(/""/g,'"')}for(;E<y;){if((U=p.charCodeAt(I=E++))===Iv)R=!0;else if(U===eb)R=!0,p.charCodeAt(E)===Iv&&++E;else if(U!==r)continue;return p.slice(w,I)}return A=!0,p.slice(w,y)}for(;(S=M())!==Q1;){for(var P=[];S!==eM&&S!==Q1;)P.push(S),S=M();m&&(P=m(P,b++))==null||_.push(P)}return _}function a(p,m){return p.map(function(_){return m.map(function(y){return h(_[y])}).join(e)})}function o(p,m){return m==null&&(m=tM(p)),[m.map(h).join(e)].concat(a(p,m)).join(`
`)}function u(p,m){return m==null&&(m=tM(p)),a(p,m).join(`
`)}function c(p){return p.map(f).join(`
`)}function f(p){return p.map(h).join(e)}function h(p){return p==null?"":p instanceof Date?sX(p):t.test(p+="")?'"'+p.replace(/"/g,'""')+'"':p}return{parse:n,parseRows:i,format:o,formatBody:u,formatRows:c,formatRow:f,formatValue:h}}var lX=uX(","),cX=lX.parse;function Bm(e,t,r){r===void 0&&(r={});var n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function k2(e,t,r){r===void 0&&(r={});for(var n=0,i=e;n<i.length;n++){var a=i[n];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<a[a.length-1].length;o++)if(a[a.length-1][o]!==a[0][o])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:e};return Bm(u,t,r)}function fX(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:e};return Bm(n,t,r)}function dX(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function hX(e,t,r){r===void 0&&(r={});var n={type:"MultiPolygon",coordinates:e};return Bm(n,t,r)}function TF(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function rM(e){return e.type==="Feature"?e.geometry:e}function SF(e,t,r){if(e!==null)for(var n,i,a,o,u,c,f,h=0,p=0,m,_=e.type,y=_==="FeatureCollection",E=_==="Feature",b=y?e.features.length:1,S=0;S<b;S++){f=y?e.features[S].geometry:E?e.geometry:e,m=f?f.type==="GeometryCollection":!1,u=m?f.geometries.length:1;for(var A=0;A<u;A++){var R=0,M=0;if(o=m?f.geometries[A]:f,o!==null){c=o.coordinates;var P=o.type;switch(h=0,P){case null:break;case"Point":if(t(c,p,S,R,M)===!1)return!1;p++,R++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(t(c[n],p,S,R,M)===!1)return!1;p++,P==="MultiPoint"&&R++}P==="LineString"&&R++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(i=0;i<c[n].length-h;i++){if(t(c[n][i],p,S,R,M)===!1)return!1;p++}P==="MultiLineString"&&R++,P==="Polygon"&&M++}P==="Polygon"&&R++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for(M=0,i=0;i<c[n].length;i++){for(a=0;a<c[n][i].length-h;a++){if(t(c[n][i][a],p,S,R,M)===!1)return!1;p++}M++}R++}break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(SF(o.geometries[n],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function pX(e,t){var r,n,i,a,o,u,c,f,h,p,m=0,_=e.type==="FeatureCollection",y=e.type==="Feature",E=_?e.features.length:1;for(r=0;r<E;r++){for(u=_?e.features[r].geometry:y?e.geometry:e,f=_?e.features[r].properties:y?e.properties:{},h=_?e.features[r].bbox:y?e.bbox:void 0,p=_?e.features[r].id:y?e.id:void 0,c=u?u.type==="GeometryCollection":!1,o=c?u.geometries.length:1,i=0;i<o;i++){if(a=c?u.geometries[i]:u,a===null){if(t(null,m,f,h,p)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,m,f,h,p)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<a.geometries.length;n++)if(t(a.geometries[n],m,f,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}m++}}function AF(e,t){pX(e,function(r,n,i,a,o){var u=r===null?null:r.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return t(Bm(r,i,{bbox:a,id:o}),n,0)===!1?!1:void 0}var c;switch(u){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon";break}for(var f=0;f<r.coordinates.length;f++){var h=r.coordinates[f],p={type:c,coordinates:h};if(t(Bm(p,i),n,f)===!1)return!1}})}var R0={REGISTERED_PROTOCOLS:{}},vX=Object.defineProperty,mX=Object.defineProperties,_X=Object.getOwnPropertyDescriptors,nM=Object.getOwnPropertySymbols,gX=Object.prototype.hasOwnProperty,yX=Object.prototype.propertyIsEnumerable,iM=(e,t,r)=>t in e?vX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z2=(e,t)=>{for(var r in t||(t={}))gX.call(t,r)&&iM(e,r,t[r]);if(nM)for(var r of nM(t))yX.call(t,r)&&iM(e,r,t[r]);return e},j2=(e,t)=>mX(e,_X(t)),V2=e=>R0.REGISTERED_PROTOCOLS[e.substring(0,e.indexOf("://"))],EX=class extends Error{constructor(e,t,r,n){super(`AJAXError: ${t} (${e}): ${r}`),this.status=e,this.statusText=t,this.url=r,this.body=n}};function xF(e,t){const r=new XMLHttpRequest,n=Array.isArray(e.url)?e.url[0]:e.url;r.open(e.method||"GET",n,!0),e.type==="arrayBuffer"&&(r.responseType="arraybuffer");for(const i in e.headers)e.headers.hasOwnProperty(i)&&r.setRequestHeader(i,e.headers[i]);return e.type==="json"&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials=e.credentials==="include",r.onerror=()=>{t(new Error(r.statusText))},r.onload=()=>{if((r.status>=200&&r.status<300||r.status===0)&&r.response!==null){let i=r.response;if(e.type==="json")try{i=JSON.parse(r.response)}catch(a){return t(a)}t(null,i,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"),r)}else{const i=new Blob([r.response],{type:r.getResponseHeader("Content-Type")});t(new EX(r.status,r.statusText,n.toString(),i))}},r.cancel=r.abort,r.send(e.body),r}function bX(e){return new Promise((t,r)=>{xF(e,(n,i,a,o,u)=>{n?r({err:n,data:null,xhr:u}):t({err:null,data:i,cacheControl:a,expires:o,xhr:u})})})}function H2(e,t){return xF(e,t)}var TX=(e,t)=>(V2(e.url)||H2)(j2(z2({},e),{type:"json"}),t),X2=(e,t)=>(V2(e.url)||H2)(j2(z2({},e),{type:"arrayBuffer"}),t),SX=(e,t)=>H2(j2(z2({},e),{method:"GET"}),t),aM="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function RF(e,t){const r=new window.Image,n=window.URL||window.webkitURL;r.crossOrigin="anonymous",r.onload=()=>{t(null,r),n.revokeObjectURL(r.src),r.onload=null,window.requestAnimationFrame(()=>{r.src=aM})},r.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const i=new Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?n.createObjectURL(i):aM}function CF(e,t){const r=new Blob([new Uint8Array(e)],{type:"image/png"});createImageBitmap(r).then(n=>{t(null,n)}).catch(n=>{t(new Error(`Could not load image because of ${n.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}var dR=(e,t,r)=>{const n=(i,a)=>{if(i)t(i);else if(a){const o=typeof createImageBitmap=="function",u=r?r(a):a;o?CF(u,t):RF(u,t)}};return e.type==="json"?TX(e,n):X2(e,n)},AX=(e,t)=>{typeof createImageBitmap=="function"?CF(e,t):RF(e,t)},OF=(e=>(e.CENTER="center",e.TOP="top",e["TOP-LEFT"]="top-left",e["TOP-RIGHT"]="top-right",e.BOTTOM="bottom",e["BOTTOM-LEFT"]="bottom-left",e["BOTTOM-RIGHT"]="bottom-right",e.LEFT="left",e.RIGHT="right",e))(OF||{}),hR={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function xX(e,t,r){const n=e.classList;for(const i in hR)hR.hasOwnProperty(i)&&n.remove(`l7-${r}-anchor-${i}`);n.add(`l7-${r}-anchor-${t}`)}function G2(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function MF(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function o_(){}var Fm=.7,ey=1/Fm,Mh="\\s*([+-]?\\d+)\\s*",Um="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",js="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",RX=/^#([0-9a-f]{3,8})$/,CX=new RegExp("^rgb\\("+[Mh,Mh,Mh]+"\\)$"),OX=new RegExp("^rgb\\("+[js,js,js]+"\\)$"),MX=new RegExp("^rgba\\("+[Mh,Mh,Mh,Um]+"\\)$"),wX=new RegExp("^rgba\\("+[js,js,js,Um]+"\\)$"),NX=new RegExp("^hsl\\("+[Um,js,js]+"\\)$"),IX=new RegExp("^hsla\\("+[Um,js,js,Um]+"\\)$"),oM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};G2(o_,Vh,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:sM,formatHex:sM,formatHsl:PX,formatRgb:uM,toString:uM});function sM(){return this.rgb().formatHex()}function PX(){return wF(this).formatHsl()}function uM(){return this.rgb().formatRgb()}function Vh(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=RX.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?lM(t):r===3?new Ya(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Qg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Qg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=CX.exec(e))?new Ya(t[1],t[2],t[3],1):(t=OX.exec(e))?new Ya(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=MX.exec(e))?Qg(t[1],t[2],t[3],t[4]):(t=wX.exec(e))?Qg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=NX.exec(e))?dM(t[1],t[2]/100,t[3]/100,1):(t=IX.exec(e))?dM(t[1],t[2]/100,t[3]/100,t[4]):oM.hasOwnProperty(e)?lM(oM[e]):e==="transparent"?new Ya(NaN,NaN,NaN,0):null}function lM(e){return new Ya(e>>16&255,e>>8&255,e&255,1)}function Qg(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ya(e,t,r,n)}function DX(e){return e instanceof o_||(e=Vh(e)),e?(e=e.rgb(),new Ya(e.r,e.g,e.b,e.opacity)):new Ya}function ty(e,t,r,n){return arguments.length===1?DX(e):new Ya(e,t,r,n??1)}function Ya(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}G2(Ya,ty,MF(o_,{brighter:function(e){return e=e==null?ey:Math.pow(ey,e),new Ya(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Fm:Math.pow(Fm,e),new Ya(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cM,formatHex:cM,formatRgb:fM,toString:fM}));function cM(){return"#"+tb(this.r)+tb(this.g)+tb(this.b)}function fM(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function tb(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function dM(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ls(e,t,r,n)}function wF(e){if(e instanceof Ls)return new Ls(e.h,e.s,e.l,e.opacity);if(e instanceof o_||(e=Vh(e)),!e)return new Ls;if(e instanceof Ls)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),o=NaN,u=a-i,c=(a+i)/2;return u?(t===a?o=(r-n)/u+(r<n)*6:r===a?o=(n-t)/u+2:o=(t-r)/u+4,u/=c<.5?a+i:2-a-i,o*=60):u=c>0&&c<1?0:o,new Ls(o,u,c,e.opacity)}function LX(e,t,r,n){return arguments.length===1?wF(e):new Ls(e,t,r,n??1)}function Ls(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}G2(Ls,LX,MF(o_,{brighter:function(e){return e=e==null?ey:Math.pow(ey,e),new Ls(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Fm:Math.pow(Fm,e),new Ls(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Ya(rb(e>=240?e-240:e+120,i,n),rb(e,i,n),rb(e<120?e+240:e-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function rb(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}function fn(e){const t=Vh(e),r=[0,0,0,0];return t!=null&&(r[0]=t.r/255,r[1]=t.g/255,r[2]=t.b/255,r[3]=t.opacity),r}function Cf(e){const t=e&&e[0],r=e&&e[1],n=e&&e[2];return t+r*256+n*65536-1}function Hh(e){return[e+1&255,e+1>>8&255,e+1>>8>>8&255]}function BX(e){let t=window.document.createElement("canvas"),r=t.getContext("2d");t.width=256,t.height=1;let n=null;const i=r.createLinearGradient(0,0,256,1),a=e.positions[0],o=e.positions[e.positions.length-1];for(let u=0;u<e.colors.length;++u){const c=(e.positions[u]-a)/(o-a);i.addColorStop(c,e.colors[u])}return r.fillStyle=i,r.fillRect(0,0,256,1),n=new Uint8ClampedArray(r.getImageData(0,0,256,1).data),t=null,r=null,{data:n,width:256,height:1}}function FX(e,t){let r=window.document.createElement("canvas"),n=r.getContext("2d");r.width=256,r.height=1;const i=n.createLinearGradient(0,0,256,1),a=t[1]-t[0];for(let c=0;c<e.colors.length;++c){const f=Math.max((e.positions[c]-t[0])/a,0);i.addColorStop(f,e.colors[c])}n.fillStyle=i,n.fillRect(0,0,256,1);const o=n.getImageData(0,0,256,1).data,u=q2(n,o);return r=null,n=null,u}function UX(e){let t=window.document.createElement("canvas"),r=t.getContext("2d");t.width=256,t.height=1;const n=r.createImageData(256,1);return n.data.fill(0),e.positions.forEach((i,a)=>{const o=fn(e.colors[a]);n.data[i*4+0]=o[0]*255,n.data[i*4+1]=o[1]*255,n.data[i*4+2]=o[2]*255,n.data[i*4+3]=o[3]*255}),t=null,r=null,n}function kX(e){let t=window.document.createElement("canvas"),r=t.getContext("2d");r.globalAlpha=1,t.width=256,t.height=1;const n=256/e.colors.length;for(let o=0;o<e.colors.length;o++)r.beginPath(),r.lineWidth=2,r.strokeStyle=e.colors[o],r.moveTo(o*n,0),r.lineTo((o+1)*n,0),r.stroke();const i=r.getImageData(0,0,256,1).data,a=q2(r,i);return t=null,r=null,a}function zX(e,t){let r=window.document.createElement("canvas"),n=r.getContext("2d");n.globalAlpha=1,r.width=256,r.height=1;const i=t[1]-t[0];e.positions.length-e.colors.length!==1&&console.warn("positions  colors ,poisitions ");for(let u=0;u<e.colors.length;u++)n.beginPath(),n.lineWidth=2,n.strokeStyle=e.colors[u],n.moveTo((e.positions[u]-t[0])/i*255,0),n.lineTo((e.positions[u+1]-t[0])/i*255,0),n.stroke();const a=n.getImageData(0,0,256,1).data,o=q2(n,a);return r=null,n=null,o}function q2(e,t){const r=e.createImageData(256,1);for(let n=0;n<r.data.length;n+=4)r.data[n+0]=t[n+0],r.data[n+1]=t[n+1],r.data[n+2]=t[n+2],r.data[n+3]=t[n+3];return r}function W2(e){switch(e?.type){case"cat":return[0,255];default:return[0,1]}}var nb,hM;function jX(){if(hM)return nb;hM=1;function e(t,r,n){return t===t&&(n!==void 0&&(t=t<=n?t:n),r!==void 0&&(t=t>=r?t:r)),t}return nb=e,nb}var ib,pM;function VX(){if(pM)return ib;pM=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return ib=t,ib}var ab,vM;function HX(){if(vM)return ab;vM=1;var e=VX(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return ab=r,ab}var ob,mM;function Ao(){if(mM)return ob;mM=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return ob=e,ob}var sb,_M;function NF(){if(_M)return sb;_M=1;var e=typeof Xg=="object"&&Xg&&Xg.Object===Object&&Xg;return sb=e,sb}var ub,gM;function ss(){if(gM)return ub;gM=1;var e=NF(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return ub=r,ub}var lb,yM;function s_(){if(yM)return lb;yM=1;var e=ss(),t=e.Symbol;return lb=t,lb}var cb,EM;function XX(){if(EM)return cb;EM=1;var e=s_(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function a(o){var u=r.call(o,i),c=o[i];try{o[i]=void 0;var f=!0}catch{}var h=n.call(o);return f&&(u?o[i]=c:delete o[i]),h}return cb=a,cb}var fb,bM;function GX(){if(bM)return fb;bM=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return fb=r,fb}var db,TM;function Hu(){if(TM)return db;TM=1;var e=s_(),t=XX(),r=GX(),n="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function o(u){return u==null?u===void 0?i:n:a&&a in Object(u)?t(u):r(u)}return db=o,db}var hb,SM;function xo(){if(SM)return hb;SM=1;function e(t){return t!=null&&typeof t=="object"}return hb=e,hb}var pb,AM;function oE(){if(AM)return pb;AM=1;var e=Hu(),t=xo(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return pb=n,pb}var vb,xM;function IF(){if(xM)return vb;xM=1;var e=HX(),t=Ao(),r=oE(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,u=parseInt;function c(f){if(typeof f=="number")return f;if(r(f))return n;if(t(f)){var h=typeof f.valueOf=="function"?f.valueOf():f;f=t(h)?h+"":h}if(typeof f!="string")return f===0?f:+f;f=e(f);var p=a.test(f);return p||o.test(f)?u(f.slice(2),p?2:8):i.test(f)?n:+f}return vb=c,vb}var mb,RM;function qX(){if(RM)return mb;RM=1;var e=jX(),t=IF();function r(n,i,a){return a===void 0&&(a=i,i=void 0),a!==void 0&&(a=t(a),a=a===a?a:0),i!==void 0&&(i=t(i),i=i===i?i:0),e(t(n),i,a)}return mb=r,mb}var WX=qX();const $X=$r(WX);var _b,CM;function YX(){if(CM)return _b;CM=1;function e(){this.__data__=[],this.size=0}return _b=e,_b}var gb,OM;function u_(){if(OM)return gb;OM=1;function e(t,r){return t===r||t!==t&&r!==r}return gb=e,gb}var yb,MM;function sE(){if(MM)return yb;MM=1;var e=u_();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return yb=t,yb}var Eb,wM;function ZX(){if(wM)return Eb;wM=1;var e=sE(),t=Array.prototype,r=t.splice;function n(i){var a=this.__data__,o=e(a,i);if(o<0)return!1;var u=a.length-1;return o==u?a.pop():r.call(a,o,1),--this.size,!0}return Eb=n,Eb}var bb,NM;function KX(){if(NM)return bb;NM=1;var e=sE();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return bb=t,bb}var Tb,IM;function QX(){if(IM)return Tb;IM=1;var e=sE();function t(r){return e(this.__data__,r)>-1}return Tb=t,Tb}var Sb,PM;function JX(){if(PM)return Sb;PM=1;var e=sE();function t(r,n){var i=this.__data__,a=e(i,r);return a<0?(++this.size,i.push([r,n])):i[a][1]=n,this}return Sb=t,Sb}var Ab,DM;function uE(){if(DM)return Ab;DM=1;var e=YX(),t=ZX(),r=KX(),n=QX(),i=JX();function a(o){var u=-1,c=o==null?0:o.length;for(this.clear();++u<c;){var f=o[u];this.set(f[0],f[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,Ab=a,Ab}var xb,LM;function eG(){if(LM)return xb;LM=1;var e=uE();function t(){this.__data__=new e,this.size=0}return xb=t,xb}var Rb,BM;function tG(){if(BM)return Rb;BM=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return Rb=e,Rb}var Cb,FM;function rG(){if(FM)return Cb;FM=1;function e(t){return this.__data__.get(t)}return Cb=e,Cb}var Ob,UM;function nG(){if(UM)return Ob;UM=1;function e(t){return this.__data__.has(t)}return Ob=e,Ob}var Mb,kM;function lE(){if(kM)return Mb;kM=1;var e=Hu(),t=Ao(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(u){if(!t(u))return!1;var c=e(u);return c==n||c==i||c==r||c==a}return Mb=o,Mb}var wb,zM;function iG(){if(zM)return wb;zM=1;var e=ss(),t=e["__core-js_shared__"];return wb=t,wb}var Nb,jM;function aG(){if(jM)return Nb;jM=1;var e=iG(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return Nb=r,Nb}var Ib,VM;function PF(){if(VM)return Ib;VM=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return Ib=r,Ib}var Pb,HM;function oG(){if(HM)return Pb;HM=1;var e=lE(),t=aG(),r=Ao(),n=PF(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,u=Object.prototype,c=o.toString,f=u.hasOwnProperty,h=RegExp("^"+c.call(f).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(m){if(!r(m)||t(m))return!1;var _=e(m)?h:a;return _.test(n(m))}return Pb=p,Pb}var Db,XM;function sG(){if(XM)return Db;XM=1;function e(t,r){return t?.[r]}return Db=e,Db}var Lb,GM;function qf(){if(GM)return Lb;GM=1;var e=oG(),t=sG();function r(n,i){var a=t(n,i);return e(a)?a:void 0}return Lb=r,Lb}var Bb,qM;function $2(){if(qM)return Bb;qM=1;var e=qf(),t=ss(),r=e(t,"Map");return Bb=r,Bb}var Fb,WM;function cE(){if(WM)return Fb;WM=1;var e=qf(),t=e(Object,"create");return Fb=t,Fb}var Ub,$M;function uG(){if($M)return Ub;$M=1;var e=cE();function t(){this.__data__=e?e(null):{},this.size=0}return Ub=t,Ub}var kb,YM;function lG(){if(YM)return kb;YM=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return kb=e,kb}var zb,ZM;function cG(){if(ZM)return zb;ZM=1;var e=cE(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(a){var o=this.__data__;if(e){var u=o[a];return u===t?void 0:u}return n.call(o,a)?o[a]:void 0}return zb=i,zb}var jb,KM;function fG(){if(KM)return jb;KM=1;var e=cE(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var a=this.__data__;return e?a[i]!==void 0:r.call(a,i)}return jb=n,jb}var Vb,QM;function dG(){if(QM)return Vb;QM=1;var e=cE(),t="__lodash_hash_undefined__";function r(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=e&&i===void 0?t:i,this}return Vb=r,Vb}var Hb,JM;function hG(){if(JM)return Hb;JM=1;var e=uG(),t=lG(),r=cG(),n=fG(),i=dG();function a(o){var u=-1,c=o==null?0:o.length;for(this.clear();++u<c;){var f=o[u];this.set(f[0],f[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,Hb=a,Hb}var Xb,ew;function pG(){if(ew)return Xb;ew=1;var e=hG(),t=uE(),r=$2();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return Xb=n,Xb}var Gb,tw;function vG(){if(tw)return Gb;tw=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return Gb=e,Gb}var qb,rw;function fE(){if(rw)return qb;rw=1;var e=vG();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return qb=t,qb}var Wb,nw;function mG(){if(nw)return Wb;nw=1;var e=fE();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return Wb=t,Wb}var $b,iw;function _G(){if(iw)return $b;iw=1;var e=fE();function t(r){return e(this,r).get(r)}return $b=t,$b}var Yb,aw;function gG(){if(aw)return Yb;aw=1;var e=fE();function t(r){return e(this,r).has(r)}return Yb=t,Yb}var Zb,ow;function yG(){if(ow)return Zb;ow=1;var e=fE();function t(r,n){var i=e(this,r),a=i.size;return i.set(r,n),this.size+=i.size==a?0:1,this}return Zb=t,Zb}var Kb,sw;function Y2(){if(sw)return Kb;sw=1;var e=pG(),t=mG(),r=_G(),n=gG(),i=yG();function a(o){var u=-1,c=o==null?0:o.length;for(this.clear();++u<c;){var f=o[u];this.set(f[0],f[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,Kb=a,Kb}var Qb,uw;function EG(){if(uw)return Qb;uw=1;var e=uE(),t=$2(),r=Y2(),n=200;function i(a,o){var u=this.__data__;if(u instanceof e){var c=u.__data__;if(!t||c.length<n-1)return c.push([a,o]),this.size=++u.size,this;u=this.__data__=new r(c)}return u.set(a,o),this.size=u.size,this}return Qb=i,Qb}var Jb,lw;function Z2(){if(lw)return Jb;lw=1;var e=uE(),t=eG(),r=tG(),n=rG(),i=nG(),a=EG();function o(u){var c=this.__data__=new e(u);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=i,o.prototype.set=a,Jb=o,Jb}var eT,cw;function bG(){if(cw)return eT;cw=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return eT=e,eT}var tT,fw;function DF(){if(fw)return tT;fw=1;var e=qf(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return tT=t,tT}var rT,dw;function K2(){if(dw)return rT;dw=1;var e=DF();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return rT=t,rT}var nT,hw;function LF(){if(hw)return nT;hw=1;var e=K2(),t=u_(),r=Object.prototype,n=r.hasOwnProperty;function i(a,o,u){var c=a[o];(!(n.call(a,o)&&t(c,u))||u===void 0&&!(o in a))&&e(a,o,u)}return nT=i,nT}var iT,pw;function l_(){if(pw)return iT;pw=1;var e=LF(),t=K2();function r(n,i,a,o){var u=!a;a||(a={});for(var c=-1,f=i.length;++c<f;){var h=i[c],p=o?o(a[h],n[h],h,a,n):void 0;p===void 0&&(p=n[h]),u?t(a,h,p):e(a,h,p)}return a}return iT=r,iT}var aT,vw;function TG(){if(vw)return aT;vw=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return aT=e,aT}var oT,mw;function SG(){if(mw)return oT;mw=1;var e=Hu(),t=xo(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return oT=n,oT}var sT,_w;function BF(){if(_w)return sT;_w=1;var e=SG(),t=xo(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,a=e((function(){return arguments})())?e:function(o){return t(o)&&n.call(o,"callee")&&!i.call(o,"callee")};return sT=a,sT}var uT,gw;function Xu(){if(gw)return uT;gw=1;var e=Array.isArray;return uT=e,uT}var lm={exports:{}},lT,yw;function AG(){if(yw)return lT;yw=1;function e(){return!1}return lT=e,lT}lm.exports;var Ew;function dE(){return Ew||(Ew=1,(function(e,t){var r=ss(),n=AG(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,u=o?r.Buffer:void 0,c=u?u.isBuffer:void 0,f=c||n;e.exports=f})(lm,lm.exports)),lm.exports}var cT,bw;function FF(){if(bw)return cT;bw=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var a=typeof n;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return cT=r,cT}var fT,Tw;function UF(){if(Tw)return fT;Tw=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return fT=t,fT}var dT,Sw;function xG(){if(Sw)return dT;Sw=1;var e=Hu(),t=UF(),r=xo(),n="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",u="[object Error]",c="[object Function]",f="[object Map]",h="[object Number]",p="[object Object]",m="[object RegExp]",_="[object Set]",y="[object String]",E="[object WeakMap]",b="[object ArrayBuffer]",S="[object DataView]",A="[object Float32Array]",R="[object Float64Array]",M="[object Int8Array]",P="[object Int16Array]",I="[object Int32Array]",w="[object Uint8Array]",U="[object Uint8ClampedArray]",re="[object Uint16Array]",K="[object Uint32Array]",H={};H[A]=H[R]=H[M]=H[P]=H[I]=H[w]=H[U]=H[re]=H[K]=!0,H[n]=H[i]=H[b]=H[a]=H[S]=H[o]=H[u]=H[c]=H[f]=H[h]=H[p]=H[m]=H[_]=H[y]=H[E]=!1;function x(N){return r(N)&&t(N.length)&&!!H[e(N)]}return dT=x,dT}var hT,Aw;function hE(){if(Aw)return hT;Aw=1;function e(t){return function(r){return t(r)}}return hT=e,hT}var cm={exports:{}};cm.exports;var xw;function Q2(){return xw||(xw=1,(function(e,t){var r=NF(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,o=a&&r.process,u=(function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();e.exports=u})(cm,cm.exports)),cm.exports}var pT,Rw;function pE(){if(Rw)return pT;Rw=1;var e=xG(),t=hE(),r=Q2(),n=r&&r.isTypedArray,i=n?t(n):e;return pT=i,pT}var vT,Cw;function kF(){if(Cw)return vT;Cw=1;var e=TG(),t=BF(),r=Xu(),n=dE(),i=FF(),a=pE(),o=Object.prototype,u=o.hasOwnProperty;function c(f,h){var p=r(f),m=!p&&t(f),_=!p&&!m&&n(f),y=!p&&!m&&!_&&a(f),E=p||m||_||y,b=E?e(f.length,String):[],S=b.length;for(var A in f)(h||u.call(f,A))&&!(E&&(A=="length"||_&&(A=="offset"||A=="parent")||y&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||i(A,S)))&&b.push(A);return b}return vT=c,vT}var mT,Ow;function J2(){if(Ow)return mT;Ow=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return mT=t,mT}var _T,Mw;function zF(){if(Mw)return _T;Mw=1;function e(t,r){return function(n){return t(r(n))}}return _T=e,_T}var gT,ww;function RG(){if(ww)return gT;ww=1;var e=zF(),t=e(Object.keys,Object);return gT=t,gT}var yT,Nw;function CG(){if(Nw)return yT;Nw=1;var e=J2(),t=RG(),r=Object.prototype,n=r.hasOwnProperty;function i(a){if(!e(a))return t(a);var o=[];for(var u in Object(a))n.call(a,u)&&u!="constructor"&&o.push(u);return o}return yT=i,yT}var ET,Iw;function vE(){if(Iw)return ET;Iw=1;var e=lE(),t=UF();function r(n){return n!=null&&t(n.length)&&!e(n)}return ET=r,ET}var bT,Pw;function eC(){if(Pw)return bT;Pw=1;var e=kF(),t=CG(),r=vE();function n(i){return r(i)?e(i):t(i)}return bT=n,bT}var TT,Dw;function OG(){if(Dw)return TT;Dw=1;var e=l_(),t=eC();function r(n,i){return n&&e(i,t(i),n)}return TT=r,TT}var ST,Lw;function MG(){if(Lw)return ST;Lw=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return ST=e,ST}var AT,Bw;function wG(){if(Bw)return AT;Bw=1;var e=Ao(),t=J2(),r=MG(),n=Object.prototype,i=n.hasOwnProperty;function a(o){if(!e(o))return r(o);var u=t(o),c=[];for(var f in o)f=="constructor"&&(u||!i.call(o,f))||c.push(f);return c}return AT=a,AT}var xT,Fw;function c_(){if(Fw)return xT;Fw=1;var e=kF(),t=wG(),r=vE();function n(i){return r(i)?e(i,!0):t(i)}return xT=n,xT}var RT,Uw;function NG(){if(Uw)return RT;Uw=1;var e=l_(),t=c_();function r(n,i){return n&&e(i,t(i),n)}return RT=r,RT}var fm={exports:{}};fm.exports;var kw;function jF(){return kw||(kw=1,(function(e,t){var r=ss(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,o=a?r.Buffer:void 0,u=o?o.allocUnsafe:void 0;function c(f,h){if(h)return f.slice();var p=f.length,m=u?u(p):new f.constructor(p);return f.copy(m),m}e.exports=c})(fm,fm.exports)),fm.exports}var CT,zw;function tC(){if(zw)return CT;zw=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return CT=e,CT}var OT,jw;function IG(){if(jw)return OT;jw=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,a=0,o=[];++n<i;){var u=t[n];r(u,n,t)&&(o[a++]=u)}return o}return OT=e,OT}var MT,Vw;function VF(){if(Vw)return MT;Vw=1;function e(){return[]}return MT=e,MT}var wT,Hw;function rC(){if(Hw)return wT;Hw=1;var e=IG(),t=VF(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(u){return n.call(o,u)}))}:t;return wT=a,wT}var NT,Xw;function PG(){if(Xw)return NT;Xw=1;var e=l_(),t=rC();function r(n,i){return e(n,t(n),i)}return NT=r,NT}var IT,Gw;function HF(){if(Gw)return IT;Gw=1;function e(t,r){for(var n=-1,i=r.length,a=t.length;++n<i;)t[a+n]=r[n];return t}return IT=e,IT}var PT,qw;function nC(){if(qw)return PT;qw=1;var e=zF(),t=e(Object.getPrototypeOf,Object);return PT=t,PT}var DT,Ww;function XF(){if(Ww)return DT;Ww=1;var e=HF(),t=nC(),r=rC(),n=VF(),i=Object.getOwnPropertySymbols,a=i?function(o){for(var u=[];o;)e(u,r(o)),o=t(o);return u}:n;return DT=a,DT}var LT,$w;function DG(){if($w)return LT;$w=1;var e=l_(),t=XF();function r(n,i){return e(n,t(n),i)}return LT=r,LT}var BT,Yw;function GF(){if(Yw)return BT;Yw=1;var e=HF(),t=Xu();function r(n,i,a){var o=i(n);return t(n)?o:e(o,a(n))}return BT=r,BT}var FT,Zw;function qF(){if(Zw)return FT;Zw=1;var e=GF(),t=rC(),r=eC();function n(i){return e(i,r,t)}return FT=n,FT}var UT,Kw;function LG(){if(Kw)return UT;Kw=1;var e=GF(),t=XF(),r=c_();function n(i){return e(i,r,t)}return UT=n,UT}var kT,Qw;function BG(){if(Qw)return kT;Qw=1;var e=qf(),t=ss(),r=e(t,"DataView");return kT=r,kT}var zT,Jw;function FG(){if(Jw)return zT;Jw=1;var e=qf(),t=ss(),r=e(t,"Promise");return zT=r,zT}var jT,eN;function WF(){if(eN)return jT;eN=1;var e=qf(),t=ss(),r=e(t,"Set");return jT=r,jT}var VT,tN;function UG(){if(tN)return VT;tN=1;var e=qf(),t=ss(),r=e(t,"WeakMap");return VT=r,VT}var HT,rN;function mE(){if(rN)return HT;rN=1;var e=BG(),t=$2(),r=FG(),n=WF(),i=UG(),a=Hu(),o=PF(),u="[object Map]",c="[object Object]",f="[object Promise]",h="[object Set]",p="[object WeakMap]",m="[object DataView]",_=o(e),y=o(t),E=o(r),b=o(n),S=o(i),A=a;return(e&&A(new e(new ArrayBuffer(1)))!=m||t&&A(new t)!=u||r&&A(r.resolve())!=f||n&&A(new n)!=h||i&&A(new i)!=p)&&(A=function(R){var M=a(R),P=M==c?R.constructor:void 0,I=P?o(P):"";if(I)switch(I){case _:return m;case y:return u;case E:return f;case b:return h;case S:return p}return M}),HT=A,HT}var XT,nN;function kG(){if(nN)return XT;nN=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,a=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(a.index=n.index,a.input=n.input),a}return XT=r,XT}var GT,iN;function $F(){if(iN)return GT;iN=1;var e=ss(),t=e.Uint8Array;return GT=t,GT}var qT,aN;function iC(){if(aN)return qT;aN=1;var e=$F();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return qT=t,qT}var WT,oN;function zG(){if(oN)return WT;oN=1;var e=iC();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return WT=t,WT}var $T,sN;function jG(){if(sN)return $T;sN=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return $T=t,$T}var YT,uN;function VG(){if(uN)return YT;uN=1;var e=s_(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return YT=n,YT}var ZT,lN;function YF(){if(lN)return ZT;lN=1;var e=iC();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return ZT=t,ZT}var KT,cN;function HG(){if(cN)return KT;cN=1;var e=iC(),t=zG(),r=jG(),n=VG(),i=YF(),a="[object Boolean]",o="[object Date]",u="[object Map]",c="[object Number]",f="[object RegExp]",h="[object Set]",p="[object String]",m="[object Symbol]",_="[object ArrayBuffer]",y="[object DataView]",E="[object Float32Array]",b="[object Float64Array]",S="[object Int8Array]",A="[object Int16Array]",R="[object Int32Array]",M="[object Uint8Array]",P="[object Uint8ClampedArray]",I="[object Uint16Array]",w="[object Uint32Array]";function U(re,K,H){var x=re.constructor;switch(K){case _:return e(re);case a:case o:return new x(+re);case y:return t(re,H);case E:case b:case S:case A:case R:case M:case P:case I:case w:return i(re,H);case u:return new x;case c:case p:return new x(re);case f:return r(re);case h:return new x;case m:return n(re)}}return KT=U,KT}var QT,fN;function XG(){if(fN)return QT;fN=1;var e=Ao(),t=Object.create,r=(function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var a=new n;return n.prototype=void 0,a}})();return QT=r,QT}var JT,dN;function ZF(){if(dN)return JT;dN=1;var e=XG(),t=nC(),r=J2();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return JT=n,JT}var eS,hN;function GG(){if(hN)return eS;hN=1;var e=mE(),t=xo(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return eS=n,eS}var tS,pN;function qG(){if(pN)return tS;pN=1;var e=GG(),t=hE(),r=Q2(),n=r&&r.isMap,i=n?t(n):e;return tS=i,tS}var rS,vN;function WG(){if(vN)return rS;vN=1;var e=mE(),t=xo(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return rS=n,rS}var nS,mN;function $G(){if(mN)return nS;mN=1;var e=WG(),t=hE(),r=Q2(),n=r&&r.isSet,i=n?t(n):e;return nS=i,nS}var iS,_N;function YG(){if(_N)return iS;_N=1;var e=Z2(),t=bG(),r=LF(),n=OG(),i=NG(),a=jF(),o=tC(),u=PG(),c=DG(),f=qF(),h=LG(),p=mE(),m=kG(),_=HG(),y=ZF(),E=Xu(),b=dE(),S=qG(),A=Ao(),R=$G(),M=eC(),P=c_(),I=1,w=2,U=4,re="[object Arguments]",K="[object Array]",H="[object Boolean]",x="[object Date]",N="[object Error]",j="[object Function]",fe="[object GeneratorFunction]",O="[object Map]",k="[object Number]",V="[object Object]",ee="[object RegExp]",oe="[object Set]",ge="[object String]",Ee="[object Symbol]",De="[object WeakMap]",tt="[object ArrayBuffer]",$e="[object DataView]",It="[object Float32Array]",qe="[object Float64Array]",St="[object Int8Array]",ke="[object Int16Array]",_e="[object Int32Array]",ot="[object Uint8Array]",Ce="[object Uint8ClampedArray]",Wt="[object Uint16Array]",Xt="[object Uint32Array]",bt={};bt[re]=bt[K]=bt[tt]=bt[$e]=bt[H]=bt[x]=bt[It]=bt[qe]=bt[St]=bt[ke]=bt[_e]=bt[O]=bt[k]=bt[V]=bt[ee]=bt[oe]=bt[ge]=bt[Ee]=bt[ot]=bt[Ce]=bt[Wt]=bt[Xt]=!0,bt[N]=bt[j]=bt[De]=!1;function Pt(Nt,Jt,Br,se,be,Fe){var F,vt=Jt&I,ht=Jt&w,Ft=Jt&U;if(Br&&(F=be?Br(Nt,se,be,Fe):Br(Nt)),F!==void 0)return F;if(!A(Nt))return Nt;var sr=E(Nt);if(sr){if(F=m(Nt),!vt)return o(Nt,F)}else{var fr=p(Nt),dr=fr==j||fr==fe;if(b(Nt))return a(Nt,vt);if(fr==V||fr==re||dr&&!be){if(F=ht||dr?{}:y(Nt),!vt)return ht?c(Nt,i(F,Nt)):u(Nt,n(F,Nt))}else{if(!bt[fr])return be?Nt:{};F=_(Nt,fr,vt)}}Fe||(Fe=new e);var Fn=Fe.get(Nt);if(Fn)return Fn;Fe.set(Nt,F),R(Nt)?Nt.forEach(function(Kr){F.add(Pt(Kr,Jt,Br,Kr,Nt,Fe))}):S(Nt)&&Nt.forEach(function(Kr,mn){F.set(mn,Pt(Kr,Jt,Br,mn,Nt,Fe))});var En=Ft?ht?h:f:ht?P:M,oi=sr?void 0:En(Nt);return t(oi||Nt,function(Kr,mn){oi&&(mn=Kr,Kr=Nt[mn]),r(F,mn,Pt(Kr,Jt,Br,mn,Nt,Fe))}),F}return iS=Pt,iS}var aS,gN;function ZG(){if(gN)return aS;gN=1;var e=YG(),t=1,r=4;function n(i){return e(i,t|r)}return aS=n,aS}var KG=ZG();const QG=$r(KG);var oS,yN;function JG(){if(yN)return oS;yN=1;var e=ss(),t=function(){return e.Date.now()};return oS=t,oS}var sS,EN;function KF(){if(EN)return sS;EN=1;var e=Ao(),t=JG(),r=IF(),n="Expected a function",i=Math.max,a=Math.min;function o(u,c,f){var h,p,m,_,y,E,b=0,S=!1,A=!1,R=!0;if(typeof u!="function")throw new TypeError(n);c=r(c)||0,e(f)&&(S=!!f.leading,A="maxWait"in f,m=A?i(r(f.maxWait)||0,c):m,R="trailing"in f?!!f.trailing:R);function M(N){var j=h,fe=p;return h=p=void 0,b=N,_=u.apply(fe,j),_}function P(N){return b=N,y=setTimeout(U,c),S?M(N):_}function I(N){var j=N-E,fe=N-b,O=c-j;return A?a(O,m-fe):O}function w(N){var j=N-E,fe=N-b;return E===void 0||j>=c||j<0||A&&fe>=m}function U(){var N=t();if(w(N))return re(N);y=setTimeout(U,I(N))}function re(N){return y=void 0,R&&h?M(N):(h=p=void 0,_)}function K(){y!==void 0&&clearTimeout(y),b=0,h=E=p=y=void 0}function H(){return y===void 0?_:re(t())}function x(){var N=t(),j=w(N);if(h=arguments,p=this,E=N,j){if(y===void 0)return P(E);if(A)return clearTimeout(y),y=setTimeout(U,c),M(E)}return y===void 0&&(y=setTimeout(U,c)),_}return x.cancel=K,x.flush=H,x}return sS=o,sS}var eq=KF();const tq=$r(eq);var uS,bN;function rq(){if(bN)return uS;bN=1;var e=Xu(),t=oE(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,o){if(e(a))return!1;var u=typeof a;return u=="number"||u=="symbol"||u=="boolean"||a==null||t(a)?!0:n.test(a)||!r.test(a)||o!=null&&a in Object(o)}return uS=i,uS}var lS,TN;function nq(){if(TN)return lS;TN=1;var e=Y2(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var o=arguments,u=i?i.apply(this,o):o[0],c=a.cache;if(c.has(u))return c.get(u);var f=n.apply(this,o);return a.cache=c.set(u,f)||c,f};return a.cache=new(r.Cache||e),a}return r.Cache=e,lS=r,lS}var cS,SN;function iq(){if(SN)return cS;SN=1;var e=nq(),t=500;function r(n){var i=e(n,function(o){return a.size===t&&a.clear(),o}),a=i.cache;return i}return cS=r,cS}var fS,AN;function aq(){if(AN)return fS;AN=1;var e=iq(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(o,u,c,f){a.push(c?f.replace(r,"$1"):u||o)}),a});return fS=n,fS}var dS,xN;function QF(){if(xN)return dS;xN=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,a=Array(i);++n<i;)a[n]=r(t[n],n,t);return a}return dS=e,dS}var hS,RN;function oq(){if(RN)return hS;RN=1;var e=s_(),t=QF(),r=Xu(),n=oE(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function o(u){if(typeof u=="string")return u;if(r(u))return t(u,o)+"";if(n(u))return a?a.call(u):"";var c=u+"";return c=="0"&&1/u==-1/0?"-0":c}return hS=o,hS}var pS,CN;function cp(){if(CN)return pS;CN=1;var e=oq();function t(r){return r==null?"":e(r)}return pS=t,pS}var vS,ON;function sq(){if(ON)return vS;ON=1;var e=Xu(),t=rq(),r=aq(),n=cp();function i(a,o){return e(a)?a:t(a,o)?[a]:r(n(a))}return vS=i,vS}var mS,MN;function uq(){if(MN)return mS;MN=1;var e=oE();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return mS=t,mS}var _S,wN;function lq(){if(wN)return _S;wN=1;var e=sq(),t=uq();function r(n,i){i=e(i,n);for(var a=0,o=i.length;n!=null&&a<o;)n=n[t(i[a++])];return a&&a==o?n:void 0}return _S=r,_S}var gS,NN;function cq(){if(NN)return gS;NN=1;var e=lq();function t(r,n,i){var a=r==null?void 0:e(r,n);return a===void 0?i:a}return gS=t,gS}var fq=cq();const dq=$r(fq);var yS,IN;function hq(){if(IN)return yS;IN=1;var e=Hu(),t=xo(),r="[object Boolean]";function n(i){return i===!0||i===!1||t(i)&&e(i)==r}return yS=n,yS}var pq=hq();const vq=$r(pq);var ES,PN;function mq(){if(PN)return ES;PN=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return ES=t,ES}var bS,DN;function _q(){if(DN)return bS;DN=1;function e(t){return this.__data__.has(t)}return bS=e,bS}var TS,LN;function JF(){if(LN)return TS;LN=1;var e=Y2(),t=mq(),r=_q();function n(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new e;++a<o;)this.add(i[a])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,TS=n,TS}var SS,BN;function gq(){if(BN)return SS;BN=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return SS=e,SS}var AS,FN;function e5(){if(FN)return AS;FN=1;function e(t,r){return t.has(r)}return AS=e,AS}var xS,UN;function t5(){if(UN)return xS;UN=1;var e=JF(),t=gq(),r=e5(),n=1,i=2;function a(o,u,c,f,h,p){var m=c&n,_=o.length,y=u.length;if(_!=y&&!(m&&y>_))return!1;var E=p.get(o),b=p.get(u);if(E&&b)return E==u&&b==o;var S=-1,A=!0,R=c&i?new e:void 0;for(p.set(o,u),p.set(u,o);++S<_;){var M=o[S],P=u[S];if(f)var I=m?f(P,M,S,u,o,p):f(M,P,S,o,u,p);if(I!==void 0){if(I)continue;A=!1;break}if(R){if(!t(u,function(w,U){if(!r(R,U)&&(M===w||h(M,w,c,f,p)))return R.push(U)})){A=!1;break}}else if(!(M===P||h(M,P,c,f,p))){A=!1;break}}return p.delete(o),p.delete(u),A}return xS=a,xS}var RS,kN;function yq(){if(kN)return RS;kN=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,a){n[++r]=[a,i]}),n}return RS=e,RS}var CS,zN;function aC(){if(zN)return CS;zN=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return CS=e,CS}var OS,jN;function Eq(){if(jN)return OS;jN=1;var e=s_(),t=$F(),r=u_(),n=t5(),i=yq(),a=aC(),o=1,u=2,c="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Map]",m="[object Number]",_="[object RegExp]",y="[object Set]",E="[object String]",b="[object Symbol]",S="[object ArrayBuffer]",A="[object DataView]",R=e?e.prototype:void 0,M=R?R.valueOf:void 0;function P(I,w,U,re,K,H,x){switch(U){case A:if(I.byteLength!=w.byteLength||I.byteOffset!=w.byteOffset)return!1;I=I.buffer,w=w.buffer;case S:return!(I.byteLength!=w.byteLength||!H(new t(I),new t(w)));case c:case f:case m:return r(+I,+w);case h:return I.name==w.name&&I.message==w.message;case _:case E:return I==w+"";case p:var N=i;case y:var j=re&o;if(N||(N=a),I.size!=w.size&&!j)return!1;var fe=x.get(I);if(fe)return fe==w;re|=u,x.set(I,w);var O=n(N(I),N(w),re,K,H,x);return x.delete(I),O;case b:if(M)return M.call(I)==M.call(w)}return!1}return OS=P,OS}var MS,VN;function bq(){if(VN)return MS;VN=1;var e=qF(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(a,o,u,c,f,h){var p=u&t,m=e(a),_=m.length,y=e(o),E=y.length;if(_!=E&&!p)return!1;for(var b=_;b--;){var S=m[b];if(!(p?S in o:n.call(o,S)))return!1}var A=h.get(a),R=h.get(o);if(A&&R)return A==o&&R==a;var M=!0;h.set(a,o),h.set(o,a);for(var P=p;++b<_;){S=m[b];var I=a[S],w=o[S];if(c)var U=p?c(w,I,S,o,a,h):c(I,w,S,a,o,h);if(!(U===void 0?I===w||f(I,w,u,c,h):U)){M=!1;break}P||(P=S=="constructor")}if(M&&!P){var re=a.constructor,K=o.constructor;re!=K&&"constructor"in a&&"constructor"in o&&!(typeof re=="function"&&re instanceof re&&typeof K=="function"&&K instanceof K)&&(M=!1)}return h.delete(a),h.delete(o),M}return MS=i,MS}var wS,HN;function Tq(){if(HN)return wS;HN=1;var e=Z2(),t=t5(),r=Eq(),n=bq(),i=mE(),a=Xu(),o=dE(),u=pE(),c=1,f="[object Arguments]",h="[object Array]",p="[object Object]",m=Object.prototype,_=m.hasOwnProperty;function y(E,b,S,A,R,M){var P=a(E),I=a(b),w=P?h:i(E),U=I?h:i(b);w=w==f?p:w,U=U==f?p:U;var re=w==p,K=U==p,H=w==U;if(H&&o(E)){if(!o(b))return!1;P=!0,re=!1}if(H&&!re)return M||(M=new e),P||u(E)?t(E,b,S,A,R,M):r(E,b,w,S,A,R,M);if(!(S&c)){var x=re&&_.call(E,"__wrapped__"),N=K&&_.call(b,"__wrapped__");if(x||N){var j=x?E.value():E,fe=N?b.value():b;return M||(M=new e),R(j,fe,S,A,M)}}return H?(M||(M=new e),n(E,b,S,A,R,M)):!1}return wS=y,wS}var NS,XN;function Sq(){if(XN)return NS;XN=1;var e=Tq(),t=xo();function r(n,i,a,o,u){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,a,o,r,u)}return NS=r,NS}var IS,GN;function Aq(){if(GN)return IS;GN=1;var e=Sq();function t(r,n){return e(r,n)}return IS=t,IS}var xq=Aq();const Rq=$r(xq);var PS,qN;function Cq(){if(qN)return PS;qN=1;function e(t){return t==null}return PS=e,PS}var Oq=Cq();const Mq=$r(Oq);var DS,WN;function wq(){if(WN)return DS;WN=1;var e=Hu(),t=xo(),r="[object Number]";function n(i){return typeof i=="number"||t(i)&&e(i)==r}return DS=n,DS}var Nq=wq();const Iq=$r(Nq);var LS,$N;function r5(){if($N)return LS;$N=1;var e=Hu(),t=nC(),r=xo(),n="[object Object]",i=Function.prototype,a=Object.prototype,o=i.toString,u=a.hasOwnProperty,c=o.call(Object);function f(h){if(!r(h)||e(h)!=n)return!1;var p=t(h);if(p===null)return!0;var m=u.call(p,"constructor")&&p.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==c}return LS=f,LS}var Pq=r5();const Dq=$r(Pq);var BS,YN;function Lq(){if(YN)return BS;YN=1;var e=Hu(),t=Xu(),r=xo(),n="[object String]";function i(a){return typeof a=="string"||!t(a)&&r(a)&&e(a)==n}return BS=i,BS}var Bq=Lq();const Fq=$r(Bq);var Uq=pE();const kq=$r(Uq);var FS,ZN;function n5(){if(ZN)return FS;ZN=1;var e=K2(),t=u_();function r(n,i,a){(a!==void 0&&!t(n[i],a)||a===void 0&&!(i in n))&&e(n,i,a)}return FS=r,FS}var US,KN;function zq(){if(KN)return US;KN=1;function e(t){return function(r,n,i){for(var a=-1,o=Object(r),u=i(r),c=u.length;c--;){var f=u[t?c:++a];if(n(o[f],f,o)===!1)break}return r}}return US=e,US}var kS,QN;function jq(){if(QN)return kS;QN=1;var e=zq(),t=e();return kS=t,kS}var zS,JN;function Vq(){if(JN)return zS;JN=1;var e=vE(),t=xo();function r(n){return t(n)&&e(n)}return zS=r,zS}var jS,eI;function i5(){if(eI)return jS;eI=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return jS=e,jS}var VS,tI;function Hq(){if(tI)return VS;tI=1;var e=l_(),t=c_();function r(n){return e(n,t(n))}return VS=r,VS}var HS,rI;function Xq(){if(rI)return HS;rI=1;var e=n5(),t=jF(),r=YF(),n=tC(),i=ZF(),a=BF(),o=Xu(),u=Vq(),c=dE(),f=lE(),h=Ao(),p=r5(),m=pE(),_=i5(),y=Hq();function E(b,S,A,R,M,P,I){var w=_(b,A),U=_(S,A),re=I.get(U);if(re){e(b,A,re);return}var K=P?P(w,U,A+"",b,S,I):void 0,H=K===void 0;if(H){var x=o(U),N=!x&&c(U),j=!x&&!N&&m(U);K=U,x||N||j?o(w)?K=w:u(w)?K=n(w):N?(H=!1,K=t(U,!0)):j?(H=!1,K=r(U,!0)):K=[]:p(U)||a(U)?(K=w,a(w)?K=y(w):(!h(w)||f(w))&&(K=i(U))):H=!1}H&&(I.set(U,K),M(K,U,R,P,I),I.delete(U)),e(b,A,K)}return HS=E,HS}var XS,nI;function a5(){if(nI)return XS;nI=1;var e=Z2(),t=n5(),r=jq(),n=Xq(),i=Ao(),a=c_(),o=i5();function u(c,f,h,p,m){c!==f&&r(f,function(_,y){if(m||(m=new e),i(_))n(c,f,y,h,u,p,m);else{var E=p?p(o(c,y),_,y+"",c,f,m):void 0;E===void 0&&(E=_),t(c,y,E)}},a)}return XS=u,XS}var GS,iI;function o5(){if(iI)return GS;iI=1;function e(t){return t}return GS=e,GS}var qS,aI;function Gq(){if(aI)return qS;aI=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return qS=e,qS}var WS,oI;function qq(){if(oI)return WS;oI=1;var e=Gq(),t=Math.max;function r(n,i,a){return i=t(i===void 0?n.length-1:i,0),function(){for(var o=arguments,u=-1,c=t(o.length-i,0),f=Array(c);++u<c;)f[u]=o[i+u];u=-1;for(var h=Array(i+1);++u<i;)h[u]=o[u];return h[i]=a(f),e(n,this,h)}}return WS=r,WS}var $S,sI;function Wq(){if(sI)return $S;sI=1;function e(t){return function(){return t}}return $S=e,$S}var YS,uI;function $q(){if(uI)return YS;uI=1;var e=Wq(),t=DF(),r=o5(),n=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:r;return YS=n,YS}var ZS,lI;function Yq(){if(lI)return ZS;lI=1;var e=800,t=16,r=Date.now;function n(i){var a=0,o=0;return function(){var u=r(),c=t-(u-o);if(o=u,c>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return ZS=n,ZS}var KS,cI;function Zq(){if(cI)return KS;cI=1;var e=$q(),t=Yq(),r=t(e);return KS=r,KS}var QS,fI;function s5(){if(fI)return QS;fI=1;var e=o5(),t=qq(),r=Zq();function n(i,a){return r(t(i,a,e),i+"")}return QS=n,QS}var JS,dI;function Kq(){if(dI)return JS;dI=1;var e=u_(),t=vE(),r=FF(),n=Ao();function i(a,o,u){if(!n(u))return!1;var c=typeof o;return(c=="number"?t(u)&&r(o,u.length):c=="string"&&o in u)?e(u[o],a):!1}return JS=i,JS}var eA,hI;function u5(){if(hI)return eA;hI=1;var e=s5(),t=Kq();function r(n){return e(function(i,a){var o=-1,u=a.length,c=u>1?a[u-1]:void 0,f=u>2?a[2]:void 0;for(c=n.length>3&&typeof c=="function"?(u--,c):void 0,f&&t(a[0],a[1],f)&&(c=u<3?void 0:c,u=1),i=Object(i);++o<u;){var h=a[o];h&&n(i,h,o,c)}return i})}return eA=r,eA}var tA,pI;function Qq(){if(pI)return tA;pI=1;var e=a5(),t=u5(),r=t(function(n,i,a){e(n,i,a)});return tA=r,tA}var Jq=Qq();const eW=$r(Jq);var rA,vI;function tW(){if(vI)return rA;vI=1;var e=a5(),t=u5(),r=t(function(n,i,a,o){e(n,i,a,o)});return rA=r,rA}var rW=tW();const nW=$r(rW);var nA,mI;function iW(){if(mI)return nA;mI=1;function e(t,r,n,i){for(var a=t.length,o=n+(i?1:-1);i?o--:++o<a;)if(r(t[o],o,t))return o;return-1}return nA=e,nA}var iA,_I;function aW(){if(_I)return iA;_I=1;function e(t){return t!==t}return iA=e,iA}var aA,gI;function oW(){if(gI)return aA;gI=1;function e(t,r,n){for(var i=n-1,a=t.length;++i<a;)if(t[i]===r)return i;return-1}return aA=e,aA}var oA,yI;function l5(){if(yI)return oA;yI=1;var e=iW(),t=aW(),r=oW();function n(i,a,o){return a===a?r(i,a,o):e(i,t,o)}return oA=n,oA}var sA,EI;function sW(){if(EI)return sA;EI=1;function e(t,r,n,i){for(var a=n-1,o=t.length;++a<o;)if(i(t[a],r))return a;return-1}return sA=e,sA}var uA,bI;function uW(){if(bI)return uA;bI=1;var e=QF(),t=l5(),r=sW(),n=hE(),i=tC(),a=Array.prototype,o=a.splice;function u(c,f,h,p){var m=p?r:t,_=-1,y=f.length,E=c;for(c===f&&(f=i(f)),h&&(E=e(c,n(h)));++_<y;)for(var b=0,S=f[_],A=h?h(S):S;(b=m(E,A,b,p))>-1;)E!==c&&o.call(E,b,1),o.call(c,b,1);return c}return uA=u,uA}var lA,TI;function lW(){if(TI)return lA;TI=1;var e=uW();function t(r,n){return r&&r.length&&n&&n.length?e(r,n):r}return lA=t,lA}var cA,SI;function cW(){if(SI)return cA;SI=1;var e=s5(),t=lW(),r=e(t);return cA=r,cA}var fW=cW();const dW=$r(fW);var fA,AI;function hW(){if(AI)return fA;AI=1;var e=KF(),t=Ao(),r="Expected a function";function n(i,a,o){var u=!0,c=!0;if(typeof i!="function")throw new TypeError(r);return t(o)&&(u="leading"in o?!!o.leading:u,c="trailing"in o?!!o.trailing:c),e(i,a,{leading:u,maxWait:a,trailing:c})}return fA=n,fA}var pW=hW();const vW=$r(pW);var dA,xI;function mW(){if(xI)return dA;xI=1;var e=l5();function t(r,n){var i=r==null?0:r.length;return!!i&&e(r,n,0)>-1}return dA=t,dA}var hA,RI;function _W(){if(RI)return hA;RI=1;function e(t,r,n){for(var i=-1,a=t==null?0:t.length;++i<a;)if(n(r,t[i]))return!0;return!1}return hA=e,hA}var pA,CI;function gW(){if(CI)return pA;CI=1;function e(){}return pA=e,pA}var vA,OI;function yW(){if(OI)return vA;OI=1;var e=WF(),t=gW(),r=aC(),n=1/0,i=e&&1/r(new e([,-0]))[1]==n?function(a){return new e(a)}:t;return vA=i,vA}var mA,MI;function EW(){if(MI)return mA;MI=1;var e=JF(),t=mW(),r=_W(),n=e5(),i=yW(),a=aC(),o=200;function u(c,f,h){var p=-1,m=t,_=c.length,y=!0,E=[],b=E;if(h)y=!1,m=r;else if(_>=o){var S=f?null:i(c);if(S)return a(S);y=!1,m=n,b=new e}else b=f?[]:E;e:for(;++p<_;){var A=c[p],R=f?f(A):A;if(A=h||A!==0?A:0,y&&R===R){for(var M=b.length;M--;)if(b[M]===R)continue e;f&&b.push(R),E.push(A)}else m(b,R,h)||(b!==E&&b.push(R),E.push(A))}return E}return mA=u,mA}var _A,wI;function bW(){if(wI)return _A;wI=1;var e=EW();function t(r){return r&&r.length?e(r):[]}return _A=t,_A}var TW=bW();const SW=$r(TW);var gA,NI;function AW(){if(NI)return gA;NI=1;function e(t,r,n){var i=-1,a=t.length;r<0&&(r=-r>a?0:a+r),n=n>a?a:n,n<0&&(n+=a),a=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(a);++i<a;)o[i]=t[i+r];return o}return gA=e,gA}var yA,II;function xW(){if(II)return yA;II=1;var e=AW();function t(r,n,i){var a=r.length;return i=i===void 0?a:i,!n&&i>=a?r:e(r,n,i)}return yA=t,yA}var EA,PI;function c5(){if(PI)return EA;PI=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,a="\\ufe0e\\ufe0f",o="\\u200d",u=RegExp("["+o+e+i+a+"]");function c(f){return u.test(f)}return EA=c,EA}var bA,DI;function RW(){if(DI)return bA;DI=1;function e(t){return t.split("")}return bA=e,bA}var TA,LI;function CW(){if(LI)return TA;LI=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,a="\\ufe0e\\ufe0f",o="["+e+"]",u="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",f="(?:"+u+"|"+c+")",h="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",_="\\u200d",y=f+"?",E="["+a+"]?",b="(?:"+_+"(?:"+[h,p,m].join("|")+")"+E+y+")*",S=E+y+b,A="(?:"+[h+u+"?",u,p,m,o].join("|")+")",R=RegExp(c+"(?="+c+")|"+A+S,"g");function M(P){return P.match(R)||[]}return TA=M,TA}var SA,BI;function OW(){if(BI)return SA;BI=1;var e=RW(),t=c5(),r=CW();function n(i){return t(i)?r(i):e(i)}return SA=n,SA}var AA,FI;function MW(){if(FI)return AA;FI=1;var e=xW(),t=c5(),r=OW(),n=cp();function i(a){return function(o){o=n(o);var u=t(o)?r(o):void 0,c=u?u[0]:o.charAt(0),f=u?e(u,1).join(""):o.slice(1);return c[a]()+f}}return AA=i,AA}var xA,UI;function f5(){if(UI)return xA;UI=1;var e=MW(),t=e("toUpperCase");return xA=t,xA}var wW=f5();const NW=$r(wW);var IW=lE();const PW=$r(IW);var DW=Ao();const LW=$r(DW);var RA,kI;function BW(){if(kI)return RA;kI=1;function e(t){return t===void 0}return RA=e,RA}var FW=BW();const UW=$r(FW);var CA,zI;function kW(){if(zI)return CA;zI=1;var e=cp(),t=f5();function r(n){return t(e(n).toLowerCase())}return CA=r,CA}var OA,jI;function zW(){if(jI)return OA;jI=1;function e(t,r,n,i){var a=-1,o=t==null?0:t.length;for(i&&o&&(n=t[++a]);++a<o;)n=r(n,t[a],a,t);return n}return OA=e,OA}var MA,VI;function jW(){if(VI)return MA;VI=1;function e(t){return function(r){return t?.[r]}}return MA=e,MA}var wA,HI;function VW(){if(HI)return wA;HI=1;var e=jW(),t={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},r=e(t);return wA=r,wA}var NA,XI;function HW(){if(XI)return NA;XI=1;var e=VW(),t=cp(),r=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,n="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",o=n+i+a,u="["+o+"]",c=RegExp(u,"g");function f(h){return h=t(h),h&&h.replace(r,e).replace(c,"")}return NA=f,NA}var IA,GI;function XW(){if(GI)return IA;GI=1;var e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function t(r){return r.match(e)||[]}return IA=t,IA}var PA,qI;function GW(){if(qI)return PA;qI=1;var e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function t(r){return e.test(r)}return PA=t,PA}var DA,WI;function qW(){if(WI)return DA;WI=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,a="\\u2700-\\u27bf",o="a-z\\xdf-\\xf6\\xf8-\\xff",u="\\xac\\xb1\\xd7\\xf7",c="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",f="\\u2000-\\u206f",h=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",p="A-Z\\xc0-\\xd6\\xd8-\\xde",m="\\ufe0e\\ufe0f",_=u+c+f+h,y="[']",E="["+_+"]",b="["+i+"]",S="\\d+",A="["+a+"]",R="["+o+"]",M="[^"+e+_+S+a+o+p+"]",P="\\ud83c[\\udffb-\\udfff]",I="(?:"+b+"|"+P+")",w="[^"+e+"]",U="(?:\\ud83c[\\udde6-\\uddff]){2}",re="[\\ud800-\\udbff][\\udc00-\\udfff]",K="["+p+"]",H="\\u200d",x="(?:"+R+"|"+M+")",N="(?:"+K+"|"+M+")",j="(?:"+y+"(?:d|ll|m|re|s|t|ve))?",fe="(?:"+y+"(?:D|LL|M|RE|S|T|VE))?",O=I+"?",k="["+m+"]?",V="(?:"+H+"(?:"+[w,U,re].join("|")+")"+k+O+")*",ee="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",oe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ge=k+O+V,Ee="(?:"+[A,U,re].join("|")+")"+ge,De=RegExp([K+"?"+R+"+"+j+"(?="+[E,K,"$"].join("|")+")",N+"+"+fe+"(?="+[E,K+x,"$"].join("|")+")",K+"?"+x+"+"+j,K+"+"+fe,oe,ee,S,Ee].join("|"),"g");function tt($e){return $e.match(De)||[]}return DA=tt,DA}var LA,$I;function WW(){if($I)return LA;$I=1;var e=XW(),t=GW(),r=cp(),n=qW();function i(a,o,u){return a=r(a),o=u?void 0:o,o===void 0?t(a)?n(a):e(a):a.match(o)||[]}return LA=i,LA}var BA,YI;function $W(){if(YI)return BA;YI=1;var e=zW(),t=HW(),r=WW(),n="[']",i=RegExp(n,"g");function a(o){return function(u){return e(r(t(u).replace(i,"")),o,"")}}return BA=a,BA}var FA,ZI;function YW(){if(ZI)return FA;ZI=1;var e=kW(),t=$W(),r=t(function(n,i,a){return i=i.toLowerCase(),n+(a?e(i):i)});return FA=r,FA}var ZW=YW();const KW=$r(ZW);var UA,KI;function QW(){if(KI)return UA;KI=1;var e=cp(),t=0;function r(n){var i=++t;return e(n)+i}return UA=r,UA}var JW=QW();const e$=$r(JW);var Ln={isNil:Mq,merge:eW,throttle:vW,isString:Fq,debounce:tq,pull:dW,isTypedArray:kq,isPlainObject:Dq,isNumber:Iq,isBoolean:vq,isEqual:Rq,cloneDeep:QG,uniq:SW,clamp:$X,upperFirst:NW,get:dq,mergeWith:nW,isFunction:PW,isObject:LW,isUndefined:UW,camelCase:KW,uniqueId:e$},{pull:bge}=Ln;function t$(e){let t=e;return typeof e=="string"&&(t=window.document.getElementById(e)),t}function d5(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function h5(e){return d5(e).split(/\s+/)}function r$(e){var t;const r=(t=document?.documentElement)==null?void 0:t.style;if(!r)return e[0];for(const n in e)if(e[n]&&e[n]in r)return e[n];return e[0]}function ai(e,t,r){const n=window.document.createElement(e);return t&&(n.className=t||""),r&&r.appendChild(n),n}function Pu(e){const t=e.parentNode;t&&t.removeChild(e)}function Of(e,t){if(e.classList!==void 0){const r=h5(t);for(let n=0,i=r.length;n<i;n++)e.classList.add(r[n])}else if(!n$(e,t)){const r=oC(e);p5(e,(r?r+" ":"")+t)}}function ry(e,t){e.classList!==void 0?h5(t).forEach(n=>{e.classList.remove(n)}):p5(e,d5((" "+oC(e)+" ").replace(" "+t+" "," ")))}function n$(e,t){if(e.classList!==void 0)return e.classList.contains(t);const r=oC(e);return r.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(r)}function p5(e,t){e instanceof HTMLElement?e.className=t:e.className.baseVal=t}function oC(e){return e instanceof SVGElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}var i$=r$(["transform","WebkitTransform"]);function a$(e,t){e.style[i$]=t}function o$(){var e;const t=window.document.querySelector('meta[name="viewport"]');if(!t)return 1;const n=((e=t.content)==null?void 0:e.split(",")).find(i=>{const[a]=i.split("=");return a==="initial-scale"});return n?n.split("=")[1]*1:1}var Ca=o$()<1?1:window.devicePixelRatio;function v5(e,t){e.setAttribute("style",`${e.style.cssText}${t}`)}function s$(e){return Object.entries(e).map(([t,r])=>`${t}: ${r}`).join(";")}function u$(e,t){return{left:e.left-t.left,top:e.top-t.top,right:t.left+t.width-e.left-e.width,bottom:t.top+t.height-e.top-e.height}}function sC(e){e.innerHTML=""}function l$(e){e.setAttribute("draggable","false")}function yf(e,t){if(typeof t=="string"){const r=document.createElement("div");for(r.innerHTML=t;r.firstChild;)e.append(r.firstChild)}else Array.isArray(t)?e.append(...t):e.append(t)}function c$(e,t){var r;const n=Array.isArray(t)?t:[t];let i=e;for(;i instanceof Element&&i!==window.document.body;){if(n.find(a=>i?.matches(a)))return i;i=(r=i?.parentElement)!=null?r:null}}function f$(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap}var pR=navigator?.userAgent;pR.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);pR.indexOf("Android")>-1||pR.indexOf("Adr")>-1;function vR(e){var t=[1/0,1/0,-1/0,-1/0];return SF(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}vR.default=vR;function kA(e){return typeof e=="number"}function pi(e){return e-Math.fround(e)}var QI=2*Math.PI*6378137/2;function d$(e,t){const[r,n,i,a]=t;return e.lng>r&&e.lng<=i&&e.lat>n&&e.lat<=a}function h$(e){const t=[1/0,1/0,-1/0,-1/0];return e.forEach(r=>{const{coordinates:n}=r;m5(t,n)}),t}function m5(e,t){return Array.isArray(t[0])?t.forEach(r=>{m5(e,r)}):(e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])),e}function C0(e,t=!0,r={enable:!0,decimal:1}){e=m$(e,t);const n=e[0],i=e[1];let a=n*QI/180,o=Math.log(Math.tan((90+i)*Math.PI/360))/(Math.PI/180);return o=o*QI/180,r.enable&&(a=Number(a.toFixed(r.decimal)),o=Number(o.toFixed(r.decimal))),e.length===3?[a,o,e[2]]:[a,o]}function p$(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function v$(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function m$(e,t){if(t===!1)return e;const r=p$(e[0]);let n=v$(e[1]);return n>85&&(n=85),n<-85&&(n=-85),e.length===3?[r,n,e[2]]:[r,n]}function Eo(e){const t=85.0511287798,r=Math.max(Math.min(t,e[1]),-t),n=256<<20;let i=Math.PI/180,a=e[0]*i,o=r*i;o=Math.log(Math.tan(Math.PI/4+o/2));const u=.5/Math.PI,c=.5,f=-.5/Math.PI;return i=.5,a=n*(u*a+c),o=n*(f*o+i),[Math.floor(a),Math.floor(o)]}function zA(e,t){const r=85.0511287798,n=Math.PI/180,i=6378137;return t=Math.max(Math.min(r,t),-r),e*=n,t*=n,t=Math.log(Math.tan(Math.PI/4+t/2)),[e*i,t*i]}function uC(e,t){const r=Math.abs(e[1][1]-e[0][1])*t,n=Math.abs(e[1][0]-e[0][0])*t;return[[e[0][0]-n,e[0][1]-r],[e[1][0]+n,e[1][1]+r]]}function _5(e,t){return e[0][0]<=t[0][0]&&e[0][1]<=t[0][1]&&e[1][0]>=t[1][0]&&e[1][1]>=t[1][1]}function ny(e){return[[e[0],e[1]],[e[2],e[3]]]}function _$(e){const t=g$(e,[0,0]);return[e[0]/t,e[1]/t]}function g$(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function Df(e){if(kA(e[0]))return e;if(kA(e[0][0]))throw new Error("");if(kA(e[0][0][0])){const t=e;let r=0,n=0,i=0;return t.forEach(a=>{a.forEach(o=>{r+=o[0],n+=o[1],i++})}),[r/i,n/i,0]}else throw new Error("")}function y$(e){let t=e[0],r=e[1],n=e[0],i=e[1],a=0,o=0,u=0;for(let c=0;c<e.length;c+=2){const f=e[c],h=e[c+1];f&&h&&(t=Math.max(f,t),r=Math.max(h,r),n=Math.min(f,n),i=Math.min(h,i),a+=f,o+=h,u++)}return{center:[a/u,o/u],radius:Math.sqrt(Math.pow(t-n,2)+Math.pow(r-i,2))/2}}function E$(e){return vR(dX([fX(e)]))}function b$(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}var T$=class{constructor(e=50,t){this.limit=e,this.destroy=t||this.defaultDestroy,this.order=[],this.clear()}clear(){this.order.forEach(e=>{this.delete(e)}),this.cache={},this.order=[]}get(e){const t=this.cache[e];return t&&(this.deleteOrder(e),this.appendOrder(e)),t}set(e,t){this.cache[e]?(this.delete(e),this.cache[e]=t,this.appendOrder(e)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[e]=t,this.appendOrder(e))}delete(e){const t=this.cache[e];t&&(this.deleteCache(e),this.deleteOrder(e),this.destroy(t,e))}deleteCache(e){delete this.cache[e]}deleteOrder(e){const t=this.order.findIndex(r=>r===e);t>=0&&this.order.splice(t,1)}appendOrder(e){this.order.push(e)}defaultDestroy(e,t){return null}};function S$(e){if(e.length===0)throw new Error("max requires at least one data point");let t=e[0];for(let r=1;r<e.length;r++)e[r]>t&&(t=e[r]);return t*1}function A$(e){if(e.length===0)throw new Error("min requires at least one data point");let t=e[0];for(let r=1;r<e.length;r++)e[r]<t&&(t=e[r]);return t*1}function g5(e){if(e.length===0)return 0;let t=e[0]*1;for(let r=1;r<e.length;r++)t+=e[r]*1;return t}function x$(e){if(e.length===0)throw new Error("mean requires at least one data point");return g5(e)/e.length}function R$(e){if(e.length===0)throw new Error("mean requires at least one data point");if(e.length<3)return e[0];e.sort();let t=e[0],r=NaN,n=0,i=1;for(let a=1;a<e.length+1;a++)e[a]!==t?(i>n&&(n=i,r=t),i=1,t=e[a]):i++;return r*1}var y5={min:A$,max:S$,mean:x$,sum:g5,mode:R$};function E5(e,t){return e.map(r=>r[t])}function C$(e,t){t===void 0&&(t={});var r=Number(e[0]),n=Number(e[1]),i=Number(e[2]),a=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var o=[r,n],u=[r,a],c=[i,a],f=[i,n];return k2([[o,f,c,u,o]],t.properties,{bbox:e,id:t.id})}var jA={exports:{}},JI;function O$(){return JI||(JI=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,f,h){this.fn=c,this.context=f,this.once=h||!1}function a(c,f,h,p,m){if(typeof h!="function")throw new TypeError("The listener must be a function");var _=new i(h,p||c,m),y=r?r+f:f;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],_]:c._events[y].push(_):(c._events[y]=_,c._eventsCount++),c}function o(c,f){--c._eventsCount===0?c._events=new n:delete c._events[f]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],h,p;if(this._eventsCount===0)return f;for(p in h=this._events)t.call(h,p)&&f.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},u.prototype.listeners=function(f){var h=r?r+f:f,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,_=p.length,y=new Array(_);m<_;m++)y[m]=p[m].fn;return y},u.prototype.listenerCount=function(f){var h=r?r+f:f,p=this._events[h];return p?p.fn?1:p.length:0},u.prototype.emit=function(f,h,p,m,_,y){var E=r?r+f:f;if(!this._events[E])return!1;var b=this._events[E],S=arguments.length,A,R;if(b.fn){switch(b.once&&this.removeListener(f,b.fn,void 0,!0),S){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,h),!0;case 3:return b.fn.call(b.context,h,p),!0;case 4:return b.fn.call(b.context,h,p,m),!0;case 5:return b.fn.call(b.context,h,p,m,_),!0;case 6:return b.fn.call(b.context,h,p,m,_,y),!0}for(R=1,A=new Array(S-1);R<S;R++)A[R-1]=arguments[R];b.fn.apply(b.context,A)}else{var M=b.length,P;for(R=0;R<M;R++)switch(b[R].once&&this.removeListener(f,b[R].fn,void 0,!0),S){case 1:b[R].fn.call(b[R].context);break;case 2:b[R].fn.call(b[R].context,h);break;case 3:b[R].fn.call(b[R].context,h,p);break;case 4:b[R].fn.call(b[R].context,h,p,m);break;default:if(!A)for(P=1,A=new Array(S-1);P<S;P++)A[P-1]=arguments[P];b[R].fn.apply(b[R].context,A)}}return!0},u.prototype.on=function(f,h,p){return a(this,f,h,p,!1)},u.prototype.once=function(f,h,p){return a(this,f,h,p,!0)},u.prototype.removeListener=function(f,h,p,m){var _=r?r+f:f;if(!this._events[_])return this;if(!h)return o(this,_),this;var y=this._events[_];if(y.fn)y.fn===h&&(!m||y.once)&&(!p||y.context===p)&&o(this,_);else{for(var E=0,b=[],S=y.length;E<S;E++)(y[E].fn!==h||m&&!y[E].once||p&&y[E].context!==p)&&b.push(y[E]);b.length?this._events[_]=b.length===1?b[0]:b:o(this,_)}return this},u.prototype.removeAllListeners=function(f){var h;return f?(h=r?r+f:f,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(jA)),jA.exports}var La=O$();const lC=$r(La);var Cm=(e=>(e.Realtime="realtime",e.Overlap="overlap",e.Replace="replace",e))(Cm||{}),ho=(e=>(e.Loading="Loading",e.Loaded="Loaded",e.Failure="Failure",e.Cancelled="Cancelled",e))(ho||{}),b5=0,e4=1,_E=2;function M$(e){e.forEach(t=>{t.isCurrent&&(t.isVisible=t.isLoaded)})}function w$(e){e.forEach(t=>{t.properties.state=b5}),e.forEach(t=>{t.isCurrent&&!T5(t)&&cC(t)}),e.forEach(t=>{t.isVisible=!!(t.properties.state&_E)})}function N$(e){e.forEach(r=>{r.properties.state=b5}),e.forEach(r=>{r.isCurrent&&T5(r)}),e.slice().sort((r,n)=>r.z-n.z).forEach(r=>{r.isVisible=!!(r.properties.state&_E),r.children.length&&(r.isVisible||r.properties.state&e4)?r.children.forEach(n=>{n.properties.state=e4}):r.isCurrent&&cC(r)})}function T5(e){for(;e;){if(e.isLoaded)return e.properties.state|=_E,!0;e=e.parent}return!1}function cC(e){e.children.forEach(t=>{t.isLoaded?t.properties.state|=_E:cC(t)})}var S5=[-1/0,-1/0,1/0,1/0],I$=.2,P$=5,D$={[Cm.Realtime]:M$,[Cm.Overlap]:w$,[Cm.Replace]:N$},L$=()=>{};function mR(e,t,r){const n=Math.floor((e+180)/360*Math.pow(2,r)),i=Math.floor((1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*Math.pow(2,r));return[n,i]}function t4(e,t,r){const n=e/Math.pow(2,r)*360-180,i=Math.PI-2*Math.PI*t/Math.pow(2,r),a=180/Math.PI*Math.atan(.5*(Math.exp(i)-Math.exp(-i)));return[n,a]}var A5=(e,t,r)=>{const[n,i]=t4(e,t,r),[a,o]=t4(e+1,t+1,r);return[n,o,a,i]};function B$({zoom:e,latLonBounds:t,maxZoom:r=1/0,minZoom:n=0,zoomOffset:i=0,extent:a=S5}){let o=Math.ceil(e)+i;if(Number.isFinite(n)&&o<n)return[];Number.isFinite(r)&&o>r&&(o=r);const[u,c,f,h]=t,p=[Math.max(u,a[0]),Math.max(c,a[1]),Math.min(f,a[2]),Math.min(h,a[3])],m=[],[_,y]=mR(p[0],p[1],o),[E,b]=mR(p[2],p[3],o);for(let M=_;M<=E;M++)for(let P=b;P<=y;P++)m.push({x:M,y:P,z:o});const S=(E+_)/2,A=(y+b)/2,R=(M,P)=>Math.abs(M-S)+Math.abs(P-A);return m.sort((M,P)=>R(M.x,M.y)-R(P.x,P.y)),m}var F$=(e,t,r,n=!0)=>{const i=Math.pow(2,r),a=i-1,o=i;let u=e;const c=t;return n&&(u<0?u=u+o:u>a&&(u=u%o)),{warpX:u,warpY:c}},U$=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{u(r.next(c))}catch(f){i(f)}},o=c=>{try{u(r.throw(c))}catch(f){i(f)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);u((r=r.apply(e,t)).next())}),k$=class extends La.EventEmitter{constructor(e){super(),this.tileSize=256,this.isVisible=!1,this.isCurrent=!1,this.isVisibleChange=!1,this.loadedLayers=0,this.isLayerLoaded=!1,this.isLoad=!1,this.isChildLoad=!1,this.parent=null,this.children=[],this.data=null,this.properties={},this.loadDataId=0;const{x:t,y:r,z:n,tileSize:i,warp:a=!0}=e;this.x=t,this.y=r,this.z=n,this.warp=a||!0,this.tileSize=i}get isLoading(){return this.loadStatus===ho.Loading}get isLoaded(){return this.loadStatus===ho.Loaded}get isFailure(){return this.loadStatus===ho.Failure}setTileLayerLoaded(){this.isLayerLoaded=!0}get isCancelled(){return this.loadStatus===ho.Cancelled}get isDone(){return[ho.Loaded,ho.Cancelled,ho.Failure].includes(this.loadStatus)}get bounds(){return A5(this.x,this.y,this.z)}get bboxPolygon(){const[e,t,r,n]=this.bounds,i=[(r-e)/2,(n-t)/2];return C$(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:i,meta:`
      ${this.key}
      `}})}get key(){return`${this.x}_${this.y}_${this.z}`}layerLoad(){this.loadedLayers++,this.emit("layerLoaded")}loadData(e){return U$(this,arguments,function*({getData:t,onLoad:r,onError:n}){this.loadDataId++;const i=this.loadDataId;this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=ho.Loading;let a=null,o;try{const{x:u,y:c,z:f,bounds:h,tileSize:p,warp:m}=this,{warpX:_,warpY:y}=F$(u,c,f,m),{signal:E}=this.abortController;a=yield t({x:_,y,z:f,bounds:h,tileSize:p,signal:E,warp:m},this)}catch(u){o=u}if(i===this.loadDataId&&!(this.isCancelled&&!a)){if(o||!a){this.loadStatus=ho.Failure,n(o,this);return}this.loadStatus=ho.Loaded,this.data=a,r(this)}})}reloadData(e){this.isLoading&&this.abortLoad(),this.loadData(e)}abortLoad(){this.isLoaded||this.isCancelled||(this.loadStatus=ho.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}},z$=(e,t)=>{const r=ny(e),n=uC(r,t),i=360*3-180,a=85.0511287798065;return[Math.max(n[0][0],-i),Math.max(n[0][1],-a),Math.min(n[1][0],i),Math.min(n[1][1],a)]},j$=(e,t)=>{const r=ny(e),n=ny(t);return _5(r,n)},V$=Object.defineProperty,H$=Object.defineProperties,X$=Object.getOwnPropertyDescriptors,r4=Object.getOwnPropertySymbols,G$=Object.prototype.hasOwnProperty,q$=Object.prototype.propertyIsEnumerable,n4=(e,t,r)=>t in e?V$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,i4=(e,t)=>{for(var r in t||(t={}))G$.call(t,r)&&n4(e,r,t[r]);if(r4)for(var r of r4(t))q$.call(t,r)&&n4(e,r,t[r]);return e},W$=(e,t)=>H$(e,X$(t)),{throttle:$$}=Ln,Y$=class extends lC{constructor(e){super(),this.currentTiles=[],this.cacheTiles=new Map,this.throttleUpdate=$$((t,r)=>{this.update(t,r)},16),this.onTileLoad=t=>{this.emit("tile-loaded",t),this.updateTileVisible(),this.loadFinished()},this.onTileError=(t,r)=>{this.emit("tile-error",{error:t,tile:r}),this.updateTileVisible(),this.loadFinished()},this.onTileUnload=t=>{this.emit("tile-unload",t),this.loadFinished()},this.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:S5,getTileData:L$,warp:!0,updateStrategy:Cm.Replace},this.updateOptions(e)}get isLoaded(){return this.currentTiles.every(e=>e.isDone)}get tiles(){return Array.from(this.cacheTiles.values()).sort((t,r)=>t.z-r.z)}updateOptions(e){const t=e.minZoom===void 0?this.options.minZoom:Math.ceil(e.minZoom),r=e.maxZoom===void 0?this.options.maxZoom:Math.floor(e.maxZoom);this.options=W$(i4(i4({},this.options),e),{minZoom:t,maxZoom:r})}update(e,t){const r=Math.max(0,Math.ceil(e));if(this.lastViewStates&&this.lastViewStates.zoom===r&&j$(this.lastViewStates.latLonBoundsBuffer,t))return;const n=z$(t,I$);this.lastViewStates={zoom:r,latLonBounds:t,latLonBoundsBuffer:n},this.currentZoom=r;let i=!1;const a=this.getTileIndices(r,n).filter(o=>this.options.warp||o.x>=0&&o.x<Math.pow(2,r));this.emit("tiles-load-start"),this.currentTiles=a.map(({x:o,y:u,z:c})=>{let f=this.getTile(o,u,c);return f?((f?.isFailure||f?.isCancelled)&&f.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),f):(f=this.createTile(o,u,c),i=!0,f)}),i&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}reloadAll(){for(const[e,t]of this.cacheTiles){if(!this.currentTiles.includes(t)){this.cacheTiles.delete(e),this.onTileUnload(t);return}this.onTileUnload(t),t.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}reloadTileById(e,t,r){const n=this.cacheTiles.get(`${t},${r},${e}`);n&&(this.onTileUnload(n),n.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}reloadTileByLnglat(e,t,r){const n=this.getTileByLngLat(e,t,r);n&&this.reloadTileById(n.z,n.x,n.y)}reloadTileByExtent(e,t){this.getTileIndices(t,e).forEach(n=>{this.reloadTileById(n.z,n.x,n.y)})}pruneRequests(){const e=[];for(const t of this.cacheTiles.values())t.isLoading&&!t.isCurrent&&!t.isVisible&&e.push(t);for(;e.length>0;)e.shift().abortLoad()}getTileByLngLat(e,t,r){const{zoomOffset:n}=this.options,i=Math.ceil(r)+n,a=mR(e,t,i);return this.tiles.filter(u=>u.key===`${a[0]}_${a[1]}_${i}`)[0]}getTileExtent(e,t){return this.getTileIndices(t,e)}getTileByZXY(e,t,r){return this.tiles.filter(i=>i.key===`${t}_${r}_${e}`)[0]}clear(){for(const e of this.cacheTiles.values())e.isLoading?e.abortLoad():this.onTileUnload(e);this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}destroy(){this.clear(),this.removeAllListeners()}updateTileVisible(){const e=this.options.updateStrategy,t=new Map;for(const i of this.cacheTiles.values())t.set(i.key,i.isVisible),i.isCurrent=!1,i.isVisible=!1;for(const i of this.currentTiles)i.isCurrent=!0,i.isVisible=!0;const r=Array.from(this.cacheTiles.values());typeof e=="function"?e(r):D$[e](r);let n=!1;Array.from(this.cacheTiles.values()).forEach(i=>{i.isVisible!==t.get(i.key)?(i.isVisibleChange=!0,n=!0):i.isVisibleChange=!1}),n&&this.emit("tile-update")}getTileIndices(e,t){const{tileSize:r,extent:n,zoomOffset:i}=this.options,a=Math.floor(this.options.maxZoom),o=Math.ceil(this.options.minZoom);return B$({maxZoom:a,minZoom:o,zoomOffset:i,zoom:e,latLonBounds:t,extent:n})}getTileId(e,t,r){return`${e},${t},${r}`}loadFinished(){const e=!this.currentTiles.some(t=>!t.isDone);return e&&this.emit("tiles-load-finished"),e}getTile(e,t,r){const n=this.getTileId(e,t,r);return this.cacheTiles.get(n)}createTile(e,t,r){const n=this.getTileId(e,t,r),i=new k$({x:e,y:t,z:r,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(n,i),i.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),i}resizeCacheTiles(){const e=P$*this.currentTiles.length;if(this.cacheTiles.size>e){for(const[r,n]of this.cacheTiles)if(!n.isVisible&&!this.currentTiles.includes(n)&&(this.cacheTiles.delete(r),this.onTileUnload(n)),this.cacheTiles.size<=e)break}this.rebuildTileTree()}rebuildTileTree(){for(const e of this.cacheTiles.values())e.parent=null,e.children.length=0;for(const e of this.cacheTiles.values()){const t=this.getNearestAncestor(e.x,e.y,e.z);e.parent=t,t?.children&&t.children.push(e)}}getNearestAncestor(e,t,r){for(;r>this.options.minZoom;){e=Math.floor(e/2),t=Math.floor(t/2),r=r-1;const n=this.getTile(e,t,r);if(n)return n}return null}};function x5(e){const t=[];let r=/\{([a-z])-([a-z])\}/.exec(e);if(r){const n=r[1].charCodeAt(0),i=r[2].charCodeAt(0);let a;for(a=n;a<=i;++a)t.push(e.replace(r[0],String.fromCharCode(a)));return t}if(r=/\{(\d+)-(\d+)\}/.exec(e),r){const n=parseInt(r[2],10);for(let i=parseInt(r[1],10);i<=n;i++)t.push(e.replace(r[0],i.toString()));return t}return t.push(e),t}function wh(e,t){if(!e||!e.length)throw new Error("url is not allowed to be empty");const{x:r,y:n,z:i}=t,a=x5(e),o=Math.abs(r+n)%a.length;return(V2(a[o])?`${a[o]}/{z}/{x}/{y}`:a[o]).replace(/\{x\}/g,r.toString()).replace(/\{y\}/g,n.toString()).replace(/\{z\}/g,i.toString()).replace(/\{bbox\}/g,A5(r,n,i).join(",")).replace(/\{-y\}/g,(Math.pow(2,i)-n-1).toString())}function Z$(e,t){const{x:r,y:n,z:i,layer:a,version:o="1.0.0",style:u="default",format:c,service:f="WMTS",tileMatrixset:h}=t,p=x5(e),m=Math.abs(r+n)%p.length;return`${p[m]}&SERVICE=${f}&REQUEST=GetTile&VERSION=${o}&LAYER=${a}&STYLE=${u}&TILEMATRIXSET=${h}&FORMAT=${c}&TILECOL=${r}&TILEROW=${n}&TILEMATRIX=${i}`}function Pv(e,t){return e??t}var VA,a4;function K$(){if(a4)return VA;a4=1,VA=e;function e(n,i){var a=n&&n.type,o;if(a==="FeatureCollection")for(o=0;o<n.features.length;o++)e(n.features[o],i);else if(a==="GeometryCollection")for(o=0;o<n.geometries.length;o++)e(n.geometries[o],i);else if(a==="Feature")e(n.geometry,i);else if(a==="Polygon")t(n.coordinates,i);else if(a==="MultiPolygon")for(o=0;o<n.coordinates.length;o++)t(n.coordinates[o],i);return n}function t(n,i){if(n.length!==0){r(n[0],i);for(var a=1;a<n.length;a++)r(n[a],!i)}}function r(n,i){for(var a=0,o=0,u=0,c=n.length,f=c-1;u<c;f=u++){var h=(n[u][0]-n[f][0])*(n[f][1]+n[u][1]),p=a+h;o+=Math.abs(a)>=Math.abs(h)?a-p+h:h-p+a,a=p}a+o>=0!=!!i&&n.reverse()}return VA}var Q$=K$();const J$=$r(Q$);function eY(e,t){return e.map(r=>r[t]*1)}function R5(e){return Array.isArray(e)?e.length===0||typeof e[0]=="number":!1}function _R(e){const t=Object.isFrozen(e)?Ln.cloneDeep(e):e;return J$(t,!0),t}function fp(e,t){return e||[[t[0],t[3]],[t[2],t[3]],[t[2],t[1]],[t[0],t[1]]]}var tY=Object.defineProperty,rY=Object.defineProperties,nY=Object.getOwnPropertyDescriptors,o4=Object.getOwnPropertySymbols,iY=Object.prototype.hasOwnProperty,aY=Object.prototype.propertyIsEnumerable,s4=(e,t,r)=>t in e?tY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u4=(e,t)=>{for(var r in t||(t={}))iY.call(t,r)&&s4(e,r,t[r]);if(o4)for(var r of o4(t))aY.call(t,r)&&s4(e,r,t[r]);return e},l4=(e,t)=>rY(e,nY(t));function C5(e,t){const{x:r,y:n,x1:i,y1:a,coordinates:o,geometry:u}=t,c=[];if(!Array.isArray(e))return{dataArray:[]};if(u)return e.filter(f=>f[u]&&f[u].type&&f[u].coordinates&&f[u].coordinates.length>0).forEach((f,h)=>{const p=_R(f[u]);AF(p,m=>{const _=TF(m),y=l4(u4({},f),{_id:h,coordinates:_});c.push(y)})}),{dataArray:c};for(let f=0;f<e.length;f++){const h=e[f];let p=[];if(o){let _="Polygon";Array.isArray(o[0])||(_="Point"),Array.isArray(o[0])&&!Array.isArray(o[0][0])&&(_="LineString"),p=_R({type:_,coordinates:h[o]}).coordinates}else if(r&&n&&i&&a){const _=[parseFloat(h[r]),parseFloat(h[n])],y=[parseFloat(h[i]),parseFloat(h[a])];p=[_,y]}else r&&n&&(p=[parseFloat(h[r]),parseFloat(h[n])]);const m=l4(u4({},h),{_id:f,coordinates:p});c.push(m)}return{dataArray:c}}function oY(e,t){const r=cX(e);return C5(r,t)}var sY=Object.defineProperty,uY=Object.defineProperties,lY=Object.getOwnPropertyDescriptors,c4=Object.getOwnPropertySymbols,cY=Object.prototype.hasOwnProperty,fY=Object.prototype.propertyIsEnumerable,f4=(e,t,r)=>t in e?sY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dY=(e,t)=>{for(var r in t||(t={}))cY.call(t,r)&&f4(e,r,t[r]);if(c4)for(var r of c4(t))fY.call(t,r)&&f4(e,r,t[r]);return e},hY=(e,t)=>uY(e,lY(t));function pY(e){const t=e.toString();let r=5381,n=t.length;for(;n;)r=r*33^t.charCodeAt(--n);return r>>>0}function vY(e,t){return t===void 0?null:isNaN(e.properties[t]*1)?e.properties&&e.properties[t]?pY(e.properties[t]+"")%1000019:null:e.properties[t]*1}function mY(e,t){const r=[],n={};return e.features?(e.features=e.features.filter(i=>{const a=i.geometry;return i!=null&&a&&a.type&&a.coordinates&&a.coordinates.length>0}),e=_R(e),e.features.length===0?{dataArray:[],featureKeys:n}:(AF(e,(i,a)=>{let o=vY(i,t?.featureId);o===null&&(o=a);const u=o,c=TF(i),f=hY(dY({},i.properties),{coordinates:c,_id:u});r.push(f)}),{dataArray:r,featureKeys:n})):(e.features=[],{dataArray:[]})}function gR(e,t,r,n){for(var i=n,a=r-t>>1,o=r-t,u,c=e[t],f=e[t+1],h=e[r],p=e[r+1],m=t+3;m<r;m+=3){var _=_Y(e[m],e[m+1],c,f,h,p);if(_>i)u=m,i=_;else if(_===i){var y=Math.abs(m-a);y<o&&(u=m,o=y)}}i>n&&(u-t>3&&gR(e,t,u,n),e[u+2]=i,r-u>3&&gR(e,u,r,n))}function _Y(e,t,r,n,i,a){var o=i-r,u=a-n;if(o!==0||u!==0){var c=((e-r)*o+(t-n)*u)/(o*o+u*u);c>1?(r=i,n=a):c>0&&(r+=o*c,n+=u*c)}return o=e-r,u=t-n,o*o+u*u}function km(e,t,r,n){var i={id:typeof e>"u"?null:e,type:t,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return gY(i),i}function gY(e){var t=e.geometry,r=e.type;if(r==="Point"||r==="MultiPoint"||r==="LineString")HA(e,t);else if(r==="Polygon"||r==="MultiLineString")for(var n=0;n<t.length;n++)HA(e,t[n]);else if(r==="MultiPolygon")for(n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)HA(e,t[n][i])}function HA(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function yY(e,t){var r=[];if(e.type==="FeatureCollection")for(var n=0;n<e.features.length;n++)O0(r,e.features[n],t,n);else e.type==="Feature"?O0(r,e,t):O0(r,{geometry:e},t);return r}function O0(e,t,r,n){if(t.geometry){var i=t.geometry.coordinates,a=t.geometry.type,o=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),u=[],c=t.id;if(r.promoteId?c=t.properties[r.promoteId]:r.generateId&&(c=n||0),a==="Point")d4(i,u);else if(a==="MultiPoint")for(var f=0;f<i.length;f++)d4(i[f],u);else if(a==="LineString")yR(i,u,o,!1);else if(a==="MultiLineString")if(r.lineMetrics){for(f=0;f<i.length;f++)u=[],yR(i[f],u,o,!1),e.push(km(c,"LineString",u,t.properties));return}else XA(i,u,o,!1);else if(a==="Polygon")XA(i,u,o,!0);else if(a==="MultiPolygon")for(f=0;f<i.length;f++){var h=[];XA(i[f],h,o,!0),u.push(h)}else if(a==="GeometryCollection"){for(f=0;f<t.geometry.geometries.length;f++)O0(e,{id:c,geometry:t.geometry.geometries[f],properties:t.properties},r,n);return}else throw new Error("Input data is not a valid GeoJSON object.");e.push(km(c,a,u,t.properties))}}function d4(e,t){t.push(O5(e[0])),t.push(M5(e[1])),t.push(0)}function yR(e,t,r,n){for(var i,a,o=0,u=0;u<e.length;u++){var c=O5(e[u][0]),f=M5(e[u][1]);t.push(c),t.push(f),t.push(0),u>0&&(n?o+=(i*f-c*a)/2:o+=Math.sqrt(Math.pow(c-i,2)+Math.pow(f-a,2))),i=c,a=f}var h=t.length-3;t[2]=1,gR(t,0,h,r),t[h+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function XA(e,t,r,n){for(var i=0;i<e.length;i++){var a=[];yR(e[i],a,r,n),t.push(a)}}function O5(e){return e/360+.5}function M5(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function Iu(e,t,r,n,i,a,o,u){if(r/=t,n/=t,a>=r&&o<n)return e;if(o<r||a>=n)return null;for(var c=[],f=0;f<e.length;f++){var h=e[f],p=h.geometry,m=h.type,_=i===0?h.minX:h.minY,y=i===0?h.maxX:h.maxY;if(_>=r&&y<n){c.push(h);continue}else if(y<r||_>=n)continue;var E=[];if(m==="Point"||m==="MultiPoint")EY(p,E,r,n,i);else if(m==="LineString")w5(p,E,r,n,i,!1,u.lineMetrics);else if(m==="MultiLineString")GA(p,E,r,n,i,!1);else if(m==="Polygon")GA(p,E,r,n,i,!0);else if(m==="MultiPolygon")for(var b=0;b<p.length;b++){var S=[];GA(p[b],S,r,n,i,!0),S.length&&E.push(S)}if(E.length){if(u.lineMetrics&&m==="LineString"){for(b=0;b<E.length;b++)c.push(km(h.id,m,E[b],h.tags));continue}(m==="LineString"||m==="MultiLineString")&&(E.length===1?(m="LineString",E=E[0]):m="MultiLineString"),(m==="Point"||m==="MultiPoint")&&(m=E.length===3?"Point":"MultiPoint"),c.push(km(h.id,m,E,h.tags))}}return c.length?c:null}function EY(e,t,r,n,i){for(var a=0;a<e.length;a+=3){var o=e[a+i];o>=r&&o<=n&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function w5(e,t,r,n,i,a,o){for(var u=h4(e),c=i===0?bY:TY,f=e.start,h,p,m=0;m<e.length-3;m+=3){var _=e[m],y=e[m+1],E=e[m+2],b=e[m+3],S=e[m+4],A=i===0?_:y,R=i===0?b:S,M=!1;o&&(h=Math.sqrt(Math.pow(_-b,2)+Math.pow(y-S,2))),A<r?R>r&&(p=c(u,_,y,b,S,r),o&&(u.start=f+h*p)):A>n?R<n&&(p=c(u,_,y,b,S,n),o&&(u.start=f+h*p)):qA(u,_,y,E),R<r&&A>=r&&(p=c(u,_,y,b,S,r),M=!0),R>n&&A<=n&&(p=c(u,_,y,b,S,n),M=!0),!a&&M&&(o&&(u.end=f+h*p),t.push(u),u=h4(e)),o&&(f+=h)}var P=e.length-3;_=e[P],y=e[P+1],E=e[P+2],A=i===0?_:y,A>=r&&A<=n&&qA(u,_,y,E),P=u.length-3,a&&P>=3&&(u[P]!==u[0]||u[P+1]!==u[1])&&qA(u,u[0],u[1],u[2]),u.length&&t.push(u)}function h4(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function GA(e,t,r,n,i,a){for(var o=0;o<e.length;o++)w5(e[o],t,r,n,i,a,!1)}function qA(e,t,r,n){e.push(t),e.push(r),e.push(n)}function bY(e,t,r,n,i,a){var o=(a-t)/(n-t);return e.push(a),e.push(r+(i-r)*o),e.push(1),o}function TY(e,t,r,n,i,a){var o=(a-r)/(i-r);return e.push(t+(n-t)*o),e.push(a),e.push(1),o}function SY(e,t){var r=t.buffer/t.extent,n=e,i=Iu(e,1,-1-r,r,0,-1,2,t),a=Iu(e,1,1-r,2+r,0,-1,2,t);return(i||a)&&(n=Iu(e,1,-r,1+r,0,-1,2,t)||[],i&&(n=p4(i,1).concat(n)),a&&(n=n.concat(p4(a,-1)))),n}function p4(e,t){for(var r=[],n=0;n<e.length;n++){var i=e[n],a=i.type,o;if(a==="Point"||a==="MultiPoint"||a==="LineString")o=WA(i.geometry,t);else if(a==="MultiLineString"||a==="Polygon"){o=[];for(var u=0;u<i.geometry.length;u++)o.push(WA(i.geometry[u],t))}else if(a==="MultiPolygon")for(o=[],u=0;u<i.geometry.length;u++){for(var c=[],f=0;f<i.geometry[u].length;f++)c.push(WA(i.geometry[u][f],t));o.push(c)}r.push(km(i.id,a,o,i.tags))}return r}function WA(e,t){var r=[];r.size=e.size,e.start!==void 0&&(r.start=e.start,r.end=e.end);for(var n=0;n<e.length;n+=3)r.push(e[n]+t,e[n+1],e[n+2]);return r}function v4(e,t){if(e.transformed)return e;var r=1<<e.z,n=e.x,i=e.y,a,o,u;for(a=0;a<e.features.length;a++){var c=e.features[a],f=c.geometry,h=c.type;if(c.geometry=[],h===1)for(o=0;o<f.length;o+=2)c.geometry.push(m4(f[o],f[o+1],t,r,n,i));else for(o=0;o<f.length;o++){var p=[];for(u=0;u<f[o].length;u+=2)p.push(m4(f[o][u],f[o][u+1],t,r,n,i));c.geometry.push(p)}}return e.transformed=!0,e}function m4(e,t,r,n,i,a){return[Math.round(r*(e*n-i)),Math.round(r*(t*n-a))]}function AY(e,t,r,n,i){for(var a=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},u=0;u<e.length;u++){o.numFeatures++,xY(o,e[u],a,i);var c=e[u].minX,f=e[u].minY,h=e[u].maxX,p=e[u].maxY;c<o.minX&&(o.minX=c),f<o.minY&&(o.minY=f),h>o.maxX&&(o.maxX=h),p>o.maxY&&(o.maxY=p)}return o}function xY(e,t,r,n){var i=t.geometry,a=t.type,o=[];if(a==="Point"||a==="MultiPoint")for(var u=0;u<i.length;u+=3)o.push(i[u]),o.push(i[u+1]),e.numPoints++,e.numSimplified++;else if(a==="LineString")$A(o,i,e,r,!1,!1);else if(a==="MultiLineString"||a==="Polygon")for(u=0;u<i.length;u++)$A(o,i[u],e,r,a==="Polygon",u===0);else if(a==="MultiPolygon")for(var c=0;c<i.length;c++){var f=i[c];for(u=0;u<f.length;u++)$A(o,f[u],e,r,!0,u===0)}if(o.length){var h=t.tags||null;if(a==="LineString"&&n.lineMetrics){h={};for(var p in t.tags)h[p]=t.tags[p];h.mapbox_clip_start=i.start/i.size,h.mapbox_clip_end=i.end/i.size}var m={geometry:o,type:a==="Polygon"||a==="MultiPolygon"?3:a==="LineString"||a==="MultiLineString"?2:1,tags:h};t.id!==null&&(m.id=t.id),e.features.push(m)}}function $A(e,t,r,n,i,a){var o=n*n;if(n>0&&t.size<(i?o:n)){r.numPoints+=t.length/3;return}for(var u=[],c=0;c<t.length;c+=3)(n===0||t[c+2]>o)&&(r.numSimplified++,u.push(t[c]),u.push(t[c+1])),r.numPoints++;i&&RY(u,a),e.push(u)}function RY(e,t){for(var r=0,n=0,i=e.length,a=i-2;n<i;a=n,n+=2)r+=(e[n]-e[a])*(e[n+1]+e[a+1]);if(r>0===t)for(n=0,i=e.length;n<i/2;n+=2){var o=e[n],u=e[n+1];e[n]=e[i-2-n],e[n+1]=e[i-1-n],e[i-2-n]=o,e[i-1-n]=u}}function CY(e,t){return new gE(e,t)}function gE(e,t){t=this.options=OY(Object.create(this.options),t);var r=t.debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=yY(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),n=SY(n,t),n.length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}gE.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};gE.prototype.splitTile=function(e,t,r,n,i,a,o){for(var u=[e,t,r,n],c=this.options,f=c.debug;u.length;){n=u.pop(),r=u.pop(),t=u.pop(),e=u.pop();var h=1<<t,p=ER(t,r,n),m=this.tiles[p];if(!m&&(f>1&&console.time("creation"),m=this.tiles[p]=AY(e,t,r,n,c),this.tileCoords.push({z:t,x:r,y:n}),f)){f>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,m.numFeatures,m.numPoints,m.numSimplified),console.timeEnd("creation"));var _="z"+t;this.stats[_]=(this.stats[_]||0)+1,this.total++}if(m.source=e,i){if(t===c.maxZoom||t===i)continue;var y=1<<i-t;if(r!==Math.floor(a/y)||n!==Math.floor(o/y))continue}else if(t===c.indexMaxZoom||m.numPoints<=c.indexMaxPoints)continue;if(m.source=null,e.length!==0){f>1&&console.time("clipping");var E=.5*c.buffer/c.extent,b=.5-E,S=.5+E,A=1+E,R,M,P,I,w,U;R=M=P=I=null,w=Iu(e,h,r-E,r+S,0,m.minX,m.maxX,c),U=Iu(e,h,r+b,r+A,0,m.minX,m.maxX,c),e=null,w&&(R=Iu(w,h,n-E,n+S,1,m.minY,m.maxY,c),M=Iu(w,h,n+b,n+A,1,m.minY,m.maxY,c),w=null),U&&(P=Iu(U,h,n-E,n+S,1,m.minY,m.maxY,c),I=Iu(U,h,n+b,n+A,1,m.minY,m.maxY,c),U=null),f>1&&console.timeEnd("clipping"),u.push(R||[],t+1,r*2,n*2),u.push(M||[],t+1,r*2,n*2+1),u.push(P||[],t+1,r*2+1,n*2),u.push(I||[],t+1,r*2+1,n*2+1)}}};gE.prototype.getTile=function(e,t,r){var n=this.options,i=n.extent,a=n.debug;if(e<0||e>24)return null;var o=1<<e;t=(t%o+o)%o;var u=ER(e,t,r);if(this.tiles[u])return v4(this.tiles[u],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var c=e,f=t,h=r,p;!p&&c>0;)c--,f=Math.floor(f/2),h=Math.floor(h/2),p=this.tiles[ER(c,f,h)];return!p||!p.source?null:(a>1&&console.log("found parent tile z%d-%d-%d",c,f,h),a>1&&console.time("drilling down"),this.splitTile(p.source,c,f,h,e,t,r),a>1&&console.timeEnd("drilling down"),this.tiles[u]?v4(this.tiles[u],i):null)};function ER(e,t,r){return((1<<e)*r+t)*32+e}function OY(e,t){for(var r in t)e[r]=t[r];return e}var dm=class{constructor(t,r,n,i){this.vectorLayerCache={},this.x=r,this.y=n,this.z=i,this.vectorTile=t}getTileData(t){return!t||!this.vectorTile.layers[t]?[]:this.vectorLayerCache[t]?this.vectorLayerCache[t]:this.vectorTile.layers[t].features}getFeatureById(){throw new Error("Method not implemented.")}},MY=Object.defineProperty,wY=Object.defineProperties,NY=Object.getOwnPropertyDescriptors,_4=Object.getOwnPropertySymbols,IY=Object.prototype.hasOwnProperty,PY=Object.prototype.propertyIsEnumerable,g4=(e,t,r)=>t in e?MY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,iy=(e,t)=>{for(var r in t||(t={}))IY.call(t,r)&&g4(e,r,t[r]);if(_4)for(var r of _4(t))PY.call(t,r)&&g4(e,r,t[r]);return e},DY=(e,t)=>wY(e,NY(t)),LY=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{u(r.next(c))}catch(f){i(f)}},o=c=>{try{u(r.throw(c))}catch(f){i(f)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);u((r=r.apply(e,t)).next())}),BY={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function FY(e){let t=0;for(let r=0,n=e.length,i=n-1,a,o;r<n;i=r++)a=e[r],o=e[i],t+=(o.x-a.x)*(a.y+o.y);return t}function UY(e){const t=e.length;if(t<=1)return[e];const r=[];let n,i;for(let a=0;a<t;a++){const o=FY(e[a]);o!==0&&(i===void 0&&(i=o<0),i===o<0?(n&&r.push(n),n=[e[a]]):n.push(e[a]))}return n&&r.push(n),r}var kY=["Unknown","Point","LineString","Polygon"];function zY(e,t,r,n,i){let a=i.geometry;const o=i.type,u=i.tags,c=i.id,f=e*Math.pow(2,n),h=e*t,p=e*r;let m=kY[o],_,y;function E(S){for(let A=0;A<S.length;A++){const R=S[A];if(R[3])break;const M=180-(R[1]+p)*360/f,P=(R[0]+h)*360/f-180,I=360/Math.PI*Math.atan(Math.exp(M*Math.PI/180))-90;S[A]=[P,I,0,1]}}switch(o){case 1:const S=[];for(_=0;_<a.length;_++)S[_]=a[_][0];a=S,E(a);break;case 2:for(_=0;_<a.length;_++)E(a[_]);break;case 3:for(a=UY(a),_=0;_<a.length;_++)for(y=0;y<a[_].length;y++)E(a[_][y]);break}return a.length===1?a=a[0]:m="Multi"+m,{type:"Feature",geometry:{type:m,coordinates:a},properties:u,id:c,relativeOrigin:[0,0],coord:""}}var jY=(e,t,r,n)=>LY(void 0,null,function*(){return new Promise(i=>{const a=t.getTile(e.z,e.x,e.y),u={layers:{defaultLayer:{features:a?a.features.map(f=>zY(n,r.x,r.y,r.z,f)):[]}}},c=new dm(u,e.x,e.y,e.z);i(c)})});function VY(e){const t={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return e===void 0||typeof e.geojsonvtOptions>"u"?t:iy(iy({},t),e.geojsonvtOptions)}function HY(e,t){const r=VY(t),n=r.extent||4096,i=CY(e,r),a=(u,c)=>jY(c,i,u,n),o=DY(iy(iy({},BY),t),{getTileData:a});return{data:e,dataArray:[],tilesetOptions:o,isTile:!0}}var XY=Object.defineProperty,GY=Object.defineProperties,qY=Object.getOwnPropertyDescriptors,y4=Object.getOwnPropertySymbols,WY=Object.prototype.hasOwnProperty,$Y=Object.prototype.propertyIsEnumerable,E4=(e,t,r)=>t in e?XY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b4=(e,t)=>{for(var r in t||(t={}))WY.call(t,r)&&E4(e,r,t[r]);if(y4)for(var r of y4(t))$Y.call(t,r)&&E4(e,r,t[r]);return e},T4=(e,t)=>GY(e,qY(t));function N5(e,t){const{extent:r=[121.168,30.2828,121.384,30.4219],coordinates:n,requestParameters:i={}}=t,a=new Promise(c=>{e instanceof HTMLImageElement||f$(e)?c([e]):YY(e,i,f=>{c(f)})}),o=fp(n,r);return{originData:e,images:a,_id:1,dataArray:[{_id:0,coordinates:o}]}}function YY(e,t,r){const n=[];if(typeof e=="string")dR(T4(b4({},t),{url:e}),(i,a)=>{a&&(n.push(a),r(n))});else{const i=e.length;let a=0;e.forEach(o=>{dR(T4(b4({},t),{url:o}),(u,c)=>{a++,c&&n.push(c),a===i&&r(n)})})}return N5}var ZY=Object.defineProperty,KY=Object.defineProperties,QY=Object.getOwnPropertyDescriptors,S4=Object.getOwnPropertySymbols,JY=Object.prototype.hasOwnProperty,eZ=Object.prototype.propertyIsEnumerable,A4=(e,t,r)=>t in e?ZY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I5=(e,t)=>{for(var r in t||(t={}))JY.call(t,r)&&A4(e,r,t[r]);if(S4)for(var r of S4(t))eZ.call(t,r)&&A4(e,r,t[r]);return e},P5=(e,t)=>KY(e,QY(t)),tZ=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{u(r.next(c))}catch(f){i(f)}},o=c=>{try{u(r.throw(c))}catch(f){i(f)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);u((r=r.apply(e,t)).next())}),rZ=(e,t,r,n)=>tZ(void 0,null,function*(){const i={x:t.x,y:t.y,z:t.z},a=wh(e,i);return new Promise(o=>{n?n(i,(u,c)=>{if(u||!c){const f={layers:{defaultLayer:{features:[]}}},h=new dm(f,t.x,t.y,t.z);o(h)}else{const f={layers:{defaultLayer:{features:c.features}}},h=new dm(f,t.x,t.y,t.z);o(h)}}):SX(P5(I5({},r),{url:a}),(u,c)=>{if(u||!c){const f={layers:{defaultLayer:{features:[]}}},h=new dm(f,t.x,t.y,t.z);o(h)}else{const h={layers:{defaultLayer:{features:JSON.parse(c)}}},p=new dm(h,t.x,t.y,t.z);o(p)}})})});function nZ(e,t){const r=(i,a)=>rZ(e,a,t?.requestParameters,t.getCustomData),n=P5(I5({},t),{getTileData:r});return{dataArray:[],tilesetOptions:n,isTile:!0}}var Dv={},YA,x4;function iZ(){if(x4)return YA;x4=1,YA=e;function e(t,r){this.x=t,this.y=r}return e.prototype={clone:function(){return new e(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,r){return this.clone()._rotateAround(t,r)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var r=t.x-this.x,n=t.y-this.y;return r*r+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,r){return Math.atan2(this.x*r-this.y*t,this.x*t+this.y*r)},_matMult:function(t){var r=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=r,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var r=Math.cos(t),n=Math.sin(t),i=r*this.x-n*this.y,a=n*this.x+r*this.y;return this.x=i,this.y=a,this},_rotateAround:function(t,r){var n=Math.cos(t),i=Math.sin(t),a=r.x+n*(this.x-r.x)-i*(this.y-r.y),o=r.y+i*(this.x-r.x)+n*(this.y-r.y);return this.x=a,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},e.convert=function(t){return t instanceof e?t:Array.isArray(t)?new e(t[0],t[1]):t},YA}var ZA,R4;function D5(){if(R4)return ZA;R4=1;var e=iZ();ZA=t;function t(o,u,c,f,h){this.properties={},this.extent=c,this.type=0,this._pbf=o,this._geometry=-1,this._keys=f,this._values=h,o.readFields(r,this,u)}function r(o,u,c){o==1?u.id=c.readVarint():o==2?n(c,u):o==3?u.type=c.readVarint():o==4&&(u._geometry=c.pos)}function n(o,u){for(var c=o.readVarint()+o.pos;o.pos<c;){var f=u._keys[o.readVarint()],h=u._values[o.readVarint()];u.properties[f]=h}}t.types=["Unknown","Point","LineString","Polygon"],t.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var u=o.readVarint()+o.pos,c=1,f=0,h=0,p=0,m=[],_;o.pos<u;){if(f<=0){var y=o.readVarint();c=y&7,f=y>>3}if(f--,c===1||c===2)h+=o.readSVarint(),p+=o.readSVarint(),c===1&&(_&&m.push(_),_=[]),_.push(new e(h,p));else if(c===7)_&&_.push(_[0].clone());else throw new Error("unknown command "+c)}return _&&m.push(_),m},t.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var u=o.readVarint()+o.pos,c=1,f=0,h=0,p=0,m=1/0,_=-1/0,y=1/0,E=-1/0;o.pos<u;){if(f<=0){var b=o.readVarint();c=b&7,f=b>>3}if(f--,c===1||c===2)h+=o.readSVarint(),p+=o.readSVarint(),h<m&&(m=h),h>_&&(_=h),p<y&&(y=p),p>E&&(E=p);else if(c!==7)throw new Error("unknown command "+c)}return[m,y,_,E]},t.prototype.toGeoJSON=function(o,u,c){var f=this.extent*Math.pow(2,c),h=this.extent*o,p=this.extent*u,m=this.loadGeometry(),_=t.types[this.type],y,E;function b(R){for(var M=0;M<R.length;M++){var P=R[M],I=180-(P.y+p)*360/f;R[M]=[(P.x+h)*360/f-180,360/Math.PI*Math.atan(Math.exp(I*Math.PI/180))-90]}}switch(this.type){case 1:var S=[];for(y=0;y<m.length;y++)S[y]=m[y][0];m=S,b(m);break;case 2:for(y=0;y<m.length;y++)b(m[y]);break;case 3:for(m=i(m),y=0;y<m.length;y++)for(E=0;E<m[y].length;E++)b(m[y][E]);break}m.length===1?m=m[0]:_="Multi"+_;var A={type:"Feature",geometry:{type:_,coordinates:m},properties:this.properties};return"id"in this&&(A.id=this.id),A};function i(o){var u=o.length;if(u<=1)return[o];for(var c=[],f,h,p=0;p<u;p++){var m=a(o[p]);m!==0&&(h===void 0&&(h=m<0),h===m<0?(f&&c.push(f),f=[o[p]]):f.push(o[p]))}return f&&c.push(f),c}function a(o){for(var u=0,c=0,f=o.length,h=f-1,p,m;c<f;h=c++)p=o[c],m=o[h],u+=(m.x-p.x)*(p.y+m.y);return u}return ZA}var KA,C4;function L5(){if(C4)return KA;C4=1;var e=D5();KA=t;function t(i,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(r,this,a),this.length=this._features.length}function r(i,a,o){i===15?a.version=o.readVarint():i===1?a.name=o.readString():i===5?a.extent=o.readVarint():i===2?a._features.push(o.pos):i===3?a._keys.push(o.readString()):i===4&&a._values.push(n(o))}function n(i){for(var a=null,o=i.readVarint()+i.pos;i.pos<o;){var u=i.readVarint()>>3;a=u===1?i.readString():u===2?i.readFloat():u===3?i.readDouble():u===4?i.readVarint64():u===5?i.readVarint():u===6?i.readSVarint():u===7?i.readBoolean():null}return a}return t.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var a=this._pbf.readVarint()+this._pbf.pos;return new e(this._pbf,a,this.extent,this._keys,this._values)},KA}var QA,O4;function aZ(){if(O4)return QA;O4=1;var e=L5();QA=t;function t(n,i){this.layers=n.readFields(r,{},i)}function r(n,i,a){if(n===3){var o=new e(a,a.readVarint()+a.pos);o.length&&(i[o.name]=o)}}return QA}var M4;function oZ(){return M4||(M4=1,Dv.VectorTile=aZ(),Dv.VectorTileFeature=D5(),Dv.VectorTileLayer=L5()),Dv}var sZ=oZ(),Jg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var w4;function uZ(){return w4||(w4=1,Jg.read=function(e,t,r,n,i){var a,o,u=i*8-n-1,c=(1<<u)-1,f=c>>1,h=-7,p=r?i-1:0,m=r?-1:1,_=e[t+p];for(p+=m,a=_&(1<<-h)-1,_>>=-h,h+=u;h>0;a=a*256+e[t+p],p+=m,h-=8);for(o=a&(1<<-h)-1,a>>=-h,h+=n;h>0;o=o*256+e[t+p],p+=m,h-=8);if(a===0)a=1-f;else{if(a===c)return o?NaN:(_?-1:1)*(1/0);o=o+Math.pow(2,n),a=a-f}return(_?-1:1)*o*Math.pow(2,a-n)},Jg.write=function(e,t,r,n,i,a){var o,u,c,f=a*8-i-1,h=(1<<f)-1,p=h>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:a-1,y=n?1:-1,E=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+p>=1?t+=m/c:t+=m*Math.pow(2,1-p),t*c>=2&&(o++,c/=2),o+p>=h?(u=0,o=h):o+p>=1?(u=(t*c-1)*Math.pow(2,i),o=o+p):(u=t*Math.pow(2,p-1)*Math.pow(2,i),o=0));i>=8;e[r+_]=u&255,_+=y,u/=256,i-=8);for(o=o<<i|u,f+=i;f>0;e[r+_]=o&255,_+=y,o/=256,f-=8);e[r+_-y]|=E*128}),Jg}var JA,N4;function lZ(){if(N4)return JA;N4=1,JA=t;var e=uZ();function t(x){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(x)?x:new Uint8Array(x||0),this.pos=0,this.type=0,this.length=this.buf.length}t.Varint=0,t.Fixed64=1,t.Bytes=2,t.Fixed32=5;var r=65536*65536,n=1/r,i=12,a=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");t.prototype={destroy:function(){this.buf=null},readFields:function(x,N,j){for(j=j||this.length;this.pos<j;){var fe=this.readVarint(),O=fe>>3,k=this.pos;this.type=fe&7,x(O,N,this),this.pos===k&&this.skip(fe)}return N},readMessage:function(x,N){return this.readFields(x,N,this.readVarint()+this.pos)},readFixed32:function(){var x=I(this.buf,this.pos);return this.pos+=4,x},readSFixed32:function(){var x=U(this.buf,this.pos);return this.pos+=4,x},readFixed64:function(){var x=I(this.buf,this.pos)+I(this.buf,this.pos+4)*r;return this.pos+=8,x},readSFixed64:function(){var x=I(this.buf,this.pos)+U(this.buf,this.pos+4)*r;return this.pos+=8,x},readFloat:function(){var x=e.read(this.buf,this.pos,!0,23,4);return this.pos+=4,x},readDouble:function(){var x=e.read(this.buf,this.pos,!0,52,8);return this.pos+=8,x},readVarint:function(x){var N=this.buf,j,fe;return fe=N[this.pos++],j=fe&127,fe<128||(fe=N[this.pos++],j|=(fe&127)<<7,fe<128)||(fe=N[this.pos++],j|=(fe&127)<<14,fe<128)||(fe=N[this.pos++],j|=(fe&127)<<21,fe<128)?j:(fe=N[this.pos],j|=(fe&15)<<28,o(j,x,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var x=this.readVarint();return x%2===1?(x+1)/-2:x/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var x=this.readVarint()+this.pos,N=this.pos;return this.pos=x,x-N>=i&&a?K(this.buf,N,x):re(this.buf,N,x)},readBytes:function(){var x=this.readVarint()+this.pos,N=this.buf.subarray(this.pos,x);return this.pos=x,N},readPackedVarint:function(x,N){if(this.type!==t.Bytes)return x.push(this.readVarint(N));var j=u(this);for(x=x||[];this.pos<j;)x.push(this.readVarint(N));return x},readPackedSVarint:function(x){if(this.type!==t.Bytes)return x.push(this.readSVarint());var N=u(this);for(x=x||[];this.pos<N;)x.push(this.readSVarint());return x},readPackedBoolean:function(x){if(this.type!==t.Bytes)return x.push(this.readBoolean());var N=u(this);for(x=x||[];this.pos<N;)x.push(this.readBoolean());return x},readPackedFloat:function(x){if(this.type!==t.Bytes)return x.push(this.readFloat());var N=u(this);for(x=x||[];this.pos<N;)x.push(this.readFloat());return x},readPackedDouble:function(x){if(this.type!==t.Bytes)return x.push(this.readDouble());var N=u(this);for(x=x||[];this.pos<N;)x.push(this.readDouble());return x},readPackedFixed32:function(x){if(this.type!==t.Bytes)return x.push(this.readFixed32());var N=u(this);for(x=x||[];this.pos<N;)x.push(this.readFixed32());return x},readPackedSFixed32:function(x){if(this.type!==t.Bytes)return x.push(this.readSFixed32());var N=u(this);for(x=x||[];this.pos<N;)x.push(this.readSFixed32());return x},readPackedFixed64:function(x){if(this.type!==t.Bytes)return x.push(this.readFixed64());var N=u(this);for(x=x||[];this.pos<N;)x.push(this.readFixed64());return x},readPackedSFixed64:function(x){if(this.type!==t.Bytes)return x.push(this.readSFixed64());var N=u(this);for(x=x||[];this.pos<N;)x.push(this.readSFixed64());return x},skip:function(x){var N=x&7;if(N===t.Varint)for(;this.buf[this.pos++]>127;);else if(N===t.Bytes)this.pos=this.readVarint()+this.pos;else if(N===t.Fixed32)this.pos+=4;else if(N===t.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+N)},writeTag:function(x,N){this.writeVarint(x<<3|N)},realloc:function(x){for(var N=this.length||16;N<this.pos+x;)N*=2;if(N!==this.length){var j=new Uint8Array(N);j.set(this.buf),this.buf=j,this.length=N}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(x){this.realloc(4),w(this.buf,x,this.pos),this.pos+=4},writeSFixed32:function(x){this.realloc(4),w(this.buf,x,this.pos),this.pos+=4},writeFixed64:function(x){this.realloc(8),w(this.buf,x&-1,this.pos),w(this.buf,Math.floor(x*n),this.pos+4),this.pos+=8},writeSFixed64:function(x){this.realloc(8),w(this.buf,x&-1,this.pos),w(this.buf,Math.floor(x*n),this.pos+4),this.pos+=8},writeVarint:function(x){if(x=+x||0,x>268435455||x<0){f(x,this);return}this.realloc(4),this.buf[this.pos++]=x&127|(x>127?128:0),!(x<=127)&&(this.buf[this.pos++]=(x>>>=7)&127|(x>127?128:0),!(x<=127)&&(this.buf[this.pos++]=(x>>>=7)&127|(x>127?128:0),!(x<=127)&&(this.buf[this.pos++]=x>>>7&127)))},writeSVarint:function(x){this.writeVarint(x<0?-x*2-1:x*2)},writeBoolean:function(x){this.writeVarint(!!x)},writeString:function(x){x=String(x),this.realloc(x.length*4),this.pos++;var N=this.pos;this.pos=H(this.buf,x,this.pos);var j=this.pos-N;j>=128&&m(N,j,this),this.pos=N-1,this.writeVarint(j),this.pos+=j},writeFloat:function(x){this.realloc(4),e.write(this.buf,x,this.pos,!0,23,4),this.pos+=4},writeDouble:function(x){this.realloc(8),e.write(this.buf,x,this.pos,!0,52,8),this.pos+=8},writeBytes:function(x){var N=x.length;this.writeVarint(N),this.realloc(N);for(var j=0;j<N;j++)this.buf[this.pos++]=x[j]},writeRawMessage:function(x,N){this.pos++;var j=this.pos;x(N,this);var fe=this.pos-j;fe>=128&&m(j,fe,this),this.pos=j-1,this.writeVarint(fe),this.pos+=fe},writeMessage:function(x,N,j){this.writeTag(x,t.Bytes),this.writeRawMessage(N,j)},writePackedVarint:function(x,N){N.length&&this.writeMessage(x,_,N)},writePackedSVarint:function(x,N){N.length&&this.writeMessage(x,y,N)},writePackedBoolean:function(x,N){N.length&&this.writeMessage(x,S,N)},writePackedFloat:function(x,N){N.length&&this.writeMessage(x,E,N)},writePackedDouble:function(x,N){N.length&&this.writeMessage(x,b,N)},writePackedFixed32:function(x,N){N.length&&this.writeMessage(x,A,N)},writePackedSFixed32:function(x,N){N.length&&this.writeMessage(x,R,N)},writePackedFixed64:function(x,N){N.length&&this.writeMessage(x,M,N)},writePackedSFixed64:function(x,N){N.length&&this.writeMessage(x,P,N)},writeBytesField:function(x,N){this.writeTag(x,t.Bytes),this.writeBytes(N)},writeFixed32Field:function(x,N){this.writeTag(x,t.Fixed32),this.writeFixed32(N)},writeSFixed32Field:function(x,N){this.writeTag(x,t.Fixed32),this.writeSFixed32(N)},writeFixed64Field:function(x,N){this.writeTag(x,t.Fixed64),this.writeFixed64(N)},writeSFixed64Field:function(x,N){this.writeTag(x,t.Fixed64),this.writeSFixed64(N)},writeVarintField:function(x,N){this.writeTag(x,t.Varint),this.writeVarint(N)},writeSVarintField:function(x,N){this.writeTag(x,t.Varint),this.writeSVarint(N)},writeStringField:function(x,N){this.writeTag(x,t.Bytes),this.writeString(N)},writeFloatField:function(x,N){this.writeTag(x,t.Fixed32),this.writeFloat(N)},writeDoubleField:function(x,N){this.writeTag(x,t.Fixed64),this.writeDouble(N)},writeBooleanField:function(x,N){this.writeVarintField(x,!!N)}};function o(x,N,j){var fe=j.buf,O,k;if(k=fe[j.pos++],O=(k&112)>>4,k<128||(k=fe[j.pos++],O|=(k&127)<<3,k<128)||(k=fe[j.pos++],O|=(k&127)<<10,k<128)||(k=fe[j.pos++],O|=(k&127)<<17,k<128)||(k=fe[j.pos++],O|=(k&127)<<24,k<128)||(k=fe[j.pos++],O|=(k&1)<<31,k<128))return c(x,O,N);throw new Error("Expected varint not more than 10 bytes")}function u(x){return x.type===t.Bytes?x.readVarint()+x.pos:x.pos+1}function c(x,N,j){return j?N*4294967296+(x>>>0):(N>>>0)*4294967296+(x>>>0)}function f(x,N){var j,fe;if(x>=0?(j=x%4294967296|0,fe=x/4294967296|0):(j=~(-x%4294967296),fe=~(-x/4294967296),j^4294967295?j=j+1|0:(j=0,fe=fe+1|0)),x>=18446744073709552e3||x<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");N.realloc(10),h(j,fe,N),p(fe,N)}function h(x,N,j){j.buf[j.pos++]=x&127|128,x>>>=7,j.buf[j.pos++]=x&127|128,x>>>=7,j.buf[j.pos++]=x&127|128,x>>>=7,j.buf[j.pos++]=x&127|128,x>>>=7,j.buf[j.pos]=x&127}function p(x,N){var j=(x&7)<<4;N.buf[N.pos++]|=j|((x>>>=3)?128:0),x&&(N.buf[N.pos++]=x&127|((x>>>=7)?128:0),x&&(N.buf[N.pos++]=x&127|((x>>>=7)?128:0),x&&(N.buf[N.pos++]=x&127|((x>>>=7)?128:0),x&&(N.buf[N.pos++]=x&127|((x>>>=7)?128:0),x&&(N.buf[N.pos++]=x&127)))))}function m(x,N,j){var fe=N<=16383?1:N<=2097151?2:N<=268435455?3:Math.floor(Math.log(N)/(Math.LN2*7));j.realloc(fe);for(var O=j.pos-1;O>=x;O--)j.buf[O+fe]=j.buf[O]}function _(x,N){for(var j=0;j<x.length;j++)N.writeVarint(x[j])}function y(x,N){for(var j=0;j<x.length;j++)N.writeSVarint(x[j])}function E(x,N){for(var j=0;j<x.length;j++)N.writeFloat(x[j])}function b(x,N){for(var j=0;j<x.length;j++)N.writeDouble(x[j])}function S(x,N){for(var j=0;j<x.length;j++)N.writeBoolean(x[j])}function A(x,N){for(var j=0;j<x.length;j++)N.writeFixed32(x[j])}function R(x,N){for(var j=0;j<x.length;j++)N.writeSFixed32(x[j])}function M(x,N){for(var j=0;j<x.length;j++)N.writeFixed64(x[j])}function P(x,N){for(var j=0;j<x.length;j++)N.writeSFixed64(x[j])}function I(x,N){return(x[N]|x[N+1]<<8|x[N+2]<<16)+x[N+3]*16777216}function w(x,N,j){x[j]=N,x[j+1]=N>>>8,x[j+2]=N>>>16,x[j+3]=N>>>24}function U(x,N){return(x[N]|x[N+1]<<8|x[N+2]<<16)+(x[N+3]<<24)}function re(x,N,j){for(var fe="",O=N;O<j;){var k=x[O],V=null,ee=k>239?4:k>223?3:k>191?2:1;if(O+ee>j)break;var oe,ge,Ee;ee===1?k<128&&(V=k):ee===2?(oe=x[O+1],(oe&192)===128&&(V=(k&31)<<6|oe&63,V<=127&&(V=null))):ee===3?(oe=x[O+1],ge=x[O+2],(oe&192)===128&&(ge&192)===128&&(V=(k&15)<<12|(oe&63)<<6|ge&63,(V<=2047||V>=55296&&V<=57343)&&(V=null))):ee===4&&(oe=x[O+1],ge=x[O+2],Ee=x[O+3],(oe&192)===128&&(ge&192)===128&&(Ee&192)===128&&(V=(k&15)<<18|(oe&63)<<12|(ge&63)<<6|Ee&63,(V<=65535||V>=1114112)&&(V=null))),V===null?(V=65533,ee=1):V>65535&&(V-=65536,fe+=String.fromCharCode(V>>>10&1023|55296),V=56320|V&1023),fe+=String.fromCharCode(V),O+=ee}return fe}function K(x,N,j){return a.decode(x.subarray(N,j))}function H(x,N,j){for(var fe=0,O,k;fe<N.length;fe++){if(O=N.charCodeAt(fe),O>55295&&O<57344)if(k)if(O<56320){x[j++]=239,x[j++]=191,x[j++]=189,k=O;continue}else O=k-55296<<10|O-56320|65536,k=null;else{O>56319||fe+1===N.length?(x[j++]=239,x[j++]=191,x[j++]=189):k=O;continue}else k&&(x[j++]=239,x[j++]=191,x[j++]=189,k=null);O<128?x[j++]=O:(O<2048?x[j++]=O>>6|192:(O<65536?x[j++]=O>>12|224:(x[j++]=O>>18|240,x[j++]=O>>12&63|128),x[j++]=O>>6&63|128),x[j++]=O&63|128)}return j}return JA}var cZ=lZ();const fZ=$r(cZ);var dZ=Object.defineProperty,hZ=Object.defineProperties,pZ=Object.getOwnPropertyDescriptors,I4=Object.getOwnPropertySymbols,vZ=Object.prototype.hasOwnProperty,mZ=Object.prototype.propertyIsEnumerable,P4=(e,t,r)=>t in e?dZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,D4=(e,t)=>{for(var r in t||(t={}))vZ.call(t,r)&&P4(e,r,t[r]);if(I4)for(var r of I4(t))mZ.call(t,r)&&P4(e,r,t[r]);return e},_Z=(e,t)=>hZ(e,pZ(t)),L4=class{constructor(e,t,r,n){this.vectorLayerCache={},this.x=t,this.y=r,this.z=n,this.vectorTile=new sZ.VectorTile(new fZ(e))}getTileData(e){if(!e||!this.vectorTile.layers[e])return[];if(this.vectorLayerCache[e])return this.vectorLayerCache[e];const t=this.vectorTile.layers[e];if(Array.isArray(t.features))return this.vectorLayerCache[e]=t.features,t.features;const r=[];for(let n=0;n<t.length;n++){const a=t.feature(n).toGeoJSON(this.x,this.y,this.z);r.push(_Z(D4({},a),{properties:D4({id:a.id},a.properties)}))}return this.vectorLayerCache[e]=r,r}getFeatureById(){throw new Error("Method not implemented.")}},gZ=Object.defineProperty,yZ=Object.defineProperties,EZ=Object.getOwnPropertyDescriptors,B4=Object.getOwnPropertySymbols,bZ=Object.prototype.hasOwnProperty,TZ=Object.prototype.propertyIsEnumerable,F4=(e,t,r)=>t in e?gZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bR=(e,t)=>{for(var r in t||(t={}))bZ.call(t,r)&&F4(e,r,t[r]);if(B4)for(var r of B4(t))TZ.call(t,r)&&F4(e,r,t[r]);return e},B5=(e,t)=>yZ(e,EZ(t)),SZ=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{u(r.next(c))}catch(f){i(f)}},o=c=>{try{u(r.throw(c))}catch(f){i(f)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);u((r=r.apply(e,t)).next())}),AZ={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},xZ=(e,t,r,n,i)=>SZ(void 0,null,function*(){const a=wh(e,t);return new Promise(o=>{if(i)i({x:r.x,y:r.y,z:r.z},(u,c)=>{if(u||!c)o(void 0);else{const f=new L4(c,r.x,r.y,r.z);o(f)}});else{const u=X2(B5(bR({},n),{url:a}),(c,f)=>{if(c||!f)o(void 0);else{const h=new L4(f,r.x,r.y,r.z);o(h)}});r.xhrCancel=()=>u.cancel()}})});function RZ(e,t){const r=Array.isArray(e)?e[0]:e,n=(a,o)=>xZ(r,a,o,t?.requestParameters,t?.getCustomData),i=B5(bR(bR({},AZ),t),{getTileData:n});return{data:r,dataArray:[],tilesetOptions:i,isTile:!0}}function CZ(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"/":return t/r;case"%":return t%r;case"^":return Math.pow(t,r);case"abs":return Math.abs(t);case"floor":return Math.floor(t);case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"sin":return Math.sin(t);case"cos":return Math.cos(t);case"atan":return r===-1?Math.atan(t):Math.atan2(t,r);case"min":return Math.min(t,r);case"max":return Math.max(t,r);case"log10":return Math.log(t);case"log2":return Math.log2(t);default:return console.warn("Calculate symbol err! Return default 0"),0}}function Om(e,t){const{width:r,height:n}=t[0],i=t.map(c=>c.rasterData),a=r*n,o=[],u=JSON.stringify(e);for(let c=0;c<a;c++){const f=JSON.parse(u),h=F5(f,i,c);if(typeof h=="number")o.push(h);else{const p=TR(f);o.push(p)}}return o}function F5(e,t,r){if(e.length===2&&e[0]==="band"&&typeof e[1]=="number")try{return t[e[1]][r]}catch{return console.warn("Raster Data err!"),0}e.map((n,i)=>{if(Array.isArray(n)&&n.length>0)switch(n[0]){case"band":try{e[i]=t[n[1]][r]}catch{console.warn("Raster Data err!"),e[i]=0}break;default:F5(n,t,r)}})}function OZ(e){const[t,r=-1,n=-1]=e;return t===void 0?(console.warn("Express err!"),["+",0,0]):[t.replace(/\s+/g,""),r,n]}function TR(e){const t=OZ(e),r=t[0];let n=t[1],i=t[2];return Array.isArray(n)&&(n=TR(e[1])),Array.isArray(i)&&(i=TR(e[2])),CZ(r,n,i)}var MZ={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:wZ}};function wZ(e,t){const r=e[0].rasterData,n=e[1].rasterData,i=e[2].rasterData,a=[],[o,u]=t?.countCut||[2,98],c=t?.RMinMax||Nh(r,o,u),f=t?.GMinMax||Nh(n,o,u),h=t?.BMinMax||Nh(i,o,u);for(let p=0;p<r.length;p++)a.push(Math.max(0,r[p]-c[0])),a.push(Math.max(0,n[p]-f[0])),a.push(Math.max(0,i[p]-h[0]));return{rasterData:a,rMinMax:c,gMinMax:f,bMinMax:h}}function Nh(e,t,r){const n=e.slice().sort((u,c)=>u-c),i=n.length,a=n[Math.ceil(i*t/100)],o=n[Math.ceil(i*r/100)];return[a,o]}var NZ=Object.defineProperty,IZ=Object.defineProperties,PZ=Object.getOwnPropertyDescriptors,U4=Object.getOwnPropertySymbols,DZ=Object.prototype.hasOwnProperty,LZ=Object.prototype.propertyIsEnumerable,k4=(e,t,r)=>t in e?NZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,BZ=(e,t)=>{for(var r in t||(t={}))DZ.call(t,r)&&k4(e,r,t[r]);if(U4)for(var r of U4(t))LZ.call(t,r)&&k4(e,r,t[r]);return e},FZ=(e,t)=>IZ(e,PZ(t)),U5=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{u(r.next(c))}catch(f){i(f)}},o=c=>{try{u(r.throw(c))}catch(f){i(f)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);u((r=r.apply(e,t)).next())});function fC(e,t,r){return U5(this,null,function*(){if(e.length===0)return{rasterData:[0],width:1,heigh:1};const n=yield Promise.all(e.map(({data:c,bands:f=[0]})=>t(c,f))),i=[];n.forEach(c=>{Array.isArray(c)?i.push(...c):i.push(c)});const{width:a,height:o}=i[0];let u;switch(typeof r){case"function":u=r(i);break;case"object":Array.isArray(r)?u={rasterData:Om(r,i)}:u=UZ(r,i);break;default:u={rasterData:i[0].rasterData}}return FZ(BZ({},u),{width:a,height:o})})}function UZ(e,t){const r=MZ[e.type];if(r.type==="function")return r.method(t,e?.options);if(r.type==="operation")return e.type==="rgb"?kZ(r.expression,t):{rasterData:Om(r.expression,t)}}function kZ(e,t){e.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),e.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),e.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");const r=Om(e.r||["band",0],t),n=Om(e.g||["band",0],t),i=Om(e.b||["band",0],t);return[r,n,i]}function SR(e,t,r,n){return U5(this,null,function*(){const i=yield fC(e,t,r);n(null,{data:i})})}function zZ(e,t){const{extent:r=[121.168,30.2828,121.384,30.4219],coordinates:n,width:i,height:a,min:o,max:u,format:c,operation:f}=t;let h,p,m;if(c===void 0||R5(e))h=Array.from(e),p=i,m=a;else{const E=Array.isArray(e)?e:[e];h=fC(E,c,f)}const _=fp(n,r);return{_id:1,dataArray:[{_id:1,data:h,width:p,height:m,min:o,max:u,coordinates:_}]}}function Xh(e){"@babel/helpers - typeof";return Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xh(e)}function jZ(e,t){if(Xh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k5(e){var t=jZ(e,"string");return Xh(t)=="symbol"?t:t+""}function B(e,t,r){return(t=k5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z4(Object(r),!0).forEach(function(n){B(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}let f_=(function(e){return e.Normal="normal",e.PostProcessing="post-processing",e})({}),D=(function(e){return e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e})({});const VZ=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{camelCase:HZ,isNil:XZ,upperFirst:GZ}=Ln;class Gu{constructor(){B(this,"shaderModuleService",void 0),B(this,"rendererService",void 0),B(this,"config",void 0),B(this,"quad",VZ),B(this,"enabled",!0),B(this,"renderToScreen",!1),B(this,"model",void 0),B(this,"name",void 0),B(this,"optionsToUpdate",{})}getName(){return this.name}setName(t){this.name=t}getType(){return f_.PostProcessing}init(t,r){this.config=r,this.rendererService=t.getContainer().rendererService,this.shaderModuleService=t.getContainer().shaderModuleService;const{createAttribute:n,createBuffer:i,createModel:a}=this.rendererService,{vs:o,fs:u,uniforms:c}=this.setupShaders();this.model=a({vs:o,fs:u,attributes:{a_Position:n({buffer:i({data:[-4,-4,4,-4,0,4],type:D.FLOAT}),size:2})},uniforms:Xe(Xe({u_Texture:null},c),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}render(t,r){const n=t.multiPassRenderer.getPostProcessor(),{useFramebuffer:i,getViewportSize:a,clear:o}=this.rendererService,{width:u,height:c}=a();i(this.renderToScreen?null:n.getWriteFBO(),()=>{o({framebuffer:n.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});const f=Xe({u_BloomFinal:0,u_Texture:n.getReadFBO(),u_ViewportSize:[u,c]},this.convertOptionsToUniforms(this.optionsToUpdate));r&&(f.u_BloomFinal=1,f.u_Texture2=r),this.model.draw({uniforms:f})})}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}setRenderToScreen(t){this.renderToScreen=t}updateOptions(t){this.optionsToUpdate=Xe(Xe({},this.optionsToUpdate),t)}setupShaders(){throw new Error("Method not implemented.")}convertOptionsToUniforms(t){const r={};return Object.keys(t).forEach(n=>{XZ(t[n])||(r[`u_${GZ(HZ(n))}`]=t[n])}),r}}function qZ(e){let t=0;switch(e){case"vec2":case"ivec2":t=2;break;case"vec3":case"ivec3":t=3;break;case"vec4":case"ivec4":case"mat2":t=4;break;case"mat3":t=9;break;case"mat4":t=16;break}return t}const z5=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function j4(e,t=!1){const r={};return e=e.replace(z5,(n,i,a)=>{const o=a.split(":"),u=o[0].trim();let c="";switch(o.length>1&&(c=o[1].trim()),i){case"bool":c=c==="true";break;case"float":case"int":c=Number(c);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":c?c=c.replace("[","").replace("]","").split(",").reduce((f,h)=>(f.push(Number(h.trim())),f),[]):c=new Array(qZ(i)).fill(0);break}return r[u]=c,`${t?"uniform ":""}${i} ${u};
`}),{content:e,uniforms:r}}function ex(e){let{content:t,uniforms:r}=j4(e,!0);return t=t.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,(n,i,a)=>{a=a.trim().replace(/^.*$/gm,c=>`uniform ${c}`);const{content:o,uniforms:u}=j4(a);return Object.assign(r,u),`${i}{
${o}
};`}),{content:t,uniforms:r}}function V4(e){const t={};return e.replace(z5,(r,n,i)=>{const a=i.trim();return t[a]?"":(t[a]=!0,`uniform ${n} ${a};
`)})}const{clamp:Sge}=Ln,vf={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"};let ay=(function(e){return e.TOPRIGHT="topright",e.TOPLEFT="topleft",e.BOTTOMRIGHT="bottomright",e.BOTTOMLEFT="bottomleft",e.TOPCENTER="topcenter",e.BOTTOMCENTER="bottomcenter",e.LEFTCENTER="leftcenter",e.RIGHTCENTER="rightcenter",e.LEFTTOP="lefttop",e.RIGHTTOP="righttop",e.LEFTBOTTOM="leftbottom",e.RIGHTBOTTOM="rightbottom",e})({}),oy=(function(e){return e[e.LNGLAT=1]="LNGLAT",e[e.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",e[e.VECTOR_TILE=3]="VECTOR_TILE",e[e.IDENTITY=4]="IDENTITY",e[e.METER_OFFSET=5]="METER_OFFSET",e})({});const sh={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter"};var Ai={LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"};let Oa=(function(e){return e.Hover="hover",e.Click="click",e.Select="select",e.Active="active",e.Drag="drag",e})({}),Yl=(function(e){return e.normal="normal",e.additive="additive",e.subtractive="subtractive",e.min="min",e.max="max",e.none="none",e})({}),bf=(function(e){return e.MULTIPLE="MULTIPLE",e.SINGLE="SINGLE",e})({}),yE=(function(e){return e.AND="and",e.OR="or",e})({}),Vi=(function(e){return e.INIT="init",e.UPDATE="update",e})({}),sn=(function(e){return e.LINEAR="linear",e.SEQUENTIAL="sequential",e.POWER="power",e.LOG="log",e.IDENTITY="identity",e.TIME="time",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.CAT="cat",e.DIVERGING="diverging",e.CUSTOM="threshold",e})({}),uh=(function(e){return e.CONSTANT="constant",e.VARIABLE="variable",e})({}),jt=(function(e){return e[e.Attribute=0]="Attribute",e[e.InstancedAttribute=1]="InstancedAttribute",e[e.Uniform=2]="Uniform",e})({});const H4=["mapload","mapchange","mapAfterFrameChange"];var e0={exports:{}},X4;function WZ(){if(X4)return e0.exports;X4=1,e0.exports=t,e0.exports.default=t;var e=1e20;function t(o,u,c,f,h,p){this.fontSize=o||24,this.buffer=u===void 0?3:u,this.cutoff=f||.25,this.fontFamily=h||"sans-serif",this.fontWeight=p||"normal",this.radius=c||8;var m=this.size=this.fontSize+this.buffer*2,_=m+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=m,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(_*_),this.gridInner=new Float64Array(_*_),this.f=new Float64Array(_),this.z=new Float64Array(_+1),this.v=new Uint16Array(_),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(m/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function r(o,u,c,f,h,p,m){p.fill(e,0,u*c),m.fill(0,0,u*c);for(var _=(u-f)/2,y=0;y<h;y++)for(var E=0;E<f;E++){var b=(y+_)*u+E+_,S=o.data[4*(y*f+E)+3]/255;if(S===1)p[b]=0,m[b]=e;else if(S===0)p[b]=e,m[b]=0;else{var A=Math.max(0,.5-S),R=Math.max(0,S-.5);p[b]=A*A,m[b]=R*R}}}function n(o,u,c,f,h,p,m){for(var _=0;_<u*c;_++){var y=Math.sqrt(f[_])-Math.sqrt(h[_]);o[_]=Math.round(255-255*(y/p+m))}}t.prototype._draw=function(o,u){var c=this.ctx.measureText(o),f=c.width,h=2*this.buffer,p,m,_,y,E,b,S,A;u&&this.useMetrics?(E=Math.floor(c.actualBoundingBoxAscent),A=this.buffer+Math.ceil(c.actualBoundingBoxAscent),b=this.buffer,S=this.buffer,m=Math.min(this.size,Math.ceil(c.actualBoundingBoxRight-c.actualBoundingBoxLeft)),y=Math.min(this.size-b,Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent)),p=m+h,_=y+h,this.ctx.textBaseline="alphabetic"):(p=m=this.size,_=y=this.size,E=19*this.fontSize/24,b=S=0,A=this.middle,this.ctx.textBaseline="middle");var R;m&&y&&(this.ctx.clearRect(S,b,m,y),this.ctx.fillText(o,this.buffer,A),R=this.ctx.getImageData(S,b,m,y));var M=new Uint8ClampedArray(p*_);return r(R,p,_,m,y,this.gridOuter,this.gridInner),i(this.gridOuter,p,_,this.f,this.v,this.z),i(this.gridInner,p,_,this.f,this.v,this.z),n(M,p,_,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:M,metrics:{width:m,height:y,sdfWidth:p,sdfHeight:_,top:E,left:0,advance:f}}},t.prototype.draw=function(o){return this._draw(o,!1).data},t.prototype.drawWithMetrics=function(o){return this._draw(o,!0)};function i(o,u,c,f,h,p){for(var m=0;m<u;m++)a(o,m,u,c,f,h,p);for(var _=0;_<c;_++)a(o,_*u,1,u,f,h,p)}function a(o,u,c,f,h,p,m){var _,y,E,b;for(p[0]=0,m[0]=-e,m[1]=e,_=0;_<f;_++)h[_]=o[u+_*c];for(_=1,y=0,E=0;_<f;_++){do b=p[y],E=(h[_]-h[b]+_*_-b*b)/(_-b)/2;while(E<=m[y]&&--y>-1);y++,p[y]=_,m[y]=E,m[y+1]=e}for(_=0,y=0;_<f;_++){for(;m[y+1]<_;)y++;b=p[y],o[u+_*c]=h[b]+(_-b)*(_-b)}}return e0.exports}var $Z=WZ();const YZ=$r($Z),Lv=30;function ZZ({characterSet:e,getFontWidth:t,fontHeight:r,buffer:n,maxCanvasWidth:i,mapping:a={},xOffset:o=0,yOffset:u=0}){let c=0,f=o;Array.from(e).forEach((p,m)=>{if(!a[p]){const _=t(p,m);f+Lv>i&&(f=0,c++),a[p]={x:f,y:u+c*Lv,width:Lv,height:Lv,advance:_},f+=Lv}});const h=r+n*2;return{mapping:a,xOffset:f,yOffset:u+c*h,canvasHeight:j5(u+(c+1)*h)}}function KZ(e,t,r){let n=0,i=0,a=0,o=[];const u={};for(const f of e)if(!u[f.id]){const{size:h}=f;n+h+t>r&&(G4(u,o,i),n=0,i=a+i+t,a=0,o=[]),o.push({icon:f,xOffset:n}),n=n+h+t,a=Math.max(a,h)}o.length>0&&G4(u,o,i);const c=j5(a+i+t);return{mapping:u,canvasHeight:c}}function G4(e,t,r){for(const n of t){const{icon:i,xOffset:a}=n;e[i.id]=Xe(Xe({},i),{},{x:a,y:r,image:i.image,width:i.width,height:i.height})}}function j5(e){return Math.pow(2,Math.ceil(Math.log2(e)))}const QZ=sK(),JZ="sans-serif",eK="normal",tK=24,rK=3,nK=.25,iK=8,q4=1024,aK=1,W4=1,oK=3;function sK(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}function $4(e,t,r,n){e.font=`${n} ${r}px ${t}`,e.fillStyle="black",e.textBaseline="middle"}function Y4(e,t){for(let r=0;r<e.length;r++)t.data[4*r+3]=e[r]}class uK extends La.EventEmitter{constructor(...t){super(...t),B(this,"fontAtlas",void 0),B(this,"iconFontMap",void 0),B(this,"iconFontGlyphs",{}),B(this,"fontOptions",void 0),B(this,"key",void 0),B(this,"cache",new T$(oK))}get scale(){return W4}get canvas(){const t=this.cache.get(this.key);return t&&t.data}get mapping(){const t=this.cache.get(this.key);return t&&t.mapping||{}}getCanvasByKey(t){const r=this.cache.get(t);return r&&r.data}getMappingByKey(t){const r=this.cache.get(t);return r&&r.mapping||{}}init(){this.cache.clear(),this.fontOptions={fontFamily:JZ,fontWeight:eK,characterSet:QZ,fontSize:tK,buffer:rK,sdf:!0,cutoff:nK,radius:iK,iconfont:!1},this.key="",this.iconFontMap=new Map}addIconGlyphs(t){t.forEach(r=>{this.iconFontGlyphs[r.name]=r.unicode})}addIconFont(t,r){this.iconFontMap.set(t,r)}getIconFontKey(t){return this.iconFontMap.get(t)||t}getGlyph(t){return this.iconFontGlyphs[t]?String.fromCharCode(parseInt(this.iconFontGlyphs[t],16)):""}setFontOptions(t){this.fontOptions=Xe(Xe({},this.fontOptions),t),this.key=this.getKey();const r=this.getNewChars(this.key,this.fontOptions.characterSet),n=this.cache.get(this.key);if(n&&r.length===0)return;const i=this.generateFontAtlas(this.key,r,n);this.fontAtlas=i,this.cache.set(this.key,i)}addFontFace(t,r){const n=document.createElement("style");n.type="text/css",n.innerText=`
        @font-face{
            font-family: '${t}';
            src: url('${r}') format('woff2'),
            url('${r}') format('woff'),
            url('${r}') format('truetype');
        }`,n.onload=()=>{if(document.fonts)try{document.fonts.load(`24px ${t}`,"L7text"),document.fonts.ready.then(()=>{this.emit("fontloaded",{fontFamily:t})})}catch(i){console.warn(" document.fonts !"),console.warn(" iconfont !"),console.warn(i)}},document.getElementsByTagName("head")[0].appendChild(n)}destroy(){this.cache.clear(),this.iconFontMap.clear()}generateFontAtlas(t,r,n){const{fontFamily:i,fontWeight:a,fontSize:o,buffer:u,sdf:c,radius:f,cutoff:h,iconfont:p}=this.fontOptions;let m=n&&n.data;m||(m=window.document.createElement("canvas"),m.width=q4);const _=m.getContext("2d",{willReadFrequently:!0});$4(_,i,o,a);const{mapping:y,canvasHeight:E,xOffset:b,yOffset:S}=ZZ(Xe({getFontWidth:R=>_.measureText(R).width,fontHeight:o*W4,buffer:u,characterSet:r,maxCanvasWidth:q4},n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset})),A=_.getImageData(0,0,m.width,m.height);if(m.height=E,_.putImageData(A,0,0),$4(_,i,o,a),c){const R=new YZ(o,u,f,h,i,a),M=_.getImageData(0,0,R.size,R.size);for(const P of r){if(p){const I=String.fromCharCode(parseInt(P.replace("&#x","").replace(";",""),16)),w=R.draw(I);Y4(w,M)}else Y4(R.draw(P),M);_.putImageData(M,y[P].x,y[P].y)}}else for(const R of r)_.fillText(R,y[R].x,y[R].y+o*aK);return{xOffset:b,yOffset:S,mapping:y,data:m,width:m.width,height:m.height}}getKey(){const{fontFamily:t,fontWeight:r}=this.fontOptions;return`${t}_${r}`}getNewChars(t,r){const n=this.cache.get(t);if(!n)return r;const i=[],a=n.mapping,o=new Set(Object.keys(a));return new Set(r).forEach(c=>{o.has(c)||i.push(c)}),i}}function Z4(e,t,r,n,i,a,o){try{var u=e[a](o),c=u.value}catch(f){return void r(f)}u.done?t(c):Promise.resolve(c).then(n,i)}function Je(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(c){Z4(a,n,i,o,u,"next",c)}function u(c){Z4(a,n,i,o,u,"throw",c)}o(void 0)})}}const lK=3,K4=1024,Bv=64;class cK extends La.EventEmitter{constructor(...t){super(...t),B(this,"canvasHeight",128),B(this,"texture",void 0),B(this,"canvas",void 0),B(this,"iconData",void 0),B(this,"iconMap",void 0),B(this,"ctx",void 0),B(this,"loadingImageCount",0)}isLoading(){return this.loadingImageCount===0}init(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}addImage(t,r){var n=this;return Je(function*(){let i=new Image;n.loadingImageCount++,n.hasImage(t)?console.warn("Image Id already exists"):n.iconData.push({id:t,size:Bv}),n.updateIconMap(),i=yield n.loadImage(r);const a=n.iconData.find(o=>o.id===t);a&&(a.image=i,a.width=i.width,a.height=i.height),n.update()})()}addImageMini(t,r,n){const i=n.getSceneConfig().canvas;let a=i.createImage();if(this.loadingImageCount++,this.hasImage(t))throw new Error("Image Id already exists");this.iconData.push({id:t,size:Bv}),this.updateIconMap(),this.loadImageMini(r,i).then(o=>{a=o;const u=this.iconData.find(c=>c.id===t);u&&(u.image=a,u.width=a.width,u.height=a.height),this.update()})}getTexture(){return this.texture}getIconMap(){return this.iconMap}getCanvas(){return this.canvas}hasImage(t){return this.iconMap.hasOwnProperty(t)}removeImage(t){this.hasImage(t)&&(this.iconData=this.iconData.filter(r=>r.id!==t),delete this.iconMap[t],this.update())}destroy(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}loadImage(t){return new Promise((r,n)=>{if(t instanceof HTMLImageElement){r(t);return}const i=new Image;i.crossOrigin="anonymous",i.onload=()=>{r(i)},i.onerror=()=>{n(new Error("Could not load image at "+t))},i.src=t instanceof File?URL.createObjectURL(t):t})}update(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}updateIconAtlas(){this.canvas.width=K4,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(t=>{const{x:r,y:n,image:i,width:a=64,height:o=64}=this.iconMap[t],c=Math.max(a,o)/Bv,f=o/c,h=a/c;i&&this.ctx.drawImage(i,r+(Bv-h)/2,n+(Bv-f)/2,h,f)})}updateIconMap(){const{mapping:t,canvasHeight:r}=KZ(this.iconData,lK,K4);this.iconMap=t,this.canvasHeight=r}loadImageMini(t,r){return new Promise((n,i)=>{const a=r.createImage();a.crossOrigin="anonymous",a.onload=()=>{n(a)},a.onerror=()=>{i(new Error("Could not load image at "+t))},a.src=t})}}var Ki=1e-6,So=typeof Float32Array<"u"?Float32Array:Array;function dC(){var e=new So(16);return So!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function fK(e,t,r,n,i,a,o,u,c,f,h,p,m,_,y,E){var b=new So(16);return b[0]=e,b[1]=t,b[2]=r,b[3]=n,b[4]=i,b[5]=a,b[6]=o,b[7]=u,b[8]=c,b[9]=f,b[10]=h,b[11]=p,b[12]=m,b[13]=_,b[14]=y,b[15]=E,b}function V5(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=t[6],f=t[7],h=t[8],p=t[9],m=t[10],_=t[11],y=t[12],E=t[13],b=t[14],S=t[15],A=r*u-n*o,R=r*c-i*o,M=r*f-a*o,P=n*c-i*u,I=n*f-a*u,w=i*f-a*c,U=h*E-p*y,re=h*b-m*y,K=h*S-_*y,H=p*b-m*E,x=p*S-_*E,N=m*S-_*b,j=A*N-R*x+M*H+P*K-I*re+w*U;return j?(j=1/j,e[0]=(u*N-c*x+f*H)*j,e[1]=(i*x-n*N-a*H)*j,e[2]=(E*w-b*I+S*P)*j,e[3]=(m*I-p*w-_*P)*j,e[4]=(c*K-o*N-f*re)*j,e[5]=(r*N-i*K+a*re)*j,e[6]=(b*M-y*w-S*R)*j,e[7]=(h*w-m*M+_*R)*j,e[8]=(o*x-u*K+f*U)*j,e[9]=(n*K-r*x-a*U)*j,e[10]=(y*I-E*M+S*A)*j,e[11]=(p*M-h*I-_*A)*j,e[12]=(u*re-o*H-c*U)*j,e[13]=(r*H-n*re+i*U)*j,e[14]=(E*R-y*P-b*A)*j,e[15]=(h*P-p*R+m*A)*j,e):null}function Ih(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],u=t[4],c=t[5],f=t[6],h=t[7],p=t[8],m=t[9],_=t[10],y=t[11],E=t[12],b=t[13],S=t[14],A=t[15],R=r[0],M=r[1],P=r[2],I=r[3];return e[0]=R*n+M*u+P*p+I*E,e[1]=R*i+M*c+P*m+I*b,e[2]=R*a+M*f+P*_+I*S,e[3]=R*o+M*h+P*y+I*A,R=r[4],M=r[5],P=r[6],I=r[7],e[4]=R*n+M*u+P*p+I*E,e[5]=R*i+M*c+P*m+I*b,e[6]=R*a+M*f+P*_+I*S,e[7]=R*o+M*h+P*y+I*A,R=r[8],M=r[9],P=r[10],I=r[11],e[8]=R*n+M*u+P*p+I*E,e[9]=R*i+M*c+P*m+I*b,e[10]=R*a+M*f+P*_+I*S,e[11]=R*o+M*h+P*y+I*A,R=r[12],M=r[13],P=r[14],I=r[15],e[12]=R*n+M*u+P*p+I*E,e[13]=R*i+M*c+P*m+I*b,e[14]=R*a+M*f+P*_+I*S,e[15]=R*o+M*h+P*y+I*A,e}function sy(e,t,r){var n=r[0],i=r[1],a=r[2],o,u,c,f,h,p,m,_,y,E,b,S;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*a+t[12],e[13]=t[1]*n+t[5]*i+t[9]*a+t[13],e[14]=t[2]*n+t[6]*i+t[10]*a+t[14],e[15]=t[3]*n+t[7]*i+t[11]*a+t[15]):(o=t[0],u=t[1],c=t[2],f=t[3],h=t[4],p=t[5],m=t[6],_=t[7],y=t[8],E=t[9],b=t[10],S=t[11],e[0]=o,e[1]=u,e[2]=c,e[3]=f,e[4]=h,e[5]=p,e[6]=m,e[7]=_,e[8]=y,e[9]=E,e[10]=b,e[11]=S,e[12]=o*n+h*i+y*a+t[12],e[13]=u*n+p*i+E*a+t[13],e[14]=c*n+m*i+b*a+t[14],e[15]=f*n+_*i+S*a+t[15]),e}function uy(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function hC(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],o=t[5],u=t[6],c=t[7],f=t[8],h=t[9],p=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+f*n,e[5]=o*i+h*n,e[6]=u*i+p*n,e[7]=c*i+m*n,e[8]=f*i-a*n,e[9]=h*i-o*n,e[10]=p*i-u*n,e[11]=m*i-c*n,e}function H5(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],u=t[2],c=t[3],f=t[8],h=t[9],p=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-f*n,e[1]=o*i-h*n,e[2]=u*i-p*n,e[3]=c*i-m*n,e[8]=a*n+f*i,e[9]=o*n+h*i,e[10]=u*n+p*i,e[11]=c*n+m*i,e}function X5(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],u=t[2],c=t[3],f=t[4],h=t[5],p=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+f*n,e[1]=o*i+h*n,e[2]=u*i+p*n,e[3]=c*i+m*n,e[4]=f*i-a*n,e[5]=h*i-o*n,e[6]=p*i-u*n,e[7]=m*i-c*n,e}function dK(e,t,r,n,i){var a=1/Math.tan(t/2);if(e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0){var o=1/(n-i);e[10]=(i+n)*o,e[14]=2*i*n*o}else e[10]=-1,e[14]=-2*n;return e}var hK=dK;function Q4(e,t){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],u=e[5],c=e[6],f=e[7],h=e[8],p=e[9],m=e[10],_=e[11],y=e[12],E=e[13],b=e[14],S=e[15],A=t[0],R=t[1],M=t[2],P=t[3],I=t[4],w=t[5],U=t[6],re=t[7],K=t[8],H=t[9],x=t[10],N=t[11],j=t[12],fe=t[13],O=t[14],k=t[15];return Math.abs(r-A)<=Ki*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(n-R)<=Ki*Math.max(1,Math.abs(n),Math.abs(R))&&Math.abs(i-M)<=Ki*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(a-P)<=Ki*Math.max(1,Math.abs(a),Math.abs(P))&&Math.abs(o-I)<=Ki*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(u-w)<=Ki*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(c-U)<=Ki*Math.max(1,Math.abs(c),Math.abs(U))&&Math.abs(f-re)<=Ki*Math.max(1,Math.abs(f),Math.abs(re))&&Math.abs(h-K)<=Ki*Math.max(1,Math.abs(h),Math.abs(K))&&Math.abs(p-H)<=Ki*Math.max(1,Math.abs(p),Math.abs(H))&&Math.abs(m-x)<=Ki*Math.max(1,Math.abs(m),Math.abs(x))&&Math.abs(_-N)<=Ki*Math.max(1,Math.abs(_),Math.abs(N))&&Math.abs(y-j)<=Ki*Math.max(1,Math.abs(y),Math.abs(j))&&Math.abs(E-fe)<=Ki*Math.max(1,Math.abs(E),Math.abs(fe))&&Math.abs(b-O)<=Ki*Math.max(1,Math.abs(b),Math.abs(O))&&Math.abs(S-k)<=Ki*Math.max(1,Math.abs(S),Math.abs(k))}function hm(){var e=new So(3);return So!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Qo(e,t,r){var n=new So(3);return n[0]=e,n[1]=t,n[2]=r,n}function pK(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function vK(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function pm(e,t){var r=t[0],n=t[1],i=t[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function mK(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function _K(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],u=r[1],c=r[2];return e[0]=i*c-a*u,e[1]=a*o-n*c,e[2]=n*u-i*o,e}function t0(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return o=o||1,e[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/o,e[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,e[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,e}function J4(e,t){var r=e[0],n=e[1],i=e[2],a=t[0],o=t[1],u=t[2],c=Math.sqrt((r*r+n*n+i*i)*(a*a+o*o+u*u)),f=c&&mK(e,t)/c;return Math.acos(Math.min(Math.max(f,-1),1))}var eP=pK;(function(){var e=hm();return function(t,r,n,i,a,o){var u,c;for(r||(r=3),n||(n=0),i?c=Math.min(i*r+n,t.length):c=t.length,u=n;u<c;u+=r)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],a(e,e,o),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}})();function G5(){var e=new So(4);return So!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function gK(e,t,r,n){var i=new So(4);return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}function yK(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function pC(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,e}(function(){var e=G5();return function(t,r,n,i,a,o){var u,c;for(r||(r=4),n||(n=0),i?c=Math.min(i*r+n,t.length):c=t.length,u=n;u<c;u+=r)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],a(e,e,o),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}})();function wa(){var e=new So(2);return So!=Float32Array&&(e[0]=0,e[1]=0),e}function AR(e,t){var r=new So(2);return r[0]=e,r[1]=t,r}function tx(e,t){return e[0]=t[0],e[1]=t[1],e}function EK(e,t,r){return e[0]=t,e[1]=r,e}function Ql(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function xR(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function bK(e,t){return e[0]=-t[0],e[1]=-t[1],e}function ly(e,t){var r=t[0],n=t[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function RR(e,t){return e[0]*t[0]+e[1]*t[1]}function TK(e,t,r,n){var i=t[0],a=t[1];return e[0]=i+n*(r[0]-i),e[1]=a+n*(r[1]-a),e}var q5=xR;(function(){var e=wa();return function(t,r,n,i,a,o){var u,c;for(r||(r=2),n||(n=0),i?c=Math.min(i*r+n,t.length):c=t.length,u=n;u<c;u+=r)e[0]=t[u],e[1]=t[u+1],a(e,e,o),t[u]=e[0],t[u+1]=e[1];return t}})();class SK{constructor(){B(this,"viewport",void 0),B(this,"overridedViewProjectionMatrix",void 0),B(this,"viewMatrixInverse",void 0),B(this,"cameraPosition",void 0)}init(){}update(t){this.viewport=t,this.viewMatrixInverse=dC(),V5(this.viewMatrixInverse,t.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}getProjectionMatrix(){return this.viewport.getProjectionMatrix()}getModelMatrix(){return this.viewport.getModelMatrix()}getViewMatrix(){return this.viewport.getViewMatrix()}getViewMatrixUncentered(){return this.viewport.getViewMatrixUncentered()}getViewProjectionMatrixUncentered(){return this.viewport.getViewProjectionMatrixUncentered()}getViewProjectionMatrix(){return this.overridedViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}getZoom(){return this.viewport.getZoom()}getZoomScale(){return this.viewport.getZoomScale()}getCenter(){const[t,r]=this.viewport.getCenter();return[t,r]}getFocalDistance(){return this.viewport.getFocalDistance()}getCameraPosition(){return this.cameraPosition}projectFlat(t,r){return this.viewport.projectFlat(t,r)}setViewProjectionMatrix(t){this.overridedViewProjectionMatrix=t}}const AK={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"};class xK{constructor(){B(this,"container",void 0),B(this,"controlCorners",void 0),B(this,"controlContainer",void 0),B(this,"scene",void 0),B(this,"mapsService",void 0),B(this,"controls",[]),B(this,"unAddControls",[])}init(t,r){this.container=t.container,this.scene=r,this.mapsService=r.mapService,this.initControlPos()}addControl(t,r){r.mapService.map?(t.addTo(this.scene),this.controls.push(t)):this.unAddControls.push(t)}getControlByName(t){return this.controls.find(r=>r.controlOption.name===t)}removeControl(t){const r=this.controls.indexOf(t);return r>-1&&this.controls.splice(r,1),t.remove(),this}addControls(){this.unAddControls.forEach(t=>{t.addTo(this.scene),this.controls.push(t)}),this.unAddControls=[]}destroy(){for(const t of this.controls)t.remove();this.controls=[],this.clearControlPos()}initControlPos(){const t=this.controlCorners={},r="l7-",n=this.controlContainer=ai("div",r+"control-container",this.container);function i(o=[]){const u=o.map(c=>r+c).join(" ");t[o.filter(c=>!["row","column"].includes(c)).join("")]=ai("div",u,n)}function a(o){return[...o.replace(/^(top|bottom|left|right|center)/,"$1-").split("-"),AK[o]]}Object.values(ay).forEach(o=>{i(a(o))}),this.checkCornerOverlap()}clearControlPos(){for(const t in this.controlCorners)this.controlCorners[t]&&Pu(this.controlCorners[t]);this.controlContainer&&Pu(this.controlContainer)}checkCornerOverlap(){const t=window.MutationObserver;if(t)for(const r of Object.keys(this.controlCorners)){const n=r.match(/^(top|bottom)(left|right)$/);if(n){const[,i,a]=n,o=this.controlCorners[`${i}${a}`];new t(([{target:c}])=>{o&&(o.style[i]=c.clientHeight+"px")}).observe(this.controlCorners[`${a}${i}`],{childList:!0,attributes:!0})}}}}class RK{constructor(){B(this,"container",void 0),B(this,"scene",void 0),B(this,"mapsService",void 0),B(this,"markers",[]),B(this,"markerLayers",[]),B(this,"unAddMarkers",[]),B(this,"unAddMarkerLayers",[])}addMarkerLayer(t){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(t),t.addTo(this.scene)):this.unAddMarkerLayers.push(t)}removeMarkerLayer(t){t.destroy(),this.markerLayers.indexOf(t);const r=this.markerLayers.indexOf(t);r>-1&&this.markerLayers.splice(r,1)}addMarker(t){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(t),t.addTo(this.scene)):this.unAddMarkers.push(t)}addMarkers(){this.unAddMarkers.forEach(t=>{t.addTo(this.scene),this.markers.push(t)}),this.unAddMarkers=[]}addMarkerLayers(){this.unAddMarkerLayers.forEach(t=>{this.markerLayers.push(t),t.addTo(this.scene)}),this.unAddMarkers=[]}removeMarker(t){t.remove(),this.markers.indexOf(t);const r=this.markers.indexOf(t);r>-1&&this.markers.splice(r,1)}removeAllMarkers(){this.destroy()}init(t){this.scene=t,this.mapsService=t.mapService}destroy(){this.markers.forEach(t=>{t.remove()}),this.markers=[],this.markerLayers.forEach(t=>{t.destroy()}),this.markerLayers=[]}removeMakerLayerMarker(t){t.destroy()}}class CK{constructor(){B(this,"scene",void 0),B(this,"mapsService",void 0),B(this,"popups",[]),B(this,"unAddPopups",[])}get isMarkerReady(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}removePopup(t){t!=null&&t.isOpen()&&t.remove();const r=this.popups.indexOf(t);r>-1&&this.popups.splice(r,1);const n=this.unAddPopups.indexOf(t);n>-1&&this.unAddPopups.splice(n,1)}destroy(){this.popups.forEach(t=>t.remove())}addPopup(t){t&&t.getOptions().autoClose&&[...this.popups,...this.unAddPopups].forEach(r=>{r.getOptions().autoClose&&this.removePopup(r)}),this.isMarkerReady?(t.addTo(this.scene),this.popups.push(t)):this.unAddPopups.push(t),t.on("close",()=>{this.removePopup(t)})}initPopup(){this.unAddPopups.length&&this.unAddPopups.forEach(t=>{this.addPopup(t),this.unAddPopups=[]})}init(t){this.scene=t,this.mapsService=t.mapService}}const OK={MapToken:" Demo  Token,  Token   https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox https://docs.mapbox.com/help/glossary/access-token/",SDK:"mapbox-gl apiL7"},{merge:MK}=Ln,wK={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},NK={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:yE.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0};class IK{constructor(){B(this,"sceneConfigCache",{}),B(this,"layerConfigCache",{}),B(this,"layerAttributeConfigCache",{})}getSceneConfig(t){return this.sceneConfigCache[t]}getSceneWarninfo(t){return OK[t]}setSceneConfig(t,r){this.sceneConfigCache[t]=Xe(Xe({},wK),r)}getLayerConfig(t){return this.layerConfigCache[t]}setLayerConfig(t,r,n){this.layerConfigCache[r]=Xe({},MK({},this.sceneConfigCache[t],NK,n))}getAttributeConfig(t){return this.layerAttributeConfigCache[t]}setAttributeConfig(t,r){this.layerAttributeConfigCache[t]=Xe(Xe({},this.layerAttributeConfigCache[t]),r)}clean(){this.sceneConfigCache={},this.layerConfigCache={}}}const rx=Math.PI/180,PK=512,tP=4003e4;function rP({latitude:e=0,zoom:t=0,scale:r,highPrecision:n=!1,flipY:i=!1}){r=r!==void 0?r:Math.pow(2,t);const a={},o=PK*r,u=Math.cos(e*rx),c=o/360,f=c/u,h=o/tP/u;if(a.pixelsPerMeter=[h,-h,h],a.metersPerPixel=[1/h,-1/h,1/h],a.pixelsPerDegree=[c,-f,h],a.degreesPerPixel=[1/c,-1/f,1/h],n){const p=rx*Math.tan(e*rx)/u,m=c*p/2,_=o/tP*p,y=_/f*h;a.pixelsPerDegree2=[0,-m,_],a.pixelsPerMeter2=[y,0,y],i&&(a.pixelsPerDegree2[1]=-a.pixelsPerDegree2[1],a.pixelsPerMeter2[1]=-a.pixelsPerMeter2[1])}return i&&(a.pixelsPerMeter[1]=-a.pixelsPerMeter[1],a.metersPerPixel[1]=-a.metersPerPixel[1],a.pixelsPerDegree[1]=-a.pixelsPerDegree[1],a.degreesPerPixel[1]=-a.degreesPerPixel[1]),a}const DK=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];class LK{constructor(t){B(this,"needRefresh",!0),B(this,"coordinateSystem",void 0),B(this,"viewportCenter",void 0),B(this,"viewportCenterProjection",void 0),B(this,"pixelsPerDegree",void 0),B(this,"pixelsPerDegree2",void 0),B(this,"pixelsPerMeter",void 0),this.cameraService=t}refresh(t){const r=this.cameraService.getZoom(),n=t||this.cameraService.getCenter(),{pixelsPerMeter:i,pixelsPerDegree:a}=rP({latitude:n[1],zoom:r});this.viewportCenter=n,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=i,this.pixelsPerDegree=a,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===oy.LNGLAT?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===oy.LNGLAT_OFFSET&&this.calculateLnglatOffset(n,r),this.needRefresh=!1}getCoordinateSystem(){return this.coordinateSystem}setCoordinateSystem(t){this.coordinateSystem=t}getViewportCenter(){return this.viewportCenter}setViewportCenter(t){this.refresh(t)}getViewportCenterProjection(){return this.viewportCenterProjection}getPixelsPerDegree(){return this.pixelsPerDegree}getPixelsPerDegree2(){return this.pixelsPerDegree2}getPixelsPerMeter(){return this.pixelsPerMeter}calculateLnglatOffset(t,r,n,i){const{pixelsPerMeter:a,pixelsPerDegree:o,pixelsPerDegree2:u}=rP({latitude:t[1],zoom:r,scale:n,flipY:i,highPrecision:!0});let c=this.cameraService.getViewMatrix();const f=this.cameraService.getProjectionMatrix();let h=Ih([],f,c);const p=this.cameraService.projectFlat([Math.fround(t[0]),Math.fround(t[1])],Math.pow(2,r));this.viewportCenterProjection=pC([],[p[0],p[1],0,1],h),c=this.cameraService.getViewMatrixUncentered()||c,h=Ih([],f,c),h=Ih([],h,DK),this.cameraService.setViewProjectionMatrix(h),this.pixelsPerMeter=a,this.pixelsPerDegree=o,this.pixelsPerDegree2=u}}class BK extends La.EventEmitter{constructor(...t){super(...t),B(this,"renderMap",new Map),B(this,"enable",!1),B(this,"renderEnable",!1),B(this,"cacheLogs",{})}setEnable(t){this.enable=!!t}log(t,r){if(!this.enable)return;const n=t.split(".");let i=null;n.forEach((a,o)=>{i!==null?(i[a]||(i[a]={}),o!==n.length-1&&(i=i[a])):(this.cacheLogs[a]||(this.cacheLogs[a]={}),o!==n.length-1&&(i=this.cacheLogs[a])),o===n.length-1&&(i[a]=Xe(Xe({time:Date.now()},i[a]),r))})}getLog(t){switch(typeof t){case"string":return this.cacheLogs[t];case"object":return t.map(r=>this.cacheLogs[r]).filter(r=>r!==void 0);case"undefined":return this.cacheLogs}}removeLog(t){delete this.cacheLogs[t]}generateRenderUid(){return this.renderEnable?b$():""}renderDebug(t){this.renderEnable=t}renderStart(t){if(!this.renderEnable||!this.enable)return;const r=this.renderMap.get(t)||{};this.renderMap.set(t,Xe(Xe({},r),{},{renderUid:t,renderStart:Date.now()}))}renderEnd(t){if(!this.renderEnable||!this.enable)return;const r=this.renderMap.get(t);if(r){const n=r.renderStart,i=Date.now();this.emit("renderEnd",Xe(Xe({},r),{},{renderEnd:i,renderDuration:i-n})),this.renderMap.delete(t)}}destroy(){this.cacheLogs=null,this.renderMap.clear()}}var nx={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var nP;function FK(){return nP||(nP=1,(function(e){(function(t,r,n,i){var a=["","webkit","Moz","MS","ms","o"],o=r.createElement("div"),u="function",c=Math.round,f=Math.abs,h=Date.now;function p(G,Z,he){return setTimeout(R(G,he),Z)}function m(G,Z,he){return Array.isArray(G)?(_(G,he[Z],he),!0):!1}function _(G,Z,he){var Ve;if(G)if(G.forEach)G.forEach(Z,he);else if(G.length!==i)for(Ve=0;Ve<G.length;)Z.call(he,G[Ve],Ve,G),Ve++;else for(Ve in G)G.hasOwnProperty(Ve)&&Z.call(he,G[Ve],Ve,G)}function y(G,Z,he){var Ve="DEPRECATED METHOD: "+Z+`
`+he+` AT 
`;return function(){var yt=new Error("get-stack-trace"),Ut=yt&&yt.stack?yt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",wr=t.console&&(t.console.warn||t.console.log);return wr&&wr.call(t.console,Ve,Ut),G.apply(this,arguments)}}var E;typeof Object.assign!="function"?E=function(Z){if(Z===i||Z===null)throw new TypeError("Cannot convert undefined or null to object");for(var he=Object(Z),Ve=1;Ve<arguments.length;Ve++){var yt=arguments[Ve];if(yt!==i&&yt!==null)for(var Ut in yt)yt.hasOwnProperty(Ut)&&(he[Ut]=yt[Ut])}return he}:E=Object.assign;var b=y(function(Z,he,Ve){for(var yt=Object.keys(he),Ut=0;Ut<yt.length;)(!Ve||Ve&&Z[yt[Ut]]===i)&&(Z[yt[Ut]]=he[yt[Ut]]),Ut++;return Z},"extend","Use `assign`."),S=y(function(Z,he){return b(Z,he,!0)},"merge","Use `assign`.");function A(G,Z,he){var Ve=Z.prototype,yt;yt=G.prototype=Object.create(Ve),yt.constructor=G,yt._super=Ve,he&&E(yt,he)}function R(G,Z){return function(){return G.apply(Z,arguments)}}function M(G,Z){return typeof G==u?G.apply(Z&&Z[0]||i,Z):G}function P(G,Z){return G===i?Z:G}function I(G,Z,he){_(K(Z),function(Ve){G.addEventListener(Ve,he,!1)})}function w(G,Z,he){_(K(Z),function(Ve){G.removeEventListener(Ve,he,!1)})}function U(G,Z){for(;G;){if(G==Z)return!0;G=G.parentNode}return!1}function re(G,Z){return G.indexOf(Z)>-1}function K(G){return G.trim().split(/\s+/g)}function H(G,Z,he){if(G.indexOf&&!he)return G.indexOf(Z);for(var Ve=0;Ve<G.length;){if(he&&G[Ve][he]==Z||!he&&G[Ve]===Z)return Ve;Ve++}return-1}function x(G){return Array.prototype.slice.call(G,0)}function N(G,Z,he){for(var Ve=[],yt=[],Ut=0;Ut<G.length;){var wr=G[Ut][Z];H(yt,wr)<0&&Ve.push(G[Ut]),yt[Ut]=wr,Ut++}return Ve=Ve.sort(function(Un,qn){return Un[Z]>qn[Z]}),Ve}function j(G,Z){for(var he,Ve,yt=Z[0].toUpperCase()+Z.slice(1),Ut=0;Ut<a.length;){if(he=a[Ut],Ve=he?he+yt:Z,Ve in G)return Ve;Ut++}return i}var fe=1;function O(){return fe++}function k(G){var Z=G.ownerDocument||G;return Z.defaultView||Z.parentWindow||t}var V=/mobile|tablet|ip(ad|hone|od)|android/i,ee="ontouchstart"in t,oe=j(t,"PointerEvent")!==i,ge=ee&&V.test(navigator.userAgent),Ee="touch",De="pen",tt="mouse",$e="kinect",It=25,qe=1,St=2,ke=4,_e=8,ot=1,Ce=2,Wt=4,Xt=8,bt=16,Pt=Ce|Wt,Nt=Xt|bt,Jt=Pt|Nt,Br=["x","y"],se=["clientX","clientY"];function be(G,Z){var he=this;this.manager=G,this.callback=Z,this.element=G.element,this.target=G.options.inputTarget,this.domHandler=function(Ve){M(G.options.enable,[G])&&he.handler(Ve)},this.init()}be.prototype={handler:function(){},init:function(){this.evEl&&I(this.element,this.evEl,this.domHandler),this.evTarget&&I(this.target,this.evTarget,this.domHandler),this.evWin&&I(k(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(k(this.element),this.evWin,this.domHandler)}};function Fe(G){var Z,he=G.options.inputClass;return he?Z=he:oe?Z=Cc:ge?Z=Gn:ee?Z=Wu:Z=Oo,new Z(G,F)}function F(G,Z,he){var Ve=he.pointers.length,yt=he.changedPointers.length,Ut=Z&qe&&Ve-yt===0,wr=Z&(ke|_e)&&Ve-yt===0;he.isFirst=!!Ut,he.isFinal=!!wr,Ut&&(G.session={}),he.eventType=Z,vt(G,he),G.emit("hammer.input",he),G.recognize(he),G.session.prevInput=he}function vt(G,Z){var he=G.session,Ve=Z.pointers,yt=Ve.length;he.firstInput||(he.firstInput=sr(Z)),yt>1&&!he.firstMultiple?he.firstMultiple=sr(Z):yt===1&&(he.firstMultiple=!1);var Ut=he.firstInput,wr=he.firstMultiple,Zn=wr?wr.center:Ut.center,Un=Z.center=fr(Ve);Z.timeStamp=h(),Z.deltaTime=Z.timeStamp-Ut.timeStamp,Z.angle=oi(Zn,Un),Z.distance=En(Zn,Un),ht(he,Z),Z.offsetDirection=Fn(Z.deltaX,Z.deltaY);var qn=dr(Z.deltaTime,Z.deltaX,Z.deltaY);Z.overallVelocityX=qn.x,Z.overallVelocityY=qn.y,Z.overallVelocity=f(qn.x)>f(qn.y)?qn.x:qn.y,Z.scale=wr?mn(wr.pointers,Ve):1,Z.rotation=wr?Kr(wr.pointers,Ve):0,Z.maxPointers=he.prevInput?Z.pointers.length>he.prevInput.maxPointers?Z.pointers.length:he.prevInput.maxPointers:Z.pointers.length,Ft(he,Z);var qi=G.element;U(Z.srcEvent.target,qi)&&(qi=Z.srcEvent.target),Z.target=qi}function ht(G,Z){var he=Z.center,Ve=G.offsetDelta||{},yt=G.prevDelta||{},Ut=G.prevInput||{};(Z.eventType===qe||Ut.eventType===ke)&&(yt=G.prevDelta={x:Ut.deltaX||0,y:Ut.deltaY||0},Ve=G.offsetDelta={x:he.x,y:he.y}),Z.deltaX=yt.x+(he.x-Ve.x),Z.deltaY=yt.y+(he.y-Ve.y)}function Ft(G,Z){var he=G.lastInterval||Z,Ve=Z.timeStamp-he.timeStamp,yt,Ut,wr,Zn;if(Z.eventType!=_e&&(Ve>It||he.velocity===i)){var Un=Z.deltaX-he.deltaX,qn=Z.deltaY-he.deltaY,qi=dr(Ve,Un,qn);Ut=qi.x,wr=qi.y,yt=f(qi.x)>f(qi.y)?qi.x:qi.y,Zn=Fn(Un,qn),G.lastInterval=Z}else yt=he.velocity,Ut=he.velocityX,wr=he.velocityY,Zn=he.direction;Z.velocity=yt,Z.velocityX=Ut,Z.velocityY=wr,Z.direction=Zn}function sr(G){for(var Z=[],he=0;he<G.pointers.length;)Z[he]={clientX:c(G.pointers[he].clientX),clientY:c(G.pointers[he].clientY)},he++;return{timeStamp:h(),pointers:Z,center:fr(Z),deltaX:G.deltaX,deltaY:G.deltaY}}function fr(G){var Z=G.length;if(Z===1)return{x:c(G[0].clientX),y:c(G[0].clientY)};for(var he=0,Ve=0,yt=0;yt<Z;)he+=G[yt].clientX,Ve+=G[yt].clientY,yt++;return{x:c(he/Z),y:c(Ve/Z)}}function dr(G,Z,he){return{x:Z/G||0,y:he/G||0}}function Fn(G,Z){return G===Z?ot:f(G)>=f(Z)?G<0?Ce:Wt:Z<0?Xt:bt}function En(G,Z,he){he||(he=Br);var Ve=Z[he[0]]-G[he[0]],yt=Z[he[1]]-G[he[1]];return Math.sqrt(Ve*Ve+yt*yt)}function oi(G,Z,he){he||(he=Br);var Ve=Z[he[0]]-G[he[0]],yt=Z[he[1]]-G[he[1]];return Math.atan2(yt,Ve)*180/Math.PI}function Kr(G,Z){return oi(Z[1],Z[0],se)+oi(G[1],G[0],se)}function mn(G,Z){return En(Z[0],Z[1],se)/En(G[0],G[1],se)}var Hi={mousedown:qe,mousemove:St,mouseup:ke},ra="mousedown",Ba="mousemove mouseup";function Oo(){this.evEl=ra,this.evWin=Ba,this.pressed=!1,be.apply(this,arguments)}A(Oo,be,{handler:function(Z){var he=Hi[Z.type];he&qe&&Z.button===0&&(this.pressed=!0),he&St&&Z.which!==1&&(he=ke),this.pressed&&(he&ke&&(this.pressed=!1),this.callback(this.manager,he,{pointers:[Z],changedPointers:[Z],pointerType:tt,srcEvent:Z}))}});var Kf={pointerdown:qe,pointermove:St,pointerup:ke,pointercancel:_e,pointerout:_e},Qf={2:Ee,3:De,4:tt,5:$e},Zs="pointerdown",Mo="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Zs="MSPointerDown",Mo="MSPointerMove MSPointerUp MSPointerCancel");function Cc(){this.evEl=Zs,this.evWin=Mo,be.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}A(Cc,be,{handler:function(Z){var he=this.store,Ve=!1,yt=Z.type.toLowerCase().replace("ms",""),Ut=Kf[yt],wr=Qf[Z.pointerType]||Z.pointerType,Zn=wr==Ee,Un=H(he,Z.pointerId,"pointerId");Ut&qe&&(Z.button===0||Zn)?Un<0&&(he.push(Z),Un=he.length-1):Ut&(ke|_e)&&(Ve=!0),!(Un<0)&&(he[Un]=Z,this.callback(this.manager,Ut,{pointers:he,changedPointers:[Z],pointerType:wr,srcEvent:Z}),Ve&&he.splice(Un,1))}});var Jf={touchstart:qe,touchmove:St,touchend:ke,touchcancel:_e},Ri="touchstart",Oc="touchstart touchmove touchend touchcancel";function qu(){this.evTarget=Ri,this.evWin=Oc,this.started=!1,be.apply(this,arguments)}A(qu,be,{handler:function(Z){var he=Jf[Z.type];if(he===qe&&(this.started=!0),!!this.started){var Ve=ed.call(this,Z,he);he&(ke|_e)&&Ve[0].length-Ve[1].length===0&&(this.started=!1),this.callback(this.manager,he,{pointers:Ve[0],changedPointers:Ve[1],pointerType:Ee,srcEvent:Z})}}});function ed(G,Z){var he=x(G.touches),Ve=x(G.changedTouches);return Z&(ke|_e)&&(he=N(he.concat(Ve),"identifier")),[he,Ve]}var gp={touchstart:qe,touchmove:St,touchend:ke,touchcancel:_e},eo="touchstart touchmove touchend touchcancel";function Gn(){this.evTarget=eo,this.targetIds={},be.apply(this,arguments)}A(Gn,be,{handler:function(Z){var he=gp[Z.type],Ve=Ci.call(this,Z,he);Ve&&this.callback(this.manager,he,{pointers:Ve[0],changedPointers:Ve[1],pointerType:Ee,srcEvent:Z})}});function Ci(G,Z){var he=x(G.touches),Ve=this.targetIds;if(Z&(qe|St)&&he.length===1)return Ve[he[0].identifier]=!0,[he,he];var yt,Ut,wr=x(G.changedTouches),Zn=[],Un=this.target;if(Ut=he.filter(function(qn){return U(qn.target,Un)}),Z===qe)for(yt=0;yt<Ut.length;)Ve[Ut[yt].identifier]=!0,yt++;for(yt=0;yt<wr.length;)Ve[wr[yt].identifier]&&Zn.push(wr[yt]),Z&(ke|_e)&&delete Ve[wr[yt].identifier],yt++;if(Zn.length)return[N(Ut.concat(Zn),"identifier"),Zn]}var cs=2500,Ks=25;function Wu(){be.apply(this,arguments);var G=R(this.handler,this);this.touch=new Gn(this.manager,G),this.mouse=new Oo(this.manager,G),this.primaryTouch=null,this.lastTouches=[]}A(Wu,be,{handler:function(Z,he,Ve){var yt=Ve.pointerType==Ee,Ut=Ve.pointerType==tt;if(!(Ut&&Ve.sourceCapabilities&&Ve.sourceCapabilities.firesTouchEvents)){if(yt)bn.call(this,he,Ve);else if(Ut&&Qs.call(this,Ve))return;this.callback(Z,he,Ve)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function bn(G,Z){G&qe?(this.primaryTouch=Z.changedPointers[0].identifier,Mc.call(this,Z)):G&(ke|_e)&&Mc.call(this,Z)}function Mc(G){var Z=G.changedPointers[0];if(Z.identifier===this.primaryTouch){var he={x:Z.clientX,y:Z.clientY};this.lastTouches.push(he);var Ve=this.lastTouches,yt=function(){var Ut=Ve.indexOf(he);Ut>-1&&Ve.splice(Ut,1)};setTimeout(yt,cs)}}function Qs(G){for(var Z=G.srcEvent.clientX,he=G.srcEvent.clientY,Ve=0;Ve<this.lastTouches.length;Ve++){var yt=this.lastTouches[Ve],Ut=Math.abs(Z-yt.x),wr=Math.abs(he-yt.y);if(Ut<=Ks&&wr<=Ks)return!0}return!1}var $u=j(o.style,"touchAction"),wo=$u!==i,No="compute",fs="auto",to="manipulation",dn="none",ds="pan-x",hs="pan-y",ga=td();function ro(G,Z){this.manager=G,this.set(Z)}ro.prototype={set:function(G){G==No&&(G=this.compute()),wo&&this.manager.element.style&&ga[G]&&(this.manager.element.style[$u]=G),this.actions=G.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var G=[];return _(this.manager.recognizers,function(Z){M(Z.options.enable,[Z])&&(G=G.concat(Z.getTouchAction()))}),yp(G.join(" "))},preventDefaults:function(G){var Z=G.srcEvent,he=G.offsetDirection;if(this.manager.session.prevented){Z.preventDefault();return}var Ve=this.actions,yt=re(Ve,dn)&&!ga[dn],Ut=re(Ve,hs)&&!ga[hs],wr=re(Ve,ds)&&!ga[ds];if(yt){var Zn=G.pointers.length===1,Un=G.distance<2,qn=G.deltaTime<250;if(Zn&&Un&&qn)return}if(!(wr&&Ut)&&(yt||Ut&&he&Pt||wr&&he&Nt))return this.preventSrc(Z)},preventSrc:function(G){this.manager.session.prevented=!0,G.preventDefault()}};function yp(G){if(re(G,dn))return dn;var Z=re(G,ds),he=re(G,hs);return Z&&he?dn:Z||he?Z?ds:hs:re(G,to)?to:fs}function td(){if(!wo)return!1;var G={},Z=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(he){G[he]=Z?t.CSS.supports("touch-action",he):!0}),G}var Js=1,Xi=2,Fa=4,na=8,ti=na,Io=16,ia=32;function Oi(G){this.options=E({},this.defaults,G||{}),this.id=O(),this.manager=null,this.options.enable=P(this.options.enable,!0),this.state=Js,this.simultaneous={},this.requireFail=[]}Oi.prototype={defaults:{},set:function(G){return E(this.options,G),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(G){if(m(G,"recognizeWith",this))return this;var Z=this.simultaneous;return G=Ku(G,this),Z[G.id]||(Z[G.id]=G,G.recognizeWith(this)),this},dropRecognizeWith:function(G){return m(G,"dropRecognizeWith",this)?this:(G=Ku(G,this),delete this.simultaneous[G.id],this)},requireFailure:function(G){if(m(G,"requireFailure",this))return this;var Z=this.requireFail;return G=Ku(G,this),H(Z,G)===-1&&(Z.push(G),G.requireFailure(this)),this},dropRequireFailure:function(G){if(m(G,"dropRequireFailure",this))return this;G=Ku(G,this);var Z=H(this.requireFail,G);return Z>-1&&this.requireFail.splice(Z,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(G){return!!this.simultaneous[G.id]},emit:function(G){var Z=this,he=this.state;function Ve(yt){Z.manager.emit(yt,G)}he<na&&Ve(Z.options.event+Yu(he)),Ve(Z.options.event),G.additionalEvent&&Ve(G.additionalEvent),he>=na&&Ve(Z.options.event+Yu(he))},tryEmit:function(G){if(this.canEmit())return this.emit(G);this.state=ia},canEmit:function(){for(var G=0;G<this.requireFail.length;){if(!(this.requireFail[G].state&(ia|Js)))return!1;G++}return!0},recognize:function(G){var Z=E({},G);if(!M(this.options.enable,[this,Z])){this.reset(),this.state=ia;return}this.state&(ti|Io|ia)&&(this.state=Js),this.state=this.process(Z),this.state&(Xi|Fa|na|Io)&&this.tryEmit(Z)},process:function(G){},getTouchAction:function(){},reset:function(){}};function Yu(G){return G&Io?"cancel":G&na?"end":G&Fa?"move":G&Xi?"start":""}function Zu(G){return G==bt?"down":G==Xt?"up":G==Ce?"left":G==Wt?"right":""}function Ku(G,Z){var he=Z.manager;return he?he.get(G):G}function Gi(){Oi.apply(this,arguments)}A(Gi,Oi,{defaults:{pointers:1},attrTest:function(G){var Z=this.options.pointers;return Z===0||G.pointers.length===Z},process:function(G){var Z=this.state,he=G.eventType,Ve=Z&(Xi|Fa),yt=this.attrTest(G);return Ve&&(he&_e||!yt)?Z|Io:Ve||yt?he&ke?Z|na:Z&Xi?Z|Fa:Xi:ia}});function mi(){Gi.apply(this,arguments),this.pX=null,this.pY=null}A(mi,Gi,{defaults:{event:"pan",threshold:10,pointers:1,direction:Jt},getTouchAction:function(){var G=this.options.direction,Z=[];return G&Pt&&Z.push(hs),G&Nt&&Z.push(ds),Z},directionTest:function(G){var Z=this.options,he=!0,Ve=G.distance,yt=G.direction,Ut=G.deltaX,wr=G.deltaY;return yt&Z.direction||(Z.direction&Pt?(yt=Ut===0?ot:Ut<0?Ce:Wt,he=Ut!=this.pX,Ve=Math.abs(G.deltaX)):(yt=wr===0?ot:wr<0?Xt:bt,he=wr!=this.pY,Ve=Math.abs(G.deltaY))),G.direction=yt,he&&Ve>Z.threshold&&yt&Z.direction},attrTest:function(G){return Gi.prototype.attrTest.call(this,G)&&(this.state&Xi||!(this.state&Xi)&&this.directionTest(G))},emit:function(G){this.pX=G.deltaX,this.pY=G.deltaY;var Z=Zu(G.direction);Z&&(G.additionalEvent=this.options.event+Z),this._super.emit.call(this,G)}});function Po(){Gi.apply(this,arguments)}A(Po,Gi,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[dn]},attrTest:function(G){return this._super.attrTest.call(this,G)&&(Math.abs(G.scale-1)>this.options.threshold||this.state&Xi)},emit:function(G){if(G.scale!==1){var Z=G.scale<1?"in":"out";G.additionalEvent=this.options.event+Z}this._super.emit.call(this,G)}});function Qu(){Oi.apply(this,arguments),this._timer=null,this._input=null}A(Qu,Oi,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[fs]},process:function(G){var Z=this.options,he=G.pointers.length===Z.pointers,Ve=G.distance<Z.threshold,yt=G.deltaTime>Z.time;if(this._input=G,!Ve||!he||G.eventType&(ke|_e)&&!yt)this.reset();else if(G.eventType&qe)this.reset(),this._timer=p(function(){this.state=ti,this.tryEmit()},Z.time,this);else if(G.eventType&ke)return ti;return ia},reset:function(){clearTimeout(this._timer)},emit:function(G){this.state===ti&&(G&&G.eventType&ke?this.manager.emit(this.options.event+"up",G):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}});function ps(){Gi.apply(this,arguments)}A(ps,Gi,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[dn]},attrTest:function(G){return this._super.attrTest.call(this,G)&&(Math.abs(G.rotation)>this.options.threshold||this.state&Xi)}});function Ju(){Gi.apply(this,arguments)}A(Ju,Gi,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Pt|Nt,pointers:1},getTouchAction:function(){return mi.prototype.getTouchAction.call(this)},attrTest:function(G){var Z=this.options.direction,he;return Z&(Pt|Nt)?he=G.overallVelocity:Z&Pt?he=G.overallVelocityX:Z&Nt&&(he=G.overallVelocityY),this._super.attrTest.call(this,G)&&Z&G.offsetDirection&&G.distance>this.options.threshold&&G.maxPointers==this.options.pointers&&f(he)>this.options.velocity&&G.eventType&ke},emit:function(G){var Z=Zu(G.offsetDirection);Z&&this.manager.emit(this.options.event+Z,G),this.manager.emit(this.options.event,G)}});function aa(){Oi.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}A(aa,Oi,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[to]},process:function(G){var Z=this.options,he=G.pointers.length===Z.pointers,Ve=G.distance<Z.threshold,yt=G.deltaTime<Z.time;if(this.reset(),G.eventType&qe&&this.count===0)return this.failTimeout();if(Ve&&yt&&he){if(G.eventType!=ke)return this.failTimeout();var Ut=this.pTime?G.timeStamp-this.pTime<Z.interval:!0,wr=!this.pCenter||En(this.pCenter,G.center)<Z.posThreshold;this.pTime=G.timeStamp,this.pCenter=G.center,!wr||!Ut?this.count=1:this.count+=1,this._input=G;var Zn=this.count%Z.taps;if(Zn===0)return this.hasRequireFailures()?(this._timer=p(function(){this.state=ti,this.tryEmit()},Z.interval,this),Xi):ti}return ia},failTimeout:function(){return this._timer=p(function(){this.state=ia},this.options.interval,this),ia},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ti&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function ya(G,Z){return Z=Z||{},Z.recognizers=P(Z.recognizers,ya.defaults.preset),new el(G,Z)}ya.VERSION="2.0.7",ya.defaults={domEvents:!1,touchAction:No,enable:!0,inputTarget:null,inputClass:null,preset:[[ps,{enable:!1}],[Po,{enable:!1},["rotate"]],[Ju,{direction:Pt}],[mi,{direction:Pt},["swipe"]],[aa],[aa,{event:"doubletap",taps:2},["tap"]],[Qu]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Bi=1,vs=2;function el(G,Z){this.options=E({},ya.defaults,Z||{}),this.options.inputTarget=this.options.inputTarget||G,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=G,this.input=Fe(this),this.touchAction=new ro(this,this.options.touchAction),tl(this,!0),_(this.options.recognizers,function(he){var Ve=this.add(new he[0](he[1]));he[2]&&Ve.recognizeWith(he[2]),he[3]&&Ve.requireFailure(he[3])},this)}el.prototype={set:function(G){return E(this.options,G),G.touchAction&&this.touchAction.update(),G.inputTarget&&(this.input.destroy(),this.input.target=G.inputTarget,this.input.init()),this},stop:function(G){this.session.stopped=G?vs:Bi},recognize:function(G){var Z=this.session;if(!Z.stopped){this.touchAction.preventDefaults(G);var he,Ve=this.recognizers,yt=Z.curRecognizer;(!yt||yt&&yt.state&ti)&&(yt=Z.curRecognizer=null);for(var Ut=0;Ut<Ve.length;)he=Ve[Ut],Z.stopped!==vs&&(!yt||he==yt||he.canRecognizeWith(yt))?he.recognize(G):he.reset(),!yt&&he.state&(Xi|Fa|na)&&(yt=Z.curRecognizer=he),Ut++}},get:function(G){if(G instanceof Oi)return G;for(var Z=this.recognizers,he=0;he<Z.length;he++)if(Z[he].options.event==G)return Z[he];return null},add:function(G){if(m(G,"add",this))return this;var Z=this.get(G.options.event);return Z&&this.remove(Z),this.recognizers.push(G),G.manager=this,this.touchAction.update(),G},remove:function(G){if(m(G,"remove",this))return this;if(G=this.get(G),G){var Z=this.recognizers,he=H(Z,G);he!==-1&&(Z.splice(he,1),this.touchAction.update())}return this},on:function(G,Z){if(G!==i&&Z!==i){var he=this.handlers;return _(K(G),function(Ve){he[Ve]=he[Ve]||[],he[Ve].push(Z)}),this}},off:function(G,Z){if(G!==i){var he=this.handlers;return _(K(G),function(Ve){Z?he[Ve]&&he[Ve].splice(H(he[Ve],Z),1):delete he[Ve]}),this}},emit:function(G,Z){this.options.domEvents&&ms(G,Z);var he=this.handlers[G]&&this.handlers[G].slice();if(!(!he||!he.length)){Z.type=G,Z.preventDefault=function(){Z.srcEvent.preventDefault()};for(var Ve=0;Ve<he.length;)he[Ve](Z),Ve++}},destroy:function(){this.element&&tl(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function tl(G,Z){var he=G.element;if(he.style){var Ve;_(G.options.cssProps,function(yt,Ut){Ve=j(he.style,Ut),Z?(G.oldCssProps[Ve]=he.style[Ve],he.style[Ve]=yt):he.style[Ve]=G.oldCssProps[Ve]||""}),Z||(G.oldCssProps={})}}function ms(G,Z){var he=r.createEvent("Event");he.initEvent(G,!0,!0),he.gesture=Z,Z.target.dispatchEvent(he)}E(ya,{INPUT_START:qe,INPUT_MOVE:St,INPUT_END:ke,INPUT_CANCEL:_e,STATE_POSSIBLE:Js,STATE_BEGAN:Xi,STATE_CHANGED:Fa,STATE_ENDED:na,STATE_RECOGNIZED:ti,STATE_CANCELLED:Io,STATE_FAILED:ia,DIRECTION_NONE:ot,DIRECTION_LEFT:Ce,DIRECTION_RIGHT:Wt,DIRECTION_UP:Xt,DIRECTION_DOWN:bt,DIRECTION_HORIZONTAL:Pt,DIRECTION_VERTICAL:Nt,DIRECTION_ALL:Jt,Manager:el,Input:be,TouchAction:ro,TouchInput:Gn,MouseInput:Oo,PointerEventInput:Cc,TouchMouseInput:Wu,SingleTouchInput:qu,Recognizer:Oi,AttrRecognizer:Gi,Tap:aa,Pan:mi,Swipe:Ju,Pinch:Po,Rotate:ps,Press:Qu,on:I,off:w,each:_,merge:S,extend:b,assign:E,inherit:A,bindFn:R,prefixed:j});var rd=typeof t<"u"?t:typeof self<"u"?self:{};rd.Hammer=ya,e.exports?e.exports=ya:t[n]=ya})(window,document,"Hammer")})(nx)),nx.exports}var UK=FK();const Fv=$r(UK),kK={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"};class zK extends lC{get mapService(){return this.container.mapService}constructor(t){super(),B(this,"indragging",!1),B(this,"hammertime",void 0),B(this,"lastClickTime",0),B(this,"lastClickXY",[-1,-1]),B(this,"clickTimer",void 0),B(this,"$containter",void 0),B(this,"onDrag",r=>{const n=this.interactionEvent(r);n.type=kK[n.type],n.type==="dragging"?this.indragging=!0:this.indragging=!1,this.emit(Oa.Drag,n)}),B(this,"onHammer",r=>{r.srcEvent.stopPropagation();const n=this.interactionEvent(r);this.emit(Oa.Hover,n)}),B(this,"onTouch",r=>{const n=r.touches[0];this.onHover({clientX:n.clientX,clientY:n.clientY,type:"touchstart"})}),B(this,"onTouchEnd",r=>{if(r.changedTouches.length>0){const n=r.changedTouches[0];this.onHover({clientX:n.clientX,clientY:n.clientY,type:"touchend"})}}),B(this,"onTouchMove",r=>{const n=r.changedTouches[0];this.onHover({clientX:n.clientX,clientY:n.clientY,type:"touchmove"})}),B(this,"onHover",r=>{const{clientX:n,clientY:i}=r;let a=n,o=i;const u=r.type,c=this.mapService.getMapContainer();if(c){const{top:h,left:p}=c.getBoundingClientRect();a=a-p-c.clientLeft,o=o-h-c.clientTop}const f=this.mapService.containerToLngLat([a,o]);if(u==="click"){this.isDoubleTap(a,o,f);return}if(u==="touch"){this.isDoubleTap(a,o,f);return}u!=="click"&&u!=="dblclick"&&this.emit(Oa.Hover,{x:a,y:o,lngLat:f,type:u,target:r})}),this.container=t}init(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}destroy(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Oa.Hover)}triggerHover({x:t,y:r}){this.emit(Oa.Hover,{x:t,y:r})}triggerSelect(t){this.emit(Oa.Select,{featureId:t})}triggerActive(t){this.emit(Oa.Active,{featureId:t})}addEventListenerOnMap(){const t=this.mapService.getMapContainer();if(t){const r=new Fv.Manager(t);r.add(new Fv.Tap({event:"dblclick",taps:2})),r.add(new Fv.Tap({event:"click"})),r.add(new Fv.Pan({threshold:0,pointers:0})),r.add(new Fv.Press({})),r.on("dblclick click",this.onHammer),r.on("panstart panmove panend pancancel",this.onDrag),t.addEventListener("touchstart",this.onTouch),t.addEventListener("touchend",this.onTouchEnd),t.addEventListener("mousemove",this.onHover),t.addEventListener("touchmove",this.onTouchMove),t.addEventListener("mousedown",this.onHover,!0),t.addEventListener("mouseup",this.onHover),t.addEventListener("contextmenu",this.onHover),this.hammertime=r}}removeEventListenerOnMap(){const t=this.mapService.getMapContainer();t&&(t.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),t.removeEventListener("touchstart",this.onTouch),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("mousedown",this.onHover),t.removeEventListener("mouseup",this.onHover),t.removeEventListener("contextmenu",this.onHover))}interactionEvent(t){const{type:r,pointerType:n}=t;let i,a;n==="touch"?(a=Math.floor(t.pointers[0].clientY),i=Math.floor(t.pointers[0].clientX)):(a=Math.floor(t.srcEvent.y),i=Math.floor(t.srcEvent.x));const o=this.mapService.getMapContainer();if(o){const{top:c,left:f}=o.getBoundingClientRect();i-=f,a-=c}const u=this.mapService.containerToLngLat([i,a]);return{x:i,y:a,lngLat:u,type:r,target:t.srcEvent}}isDoubleTap(t,r,n){const i=new Date().getTime();let a="click";i-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-t)<10&&Math.abs(this.lastClickXY[1]-r)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),a="dblclick",this.emit(Oa.Hover,{x:t,y:r,lngLat:n,type:a})):(this.lastClickTime=i,this.lastClickXY=[t,r],this.clickTimer=setTimeout(()=>{a="click",this.emit(Oa.Hover,{x:t,y:r,lngLat:n,type:a})},400))}}let jK=0;function VK(e){let t=e;if(typeof e=="string"&&(t=document.getElementById(e)),t){const r=document.createElement("div");return r.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,r.id=`l7-scene-${jK++}`,r.classList.add("l7-scene"),t.appendChild(r),r}return null}function HK(e){var t;let r=!0;if((e==null||(t=e.target)===null||t===void 0?void 0:t.target)instanceof HTMLElement){var n;let a=e==null||(n=e.target)===null||n===void 0?void 0:n.target;for(;a;){var i;const o=Array.from(a.classList);if(o.includes("l7-marker")||o.includes("l7-popup")){r=!1;break}a=(i=a)===null||i===void 0?void 0:i.parentElement}}return r}let zm=(function(e){return e[e.SAMPLED=0]="SAMPLED",e[e.RENDER_TARGET=1]="RENDER_TARGET",e})({});class XK{constructor(t){var r=this;B(this,"pickedColors",void 0),B(this,"pickedTileLayers",[]),B(this,"pickingFBO",void 0),B(this,"width",0),B(this,"height",0),B(this,"alreadyInPicking",!1),B(this,"pickBufferScale",1),B(this,"pickFromPickingFBO",(function(){var n=Je(function*(i,{x:a,y:o,lngLat:u,type:c,target:f}){var h;let p=!1;const{readPixels:m,readPixelsAsync:_,getViewportSize:y,queryVerdorInfo:E}=r.rendererService,{width:b,height:S}=y(),{enableHighlight:A,enableSelect:R}=i.getLayerConfig(),M=a*Ca,P=o*Ca;if(M>b-1*Ca||M<0||P>S-1*Ca||P<0)return!1;let I;if(E()==="WebGPU"?I=yield _({x:Math.floor(M/r.pickBufferScale),y:Math.floor((S-(o+1)*Ca)/r.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:r.pickingFBO}):I=m({x:Math.floor(M/r.pickBufferScale),y:Math.floor((S-(o+1)*Ca)/r.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:r.pickingFBO}),r.pickedColors=I,I[0]!==0||I[1]!==0||I[2]!==0){const U=Cf(I),re=i.layerPickService.getFeatureById(U);U!==i.getCurrentPickId()&&c==="mousemove"&&(c="mouseenter");const K={x:a,y:o,type:c,lngLat:u,featureId:U,feature:re,target:f};re&&(p=!0,i.setCurrentPickId(U),r.triggerHoverOnLayer(i,K))}else{const U={x:a,y:o,lngLat:u,type:i.getCurrentPickId()!==null&&c==="mousemove"?"mouseout":"un"+c,featureId:null,target:f,feature:null};r.triggerHoverOnLayer(i,Xe(Xe({},U),{},{type:"unpick"})),r.triggerHoverOnLayer(i,U),i.setCurrentPickId(null)}if(A&&i.layerPickService.highlightPickedFeature(I),R&&c==="click"&&((h=I)===null||h===void 0?void 0:h.toString())!==[0,0,0,0].toString()){const U=Cf(I);i.getCurrentSelectedId()===null||U!==i.getCurrentSelectedId()?(i.layerPickService.selectFeature(I),i.setCurrentSelectedId(U)):(i.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),i.setCurrentSelectedId(null))}return p});return function(i,a){return n.apply(this,arguments)}})()),this.container=t}get mapService(){return this.container.mapService}get rendererService(){return this.container.rendererService}get configService(){return this.container.globalConfigService}get interactionService(){return this.container.interactionService}get layerService(){return this.container.layerService}init(t){const{createTexture2D:r,createFramebuffer:n,getViewportSize:i}=this.rendererService;let{width:a,height:o}=i();this.pickBufferScale=this.configService.getSceneConfig(t).pickBufferScale||1,a=Math.round(a/this.pickBufferScale),o=Math.round(o/this.pickBufferScale);const u=r({width:a,height:o,usage:zm.RENDER_TARGET,label:"Picking Texture"});this.pickingFBO=n({color:u,depth:!0,width:a,height:o}),this.interactionService.on(Oa.Hover,this.pickingAllLayer.bind(this))}boxPickLayer(t,r,n){var i=this;return Je(function*(){const{useFramebufferAsync:a,clear:o}=i.rendererService;i.resizePickingFBO(),t.hooks.beforePickingEncode.call(),yield a(i.pickingFBO,Je(function*(){o({framebuffer:i.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),t.renderModels({ispick:!0})})),t.hooks.afterPickingEncode.call();const u=yield i.pickBox(t,r);n(u)})()}pickBox(t,r){var n=this;return Je(function*(){const[i,a,o,u]=r.map(S=>{const A=S<0?0:S;return Math.floor(A*Ca/n.pickBufferScale)}),{readPixelsAsync:c,getViewportSize:f}=n.rendererService,{width:h,height:p}=f();if(i>(h-1)*Ca/n.pickBufferScale||o<0||a>(p-1)*Ca/n.pickBufferScale||u<0)return[];const m=Math.min(h/n.pickBufferScale,o)-i,_=Math.min(p/n.pickBufferScale,u)-a,y=yield c({x:i,y:Math.floor(p/n.pickBufferScale-(u+1)),width:m,height:_,data:new Uint8Array(m*_*4),framebuffer:n.pickingFBO}),E=[],b={};for(let S=0;S<y.length/4;S=S+1){const A=y.slice(S*4,S*4+4),R=Cf(A);if(R!==-1&&!b[R]){const M=t.layerPickService.getFeatureById(R);E.push(Xe(Xe({},M),{},{pickedFeatureIdx:R})),b[R]=!0}}return E})()}handleCursor(t,r){const{cursor:n="",cursorEnabled:i}=t.getLayerConfig();if(i){const o=this.mapService.getType()==="amap"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),u=o?.style.getPropertyValue("cursor");r==="unmousemove"&&u!==""?o?.style.setProperty("cursor",""):r==="mousemove"&&o?.style.setProperty("cursor",n)}}destroy(){this.pickingFBO.destroy(),this.pickingFBO=null}pickingAllLayer(t){var r=this;return Je(function*(){!r.layerService.needPick(t.type)||!r.isPickingAllLayer()||(r.alreadyInPicking=!0,yield r.pickingLayers(t),r.layerService.renderLayers(),r.alreadyInPicking=!1)})()}isPickingAllLayer(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}resizePickingFBO(){const{getViewportSize:t}=this.rendererService,{width:r,height:n}=t();(this.width!==r||this.height!==n)&&(this.pickingFBO.resize({width:Math.round(r/this.pickBufferScale),height:Math.round(n/this.pickBufferScale)}),this.width=r,this.height=n)}pickingLayers(t){var r=this;return Je(function*(){const{clear:n,useFramebufferAsync:i}=r.rendererService;r.resizePickingFBO();const a=r.layerService.getRenderList();for(const o of a.filter(u=>u.needPick(t.type)).reverse()){yield i(r.pickingFBO,Je(function*(){n({framebuffer:r.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),o.layerPickService.pickRender(t)}));const u=yield r.pickFromPickingFBO(o,t);if(r.layerService.pickedLayerId=u?+o.id:-1,u&&!o.getLayerConfig().enablePropagation)break}})()}triggerHoverOnLayer(t,r){HK(r)&&(this.handleCursor(t,r.type),t.emit(r.type,r))}}class GK{constructor(t=!0){B(this,"autoStart",void 0),B(this,"startTime",0),B(this,"oldTime",0),B(this,"running",!1),B(this,"elapsedTime",0),this.autoStart=t}start(){this.startTime=(typeof performance>"u"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const r=(typeof performance>"u"?Date:performance).now();t=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=t}return t}}const{throttle:iP}=Ln;class qK extends La.EventEmitter{get renderService(){return this.container.rendererService}get mapService(){return this.container.mapService}get debugService(){return this.container.debugService}constructor(t){super(),B(this,"pickedLayerId",-1),B(this,"clock",new GK),B(this,"alreadyInRendering",!1),B(this,"layers",[]),B(this,"layerList",[]),B(this,"layerRenderID",void 0),B(this,"sceneInited",!1),B(this,"animateInstanceCount",0),B(this,"shaderPicking",!0),B(this,"enableRender",!0),B(this,"reRender",iP(()=>{this.renderLayers()},32)),B(this,"throttleRenderLayers",iP(()=>{this.renderLayers()},16)),this.container=t}needPick(t){return this.updateLayerRenderList(),this.layerList.some(r=>r.needPick(t))}add(t){this.layers.push(t),this.sceneInited&&t.init().then(()=>{this.renderLayers()})}addMask(t){this.sceneInited&&t.init().then(()=>{this.renderLayers()})}initLayers(){var t=this;return Je(function*(){t.sceneInited=!0,t.layers.forEach((function(){var r=Je(function*(n){n.startInit||(yield n.init(),t.updateLayerRenderList())});return function(n){return r.apply(this,arguments)}})())})()}getSceneInited(){return this.sceneInited}getRenderList(){return this.layerList}getLayers(){return this.layers}getLayer(t){return this.layers.find(r=>r.id===t)}getLayerByName(t){return this.layers.find(r=>r.name===t)}remove(t,r){var n=this;return Je(function*(){if(r){r.layerChildren||(r.layerChildren=[]);const i=r.layerChildren.findIndex(a=>a.id===t.id);i>-1&&r.layerChildren.splice(i,1)}else{const i=n.layers.findIndex(a=>a.id===t.id);i>-1&&n.layers.splice(i,1)}t.destroy(),n.reRender(),n.emit("layerChange",n.layers)})()}removeAllLayers(){var t=this;return Je(function*(){t.destroy(),t.reRender()})()}setEnableRender(t){this.enableRender=t}renderLayers(){var t=this;return Je(function*(){if(t.alreadyInRendering||!t.enableRender)return;t.updateLayerRenderList();const r=t.debugService.generateRenderUid();t.debugService.renderStart(r),t.alreadyInRendering=!0,t.clear();for(const n of t.layerList)n.prerender();t.renderService.beginFrame();for(const n of t.layerList){const{enableMask:i}=n.getLayerConfig();n.masks.filter(a=>a.inited).length>0&&i&&t.renderMask(n.masks),n.getLayerConfig().enableMultiPassRenderer?yield n.renderMultiPass():n.render()}t.renderService.endFrame(),t.debugService.renderEnd(r),t.alreadyInRendering=!1})()}renderMask(t){let r=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});const n=t.length>1?bf.MULTIPLE:bf.SINGLE;for(const i of t)i.render({isStencil:!0,stencilType:n,stencilIndex:r++})}beforeRenderData(t){var r=this;return Je(function*(){(yield t.hooks.beforeRenderData.promise())&&r.renderLayers()})()}renderTileLayerMask(t){let r=0;const{enableMask:n=!0}=t.getLayerConfig();let i=t.tileMask?1:0;const a=t.masks.filter(u=>u.inited);i=i+(n?a.length:1);const o=i>1?bf.MULTIPLE:bf.SINGLE;if((t.tileMask||a.length&&n)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),a.length&&n)for(const u of a)u.render({isStencil:!0,stencilType:o,stencilIndex:r++});t.tileMask&&t.tileMask.render({isStencil:!0,stencilType:o,stencilIndex:r++,stencilOperation:yE.OR})}renderTileLayer(t){var r=this;return Je(function*(){r.renderTileLayerMask(t),t.getLayerConfig().enableMultiPassRenderer?yield t.renderMultiPass():yield t.render()})()}updateLayerRenderList(){this.layerList=[],this.layers.filter(t=>t.inited).filter(t=>t.isVisible()).sort((t,r)=>t.zIndex-r.zIndex).forEach(t=>{this.layerList.push(t)})}destroy(){this.layers.forEach(t=>{t.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}startAnimate(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}stopAnimate(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}getOESTextureFloat(){return this.renderService.extensionObject.OES_texture_float}enableShaderPick(){this.shaderPicking=!0}disableShaderPick(){this.shaderPicking=!1}getShaderPickStat(){return this.shaderPicking}clear(){const t=fn(this.mapService.bgColor);this.renderService.clear({color:t,depth:1,stencil:0,framebuffer:null})}runRender(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this))}stopRender(){window.cancelAnimationFrame(this.layerRenderID)}}function WK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qs(e,t){if(e==null)return{};var r,n,i=WK(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}const{isNil:$K}=Ln;class YK{constructor(t){B(this,"name",void 0),B(this,"type",void 0),B(this,"scale",void 0),B(this,"descriptor",void 0),B(this,"featureBufferLayout",[]),B(this,"needRescale",!1),B(this,"needRemapping",!1),B(this,"needRegenerateVertices",!1),B(this,"featureRange",{startIndex:0,endIndex:1/0}),B(this,"vertexAttribute",void 0),B(this,"defaultCallback",r=>{if(r.length===0){var n;return((n=this.scale)===null||n===void 0?void 0:n.defaultValues)||[]}return r.map((i,a)=>{var o;return((o=this.scale)===null||o===void 0?void 0:o.scalers[a].func)(i)})}),this.setProps(t)}setProps(t){Object.assign(this,t)}mapping(t){var r;if((r=this.scale)!==null&&r!==void 0&&r.callback){var n;const i=(n=this.scale)===null||n===void 0?void 0:n.callback(...t);if(!$K(i))return[i]}return this.defaultCallback(t)}resetDescriptor(){this.descriptor&&(this.descriptor.buffer.data=[])}}const ZK=["buffer","update","name"],KK=["buffer","update","name"],QK={[D.FLOAT]:4,[D.UNSIGNED_BYTE]:1,[D.UNSIGNED_SHORT]:2};class JK{constructor(t){B(this,"attributesAndIndices",void 0),B(this,"attributes",[]),B(this,"triangulation",void 0),B(this,"featureLayout",{sizePerElement:0,elements:[]}),this.rendererService=t}registerStyleAttribute(t){let r=this.getLayerStyleAttribute(t.name||"");return r?r.setProps(t):(r=new YK(t),this.attributes.push(r)),r}unRegisterStyleAttribute(t){const r=this.attributes.findIndex(n=>n.name===t);r>-1&&this.attributes.splice(r,1)}updateScaleAttribute(t){this.attributes.forEach(r=>{var n;const i=r.name,a=(n=r.scale)===null||n===void 0?void 0:n.field;(t[i]||a&&t[a])&&(r.needRescale=!0,r.needRemapping=!0,r.needRegenerateVertices=!0)})}updateStyleAttribute(t,r,n){let i=this.getLayerStyleAttribute(t);i||(i=this.registerStyleAttribute(Xe(Xe({},r),{},{name:t})));const{scale:a}=r;a&&i&&(i.scale=a,i.needRescale=!0,i.needRemapping=!0,i.needRegenerateVertices=!0,n&&n.featureRange&&(i.featureRange=n.featureRange))}getLayerStyleAttributes(){return this.attributes}getLayerStyleAttribute(t){return this.attributes.find(r=>r.name===t)}getLayerAttributeScale(t){var r;const n=this.getLayerStyleAttribute(t),i=n==null||(r=n.scale)===null||r===void 0?void 0:r.scalers;return i&&i[0]?i[0].func:null}updateAttributeByFeatureRange(t,r,n=0,i,a){const o=this.attributes.find(u=>u.name===t);if(o&&o.descriptor){const{descriptor:u}=o,{update:c,buffer:f,size:h=0}=u,p=QK[f.type||D.FLOAT];if(c){const{elements:m,sizePerElement:_}=this.featureLayout,y=m.slice(n,i);if(!y.length)return;const{offset:E}=y[0],b=E*h*p,S=y.map(({featureIdx:A,vertices:R,normals:M},P)=>{const I=R.length/_,w=[];for(let U=0;U<I;U++){const re=M?M.slice(U*3,U*3+3):[];w.push(...c(r[A],A,R.slice(U*_,U*_+_),P,re))}return w}).flat();o.vertexAttribute.updateBuffer({data:S,offset:b}),a?.emit(`legend:${t}`,a.getLegend(t))}}}createAttributesAndIndices(t,r,n,i){this.featureLayout={sizePerElement:0,elements:[]},r&&(this.triangulation=r);const a=this.attributes.map(E=>(E.resetDescriptor(),E.descriptor));let o=0,u=0;const c=[];let f=3;t.forEach((E,b)=>{const{indices:S,vertices:A,normals:R,size:M,indexes:P,count:I}=this.triangulation(E,n);typeof I=="number"&&(u+=I),S.forEach(U=>{c.push(U+o)}),f=M;const w=A.length/M;this.featureLayout.sizePerElement=f,this.featureLayout.elements.push({featureIdx:b,vertices:A,normals:R,offset:o}),o+=w;for(let U=0;U<w;U++){const re=R?.slice(U*3,U*3+3)||[],K=A.slice(U*M,U*M+M);let H=0;P&&P[U]!==void 0&&(H=P[U]),a.forEach((x,N)=>{x&&x.update&&x.buffer.data.push(...x.update(E,b,K,U,re,H))})}});const{createAttribute:h,createBuffer:p,createElements:m}=this.rendererService,_={};a.forEach((E,b)=>{if(E){const{buffer:S,update:A,name:R}=E,M=qs(E,ZK),P=h(Xe({buffer:p(S)},M));_[E.name||""]=P,this.attributes[b].vertexAttribute=P}});const y=m({data:c,type:D.UNSIGNED_INT,count:c.length});return this.attributesAndIndices={attributes:_,elements:y,count:u},Object.values(this.attributes).filter(E=>E.scale).forEach(E=>{const b=E.name;i?.emit(`legend:${b}`,i.getLegend(b))}),this.attributesAndIndices}createAttributes(t,r){this.featureLayout={sizePerElement:0,elements:[]},r&&(this.triangulation=r);const n=this.attributes.map(f=>(f.resetDescriptor(),f.descriptor));let i=0,a=3;t.forEach((f,h)=>{const{indices:p,vertices:m,normals:_,size:y,indexes:E}=this.triangulation(f);p.forEach(S=>{}),a=y;const b=m.length/y;this.featureLayout.sizePerElement=a,this.featureLayout.elements.push({featureIdx:h,vertices:m,normals:_,offset:i}),i+=b;for(let S=0;S<b;S++){const A=_?.slice(S*3,S*3+3)||[],R=m.slice(S*y,S*y+y);let M=0;E&&E[S]!==void 0&&(M=E[S]),n.forEach((P,I)=>{P&&P.update&&P.buffer.data.push(...P.update(f,h,R,S,A,M))})}});const{createAttribute:o,createBuffer:u}=this.rendererService,c={};return n.forEach((f,h)=>{if(f){const{buffer:p,update:m,name:_}=f,y=qs(f,KK),E=o(Xe({buffer:u(p)},y));c[f.name||""]=E,this.attributes[h].vertexAttribute=E}}),{attributes:c}}clearAllAttributes(){var t;this.attributes.forEach(r=>{r.vertexAttribute&&r.vertexAttribute.destroy()}),(t=this.attributesAndIndices)===null||t===void 0||t.elements.destroy(),this.attributes=[]}}function W5(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function u(h){try{f(n.next(h))}catch(p){o(p)}}function c(h){try{f(n.throw(h))}catch(p){o(p)}}function f(h){h.done?a(h.value):i(h.value).then(u,c)}f((n=n.apply(e,[])).next())})}function $5(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(h){return c([f,h])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){r.label=f[1];break}if(f[0]===6&&r.label<a[1]){r.label=a[1],a=f;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(f);break}a[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(h){f=[6,h],i=0}finally{n=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function vC(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function mC(e,t,r){if(arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}function Y5(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var CR={exports:{}},cy={exports:{}},jm={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(n){return n&&typeof n.length=="number"&&n.length>=0&&n.length%1===0}e.exports=t.default})(jm,jm.exports);var Da={},OR={exports:{}},MR={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(r){return function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];var a=n.pop();return r.call(this,n,a)}},e.exports=t.default})(MR,MR.exports);var Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});Sc.fallback=Z5;Sc.wrap=K5;var eQ=Sc.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,tQ=Sc.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,rQ=Sc.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function Z5(e){setTimeout(e,0)}function K5(e){return function(t){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];return e(function(){return t.apply(void 0,r)})}}var vm;eQ?vm=queueMicrotask:tQ?vm=setImmediate:rQ?vm=process.nextTick:vm=Z5;Sc.default=K5(vm);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r=MR.exports,n=u(r),i=Sc,a=u(i),o=Da;function u(p){return p&&p.__esModule?p:{default:p}}function c(p){return(0,o.isAsync)(p)?function(){for(var m=[],_=arguments.length;_--;)m[_]=arguments[_];var y=m.pop(),E=p.apply(this,m);return f(E,y)}:(0,n.default)(function(m,_){var y;try{y=p.apply(this,m)}catch(E){return _(E)}if(y&&typeof y.then=="function")return f(y,_);_(null,y)})}function f(p,m){return p.then(function(_){h(m,null,_)},function(_){h(m,_&&_.message?_:new Error(_))})}function h(p,m,_){try{p(m,_)}catch(y){(0,a.default)(function(E){throw E},y)}}e.exports=t.default})(OR,OR.exports);Object.defineProperty(Da,"__esModule",{value:!0});Da.isAsyncIterable=Da.isAsyncGenerator=Da.isAsync=void 0;var nQ=OR.exports,iQ=aQ(nQ);function aQ(e){return e&&e.__esModule?e:{default:e}}function Q5(e){return e[Symbol.toStringTag]==="AsyncFunction"}function oQ(e){return e[Symbol.toStringTag]==="AsyncGenerator"}function sQ(e){return typeof e[Symbol.asyncIterator]=="function"}function uQ(e){if(typeof e!="function")throw new Error("expected a function");return Q5(e)?(0,iQ.default)(e):e}Da.default=uQ;Da.isAsync=Q5;Da.isAsyncGenerator=oQ;Da.isAsyncIterable=sQ;var Lf={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(n,i){if(i===void 0&&(i=n.length),!i)throw new Error("arity is undefined");function a(){for(var o=this,u=[],c=arguments.length;c--;)u[c]=arguments[c];return typeof u[i-1]=="function"?n.apply(this,u):new Promise(function(f,h){u[i-1]=function(p){for(var m=[],_=arguments.length-1;_-- >0;)m[_]=arguments[_+1];if(p)return h(p);f(m.length>1?m:m[0])},n.apply(o,u)})}return a}e.exports=t.default})(Lf,Lf.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=jm.exports,n=c(r),i=Da,a=c(i),o=Lf.exports,u=c(o);function c(f){return f&&f.__esModule?f:{default:f}}t.default=(0,u.default)(function(f,h,p){var m=(0,n.default)(h)?[]:{};f(h,function(_,y,E){(0,a.default)(_)(function(b){for(var S,A=[],R=arguments.length-1;R-- >0;)A[R]=arguments[R+1];A.length<2&&(S=A,A=S[0]),m[y]=A,E(b)})},function(_){return p(_,m)})},3),e.exports=t.default})(cy,cy.exports);var wR={exports:{}},fy={exports:{}},NR={exports:{}},Vm={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(n){function i(){for(var a=[],o=arguments.length;o--;)a[o]=arguments[o];if(n!==null){var u=n;n=null,u.apply(this,a)}}return Object.assign(i,n),i}e.exports=t.default})(Vm,Vm.exports);var IR={exports:{}},PR={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(r){return r[Symbol.iterator]&&r[Symbol.iterator]()},e.exports=t.default})(PR,PR.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;var r=jm.exports,n=o(r),i=PR.exports,a=o(i);function o(p){return p&&p.__esModule?p:{default:p}}function u(p){var m=-1,_=p.length;return function(){return++m<_?{value:p[m],key:m}:null}}function c(p){var m=-1;return function(){var y=p.next();return y.done?null:(m++,{value:y.value,key:m})}}function f(p){var m=p?Object.keys(p):[],_=-1,y=m.length;return function E(){var b=m[++_];return b==="__proto__"?E():_<y?{value:p[b],key:b}:null}}function h(p){if((0,n.default)(p))return u(p);var m=(0,a.default)(p);return m?c(m):f(p)}e.exports=t.default})(IR,IR.exports);var Hm={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(n){return function(){for(var i=[],a=arguments.length;a--;)i[a]=arguments[a];if(n===null)throw new Error("Callback was already called.");var o=n;n=null,o.apply(this,i)}}e.exports=t.default})(Hm,Hm.exports);var DR={exports:{}},Xm={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=r,e.exports=t.default})(Xm,Xm.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var r=Xm.exports,n=i(r);function i(o){return o&&o.__esModule?o:{default:o}}function a(o,u,c,f){var h=!1,p=!1,m=!1,_=0,y=0;function E(){_>=u||m||h||(m=!0,o.next().then(function(A){var R=A.value,M=A.done;if(!(p||h)){if(m=!1,M){h=!0,_<=0&&f(null);return}_++,c(R,y,b),y++,E()}}).catch(S))}function b(A,R){if(_-=1,!p){if(A)return S(A);if(A===!1){h=!0,p=!0;return}if(R===n.default||h&&_<=0)return h=!0,f(null);E()}}function S(A){p||(m=!1,h=!0,f(A))}E()}e.exports=t.default})(DR,DR.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Vm.exports,n=_(r),i=IR.exports,a=_(i),o=Hm.exports,u=_(o),c=Da,f=DR.exports,h=_(f),p=Xm.exports,m=_(p);function _(y){return y&&y.__esModule?y:{default:y}}t.default=function(y){return function(E,b,S){if(S=(0,n.default)(S),y<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!E)return S(null);if((0,c.isAsyncGenerator)(E))return(0,h.default)(E,y,b,S);if((0,c.isAsyncIterable)(E))return(0,h.default)(E[Symbol.asyncIterator](),y,b,S);var A=(0,a.default)(E),R=!1,M=!1,P=0,I=!1;function w(re,K){if(!M)if(P-=1,re)R=!0,S(re);else if(re===!1)R=!0,M=!0;else{if(K===m.default||R&&P<=0)return R=!0,S(null);I||U()}}function U(){for(I=!0;P<y&&!R;){var re=A();if(re===null){R=!0,P<=0&&S(null);return}P+=1,b(re.value,re.key,(0,u.default)(w))}I=!1}U()}},e.exports=t.default})(NR,NR.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=NR.exports,n=c(r),i=Da,a=c(i),o=Lf.exports,u=c(o);function c(h){return h&&h.__esModule?h:{default:h}}function f(h,p,m,_){return(0,n.default)(p)(h,(0,a.default)(m),_)}t.default=(0,u.default)(f,4),e.exports=t.default})(fy,fy.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=fy.exports,n=o(r),i=Lf.exports,a=o(i);function o(c){return c&&c.__esModule?c:{default:c}}function u(c,f,h){return(0,n.default)(c,1,f,h)}t.default=(0,a.default)(u,3),e.exports=t.default})(wR,wR.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var r=cy.exports,n=o(r),i=wR.exports,a=o(i);function o(c){return c&&c.__esModule?c:{default:c}}function u(c,f){return(0,n.default)(a.default,c,f)}e.exports=t.default})(CR,CR.exports);var EE=Y5(CR.exports),Ps=(function(){function e(){this.args=[],this.tasks=[]}return e.prototype.call=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];return this.args=r,EE(this.tasks)},e.prototype.tap=function(t,r){var n=this;this.tasks.push(function(i){r.apply(void 0,mC([],vC(n.args),!1)),i(null,t)})},e})(),aP={exports:{}},LR={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=jm.exports,n=b(r),i=Xm.exports,a=b(i),o=fy.exports,u=b(o),c=Vm.exports,f=b(c),h=Hm.exports,p=b(h),m=Da,_=b(m),y=Lf.exports,E=b(y);function b(M){return M&&M.__esModule?M:{default:M}}function S(M,P,I){I=(0,f.default)(I);var w=0,U=0,re=M.length,K=!1;re===0&&I(null);function H(x,N){x===!1&&(K=!0),K!==!0&&(x?I(x):(++U===re||N===a.default)&&I(null))}for(;w<re;w++)P(M[w],w,(0,p.default)(H))}function A(M,P,I){return(0,u.default)(M,1/0,P,I)}function R(M,P,I){var w=(0,n.default)(M)?S:A;return w(M,(0,_.default)(P),I)}t.default=(0,E.default)(R,3),e.exports=t.default})(LR,LR.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var r=LR.exports,n=o(r),i=cy.exports,a=o(i);function o(c){return c&&c.__esModule?c:{default:c}}function u(c,f){return(0,a.default)(n.default,c,f)}e.exports=t.default})(aP,aP.exports);var BR={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Vm.exports,n=h(r),i=Hm.exports,a=h(i),o=Da,u=h(o),c=Lf.exports,f=h(c);function h(m){return m&&m.__esModule?m:{default:m}}function p(m,_){if(_=(0,n.default)(_),!Array.isArray(m))return _(new Error("First argument to waterfall must be an array of functions"));if(!m.length)return _();var y=0;function E(S){var A=(0,u.default)(m[y++]);A.apply(void 0,S.concat([(0,a.default)(b)]))}function b(S){for(var A=[],R=arguments.length-1;R-- >0;)A[R]=arguments[R+1];if(S!==!1){if(S||y===m.length)return _.apply(void 0,[S].concat(A));E(A)}}E([])}t.default=(0,f.default)(p),e.exports=t.default})(BR,BR.exports);var lQ=Y5(BR.exports),oP=(function(){function e(){this.tasks=[]}return e.prototype.call=function(){return EE(this.tasks)},e.prototype.tap=function(t,r){this.tasks.push(function(n){var i=r();n(i,t)})},e})(),cQ=(function(){function e(){this.args=[],this.tasks=[]}return e.prototype.promise=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];return this.args=r,EE(this.tasks)},e.prototype.tapPromise=function(t,r){var n=this;this.tasks.push(function(i){return W5(n,void 0,void 0,function(){return $5(this,function(a){switch(a.label){case 0:return[4,r.apply(void 0,mC([],vC(this.args),!1))];case 1:return a.sent(),i(null,t),[2]}})})})},e})(),fQ=(function(){function e(){this.args=[],this.tasks=[]}return e.prototype.promise=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];return this.args=r,EE(this.tasks)},e.prototype.tapPromise=function(t,r){var n=this;this.tasks.push(function(i){return W5(n,void 0,void 0,function(){var a;return $5(this,function(o){switch(o.label){case 0:return[4,r.apply(void 0,mC([],vC(this.args),!1))];case 1:return a=o.sent(),i(a,t),[2]}})})})},e})(),dQ=(function(){function e(){this.tasks=[]}return e.prototype.promise=function(){return lQ(this.tasks)},e.prototype.tapPromise=function(t,r){this.tasks.length===0?this.tasks.push(function(n){r().then(function(i){n(null,i)})}):this.tasks.push(function(n,i){r(n).then(function(a){i(null,a)})})},e})(),ix={exports:{}},sP;function J5(){if(sP)return ix.exports;sP=1;var e=ix.exports={};return e.forEach=function(t,r){for(var n=0;n<t.length;n++){var i=r(t[n]);if(i)return i}},ix.exports}var ax,uP;function hQ(){return uP||(uP=1,ax=function(e){var t=e.stateHandler.getState;function r(o){var u=t(o);return u&&!!u.isDetectable}function n(o){t(o).isDetectable=!0}function i(o){return!!t(o).busy}function a(o,u){t(o).busy=!!u}return{isDetectable:r,markAsDetectable:n,isBusy:i,markBusy:a}}),ax}var ox,lP;function pQ(){return lP||(lP=1,ox=function(e){var t={};function r(o){var u=e.get(o);return u===void 0?[]:t[u]||[]}function n(o,u){var c=e.get(o);t[c]||(t[c]=[]),t[c].push(u)}function i(o,u){for(var c=r(o),f=0,h=c.length;f<h;++f)if(c[f]===u){c.splice(f,1);break}}function a(o){var u=r(o);u&&(u.length=0)}return{get:r,add:n,removeListener:i,removeAllListeners:a}}),ox}var sx,cP;function vQ(){return cP||(cP=1,sx=function(){var e=1;function t(){return e++}return{generate:t}}),sx}var ux,fP;function mQ(){return fP||(fP=1,ux=function(e){var t=e.idGenerator,r=e.stateHandler.getState;function n(a){var o=r(a);return o&&o.id!==void 0?o.id:null}function i(a){var o=r(a);if(!o)throw new Error("setId required the element to have a resize detection state.");var u=t.generate();return o.id=u,u}return{get:n,set:i}}),ux}var lx,dP;function _Q(){return dP||(dP=1,lx=function(e){function t(){}var r={log:t,warn:t,error:t};if(!e&&window.console){var n=function(i,a){i[a]=function(){var u=console[a];if(u.apply)u.apply(console,arguments);else for(var c=0;c<arguments.length;c++)u(arguments[c])}};n(r,"log"),n(r,"warn"),n(r,"error")}return r}),lx}var cx={exports:{}},hP;function eU(){if(hP)return cx.exports;hP=1;var e=cx.exports={};return e.isIE=function(t){function r(){var i=navigator.userAgent.toLowerCase();return i.indexOf("msie")!==-1||i.indexOf("trident")!==-1||i.indexOf(" edge/")!==-1}if(!r())return!1;if(!t)return!0;var n=(function(){var i,a=3,o=document.createElement("div"),u=o.getElementsByTagName("i");do o.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->";while(u[0]);return a>4?a:i})();return t===n},e.isLegacyOpera=function(){return!!window.opera},cx.exports}var fx={exports:{}},pP;function gQ(){if(pP)return fx.exports;pP=1;var e=fx.exports={};e.getOption=t;function t(r,n,i){var a=r[n];return a==null&&i!==void 0?i:a}return fx.exports}var dx,vP;function yQ(){if(vP)return dx;vP=1;var e=gQ();dx=function(n){n=n||{};var i=n.reporter,a=e.getOption(n,"async",!0),o=e.getOption(n,"auto",!0);o&&!a&&(i&&i.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),a=!0);var u=t(),c,f=!1;function h(b,S){!f&&o&&a&&u.size()===0&&_(),u.add(b,S)}function p(){for(f=!0;u.size();){var b=u;u=t(),b.process()}f=!1}function m(b){f||(b===void 0&&(b=a),c&&(y(c),c=null),b?_():p())}function _(){c=E(p)}function y(b){var S=clearTimeout;return S(b)}function E(b){var S=function(A){return setTimeout(A,0)};return S(b)}return{add:h,force:m}};function t(){var r={},n=0,i=0,a=0;function o(f,h){h||(h=f,f=0),f>i?i=f:f<a&&(a=f),r[f]||(r[f]=[]),r[f].push(h),n++}function u(){for(var f=a;f<=i;f++)for(var h=r[f],p=0;p<h.length;p++){var m=h[p];m()}}function c(){return n}return{add:o,process:u,size:c}}return dx}var hx,mP;function EQ(){if(mP)return hx;mP=1;var e="_erd";function t(i){return i[e]={},r(i)}function r(i){return i[e]}function n(i){delete i[e]}return hx={initState:t,getState:r,cleanState:n},hx}var px,_P;function bQ(){if(_P)return px;_P=1;var e=eU();return px=function(t){t=t||{};var r=t.reporter,n=t.batchProcessor,i=t.stateHandler.getState;if(!r)throw new Error("Missing required dependency: reporter.");function a(h,p){function m(){p(h)}if(e.isIE(8))i(h).object={proxy:m},h.attachEvent("onresize",m);else{var _=c(h);if(!_)throw new Error("Element is not detectable by this strategy.");_.contentDocument.defaultView.addEventListener("resize",m)}}function o(h){var p=t.important?" !important; ":"; ";return(h.join(p)+p).trim()}function u(h,p,m){m||(m=p,p=h,h=null),h=h||{},h.debug;function _(y,E){var b=o(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),S=!1,A=window.getComputedStyle(y),R=y.offsetWidth,M=y.offsetHeight;i(y).startSize={width:R,height:M};function P(){function I(){if(A.position==="static"){y.style.setProperty("position","relative",h.important?"important":"");var re=function(K,H,x,N){function j(O){return O.replace(/[^-\d\.]/g,"")}var fe=x[N];fe!=="auto"&&j(fe)!=="0"&&(K.warn("An element that is positioned static has style."+N+"="+fe+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+N+" will be set to 0. Element: ",H),H.style.setProperty(N,"0",h.important?"important":""))};re(r,y,A,"top"),re(r,y,A,"right"),re(r,y,A,"bottom"),re(r,y,A,"left")}}function w(){S||I();function re(H,x){if(!H.contentDocument){var N=i(H);N.checkForObjectDocumentTimeoutId&&window.clearTimeout(N.checkForObjectDocumentTimeoutId),N.checkForObjectDocumentTimeoutId=setTimeout(function(){N.checkForObjectDocumentTimeoutId=0,re(H,x)},100);return}x(H.contentDocument)}var K=this;re(K,function(x){E(y)})}A.position!==""&&(I(),S=!0);var U=document.createElement("object");U.style.cssText=b,U.tabIndex=-1,U.type="text/html",U.setAttribute("aria-hidden","true"),U.onload=w,e.isIE()||(U.data="about:blank"),i(y)&&(y.appendChild(U),i(y).object=U,e.isIE()&&(U.data="about:blank"))}n?n.add(P):P()}e.isIE(8)?m(p):_(p,m)}function c(h){return i(h).object}function f(h){if(i(h)){var p=c(h);p&&(e.isIE(8)?h.detachEvent("onresize",p.proxy):h.removeChild(p),i(h).checkForObjectDocumentTimeoutId&&window.clearTimeout(i(h).checkForObjectDocumentTimeoutId),delete i(h).object)}}return{makeDetectable:u,addListener:a,uninstall:f}},px}var vx,gP;function TQ(){if(gP)return vx;gP=1;var e=J5().forEach;return vx=function(t){t=t||{};var r=t.reporter,n=t.batchProcessor,i=t.stateHandler.getState;t.stateHandler.hasState;var a=t.idHandler;if(!n)throw new Error("Missing required dependency: batchProcessor");if(!r)throw new Error("Missing required dependency: reporter.");var o=p(),u="erd_scroll_detection_scrollbar_style",c="erd_scroll_detection_container";function f(P){m(P,u,c)}f(window.document);function h(P){var I=t.important?" !important; ":"; ";return(P.join(I)+I).trim()}function p(){var P=500,I=500,w=document.createElement("div");w.style.cssText=h(["position: absolute","width: "+P*2+"px","height: "+I*2+"px","visibility: hidden","margin: 0","padding: 0"]);var U=document.createElement("div");U.style.cssText=h(["position: absolute","width: "+P+"px","height: "+I+"px","overflow: scroll","visibility: none","top: "+-P*3+"px","left: "+-I*3+"px","visibility: hidden","margin: 0","padding: 0"]),U.appendChild(w),document.body.insertBefore(U,document.body.firstChild);var re=P-U.clientWidth,K=I-U.clientHeight;return document.body.removeChild(U),{width:re,height:K}}function m(P,I,w){function U(x,N){N=N||function(fe){P.head.appendChild(fe)};var j=P.createElement("style");return j.innerHTML=x,j.id=I,N(j),j}if(!P.getElementById(I)){var re=w+"_animation",K=w+"_animation_active",H=`/* Created by the element-resize-detector library. */
`;H+="."+w+" > div::-webkit-scrollbar { "+h(["display: none"])+` }

`,H+="."+K+" { "+h(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+re,"animation-name: "+re])+` }
`,H+="@-webkit-keyframes "+re+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,H+="@keyframes "+re+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",U(H)}}function _(P){P.className+=" "+c+"_animation_active"}function y(P,I,w){if(P.addEventListener)P.addEventListener(I,w);else if(P.attachEvent)P.attachEvent("on"+I,w);else return r.error("[scroll] Don't know how to add event listeners.")}function E(P,I,w){if(P.removeEventListener)P.removeEventListener(I,w);else if(P.detachEvent)P.detachEvent("on"+I,w);else return r.error("[scroll] Don't know how to remove event listeners.")}function b(P){return i(P).container.childNodes[0].childNodes[0].childNodes[0]}function S(P){return i(P).container.childNodes[0].childNodes[0].childNodes[1]}function A(P,I){var w=i(P).listeners;if(!w.push)throw new Error("Cannot add listener to an element that is not detectable.");i(P).listeners.push(I)}function R(P,I,w){w||(w=I,I=P,P=null),P=P||{};function U(){if(P.debug){var _e=Array.prototype.slice.call(arguments);if(_e.unshift(a.get(I),"Scroll: "),r.log.apply)r.log.apply(null,_e);else for(var ot=0;ot<_e.length;ot++)r.log(_e[ot])}}function re(_e){function ot(Ce){var Wt=Ce.getRootNode&&Ce.getRootNode().contains(Ce);return Ce===Ce.ownerDocument.body||Ce.ownerDocument.body.contains(Ce)||Wt}return!ot(_e)||window.getComputedStyle(_e)===null}function K(_e){var ot=i(_e).container.childNodes[0],Ce=window.getComputedStyle(ot);return!Ce.width||Ce.width.indexOf("px")===-1}function H(){var _e=window.getComputedStyle(I),ot={};return ot.position=_e.position,ot.width=I.offsetWidth,ot.height=I.offsetHeight,ot.top=_e.top,ot.right=_e.right,ot.bottom=_e.bottom,ot.left=_e.left,ot.widthCSS=_e.width,ot.heightCSS=_e.height,ot}function x(){var _e=H();i(I).startSize={width:_e.width,height:_e.height},U("Element start size",i(I).startSize)}function N(){i(I).listeners=[]}function j(){if(U("storeStyle invoked."),!i(I)){U("Aborting because element has been uninstalled");return}var _e=H();i(I).style=_e}function fe(_e,ot,Ce){i(_e).lastWidth=ot,i(_e).lastHeight=Ce}function O(_e){return b(_e).childNodes[0]}function k(){return 2*o.width+1}function V(){return 2*o.height+1}function ee(_e){return _e+10+k()}function oe(_e){return _e+10+V()}function ge(_e){return _e*2+k()}function Ee(_e){return _e*2+V()}function De(_e,ot,Ce){var Wt=b(_e),Xt=S(_e),bt=ee(ot),Pt=oe(Ce),Nt=ge(ot),Jt=Ee(Ce);Wt.scrollLeft=bt,Wt.scrollTop=Pt,Xt.scrollLeft=Nt,Xt.scrollTop=Jt}function tt(){var _e=i(I).container;if(!_e){_e=document.createElement("div"),_e.className=c,_e.style.cssText=h(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),i(I).container=_e,_(_e),I.appendChild(_e);var ot=function(){i(I).onRendered&&i(I).onRendered()};y(_e,"animationstart",ot),i(I).onAnimationStart=ot}return _e}function $e(){function _e(){var dr=i(I).style;if(dr.position==="static"){I.style.setProperty("position","relative",P.important?"important":"");var Fn=function(En,oi,Kr,mn){function Hi(Ba){return Ba.replace(/[^-\d\.]/g,"")}var ra=Kr[mn];ra!=="auto"&&Hi(ra)!=="0"&&(En.warn("An element that is positioned static has style."+mn+"="+ra+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+mn+" will be set to 0. Element: ",oi),oi.style[mn]=0)};Fn(r,I,dr,"top"),Fn(r,I,dr,"right"),Fn(r,I,dr,"bottom"),Fn(r,I,dr,"left")}}function ot(dr,Fn,En,oi){return dr=dr?dr+"px":"0",Fn=Fn?Fn+"px":"0",En=En?En+"px":"0",oi=oi?oi+"px":"0",["left: "+dr,"top: "+Fn,"right: "+oi,"bottom: "+En]}if(U("Injecting elements"),!i(I)){U("Aborting because element has been uninstalled");return}_e();var Ce=i(I).container;Ce||(Ce=tt());var Wt=o.width,Xt=o.height,bt=h(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),Pt=h(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(ot(-(1+Wt),-(1+Xt),-Xt,-Wt))),Nt=h(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),Jt=h(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),Br=h(["position: absolute","left: 0","top: 0"]),se=h(["position: absolute","width: 200%","height: 200%"]),be=document.createElement("div"),Fe=document.createElement("div"),F=document.createElement("div"),vt=document.createElement("div"),ht=document.createElement("div"),Ft=document.createElement("div");be.dir="ltr",be.style.cssText=bt,be.className=c,Fe.className=c,Fe.style.cssText=Pt,F.style.cssText=Nt,vt.style.cssText=Br,ht.style.cssText=Jt,Ft.style.cssText=se,F.appendChild(vt),ht.appendChild(Ft),Fe.appendChild(F),Fe.appendChild(ht),be.appendChild(Fe),Ce.appendChild(be);function sr(){var dr=i(I);dr&&dr.onExpand?dr.onExpand():U("Aborting expand scroll handler: element has been uninstalled")}function fr(){var dr=i(I);dr&&dr.onShrink?dr.onShrink():U("Aborting shrink scroll handler: element has been uninstalled")}y(F,"scroll",sr),y(ht,"scroll",fr),i(I).onExpandScroll=sr,i(I).onShrinkScroll=fr}function It(){function _e(Nt,Jt,Br){var se=O(Nt),be=ee(Jt),Fe=oe(Br);se.style.setProperty("width",be+"px",P.important?"important":""),se.style.setProperty("height",Fe+"px",P.important?"important":"")}function ot(Nt){var Jt=I.offsetWidth,Br=I.offsetHeight,se=Jt!==i(I).lastWidth||Br!==i(I).lastHeight;U("Storing current size",Jt,Br),fe(I,Jt,Br),n.add(0,function(){if(se){if(!i(I)){U("Aborting because element has been uninstalled");return}if(!Ce()){U("Aborting because element container has not been initialized");return}if(P.debug){var Fe=I.offsetWidth,F=I.offsetHeight;(Fe!==Jt||F!==Br)&&r.warn(a.get(I),"Scroll: Size changed before updating detector elements.")}_e(I,Jt,Br)}}),n.add(1,function(){if(!i(I)){U("Aborting because element has been uninstalled");return}if(!Ce()){U("Aborting because element container has not been initialized");return}De(I,Jt,Br)}),se&&Nt&&n.add(2,function(){if(!i(I)){U("Aborting because element has been uninstalled");return}if(!Ce()){U("Aborting because element container has not been initialized");return}Nt()})}function Ce(){return!!i(I).container}function Wt(){function Nt(){return i(I).lastNotifiedWidth===void 0}U("notifyListenersIfNeeded invoked");var Jt=i(I);if(Nt()&&Jt.lastWidth===Jt.startSize.width&&Jt.lastHeight===Jt.startSize.height)return U("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(Jt.lastWidth===Jt.lastNotifiedWidth&&Jt.lastHeight===Jt.lastNotifiedHeight)return U("Not notifying: Size already notified");U("Current size not notified, notifying..."),Jt.lastNotifiedWidth=Jt.lastWidth,Jt.lastNotifiedHeight=Jt.lastHeight,e(i(I).listeners,function(Br){Br(I)})}function Xt(){if(U("startanimation triggered."),K(I)){U("Ignoring since element is still unrendered...");return}U("Element rendered.");var Nt=b(I),Jt=S(I);(Nt.scrollLeft===0||Nt.scrollTop===0||Jt.scrollLeft===0||Jt.scrollTop===0)&&(U("Scrollbars out of sync. Updating detector elements..."),ot(Wt))}function bt(){if(U("Scroll detected."),K(I)){U("Scroll event fired while unrendered. Ignoring...");return}ot(Wt)}if(U("registerListenersAndPositionElements invoked."),!i(I)){U("Aborting because element has been uninstalled");return}i(I).onRendered=Xt,i(I).onExpand=bt,i(I).onShrink=bt;var Pt=i(I).style;_e(I,Pt.width,Pt.height)}function qe(){if(U("finalizeDomMutation invoked."),!i(I)){U("Aborting because element has been uninstalled");return}var _e=i(I).style;fe(I,_e.width,_e.height),De(I,_e.width,_e.height)}function St(){w(I)}function ke(){U("Installing..."),N(),x(),n.add(0,j),n.add(1,$e),n.add(2,It),n.add(3,qe),n.add(4,St)}U("Making detectable..."),re(I)?(U("Element is detached"),tt(),U("Waiting until element is attached..."),i(I).onRendered=function(){U("Element is now attached"),ke()}):ke()}function M(P){var I=i(P);I&&(I.onExpandScroll&&E(b(P),"scroll",I.onExpandScroll),I.onShrinkScroll&&E(S(P),"scroll",I.onShrinkScroll),I.onAnimationStart&&E(I.container,"animationstart",I.onAnimationStart),I.container&&P.removeChild(I.container))}return{makeDetectable:R,addListener:A,uninstall:M,initDocument:f}},vx}var mx,yP;function SQ(){if(yP)return mx;yP=1;var e=J5().forEach,t=hQ(),r=pQ(),n=vQ(),i=mQ(),a=_Q(),o=eU(),u=yQ(),c=EQ(),f=bQ(),h=TQ();function p(E){return Array.isArray(E)||E.length!==void 0}function m(E){if(Array.isArray(E))return E;var b=[];return e(E,function(S){b.push(S)}),b}function _(E){return E&&E.nodeType===1}mx=function(E){E=E||{};var b;if(E.idHandler)b={get:function(k){return E.idHandler.get(k,!0)},set:E.idHandler.set};else{var S=n(),A=i({idGenerator:S,stateHandler:c});b=A}var R=E.reporter;if(!R){var M=R===!1;R=a(M)}var P=y(E,"batchProcessor",u({reporter:R})),I={};I.callOnAdd=!!y(E,"callOnAdd",!0),I.debug=!!y(E,"debug",!1);var w=r(b),U=t({stateHandler:c}),re,K=y(E,"strategy","object"),H=y(E,"important",!1),x={reporter:R,batchProcessor:P,stateHandler:c,idHandler:b,important:H};if(K==="scroll"&&(o.isLegacyOpera()?(R.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),K="object"):o.isIE(9)&&(R.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),K="object")),K==="scroll")re=h(x);else if(K==="object")re=f(x);else throw new Error("Invalid strategy name: "+K);var N={};function j(k,V,ee){function oe(It){var qe=w.get(It);e(qe,function(ke){ke(It)})}function ge(It,qe,St){w.add(qe,St),It&&St(qe)}if(ee||(ee=V,V=k,k={}),!V)throw new Error("At least one element required.");if(!ee)throw new Error("Listener required.");if(_(V))V=[V];else if(p(V))V=m(V);else return R.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var Ee=0,De=y(k,"callOnAdd",I.callOnAdd),tt=y(k,"onReady",function(){}),$e=y(k,"debug",I.debug);e(V,function(qe){c.getState(qe)||(c.initState(qe),b.set(qe));var St=b.get(qe);if($e&&R.log("Attaching listener to element",St,qe),!U.isDetectable(qe)){if($e&&R.log(St,"Not detectable."),U.isBusy(qe)){$e&&R.log(St,"System busy making it detectable"),ge(De,qe,ee),N[St]=N[St]||[],N[St].push(function(){Ee++,Ee===V.length&&tt()});return}return $e&&R.log(St,"Making detectable..."),U.markBusy(qe,!0),re.makeDetectable({debug:$e,important:H},qe,function(_e){if($e&&R.log(St,"onElementDetectable"),c.getState(_e)){U.markAsDetectable(_e),U.markBusy(_e,!1),re.addListener(_e,oe),ge(De,_e,ee);var ot=c.getState(_e);if(ot&&ot.startSize){var Ce=_e.offsetWidth,Wt=_e.offsetHeight;(ot.startSize.width!==Ce||ot.startSize.height!==Wt)&&oe(_e)}N[St]&&e(N[St],function(Xt){Xt()})}else $e&&R.log(St,"Element uninstalled before being detectable.");delete N[St],Ee++,Ee===V.length&&tt()})}$e&&R.log(St,"Already detecable, adding listener."),ge(De,qe,ee),Ee++}),Ee===V.length&&tt()}function fe(k){if(!k)return R.error("At least one element is required.");if(_(k))k=[k];else if(p(k))k=m(k);else return R.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");e(k,function(V){w.removeAllListeners(V),re.uninstall(V),c.cleanState(V)})}function O(k){re.initDocument&&re.initDocument(k)}return{listenTo:j,removeListener:w.removeListener,removeAllListeners:w.removeAllListeners,uninstall:fe,initDocument:O}};function y(E,b,S){var A=E[b];return A==null&&S!==void 0?S:A}return mx}var AQ=SQ();const xQ=$r(AQ);let RQ=class extends La.EventEmitter{get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get controlService(){return this.container.controlService}get configService(){return this.container.globalConfigService}get map(){return this.container.mapService}get coordinateSystemService(){return this.container.coordinateSystemService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get cameraService(){return this.container.cameraService}get interactionService(){return this.container.interactionService}get pickingService(){return this.container.pickingService}get shaderModuleService(){return this.container.shaderModuleService}get markerService(){return this.container.markerService}get popupService(){return this.container.popupService}constructor(t){super(),B(this,"destroyed",!1),B(this,"loaded",!1),B(this,"id",void 0),B(this,"inited",!1),B(this,"rendering",!1),B(this,"$container",void 0),B(this,"canvas",void 0),B(this,"markerContainer",void 0),B(this,"resizeDetector",void 0),B(this,"hooks",void 0),B(this,"handleWindowResized",()=>{this.emit("resize"),this.$container&&(this.initContainer(),this.coordinateSystemService.needRefresh=!0,this.render())}),B(this,"handleMapCameraChanged",r=>{this.cameraService.update(r),this.render()}),this.container=t,this.hooks={init:new cQ},this.id=t.id}init(t){var r=this;this.configService.setSceneConfig(this.id,t),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",()=>this.render()),this.fontService.init(),this.hooks.init.tapPromise("initMap",Je(function*(){r.debugService.log("map.mapInitStart",{type:r.map.version}),yield new Promise(n=>{r.map.onCameraChanged(i=>{r.cameraService.init(),r.cameraService.update(i),n()}),r.map.init()}),r.map.onCameraChanged(r.handleMapCameraChanged),r.map.addMarkerContainer(),r.markerService.addMarkers(),r.markerService.addMarkerLayers(),r.popupService.initPopup(),r.interactionService.init(),r.interactionService.on(Oa.Drag,r.addSceneEvent.bind(r))})),this.hooks.init.tapPromise("initRenderer",Je(function*(){var n;const i=((n=r.map)===null||n===void 0?void 0:n.getOverlayContainer())||void 0;if(i?r.$container=i:r.$container=VK(r.configService.getSceneConfig(r.id).id||""),r.$container){const{canvas:o}=t;if(r.canvas=o||ai("canvas","",r.$container),r.setCanvas(),yield r.rendererService.init(r.canvas,r.configService.getSceneConfig(r.id),t.gl),r.registerContextLost(),r.initContainer(),r.resizeDetector=xQ({strategy:"scroll"}),r.resizeDetector.listenTo(r.$container,r.handleWindowResized),window.matchMedia){var a;(a=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||a===void 0||a.addListener(r.handleWindowResized.bind("screen"))}}else console.error(" id ");r.pickingService.init(r.id)})),this.render()}registerContextLost(){const t=this.rendererService.getCanvas();t&&t.addEventListener("webglcontextlost",()=>this.emit("webglcontextlost"))}addLayer(t){this.layerService.sceneService=this,this.layerService.add(t)}addMask(t){this.layerService.sceneService=this,this.layerService.addMask(t)}render(){var t=this;return Je(function*(){t.rendering||t.destroyed||(t.rendering=!0,t.inited?(yield t.layerService.initLayers(),yield t.layerService.renderLayers()):(yield t.hooks.init.promise(),t.destroyed&&t.destroy(),yield t.layerService.initLayers(),t.layerService.renderLayers(),t.controlService.addControls(),t.loaded=!0,t.emit("loaded"),t.inited=!0),t.rendering=!1)})()}addFontFace(t,r){this.fontService.addFontFace(t,r)}getSceneContainer(){return this.$container}exportPng(t){var r=this;return Je(function*(){var n;const i=(n=r.$container)===null||n===void 0?void 0:n.getElementsByTagName("canvas")[0];return yield r.render(),t==="jpg"?i?.toDataURL("image/jpeg"):i?.toDataURL("image/png")})()}getSceneConfig(){return this.configService.getSceneConfig(this.id)}getPointSizeRange(){return this.rendererService.getPointSizeRange()}addMarkerContainer(){const t=this.$container.parentElement;t!==null&&(this.markerContainer=ai("div","l7-marker-container",t))}getMarkerContainer(){return this.markerContainer}destroy(){var t;if(!this.inited){this.destroyed=!0;return}this.resizeDetector.removeListener(this.$container,this.handleWindowResized),this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(()=>{var r;(r=this.$container)===null||r===void 0||r.removeChild(this.canvas),this.canvas=null,this.rendererService.destroy()}),(t=this.$container)===null||t===void 0||(t=t.parentNode)===null||t===void 0||t.removeChild(this.$container),this.emit("destroy")}initContainer(){var t,r;const n=Ca,i=((t=this.$container)===null||t===void 0?void 0:t.clientWidth)||400,a=((r=this.$container)===null||r===void 0?void 0:r.clientHeight)||300,o=this.canvas;o&&(o.width=i*n,o.height=a*n),this.rendererService.viewport({x:0,y:0,width:n*i,height:n*a})}setCanvas(){var t,r;const n=Ca,i=((t=this.$container)===null||t===void 0?void 0:t.clientWidth)||400,a=((r=this.$container)===null||r===void 0?void 0:r.clientHeight)||300,o=this.canvas;o.width=i*n,o.height=a*n,o.style.width="100%",o.style.height="100%"}addSceneEvent(t){this.emit(t.type,t)}};const{uniq:CQ}=Ln,EP="#define PI 3.14159265359",OQ=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,MQ=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,wQ=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}


vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  return weight;
}
`,NQ=`
in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  float activeType = v_PickingResult.a;
  if(activeType > 0.0) {
    vec4 highLightColor =  activeType > 1.5 ? u_SelectColor : u_HighlightColor;
    highLightColor = highLightColor * COLOR_SCALE;
    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));
    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  }
  else {
    return color;
  }

  
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  //  shader 
  // return color;
  if(u_shaderPick < 0.5) {
    return color; //  
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  //  shader 
  // return color;
  if(u_shaderPick < 0.5) {
    return color; //  
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,IQ=`layout(location = ATTRIBUTE_LOCATION_PICKING_COLOR) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

//  select 
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  if(u_PickingStage == PICKING_HIGHLIGHT) {
    if(isVertexPicked(pickingColor)) {
       v_PickingResult = vec4(pickingColor.rgb * COLOR_SCALE,HIGHLIGHT);
       return;
    }
    if(isVertexSelected(pickingColor)) {
     v_PickingResult = vec4(u_CurrentSelectedId.rgb * COLOR_SCALE,SELECT);
      return;
    }

  } else {
      v_PickingResult= vec4(pickingColor.rgb * COLOR_SCALE,NORMAL);
      return;
  }

  // // v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && (isVertexPicked(pickingColor) || isVertexPicked(u_CurrentSelectedId)));

  // // Stores the picking color so that the fragment shader can render it during picking
  // v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,bP=`layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_activeMix;
};`,PQ=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { //  => 
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { //  => 
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,TP=`#define TILE_SIZE (512.0)
#define PI (3.1415926536)
#define WORLD_SCALE (TILE_SIZE / (PI * 2.0))
#define EARTH_CIRCUMFERENCE (40.03e6)

#define COORDINATE_SYSTEM_LNGLAT (1.0) // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET (2.0) // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE (3.0)
#define COORDINATE_SYSTEM_IDENTITY (4.0)
#define COORDINATE_SYSTEM_METER_OFFSET (5.0)

#pragma include "scene_uniforms"

const vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(radians(x) + PI, PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5)));
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}

// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1.0, 1.0);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
      u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01 ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}

vec4 project_position(vec4 position, vec2 position64xyLow) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(
      vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w)
    );
  }
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
    u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01
  ) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  return position;
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_XY_LOW);
}

vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

// 
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance;
  }

  return pixel * 2.0 * u_FocalDistance;
}

// 
float project_float_pixel(float pixel) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox  Web zoom 1
    return pixel * pow(2.0, 19.0 - u_Zoom) * u_FocalDistance;
  }

  return pixel * u_FocalDistance;
}

// Project meter into the unit of pixel which used in the camera world space
float project_float_meter(float meter) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Since the zoom level uniform is updated by mapservice and it's alread been subtracted by 1
    // Not sure if we are supposed to do that again
    return meter;
  } else {
    return project_float_pixel(meter);
  }

  // TODO: change the following code to make adaptations for amap
  // return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;

}

float project_pixel(float pixel) {
  return pixel * u_FocalDistance;
}

vec2 project_pixel(vec2 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec3 project_pixel(vec3 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}

bool isEqual(float a, float b) {
  return a < b + 0.001 && a > b - 0.001;
}

`,DQ=`vec2 rotate_matrix(vec2 v, float a) {
    float b = a / 180.0 * 3.1415926535897932384626433832795;
    float s = sin(b);
    float c = cos(b);
    mat2 m = mat2(c, s, -s, c);
    return m * v;
}`,SP=`layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  float u_FocalDistance;
};
`,LQ=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,AP=/precision\s+(high|low|medium)p\s+float/,xP=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,BQ=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,FQ=/void\s+main\s*\([^)]*\)\s*\{\n?/;class UQ{constructor(){B(this,"moduleCache",{}),B(this,"rawContentCache",{})}registerBuiltinModules(){this.destroy(),this.registerModule("common",{vs:EP,fs:EP}),this.registerModule("decode",{vs:MQ,fs:""}),this.registerModule("scene_uniforms",{vs:SP,fs:SP}),this.registerModule("picking_uniforms",{vs:bP,fs:bP}),this.registerModule("projection",{vs:TP,fs:TP}),this.registerModule("project",{vs:PQ,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:LQ}),this.registerModule("lighting",{vs:wQ,fs:""}),this.registerModule("light",{vs:OQ,fs:""}),this.registerModule("picking",{vs:IQ,fs:NQ}),this.registerModule("rotation_2d",{vs:DQ,fs:""})}registerModule(t,r){r.vs=r.vs.replace(/\r\n/g,`
`),r.fs=r.fs.replace(/\r\n/g,`
`);const{vs:n,fs:i,uniforms:a,defines:o,inject:u}=r,{content:c,uniforms:f}=ex(n),{content:h,uniforms:p}=ex(i);this.rawContentCache[t]={fs:h,defines:o,inject:u,uniforms:Xe(Xe(Xe({},f),p),a),vs:c}}getModule(t){let r=this.rawContentCache[t].vs,n=this.rawContentCache[t].fs;const{defines:i={},inject:a={}}=this.rawContentCache[t];let o={};a["vs:#decl"]&&(r=a["vs:#decl"]+r,o=ex(a["vs:#decl"]).uniforms),a["vs:#main-start"]&&(r=r.replace(FQ,E=>E+a["vs:#main-start"])),a["fs:#decl"]&&(n=a["fs:#decl"]+n),r=kQ(i)+r;const{content:c,includeList:f}=this.processModule(r,[],"vs"),{content:h,includeList:p}=this.processModule(n,[],"fs"),m=CQ(f.concat(p).concat(t)).reduce((E,b)=>Xe(Xe({},E),this.rawContentCache[b].uniforms),Xe({},o)),_=(AP.test(h)?"":xP)+c,y=(AP.test(h)?"":xP)+h;return this.moduleCache[t]={vs:_.trim(),fs:y.trim(),uniforms:m},this.moduleCache[t]}destroy(){this.moduleCache={},this.rawContentCache={}}processModule(t,r,n){return{content:t.replace(BQ,(a,o)=>{const c=o.split(" ")[0].replace(/"/g,"");if(r.indexOf(c)>-1)return"";const f=this.rawContentCache[c][n];r.push(c);const{content:h}=this.processModule(f,r,n);return h}),includeList:r}}}function kQ(e){return Object.keys(e).reduce((r,n)=>r+`#define ${n.toUpperCase()} ${e[n]}
`,`
`)}class _C{constructor(){B(this,"shaderModuleService",void 0),B(this,"rendererService",void 0),B(this,"cameraService",void 0),B(this,"mapService",void 0),B(this,"interactionService",void 0),B(this,"layerService",void 0),B(this,"config",void 0)}getName(){return""}getType(){return f_.Normal}init(t,r){this.config=r,this.rendererService=t.getContainer().rendererService,this.cameraService=t.getContainer().cameraService,this.mapService=t.getContainer().mapService,this.interactionService=t.getContainer().interactionService,this.layerService=t.getContainer().layerService,this.shaderModuleService=t.getContainer().shaderModuleService}render(t){}}class zQ extends _C{getName(){return"clear"}init(t,r){super.init(t,r)}render(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}class jQ{constructor(t){B(this,"passes",[]),B(this,"layer",void 0),B(this,"renderFlag",void 0),B(this,"width",0),B(this,"height",0),this.postProcessor=t}setLayer(t){this.layer=t}setRenderFlag(t){this.renderFlag=t}getRenderFlag(){return this.renderFlag}getPostProcessor(){return this.postProcessor}render(){var t=this;return Je(function*(){for(const r of t.passes)yield r.render(t.layer);yield t.postProcessor.render(t.layer)})()}resize(t,r){(this.width!==t||this.height!==r)&&(this.postProcessor.resize(t,r),this.width=t,this.height=r)}add(t,r){t.getType()===f_.PostProcessing?this.postProcessor.add(t,this.layer,r):(t.init(this.layer,r),this.passes.push(t))}insert(t,r,n){t.init(this.layer,r),this.passes.splice(n,0,t)}destroy(){this.passes.length=0}}class VQ extends _C{constructor(...t){var r;super(...t),r=this,B(this,"pickingFBO",void 0),B(this,"layer",void 0),B(this,"width",0),B(this,"height",0),B(this,"alreadyInRendering",!1),B(this,"pickFromPickingFBO",({x:n,y:i,lngLat:a,type:o})=>{if(!this.layer.isVisible()||!this.layer.needPick(o))return;const{getViewportSize:u,readPixelsAsync:c,useFramebuffer:f}=this.rendererService,{width:h,height:p}=u(),{enableHighlight:m,enableSelect:_}=this.layer.getLayerConfig(),y=n*Ca,E=i*Ca;if(y>h||y<0||E>p||E<0)return;let b;f(this.pickingFBO,Je(function*(){var S;if(b=yield c({x:Math.round(y),y:Math.round(p-(i+1)*Ca),width:1,height:1,data:new Uint8Array(4),framebuffer:r.pickingFBO}),b[0]!==0||b[1]!==0||b[2]!==0){const A=Cf(b),R=r.layer.getSource().getFeatureById(A),M={x:n,y:i,type:o,lngLat:a,featureId:A,feature:R};R&&(r.layer.setCurrentPickId(A),r.triggerHoverOnLayer(M))}else{const A={x:n,y:i,lngLat:a,type:r.layer.getCurrentPickId()===null?"un"+o:"mouseout",featureId:null,feature:null};r.triggerHoverOnLayer(Xe(Xe({},A),{},{type:"unpick"})),r.triggerHoverOnLayer(A),r.layer.setCurrentPickId(null)}m&&r.highlightPickedFeature(b),_&&o==="click"&&((S=b)===null||S===void 0?void 0:S.toString())!==[0,0,0,0].toString()&&r.selectFeature(b)}))})}getType(){return f_.Normal}getName(){return"pixelPicking"}init(t,r){super.init(t,r),this.layer=t;const{createTexture2D:n,createFramebuffer:i,getViewportSize:a}=this.rendererService,{width:o,height:u}=a(),c=n({width:o,height:u,wrapS:D.CLAMP_TO_EDGE,wrapT:D.CLAMP_TO_EDGE,label:"Picking Texture"});this.pickingFBO=i({color:c}),this.interactionService.on(Oa.Hover,this.pickFromPickingFBO),this.interactionService.on(Oa.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Oa.Active,this.highlightFeatureHandle.bind(this))}render(t){if(this.alreadyInRendering)return;const{getViewportSize:r,useFramebuffer:n,clear:i}=this.rendererService,{width:a,height:o}=r();this.alreadyInRendering=!0,(this.width!==a||this.height!==o)&&(this.pickingFBO.resize({width:a,height:o}),this.width=a,this.height=o),n(this.pickingFBO,()=>{i({framebuffer:this.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});const u=this.layer.multiPassRenderer.getRenderFlag();this.layer.multiPassRenderer.setRenderFlag(!1),t.hooks.beforePickingEncode.call(),t.render(),t.hooks.afterPickingEncode.call(),this.layer.multiPassRenderer.setRenderFlag(u),this.alreadyInRendering=!1})}triggerHoverOnLayer(t){this.layer.emit(t.type,t)}highlightPickedFeature(t){const[r,n,i]=t;this.layer.hooks.beforeHighlight.call([r,n,i]),this.layerService.renderLayers()}selectFeature(t){const[r,n,i]=t;this.layer.hooks.beforeSelect.call([r,n,i]),this.layerService.renderLayers()}selectFeatureHandle({featureId:t}){const r=Hh(t);this.selectFeature(new Uint8Array(r))}highlightFeatureHandle({featureId:t}){const r=Hh(t);this.highlightPickedFeature(new Uint8Array(r))}}class HQ{constructor(t){B(this,"passes",[]),B(this,"readFBO",void 0),B(this,"writeFBO",void 0),this.rendererService=t,this.init()}getReadFBO(){return this.readFBO}getWriteFBO(){return this.writeFBO}getCurrentFBOTex(){const{getViewportSize:t,createTexture2D:r}=this.rendererService,{width:n,height:i}=t();return r({x:0,y:0,width:n,height:i,copy:!0})}getReadFBOTex(){var t=this;const{useFramebuffer:r}=this.rendererService;return new Promise(n=>{r(this.readFBO,Je(function*(){n(t.getCurrentFBOTex())}))})}renderBloomPass(t,r){var n=this;return Je(function*(){const i=yield n.getReadFBOTex();let a=0;for(;a<4;)yield r.render(t,i),n.swap(),a++})()}render(t){var r=this;return Je(function*(){for(let n=0;n<r.passes.length;n++){const i=r.passes[n];i.setRenderToScreen(r.isLastEnabledPass(n)),i.getName()==="bloom"?yield r.renderBloomPass(t,i):(yield i.render(t),n!==r.passes.length-1&&r.swap())}})()}resize(t,r){this.readFBO.resize({width:t,height:r}),this.writeFBO.resize({width:t,height:r})}add(t,r,n){t.init(r,n),this.passes.push(t)}insert(t,r,n,i){t.init(n,i),this.passes.splice(r,0,t)}getPostProcessingPassByName(t){return this.passes.find(r=>r.getName()===t)}init(){const{createFramebuffer:t,createTexture2D:r}=this.rendererService;this.readFBO=t({color:r({width:1,height:1,wrapS:D.CLAMP_TO_EDGE,wrapT:D.CLAMP_TO_EDGE,usage:zm.RENDER_TARGET})}),this.writeFBO=t({color:r({width:1,height:1,wrapS:D.CLAMP_TO_EDGE,wrapT:D.CLAMP_TO_EDGE,usage:zm.RENDER_TARGET})})}isLastEnabledPass(t){for(let r=t+1;r<this.passes.length;r++)if(this.passes[r].isEnabled())return!1;return!0}swap(){const t=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=t}}class XQ extends _C{getType(){return f_.Normal}getName(){return"render"}init(t,r){super.init(t,r)}render(t){const{useFramebuffer:r,clear:n}=this.rendererService,i=t.multiPassRenderer.getPostProcessor().getReadFBO();r(i,()=>{n({color:[0,0,0,0],depth:1,stencil:0,framebuffer:i}),t.multiPassRenderer.setRenderFlag(!1),t.models.forEach(a=>{a.draw({uniforms:t.layerModel.getUninforms()})}),t.multiPassRenderer.setRenderFlag(!0)})}}const GQ=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,qQ=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:_x}=Ln;class WQ extends Gu{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:qQ,fs:GQ});const{vs:t,fs:r,uniforms:n}=this.shaderModuleService.getModule("blur-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:t,fs:r,uniforms:Xe(Xe({},n),{},{u_ViewportSize:[i,a]})}}convertOptionsToUniforms(t){const r={};return _x(t.bloomRadius)||(r.u_radius=t.bloomRadius),_x(t.bloomIntensity)||(r.u_intensity=t.bloomIntensity),_x(t.bloomBaseRadio)||(r.u_baseRadio=t.bloomBaseRadio),r}}const $Q=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,YQ=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:ZQ}=Ln;class KQ extends Gu{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:YQ,fs:$Q});const{vs:t,fs:r,uniforms:n}=this.shaderModuleService.getModule("blur-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:t,fs:r,uniforms:Xe(Xe({},n),{},{u_ViewportSize:[i,a]})}}convertOptionsToUniforms(t){const r={};return ZQ(t.blurRadius)||(r.u_BlurDir=[t.blurRadius,0]),r}}const QQ=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,JQ=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:eJ}=Ln;class tJ extends Gu{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:JQ,fs:QQ});const{vs:t,fs:r,uniforms:n}=this.shaderModuleService.getModule("blur-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:t,fs:r,uniforms:Xe(Xe({},n),{},{u_ViewportSize:[i,a]})}}convertOptionsToUniforms(t){const r={};return eJ(t.blurRadius)||(r.u_BlurDir=[0,t.blurRadius]),r}}const rJ=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,nJ=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class iJ extends Gu{setupShaders(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:nJ,fs:rJ});const{vs:t,fs:r,uniforms:n}=this.shaderModuleService.getModule("colorhalftone-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:t,fs:r,uniforms:Xe(Xe({},n),{},{u_ViewportSize:[i,a]})}}}const aJ=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,oJ=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class sJ extends Gu{setupShaders(){return this.shaderModuleService.registerModule("copy-pass",{vs:oJ,fs:aJ}),this.shaderModuleService.getModule("copy-pass")}}const uJ=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,lJ=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class cJ extends Gu{setupShaders(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:lJ,fs:uJ});const{vs:t,fs:r,uniforms:n}=this.shaderModuleService.getModule("hexagonalpixelate-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:t,fs:r,uniforms:Xe(Xe({},n),{},{u_ViewportSize:[i,a]})}}}const fJ=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,dJ=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class hJ extends Gu{setupShaders(){this.shaderModuleService.registerModule("ink-pass",{vs:dJ,fs:fJ});const{vs:t,fs:r,uniforms:n}=this.shaderModuleService.getModule("ink-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:t,fs:r,uniforms:Xe(Xe({},n),{},{u_ViewportSize:[i,a]})}}}const pJ=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,vJ=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class mJ extends Gu{setupShaders(){return this.shaderModuleService.registerModule("noise-pass",{vs:vJ,fs:pJ}),this.shaderModuleService.getModule("noise-pass")}}const _J=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,gJ=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`;class yJ extends Gu{setupShaders(){return this.shaderModuleService.registerModule("sepia-pass",{vs:_J,fs:gJ}),this.shaderModuleService.getModule("sepia-pass")}}const tU=new IK;let EJ=0;function bJ(){const e=new UQ,t=new BK,r=new SK,n=new LK(r),i=new uK,a=new cK,o=new RK,u=new CK,c=new xK,f={id:`${EJ++}`,globalConfigService:tU,shaderModuleService:e,debugService:t,cameraService:r,coordinateSystemService:n,fontService:i,iconService:a,markerService:o,popupService:u,controlService:c,customRenderService:{}},h=new qK(f);f.layerService=h;const p=new RQ(f);f.sceneService=p;const m=new zK(f);f.interactionService=m;const _=new XK(f);f.pickingService=_;const y={clear:new zQ,pixelPicking:new VQ,render:new XQ};f.normalPassFactory=b=>y[b];const E={copy:new sJ,bloom:new WQ,blurH:new KQ,blurV:new tJ,noise:new mJ,sepia:new yJ,colorHalftone:new iJ,hexagonalPixelate:new cJ,ink:new hJ};return f.postProcessingPass=E,f.postProcessingPassFactory=b=>E[b],f}function Mm(e){const t=Xe({},e);return t.postProcessor=new HQ(t.rendererService),t.multiPassRenderer=new jQ(t.postProcessor),t.styleAttributeService=new JK(t.rendererService),t}const r0=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"];let ji=(function(e){return e.IMAGE="image",e.CUSTOMIMAGE="customImage",e.ARRAYBUFFER="arraybuffer",e.RGB="rgb",e.TERRAINRGB="terrainRGB",e.CUSTOMRGB="customRGB",e.CUSTOMARRAYBUFFER="customArrayBuffer",e.CUSTOMTERRAINRGB="customTerrainRGB",e})({});var rU=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{u(r.next(c))}catch(f){i(f)}},o=c=>{try{u(r.throw(c))}catch(f){i(f)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);u((r=r.apply(e,t)).next())}),TJ=(e,t,r,n)=>rU(void 0,null,function*(){return new Promise((i,a)=>{t({x:e.x,y:e.y,z:e.z},(o,u)=>{if(o||u.length===0){a(o);return}u&&SR([{data:u,bands:[0]}],r,n,(c,f)=>{c?a(c):f&&i(f)})})})}),SJ=(e,t)=>rU(void 0,null,function*(){return new Promise((r,n)=>{t({x:e.x,y:e.y,z:e.z},(i,a)=>{if(i||!a){n(i);return}a instanceof ArrayBuffer?AX(a,(o,u)=>{o&&n(o),r(u)}):a instanceof HTMLImageElement?r(a):n(i)})})});function AJ(e,t){return Array.isArray(e)?typeof e[0]=="string"?e.map(r=>wh(r,t)):e.map(r=>({url:wh(r.url,t),bands:r.bands||[0]})):wh(e,t)}function xJ(e){return typeof e=="string"?[{url:e,bands:[0]}]:typeof e[0]=="string"?e.map(t=>({url:t,bands:[0]})):e}function RP(e,t){e.xhrCancel=()=>{t.map(r=>{r.abort()})}}var RJ=Object.defineProperty,CJ=Object.defineProperties,OJ=Object.getOwnPropertyDescriptors,CP=Object.getOwnPropertySymbols,MJ=Object.prototype.hasOwnProperty,wJ=Object.prototype.propertyIsEnumerable,OP=(e,t,r)=>t in e?RJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,MP=(e,t)=>{for(var r in t||(t={}))MJ.call(t,r)&&OP(e,r,t[r]);if(CP)for(var r of CP(t))wJ.call(t,r)&&OP(e,r,t[r]);return e},wP=(e,t)=>CJ(e,OJ(t)),nU=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{u(r.next(c))}catch(f){i(f)}},o=c=>{try{u(r.throw(c))}catch(f){i(f)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);u((r=r.apply(e,t)).next())}),NJ=(e,t,r,n,i)=>nU(void 0,null,function*(){const a=xJ(t.url);if(a.length>1){const{rasterFiles:o,xhrList:u,errList:c}=yield IJ(a,t);if(RP(e,u),c.length>0){r(c,null);return}SR(o,n,i,r)}else{const o=X2(t,(u,c)=>{if(u)r(u);else if(c){const f=[{data:c,bands:a[0].bands}];SR(f,n,i,r)}});RP(e,[o])}});function IJ(e,t){return nU(this,null,function*(){const r=[],n=[],i=[];for(let a=0;a<e.length;a++){const o=e[a],u=wP(MP({},t),{url:o.url}),c=o.bands,{err:f,data:h,xhr:p}=yield bX(wP(MP({},u),{type:"arrayBuffer"}));f&&i.push(f),n.push(p),r.push({data:h,bands:c})}return{rasterFiles:r,xhrList:n,errList:i}})}var PJ=Object.defineProperty,DJ=Object.defineProperties,LJ=Object.getOwnPropertyDescriptors,NP=Object.getOwnPropertySymbols,BJ=Object.prototype.hasOwnProperty,FJ=Object.prototype.propertyIsEnumerable,IP=(e,t,r)=>t in e?PJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,M0=(e,t)=>{for(var r in t||(t={}))BJ.call(t,r)&&IP(e,r,t[r]);if(NP)for(var r of NP(t))FJ.call(t,r)&&IP(e,r,t[r]);return e},iU=(e,t)=>DJ(e,LJ(t)),aU=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{u(r.next(c))}catch(f){i(f)}},o=c=>{try{u(r.throw(c))}catch(f){i(f)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);u((r=r.apply(e,t)).next())}),UJ=(e,t,r,n)=>aU(void 0,null,function*(){const{format:i=oU,operation:a,requestParameters:o={}}=n,u=iU(M0({},o),{url:AJ(e,t)});return new Promise((c,f)=>{NJ(r,u,(h,p)=>{h?f(h):p&&c(p)},i,a)})}),PP=(e,t,r,n)=>aU(void 0,null,function*(){let i;const a=Array.isArray(e)?e[0]:e;return n.wmtsOptions?i=(n?.getURLFromTemplate||Z$)(a,M0(M0({},t),n.wmtsOptions)):i=(n?.getURLFromTemplate||wh)(a,t),new Promise((o,u)=>{var c;const f=dR(iU(M0({},n?.requestParameters),{url:i,type:((c=n?.requestParameters)==null?void 0:c.type)||"arrayBuffer"}),(h,p)=>{h?u(h):p&&o(p)},n.transformResponse);r.xhrCancel=()=>f.cancel()})}),oU=()=>({rasterData:new Uint8Array([0]),width:1,height:1}),kJ=Object.defineProperty,zJ=Object.defineProperties,jJ=Object.getOwnPropertyDescriptors,DP=Object.getOwnPropertySymbols,VJ=Object.prototype.hasOwnProperty,HJ=Object.prototype.propertyIsEnumerable,LP=(e,t,r)=>t in e?kJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,BP=(e,t)=>{for(var r in t||(t={}))VJ.call(t,r)&&LP(e,r,t[r]);if(DP)for(var r of DP(t))HJ.call(t,r)&&LP(e,r,t[r]);return e},XJ=(e,t)=>zJ(e,jJ(t)),GJ={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0};ji.ARRAYBUFFER,ji.RGB;function qJ(e){return!!(Array.isArray(e)&&e.length===0||!Array.isArray(e)&&typeof e!="string")}function WJ(e,t={}){if(qJ(e))throw new Error("tile server url is error");const{extent:r=[1/0,1/0,-1/0,-1/0],coordinates:n}=t;let i=t?.dataType||ji.IMAGE;i===ji.RGB&&(i=ji.ARRAYBUFFER);const a=(c,f)=>{switch(i){case ji.IMAGE:return PP(e,c,f,t);case ji.CUSTOMIMAGE:case ji.CUSTOMTERRAINRGB:return SJ(f,t?.getCustomData);case ji.ARRAYBUFFER:return UJ(e,c,f,t);case ji.CUSTOMARRAYBUFFER:case ji.CUSTOMRGB:return TJ(f,t?.getCustomData,t?.format||oU,t?.operation);default:return PP(e,c,f,t)}},o=XJ(BP(BP({},GJ),t),{getTileData:a}),u=fp(n,r);return{data:e,dataArray:[{_id:1,coordinates:u}],tilesetOptions:o,isTile:!0}}var $J=Object.defineProperty,YJ=Object.defineProperties,ZJ=Object.getOwnPropertyDescriptors,dy=Object.getOwnPropertySymbols,sU=Object.prototype.hasOwnProperty,uU=Object.prototype.propertyIsEnumerable,FP=(e,t,r)=>t in e?$J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,KJ=(e,t)=>{for(var r in t||(t={}))sU.call(t,r)&&FP(e,r,t[r]);if(dy)for(var r of dy(t))uU.call(t,r)&&FP(e,r,t[r]);return e},QJ=(e,t)=>YJ(e,ZJ(t)),JJ=(e,t)=>{var r={};for(var n in e)sU.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&dy)for(var n of dy(e))t.indexOf(n)<0&&uU.call(e,n)&&(r[n]=e[n]);return r};function eee(e,t){const r=t,{extent:n=[121.168,30.2828,121.384,30.4219],coordinates:i,width:a,height:o}=r,u=JJ(r,["extent","coordinates","width","height"]);e.length<2&&console.warn("RGB2");const[c,f]=u.bands||[0,1],h=[e[c],e[f]],p=[];for(let y=0;y<h[0].length;y++)p.push((h[1][y]-h[0][y])/(h[1][y]+h[0][y]));const m=fp(i,n);return{_id:1,dataArray:[QJ(KJ({_id:1,data:p,width:a,height:o},u),{coordinates:m})]}}var tee=Object.defineProperty,ree=Object.defineProperties,nee=Object.getOwnPropertyDescriptors,hy=Object.getOwnPropertySymbols,lU=Object.prototype.hasOwnProperty,cU=Object.prototype.propertyIsEnumerable,UP=(e,t,r)=>t in e?tee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,iee=(e,t)=>{for(var r in t||(t={}))lU.call(t,r)&&UP(e,r,t[r]);if(hy)for(var r of hy(t))cU.call(t,r)&&UP(e,r,t[r]);return e},aee=(e,t)=>ree(e,nee(t)),oee=(e,t)=>{var r={};for(var n in e)lU.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&hy)for(var n of hy(e))t.indexOf(n)<0&&cU.call(e,n)&&(r[n]=e[n]);return r};function see(e,t){const r=t,{extent:n,coordinates:i,width:a,height:o}=r,u=oee(r,["extent","coordinates","width","height"]);e.length<3&&console.warn("RGB");const[c,f,h]=u.bands||[0,1,2],p=[e[c],e[f],e[h]],m=[],[_,y]=u?.countCut||[2,98],E=u?.RMinMax||Nh(p[0],_,y),b=u?.GMinMax||Nh(p[1],_,y),S=u?.BMinMax||Nh(p[2],_,y);for(let M=0;M<p[0].length;M++)m.push(Math.max(0,p[0][M]-E[0])),m.push(Math.max(0,p[1][M]-b[0])),m.push(Math.max(0,p[2][M]-S[0]));const A=fp(i,n);return{_id:1,dataArray:[aee(iee({_id:1,data:m,width:a,height:o,rMinMax:E,gMinMax:b,bMinMax:S},u),{coordinates:A})]}}var uee=Object.defineProperty,lee=Object.defineProperties,cee=Object.getOwnPropertyDescriptors,py=Object.getOwnPropertySymbols,fU=Object.prototype.hasOwnProperty,dU=Object.prototype.propertyIsEnumerable,kP=(e,t,r)=>t in e?uee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fee=(e,t)=>{for(var r in t||(t={}))fU.call(t,r)&&kP(e,r,t[r]);if(py)for(var r of py(t))dU.call(t,r)&&kP(e,r,t[r]);return e},dee=(e,t)=>lee(e,cee(t)),hee=(e,t)=>{var r={};for(var n in e)fU.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&py)for(var n of py(e))t.indexOf(n)<0&&dU.call(e,n)&&(r[n]=e[n]);return r};function pee(e,t){const r=t,{extent:n,coordinates:i,min:a,max:o,width:u,height:c,format:f,operation:h}=r,p=hee(r,["extent","coordinates","min","max","width","height","format","operation"]);let m;if(f===void 0||R5(e))m=Array.from(e);else{const E=Array.isArray(e)?e:[e];m=fC(E,f,h)}const _=fp(i,n);return{_id:1,dataArray:[dee(fee({_id:1,data:m,width:u,height:c},p),{min:a,max:o,coordinates:_})]}}var vee=Object.defineProperty,mee=Object.defineProperties,_ee=Object.getOwnPropertyDescriptors,zP=Object.getOwnPropertySymbols,gee=Object.prototype.hasOwnProperty,yee=Object.prototype.propertyIsEnumerable,jP=(e,t,r)=>t in e?vee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,VP=(e,t)=>{for(var r in t||(t={}))gee.call(t,r)&&jP(e,r,t[r]);if(zP)for(var r of zP(t))yee.call(t,r)&&jP(e,r,t[r]);return e},Eee=(e,t)=>mee(e,_ee(t)),bee=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{u(r.next(c))}catch(f){i(f)}},o=c=>{try{u(r.throw(c))}catch(f){i(f)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);u((r=r.apply(e,t)).next())}),Tee={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},See=e=>bee(void 0,null,function*(){return new Promise(t=>{const[r,n,i,a]=e.bounds,o={layers:{testTile:{features:[{type:"Feature",properties:{key:e.x+"/"+e.y+"/"+e.z,x:(r+i)/2,y:(n+a)/2},geometry:{type:"LineString",coordinates:[[i,a],[i,n],[r,n],[r,n]]}}]}}};t(o)})});function Aee(e,t){const r=i=>See(i),n=Eee(VP(VP({},Tee),t),{getTileData:r});return{data:e,dataArray:[],tilesetOptions:n,isTile:!0}}var w0={exports:{}},xee=w0.exports,HP;function Ree(){return HP||(HP=1,(function(e,t){(function(r,n){e.exports=n()})(xee,(function(){function r(K,H,x,N,j,fe){if(!(j-N<=x)){var O=N+j>>1;n(K,H,O,N,j,fe%2),r(K,H,x,N,O-1,fe+1),r(K,H,x,O+1,j,fe+1)}}function n(K,H,x,N,j,fe){for(;j>N;){if(j-N>600){var O=j-N+1,k=x-N+1,V=Math.log(O),ee=.5*Math.exp(2*V/3),oe=.5*Math.sqrt(V*ee*(O-ee)/O)*(k-O/2<0?-1:1),ge=Math.max(N,Math.floor(x-k*ee/O+oe)),Ee=Math.min(j,Math.floor(x+(O-k)*ee/O+oe));n(K,H,x,ge,Ee,fe)}var De=H[2*x+fe],tt=N,$e=j;for(i(K,H,N,x),H[2*j+fe]>De&&i(K,H,N,j);tt<$e;){for(i(K,H,tt,$e),tt++,$e--;H[2*tt+fe]<De;)tt++;for(;H[2*$e+fe]>De;)$e--}H[2*N+fe]===De?i(K,H,N,$e):($e++,i(K,H,$e,j)),$e<=x&&(N=$e+1),x<=$e&&(j=$e-1)}}function i(K,H,x,N){a(K,x,N),a(H,2*x,2*N),a(H,2*x+1,2*N+1)}function a(K,H,x){var N=K[H];K[H]=K[x],K[x]=N}function o(K,H,x,N,j,fe,O){for(var k=[0,K.length-1,0],V=[],ee,oe;k.length;){var ge=k.pop(),Ee=k.pop(),De=k.pop();if(Ee-De<=O){for(var tt=De;tt<=Ee;tt++)ee=H[2*tt],oe=H[2*tt+1],ee>=x&&ee<=j&&oe>=N&&oe<=fe&&V.push(K[tt]);continue}var $e=Math.floor((De+Ee)/2);ee=H[2*$e],oe=H[2*$e+1],ee>=x&&ee<=j&&oe>=N&&oe<=fe&&V.push(K[$e]);var It=(ge+1)%2;(ge===0?x<=ee:N<=oe)&&(k.push(De),k.push($e-1),k.push(It)),(ge===0?j>=ee:fe>=oe)&&(k.push($e+1),k.push(Ee),k.push(It))}return V}function u(K,H,x,N,j,fe){for(var O=[0,K.length-1,0],k=[],V=j*j;O.length;){var ee=O.pop(),oe=O.pop(),ge=O.pop();if(oe-ge<=fe){for(var Ee=ge;Ee<=oe;Ee++)c(H[2*Ee],H[2*Ee+1],x,N)<=V&&k.push(K[Ee]);continue}var De=Math.floor((ge+oe)/2),tt=H[2*De],$e=H[2*De+1];c(tt,$e,x,N)<=V&&k.push(K[De]);var It=(ee+1)%2;(ee===0?x-j<=tt:N-j<=$e)&&(O.push(ge),O.push(De-1),O.push(It)),(ee===0?x+j>=tt:N+j>=$e)&&(O.push(De+1),O.push(oe),O.push(It))}return k}function c(K,H,x,N){var j=K-x,fe=H-N;return j*j+fe*fe}var f=function(K){return K[0]},h=function(K){return K[1]},p=function(H,x,N,j,fe){x===void 0&&(x=f),N===void 0&&(N=h),j===void 0&&(j=64),fe===void 0&&(fe=Float64Array),this.nodeSize=j,this.points=H;for(var O=H.length<65536?Uint16Array:Uint32Array,k=this.ids=new O(H.length),V=this.coords=new fe(H.length*2),ee=0;ee<H.length;ee++)k[ee]=ee,V[2*ee]=x(H[ee]),V[2*ee+1]=N(H[ee]);r(k,V,j,0,k.length-1,0)};p.prototype.range=function(H,x,N,j){return o(this.ids,this.coords,H,x,N,j,this.nodeSize)},p.prototype.within=function(H,x,N){return u(this.ids,this.coords,H,x,N,this.nodeSize)};var m={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(K){return K}},_=Math.fround||(function(K){return(function(H){return K[0]=+H,K[0]})})(new Float32Array(1)),y=function(H){this.options=w(Object.create(m),H),this.trees=new Array(this.options.maxZoom+1)};y.prototype.load=function(H){var x=this.options,N=x.log,j=x.minZoom,fe=x.maxZoom,O=x.nodeSize;N&&console.time("total time");var k="prepare "+H.length+" points";N&&console.time(k),this.points=H;for(var V=[],ee=0;ee<H.length;ee++)H[ee].geometry&&V.push(b(H[ee],ee));this.trees[fe+1]=new p(V,U,re,O,Float32Array),N&&console.timeEnd(k);for(var oe=fe;oe>=j;oe--){var ge=+Date.now();V=this._cluster(V,oe),this.trees[oe]=new p(V,U,re,O,Float32Array),N&&console.log("z%d: %d clusters in %dms",oe,V.length,+Date.now()-ge)}return N&&console.timeEnd("total time"),this},y.prototype.getClusters=function(H,x){var N=((H[0]+180)%360+360)%360-180,j=Math.max(-90,Math.min(90,H[1])),fe=H[2]===180?180:((H[2]+180)%360+360)%360-180,O=Math.max(-90,Math.min(90,H[3]));if(H[2]-H[0]>=360)N=-180,fe=180;else if(N>fe){var k=this.getClusters([N,j,180,O],x),V=this.getClusters([-180,j,fe,O],x);return k.concat(V)}for(var ee=this.trees[this._limitZoom(x)],oe=ee.range(R(N),M(O),R(fe),M(j)),ge=[],Ee=0,De=oe;Ee<De.length;Ee+=1){var tt=De[Ee],$e=ee.points[tt];ge.push($e.numPoints?S($e):this.points[$e.index])}return ge},y.prototype.getChildren=function(H){var x=this._getOriginId(H),N=this._getOriginZoom(H),j="No cluster with the specified id.",fe=this.trees[N];if(!fe)throw new Error(j);var O=fe.points[x];if(!O)throw new Error(j);for(var k=this.options.radius/(this.options.extent*Math.pow(2,N-1)),V=fe.within(O.x,O.y,k),ee=[],oe=0,ge=V;oe<ge.length;oe+=1){var Ee=ge[oe],De=fe.points[Ee];De.parentId===H&&ee.push(De.numPoints?S(De):this.points[De.index])}if(ee.length===0)throw new Error(j);return ee},y.prototype.getLeaves=function(H,x,N){x=x||10,N=N||0;var j=[];return this._appendLeaves(j,H,x,N,0),j},y.prototype.getTile=function(H,x,N){var j=this.trees[this._limitZoom(H)],fe=Math.pow(2,H),O=this.options,k=O.extent,V=O.radius,ee=V/k,oe=(N-ee)/fe,ge=(N+1+ee)/fe,Ee={features:[]};return this._addTileFeatures(j.range((x-ee)/fe,oe,(x+1+ee)/fe,ge),j.points,x,N,fe,Ee),x===0&&this._addTileFeatures(j.range(1-ee/fe,oe,1,ge),j.points,fe,N,fe,Ee),x===fe-1&&this._addTileFeatures(j.range(0,oe,ee/fe,ge),j.points,-1,N,fe,Ee),Ee.features.length?Ee:null},y.prototype.getClusterExpansionZoom=function(H){for(var x=this._getOriginZoom(H)-1;x<=this.options.maxZoom;){var N=this.getChildren(H);if(x++,N.length!==1)break;H=N[0].properties.cluster_id}return x},y.prototype._appendLeaves=function(H,x,N,j,fe){for(var O=this.getChildren(x),k=0,V=O;k<V.length;k+=1){var ee=V[k],oe=ee.properties;if(oe&&oe.cluster?fe+oe.point_count<=j?fe+=oe.point_count:fe=this._appendLeaves(H,oe.cluster_id,N,j,fe):fe<j?fe++:H.push(ee),H.length===N)break}return fe},y.prototype._addTileFeatures=function(H,x,N,j,fe,O){for(var k=0,V=H;k<V.length;k+=1){var ee=V[k],oe=x[ee],ge=oe.numPoints,Ee=void 0,De=void 0,tt=void 0;if(ge)Ee=A(oe),De=oe.x,tt=oe.y;else{var $e=this.points[oe.index];Ee=$e.properties,De=R($e.geometry.coordinates[0]),tt=M($e.geometry.coordinates[1])}var It={type:1,geometry:[[Math.round(this.options.extent*(De*fe-N)),Math.round(this.options.extent*(tt*fe-j))]],tags:Ee},qe=void 0;ge?qe=oe.id:this.options.generateId?qe=oe.index:this.points[oe.index].id&&(qe=this.points[oe.index].id),qe!==void 0&&(It.id=qe),O.features.push(It)}},y.prototype._limitZoom=function(H){return Math.max(this.options.minZoom,Math.min(Math.floor(+H),this.options.maxZoom+1))},y.prototype._cluster=function(H,x){for(var N=[],j=this.options,fe=j.radius,O=j.extent,k=j.reduce,V=j.minPoints,ee=fe/(O*Math.pow(2,x)),oe=0;oe<H.length;oe++){var ge=H[oe];if(!(ge.zoom<=x)){ge.zoom=x;for(var Ee=this.trees[x+1],De=Ee.within(ge.x,ge.y,ee),tt=ge.numPoints||1,$e=tt,It=0,qe=De;It<qe.length;It+=1){var St=qe[It],ke=Ee.points[St];ke.zoom>x&&($e+=ke.numPoints||1)}if($e>tt&&$e>=V){for(var _e=ge.x*tt,ot=ge.y*tt,Ce=k&&tt>1?this._map(ge,!0):null,Wt=(oe<<5)+(x+1)+this.points.length,Xt=0,bt=De;Xt<bt.length;Xt+=1){var Pt=bt[Xt],Nt=Ee.points[Pt];if(!(Nt.zoom<=x)){Nt.zoom=x;var Jt=Nt.numPoints||1;_e+=Nt.x*Jt,ot+=Nt.y*Jt,Nt.parentId=Wt,k&&(Ce||(Ce=this._map(ge,!0)),k(Ce,this._map(Nt)))}}ge.parentId=Wt,N.push(E(_e/$e,ot/$e,Wt,$e,Ce))}else if(N.push(ge),$e>1)for(var Br=0,se=De;Br<se.length;Br+=1){var be=se[Br],Fe=Ee.points[be];Fe.zoom<=x||(Fe.zoom=x,N.push(Fe))}}}return N},y.prototype._getOriginId=function(H){return H-this.points.length>>5},y.prototype._getOriginZoom=function(H){return(H-this.points.length)%32},y.prototype._map=function(H,x){if(H.numPoints)return x?w({},H.properties):H.properties;var N=this.points[H.index].properties,j=this.options.map(N);return x&&j===N?w({},j):j};function E(K,H,x,N,j){return{x:_(K),y:_(H),zoom:1/0,id:x,parentId:-1,numPoints:N,properties:j}}function b(K,H){var x=K.geometry.coordinates,N=x[0],j=x[1];return{x:_(R(N)),y:_(M(j)),zoom:1/0,index:H,parentId:-1}}function S(K){return{type:"Feature",id:K.id,properties:A(K),geometry:{type:"Point",coordinates:[P(K.x),I(K.y)]}}}function A(K){var H=K.numPoints,x=H>=1e4?Math.round(H/1e3)+"k":H>=1e3?Math.round(H/100)/10+"k":H;return w(w({},K.properties),{cluster:!0,cluster_id:K.id,point_count:H,point_count_abbreviated:x})}function R(K){return K/360+.5}function M(K){var H=Math.sin(K*Math.PI/180),x=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return x<0?0:x>1?1:x}function P(K){return(K-.5)*360}function I(K){var H=(180-K*360)*Math.PI/180;return 360*Math.atan(Math.exp(H))/Math.PI-90}function w(K,H){for(var x in H)K[x]=H[x];return K}function U(K){return K.x}function re(K){return K.y}return y}))})(w0)),w0.exports}var Cee=Ree();const Oee=$r(Cee);var Mee=Object.defineProperty,XP=Object.getOwnPropertySymbols,wee=Object.prototype.hasOwnProperty,Nee=Object.prototype.propertyIsEnumerable,GP=(e,t,r)=>t in e?Mee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hU=(e,t)=>{for(var r in t||(t={}))wee.call(t,r)&&GP(e,r,t[r]);if(XP)for(var r of XP(t))Nee.call(t,r)&&GP(e,r,t[r]);return e};function pU(e,t){const{radius:r=40,maxZoom:n=18,minZoom:i=0,zoom:a=2}=t;if(e.pointIndex){const c=e.pointIndex.getClusters(e.extent,Math.floor(a));return e.dataArray=Iee(c),e}const o=new Oee({radius:r,minZoom:i,maxZoom:n}),u={features:[]};return u.features=e.dataArray.map(c=>({type:"Feature",geometry:{type:"Point",coordinates:c.coordinates},properties:hU({},c)})),o.load(u.features),o}function Iee(e){return e.map((t,r)=>hU({coordinates:t.geometry.coordinates,_id:r+1},t.properties))}function Pee(e){if(e.length===0)throw new Error("max requires at least one data point");let t=e[0];for(let r=1;r<e.length;r++)e[r]>t&&(t=e[r]);return t}function Dee(e){if(e.length===0)throw new Error("min requires at least one data point");let t=e[0];for(let r=1;r<e.length;r++)e[r]<t&&(t=e[r]);return t}function vU(e){if(e.length===0)return 0;let t=e[0],r=0,n;for(let i=1;i<e.length;i++)n=t+e[i]*1,Math.abs(t)>=Math.abs(e[i])?r+=t-n+e[i]:r+=e[i]-n+t,t=n;return t+r*1}function Lee(e){if(e.length===0)throw new Error("mean requires at least one data point");return vU(e)/e.length}var Bee={min:Dee,max:Pee,mean:Lee,sum:vU},Fee=Object.defineProperty,qP=Object.getOwnPropertySymbols,Uee=Object.prototype.hasOwnProperty,kee=Object.prototype.propertyIsEnumerable,WP=(e,t,r)=>t in e?Fee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Uv=(e,t)=>{for(var r in t||(t={}))Uee.call(t,r)&&WP(e,r,t[r]);if(qP)for(var r of qP(t))kee.call(t,r)&&WP(e,r,t[r]);return e},$P=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{u(r.next(c))}catch(f){i(f)}},o=c=>{try{u(r.throw(c))}catch(f){i(f)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);u((r=r.apply(e,t)).next())}),{cloneDeep:zee,isFunction:YP,isString:jee,mergeWith:Vee}=Ln;function Hee(e,t){if(Array.isArray(t))return t}var Xee=class extends La.EventEmitter{constructor(e,t){super(),this.type="source",this.isTile=!1,this.inited=!1,this.hooks={init:new Ps},this.parser={type:"geojson"},this.transforms=[],this.cluster=!1,this.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},this.invalidExtent=!1,this.dataArrayChanged=!1,this.cfg={autoRender:!0},this.originData=e,this.initCfg(t),this.init().then(()=>{this.inited=!0,this.emit("update",{type:"inited"})})}getSourceCfg(){return this.cfg}getClusters(e){return this.clusterIndex.getClusters(this.caculClusterExtent(2),e)}getClustersLeaves(e){return this.clusterIndex.getLeaves(e,1/0)}getParserType(){return this.parser.type}updateClusterData(e){const{method:t="sum",field:r}=this.clusterOptions;let n=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(e));this.clusterOptions.zoom=e,n.forEach(i=>{i.id||(i.properties.point_count=1)}),(r||YP(t))&&(n=n.map(i=>{const a=i.id;if(a){const u=this.clusterIndex.getLeaves(a,1/0).map(f=>f.properties);let c;if(jee(t)&&r){const f=eY(u,r);c=Bee[t](f)}YP(t)&&(c=t(u)),i.properties.stat=c}else i.properties.point_count=1;return i})),this.data=JO("geojson")({type:"FeatureCollection",features:n}),this.executeTrans()}getFeatureById(e){const{type:t="geojson",geometry:r}=this.parser;if(t==="geojson"&&!this.cluster){const n=e<this.originData.features.length?this.originData.features[e]:"null",i=zee(n);if(i?.properties&&(this.transforms.length!==0||this.dataArrayChanged)){const a=this.data.dataArray.find(o=>o._id===e);i.properties=a}return i}else return t==="json"&&r?this.data.dataArray.find(n=>n._id===e):e<this.data.dataArray.length?this.data.dataArray[e]:"null"}updateFeaturePropertiesById(e,t){this.data.dataArray=this.data.dataArray.map(r=>r._id===e?Uv(Uv({},r),t):r),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}getFeatureId(e,t){const r=this.data.dataArray.find(n=>n[e]===t);return r?._id}setData(e,t){this.originData=e,this.dataArrayChanged=!1,this.initCfg(t),this.init().then(()=>{this.emit("update",{type:"update"})})}reloadAllTile(){var e;(e=this.tileset)==null||e.reloadAll()}reloadTilebyId(e,t,r){var n;(n=this.tileset)==null||n.reloadTileById(e,t,r)}reloadTileByLnglat(e,t,r){var n;(n=this.tileset)==null||n.reloadTileByLnglat(e,t,r)}getTileExtent(e,t){var r;return(r=this.tileset)==null?void 0:r.getTileExtent(e,t)}getTileByZXY(e,t,r){var n;return(n=this.tileset)==null?void 0:n.getTileByZXY(e,t,r)}reloadTileByExtent(e,t){var r;(r=this.tileset)==null||r.reloadTileByExtent(e,t)}destroy(){var e;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(e=this.tileset)==null||e.destroy()}processData(){return $P(this,null,function*(){return new Promise((e,t)=>{try{this.excuteParser(),this.initCluster(),this.executeTrans(),e({})}catch(r){t(r)}})})}initCfg(e){this.cfg=Vee(this.cfg,e,Hee);const t=this.cfg;t&&(t.parser&&(this.parser=t.parser),t.transforms&&(this.transforms=t.transforms),this.cluster=t.cluster||!1,t.clusterOptions&&(this.cluster=!0,this.clusterOptions=Uv(Uv({},this.clusterOptions),t.clusterOptions)))}init(){return $P(this,null,function*(){this.inited=!1,yield this.processData(),this.inited=!0})}excuteParser(){const e=this.parser,t=e.type||"geojson",r=JO(t);this.data=r(this.originData,e),this.tileset=this.initTileset(),!e.cancelExtent&&(this.extent=h$(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}setCenter(e){this.center=[(e[0]+e[2])/2,(e[1]+e[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}initTileset(){const{tilesetOptions:e}=this.data;return e?(this.isTile=!0,this.tileset?(this.tileset.updateOptions(e),this.tileset):new Y$(Uv({},e))):void 0}executeTrans(){this.transforms.forEach(t=>{const{type:r}=t,n=iX(r)(this.data,t);Object.assign(this.data,n)})}initCluster(){if(!this.cluster)return;const e=this.clusterOptions||{};this.clusterIndex=pU(this.data,e)}caculClusterExtent(e){let t=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(t=uC(ny(this.extent),e)),t[0].concat(t[1])}};function Gee(e,t){const{callback:r}=t;return r&&(e.dataArray=e.dataArray.filter(r)),e}var gC=6378e3;function qee(e,t){const r=e.dataArray,{size:n=10}=t,i=n/(2*Math.PI*gC)*(256<<20)/2,{gridHash:a,gridOffset:o}=Wee(r,n),u=Kee(a,o,t);return{yOffset:i,xOffset:i,radius:i,type:"grid",dataArray:u}}function Wee(e,t){let r=1/0,n=-1/0,i;for(const c of e)i=c.coordinates[1],Number.isFinite(i)&&(r=i<r?i:r,n=i>n?i:n);const a=(r+n)/2,o=$ee(t,a);if(o.xOffset<=0||o.yOffset<=0)return{gridHash:{},gridOffset:o};const u={};for(const c of e){const f=c.coordinates[1],h=c.coordinates[0];if(Number.isFinite(f)&&Number.isFinite(h)){const p=Math.floor((f+90)/o.yOffset),m=Math.floor((h+180)/o.xOffset),_=`${p}-${m}`;u[_]=u[_]||{count:0,points:[]},u[_].count+=1,u[_].points.push(c)}}return{gridHash:u,gridOffset:o}}function $ee(e,t){const r=Yee(e),n=Zee(t,e);return{yOffset:r,xOffset:n}}function Yee(e){return e/gC*(180/Math.PI)}function Zee(e,t){return t/gC*(180/Math.PI)/Math.cos(e*Math.PI/180)}function Kee(e,t,r){return Object.keys(e).reduce((n,i,a)=>{const o=i.split("-"),u=parseInt(o[0],10),c=parseInt(o[1],10),f={};if(r.field&&r.method){const h=E5(e[i].points,r.field);f[r.method]=y5[r.method](h)}return Object.assign(f,{_id:a,coordinates:Eo([-180+t.xOffset*(c+.5),-90+t.yOffset*(u+.5)]),rawData:e[i].points,count:e[i].count}),n.push(f),n},[])}var Eh=Math.PI/3,Qee=[0,Eh,2*Eh,3*Eh,4*Eh,5*Eh];function Jee(e){return e[0]}function ete(e){return e[1]}function tte(){var e=0,t=0,r=1,n=1,i=Jee,a=ete,o,u,c;function f(p){var m={},_=[],y,E=p.length;for(y=0;y<E;++y)if(!(isNaN(S=+i.call(null,b=p[y],y,p))||isNaN(A=+a.call(null,b,y,p)))){var b,S,A,R=Math.round(A=A/c),M=Math.round(S=S/u-(R&1)/2),P=A-R;if(Math.abs(P)*3>1){var I=S-M,w=M+(S<M?-1:1)/2,U=R+(A<R?-1:1),re=S-w,K=A-U;I*I+P*P>re*re+K*K&&(M=w+(R&1?1:-1)/2,R=U)}var H=M+"-"+R,x=m[H];x?x.push(b):(_.push(x=m[H]=[b]),x.x=(M+(R&1)/2)*u,x.y=R*c)}return _}function h(p){var m=0,_=0;return Qee.map(function(y){var E=Math.sin(y)*p,b=-Math.cos(y)*p,S=E-m,A=b-_;return m=E,_=b,[S,A]})}return f.hexagon=function(p){return"m"+h(p==null?o:+p).join("l")+"z"},f.centers=function(){for(var p=[],m=Math.round(t/c),_=Math.round(e/u),y=m*c;y<n+o;y+=c,++m)for(var E=_*u+(m&1)*u/2;E<r+u/2;E+=u)p.push([E,y]);return p},f.mesh=function(){var p=h(o).slice(0,4).join("l");return f.centers().map(function(m){return"M"+m+"m"+p}).join("")},f.x=function(p){return arguments.length?(i=p,f):i},f.y=function(p){return arguments.length?(a=p,f):a},f.radius=function(p){return arguments.length?(o=+p,u=o*2*Math.sin(Eh),c=o*1.5,f):o},f.size=function(p){return arguments.length?(e=t=0,r=+p[0],n=+p[1],f):[r-e,n-t]},f.extent=function(p){return arguments.length?(e=+p[0][0],t=+p[0][1],r=+p[1][0],n=+p[1][1],f):[[e,t],[r,n]]},f.radius(1)}var rte=Object.defineProperty,nte=Object.defineProperties,ite=Object.getOwnPropertyDescriptors,ZP=Object.getOwnPropertySymbols,ate=Object.prototype.hasOwnProperty,ote=Object.prototype.propertyIsEnumerable,KP=(e,t,r)=>t in e?rte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ste=(e,t)=>{for(var r in t||(t={}))ate.call(t,r)&&KP(e,r,t[r]);if(ZP)for(var r of ZP(t))ote.call(t,r)&&KP(e,r,t[r]);return e},ute=(e,t)=>nte(e,ite(t)),lte=6378e3;function cte(e,t){const r=e.dataArray,{size:n=10,method:i="sum"}=t,a=n/(2*Math.PI*lte)*(256<<20)/2,o=r.map(h=>{const[p,m]=Eo(h.coordinates);return ute(ste({},h),{coordinates:[p,m]})});return{dataArray:tte().radius(a).x(h=>h.coordinates[0]).y(h=>h.coordinates[1])(o).map((h,p)=>{if(t.field&&i){const m=E5(h,t.field);h[i]=y5[i](m)}return{[t.method]:h[i],count:h.length,rawData:h,coordinates:[h.x,h.y],_id:p}}),radius:a,xOffset:a,yOffset:a,type:"hexagon"}}var fte=Object.defineProperty,QP=Object.getOwnPropertySymbols,dte=Object.prototype.hasOwnProperty,hte=Object.prototype.propertyIsEnumerable,JP=(e,t,r)=>t in e?fte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,eD=(e,t)=>{for(var r in t||(t={}))dte.call(t,r)&&JP(e,r,t[r]);if(QP)for(var r of QP(t))hte.call(t,r)&&JP(e,r,t[r]);return e};function pte(e,t){const{sourceField:r,targetField:n,data:i}=t,a={};return i.forEach(o=>{a[o[r]]=o}),e.dataArray=e.dataArray.map(o=>{const u=o[n];return eD(eD({},o),a[u])}),e}function vte(e,t){const{callback:r}=t;return r&&(e.dataArray=e.dataArray.map(r)),e}var mte=Object.defineProperty,_te=Object.defineProperties,gte=Object.getOwnPropertyDescriptors,tD=Object.getOwnPropertySymbols,yte=Object.prototype.hasOwnProperty,Ete=Object.prototype.propertyIsEnumerable,rD=(e,t,r)=>t in e?mte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bte=(e,t)=>{for(var r in t||(t={}))yte.call(t,r)&&rD(e,r,t[r]);if(tD)for(var r of tD(t))Ete.call(t,r)&&rD(e,r,t[r]);return e},Tte=(e,t)=>_te(e,gte(t));function Ste(e){let t=1/0,r=-1/0,n=1/0,i=-1/0;e.forEach(u=>{const c=u.coordinates;if(!c)return;const f=h=>{if(typeof h[0]=="number"&&typeof h[1]=="number"){const[p,m]=h;t=Math.min(t,p),r=Math.max(r,p),n=Math.min(n,m),i=Math.max(i,m)}else Array.isArray(h[0])&&h.forEach(f)};f(c)});const a=(t+r)/2,o=(n+i)/2;return[a,o]}function Ate(e,t){const[r,n]=t;return e.map(i=>{if(!i.coordinates)return i;const a=o=>{if(typeof o[0]=="number"&&typeof o[1]=="number"){const u=Number((o[0]-r).toPrecision(15)),c=Number((o[1]-n).toPrecision(15));return[u,c,...o.slice(2)||[]]}else if(Array.isArray(o[0]))return o.map(a);return o};return Tte(bte({},i),{coordinates:a(i.coordinates)})})}function xte(e,t={}){const{enableRelativeCoordinates:r=!1,relativeOrigin:n}=t;if(!r)return{dataArray:e,relativeOrigin:[0,0],originalExtent:[0,0,0,0]};let i=1/0,a=-1/0,o=1/0,u=-1/0;e.forEach(p=>{const m=p.coordinates;if(!m)return;const _=y=>{if(typeof y[0]=="number"&&typeof y[1]=="number"){const[E,b]=y;i=Math.min(i,E),a=Math.max(a,E),o=Math.min(o,b),u=Math.max(u,b)}else Array.isArray(y[0])&&y.forEach(_)};_(m)});const c=[i,o,a,u],f=n||Ste(e);return{dataArray:Ate(e,f),relativeOrigin:f,originalExtent:c}}Ja("rasterTile",WJ);Ja("mvt",RZ);Ja("geojsonvt",HY);Ja("testTile",Aee);Ja("geojson",mY);Ja("jsonTile",nZ);Ja("image",N5);Ja("csv",oY);Ja("json",C5);Ja("raster",zZ);Ja("rasterRgb",pee);Ja("rgb",see);Ja("ndi",eee);lp("cluster",pU);lp("filter",Gee);lp("join",pte);lp("map",vte);lp("grid",qee);lp("hexagon",cte);var Rte=Xee;const{merge:xge}=Ln;window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',(function(e){try{let f=function(){u||(u=!0,a())},h=function(){try{o.documentElement.doScroll("left")}catch{return void setTimeout(h,50)}f()};var r=(r=document.getElementsByTagName("script"))[r.length-1],t=r.getAttribute("data-injectcss"),r=r.getAttribute("data-disable-injectsvg");if(!r){var n,i,a,o,u,c=function(p,m){m.parentNode.insertBefore(p,m)};if(t&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(p){console&&console.log(p)}}n=function(){var p,m=document.createElement("div");m.innerHTML=e._iconfont_svg_string_3580659,(m=m.getElementsByTagName("svg")[0])&&(m.setAttribute("aria-hidden","true"),m.style.position="absolute",m.style.width=0,m.style.height=0,m.style.overflow="hidden",m=m,(p=document.body).firstChild?c(m,p.firstChild):p.appendChild(m))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(n,0):(i=function(){document.removeEventListener("DOMContentLoaded",i,!1),n()},document.addEventListener("DOMContentLoaded",i,!1)):document.attachEvent&&(a=n,o=e.document,u=!1,h(),o.onreadystatechange=function(){o.readyState=="complete"&&(o.onreadystatechange=null,f())})}}catch{}})(window);class Gm extends lC{constructor(t){super(),B(this,"controlOption",void 0),B(this,"container",void 0),B(this,"isShow",void 0),B(this,"sceneContainer",void 0),B(this,"scene",void 0),B(this,"mapsService",void 0),B(this,"renderService",void 0),B(this,"layerService",void 0),B(this,"controlService",void 0),B(this,"configService",void 0),Gm.controlCount++,this.controlOption=Xe(Xe({},this.getDefault(t)),t||{})}getOptions(){return this.controlOption}setOptions(t){const r=this.getDefault(t);Object.entries(t).forEach(([n,i])=>{i===void 0&&(t[n]=r[n])}),"position"in t&&this.setPosition(t.position),"className"in t&&this.setClassName(t.className),"style"in t&&this.setStyle(t.style),this.controlOption=Xe(Xe({},this.controlOption),t)}addTo(t){this.mapsService=t.mapService,this.renderService=t.rendererService,this.layerService=t.layerService,this.controlService=t.controlService,this.configService=t.globalConfigService,this.scene=t.sceneService,this.sceneContainer=t,this.isShow=!0,this.container=this.onAdd(),Of(this.container,"l7-control");const{className:r,style:n}=this.controlOption;return r&&this.setClassName(r),n&&this.setStyle(n),this.insertContainer(),this.emit("add",this),this}remove(){if(!this.mapsService)return this;Pu(this.container),this.onRemove(),this.emit("remove",this)}onAdd(){return ai("div")}onRemove(){}show(){const t=this.container;ry(t,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}hide(){const t=this.container;Of(t,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}getDefault(t){return{position:ay.TOPRIGHT,name:`${Gm.controlCount}`}}getContainer(){return this.container}getIsShow(){return this.isShow}_refocusOnMap(t){if(this.mapsService&&t&&t.screenX>0&&t.screenY>0){const r=this.mapsService.getContainer();r!==null&&r.focus()}}setPosition(t=ay.TOPLEFT){const r=this.controlService;return r&&r.removeControl(this),this.controlOption.position=t,r&&r.addControl(this,this.sceneContainer),this}setClassName(t){const r=this.container,{className:n}=this.controlOption;n&&ry(r,n),t&&Of(r,t)}setStyle(t){const r=this.container;t?r.setAttribute("style",t):r.removeAttribute("style")}insertContainer(){const t=this.controlOption.position,r=this.container;if(t instanceof Element)t.appendChild(r);else{const n=this.controlService.controlCorners[t];["bottomleft","bottomright","righttop","rightbottom"].includes(t)?n.insertBefore(r,n.firstChild):n.appendChild(r)}}checkUpdateOption(t,r){return r.some(n=>n in t)}}B(Gm,"controlCount",0);class vy extends La.EventEmitter{get buttonRect(){return this.button.getBoundingClientRect()}constructor(t,r){super(),B(this,"popperDOM",void 0),B(this,"contentDOM",void 0),B(this,"button",void 0),B(this,"option",void 0),B(this,"isShow",!1),B(this,"content",void 0),B(this,"timeout",null),B(this,"show",()=>this.isShow||!this.contentDOM.innerHTML?this:(this.resetPopperPosition(),ry(this.popperDOM,"l7-popper-hide"),this.isShow=!0,this.option.unique&&vy.conflictPopperList.forEach(n=>{n!==this&&n.isShow&&n.hide()}),this.emit("show"),window.addEventListener("pointerdown",this.onPopperUnClick),this)),B(this,"hide",()=>this.isShow?(Of(this.popperDOM,"l7-popper-hide"),this.isShow=!1,this.emit("hide"),window.removeEventListener("pointerdown",this.onPopperUnClick),this):this),B(this,"setHideTimeout",()=>{this.timeout||(this.timeout=window.setTimeout(()=>{this.isShow&&(this.hide(),this.timeout=null)},300))}),B(this,"clearHideTimeout",()=>{this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)}),B(this,"onBtnClick",()=>{this.isShow?this.hide():this.show()}),B(this,"onPopperUnClick",n=>{c$(n.target,[".l7-button-control",".l7-popper-content"])||this.hide()}),B(this,"onBtnMouseLeave",()=>{this.setHideTimeout()}),B(this,"onBtnMouseMove",()=>{this.clearHideTimeout(),!this.isShow&&this.show()}),this.button=t,this.option=r,this.init(),r.unique&&vy.conflictPopperList.push(this)}getPopperDOM(){return this.popperDOM}getIsShow(){return this.isShow}getContent(){return this.content}setContent(t){typeof t=="string"?this.contentDOM.innerHTML=t:t instanceof HTMLElement&&(sC(this.contentDOM),this.contentDOM.appendChild(t)),this.content=t}init(){const{trigger:t}=this.option;this.popperDOM=this.createPopper(),t==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}destroy(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),Pu(this.popperDOM)}resetPopperPosition(){const t={},{container:r,offset:n=[0,0],placement:i}=this.option,[a,o]=n,u=this.button.getBoundingClientRect(),c=r.getBoundingClientRect(),{left:f,right:h,top:p,bottom:m}=u$(u,c);let _=!1,y=!1;/^(left|right)/.test(i)?(i.includes("left")?t.right=`${u.width+h}px`:i.includes("right")&&(t.left=`${u.width+f}px`),i.includes("start")?t.top=`${p}px`:i.includes("end")?t.bottom=`${m}px`:(t.top=`${p+u.height/2}px`,y=!0,t.transform=`translate(${a}px, calc(${o}px - 50%))`)):/^(top|bottom)/.test(i)&&(i.includes("top")?t.bottom=`${u.height+m}px`:i.includes("bottom")&&(t.top=`${u.height+p}px`),i.includes("start")?t.left=`${f}px`:i.includes("end")?t.right=`${h}px`:(t.left=`${f+u.width/2}px`,_=!0,t.transform=`translate(calc(${a}px - 50%), ${o}px)`)),t.transform=`translate(calc(${a}px - ${_?"50%":"0%"}), calc(${o}px - ${y?"50%":"0%"})`;const E=i.split("-");E.length&&Of(this.popperDOM,E.map(b=>`l7-popper-${b}`).join(" ")),v5(this.popperDOM,s$(t))}createPopper(){const{container:t,className:r="",content:n}=this.option,i=ai("div",`l7-popper l7-popper-hide ${r}`),a=ai("div","l7-popper-content"),o=ai("div","l7-popper-arrow");return i.appendChild(a),i.appendChild(o),t.appendChild(i),this.popperDOM=i,this.contentDOM=a,n&&this.setContent(n),i}}B(vy,"conflictPopperList",[]);const Cte=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.classList.add("l7-iconfont"),t.setAttribute("aria-hidden","true");const r=document.createElementNS("http://www.w3.org/2000/svg","use");return r.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${e}`),t.appendChild(r),t},nD=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Bu=(()=>{if(typeof document>"u")return!1;const e=nD[0],t={};for(const r of nD)if(r?.[1]in document){for(const[i,a]of r.entries())t[e[i]]=a;return t}return!1})(),iD={change:Bu.fullscreenchange,error:Bu.fullscreenerror};let mo={request(e=document.documentElement,t){return new Promise((r,n)=>{const i=()=>{mo.off("change",i),r()};mo.on("change",i);const a=e[Bu.requestFullscreen](t);a instanceof Promise&&a.then(i).catch(n)})},exit(){return new Promise((e,t)=>{if(!mo.isFullscreen){e();return}const r=()=>{mo.off("change",r),e()};mo.on("change",r);const n=document[Bu.exitFullscreen]();n instanceof Promise&&n.then(r).catch(t)})},toggle(e,t){return mo.isFullscreen?mo.exit():mo.request(e,t)},onchange(e){mo.on("change",e)},onerror(e){mo.on("error",e)},on(e,t){const r=iD[e];r&&document.addEventListener(r,t,!1)},off(e,t){const r=iD[e];r&&document.removeEventListener(r,t,!1)},raw:Bu};Object.defineProperties(mo,{isFullscreen:{get:()=>!!document[Bu.fullscreenElement]},element:{enumerable:!0,get:()=>{var e;return(e=document[Bu.fullscreenElement])!==null&&e!==void 0?e:void 0}},isEnabled:{enumerable:!0,get:()=>!!document[Bu.fullscreenEnabled]}});Bu||(mo={isEnabled:!1});class Ote extends Gm{getDefault(){return{position:ay.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}onAdd(){const t=ai("div","l7-control-logo");return this.setLogoContent(t),t}onRemove(){return null}setOptions(t){super.setOptions(t),this.checkUpdateOption(t,["img","href"])&&(sC(this.container),this.setLogoContent(this.container))}setLogoContent(t){const{href:r,img:n}=this.controlOption,i=ai("img");if(i.setAttribute("src",n),i.setAttribute("aria-label","AntV logo"),l$(i),r){const a=ai("a","l7-control-logo-link");a.target="_blank",a.href=r,a.rel="noopener nofollow",a.setAttribute("rel","noopener nofollow"),a.appendChild(i),t.appendChild(a)}else t.appendChild(i)}}class Mte{constructor(){B(this,"mapService",void 0),B(this,"fontService",void 0)}apply(t,{styleAttributeService:r,mapService:n,fontService:i}){var a=this;this.mapService=n,this.fontService=i,t.hooks.init.tapPromise("DataMappingPlugin",Je(function*(){t.log(Ai.MappingStart,Vi.INIT),a.generateMaping(t,{styleAttributeService:r}),t.log(Ai.MappingEnd,Vi.INIT)})),t.hooks.beforeRenderData.tapPromise("DataMappingPlugin",(function(){var o=Je(function*(u){if(!u)return u;t.dataState.dataMappingNeedUpdate=!1,t.log(Ai.MappingStart,Vi.UPDATE);const c=a.generateMaping(t,{styleAttributeService:r});return t.log(Ai.MappingEnd,Vi.UPDATE),c});return function(u){return o.apply(this,arguments)}})()),t.hooks.beforeRender.tap("DataMappingPlugin",()=>{const o=t.getSource();if(t.layerModelNeedUpdate||!o||!o.inited)return;const u=r.getLayerStyleAttributes()||[],c=r.getLayerStyleAttribute("filter"),{dataArray:f}=o.data;if(Array.isArray(f)&&f.length===0)return;const h=u.filter(m=>m.needRemapping);let p=f;if(c!=null&&c.needRemapping&&c!==null&&c!==void 0&&c.scale&&(p=f.filter(m=>this.applyAttributeMapping(c,m)[0])),h.length){const m=this.mapping(t,h,p,t.getEncodedData());t.setEncodedData(m)}})}generateMaping(t,{styleAttributeService:r}){const n=r.getLayerStyleAttributes()||[],i=r.getLayerStyleAttribute("filter"),{dataArray:a}=t.getSource().data;let o=a;i!=null&&i.scale&&(o=a.filter(c=>this.applyAttributeMapping(i,c)[0])),o=t.processData(o);const u=this.mapping(t,n,o,void 0);return t.setEncodedData(u),t.emit("dataUpdate",null),!0}mapping(t,r,n,i){const a=r.filter(u=>u.scale!==void 0).filter(u=>u.name!=="filter"),o=n.map((u,c)=>{const f=i?i[c]:{},h=Xe({id:u._id,coordinates:u.coordinates},f);return a.forEach(p=>{let m=this.applyAttributeMapping(p,u);(p.name==="color"||p.name==="stroke")&&(m=m.map(_=>fn(_))),h[p.name]=Array.isArray(m)&&m.length===1?m[0]:m,p.name==="shape"&&(h.shape=this.fontService.getIconFontKey(h[p.name]))}),h});return r.forEach(u=>{u.needRemapping=!1}),this.adjustData2SimpleCoordinates(o),o}adjustData2SimpleCoordinates(t){t.length>0&&this.mapService.version==="SIMPLE"&&t.map(r=>{r.simpleCoordinate||(r.coordinates=this.unProjectCoordinates(r.coordinates),r.simpleCoordinate=!0)})}unProjectCoordinates(t){if(typeof t[0]=="number")return this.mapService.simpleMapCoord.unproject(t);if(t[0]&&t[0][0]instanceof Array){const r=[];return t.map(n=>{const i=[];n.map(a=>{i.push(this.mapService.simpleMapCoord.unproject(a))}),r.push(i)}),r}else{const r=[];return t.map(n=>{r.push(this.mapService.simpleMapCoord.unproject(n))}),r}}applyAttributeMapping(t,r){var n;if(!t.scale)return[];const i=(t==null||(n=t.scale)===null||n===void 0?void 0:n.scalers)||[],a=[];return i.forEach(({field:u})=>{var c;(r.hasOwnProperty(u)||((c=t.scale)===null||c===void 0?void 0:c.type)==="variable")&&a.push(r[u])}),t.mapping?t.mapping(a):[]}getArrowPoints(t,r){const n=[r[0]-t[0],r[1]-t[1]],i=_$(n);return[t[0]+i[0]*1e-4,t[1]+i[1]*1e-4]}}class wte{constructor(){B(this,"mapService",void 0)}apply(t){var r=this;this.mapService=t.getContainer().mapService,t.hooks.init.tapPromise("DataSourcePlugin",Je(function*(){t.log(Ai.SourceInitStart,Vi.INIT);let n=t.getSource();if(!n){const{data:i,options:a}=t.sourceOption||t.defaultSourceConfig;n=new Rte(i,a),t.setSource(n)}n.inited?(r.updateClusterData(t),t.log(Ai.SourceInitEnd,Vi.INIT)):yield new Promise(i=>{n.on("update",a=>{a.type==="inited"&&(r.updateClusterData(t),t.log(Ai.SourceInitEnd,Vi.INIT)),i(null)})})})),t.hooks.beforeRenderData.tapPromise("DataSourcePlugin",Je(function*(){const n=r.updateClusterData(t),i=t.dataState.dataSourceNeedUpdate;return t.dataState.dataSourceNeedUpdate=!1,n||i}))}updateClusterData(t){if(t.isTileLayer||t.tileLayer||!t.getSource())return!1;const r=t.getSource(),n=r.cluster,{zoom:i=0}=r.clusterOptions,a=this.mapService.getZoom()-1,o=t.dataState.dataSourceNeedUpdate;return n&&o&&r.updateClusterData(Math.floor(a)),n&&Math.abs(t.clusterZoom-a)>=1?(i!==Math.floor(a)&&r.updateClusterData(Math.floor(a)),t.clusterZoom=a,!0):!1}}function aD(e,t){let r,n;for(const i of e)i!=null&&(r===void 0?i>=i&&(r=n=i):(r>i&&(r=i),n<i&&(n=i)));return[r,n]}function Nte(e,t,r,n,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*r+(1+3*e+3*a-3*o)*n+o*i)/6}function Ite(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),i=e[n],a=e[n+1],o=n>0?e[n-1]:2*i-a,u=n<t-1?e[n+2]:2*a-i;return Nte((r-n/t)*t,o,i,a,u)}}function yC(e){return function(){return e}}function Pte(e,t){return function(r){return e+r*t}}function Dte(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Lte(e){return(e=+e)==1?mU:function(t,r){return r-t?Dte(t,r,e):yC(isNaN(t)?r:t)}}function mU(e,t){var r=t-e;return r?Pte(e,r):yC(isNaN(e)?t:e)}const oD=(function e(t){var r=Lte(t);function n(i,a){var o=r((i=ty(i)).r,(a=ty(a)).r),u=r(i.g,a.g),c=r(i.b,a.b),f=mU(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=u(h),i.b=c(h),i.opacity=f(h),i+""}}return n.gamma=e,n})(1);function Bte(e){return function(t){var r=t.length,n=new Array(r),i=new Array(r),a=new Array(r),o,u;for(o=0;o<r;++o)u=ty(t[o]),n[o]=u.r||0,i[o]=u.g||0,a[o]=u.b||0;return n=e(n),i=e(i),a=e(a),u.opacity=1,function(c){return u.r=n(c),u.g=i(c),u.b=a(c),u+""}}}var Fte=Bte(Ite);function Ute(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=e[i]*(1-a)+t[i]*a;return n}}function kte(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function zte(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)i[o]=EC(e[o],t[o]);for(;o<r;++o)a[o]=t[o];return function(u){for(o=0;o<n;++o)a[o]=i[o](u);return a}}function jte(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function _y(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Vte(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=EC(e[i],t[i]):n[i]=t[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var FR=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gx=new RegExp(FR.source,"g");function Hte(e){return function(){return e}}function Xte(e){return function(t){return e(t)+""}}function Gte(e,t){var r=FR.lastIndex=gx.lastIndex=0,n,i,a,o=-1,u=[],c=[];for(e=e+"",t=t+"";(n=FR.exec(e))&&(i=gx.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),u[o]?u[o]+=a:u[++o]=a),(n=n[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,c.push({i:o,x:_y(n,i)})),r=gx.lastIndex;return r<t.length&&(a=t.slice(r),u[o]?u[o]+=a:u[++o]=a),u.length<2?c[0]?Xte(c[0].x):Hte(t):(t=c.length,function(f){for(var h=0,p;h<t;++h)u[(p=c[h]).i]=p.x(f);return u.join("")})}function EC(e,t){var r=typeof t,n;return t==null||r==="boolean"?yC(t):(r==="number"?_y:r==="string"?(n=Vh(t))?(t=n,oD):Gte:t instanceof Vh?oD:t instanceof Date?jte:kte(t)?Ute:Array.isArray(t)?zte:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Vte:_y)(e,t)}function qte(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function bC(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _U(e){return e.length===1&&(e=Wte(e)),{left:function(t,r,n,i){for(n==null&&(n=0),i==null&&(i=t.length);n<i;){var a=n+i>>>1;e(t[a],r)<0?n=a+1:i=a}return n},right:function(t,r,n,i){for(n==null&&(n=0),i==null&&(i=t.length);n<i;){var a=n+i>>>1;e(t[a],r)>0?i=a:n=a+1}return n}}}function Wte(e){return function(t,r){return bC(e(t),r)}}var $te=_U(bC),bE=$te.right;function Yte(e){return e===null?NaN:+e}var UR=Math.sqrt(50),kR=Math.sqrt(10),zR=Math.sqrt(2);function gU(e,t,r){var n,i=-1,a,o,u;if(t=+t,e=+e,r=+r,e===t&&r>0)return[e];if((n=t<e)&&(a=e,e=t,t=a),(u=N0(e,t,r))===0||!isFinite(u))return[];if(u>0)for(e=Math.ceil(e/u),t=Math.floor(t/u),o=new Array(a=Math.ceil(t-e+1));++i<a;)o[i]=(e+i)*u;else for(e=Math.floor(e*u),t=Math.ceil(t*u),o=new Array(a=Math.ceil(e-t+1));++i<a;)o[i]=(e-i)/u;return n&&o.reverse(),o}function N0(e,t,r){var n=(t-e)/Math.max(0,r),i=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,i);return i>=0?(a>=UR?10:a>=kR?5:a>=zR?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=UR?10:a>=kR?5:a>=zR?2:1)}function jR(e,t,r){var n=Math.abs(t-e)/Math.max(0,r),i=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),a=n/i;return a>=UR?i*=10:a>=kR?i*=5:a>=zR&&(i*=2),t<e?-i:i}function Zte(e,t,r){if(r==null&&(r=Yte),!!(n=e.length)){if((t=+t)<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),o=+r(e[a],a,e),u=+r(e[a+1],a+1,e);return o+(u-o)*(i-a)}}function Ac(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function yU(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e);break}return this}var po="$";function gy(){}gy.prototype=yy.prototype={constructor:gy,has:function(e){return po+e in this},get:function(e){return this[po+e]},set:function(e,t){return this[po+e]=t,this},remove:function(e){var t=po+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===po&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===po&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===po&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===po&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===po&&++e;return e},empty:function(){for(var e in this)if(e[0]===po)return!1;return!0},each:function(e){for(var t in this)t[0]===po&&e(this[t],t.slice(1),this)}};function yy(e,t){var r=new gy;if(e instanceof gy)e.each(function(u,c){r.set(c,u)});else if(Array.isArray(e)){var n=-1,i=e.length,a;if(t==null)for(;++n<i;)r.set(n,e[n]);else for(;++n<i;)r.set(t(a=e[n],n,e),a)}else if(e)for(var o in e)r.set(o,e[o]);return r}function sD(){}var mf=yy.prototype;sD.prototype={constructor:sD,has:mf.has,add:function(e){return e+="",this[po+e]=e,this},remove:mf.remove,clear:mf.clear,values:mf.keys,size:mf.size,empty:mf.empty,each:mf.each};var EU=Array.prototype,bU=EU.map,Bf=EU.slice,uD={name:"implicit"};function Ey(){var e=yy(),t=[],r=[],n=uD;function i(a){var o=a+"",u=e.get(o);if(!u){if(n!==uD)return n;e.set(o,u=t.push(a))}return r[(u-1)%r.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=yy();for(var o=-1,u=a.length,c,f;++o<u;)e.has(f=(c=a[o])+"")||e.set(f,t.push(c));return i},i.range=function(a){return arguments.length?(r=Bf.call(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return Ey(t,r).unknown(n)},Ac.apply(i,arguments),i}function Kte(e){return function(){return e}}function Qte(e){return+e}var lD=[0,1];function ea(e){return e}function VR(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Kte(isNaN(t)?NaN:.5)}function cD(e){var t=e[0],r=e[e.length-1],n;return t>r&&(n=t,t=r,r=n),function(i){return Math.max(t,Math.min(r,i))}}function Jte(e,t,r){var n=e[0],i=e[1],a=t[0],o=t[1];return i<n?(n=VR(i,n),a=r(o,a)):(n=VR(n,i),a=r(a,o)),function(u){return a(n(u))}}function ere(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)i[o]=VR(e[o],e[o+1]),a[o]=r(t[o],t[o+1]);return function(u){var c=bE(e,u,1,n)-1;return a[c](i[c](u))}}function TE(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function TC(){var e=lD,t=lD,r=EC,n,i,a,o=ea,u,c,f;function h(){return u=Math.min(e.length,t.length)>2?ere:Jte,c=f=null,p}function p(m){return isNaN(m=+m)?a:(c||(c=u(e.map(n),t,r)))(n(o(m)))}return p.invert=function(m){return o(i((f||(f=u(t,e.map(n),_y)))(m)))},p.domain=function(m){return arguments.length?(e=bU.call(m,Qte),o===ea||(o=cD(e)),h()):e.slice()},p.range=function(m){return arguments.length?(t=Bf.call(m),h()):t.slice()},p.rangeRound=function(m){return t=Bf.call(m),r=qte,h()},p.clamp=function(m){return arguments.length?(o=m?cD(e):ea,p):o!==ea},p.interpolate=function(m){return arguments.length?(r=m,h()):r},p.unknown=function(m){return arguments.length?(a=m,p):a},function(m,_){return n=m,i=_,h()}}function TU(e,t){return TC()(e,t)}function tre(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function by(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Gh(e){return e=by(Math.abs(e)),e?e[1]:NaN}function rre(e,t){return function(r,n){for(var i=r.length,a=[],o=0,u=e[0],c=0;i>0&&u>0&&(c+u+1>n&&(u=Math.max(1,n-c)),a.push(r.substring(i-=u,i+u)),!((c+=u+1)>n));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}}function nre(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var ire=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ty(e){if(!(t=ire.exec(e)))throw new Error("invalid format: "+e);var t;return new SC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ty.prototype=SC.prototype;function SC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}SC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function are(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var SU;function ore(e,t){var r=by(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(SU=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+by(e,Math.max(0,t+a-1))[0]}function fD(e,t){var r=by(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const dD={"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:tre,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return fD(e*100,t)},r:fD,s:ore,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function hD(e){return e}var pD=Array.prototype.map,vD=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function sre(e){var t=e.grouping===void 0||e.thousands===void 0?hD:rre(pD.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal+"",a=e.numerals===void 0?hD:nre(pD.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",u=e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function f(p){p=Ty(p);var m=p.fill,_=p.align,y=p.sign,E=p.symbol,b=p.zero,S=p.width,A=p.comma,R=p.precision,M=p.trim,P=p.type;P==="n"?(A=!0,P="g"):dD[P]||(R===void 0&&(R=12),M=!0,P="g"),(b||m==="0"&&_==="=")&&(b=!0,m="0",_="=");var I=E==="$"?r:E==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",w=E==="$"?n:/[%p]/.test(P)?o:"",U=dD[P],re=/[defgprs%]/.test(P);R=R===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,R)):Math.max(0,Math.min(20,R));function K(H){var x=I,N=w,j,fe,O;if(P==="c")N=U(H)+N,H="";else{H=+H;var k=H<0||1/H<0;if(H=isNaN(H)?c:U(Math.abs(H),R),M&&(H=are(H)),k&&+H==0&&y!=="+"&&(k=!1),x=(k?y==="("?y:u:y==="-"||y==="("?"":y)+x,N=(P==="s"?vD[8+SU/3]:"")+N+(k&&y==="("?")":""),re){for(j=-1,fe=H.length;++j<fe;)if(O=H.charCodeAt(j),48>O||O>57){N=(O===46?i+H.slice(j+1):H.slice(j))+N,H=H.slice(0,j);break}}}A&&!b&&(H=t(H,1/0));var V=x.length+H.length+N.length,ee=V<S?new Array(S-V+1).join(m):"";switch(A&&b&&(H=t(ee+H,ee.length?S-N.length:1/0),ee=""),_){case"<":H=x+H+N+ee;break;case"=":H=x+ee+H+N;break;case"^":H=ee.slice(0,V=ee.length>>1)+x+H+N+ee.slice(V);break;default:H=ee+x+H+N;break}return a(H)}return K.toString=function(){return p+""},K}function h(p,m){var _=f((p=Ty(p),p.type="f",p)),y=Math.max(-8,Math.min(8,Math.floor(Gh(m)/3)))*3,E=Math.pow(10,-y),b=vD[8+y/3];return function(S){return _(E*S)+b}}return{format:f,formatPrefix:h}}var n0,AC,AU;ure({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function ure(e){return n0=sre(e),AC=n0.format,AU=n0.formatPrefix,n0}function lre(e){return Math.max(0,-Gh(Math.abs(e)))}function cre(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Gh(t)/3)))*3-Gh(Math.abs(e)))}function fre(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Gh(t)-Gh(e))+1}function dre(e,t,r,n){var i=jR(e,t,r),a;switch(n=Ty(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=cre(i,o))&&(n.precision=a),AU(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=fre(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=lre(i))&&(n.precision=a-(n.type==="%")*2);break}}return AC(n)}function d_(e){var t=e.domain;return e.ticks=function(r){var n=t();return gU(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return dre(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,a=n.length-1,o=n[i],u=n[a],c;return u<o&&(c=o,o=u,u=c,c=i,i=a,a=c),c=N0(o,u,r),c>0?(o=Math.floor(o/c)*c,u=Math.ceil(u/c)*c,c=N0(o,u,r)):c<0&&(o=Math.ceil(o*c)/c,u=Math.floor(u*c)/c,c=N0(o,u,r)),c>0?(n[i]=Math.floor(o/c)*c,n[a]=Math.ceil(u/c)*c,t(n)):c<0&&(n[i]=Math.ceil(o*c)/c,n[a]=Math.floor(u*c)/c,t(n)),e},e}function xU(){var e=TU(ea,ea);return e.copy=function(){return TE(e,xU())},Ac.apply(e,arguments),d_(e)}function RU(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],a=e[n],o;return a<i&&(o=r,r=n,n=o,o=i,i=a,a=o),e[r]=t.floor(i),e[n]=t.ceil(a),e}function mD(e){return Math.log(e)}function _D(e){return Math.exp(e)}function hre(e){return-Math.log(-e)}function pre(e){return-Math.exp(-e)}function vre(e){return isFinite(e)?+("1e"+e):e<0?0:e}function mre(e){return e===10?vre:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function _re(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function gD(e){return function(t){return-e(-t)}}function gre(e){var t=e(mD,_D),r=t.domain,n=10,i,a;function o(){return i=_re(n),a=mre(n),r()[0]<0?(i=gD(i),a=gD(a),e(hre,pre)):e(mD,_D),t}return t.base=function(u){return arguments.length?(n=+u,o()):n},t.domain=function(u){return arguments.length?(r(u),o()):r()},t.ticks=function(u){var c=r(),f=c[0],h=c[c.length-1],p;(p=h<f)&&(m=f,f=h,h=m);var m=i(f),_=i(h),y,E,b,S=u==null?10:+u,A=[];if(!(n%1)&&_-m<S){if(m=Math.round(m)-1,_=Math.round(_)+1,f>0){for(;m<_;++m)for(E=1,y=a(m);E<n;++E)if(b=y*E,!(b<f)){if(b>h)break;A.push(b)}}else for(;m<_;++m)for(E=n-1,y=a(m);E>=1;--E)if(b=y*E,!(b<f)){if(b>h)break;A.push(b)}}else A=gU(m,_,Math.min(_-m,S)).map(a);return p?A.reverse():A},t.tickFormat=function(u,c){if(c==null&&(c=n===10?".0e":","),typeof c!="function"&&(c=AC(c)),u===1/0)return c;u==null&&(u=10);var f=Math.max(1,n*u/t.ticks().length);return function(h){var p=h/a(Math.round(i(h)));return p*n<n-.5&&(p*=n),p<=f?c(h):""}},t.nice=function(){return r(RU(r(),{floor:function(u){return a(Math.floor(i(u)))},ceil:function(u){return a(Math.ceil(i(u)))}}))},t}function CU(){var e=gre(TC()).domain([1,10]);return e.copy=function(){return TE(e,CU()).base(e.base())},Ac.apply(e,arguments),e}function yD(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function yre(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Ere(e){return e<0?-e*e:e*e}function bre(e){var t=e(ea,ea),r=1;function n(){return r===1?e(ea,ea):r===.5?e(yre,Ere):e(yD(r),yD(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},d_(t)}function OU(){var e=bre(TC());return e.copy=function(){return TE(e,OU()).exponent(e.exponent())},Ac.apply(e,arguments),e}function MU(){var e=[],t=[],r=[],n;function i(){var o=0,u=Math.max(1,t.length);for(r=new Array(u-1);++o<u;)r[o-1]=Zte(e,o/u);return a}function a(o){return isNaN(o=+o)?n:t[bE(r,o)]}return a.invertExtent=function(o){var u=t.indexOf(o);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(var u=0,c=o.length,f;u<c;++u)f=o[u],f!=null&&!isNaN(f=+f)&&e.push(f);return e.sort(bC),i()},a.range=function(o){return arguments.length?(t=Bf.call(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return MU().domain(e).range(t).unknown(n)},Ac.apply(a,arguments)}function wU(){var e=0,t=1,r=1,n=[.5],i=[0,1],a;function o(c){return c<=c?i[bE(n,c,0,r)]:a}function u(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?(e=+c[0],t=+c[1],u()):[e,t]},o.range=function(c){return arguments.length?(r=(i=Bf.call(c)).length-1,u()):i.slice()},o.invertExtent=function(c){var f=i.indexOf(c);return f<0?[NaN,NaN]:f<1?[e,n[0]]:f>=r?[n[r-1],t]:[n[f-1],n[f]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return wU().domain([e,t]).range(i).unknown(a)},Ac.apply(d_(o),arguments)}function NU(){var e=[.5],t=[0,1],r,n=1;function i(a){return a<=a?t[bE(e,a,0,n)]:r}return i.domain=function(a){return arguments.length?(e=Bf.call(a),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Bf.call(a),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return NU().domain(e).range(t).unknown(r)},Ac.apply(i,arguments)}var yx=new Date,Ex=new Date;function _a(e,t,r,n){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=function(a){return e(a=new Date(+a)),a},i.ceil=function(a){return e(a=new Date(a-1)),t(a,1),e(a),a},i.round=function(a){var o=i(a),u=i.ceil(a);return a-o<u-a?o:u},i.offset=function(a,o){return t(a=new Date(+a),o==null?1:Math.floor(o)),a},i.range=function(a,o,u){var c=[],f;if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<o)||!(u>0))return c;do c.push(f=new Date(+a)),t(a,u),e(a);while(f<a&&a<o);return c},i.filter=function(a){return _a(function(o){if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},function(o,u){if(o>=o)if(u<0)for(;++u<=0;)for(;t(o,-1),!a(o););else for(;--u>=0;)for(;t(o,1),!a(o););})},r&&(i.count=function(a,o){return yx.setTime(+a),Ex.setTime(+o),e(yx),e(Ex),Math.floor(r(yx,Ex))},i.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?function(o){return n(o)%a===0}:function(o){return i.count(0,o)%a===0}):i}),i}var Sy=_a(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});Sy.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?_a(function(t){t.setTime(Math.floor(t/e)*e)},function(t,r){t.setTime(+t+r*e)},function(t,r){return(r-t)/e}):Sy};Sy.range;var Ay=1e3,qm=6e4,ED=36e5,IU=864e5,PU=6048e5,DU=_a(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*Ay)},function(e,t){return(t-e)/Ay},function(e){return e.getUTCSeconds()});DU.range;var LU=_a(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ay)},function(e,t){e.setTime(+e+t*qm)},function(e,t){return(t-e)/qm},function(e){return e.getMinutes()});LU.range;var BU=_a(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ay-e.getMinutes()*qm)},function(e,t){e.setTime(+e+t*ED)},function(e,t){return(t-e)/ED},function(e){return e.getHours()});BU.range;var SE=_a(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*qm)/IU},function(e){return e.getDate()-1});SE.range;function Wf(e){return _a(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,r){t.setDate(t.getDate()+r*7)},function(t,r){return(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*qm)/PU})}var xC=Wf(0),xy=Wf(1),Tre=Wf(2),Sre=Wf(3),qh=Wf(4),Are=Wf(5),xre=Wf(6);xC.range;xy.range;Tre.range;Sre.range;qh.range;Are.range;xre.range;var FU=_a(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});FU.range;var pc=_a(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});pc.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:_a(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,r){t.setFullYear(t.getFullYear()+r*e)})};pc.range;var RC=_a(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/IU},function(e){return e.getUTCDate()-1});RC.range;function $f(e){return _a(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCDate(t.getUTCDate()+r*7)},function(t,r){return(r-t)/PU})}var UU=$f(0),Ry=$f(1),Rre=$f(2),Cre=$f(3),Wh=$f(4),Ore=$f(5),Mre=$f(6);UU.range;Ry.range;Rre.range;Cre.range;Wh.range;Ore.range;Mre.range;var Ff=_a(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Ff.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:_a(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r*e)})};Ff.range;function bx(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Tx(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function kv(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function wre(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,o=e.shortDays,u=e.months,c=e.shortMonths,f=zv(i),h=jv(i),p=zv(a),m=jv(a),_=zv(o),y=jv(o),E=zv(u),b=jv(u),S=zv(c),A=jv(c),R={a:k,A:V,b:ee,B:oe,c:null,d:RD,e:RD,f:Jre,g:lne,G:fne,H:Zre,I:Kre,j:Qre,L:kU,m:ene,M:tne,p:ge,q:Ee,Q:MD,s:wD,S:rne,u:nne,U:ine,V:ane,w:one,W:sne,x:null,X:null,y:une,Y:cne,Z:dne,"%":OD},M={a:De,A:tt,b:$e,B:It,c:null,d:CD,e:CD,f:mne,g:Rne,G:One,H:hne,I:pne,j:vne,L:jU,m:_ne,M:gne,p:qe,q:St,Q:MD,s:wD,S:yne,u:Ene,U:bne,V:Tne,w:Sne,W:Ane,x:null,X:null,y:xne,Y:Cne,Z:Mne,"%":OD},P={a:K,A:H,b:x,B:N,c:j,d:AD,e:AD,f:qre,g:SD,G:TD,H:xD,I:xD,j:Vre,L:Gre,m:jre,M:Hre,p:re,q:zre,Q:$re,s:Yre,S:Xre,u:Lre,U:Bre,V:Fre,w:Dre,W:Ure,x:fe,X:O,y:SD,Y:TD,Z:kre,"%":Wre};R.x=I(r,R),R.X=I(n,R),R.c=I(t,R),M.x=I(r,M),M.X=I(n,M),M.c=I(t,M);function I(ke,_e){return function(ot){var Ce=[],Wt=-1,Xt=0,bt=ke.length,Pt,Nt,Jt;for(ot instanceof Date||(ot=new Date(+ot));++Wt<bt;)ke.charCodeAt(Wt)===37&&(Ce.push(ke.slice(Xt,Wt)),(Nt=bD[Pt=ke.charAt(++Wt)])!=null?Pt=ke.charAt(++Wt):Nt=Pt==="e"?" ":"0",(Jt=_e[Pt])&&(Pt=Jt(ot,Nt)),Ce.push(Pt),Xt=Wt+1);return Ce.push(ke.slice(Xt,Wt)),Ce.join("")}}function w(ke,_e){return function(ot){var Ce=kv(1900,void 0,1),Wt=U(Ce,ke,ot+="",0),Xt,bt;if(Wt!=ot.length)return null;if("Q"in Ce)return new Date(Ce.Q);if("s"in Ce)return new Date(Ce.s*1e3+("L"in Ce?Ce.L:0));if(_e&&!("Z"in Ce)&&(Ce.Z=0),"p"in Ce&&(Ce.H=Ce.H%12+Ce.p*12),Ce.m===void 0&&(Ce.m="q"in Ce?Ce.q:0),"V"in Ce){if(Ce.V<1||Ce.V>53)return null;"w"in Ce||(Ce.w=1),"Z"in Ce?(Xt=Tx(kv(Ce.y,0,1)),bt=Xt.getUTCDay(),Xt=bt>4||bt===0?Ry.ceil(Xt):Ry(Xt),Xt=RC.offset(Xt,(Ce.V-1)*7),Ce.y=Xt.getUTCFullYear(),Ce.m=Xt.getUTCMonth(),Ce.d=Xt.getUTCDate()+(Ce.w+6)%7):(Xt=bx(kv(Ce.y,0,1)),bt=Xt.getDay(),Xt=bt>4||bt===0?xy.ceil(Xt):xy(Xt),Xt=SE.offset(Xt,(Ce.V-1)*7),Ce.y=Xt.getFullYear(),Ce.m=Xt.getMonth(),Ce.d=Xt.getDate()+(Ce.w+6)%7)}else("W"in Ce||"U"in Ce)&&("w"in Ce||(Ce.w="u"in Ce?Ce.u%7:"W"in Ce?1:0),bt="Z"in Ce?Tx(kv(Ce.y,0,1)).getUTCDay():bx(kv(Ce.y,0,1)).getDay(),Ce.m=0,Ce.d="W"in Ce?(Ce.w+6)%7+Ce.W*7-(bt+5)%7:Ce.w+Ce.U*7-(bt+6)%7);return"Z"in Ce?(Ce.H+=Ce.Z/100|0,Ce.M+=Ce.Z%100,Tx(Ce)):bx(Ce)}}function U(ke,_e,ot,Ce){for(var Wt=0,Xt=_e.length,bt=ot.length,Pt,Nt;Wt<Xt;){if(Ce>=bt)return-1;if(Pt=_e.charCodeAt(Wt++),Pt===37){if(Pt=_e.charAt(Wt++),Nt=P[Pt in bD?_e.charAt(Wt++):Pt],!Nt||(Ce=Nt(ke,ot,Ce))<0)return-1}else if(Pt!=ot.charCodeAt(Ce++))return-1}return Ce}function re(ke,_e,ot){var Ce=f.exec(_e.slice(ot));return Ce?(ke.p=h[Ce[0].toLowerCase()],ot+Ce[0].length):-1}function K(ke,_e,ot){var Ce=_.exec(_e.slice(ot));return Ce?(ke.w=y[Ce[0].toLowerCase()],ot+Ce[0].length):-1}function H(ke,_e,ot){var Ce=p.exec(_e.slice(ot));return Ce?(ke.w=m[Ce[0].toLowerCase()],ot+Ce[0].length):-1}function x(ke,_e,ot){var Ce=S.exec(_e.slice(ot));return Ce?(ke.m=A[Ce[0].toLowerCase()],ot+Ce[0].length):-1}function N(ke,_e,ot){var Ce=E.exec(_e.slice(ot));return Ce?(ke.m=b[Ce[0].toLowerCase()],ot+Ce[0].length):-1}function j(ke,_e,ot){return U(ke,t,_e,ot)}function fe(ke,_e,ot){return U(ke,r,_e,ot)}function O(ke,_e,ot){return U(ke,n,_e,ot)}function k(ke){return o[ke.getDay()]}function V(ke){return a[ke.getDay()]}function ee(ke){return c[ke.getMonth()]}function oe(ke){return u[ke.getMonth()]}function ge(ke){return i[+(ke.getHours()>=12)]}function Ee(ke){return 1+~~(ke.getMonth()/3)}function De(ke){return o[ke.getUTCDay()]}function tt(ke){return a[ke.getUTCDay()]}function $e(ke){return c[ke.getUTCMonth()]}function It(ke){return u[ke.getUTCMonth()]}function qe(ke){return i[+(ke.getUTCHours()>=12)]}function St(ke){return 1+~~(ke.getUTCMonth()/3)}return{format:function(ke){var _e=I(ke+="",R);return _e.toString=function(){return ke},_e},parse:function(ke){var _e=w(ke+="",!1);return _e.toString=function(){return ke},_e},utcFormat:function(ke){var _e=I(ke+="",M);return _e.toString=function(){return ke},_e},utcParse:function(ke){var _e=w(ke+="",!0);return _e.toString=function(){return ke},_e}}}var bD={"-":"",_:" ",0:"0"},Li=/^\s*\d+/,Nre=/^%/,Ire=/[\\^$*+?|[\]().{}]/g;function an(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function Pre(e){return e.replace(Ire,"\\$&")}function zv(e){return new RegExp("^(?:"+e.map(Pre).join("|")+")","i")}function jv(e){for(var t={},r=-1,n=e.length;++r<n;)t[e[r].toLowerCase()]=r;return t}function Dre(e,t,r){var n=Li.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Lre(e,t,r){var n=Li.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Bre(e,t,r){var n=Li.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Fre(e,t,r){var n=Li.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Ure(e,t,r){var n=Li.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function TD(e,t,r){var n=Li.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function SD(e,t,r){var n=Li.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function kre(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function zre(e,t,r){var n=Li.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function jre(e,t,r){var n=Li.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function AD(e,t,r){var n=Li.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Vre(e,t,r){var n=Li.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function xD(e,t,r){var n=Li.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Hre(e,t,r){var n=Li.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Xre(e,t,r){var n=Li.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Gre(e,t,r){var n=Li.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function qre(e,t,r){var n=Li.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Wre(e,t,r){var n=Nre.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function $re(e,t,r){var n=Li.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Yre(e,t,r){var n=Li.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function RD(e,t){return an(e.getDate(),t,2)}function Zre(e,t){return an(e.getHours(),t,2)}function Kre(e,t){return an(e.getHours()%12||12,t,2)}function Qre(e,t){return an(1+SE.count(pc(e),e),t,3)}function kU(e,t){return an(e.getMilliseconds(),t,3)}function Jre(e,t){return kU(e,t)+"000"}function ene(e,t){return an(e.getMonth()+1,t,2)}function tne(e,t){return an(e.getMinutes(),t,2)}function rne(e,t){return an(e.getSeconds(),t,2)}function nne(e){var t=e.getDay();return t===0?7:t}function ine(e,t){return an(xC.count(pc(e)-1,e),t,2)}function zU(e){var t=e.getDay();return t>=4||t===0?qh(e):qh.ceil(e)}function ane(e,t){return e=zU(e),an(qh.count(pc(e),e)+(pc(e).getDay()===4),t,2)}function one(e){return e.getDay()}function sne(e,t){return an(xy.count(pc(e)-1,e),t,2)}function une(e,t){return an(e.getFullYear()%100,t,2)}function lne(e,t){return e=zU(e),an(e.getFullYear()%100,t,2)}function cne(e,t){return an(e.getFullYear()%1e4,t,4)}function fne(e,t){var r=e.getDay();return e=r>=4||r===0?qh(e):qh.ceil(e),an(e.getFullYear()%1e4,t,4)}function dne(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+an(t/60|0,"0",2)+an(t%60,"0",2)}function CD(e,t){return an(e.getUTCDate(),t,2)}function hne(e,t){return an(e.getUTCHours(),t,2)}function pne(e,t){return an(e.getUTCHours()%12||12,t,2)}function vne(e,t){return an(1+RC.count(Ff(e),e),t,3)}function jU(e,t){return an(e.getUTCMilliseconds(),t,3)}function mne(e,t){return jU(e,t)+"000"}function _ne(e,t){return an(e.getUTCMonth()+1,t,2)}function gne(e,t){return an(e.getUTCMinutes(),t,2)}function yne(e,t){return an(e.getUTCSeconds(),t,2)}function Ene(e){var t=e.getUTCDay();return t===0?7:t}function bne(e,t){return an(UU.count(Ff(e)-1,e),t,2)}function VU(e){var t=e.getUTCDay();return t>=4||t===0?Wh(e):Wh.ceil(e)}function Tne(e,t){return e=VU(e),an(Wh.count(Ff(e),e)+(Ff(e).getUTCDay()===4),t,2)}function Sne(e){return e.getUTCDay()}function Ane(e,t){return an(Ry.count(Ff(e)-1,e),t,2)}function xne(e,t){return an(e.getUTCFullYear()%100,t,2)}function Rne(e,t){return e=VU(e),an(e.getUTCFullYear()%100,t,2)}function Cne(e,t){return an(e.getUTCFullYear()%1e4,t,4)}function One(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Wh(e):Wh.ceil(e),an(e.getUTCFullYear()%1e4,t,4)}function Mne(){return"+0000"}function OD(){return"%"}function MD(e){return+e}function wD(e){return Math.floor(+e/1e3)}var lh,HU;wne({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wne(e){return lh=wre(e),HU=lh.format,lh.parse,lh.utcFormat,lh.utcParse,lh}var mm=1e3,_m=mm*60,gm=_m*60,Wm=gm*24,Nne=Wm*7,ND=Wm*30,Sx=Wm*365;function Ine(e){return new Date(e)}function Pne(e){return e instanceof Date?+e:+new Date(+e)}function XU(e,t,r,n,i,a,o,u,c){var f=TU(ea,ea),h=f.invert,p=f.domain,m=c(".%L"),_=c(":%S"),y=c("%I:%M"),E=c("%I %p"),b=c("%a %d"),S=c("%b %d"),A=c("%B"),R=c("%Y"),M=[[o,1,mm],[o,5,5*mm],[o,15,15*mm],[o,30,30*mm],[a,1,_m],[a,5,5*_m],[a,15,15*_m],[a,30,30*_m],[i,1,gm],[i,3,3*gm],[i,6,6*gm],[i,12,12*gm],[n,1,Wm],[n,2,2*Wm],[r,1,Nne],[t,1,ND],[t,3,3*ND],[e,1,Sx]];function P(w){return(o(w)<w?m:a(w)<w?_:i(w)<w?y:n(w)<w?E:t(w)<w?r(w)<w?b:S:e(w)<w?A:R)(w)}function I(w,U,re,K){if(w==null&&(w=10),typeof w=="number"){var H=Math.abs(re-U)/w,x=_U(function(N){return N[2]}).right(M,H);x===M.length?(K=jR(U/Sx,re/Sx,w),w=e):x?(x=M[H/M[x-1][2]<M[x][2]/H?x-1:x],K=x[1],w=x[0]):(K=Math.max(jR(U,re,w),1),w=u)}return K==null?w:w.every(K)}return f.invert=function(w){return new Date(h(w))},f.domain=function(w){return arguments.length?p(bU.call(w,Pne)):p().map(Ine)},f.ticks=function(w,U){var re=p(),K=re[0],H=re[re.length-1],x=H<K,N;return x&&(N=K,K=H,H=N),N=I(w,K,H,U),N=N?N.range(K,H+1):[],x?N.reverse():N},f.tickFormat=function(w,U){return U==null?P:c(U)},f.nice=function(w,U){var re=p();return(w=I(w,re[0],re[re.length-1],U))?p(RU(re,w)):f},f.copy=function(){return TE(f,XU(e,t,r,n,i,a,o,u,c))},f}function Dne(){return Ac.apply(XU(pc,FU,xC,SE,BU,LU,DU,Sy,HU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Lne(){var e=0,t=1,r,n,i,a,o=ea,u=!1,c;function f(h){return isNaN(h=+h)?c:o(i===0?.5:(h=(a(h)-r)*i,u?Math.max(0,Math.min(1,h)):h))}return f.domain=function(h){return arguments.length?(r=a(e=+h[0]),n=a(t=+h[1]),i=r===n?0:1/(n-r),f):[e,t]},f.clamp=function(h){return arguments.length?(u=!!h,f):u},f.interpolator=function(h){return arguments.length?(o=h,f):o},f.unknown=function(h){return arguments.length?(c=h,f):c},function(h){return a=h,r=h(e),n=h(t),i=r===n?0:1/(n-r),f}}function GU(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function qU(){var e=d_(Lne()(ea));return e.copy=function(){return GU(e,qU())},yU.apply(e,arguments)}function Bne(){var e=0,t=.5,r=1,n,i,a,o,u,c=ea,f,h=!1,p;function m(_){return isNaN(_=+_)?p:(_=.5+((_=+f(_))-i)*(_<i?o:u),c(h?Math.max(0,Math.min(1,_)):_))}return m.domain=function(_){return arguments.length?(n=f(e=+_[0]),i=f(t=+_[1]),a=f(r=+_[2]),o=n===i?0:.5/(i-n),u=i===a?0:.5/(a-i),m):[e,t,r]},m.clamp=function(_){return arguments.length?(h=!!_,m):h},m.interpolator=function(_){return arguments.length?(c=_,m):c},m.unknown=function(_){return arguments.length?(p=_,m):p},function(_){return f=_,n=_(e),i=_(t),a=_(r),o=n===i?0:.5/(i-n),u=i===a?0:.5/(a-i),m}}function WU(){var e=d_(Bne()(ea));return e.copy=function(){return GU(e,WU())},yU.apply(e,arguments)}function $U(e){let t,r=[];function n(i){return i??t}return n.invert=n,n.domain=n.range=i=>i?(r=i,i):r,n.unknown=i=>i?(t=i,i):t,n.copy=()=>$U().unknown(t),n}const{isNil:Ax,isString:Fne,uniq:Une}=Ln,kne=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,zne={[sn.LINEAR]:xU,[sn.POWER]:OU,[sn.LOG]:CU,[sn.IDENTITY]:$U,[sn.SEQUENTIAL]:qU,[sn.TIME]:Dne,[sn.QUANTILE]:MU,[sn.QUANTIZE]:wU,[sn.THRESHOLD]:NU,[sn.CAT]:Ey,[sn.DIVERGING]:WU};class jne{constructor(){B(this,"scaleOptions",{})}apply(t,{styleAttributeService:r}){var n=this;t.hooks.init.tapPromise("FeatureScalePlugin",Je(function*(){var i;t.log(Ai.ScaleInitStart,Vi.INIT),n.scaleOptions=t.getScaleOptions();const a=r.getLayerStyleAttributes(),o=(i=t.getSource())===null||i===void 0?void 0:i.data.dataArray;Array.isArray(o)&&o.length===0||(n.caculateScalesForAttributes(a||[],o),t.log(Ai.ScaleInitEnd,Vi.INIT))})),t.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",(function(){var i=Je(function*(a){if(!a)return a;t.log(Ai.ScaleInitStart,Vi.UPDATE),n.scaleOptions=t.getScaleOptions();const o=r.getLayerStyleAttributes(),u=t.getSource().data.dataArray;return Array.isArray(u)&&u.length===0||(n.caculateScalesForAttributes(o||[],u),t.log(Ai.ScaleInitEnd,Vi.UPDATE),t.layerModelNeedUpdate=!0),!0});return function(a){return i.apply(this,arguments)}})()),t.hooks.beforeRender.tap("FeatureScalePlugin",()=>{if(t.layerModelNeedUpdate)return;this.scaleOptions=t.getScaleOptions();const i=r.getLayerStyleAttributes(),a=t.getSource().data.dataArray;if(!(Array.isArray(a)&&a.length===0)&&i){const o=i.filter(u=>u.needRescale);o.length&&this.caculateScalesForAttributes(o,a)}})}isNumber(t){return!isNaN(parseFloat(t))&&isFinite(t)}caculateScalesForAttributes(t,r){t.forEach(n=>{if(n.scale){const i=n.scale,a=n.scale.field;i.names=this.parseFields(Ax(a)?[]:a);const o=[];i.names.forEach(u=>{var c;o.push(this.createScale(u,n.name,(c=n.scale)===null||c===void 0?void 0:c.values,r))}),o.some(u=>u.type===uh.VARIABLE)?(i.type=uh.VARIABLE,o.forEach(u=>{if(!i.callback&&i.values!=="text"){var c;switch((c=u.option)===null||c===void 0?void 0:c.type){case sn.LOG:case sn.LINEAR:case sn.POWER:if(i.values&&i.values.length>2){const h=u.scale.ticks(i.values.length);u.scale.domain(h)}i.values?u.scale.range(i.values):u.scale.range(u.option.domain);break;case sn.QUANTILE:case sn.QUANTIZE:case sn.THRESHOLD:u.scale.range(i.values);break;case sn.IDENTITY:break;case sn.CAT:i.values?u.scale.range(i.values):u.scale.range(u.option.domain);break;case sn.DIVERGING:case sn.SEQUENTIAL:u.scale.interpolator(Fte(i.values));break}}if(i.values==="text"){var f;u.scale.range((f=u.option)===null||f===void 0?void 0:f.domain)}})):(i.type=uh.CONSTANT,i.defaultValues=o.map((u,c)=>u.scale(i.names[c]))),i.scalers=o.map(u=>({field:u.field,func:u.scale,option:u.option})),n.needRescale=!1}})}parseFields(t){return Array.isArray(t)?t:Fne(t)?t.split("*"):[t]}createScale(t,r,n,i){var a,o;const u=this.scaleOptions[r]&&((a=this.scaleOptions[r])===null||a===void 0?void 0:a.field)===t?this.scaleOptions[r]:this.scaleOptions[t],c={field:t,scale:void 0,type:uh.VARIABLE,option:u};if(!i||!i.length)return u&&u.type?c.scale=this.createDefaultScale(u):(c.scale=Ey([t]),c.type=uh.CONSTANT),c;const f=(o=i.find(h=>!Ax(h[t])))===null||o===void 0?void 0:o[t];if(this.isNumber(t)||Ax(f)&&!u)c.scale=Ey([t]),c.type=uh.CONSTANT;else{let h=u&&u.type||this.getDefaultType(f);n==="text"&&(h=sn.CAT),n===void 0&&(h=sn.IDENTITY);const p=this.createScaleConfig(h,t,u,i);c.scale=this.createDefaultScale(p),c.option=p}return c}getDefaultType(t){let r=sn.LINEAR;return typeof t=="string"&&(r=kne.test(t)?sn.TIME:sn.CAT),r}createScaleConfig(t,r,n,i){const a=Xe(Xe({},n),{},{type:t});if(a!=null&&a.domain)return a;let o=[];if(t===sn.QUANTILE){const u=new Map;i?.forEach(c=>{u.set(c._id,c[r])}),o=Array.from(u.values())}else o=i?.map(u=>u[r])||[];if(t===sn.CAT||t===sn.IDENTITY)a.domain=Une(o);else if(t===sn.QUANTILE)a.domain=o;else if(t===sn.DIVERGING){const u=aD(o),c=n?.neutral!==void 0?n?.neutral:(u[0]+u[1])/2;a.domain=[u[0],c,u[1]]}else a.domain=aD(o);return a}createDefaultScale({type:t,domain:r,unknown:n,clamp:i,nice:a}){const o=zne[t]();return r&&o.domain&&o.domain(r),n&&o.unknown(n),i!==void 0&&o.clamp&&o.clamp(i),a!==void 0&&o.nice&&o.nice(a),o}}class Vne{apply(t){t.hooks.beforeRender.tap("LayerAnimateStylePlugin",()=>{t.animateStatus&&t.models.forEach(n=>{n.addUniforms(Xe({},t.layerModel.getAnimateUniforms()))})})}}let Hne=class{apply(t){t.hooks.afterInit.tap("LayerMaskPlugin",()=>{const{maskLayers:r,enableMask:n}=t.getLayerConfig();!t.tileLayer&&r&&r.length>0&&t.updateLayerConfig({mask:n})})}};class Xne{build(t){return Je(function*(){t.prepareBuildModel(),yield t.buildModels()})()}initLayerModel(t){var r=this;return Je(function*(){yield r.build(t),t.styleNeedUpdate=!1})()}prepareLayerModel(t){var r=this;return Je(function*(){yield r.build(t),t.styleNeedUpdate=!1})()}apply(t){var r=this;t.hooks.init.tapPromise("LayerModelPlugin",Je(function*(){if(t.getSource().isTile){t.prepareBuildModel();return}t.log(Ai.BuildModelStart,Vi.INIT),yield r.initLayerModel(t),t.log(Ai.BuildModelEnd,Vi.INIT)})),t.hooks.beforeRenderData.tapPromise("LayerModelPlugin",(function(){var n=Je(function*(i){return!i||t.getSource().isTile?!1:(t.log(Ai.BuildModelStart,Vi.UPDATE),yield r.prepareLayerModel(t),t.log(Ai.BuildModelEnd,Vi.UPDATE),!0)});return function(i){return n.apply(this,arguments)}})())}}class Gne{apply(t){t.hooks.afterInit.tap("LayerStylePlugin",()=>{const{autoFit:r,fitBoundsOptions:n}=t.getLayerConfig();r&&t.fitBounds(n),t.styleNeedUpdate=!1})}}const qne=["type"],ID={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},Wne={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},$ne={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},Yne={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function Zne(e){const t={u_DirectionalLights:new Array(3).fill(Xe({},$ne)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(Xe({},Yne)),u_NumOfSpotLights:0};return(!e||!e.length)&&(e=[Wne]),e.forEach(r=>{let{type:n="directional"}=r,i=qs(r,qne);const a=ID[n].lights,o=ID[n].num,u=t[o];t[a][u]=Xe(Xe({},t[a][u]),i),t[o]++}),t}class Kne{apply(t){t.hooks.beforeRender.tap("LightingPlugin",()=>{const{enableLighting:r}=t.getLayerConfig();r&&t.models.forEach(n=>n.addUniforms(Xe({},Zne())))})}}function YU(e){return e.map(t=>(typeof t=="string"&&(t=[t,{}]),t))}function ZU(e,t,r,n){const i=e.multiPassRenderer;return i.add(n("render")),YU(t).forEach(a=>{const[o,u]=a;i.add(r(o),u)}),i.add(r("copy")),i}class Qne{constructor(){B(this,"enabled",void 0)}apply(t,{rendererService:r,postProcessingPassFactory:n,normalPassFactory:i}){t.hooks.init.tapPromise("MultiPassRendererPlugin",()=>{const{enableMultiPassRenderer:a,passes:o=[]}=t.getLayerConfig();this.enabled=!!a&&t.getLayerConfig().enableMultiPassRenderer!==!1,this.enabled&&(t.multiPassRenderer=ZU(t,o,n,i),t.multiPassRenderer.setRenderFlag(!0))}),t.hooks.beforeRender.tap("MultiPassRendererPlugin",()=>{if(this.enabled){const{width:a,height:o}=r.getViewportSize();t.multiPassRenderer.resize(a,o)}})}}const rc={POSITION:0,POSITION_64LOW:1,COLOR:2,PICKING_COLOR:3,STROKE:4,OPACITY:5,OFFSETS:6,ROTATION:7,MAX:8};function Jne(e){switch(e){case"rotation":return{name:"Rotation",type:jt.Attribute,descriptor:{name:"a_Rotation",shaderLocation:rc.ROTATION,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{rotation:r=0}=t;return Array.isArray(r)?[r[0]]:[r]}}};case"stroke":return{name:"stroke",type:jt.Attribute,descriptor:{name:"a_Stroke",shaderLocation:rc.STROKE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:4,update:t=>{const{stroke:r=[1,1,1,1]}=t;return r}}};case"opacity":return{name:"opacity",type:jt.Attribute,descriptor:{name:"a_Opacity",shaderLocation:rc.OPACITY,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{opacity:r=1}=t;return[r]}}};case"offsets":return{name:"offsets",type:jt.Attribute,descriptor:{name:"a_Offsets",shaderLocation:rc.OFFSETS,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:2,update:t=>{const{offsets:r}=t;return r}}};default:return}}const{isNumber:eie}=Ln,ch={ENCODE:1,HIGHLIGHT:2};class tie{constructor(){B(this,"pickingUniformMap",void 0)}pickOption2Array(){const t=[];return this.pickingUniformMap.forEach(r=>{eie(r)?t.push(r):t.push(...r)}),t}updatePickOption(t,r){Object.keys(t).forEach(o=>{this.pickingUniformMap.set(o,t[o])});const n=r.getLayerConfig().pickingBuffer||0,i=Number(r.getShaderPickStat());this.pickingUniformMap.set("u_PickingBuffer",n),this.pickingUniformMap.set("u_shaderPick",i),r.getPickingUniformBuffer().subData({offset:0,data:this.pickOption2Array()})}apply(t,{styleAttributeService:r}){this.pickingUniformMap=new Map([["u_HighlightColor",[1,0,0,1]],["u_SelectColor",[1,0,0,1]],["u_PickingColor",[0,0,0]],["u_PickingStage",0],["u_CurrentSelectedId",[0,0,0]],["u_PickingThreshold",10],["u_PickingBuffer",0],["u_shaderPick",0],["u_activeMix",0]]),t.hooks.init.tapPromise("PixelPickingPlugin",()=>{const{enablePicking:n}=t.getLayerConfig();r.registerStyleAttribute({name:"pickingColor",type:jt.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:rc.PICKING_COLOR,buffer:{data:[],type:D.FLOAT},size:3,update:i=>{const{id:a}=i;return n?Hh(a):[0,0,0]}}})}),t.hooks.beforePickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:n}=t.getLayerConfig();n&&t.isVisible()&&(this.updatePickOption({u_PickingStage:ch.ENCODE},t),t.models.forEach(i=>i.addUniforms({u_PickingStage:ch.ENCODE})))}),t.hooks.afterPickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:n}=t.getLayerConfig();n&&t.isVisible()&&(this.updatePickOption({u_PickingStage:ch.HIGHLIGHT},t),t.models.forEach(i=>i.addUniforms({u_PickingStage:ch.HIGHLIGHT})))}),t.hooks.beforeHighlight.tap("PixelPickingPlugin",n=>{const{highlightColor:i,activeMix:a=0}=t.getLayerConfig(),o=typeof i=="string"?fn(i):i||[1,0,0,1];t.updateLayerConfig({pickedFeatureID:Cf(new Uint8Array(n))});const u={u_PickingStage:ch.HIGHLIGHT,u_PickingColor:n,u_HighlightColor:o.map(c=>c*255),u_activeMix:a};this.updatePickOption(u,t),t.models.forEach(c=>c.addUniforms(u))}),t.hooks.beforeSelect.tap("PixelPickingPlugin",n=>{const{selectColor:i,selectMix:a=0}=t.getLayerConfig(),o=typeof i=="string"?fn(i):i||[1,0,0,1];t.updateLayerConfig({pickedFeatureID:Cf(new Uint8Array(n))});const u={u_PickingStage:ch.HIGHLIGHT,u_PickingColor:n,u_HighlightColor:o.map(c=>c*255),u_activeMix:a,u_CurrentSelectedId:n,u_SelectColor:o.map(c=>c*255)};this.updatePickOption(u,t),t.models.forEach(c=>c.addUniforms(u))})}}const rie=["mvt","geojsonvt","testTile"];function nie(e){const t=e.getSource();return rie.includes(t.parser.type)}class iie{apply(t,{styleAttributeService:r}){t.hooks.init.tapPromise("RegisterStyleAttributePlugin",()=>{nie(t)||this.registerBuiltinAttributes(r,t)})}registerBuiltinAttributes(t,r){if(r.type==="MaskLayer"){this.registerPositionAttribute(t);return}this.registerPositionAttribute(t),this.registerColorAttribute(t)}registerPositionAttribute(t){t.registerStyleAttribute({name:"position",type:jt.Attribute,descriptor:{name:"a_Position",shaderLocation:rc.POSITION,buffer:{data:[],type:D.FLOAT},size:3,update:(r,n,i)=>i.length===2?[i[0],i[1],0]:[i[0],i[1],i[2]]}})}registerColorAttribute(t){t.registerStyleAttribute({name:"color",type:jt.Attribute,descriptor:{name:"a_Color",shaderLocation:rc.COLOR,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:4,update:r=>{const{color:n}=r;return!n||!n.length?[1,1,1,1]:n}}})}}class aie{constructor(){B(this,"cameraService",void 0),B(this,"coordinateSystemService",void 0),B(this,"rendererService",void 0),B(this,"mapService",void 0),B(this,"layerService",void 0)}apply(t,{rendererService:r,mapService:n,layerService:i,coordinateSystemService:a,cameraService:o}){this.rendererService=r,this.mapService=n,this.layerService=i,this.coordinateSystemService=a,this.cameraService=o;let u;this.rendererService.uniformBuffers[0]||(u=this.rendererService.createBuffer({data:new Float32Array(96),isUBO:!0,label:"renderUniformBuffer"}),this.rendererService.uniformBuffers[0]=u),t.hooks.beforeRender.tap("ShaderUniformPlugin",()=>{const f=t.getRelativeOrigin&&t.getRelativeOrigin()||[0,0];this.coordinateSystemService.refresh(),f&&(Math.abs(f[0])>1e-4||Math.abs(f[1])>1e-4)&&this.coordinateSystemService.getCoordinateSystem()===2&&this.coordinateSystemService.setViewportCenter(f);const{width:p,height:m}=this.rendererService.getViewportSize(),{data:_,uniforms:y}=this.generateUBO(p,m,f);this.layerService.alreadyInRendering&&this.rendererService.uniformBuffers[0]&&this.rendererService.uniformBuffers[0].subData({offset:0,data:_}),this.rendererService.queryVerdorInfo()==="WebGL1"&&t.models.forEach(b=>{b.addUniforms(Xe(Xe({},y),{},{u_PickingBuffer:t.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(t.getShaderPickStat())}))})})}generateUBO(t,r,n){const i=this.cameraService.getProjectionMatrix(),a=this.cameraService.getViewMatrix(),o=this.cameraService.getViewProjectionMatrix(),u=this.cameraService.getModelMatrix(),c=this.coordinateSystemService.getViewportCenterProjection(),f=this.coordinateSystemService.getPixelsPerDegree(),h=this.cameraService.getZoom(),p=this.coordinateSystemService.getPixelsPerDegree2(),m=this.cameraService.getZoomScale(),_=this.coordinateSystemService.getPixelsPerMeter(),y=this.coordinateSystemService.getCoordinateSystem(),E=this.cameraService.getCameraPosition(),b=window.devicePixelRatio,S=this.coordinateSystemService.getViewportCenter(),A=[t,r],R=this.cameraService.getFocalDistance(),M=n&&n.length>=2?[n[0],n[1]]:[0,0];return{data:[...a,...i,...o,...u,...c,...f,h,...p,m,..._,y,...E,b,...S,...A,R,...M,0],uniforms:{[vf.ProjectionMatrix]:i,[vf.ViewMatrix]:a,[vf.ViewProjectionMatrix]:o,[vf.Zoom]:h,[vf.ZoomScale]:m,[vf.FocalDistance]:R,[vf.CameraPosition]:E,[sh.CoordinateSystem]:y,[sh.ViewportCenter]:S,[sh.ViewportCenterProjection]:c,[sh.PixelsPerDegree]:f,[sh.PixelsPerDegree2]:p,[sh.PixelsPerMeter]:_,u_ViewportSize:A,u_ModelMatrix:u,u_DevicePixelRatio:b,u_RelativeOrigin:M}}}}class oie{apply(t){t.hooks.beforeRender.tap("UpdateModelPlugin",()=>{t.layerModel&&t.layerModel.needUpdate().then(r=>{r&&t.renderLayers()})}),t.hooks.afterRender.tap("UpdateModelPlugin",()=>{t.layerModelNeedUpdate=!1})}}class sie{apply(t,{styleAttributeService:r}){t.hooks.init.tapPromise("UpdateStyleAttributePlugin",()=>{this.initStyleAttribute(t,{styleAttributeService:r})}),t.hooks.beforeRender.tap("UpdateStyleAttributePlugin",()=>{t.layerModelNeedUpdate||t.inited&&this.updateStyleAttribute(t,{styleAttributeService:r})})}updateStyleAttribute(t,{styleAttributeService:r}){const n=r.getLayerStyleAttributes()||[],i=r.getLayerStyleAttribute("filter");if(i&&i.needRegenerateVertices){t.layerModelNeedUpdate=!0,n.forEach(a=>a.needRegenerateVertices=!1);return}n.filter(a=>a.needRegenerateVertices).forEach(a=>{r.updateAttributeByFeatureRange(a.name,t.getEncodedData(),a.featureRange.startIndex,a.featureRange.endIndex,t),a.needRegenerateVertices=!1})}initStyleAttribute(t,{styleAttributeService:r}){(r.getLayerStyleAttributes()||[]).filter(i=>i.needRegenerateVertices).forEach(i=>{r.updateAttributeByFeatureRange(i.name,t.getEncodedData(),i.featureRange.startIndex,i.featureRange.endIndex),i.needRegenerateVertices=!1})}}function uie(){return[new wte,new iie,new jne,new Mte,new Gne,new Hne,new sie,new oie,new Qne,new aie,new Vne,new Kne,new tie,new Xne]}const KU={[Yl.additive]:{enable:!0,func:{srcRGB:D.ONE,dstRGB:D.ONE,srcAlpha:1,dstAlpha:1}},[Yl.none]:{enable:!1},[Yl.normal]:{enable:!0,func:{srcRGB:D.SRC_ALPHA,dstRGB:D.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}},[Yl.subtractive]:{enable:!0,func:{srcRGB:D.ONE,dstRGB:D.ONE,srcAlpha:D.ZERO,dstAlpha:D.ONE_MINUS_SRC_COLOR},equation:{rgb:D.FUNC_SUBTRACT,alpha:D.FUNC_SUBTRACT}},[Yl.max]:{enable:!0,func:{srcRGB:D.ONE,dstRGB:D.ONE},equation:{rgb:D.MAX_EXT}},[Yl.min]:{enable:!0,func:{srcRGB:D.ONE,dstRGB:D.ONE},equation:{rgb:D.MIN_EXT}}};class lie{constructor(t){B(this,"layer",void 0),this.layer=t}pickRender(t){const n=this.layer.getContainer().layerService,i=this.layer;if(i.tileLayer)return i.tileLayer.pickRender(t);i.hooks.beforePickingEncode.call(),n.renderTileLayerMask(i),i.renderModels({ispick:!0}),i.hooks.afterPickingEncode.call()}pick(t,r){var n=this;return Je(function*(){const a=n.layer.getContainer().pickingService;return t.type==="RasterLayer"?n.pickRasterLayer(t,r):(n.pickRender(r),a.pickFromPickingFBO(t,r))})()}pickRasterLayer(t,r,n){const i=this.layer.getContainer(),a=i.pickingService,o=i.mapService,u=this.layer.getSource().extent,c=d$(r.lngLat,u),f={x:r.x,y:r.y,type:r.type,lngLat:r.lngLat,target:r,rasterValue:null},h=n||t;if(c){const p=this.readRasterValue(t,u,o,r.x,r.y);return f.rasterValue=p,a.triggerHoverOnLayer(h,f),!0}else return f.type=r.type==="mousemove"?"mouseout":"un"+r.type,a.triggerHoverOnLayer(h,Xe(Xe({},f),{},{type:"unpick"})),a.triggerHoverOnLayer(h,f),!1}readRasterValue(t,r,n,i,a){const o=t.getSource().data.dataArray[0],[u=0,c=0,f=10,h=-10]=r,p=n.lngLatToContainer([u,c]),m=n.lngLatToContainer([f,h]),_=m.x-p.x,y=p.y-m.y,E=[(i-p.x)/_,(a-m.y)/y],b=o.width||1,S=o.height||1,A=Math.floor(E[0]*b),R=Math.floor(E[1]*S),M=Math.max(0,R-1)*b+A;return o.data[M]}selectFeature(t){const r=this.layer,[n,i,a]=t;r.hooks.beforeSelect.call([n,i,a])}highlightPickedFeature(t){const[r,n,i]=t;this.layer.hooks.beforeHighlight.call([r,n,i])}getFeatureById(t){return this.layer.getSource().getFeatureById(t)}}class cie{constructor(t){B(this,"layer",void 0),B(this,"rendererService",void 0),B(this,"colorTexture",void 0),B(this,"key",void 0),this.layer=t;const r=this.layer.getContainer();this.rendererService=r.rendererService}getColorTexture(t,r){const n=this.getTextureKey(t,r);return this.key===n?this.colorTexture:(this.createColorTexture(t,r),this.key=n,this.colorTexture)}createColorTexture(t,r){const{createTexture2D:n}=this.rendererService,i=this.getColorRampBar(t,r),a=n({data:new Uint8Array(i.data),width:i.width,height:i.height,flipY:!1,unorm:!0});return this.colorTexture=a,a}setColorTexture(t,r,n){this.key=this.getTextureKey(r,n),this.colorTexture=t}destroy(){var t;(t=this.colorTexture)===null||t===void 0||t.destroy()}getColorRampBar(t,r){switch(t.type){case"cat":return UX(t);case"quantize":return kX(t);case"custom":return zX(t,r);case"linear":return FX(t,r);default:return BX(t)}}getTextureKey(t,r){var n;return`${t.colors.join("_")}_${t==null||(n=t.positions)===null||n===void 0?void 0:n.join("_")}_${t.type}_${r?.join("_")}`}}const fie=["passes"],die=["moduleName","vertexShader","fragmentShader","defines","inject","triangulation","styleOption","pickingEnabled"],{isEqual:xx,isFunction:PD,isNumber:DD,isObject:zi,isPlainObject:hie,isUndefined:pie}=Ln;let LD=0;class dp extends La.EventEmitter{get shaderModuleService(){return this.container.shaderModuleService}get cameraService(){return this.container.cameraService}get coordinateService(){return this.container.coordinateSystemService}get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get pickingService(){return this.container.pickingService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get interactionService(){return this.container.interactionService}get mapService(){var t;return(t=this.container)===null||t===void 0?void 0:t.mapService}get normalPassFactory(){return this.container.normalPassFactory}constructor(t={}){super(),B(this,"id",`${LD++}`),B(this,"name",`${LD}`),B(this,"parent",void 0),B(this,"coordCenter",void 0),B(this,"type",void 0),B(this,"visible",!0),B(this,"zIndex",0),B(this,"minZoom",void 0),B(this,"maxZoom",void 0),B(this,"inited",!1),B(this,"layerModelNeedUpdate",!1),B(this,"pickedFeatureID",null),B(this,"selectedFeatureID",null),B(this,"styleNeedUpdate",!1),B(this,"rendering",void 0),B(this,"forceRender",!1),B(this,"clusterZoom",0),B(this,"layerType",void 0),B(this,"triangulation",void 0),B(this,"layerPickService",void 0),B(this,"textureService",void 0),B(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),B(this,"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),B(this,"hooks",{init:new fQ,afterInit:new oP,beforeRender:new oP,beforeRenderData:new dQ,afterRender:new Ps,beforePickingEncode:new Ps,afterPickingEncode:new Ps,beforeHighlight:new Ps(["pickedColor"]),afterHighlight:new Ps,beforeSelect:new Ps(["pickedColor"]),afterSelect:new Ps,beforeDestroy:new Ps,afterDestroy:new Ps}),B(this,"models",[]),B(this,"multiPassRenderer",void 0),B(this,"plugins",void 0),B(this,"startInit",!1),B(this,"sourceOption",void 0),B(this,"layerModel",void 0),B(this,"shapeOption",void 0),B(this,"tileLayer",void 0),B(this,"layerChildren",[]),B(this,"masks",[]),B(this,"configService",tU),B(this,"styleAttributeService",void 0),B(this,"layerSource",void 0),B(this,"postProcessingPassFactory",void 0),B(this,"animateOptions",{enable:!1}),B(this,"relativeOrigin",[0,0]),B(this,"originalExtent",[0,0,0,0]),B(this,"absoluteDataArray",[]),B(this,"container",void 0),B(this,"encodedData",void 0),B(this,"currentPickId",null),B(this,"rawConfig",void 0),B(this,"needUpdateConfig",void 0),B(this,"encodeStyleAttribute",{}),B(this,"enableShaderEncodeStyles",[]),B(this,"enableDataEncodeStyles",[]),B(this,"pendingStyleAttributes",[]),B(this,"scaleOptions",{}),B(this,"animateStartTime",void 0),B(this,"animateStatus",!1),B(this,"isDestroyed",!1),B(this,"uniformBuffers",[]),B(this,"encodeDataLength",0),B(this,"sourceEvent",()=>{this.dataState.dataSourceNeedUpdate=!0,this.processRelativeCoordinates();const r=this.getLayerConfig();r&&r.autoFit&&this.fitBounds(r.fitBoundsOptions),this.layerSource.getSourceCfg().autoRender&&setTimeout(()=>{this.reRender()},10)}),this.name=t.name||this.id,this.zIndex=t.zIndex||0,this.rawConfig=t,this.masks=t.maskLayers||[]}addMask(t){this.masks.push(t),this.updateLayerConfig({maskLayers:this.masks}),this.enableMask()}removeMask(t){const r=this.masks.indexOf(t);r>-1&&this.masks.splice(r,1),this.updateLayerConfig({maskLayers:this.masks})}disableMask(){this.updateLayerConfig({enableMask:!1})}enableMask(){this.updateLayerConfig({enableMask:!0})}addMaskLayer(t){this.masks.push(t)}removeMaskLayer(t){const r=this.masks.indexOf(t);r>-1&&this.masks.splice(r,1),t.destroy()}getAttribute(t){return this.styleAttributeService.getLayerStyleAttribute(t)}getLayerConfig(){return this.configService.getLayerConfig(this.id)}updateLayerConfig(t){if(Object.keys(t).map(r=>{r in this.rawConfig&&(this.rawConfig[r]=t[r])}),!this.startInit)this.needUpdateConfig=Xe(Xe({},this.needUpdateConfig),t);else{const r=this.container.id;this.configService.setLayerConfig(r,this.id,Xe(Xe(Xe({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),t)),this.needUpdateConfig={}}}setContainer(t){this.container=t}getContainer(){return this.container}addPlugin(t){return this.plugins.push(t),this}init(){var t=this;return Je(function*(){const r=t.container.id;t.startInit=!0,t.configService.setLayerConfig(r,t.id,t.rawConfig),t.layerType=t.rawConfig.layerType;const{enableMultiPassRenderer:n,passes:i}=t.getLayerConfig();n&&i!==null&&i!==void 0&&i.length&&i.length>0&&t.mapService.on("mapAfterFrameChange",()=>{t.renderLayers()}),t.postProcessingPassFactory=t.container.postProcessingPassFactory,t.styleAttributeService=t.container.styleAttributeService,n&&(t.multiPassRenderer=t.container.multiPassRenderer,t.multiPassRenderer.setLayer(t)),t.pendingStyleAttributes.forEach(({attributeName:a,attributeField:o,attributeValues:u,updateOptions:c})=>{t.styleAttributeService.updateStyleAttribute(a,{scale:Xe({field:o},t.splitValuesAndCallbackInAttribute(u,o?void 0:t.getLayerConfig()[a]))},c)}),t.pendingStyleAttributes=[],t.plugins=uie();for(const a of t.plugins)a.apply(t,t.container);t.layerPickService=new lie(t),t.textureService=new cie(t),t.log(Ai.LayerInitStart),yield t.hooks.init.promise(),t.log(Ai.LayerInitEnd),t.inited=!0,t.emit("inited",{target:t,type:"inited"}),t.emit("add",{target:t,type:"add"}),t.hooks.afterInit.call()})()}log(t,r="init"){var n;if(this.tileLayer||this.isTileLayer)return;const i=`${this.id}.${r}.${t}`,a={id:this.id,type:this.type};(n=this.debugService)===null||n===void 0||n.log(i,a)}updateModelData(t){t.attributes&&t.elements?this.models.map(r=>{r.updateAttributesAndElements(t.attributes,t.elements)}):console.warn("data error")}setLayerPickService(t){this.layerPickService=t}prepareBuildModel(){Object.keys(this.needUpdateConfig||{}).length!==0&&this.updateLayerConfig({});const{animateOption:t}=this.getLayerConfig();t!=null&&t.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}color(t,r,n){return this.updateStyleAttribute("color",t,r,n),this}texture(t,r,n){return this.updateStyleAttribute("texture",t,r,n),this}rotate(t,r,n){return this.updateStyleAttribute("rotate",t,r,n),this}size(t,r,n){return this.updateStyleAttribute("size",t,r,n),this}filter(t,r,n){const i=this.updateStyleAttribute("filter",t,r,n);return this.dataState.dataSourceNeedUpdate=i&&this.inited,this}shape(t,r,n){this.shapeOption={field:t,values:r};const i=this.updateStyleAttribute("shape",t,r,n);return this.dataState.dataSourceNeedUpdate=i&&this.inited,this}label(t,r,n){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:t,attributeValues:r,updateOptions:n}),this}animate(t){let r={};return zi(t)?(r.enable=!0,r=Xe(Xe({},r),t)):r.enable=t,this.updateLayerConfig({animateOption:r}),this}source(t,r){return t?.type==="source"?(this.setSource(t),this):(this.sourceOption={data:t,options:r},this.clusterZoom=0,this)}setData(t,r){return this.inited?(this.dataUpdatelog(),this.layerSource.setData(t,r)):this.on("inited",()=>{this.dataUpdatelog(),this.layerSource.setData(t,r)}),this}dataUpdatelog(){this.log(Ai.SourceInitStart,Vi.UPDATE),this.layerSource.once("update",()=>{this.log(Ai.SourceInitEnd,Vi.UPDATE)})}style(t){const{passes:r}=t,n=qs(t,fie);r&&YU(r).forEach(a=>{const o=this.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(a[0]);o&&o.updateOptions(a[1])}),n.borderColor&&(n.stroke=n.borderColor),n.borderWidth&&(n.strokeWidth=n.borderWidth);const i=n;return Object.keys(n).forEach(a=>{const o=n[a];Array.isArray(o)&&o.length===2&&!DD(o[0])&&!DD(o[1])&&(i[a]={field:o[0],value:o[1]})}),this.encodeStyle(i),this.updateLayerConfig(i),this}encodeStyle(t){Object.keys(t).forEach(r=>{[...this.enableShaderEncodeStyles,...this.enableDataEncodeStyles].includes(r)&&hie(t[r])&&(t[r].field||t[r].value)&&!xx(this.encodeStyleAttribute[r],t[r])?(this.encodeStyleAttribute[r]=t[r],this.updateStyleAttribute(r,t[r].field,t[r].value),this.inited&&(this.dataState.dataMappingNeedUpdate=!0)):this.encodeStyleAttribute[r]&&(delete this.encodeStyleAttribute[r],this.dataState.dataSourceNeedUpdate=!0)})}scale(t,r){const n=Xe({},this.scaleOptions);if(zi(t)?this.scaleOptions=Xe(Xe({},this.scaleOptions),t):this.scaleOptions[t]=r,this.styleAttributeService&&!xx(n,this.scaleOptions)){const i=zi(t)?t:{[t]:r};this.styleAttributeService.updateScaleAttribute(i)}return this}renderLayers(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}prerender(){}render(t={}){return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(t),this))}renderMultiPass(){var t=this;return Je(function*(){t.encodeDataLength<=0&&!t.forceRender||(t.multiPassRenderer&&t.multiPassRenderer.getRenderFlag()?yield t.multiPassRenderer.render():t.renderModels())})()}active(t){const r={};return r.enableHighlight=zi(t)?!0:t,zi(t)?(r.enableHighlight=!0,t.color&&(r.highlightColor=t.color),t.mix&&(r.activeMix=t.mix)):r.enableHighlight=!!t,this.updateLayerConfig(r),this}setActive(t,r){if(zi(t)){const{x:n=0,y:i=0}=t;this.updateLayerConfig({highlightColor:zi(r)?r.color:this.getLayerConfig().highlightColor,activeMix:zi(r)?r.mix:this.getLayerConfig().activeMix}),this.pick({x:n,y:i})}else this.updateLayerConfig({pickedFeatureID:t,highlightColor:zi(r)?r.color:this.getLayerConfig().highlightColor,activeMix:zi(r)?r.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call(Hh(t)).then(()=>{setTimeout(()=>{this.reRender()},1)})}select(t){const r={};return r.enableSelect=zi(t)?!0:t,zi(t)?(r.enableSelect=!0,t.color&&(r.selectColor=t.color),t.mix&&(r.selectMix=t.mix)):r.enableSelect=!!t,this.updateLayerConfig(r),this}setSelect(t,r){if(zi(t)){const{x:n=0,y:i=0}=t;this.updateLayerConfig({selectColor:zi(r)?r.color:this.getLayerConfig().selectColor,selectMix:zi(r)?r.mix:this.getLayerConfig().selectMix}),this.pick({x:n,y:i})}else this.updateLayerConfig({pickedFeatureID:t,selectColor:zi(r)?r.color:this.getLayerConfig().selectColor,selectMix:zi(r)?r.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(Hh(t)).then(()=>{setTimeout(()=>{this.reRender()},1)})}setBlend(t){return this.updateLayerConfig({blend:t}),this.reRender(),this}show(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}hide(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}setIndex(t){return this.zIndex=t,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}setCurrentPickId(t){this.currentPickId=t}getCurrentPickId(){return this.currentPickId}setCurrentSelectedId(t){this.selectedFeatureID=t}getCurrentSelectedId(){return this.selectedFeatureID}isVisible(){const t=this.mapService.getZoom(),{visible:r,minZoom:n=-1/0,maxZoom:i=1/0}=this.getLayerConfig();return!!r&&t>=n&&t<i}setMultiPass(t,r){if(this.updateLayerConfig({enableMultiPassRenderer:t}),r&&this.updateLayerConfig({passes:r}),t){const{passes:n=[]}=this.getLayerConfig();this.multiPassRenderer=ZU(this,n,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);const{width:i,height:a}=this.rendererService.getViewportSize();this.multiPassRenderer.resize(i,a)}return this}setMinZoom(t){return this.updateLayerConfig({minZoom:t}),this}getMinZoom(){const{minZoom:t}=this.getLayerConfig();return t}getMaxZoom(){const{maxZoom:t}=this.getLayerConfig();return t}get(t){return this.getLayerConfig()[t]}setMaxZoom(t){return this.updateLayerConfig({maxZoom:t}),this}setAutoFit(t){return this.updateLayerConfig({autoFit:t}),this}fitBounds(t){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;const n=this.getSource().extent;return n.some(a=>Math.abs(a)===1/0)?this:(this.mapService.fitBounds([[n[0],n[1]],[n[2],n[3]]],t),this)}destroy(t=!0){var r,n,i,a,o;if(this.isDestroyed)return;(r=this.layerModel)===null||r===void 0||r.uniformBuffers.forEach(c=>{c.destroy()}),this.layerChildren.map(c=>c.destroy(!1)),this.layerChildren=[];const{maskfence:u}=this.getLayerConfig();u&&(this.masks.map(c=>c.destroy(!1)),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(n=this.multiPassRenderer)===null||n===void 0||n.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(i=this.layerModel)===null||i===void 0||i.clearModels(t),(a=this.tileLayer)===null||a===void 0||a.destroy(),this.models=[],(o=this.debugService)===null||o===void 0||o.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}clear(){this.styleAttributeService.clearAllAttributes()}clearModels(){var t;this.models.forEach(r=>r.destroy()),(t=this.layerModel)===null||t===void 0||t.clearModels(),this.models=[]}isDirty(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(t=>t.needRescale||t.needRemapping||t.needRegenerateVertices).length}setSource(t){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=t,this.clusterZoom=0,this.inited&&this.layerSource.cluster){const r=this.mapService.getZoom();this.layerSource.updateClusterData(r)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",({type:r})=>{if(this.coordCenter===void 0){const n=this.layerSource.center;this.coordCenter=n}if(r==="update"){if(this.tileLayer){this.tileLayer.reload();return}this.sourceEvent()}r==="inited"&&this.processRelativeCoordinates()})}getSource(){return this.layerSource}getScaleOptions(){return this.scaleOptions}setEncodedData(t){this.encodedData=t,this.encodeDataLength=t.length}getEncodedData(){return this.encodedData}getScale(t){return this.styleAttributeService.getLayerAttributeScale(t)}getLegend(t){var r,n,i;const a=this.styleAttributeService.getLayerStyleAttribute(t);return{type:(n=((a==null||(r=a.scale)===null||r===void 0?void 0:r.scalers)||[])[0])===null||n===void 0||(n=n.option)===null||n===void 0?void 0:n.type,field:a==null||(i=a.scale)===null||i===void 0?void 0:i.field,items:this.getLegendItems(t)}}getLegendItems(t){const r=this.styleAttributeService.getLayerAttributeScale(t);return r?r.invertExtent?r.range().map(i=>({value:r.invertExtent(i),[t]:i})):r.ticks?r.ticks().map(i=>({value:i,[t]:r(i)})):r!=null&&r.domain?r.domain().filter(i=>!pie(i)).map(i=>({value:i,[t]:r(i)})):[]:[]}pick({x:t,y:r}){this.interactionService.triggerHover({x:t,y:r})}boxSelect(t,r){this.pickingService.boxPickLayer(this,t,r)}buildLayerModel(t){var r=this;return Je(function*(){const{moduleName:n,vertexShader:i,fragmentShader:a,defines:o,inject:u,triangulation:c,styleOption:f,pickingEnabled:h=!0}=t,p=qs(t,die);r.shaderModuleService.registerModule(n,{vs:i,fs:a,defines:o,inject:u});const{vs:m,fs:_,uniforms:y}=r.shaderModuleService.getModule(n),{createModel:E}=r.rendererService;return new Promise(b=>{const{attributes:S,elements:A,count:R}=r.styleAttributeService.createAttributesAndIndices(r.encodedData,c,f,r),M=[...r.layerModel.uniformBuffers,...r.rendererService.uniformBuffers];h&&M.push(r.getPickingUniformBuffer());const P=Xe({attributes:S,uniforms:y,fs:_,vs:m,elements:A,blend:KU[Yl.normal],uniformBuffers:M,textures:r.layerModel.textures},p);R&&(P.count=R);const I=E(P);b(I)})})()}createAttributes(t){const{triangulation:r}=t,{attributes:n}=this.styleAttributeService.createAttributes(this.encodedData,r);return n}getTime(){return this.layerService.clock.getDelta()}setAnimateStartTime(){this.animateStartTime=this.layerService.clock.getElapsedTime()}stopAnimate(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}getLayerAnimateTime(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}needPick(t){const{enableHighlight:r=!0,enableSelect:n=!0}=this.getLayerConfig();let i=this.eventNames().indexOf(t)!==-1||this.eventNames().indexOf("un"+t)!==-1;return(t==="click"||t==="dblclick")&&n&&(i=!0),t==="mousemove"&&(r||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(i=!0),this.isVisible()&&i}buildModels(){return Je(function*(){throw new Error("Method not implemented.")})()}rebuildModels(){var t=this;return Je(function*(){yield t.buildModels()})()}renderMulPass(t){return Je(function*(){yield t.render()})()}renderModels(t={}){return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(r=>{r.draw({uniforms:this.layerModel.getUninforms(),blend:this.layerModel.getBlend(),stencil:this.layerModel.getStencil(t),textures:this.layerModel.textures},t?.ispick||!1)}),this.hooks.afterRender.call(),this)}updateStyleAttribute(t,r,n,i){const a=this.configService.getAttributeConfig(this.id)||{};return xx(a[t],{field:r,values:n})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(t)!==-1&&this.configService.setAttributeConfig(this.id,{[t]:{field:r,values:n}}),this.startInit?this.styleAttributeService.updateStyleAttribute(t,{scale:Xe({field:r},this.splitValuesAndCallbackInAttribute(n,this.getLayerConfig()[r]))},i):this.pendingStyleAttributes.push({attributeName:t,attributeField:r,attributeValues:n,updateOptions:i}),!0)}getLayerAttributeConfig(){return this.configService.getAttributeConfig(this.id)}getShaderPickStat(){return this.layerService.getShaderPickStat()}setEarthTime(t){console.warn("empty fn")}processData(t){return t}getModelType(){throw new Error("Method not implemented.")}getDefaultConfig(){return{}}processRelativeCoordinates(){if(!this.getLayerConfig().enableRelativeCoordinates||!this.layerSource||!this.layerSource.data)return;this.absoluteDataArray=[...this.layerSource.data.dataArray];const n=xte(this.layerSource.data.dataArray,{enableRelativeCoordinates:!0});this.layerSource.data.dataArray=n.dataArray,this.relativeOrigin=n.relativeOrigin,this.originalExtent=n.originalExtent}getAbsoluteData(){return this.absoluteDataArray}getRelativeOrigin(){return this.relativeOrigin}getOriginalExtent(){return this.originalExtent}initLayerModels(){var t=this;return Je(function*(){t.models.forEach(n=>n.destroy()),t.models=[],t.uniformBuffers.forEach(n=>{n.destroy()}),t.uniformBuffers=[];const r=t.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0,label:"pickingUniforms"});t.uniformBuffers.push(r),t.models=yield t.layerModel.initModels()})()}getPickingUniformBuffer(){return this.uniformBuffers[0]}reRender(){this.inited&&this.layerService.reRender()}splitValuesAndCallbackInAttribute(t){return{values:PD(t)?void 0:t,callback:PD(t)?t:void 0}}}function vie(e,t){return{enable:e,mask:255,func:{cmp:D.EQUAL,ref:t?1:0,mask:1}}}function BD(e){return e.maskOperation===yE.OR?{enable:!0,mask:255,func:{cmp:D.ALWAYS,ref:1,mask:255},opFront:{fail:D.KEEP,zfail:D.REPLACE,zpass:D.REPLACE}}:{enable:!0,mask:255,func:{cmp:e.stencilType===bf.SINGLE||e.stencilIndex===0?D.ALWAYS:D.LESS,ref:e.stencilType===bf.SINGLE?1:e.stencilIndex===0?2:1,mask:255},opFront:{fail:D.KEEP,zfail:D.REPLACE,zpass:D.REPLACE}}}const mie={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},i0={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"};var a0={exports:{}},FD;function _ie(){if(FD)return a0.exports;FD=1,a0.exports=e,a0.exports.default=e;function e(O,k,V){V=V||2;var ee=k&&k.length,oe=ee?k[0]*V:O.length,ge=t(O,0,oe,V,!0),Ee=[];if(!ge||ge.next===ge.prev)return Ee;var De,tt,$e,It,qe,St,ke;if(ee&&(ge=c(O,k,ge,V)),O.length>80*V){De=$e=O[0],tt=It=O[1];for(var _e=V;_e<oe;_e+=V)qe=O[_e],St=O[_e+1],qe<De&&(De=qe),St<tt&&(tt=St),qe>$e&&($e=qe),St>It&&(It=St);ke=Math.max($e-De,It-tt),ke=ke!==0?32767/ke:0}return n(ge,Ee,V,De,tt,ke,0),Ee}function t(O,k,V,ee,oe){var ge,Ee;if(oe===fe(O,k,V,ee)>0)for(ge=k;ge<V;ge+=ee)Ee=x(ge,O[ge],O[ge+1],Ee);else for(ge=V-ee;ge>=k;ge-=ee)Ee=x(ge,O[ge],O[ge+1],Ee);return Ee&&M(Ee,Ee.next)&&(N(Ee),Ee=Ee.next),Ee}function r(O,k){if(!O)return O;k||(k=O);var V=O,ee;do if(ee=!1,!V.steiner&&(M(V,V.next)||R(V.prev,V,V.next)===0)){if(N(V),V=k=V.prev,V===V.next)break;ee=!0}else V=V.next;while(ee||V!==k);return k}function n(O,k,V,ee,oe,ge,Ee){if(O){!Ee&&ge&&_(O,ee,oe,ge);for(var De=O,tt,$e;O.prev!==O.next;){if(tt=O.prev,$e=O.next,ge?a(O,ee,oe,ge):i(O)){k.push(tt.i/V|0),k.push(O.i/V|0),k.push($e.i/V|0),N(O),O=$e.next,De=$e.next;continue}if(O=$e,O===De){Ee?Ee===1?(O=o(r(O),k,V),n(O,k,V,ee,oe,ge,2)):Ee===2&&u(O,k,V,ee,oe,ge):n(r(O),k,V,ee,oe,ge,1);break}}}}function i(O){var k=O.prev,V=O,ee=O.next;if(R(k,V,ee)>=0)return!1;for(var oe=k.x,ge=V.x,Ee=ee.x,De=k.y,tt=V.y,$e=ee.y,It=oe<ge?oe<Ee?oe:Ee:ge<Ee?ge:Ee,qe=De<tt?De<$e?De:$e:tt<$e?tt:$e,St=oe>ge?oe>Ee?oe:Ee:ge>Ee?ge:Ee,ke=De>tt?De>$e?De:$e:tt>$e?tt:$e,_e=ee.next;_e!==k;){if(_e.x>=It&&_e.x<=St&&_e.y>=qe&&_e.y<=ke&&S(oe,De,ge,tt,Ee,$e,_e.x,_e.y)&&R(_e.prev,_e,_e.next)>=0)return!1;_e=_e.next}return!0}function a(O,k,V,ee){var oe=O.prev,ge=O,Ee=O.next;if(R(oe,ge,Ee)>=0)return!1;for(var De=oe.x,tt=ge.x,$e=Ee.x,It=oe.y,qe=ge.y,St=Ee.y,ke=De<tt?De<$e?De:$e:tt<$e?tt:$e,_e=It<qe?It<St?It:St:qe<St?qe:St,ot=De>tt?De>$e?De:$e:tt>$e?tt:$e,Ce=It>qe?It>St?It:St:qe>St?qe:St,Wt=E(ke,_e,k,V,ee),Xt=E(ot,Ce,k,V,ee),bt=O.prevZ,Pt=O.nextZ;bt&&bt.z>=Wt&&Pt&&Pt.z<=Xt;){if(bt.x>=ke&&bt.x<=ot&&bt.y>=_e&&bt.y<=Ce&&bt!==oe&&bt!==Ee&&S(De,It,tt,qe,$e,St,bt.x,bt.y)&&R(bt.prev,bt,bt.next)>=0||(bt=bt.prevZ,Pt.x>=ke&&Pt.x<=ot&&Pt.y>=_e&&Pt.y<=Ce&&Pt!==oe&&Pt!==Ee&&S(De,It,tt,qe,$e,St,Pt.x,Pt.y)&&R(Pt.prev,Pt,Pt.next)>=0))return!1;Pt=Pt.nextZ}for(;bt&&bt.z>=Wt;){if(bt.x>=ke&&bt.x<=ot&&bt.y>=_e&&bt.y<=Ce&&bt!==oe&&bt!==Ee&&S(De,It,tt,qe,$e,St,bt.x,bt.y)&&R(bt.prev,bt,bt.next)>=0)return!1;bt=bt.prevZ}for(;Pt&&Pt.z<=Xt;){if(Pt.x>=ke&&Pt.x<=ot&&Pt.y>=_e&&Pt.y<=Ce&&Pt!==oe&&Pt!==Ee&&S(De,It,tt,qe,$e,St,Pt.x,Pt.y)&&R(Pt.prev,Pt,Pt.next)>=0)return!1;Pt=Pt.nextZ}return!0}function o(O,k,V){var ee=O;do{var oe=ee.prev,ge=ee.next.next;!M(oe,ge)&&P(oe,ee,ee.next,ge)&&re(oe,ge)&&re(ge,oe)&&(k.push(oe.i/V|0),k.push(ee.i/V|0),k.push(ge.i/V|0),N(ee),N(ee.next),ee=O=ge),ee=ee.next}while(ee!==O);return r(ee)}function u(O,k,V,ee,oe,ge){var Ee=O;do{for(var De=Ee.next.next;De!==Ee.prev;){if(Ee.i!==De.i&&A(Ee,De)){var tt=H(Ee,De);Ee=r(Ee,Ee.next),tt=r(tt,tt.next),n(Ee,k,V,ee,oe,ge,0),n(tt,k,V,ee,oe,ge,0);return}De=De.next}Ee=Ee.next}while(Ee!==O)}function c(O,k,V,ee){var oe=[],ge,Ee,De,tt,$e;for(ge=0,Ee=k.length;ge<Ee;ge++)De=k[ge]*ee,tt=ge<Ee-1?k[ge+1]*ee:O.length,$e=t(O,De,tt,ee,!1),$e===$e.next&&($e.steiner=!0),oe.push(b($e));for(oe.sort(f),ge=0;ge<oe.length;ge++)V=h(oe[ge],V);return V}function f(O,k){return O.x-k.x}function h(O,k){var V=p(O,k);if(!V)return k;var ee=H(V,O);return r(ee,ee.next),r(V,V.next)}function p(O,k){var V=k,ee=O.x,oe=O.y,ge=-1/0,Ee;do{if(oe<=V.y&&oe>=V.next.y&&V.next.y!==V.y){var De=V.x+(oe-V.y)*(V.next.x-V.x)/(V.next.y-V.y);if(De<=ee&&De>ge&&(ge=De,Ee=V.x<V.next.x?V:V.next,De===ee))return Ee}V=V.next}while(V!==k);if(!Ee)return null;var tt=Ee,$e=Ee.x,It=Ee.y,qe=1/0,St;V=Ee;do ee>=V.x&&V.x>=$e&&ee!==V.x&&S(oe<It?ee:ge,oe,$e,It,oe<It?ge:ee,oe,V.x,V.y)&&(St=Math.abs(oe-V.y)/(ee-V.x),re(V,O)&&(St<qe||St===qe&&(V.x>Ee.x||V.x===Ee.x&&m(Ee,V)))&&(Ee=V,qe=St)),V=V.next;while(V!==tt);return Ee}function m(O,k){return R(O.prev,O,k.prev)<0&&R(k.next,O,O.next)<0}function _(O,k,V,ee){var oe=O;do oe.z===0&&(oe.z=E(oe.x,oe.y,k,V,ee)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==O);oe.prevZ.nextZ=null,oe.prevZ=null,y(oe)}function y(O){var k,V,ee,oe,ge,Ee,De,tt,$e=1;do{for(V=O,O=null,ge=null,Ee=0;V;){for(Ee++,ee=V,De=0,k=0;k<$e&&(De++,ee=ee.nextZ,!!ee);k++);for(tt=$e;De>0||tt>0&&ee;)De!==0&&(tt===0||!ee||V.z<=ee.z)?(oe=V,V=V.nextZ,De--):(oe=ee,ee=ee.nextZ,tt--),ge?ge.nextZ=oe:O=oe,oe.prevZ=ge,ge=oe;V=ee}ge.nextZ=null,$e*=2}while(Ee>1);return O}function E(O,k,V,ee,oe){return O=(O-V)*oe|0,k=(k-ee)*oe|0,O=(O|O<<8)&16711935,O=(O|O<<4)&252645135,O=(O|O<<2)&858993459,O=(O|O<<1)&1431655765,k=(k|k<<8)&16711935,k=(k|k<<4)&252645135,k=(k|k<<2)&858993459,k=(k|k<<1)&1431655765,O|k<<1}function b(O){var k=O,V=O;do(k.x<V.x||k.x===V.x&&k.y<V.y)&&(V=k),k=k.next;while(k!==O);return V}function S(O,k,V,ee,oe,ge,Ee,De){return(oe-Ee)*(k-De)>=(O-Ee)*(ge-De)&&(O-Ee)*(ee-De)>=(V-Ee)*(k-De)&&(V-Ee)*(ge-De)>=(oe-Ee)*(ee-De)}function A(O,k){return O.next.i!==k.i&&O.prev.i!==k.i&&!U(O,k)&&(re(O,k)&&re(k,O)&&K(O,k)&&(R(O.prev,O,k.prev)||R(O,k.prev,k))||M(O,k)&&R(O.prev,O,O.next)>0&&R(k.prev,k,k.next)>0)}function R(O,k,V){return(k.y-O.y)*(V.x-k.x)-(k.x-O.x)*(V.y-k.y)}function M(O,k){return O.x===k.x&&O.y===k.y}function P(O,k,V,ee){var oe=w(R(O,k,V)),ge=w(R(O,k,ee)),Ee=w(R(V,ee,O)),De=w(R(V,ee,k));return!!(oe!==ge&&Ee!==De||oe===0&&I(O,V,k)||ge===0&&I(O,ee,k)||Ee===0&&I(V,O,ee)||De===0&&I(V,k,ee))}function I(O,k,V){return k.x<=Math.max(O.x,V.x)&&k.x>=Math.min(O.x,V.x)&&k.y<=Math.max(O.y,V.y)&&k.y>=Math.min(O.y,V.y)}function w(O){return O>0?1:O<0?-1:0}function U(O,k){var V=O;do{if(V.i!==O.i&&V.next.i!==O.i&&V.i!==k.i&&V.next.i!==k.i&&P(V,V.next,O,k))return!0;V=V.next}while(V!==O);return!1}function re(O,k){return R(O.prev,O,O.next)<0?R(O,k,O.next)>=0&&R(O,O.prev,k)>=0:R(O,k,O.prev)<0||R(O,O.next,k)<0}function K(O,k){var V=O,ee=!1,oe=(O.x+k.x)/2,ge=(O.y+k.y)/2;do V.y>ge!=V.next.y>ge&&V.next.y!==V.y&&oe<(V.next.x-V.x)*(ge-V.y)/(V.next.y-V.y)+V.x&&(ee=!ee),V=V.next;while(V!==O);return ee}function H(O,k){var V=new j(O.i,O.x,O.y),ee=new j(k.i,k.x,k.y),oe=O.next,ge=k.prev;return O.next=k,k.prev=O,V.next=oe,oe.prev=V,ee.next=V,V.prev=ee,ge.next=ee,ee.prev=ge,ee}function x(O,k,V,ee){var oe=new j(O,k,V);return ee?(oe.next=ee.next,oe.prev=ee,ee.next.prev=oe,ee.next=oe):(oe.prev=oe,oe.next=oe),oe}function N(O){O.next.prev=O.prev,O.prev.next=O.next,O.prevZ&&(O.prevZ.nextZ=O.nextZ),O.nextZ&&(O.nextZ.prevZ=O.prevZ)}function j(O,k,V){this.i=O,this.x=k,this.y=V,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}e.deviation=function(O,k,V,ee){var oe=k&&k.length,ge=oe?k[0]*V:O.length,Ee=Math.abs(fe(O,0,ge,V));if(oe)for(var De=0,tt=k.length;De<tt;De++){var $e=k[De]*V,It=De<tt-1?k[De+1]*V:O.length;Ee-=Math.abs(fe(O,$e,It,V))}var qe=0;for(De=0;De<ee.length;De+=3){var St=ee[De]*V,ke=ee[De+1]*V,_e=ee[De+2]*V;qe+=Math.abs((O[St]-O[_e])*(O[ke+1]-O[St+1])-(O[St]-O[ke])*(O[_e+1]-O[St+1]))}return Ee===0&&qe===0?0:Math.abs((qe-Ee)/Ee)};function fe(O,k,V,ee){for(var oe=0,ge=k,Ee=V-ee;ge<V;ge+=ee)oe+=(O[Ee]-O[ge])*(O[ge+1]+O[Ee+1]),Ee=ge;return oe}return e.flatten=function(O){for(var k=O[0][0].length,V={vertices:[],holes:[],dimensions:k},ee=0,oe=0;oe<O.length;oe++){for(var ge=0;ge<O[oe].length;ge++)for(var Ee=0;Ee<k;Ee++)V.vertices.push(O[oe][ge][Ee]);oe>0&&(ee+=O[oe-1].length,V.holes.push(ee))}return V},a0.exports}var gie=_ie();const $m=$r(gie);function UD(e){return Math.max(Math.ceil(e/4)*4,4)}function QU(e,t,r,n=!0){const i=r===3;if(n){e=e.slice();const o=[];for(let u=0;u<e.length;u+=r){o[0]=e[u],o[1]=e[u+1],i&&(o[2]=e[u+2]);const c=C0(o,!0,{enable:!1,decimal:1});e[u]=c[0],e[u+1]=c[1],i&&(e[u+2]=c[2])}}return $m(e,t,r)}const JU="ATTRIBUTE_LOCATION_";class yn{get attributeLocation(){return Xe({},rc)}constructor(t){B(this,"triangulation",void 0),B(this,"uniformBuffers",[]),B(this,"textures",[]),B(this,"createTexture2D",void 0),B(this,"preStyleAttribute",{}),B(this,"encodeStyleAttribute",{}),B(this,"layer",void 0),B(this,"dataTexture",void 0),B(this,"DATA_TEXTURE_WIDTH",void 0),B(this,"dataTextureTest",void 0),B(this,"configService",void 0),B(this,"shaderModuleService",void 0),B(this,"rendererService",void 0),B(this,"iconService",void 0),B(this,"fontService",void 0),B(this,"styleAttributeService",void 0),B(this,"mapService",void 0),B(this,"cameraService",void 0),B(this,"layerService",void 0),B(this,"pickingService",void 0),B(this,"attributeUnifoms",void 0),B(this,"commonUnifoms",void 0),this.layer=t,this.configService=t.getContainer().globalConfigService,this.rendererService=t.getContainer().rendererService,this.pickingService=t.getContainer().pickingService,this.shaderModuleService=t.getContainer().shaderModuleService,this.styleAttributeService=t.getContainer().styleAttributeService,this.mapService=t.getContainer().mapService,this.iconService=t.getContainer().iconService,this.fontService=t.getContainer().fontService,this.cameraService=t.getContainer().cameraService,this.layerService=t.getContainer().layerService,this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();const{createTexture2D:r}=this.rendererService;this.createTexture2D=r}getBlend(){const{blend:t="normal"}=this.layer.getLayerConfig();return KU[Yl[t]]}getStencil(t){const{mask:r=!1,maskInside:n=!0,enableMask:i,maskOperation:a=yE.AND}=this.layer.getLayerConfig();if(this.layer.type==="MaskLayer")return BD({stencilType:bf.SINGLE});if(t.isStencil)return BD(Xe(Xe({},t),{},{maskOperation:a}));const o=r||i&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return vie(o,n)}getDefaultStyle(){return{}}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());this.updateStyleUnifoms();const n=Xe(Xe({},r.uniformsOption),t.uniformsOption);return Object.keys(n).forEach(i=>{typeof n[i]=="boolean"&&(n[i]=n[i]?1:0)}),!this.rendererService.hasOwnProperty("device")&&this.textures&&this.textures.length===1&&(n.u_texture=this.textures[0]),n}getAnimateUniforms(){return{}}needUpdate(){return Je(function*(){return!1})()}buildModels(){return Je(function*(){throw new Error("Method not implemented.")})()}initModels(){return Je(function*(){throw new Error("Method not implemented.")})()}clearModels(t=!0){}getAttribute(){throw new Error("Method not implemented.")}prerender(){}render(t){throw new Error("Method not implemented.")}registerBuiltinAttributes(){throw new Error("Method not implemented.")}animateOption2Array(t){return[t.enable?0:1,t.duration||4,t.interval||.2,t.trailLength||.1]}startModelAnimate(){const{animateOption:t}=this.layer.getLayerConfig();t.enable&&this.layer.setAnimateStartTime()}getInject(){return yie(this.layer.enableShaderEncodeStyles,this.layer.encodeStyleAttribute)}getDefines(){const t=Object.keys(this.attributeLocation).reduce((r,n)=>{const i=JU+n;return r[i]=this.attributeLocation[n],r},{});return Xe({},t)}getStyleAttribute(){const t={};return this.layer.enableShaderEncodeStyles.forEach(r=>{if(!this.layer.encodeStyleAttribute[r]){const n=this.layer.getLayerConfig()[r];let i=typeof n>"u"?mie[r]:n;r==="stroke"&&(i=fn(i)),t["u_"+r]=i}}),t}registerStyleAttribute(){Object.keys(this.layer.encodeStyleAttribute).forEach(t=>{const r=Jne(t);r&&this.styleAttributeService.registerStyleAttribute(r)})}registerPosition64LowAttribute(t=!0){this.styleAttributeService.registerStyleAttribute({name:"position64Low",type:jt.Attribute,descriptor:{name:"a_Position64Low",shaderLocation:this.attributeLocation.POSITION_64LOW,buffer:{data:[],type:D.FLOAT},size:2,update:(r,n,i)=>t?[pi(i[0]),pi(i[1])]:[0,0]}})}updateEncodeAttribute(t,r){this.encodeStyleAttribute[t]=r}initUniformsBuffer(){const t=this.getUniformsBufferInfo(this.getStyleAttribute()),r=this.getCommonUniformsInfo();t.uniformsLength!==0&&(this.attributeUnifoms=this.rendererService.createBuffer({data:new Float32Array(UD(t.uniformsLength)).fill(0),isUBO:!0,label:"layerModelAttributeUnifoms"}),this.uniformBuffers.push(this.attributeUnifoms)),r.uniformsLength!==0&&(this.commonUnifoms=this.rendererService.createBuffer({data:new Float32Array(UD(r.uniformsLength)).fill(0),isUBO:!0,label:"layerModelCommonUnifoms"}),this.uniformBuffers.push(this.commonUnifoms))}getUniformsBufferInfo(t){let r=0;const n=[];return Object.values(t).forEach(i=>{Array.isArray(i)?(n.push(...i),r+=i.length):typeof i=="number"?(n.push(i),r+=1):typeof i=="boolean"&&(n.push(Number(i)),r+=1)}),{uniformsOption:t,uniformsLength:r,uniformsArray:n}}getCommonUniformsInfo(){return{uniformsLength:0,uniformsArray:[],uniformsOption:{}}}updateStyleUnifoms(){var t,r;const{uniformsArray:n}=this.getUniformsBufferInfo(this.getStyleAttribute()),{uniformsArray:i}=this.getCommonUniformsInfo();(t=this.attributeUnifoms)===null||t===void 0||t.subData({offset:0,data:new Uint8Array(new Float32Array(n).buffer)}),(r=this.commonUnifoms)===null||r===void 0||r.subData({offset:0,data:new Uint8Array(new Float32Array(i).buffer)})}}function yie(e,t){const r=[];let n="";e.forEach(o=>{const u=o.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase(),c=JU+u;t[o]?n+=`#define USE_ATTRIBUTE_${u} 0.0 
`:r.push(`  ${i0[o]} u_${o};`),n+=`
#ifdef USE_ATTRIBUTE_${u}
layout(location = ${c}) in ${i0[o]} a_${o.charAt(0).toUpperCase()+o.slice(1)};
#endif 
`});const i=r.length?`
layout(std140) uniform AttributeUniforms {
  ${r.join(`
`)}
};
`:"";n+=i;let a="";return e.forEach(o=>{const u=o.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase();a+=`
  #ifdef USE_ATTRIBUTE_${u}
    ${i0[o]} ${o} = a_${o.charAt(0).toUpperCase()+o.slice(1)};
  #else
    ${i0[o]} ${o} = u_${o};
  #endif
  `}),{"vs:#decl":n,"fs:#decl":i,"vs:#main-start":a}}let kD=(function(e){return e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e})({}),Eie=(function(e){return e.NORMAL="normal",e.REPLACE="replace",e})({}),CC=(function(e){return e[e.pixel=0]="pixel",e[e.meter=1]="meter",e})({});const e7=100;function zD(e){return e/180*Math.acos(-1)}function t7(e){const t=zD(e[0])+Math.PI/2,r=zD(e[1]),n=e7+Math.random()*.4,i=n*Math.cos(r)*Math.cos(t),a=n*Math.cos(r)*Math.sin(t),o=n*Math.sin(r);return[a,o,i]}const jD=wa();wa();const fo=wa(),Vv=wa(),o0=wa();function VD(e,t,r,n,i){Ql(e,r,n),ly(e,e),t=AR(-e[1],e[0]);const a=AR(-r[1],r[0]);return[i/RR(t,a),t]}function Hv(e,t){return EK(e,-t[1],t[0])}function s0(e,t,r){return q5(e,t,r),ly(e,e),e}function HD(e,t){return e[0]===t[0]&&e[1]===t[1]}class bie{constructor(t={}){B(this,"complex",void 0),B(this,"join",void 0),B(this,"cap",void 0),B(this,"miterLimit",void 0),B(this,"thickness",void 0),B(this,"normal",void 0),B(this,"lastFlip",-1),B(this,"miter",AR(0,0)),B(this,"started",!1),B(this,"dash",!1),B(this,"totalDistance",0),B(this,"currentIndex",0),this.join=t.join||"miter",this.cap=t.cap||"butt",this.miterLimit=t.miterLimit||10,this.thickness=t.thickness||1,this.dash=t.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}simpleExtrude(t){const r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const n=t.length;let i=r.startIndex;for(let a=1;a<n;a++){const o=t[a-1],u=t[a],c=a<t.length-1?t[a+1]:null,f=this.simpleSegment(r,i,o,u,c);i+=f}if(this.dash)for(let a=0;a<r.positions.length/6;a++)r.positions[a*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}extrude(t){const r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const n=t.length;let i=r.startIndex;for(let a=1;a<n;a++){const o=t[a-1],u=t[a],c=a<t.length-1?t[a+1]:null,f=this.segment(r,i,o,u,c);i+=f}if(this.dash)for(let a=0;a<r.positions.length/6;a++)r.positions[a*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}simpleSegment(t,r,n,i,a){let o=0;const u=t.indices,c=t.positions,f=t.normals,h=Eo([i[0],i[1]]),p=Eo([n[0],n[1]]);s0(fo,h,p);let m=0;if(this.dash&&(m=this.lineSegmentDistance(h,p),this.totalDistance+=m),this.normal||(this.normal=wa(),Hv(this.normal,fo)),this.started||(this.started=!0,this.extrusions(c,f,n,this.normal,this.thickness,this.totalDistance-m)),u.push(r+0,r+1,r+2),!a)Hv(this.normal,fo),this.extrusions(c,f,i,this.normal,this.thickness,this.totalDistance),u.push(...this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3]),o+=2;else{const _=Eo([a[0],a[1]]);HD(h,_)&&Ql(_,h,ly(_,xR(_,h,p))),s0(Vv,_,h);const[y,E]=VD(o0,wa(),fo,Vv,this.thickness);let b=RR(o0,this.normal)<0?-1:1;this.extrusions(c,f,i,E,y,this.totalDistance),u.push(...this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3]),b=-1,tx(this.normal,E),o+=2,this.lastFlip=b}return o}segment(t,r,n,i,a){let o=0;const u=t.indices,c=t.positions,f=t.normals,h=this.cap==="square",p=this.join==="bevel",m=Eo([i[0],i[1]]),_=Eo([n[0],n[1]]);s0(fo,m,_);let y=0;if(this.dash&&(y=this.lineSegmentDistance(m,_),this.totalDistance+=y),this.normal||(this.normal=wa(),Hv(this.normal,fo)),!this.started)if(this.started=!0,h){const E=wa(),b=wa();Ql(E,this.normal,fo),Ql(b,this.normal,fo),f.push(b[0],b[1],0),f.push(E[0],E[1],0),c.push(n[0],n[1],n[2]|0,this.totalDistance-y,-this.thickness,n[2]|0),this.complex.indexes.push(this.currentIndex),c.push(n[0],n[1],n[2]|0,this.totalDistance-y,this.thickness,n[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(c,f,n,this.normal,this.thickness,this.totalDistance-y);if(u.push(r+0,r+1,r+2),a){const E=Eo([a[0],a[1]]);HD(m,E)&&Ql(E,m,ly(E,xR(E,m,_))),s0(Vv,E,m);const[b,S]=VD(o0,wa(),fo,Vv,this.thickness);let A=RR(o0,this.normal)<0?-1:1,R=p;!R&&this.join==="miter"&&b>this.miterLimit&&(R=!0),R?(f.push(this.normal[0],this.normal[1],0),f.push(S[0],S[1],0),c.push(i[0],i[1],i[2]|0,this.totalDistance,-this.thickness*A,i[2]|0),this.complex.indexes.push(this.currentIndex),c.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness*A,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,u.push(...this.lastFlip!==-A?[r,r+2,r+3]:[r+2,r+1,r+3]),u.push(r+2,r+3,r+4),Hv(jD,Vv),tx(this.normal,jD),f.push(this.normal[0],this.normal[1],0),c.push(i[0],i[1],i[2]|0,this.totalDistance,-this.thickness*A,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,o+=3):(this.extrusions(c,f,i,S,b,this.totalDistance),u.push(...this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3]),A=-1,tx(this.normal,S),o+=2),this.lastFlip=A}else{if(Hv(this.normal,fo),h){const E=wa(),b=wa();q5(b,fo,this.normal),Ql(E,fo,this.normal),f.push(b[0],b[1],0),f.push(E[0],E[1],0),c.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness,i[2]|0),this.complex.indexes.push(this.currentIndex),c.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(c,f,i,this.normal,this.thickness,this.totalDistance);u.push(...this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3]),o+=2}return o}extrusions(t,r,n,i,a,o){r.push(i[0],i[1],0),r.push(i[0],i[1],0),t.push(n[0],n[1],n[2]|0,o,-a,n[2]|0),this.complex.indexes.push(this.currentIndex),t.push(n[0],n[1],n[2]|0,o,a,n[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}lineSegmentDistance(t,r){const n=r[0]-t[0],i=r[1]-t[1];return Math.sqrt(n*n+i*i)}}let Xv=(function(e){return e.CYLINDER="cylinder",e.SQUARECOLUMN="squareColumn",e.TRIANGLECOLUMN="triangleColumn",e.HEXAGONCOLUMN="hexagonColumn",e.PENTAGONCOLUMN="pentagonColumn",e})({}),Gv=(function(e){return e.CIRCLE="circle",e.SQUARE="square",e.TRIANGLE="triangle",e.HEXAGON="hexagon",e.PENTAGON="pentagon",e})({});function h_(e,t=0){const r=Math.PI*2/e,n=[];for(let a=0;a<e;a++)n.push(r*a+t*Math.PI/12);return n.map(a=>{const o=Math.sin(a+Math.PI/4),u=Math.cos(a+Math.PI/4);return[o,u,0]})}function HR(){return h_(30)}function XD(){return h_(4)}function GD(){return h_(3)}function qD(){return h_(6,1)}function WD(){return h_(5)}const Rx={[Gv.CIRCLE]:HR,[Gv.HEXAGON]:qD,[Gv.TRIANGLE]:GD,[Gv.SQUARE]:XD,[Gv.PENTAGON]:WD,[Xv.CYLINDER]:HR,[Xv.HEXAGONCOLUMN]:qD,[Xv.TRIANGLECOLUMN]:GD,[Xv.SQUARECOLUMN]:XD,[Xv.PENTAGONCOLUMN]:WD};function r7(e,t=!1){const r=e[0][0],n=e[0][e[0].length-1];r[0]===n[0]&&r[1]===n[1]&&(e[0]=e[0].slice(0,e[0].length-1));const i=e[0].length,a=$m.flatten(e),{vertices:o,dimensions:u,holes:c}=a,f=[],h=[],p=[];for(let _=0;_<o.length/u;_++)f.push(o[_*u],o[_*u+1],1,-1,-1),p.push(0,0,1);const m=QU(o,c,u,t);h.push(...m);for(let _=0;_<i;_++){const y=a.vertices.slice(_*u,(_+1)*u);let E=a.vertices.slice((_+1)*u,(_+2)*u);E.length===0&&(E=a.vertices.slice(0,u));const b=f.length/5;f.push(y[0],y[1],1,0,0,E[0],E[1],1,.1,0,y[0],y[1],0,0,.8,E[0],E[1],0,.1,.8);const S=Tie([E[0],E[1],1],[y[0],y[1],0],[y[0],y[1],1],t);p.push(...S,...S,...S,...S),h.push(...[1,2,0,3,2,1].map(A=>A+b))}return{positions:f,index:h,normals:p}}function Tie(e,t,r,n=!1){const i=hm(),a=hm(),o=hm();n&&(e=C0(e),t=C0(t),r=C0(r));const u=Qo(...e),c=Qo(...t),f=Qo(...r);eP(i,f,c),eP(a,u,c),_K(o,i,a);const h=hm();return pm(h,o),h}const u0={};function Mf(e){const t=Df(e.coordinates);return{vertices:[...t,...t,...t,...t],indices:[0,1,2,2,3,0],size:t.length}}function $D(e){const t=Df(e.coordinates),r=t7(t);return{vertices:[...r,...r,...r,...r],indices:[0,1,2,2,3,0],size:r.length}}function n7(e){const{shape:t}=e,{positions:r,index:n,normals:i}=Oie(t,!1);return{vertices:r,indices:n,normals:i,size:5}}function Sie(e){const t=Df(e.coordinates);return{vertices:[...t],indices:[0],size:t.length}}function XR(e){const{coordinates:t}=e,r=new bie({dash:!0,join:"bevel"});let n=t;n[0]&&!Array.isArray(n[0][0])&&(n=[t]),n.forEach(a=>{r.extrude(a)});const i=r.complex;return{vertices:i.positions,indices:i.indices,normals:i.normals,indexes:i.indexes,size:6}}function Aie(e){const{coordinates:t}=e,r=[];if(!Array.isArray(t[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};const{results:n,totalDistance:i}=xie(t);return n.map(a=>{r.push(a[0],a[1],a[2],a[3],0,i)}),{vertices:r,indices:[],normals:[],size:6,count:n.length}}function YD(e,t){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function Cx(e,t){return e.length<3&&e.push(0),t!==void 0&&e.push(t),e}function xie(e){let t=e;Array.isArray(t)&&Array.isArray(t[0])&&Array.isArray(t[0][0])&&(t=e.flat());let r=0;if(t.length<2)return{results:t,totalDistance:0};{const n=[],i=Cx(t[0],r);n.push(i);for(let o=1;o<t.length-1;o++){const u=YD(Eo(t[o-1]),Eo(t[o]));r+=u;const c=Cx(t[o],r);n.push(c),n.push(c)}const a=YD(Eo(t[t.length-2]),Eo(t[t.length-1]));return r+=a,n.push(Cx(t[t.length-1],r)),{results:n,totalDistance:r}}}function p_(e){const{coordinates:t}=e,r=$m.flatten(t),{vertices:n,dimensions:i,holes:a}=r;return{indices:QU(n,a,i),vertices:n,size:i}}function Rie(e){const{indices:t,vertices:r,size:n}=p_(e);return{indices:t,vertices:Cie(r),size:n+4}}function Cie(e){const t=[],{center:r,radius:n}=y$(e);for(let i=0;i<e.length;i+=2){const a=e[i],o=e[i+1];t.push(a,o,0,...r,n)}return t}function i7(e){const t=e.coordinates,{positions:r,index:n,normals:i}=r7(t,!0);return{vertices:r,indices:n,normals:i,size:5}}function AE(e){const t=e.coordinates;return{vertices:[...t[0],0,0,0,...t[1],0,1,0,...t[2],0,1,1,...t[3],0,0,1],indices:[0,1,2,0,2,3],size:5}}function OC(e,t){const{segmentNumber:r=30}=t,n=e.coordinates,i=[],a=[];for(let o=0;o<r;o++)i.push(o,1,o,n[0][0],n[0][1],n[1][0],n[1][1],o,-1,o,n[0][0],n[0][1],n[1][0],n[1][1]),o!==r-1&&a.push(...[0,1,2,1,3,2].map(u=>o*2+u));return{vertices:i,indices:a,size:7}}function Oie(e,t=!1){if(u0&&u0[e])return u0[e];const r=Rx[e]?Rx[e]():Rx.cylinder(),n=r7([r],t);return u0[e]=n,n}function Mie(e,t){return{type:e.type,field:"value",items:e.positions.map((r,n)=>({[t]:n>=e.colors.length?null:e.colors[n],value:r}))}}const wie=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

in vec2 v_texCoord;
out vec4 outputColor;
vec3 setContrast(vec3 rgb, float contrast) {
  vec3 color = mix(vec3(0.5), rgb, contrast);
  color = clamp(color, 0.0, 1.0);
  return color;
}
vec3 setSaturation(vec3 rgb, float adjustment) {
  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);
  vec3 intensity = vec3(dot(rgb, grayVector));
  vec3 color = mix(intensity, rgb, adjustment);
  color = clamp(color, 0.0, 1.0);
  return color;
}
void main() {
  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));
  //brightness
  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);
  //contrast
  color.rgb = setContrast(color.rgb, u_contrast);
  // saturation
  color.rgb = setSaturation(color.rgb, u_saturation);
  // gamma
  color.rgb = pow(color.rgb, vec3(u_gamma));
  outputColor = color;
  outputColor.a *= u_opacity;
  if(outputColor.a < 0.01)
    discard;
}
`,Nie=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;let Iie=class extends yn{constructor(...t){super(...t),B(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getCommonUniformsInfo(){const{opacity:t,brightness:r,contrast:n,saturation:i,gamma:a}=this.layer.getLayerConfig(),o={u_opacity:Pv(t,1),u_brightness:Pv(r,1),u_contrast:Pv(n,1),u_saturation:Pv(i,1),u_gamma:Pv(a,1)};return this.textures=[this.texture],this.getUniformsBufferInfo(o)}initModels(){var t=this;return Je(function*(){return yield t.loadTexture(),t.buildModels()})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy()}loadTexture(){var t=this;return Je(function*(){const{createTexture2D:r}=t.rendererService,i=yield t.layer.getSource().data.images;t.texture=r({data:i[0],width:i[0].width,height:i[0].height,mag:D.LINEAR,min:D.LINEAR})})()}buildModels(){var t=this;return Je(function*(){return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:Nie,fragmentShader:wie,defines:t.getDefines(),triangulation:AE,primitive:D.TRIANGLES,blend:{enable:!0},depth:{enable:!1},pickingEnabled:!1})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:jt.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:2,update:(t,r,n)=>[n[3],n[4]]}})}};const Pie={image:Iie};class Die extends dp{constructor(...t){super(...t),B(this,"type","ImageLayer")}buildModels(){var t=this;return Je(function*(){const r=t.getModelType();t.layerModel=new Pie[r](t),yield t.initLayerModels()})()}getDefaultConfig(){const t=this.getModelType();return{image:{}}[t]}getModelType(){return"image"}}const Lie=`
#define Animate 0.0
#define LineTexture 1.0
uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_lineData;
//dash
in vec4 v_dash_array;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      discard;
    };
  }
  float animateSpeed = 0.0; // 
  outputColor = v_color;
  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;
  }

  // 
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // 

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; //  v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
    
  } else {
     outputColor = filterColor(outputColor);
  }
}`,Bie=`#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_lineData;
//dash
out vec4 v_dash_array;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  if (u_lineDir == 1.0) {
    // 
    return mid;
  } else {
    // 
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
  // dash: index / (segmentNumber - 1.);
  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
  //  return index / (segmentNumber - 1.);
}
vec2 interpolate(vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x, t), bezier3(y, t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return dir_screenspace.xy * sign(offset_direction);
}

void main() {
  //vs
  if (u_linearColor == 1.0) {
    float d_segmentIndex = a_Position.x + 1.0; // 
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex / segmentNumber);
  } else {
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;

  vec2 source_world = a_Instance.rg; // 
  vec2 target_world = a_Instance.ba; // 

  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  //  dashArray  distanceRatio 
  float total_Distance = pixelDistance(source_world, target_world) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  v_distance_ratio = segmentIndex / segmentNumber;

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;

  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

  v_lineData.b = d_distance_ratio;

  vec4 source = project_position(vec4(source_world, 0, 1.), a_Instance64Low.xy);
  vec4 target = project_position(vec4(target_world, 0, 1.), a_Instance64Low.zw);

  vec2 currPos = interpolate(source.xy, target.xy, segmentRatio, thetaOffset);
  vec2 nextPos = interpolate(source.xy, target.xy, nextSegmentRatio, thetaOffset);

  vec2 offset = project_pixel(
    getExtrusionOffset((nextPos.xy - currPos.xy) * indexDir, a_Position.y)
  );

  float d_segmentIndex = a_Position.x + 1.0; // 
  v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // 
    float arcDistrance = length(source - target); // 
    arcDistrance = project_pixel(arcDistrance);

    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); //  - 
    float texCount = floor(arcDistrance / pixelLen); // 
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // 
    float linePixelSize = project_pixel(a_Size); // 
    v_lineData.a = lineOffsetWidth / linePixelSize; //  v 
  }

  gl_Position = project_common_position_to_clipspace(vec4(currPos.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,Fie={solid:0,dash:1};class Uie extends yn{constructor(...t){super(...t),B(this,"texture",void 0),B(this,"updateTexture",()=>{const{createTexture2D:r}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=r({data:this.iconService.getCanvas(),mag:D.NEAREST,min:D.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13})}getCommonUniformsInfo(){const{sourceColor:t,targetColor:r,textureBlend:n="normal",lineType:i="solid",dashArray:a=[10,5],forward:o=!0,lineTexture:u=!1,iconStep:c=100,segmentNumber:f=30}=this.layer.getLayerConfig(),{animateOption:h}=this.layer.getLayerConfig();let p=a;i!=="dash"&&(p=[0,0]),p.length===2&&p.push(0,0);let m=0,_=[0,0,0,0],y=[0,0,0,0];if(t&&r&&(_=fn(t),y=fn(r),m=1),this.rendererService.getDirty()){var E;(E=this.texture)===null||E===void 0||E.bind()}const b={u_animate:this.animateOption2Array(h),u_dash_array:p,u_sourceColor:_,u_targetColor:y,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:f,u_lineDir:o?1:-1,u_icon_step:c,u_line_texture:u?1:0,u_textureBlend:n==="normal"?0:1,u_blur:.9,u_line_type:Fie[i||"solid"],u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:m};return this.getUniformsBufferInfo(b)}initModels(){var t=this;return Je(function*(){return t.updateTexture(),t.iconService.on("imageUpdate",t.updateTexture),t.buildModels()})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:Lie,vert:Bie,type:""}}buildModels(){var t=this;return Je(function*(){t.initUniformsBuffer();const{segmentNumber:r=30}=t.layer.getLayerConfig(),{frag:n,vert:i,type:a}=t.getShaders();return[yield t.layer.buildLayerModel({moduleName:"lineArc2d"+a,vertexShader:i,fragmentShader:n,defines:t.getDefines(),inject:t.getInject(),triangulation:OC,depth:{enable:!1},styleOption:{segmentNumber:r}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{size:r=1}=t;return Array.isArray(r)?[r[0]]:[r]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:jt.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:4,update:(t,r,n)=>[n[3],n[4],n[5],n[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:jt.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:4,update:(t,r,n)=>[pi(n[3]),pi(n[4]),pi(n[5]),pi(n[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:jt.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:2,update:t=>{const r=this.iconService.getIconMap(),{texture:n}=t,{x:i,y:a}=r[n]||{x:0,y:0};return[i,a]}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:jt.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{thetaOffset:r=1}=t;return[r]}}})}}const kie=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec4 v_dash_array;
in float v_segmentIndex;
in vec2 v_iconMapUV;
in vec4 v_line_data;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // 
  float d_distance_ratio = v_line_data.g; // 
  outputColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    outputColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;

      // u_animate
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // 

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  //  v 
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          outputColor = filterColor(pattern);
        }
    }

  } else {
    outputColor = filterColor(outputColor);
  }
}
`,zie=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec4 v_dash_array;
out float v_segmentIndex;
out vec2 v_iconMapUV;
out vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // 
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  //vs
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // 
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0), a_Instance64Low.xy).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0), a_Instance64Low.zw).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // 

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // 

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // 

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // 
    float linePixelSize = project_pixel(a_Size);  // 
    v_line_data.a = lineOffsetWidth/linePixelSize;  //  v 

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // 
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // 
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // 
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // 
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // 
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;

    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }


  setPickingColor(a_PickingColor);
}
`,jie={solid:0,dash:1};class ZD extends yn{constructor(...t){super(...t),B(this,"texture",void 0),B(this,"updateTexture",()=>{const{createTexture2D:r}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=r({data:this.iconService.getCanvas(),mag:D.NEAREST,min:D.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13})}getCommonUniformsInfo(){const{sourceColor:t,targetColor:r,textureBlend:n="normal",lineType:i="solid",dashArray:a=[10,5],lineTexture:o=!1,iconStep:u=100,segmentNumber:c=30,globalArcHeight:f=10}=this.layer.getLayerConfig(),{animateOption:h}=this.layer.getLayerConfig();a.length===2&&a.push(0,0);let p=0,m=[0,0,0,0],_=[0,0,0,0];if(t&&r&&(m=fn(t),_=fn(r),p=1),this.rendererService.getDirty()){var y;(y=this.texture)===null||y===void 0||y.bind()}const E={u_animate:this.animateOption2Array(h),u_dash_array:a,u_sourceColor:m,u_targetColor:_,u_textSize:[1024,this.iconService.canvasHeight||128],u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:e7,u_global_height:f,segmentNumber:c,u_line_type:jie[i]||0,u_icon_step:u,u_line_texture:o?1:0,u_textureBlend:n==="normal"?0:1,u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:p};return this.getUniformsBufferInfo(E)}initModels(){var t=this;return Je(function*(){return t.initUniformsBuffer(),t.updateTexture(),t.iconService.on("imageUpdate",t.updateTexture),t.buildModels()})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:kie,vert:zie,type:""}}buildModels(){var t=this;return Je(function*(){const{segmentNumber:r=30}=t.layer.getLayerConfig(),{frag:n,vert:i,type:a}=t.getShaders();return[yield t.layer.buildLayerModel({moduleName:"lineArc3d"+a,vertexShader:i,fragmentShader:n,defines:t.getDefines(),inject:t.getInject(),triangulation:OC,styleOption:{segmentNumber:r}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{size:r=1}=t;return Array.isArray(r)?[r[0]]:[r]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:jt.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:4,update:(t,r,n)=>[n[3],n[4],n[5],n[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:jt.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:4,update:(t,r,n)=>[pi(n[3]),pi(n[4]),pi(n[5]),pi(n[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:jt.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:2,update:t=>{const r=this.iconService.getIconMap(),{texture:n}=t,{x:i,y:a}=r[n]||{x:0,y:0};return[i,a]}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:jt.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{thetaOffset:r=1}=t;return[r]}}})}}const KD={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0},Na=1/2;function Vie(e,t){const{width:r=2,height:n=1}=t;return{vertices:[0,Na*e,1*e*r,-(n+Na)*e,1*e*r,(n-Na)*e,0,Na*e,1*e*r,-(n+Na)*e,1*e*r,(n-Na)*e],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*e,-2*e,1,-2*e,1.5*e,1,1*e,1.5*e,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function Hie(e,t){const{width:r=2,height:n=3}=t;return{vertices:[0,0,1*e*r,1*n,1*e*r,-1*n,0,0,1*e*r,1*n,1*e*r,-1*n],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*e,1,2,1*e,1,-2,1*e,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function Xie(e,t){const{width:r=2,height:n=2}=t;return{vertices:[0,n/2,e*r*1,n/2,e*r*1,-n/2,0,-n/2,0,n/2,e*r*1,n/2,e*r*1,-n/2,0,-n/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function Gie(e,t){const{width:r=2,height:n=3}=t;return{vertices:[0,0,1*r*e,.5*n,2*r*e,0,1*r*e,-.5*n,0,0,1*r*e,.5*n,2*r*e,0,1*r*e,-.5*n],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function qie(e,t){const{width:r=2,height:n=3}=t;return{vertices:[0,0,2*e*r,1*n,1.5*e*r,0,2*e*r,-1*n,0,0,2*e*r,1*n,1.5*e*r,0,2*e*r,-1*n],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function Wie(e,t){const{width:r=2,height:n=2}=t,i=HR(),a=$m.flatten([i]),o=$m(a.vertices,a.holes,a.dimensions),u=i.map(c=>[c[0]*r*e,c[1]*n]).flat();return{vertices:[...u,...u],dimensions:2,indices:o.map(c=>c+i.length),outLineIndices:o,normals:[...i.map(c=>[c[1]*n,c[0]*r*e,1]).flat(),...new Array(i.length*3).fill(0)]}}function $ie(e,t=0,r){const n=typeof r.source=="object"?r.source.type:r.source,i=typeof r.target=="object"?r.target.type:r.target,{width:a=n?KD[n]:0}=typeof r.source=="object"?r.source:{},{width:o=i?KD[i]:0}=typeof r.target=="object"?r.target:{};return{vertices:[0,Na,1*a,...e,1,Na,-1*o,...e,1,-Na,-1*o,...e,0,-Na,1*a,...e,0,Na,1*a,...e,1,Na,-1*o,...e,1,-Na,-1*o,...e,0,-Na,1*a,...e],outLineIndices:[0,1,2,0,2,3].map(u=>u+t),indices:[4,5,6,4,6,7].map(u=>u+t),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2}}function QD(e,t){const r=typeof e=="object"?e.type:e,n=t==="source"?1:-1,i=typeof e=="object"?e:{};switch(r){case"circle":return Wie(n,i);case"triangle":return Hie(n,i);case"diamond":return Gie(n,i);case"rect":return Xie(n,i);case"classic":return qie(n,i);case"halfTriangle":return Vie(n,i);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]}}}function Yie(e){const t=e.coordinates.flat(),r=1;return{vertices:[1,0,0,...t,1,2,-3,...t,1,1,-3,...t,0,1,0,...t,0,0,0,...t,1,0,0,...t,1,2,-3,...t,1,1,-3,...t,0,1,0,...t,0,0,0,...t],normals:[-1,2*r,1,2*r,-r,1,r,-r,1,r,-r,1,-1,-r,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function Zie(e,t){return t?Kie(e,t):Yie(e)}function Kie(e,t){const r=e.coordinates.flat(),{target:n="classic",source:i="circle"}=t,a=JD(QD(i,"source"),r,0,0),o=$ie(r,a.vertices.length/7,t),u=JD(QD(n,"target"),r,1,a.vertices.length/7+o.vertices.length/7);return{vertices:[...a.vertices,...o.vertices,...u.vertices],indices:[...a.outLineIndices,...o.outLineIndices,...u.outLineIndices,...a.indices,...o.indices,...u.indices],normals:[...a.normals,...o.normals,...u.normals],size:7}}function JD(e,t,r=1,n=0){const i=[],{vertices:a,indices:o,dimensions:u,outLineIndices:c}=e;for(let f=0;f<a.length;f+=u)i.push(r,a[f+1],a[f],...t);return Xe(Xe({},e),{},{vertices:i,indices:o.map(f=>f+n),outLineIndices:c.map(f=>f+n)})}const Qie=`// #extension GL_OES_standard_derivatives : enable

in vec4 v_color;
out vec4 outputColor;


// line texture

#pragma include "picking"

void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,Jie=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniorm {
  float u_gap_width: 1.0;
  float u_stroke_width: 1.0;
  float u_stroke_opacity: 1.0;
};

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

out vec4 v_color;

vec2 project_pixel_offset(vec2 offsets) {
  vec2 data = project_pixel(offsets);

  return vec2(data.x, -data.y);
}

vec2 line_dir(vec2 target, vec2 source) {
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}


void main() {
  // 
  vec2 source_world = a_Instance.rg; // 
  vec2 target_world = a_Instance.ba; // 
  vec2 flowlineDir = line_dir(target_world, source_world);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x);

  vec2 position = mix(source_world, target_world, a_Position.x);
  vec2 position64Low = mix(a_Instance64Low.rg, a_Instance64Low.ba, a_Position.x);

  float lengthCommon = length(
    project_position(vec4(target_world, 0, 1)) - project_position(vec4(source_world, 0, 1))
  );
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || 
  vec2 limitedOffsetDistances = clamp(
    offsetDistances,
    project_pixel(-lengthCommon * 0.2),
    project_pixel(lengthCommon * 0.2)
  );

  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon * 0.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon * 0.2),
    a_Position.x
  );

  vec2 normalsCommon = u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y));

  float gapCommon = -1. * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
      perpendicularDir * (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );

  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0), position64Low);

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));

  setPickingColor(a_PickingColor);
}
`;class eae extends yn{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,NORMAL:12})}getCommonUniformsInfo(){const{gapWidth:t=2,strokeWidth:r=1,strokeOpacity:n=1}=this.layer.getLayerConfig(),i={u_gap_width:t,u_stroke_width:r,u_stroke_opacity:n};return this.getUniformsBufferInfo(i)}initModels(){var t=this;return Je(function*(){return t.initUniformsBuffer(),t.buildModels()})()}buildModels(){var t=this;return Je(function*(){return[yield t.layer.buildLayerModel({moduleName:"flow_line",vertexShader:Jie,fragmentShader:Qie,defines:t.getDefines(),inject:t.getInject(),triangulation:Zie,styleOption:t.layer.getLayerConfig().symbol,primitive:D.TRIANGLES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:2,update:t=>{const{size:r=1}=t;return Array.isArray(r)?[r[0],r[1]]:[r,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:jt.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:4,update:(t,r,n)=>[n[3],n[4],n[5],n[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:jt.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:4,update:(t,r,n)=>[pi(n[3]),pi(n[4]),pi(n[5]),pi(n[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:jt.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:3,update:(t,r,n,i,a)=>a}})}}const tae=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

in vec4 v_dash_array;
in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_line_data;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;

  // 
  if(u_linearColor == 1.0) { // 
    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
    outputColor.a *= v_color.a;
  } else { //  color 
    outputColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // 
    } else {
      // 
      discard;
    };
  }

  // 
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  // 
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) {
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // 
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = outputColor.a/v_color.a;
    }

    float v = v_line_data.a; //  v 

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // 
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  } else {
    outputColor = filterColor(outputColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}
`,rae=`#define LineTypeSolid (0.0)
#define LineTypeDash (1.0)
#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

out vec4 v_dash_array;
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_line_data;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps(float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return index / (segmentNumber - 1.0);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(mix(source, target, segmentRatio), sqrt(max(0.0, vertex_height)));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}
float getAngularDist(vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) * sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate(vec2 source, vec2 target, float angularDist, float t) {
  if (abs(angularDist - PI) < 0.001) {
    return (1.0 - t) * source + t * target;
  }
  float a = sin((1.0 - t) * angularDist) / sin(angularDist);
  float b = sin(t * angularDist) / sin(angularDist);
  vec2 sin_source = sin(source);
  vec2 cos_source = cos(source);
  vec2 sin_target = sin(target);
  vec2 cos_target = cos(target);
  float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
  float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
  float z = a * sin_source.y + b * sin_target.y;
  return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));

}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if (u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    total_Distance = total_Distance * 16.0; // total_Distance*16.0 
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if (u_animate.x == Animate) {
    v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;

  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0), a_Instance64Low.xy);
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0), a_Instance64Low.zw);

  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_line_data.g = a_Position.x; // 
  if (LineTexture == u_line_texture) {
    float d_arcDistrance = length(source - target);
    d_arcDistrance = project_pixel(d_arcDistrance);

    float d_pixelLen = project_pixel(u_icon_step) / 8.0;
    v_line_data.b = floor(d_arcDistrance / d_pixelLen); // 

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // 
    float linePixelSize = project_pixel(a_Size); // 
    v_line_data.a = lineOffsetWidth / linePixelSize; //  v 

    v_iconMapUV = a_iconMapUV;
  }

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,nae={solid:0,dash:1};class iae extends yn{constructor(...t){super(...t),B(this,"texture",void 0),B(this,"updateTexture",()=>{const{createTexture2D:r}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=r({data:this.iconService.getCanvas(),mag:D.NEAREST,min:D.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12})}getCommonUniformsInfo(){const{sourceColor:t,targetColor:r,textureBlend:n="normal",lineType:i="solid",dashArray:a=[10,5],lineTexture:o=!1,iconStep:u=100,segmentNumber:c=30}=this.layer.getLayerConfig(),{animateOption:f}=this.layer.getLayerConfig();if(a.length===2&&a.push(0,0),this.rendererService.getDirty()){var h;(h=this.texture)===null||h===void 0||h.bind()}let p=0,m=[0,0,0,0],_=[0,0,0,0];t&&r&&(m=fn(t),_=fn(r),p=1);let y=this.layer.getLayerAnimateTime();isNaN(y)&&(y=0);const E={u_animate:this.animateOption2Array(f),u_dash_array:a,u_sourceColor:m,u_targetColor:_,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:c,u_line_type:nae[i]||0,u_icon_step:u,u_line_texture:o?1:0,u_textureBlend:n==="normal"?0:1,u_time:y,u_linearColor:p};return this.getUniformsBufferInfo(E)}initModels(){var t=this;return Je(function*(){return t.initUniformsBuffer(),t.updateTexture(),t.iconService.on("imageUpdate",t.updateTexture),t.buildModels()})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var t=this;return Je(function*(){const{segmentNumber:r=30}=t.layer.getLayerConfig();return[yield t.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:rae,fragmentShader:tae,triangulation:OC,styleOption:{segmentNumber:r},defines:t.getDefines(),inject:t.getInject(),depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{size:r=1}=t;return Array.isArray(r)?[r[0]]:[r]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:jt.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:4,update:(t,r,n)=>[n[3],n[4],n[5],n[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:jt.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:4,update:(t,r,n)=>[pi(n[3]),pi(n[4]),pi(n[5]),pi(n[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:jt.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:2,update:t=>{const r=this.iconService.getIconMap(),{texture:n}=t,{x:i,y:a}=r[n]||{x:0,y:0};return[i,a]}}})}}const aae=`// #extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

in vec4 v_color;
in vec4 v_stroke;
// dash
in vec4 v_dash_array;
in float v_d_distance_ratio;
in vec2 v_iconMapUV;
in vec4 v_texture_data;

out vec4 outputColor;
#pragma include "picking"

// [animate, duration, interval, trailLength],
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // 
      discard;
    };
  }
  float animateSpeed = 0.0; // 
  float d_distance_ratio = v_texture_data.r; // 
  if(u_linearDir < 1.0) {
    d_distance_ratio = v_texture_data.a;
  }
  if(u_linearColor == 1.0) { // 
    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
    outputColor.a *= v_color.a;
  } else { //  color 
     outputColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // 
    float d_texPixelLen = v_texture_data.b;  // 
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  //  v 

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  //  border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // 
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  outputColor = filterColor(outputColor);
}
`,oae=`#define Animate (0.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_INDEX) in vec3 a_DistanceAndIndexAndMiter;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec4 a_Normal_Total_Distance;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

out vec4 v_color;
out vec4 v_stroke;
//dash
out vec4 v_dash_array;
out float v_d_distance_ratio;
// texV  -  v 
out vec2 v_iconMapUV;
out vec4 v_texture_data;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec2 a_DistanceAndIndex = a_DistanceAndIndexAndMiter.xy;
  float a_Miter = a_DistanceAndIndexAndMiter.z;
  vec3 a_Normal = a_Normal_Total_Distance.xyz;
  float a_Total_Distance = a_Normal_Total_Distance.w;
  //dash
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;

  // cal style mapping - 
  float d_texPixelLen; // 
  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * a_Normal;

  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // 
  float linePixelSize = project_pixel(a_Size.x) * 2.0; //   * 2
  float texV = lineOffsetWidth / linePixelSize; //  v 

  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // 

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; //  -  vertex height
  float lineHeight = a_Size.y; // size  [linewidth, lineheight]

  //  mapbox 
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // 
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    h *= mapboxZoomScale;
    h += u_raisingHeight * mapboxZoomScale;
    if (u_heightfixed > 0.0) {
      lineHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(
    vec4(project_pos.xy + offset, lineHeight + h, 1.0)
  );

  setPickingColor(a_PickingColor);
}
`;class a7 extends yn{constructor(...t){super(...t),B(this,"textureEventFlag",!1),B(this,"texture",this.createTexture2D({data:new Uint8Array([0,0,0,0]),width:1,height:1})),B(this,"updateTexture",()=>{const{createTexture2D:r}=this.rendererService;if(this.textures.length===0&&(this.textures=[this.texture]),this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=r({data:this.iconService.getCanvas(),mag:D.NEAREST,min:D.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128})})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,DISTANCE_INDEX:10,NORMAL:11,UV:12})}getCommonUniformsInfo(){const{sourceColor:t,targetColor:r,textureBlend:n="normal",lineType:i="solid",dashArray:a=[10,5,0,0],lineTexture:o=!1,iconStep:u=100,vertexHeightScale:c=20,strokeWidth:f=0,raisingHeight:h=0,heightfixed:p=!1,linearDir:m=kD.VERTICAL,blur:_=[1,1,1,0]}=this.layer.getLayerConfig();let y=a;if(i!=="dash"&&(y=[0,0,0,0]),y.length===2&&y.push(0,0),this.rendererService.getDirty()&&this.texture){var E;(E=this.texture)===null||E===void 0||E.bind()}const{animateOption:b}=this.layer.getLayerConfig();let S=0,A=[0,0,0,0],R=[0,0,0,0];t&&r&&(A=fn(t),R=fn(r),S=1);const M={u_animate:this.animateOption2Array(b),u_dash_array:y,u_blur:_,u_sourceColor:A,u_targetColor:R,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:u,u_heightfixed:Number(p),u_vertexScale:c,u_raisingHeight:Number(h),u_strokeWidth:f,u_textureBlend:n===Eie.NORMAL?0:1,u_line_texture:o?1:0,u_linearDir:m===kD.VERTICAL?1:0,u_linearColor:S,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(M)}initModels(){var t=this;return Je(function*(){return t.initUniformsBuffer(),t.textureEventFlag||(t.textureEventFlag=!0,t.updateTexture(),t.iconService.on("imageUpdate",t.updateTexture)),t.buildModels()})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var t=this;return Je(function*(){const{depth:r=!1}=t.layer.getLayerConfig(),{frag:n,vert:i,type:a}=t.getShaders();return t.layer.triangulation=XR,[yield t.layer.buildLayerModel({moduleName:"line"+a,vertexShader:i,fragmentShader:n,triangulation:XR,defines:t.getDefines(),inject:t.getInject(),depth:{enable:r}})]})()}getShaders(){return{frag:aae,vert:oae,type:""}}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:jt.Attribute,descriptor:{name:"a_DistanceAndIndexAndMiter",shaderLocation:this.attributeLocation.DISTANCE_INDEX,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:3,update:(t,r,n,i,a,o)=>o===void 0?[n[3],10,n[4]]:[n[3],o,n[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:2,update:t=>{const{size:r=1}=t;return Array.isArray(r)?[r[0],r[1]]:[r,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal_total_distance",type:jt.Attribute,descriptor:{name:"a_Normal_Total_Distance",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:4,update:(t,r,n,i,a)=>[...a,n[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:jt.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:2,update:t=>{const r=this.iconService.getIconMap(),{texture:n}=t,{x:i,y:a}=r[n]||{x:0,y:0};return[i,a]}}})}}const sae=`
layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};
in float v_distanceScale;
in vec4 v_color;
//dash
in vec4 v_dash_array;

out vec4 outputColor;
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // 
      discard;
    };
  }
  if(u_linearColor==1.0){
    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
    outputColor.a *= v_color.a; // 
  }
  else{
    outputColor = v_color;
  }
}
`,uae=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec4 a_SizeDistanceAndTotalDistance;

layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};

#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out float v_distanceScale;
out vec4 v_dash_array;

void main() {
  //dash
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;

  v_color = a_Color;
  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float h = float(a_Position.z) * u_vertexScale; //  - 

  float lineHeight = a_SizeDistanceAndTotalDistance.y;
  //  mapbox 
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // 
    h *= 2.0 / pow(2.0, 20.0 - u_Zoom);
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
  gl_PointSize = 10.0;

}
`;class lae extends yn{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getCommonUniformsInfo(){const{sourceColor:t,targetColor:r,lineType:n="solid",dashArray:i=[10,5,0,0],vertexHeightScale:a=20}=this.layer.getLayerConfig();let o=i;n!=="dash"&&(o=[0,0,0,0]),o.length===2&&o.push(0,0);let u=0,c=[0,0,0,0],f=[0,0,0,0];t&&r&&(c=fn(t),f=fn(r),u=1);const h={u_sourceColor:c,u_targetColor:f,u_dash_array:o,u_vertexScale:a,u_linearColor:u};return this.getUniformsBufferInfo(h)}initModels(){var t=this;return Je(function*(){return t.buildModels()})()}getShaders(){return{frag:sae,vert:uae,type:"lineSimpleNormal"}}buildModels(){var t=this;return Je(function*(){t.initUniformsBuffer();const{frag:r,vert:n,type:i}=t.getShaders();return[yield t.layer.buildLayerModel({moduleName:i,vertexShader:n,fragmentShader:r,triangulation:Aie,defines:t.getDefines(),inject:t.getInject(),primitive:D.LINES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:jt.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:4,update:(t,r,n)=>{const{size:i=1}=t,a=Array.isArray(i)?[i[0],i[1]]:[i,0];return[a[0],a[1],n[3],n[5]]}}})}}const cae=`#define Animate 0.0
#define LineTexture 1.0

// line texture

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};


in vec2 v_iconMapUV;
in vec4 v_color;
in float v_blur;
in vec4 v_dataset;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // 
  float d_distance_ratio = v_dataset.r; // 
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // 
    outputColor = mix(u_sourceColor, u_targetColor, v);
  } else { //  color 
     outputColor = v_color;
  }

  outputColor.a *= v_color.a; // 
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // 
    float d_texPixelLen = v_dataset.b;  // 
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  //  v 

    //  start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    //  end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // Tip: 
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  }


  // blur - AA
  if(v < v_blur) {
    outputColor.a = mix(0.0, outputColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  outputColor = filterColor(outputColor);
}
`,fae=`#define Animate 0.0
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_MITER_TOTAL) in vec3 a_Distance_Total_Miter;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};

// texV  -  v 
out vec2 v_iconMapUV;
out vec4 v_color;
out float v_blur;
out vec4 v_dataset;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float a_Distance = a_Distance_Total_Miter.x;
  float a_Miter = a_Distance_Total_Miter.y;
  float a_Total_Distance = a_Distance_Total_Miter.z;

  float d_distance_ratio; // 
  float d_texPixelLen; // 

  v_iconMapUV = a_iconMapUV;
  if (u_heightfixed < 1.0) {
    //  zoom 
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }

  if (u_animate.x == Animate || u_linearColor == 1.0) {
    d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0) / 2.0;
  // 
  v_dataset[0] = d_distance_ratio; // 
  v_dataset[1] = a_Distance; // 
  v_dataset[2] = d_texPixelLen; // 
  v_dataset[3] = miter; //  v  0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float originSize = a_Size.x; // 
  if (u_heightfixed < 1.0) {
    originSize = project_float_meter(a_Size.x); //  zoom 
  }

  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  //  mapbox 
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // 
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    if (u_heightfixed > 0.0) {
      wallHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;class dae extends yn{constructor(...t){super(...t),B(this,"texture",void 0),B(this,"updateTexture",()=>{const{createTexture2D:r}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=r({data:this.iconService.getCanvas(),mag:D.NEAREST,min:D.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:12,UV:13,DISTANCE_MITER_TOTAL:15})}getCommonUniformsInfo(){const{sourceColor:t,targetColor:r,textureBlend:n="normal",heightfixed:i=!1,lineTexture:a=!1,iconStep:o=100,iconStepCount:u=1}=this.layer.getLayerConfig(),{animateOption:c}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var f;(f=this.texture)===null||f===void 0||f.bind()}let h=0,p=[0,0,0,0],m=[0,0,0,0];t&&r&&(p=fn(t),m=fn(r),h=1);const _={u_animate:this.animateOption2Array(c),u_sourceColor:p,u_targetColor:m,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:o,u_heightfixed:Number(i),u_linearColor:h,u_line_texture:a?1:0,u_textureBlend:n==="normal"?0:1,u_iconStepCount:u,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(_)}initModels(){var t=this;return Je(function*(){return t.initUniformsBuffer(),t.updateTexture(),t.iconService.on("imageUpdate",t.updateTexture),t.buildModels()})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var t=this;return Je(function*(){return[yield t.layer.buildLayerModel({moduleName:"lineWall",vertexShader:fae,fragmentShader:cae,triangulation:XR,defines:t.getDefines(),inject:t.getInject(),depth:{enable:!1},blend:t.getBlend()})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:2,update:t=>{const{size:r=1}=t;return Array.isArray(r)?[r[0],r[1]]:[r,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:jt.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:3,update:(t,r,n,i,a)=>a}}),this.styleAttributeService.registerStyleAttribute({name:"distanceAndTotalAndMiter",type:jt.Attribute,descriptor:{name:"a_Distance_Total_Miter",shaderLocation:this.attributeLocation.DISTANCE_MITER_TOTAL,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:3,update:(t,r,n)=>[n[3],n[4],n[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:jt.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:2,update:t=>{const r=this.iconService.getIconMap(),{texture:n}=t,{x:i,y:a}=r[n]||{x:0,y:0};return[i,a]}}})}}const hae={arc:Uie,arc3d:ZD,greatcircle:iae,wall:dae,line:a7,simple:lae,flowline:eae,earthArc3d:ZD};class o7 extends dp{constructor(...t){super(...t),B(this,"type","LineLayer"),B(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","thetaOffset"]),B(this,"arrowInsertCount",0),B(this,"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}})}buildModels(){var t=this;return Je(function*(){const r=t.getModelType();t.layerModel=new hae[r](t),yield t.initLayerModels()})()}getDefaultConfig(){const t=this.getModelType();return{line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}}[t]}getModelType(){var t;if(this.layerType)return this.layerType;const r=this.styleAttributeService.getLayerStyleAttribute("shape");return(r==null||(t=r.scale)===null||t===void 0?void 0:t.field)||"line"}processData(t){if(this.getModelType()!=="simple")return t;const r=[];return t.map(n=>{if(Array.isArray(n.coordinates)&&Array.isArray(n.coordinates[0])&&Array.isArray(n.coordinates[0][0])){const i=Xe({},n);n.coordinates.map(a=>{r.push(Xe(Xe({},i),{},{coordinates:a}))})}else r.push(n)}),r}}const pae=`
layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

in vec4 v_color;
in float v_blur;
in float v_innerRadius;

out vec4 outputColor;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip:  0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: 
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    //  stroke  stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      outputColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      outputColor = mix(v_color, stroke, mixR);
    } else {
      outputColor = v_color;
    }
  } else {
    //  stroke  stroke <= 0.01
    outputColor = v_color;
  }

  outputColor = filterColor(outputColor);
  
  if(u_additive > 0.0) {
    outputColor *= circleClipOpacity;
  } else {
    outputColor.a *= circleClipOpacity;
  }

}
`,vae=`
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

out vec4 v_color;
out float v_blur;
out float v_innerRadius;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_blur = 1.0 - max(2.0 / a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);

  vec2 offset = project_pixel(u_offsets);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function eL(e){const t=e.coordinates;return{vertices:[...t],indices:[0],size:t.length}}class mae extends yn{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const{blend:t,strokeOpacity:r=1,strokeWidth:n=0,stroke:i="#fff"}=this.layer.getLayerConfig(),a={u_stroke_color:fn(i),u_additive:t==="additive"?1:0,u_stroke_opacity:r,u_stroke_width:n};return this.getUniformsBufferInfo(a)}initModels(){var t=this;return Je(function*(){return t.buildModels()})()}buildModels(){var t=this;return Je(function*(){return t.layer.triangulation=eL,t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:vae,fragmentShader:pae,defines:t.getDefines(),inject:t.getInject(),triangulation:eL,depth:{enable:!1},primitive:D.POINTS})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{size:r=1}=t;return Array.isArray(r)?[r[0]]:[r]}}})}}const _ae=`precision highp float;
in vec4 v_color;

#pragma include "picking"

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // 
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};
in float v_lightWeight;
in float v_barLinearZ;
out vec4 outputColor;
void main() {

   outputColor = v_color;

  // 
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,gae=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // 
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};

out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;
// 


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) +
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - 
  vec3 size = a_Size * a_Position;

  // a_Position.z  0 - 1 01 
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; //  - 
  if(u_heightfixed < 1.0) { // 
    //
  } else {//    mapbox 
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r 
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // 
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // 
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // 
  if(u_linearColor == 1.0) { // 
    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);
    v_color.rgb *= lightWeight;
  } else { //  color 
     v_color = a_Color;
  }
  v_color.a *= u_opacity;


  //  xy 
  //mxx
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//
  float xsin = sin(xRadian);//
  mat4 mx = mat4(
    1,0,0,0,
    0,xcos,-xsin,0,
    0,xsin,xcos,0,
    0,0,0,1);

  //myy
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//
  float ysin = sin(yRadian);//
  mat4 my = mat4(
    ycos,0,-ysin,0,
    0,1,0,0,
    ysin,0,ycos,0,
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);


  setPickingColor(a_PickingColor);
}
`,{isNumber:yae}=Ln;let Eae=class extends yn{constructor(...t){super(...t),B(this,"raiseCount",0),B(this,"raiseRepeat",0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,POS:10,NORMAL:11})}getCommonUniformsInfo(){const{animateOption:t={enable:!1,speed:.01,repeat:!1},opacity:r=1,sourceColor:n,targetColor:i,pickLight:a=!1,heightfixed:o=!0,opacityLinear:u={enable:!1,dir:"up"},lightEnable:c=!0}=this.layer.getLayerConfig();let f=0,h=[0,0,0,0],p=[0,0,0,0];if(n&&i&&(h=fn(n),p=fn(i),f=1),this.raiseCount<1&&this.raiseRepeat>0&&t.enable){const{speed:y=.01}=t;this.raiseCount+=y,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const m={u_sourceColor:h,u_targetColor:p,u_linearColor:f,u_pickLight:Number(a),u_heightfixed:Number(o),u_r:t.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:yae(r)?r:1,u_opacitylinear:Number(u.enable),u_opacitylinear_dir:u.dir==="up"?1:0,u_lightEnable:Number(c)};return this.getUniformsBufferInfo(m)}initModels(){var t=this;return Je(function*(){return t.initUniformsBuffer(),t.buildModels()})()}buildModels(){var t=this;return Je(function*(){const{animateOption:{repeat:r=1}}=t.layer.getLayerConfig();return t.raiseRepeat=r,[yield t.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:gae,fragmentShader:_ae,triangulation:n7,depth:{enable:!0},defines:t.getDefines(),inject:t.getInject(),cull:{enable:!0,face:D.FRONT},blend:t.getBlend()})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:3,update:t=>{const{size:r}=t;if(r){let n=[];return Array.isArray(r)&&(n=r.length===2?[r[0],r[0],r[1]]:r),Array.isArray(r)||(n=[r,r,r]),n}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:jt.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:3,update:(t,r,n,i,a)=>a}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:jt.Attribute,descriptor:{name:"a_Pos",shaderLocation:this.attributeLocation.POS,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:3,update:t=>{const r=Df(t.coordinates);return t7([r[0],r[1]])}}})}};const bae=`in vec4 v_data;
in vec4 v_color;
in float v_radius;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
}
`,Tae=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
out vec4 v_data;
out vec4 v_color;
out float v_radius;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize 
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) 
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);

  setPickingColor(a_PickingColor);
}
`;let Sae=class extends yn{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,SHAPE:10,EXTRUDE:11})}getCommonUniformsInfo(){const{strokeOpacity:t=1,strokeWidth:r=0,blend:n,blur:i=0}=this.layer.getLayerConfig();this.layer.getLayerConfig();const a={u_additive:n==="additive"?1:0,u_stroke_opacity:t,u_stroke_width:r,u_blur:i};return this.getUniformsBufferInfo(a)}initModels(){var t=this;return Je(function*(){return t.initUniformsBuffer(),t.buildModels()})()}buildModels(){var t=this;return Je(function*(){return t.layer.triangulation=$D,[yield t.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:Tae,fragmentShader:bae,triangulation:$D,defines:t.getDefines(),inject:t.getInject(),depth:{enable:!0},blend:t.getBlend()})]})()}animateOption2Array(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:jt.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:3,update:(t,r,n,i)=>{const[a,o,u]=n,c=Qo(0,0,1),f=Qo(a,0,u),h=a>=0?J4(c,f):Math.PI*2-J4(c,f),p=Math.PI*2-Math.asin(o/100),m=dC();H5(m,m,h),hC(m,m,p);const _=Qo(1,1,0);t0(_,_,m),pm(_,_);const y=Qo(-1,1,0);t0(y,y,m),pm(y,y);const E=Qo(-1,-1,0);t0(E,E,m),pm(E,E);const b=Qo(1,-1,0);t0(b,b,m),pm(b,b);const S=[..._,...y,...E,...b],A=i%4*3;return[S[A],S[A+1],S[A+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{size:r=5}=t;return Array.isArray(r)?[r[0]]:[r]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:jt.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{shape:r=2}=t;return[this.layer.getLayerConfig().shape2d.indexOf(r)]}}})}};const Aae=`
in vec4 v_color;
in float v_lightWeight;
out vec4 outputColor;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {

  outputColor = v_color;
  // 
  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,xae=`#define pi (3.1415926535)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec4 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};
out vec4 v_color;
out float v_lightWeight;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if (x > 0.0 && z > 0.0) {
    return atan(x / z);
  } else if (x > 0.0 && z <= 0.0) {
    return atan(-z / x) + pi / 2.0;
  } else if (x <= 0.0 && z <= 0.0) {
    return pi + atan(x / z); //atan(x/z) +
  } else {
    return atan(z / -x) + pi * 3.0 / 2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y / r);
}

void main() {
  vec3 size = a_Size * a_Position;

  vec3 offset = size; //  - 

  if (u_heightfixed < 1.0) {
    // 
  } else {
    //    mapbox 
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      offset *= 4.0 / pow(2.0, 21.0 - u_Zoom);
    }
  }

  vec2 positions = a_Extrude.xy;
  vec2 positions64Low = a_Extrude.zw;
  vec4 project_pos = project_position(vec4(positions, 0.0, 1.0), positions64Low);

  // u_r 
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // 
  float lightWeight = 1.0;

  if (u_lightEnable > 0.0) {
    // 
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

  // 
  if (u_linearColor == 1.0) {
    // 
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a = v_color.a * opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);
  }

  if (u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? 1.0 - a_Position.z : a_Position.z;
  }

  gl_Position = project_common_position_to_clipspace(pos);

  setPickingColor(a_PickingColor);
}
`;let s7=class extends yn{constructor(...t){super(...t),B(this,"raiseCount",0),B(this,"raiseRepeat",0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10,NORMAL:11})}getCommonUniformsInfo(){const{animateOption:t={enable:!1,speed:.01,repeat:!1},sourceColor:r,targetColor:n,pickLight:i=!1,heightfixed:a=!1,opacityLinear:o={enable:!1,dir:"up"},lightEnable:u=!0}=this.layer.getLayerConfig();let c=0,f=[0,0,0,0],h=[0,0,0,0];if(r&&n&&(f=fn(r),h=fn(n),c=1),this.raiseCount<1&&this.raiseRepeat>0&&t.enable){const{speed:_=.01}=t;this.raiseCount+=_,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const p={u_pickLight:Number(i),u_heightfixed:Number(a),u_r:t.enable&&this.raiseRepeat>0?this.raiseCount:1,u_linearColor:c,u_sourceColor:f,u_targetColor:h,u_opacitylinear:Number(o.enable),u_opacitylinear_dir:o.dir==="up"?1:0,u_lightEnable:Number(u)};return this.getUniformsBufferInfo(p)}initModels(){var t=this;return Je(function*(){return t.buildModels()})()}buildModels(){var t=this;return Je(function*(){const{depth:r=!0,animateOption:{repeat:n=1}}=t.layer.getLayerConfig();return t.raiseRepeat=n,t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:xae,fragmentShader:Aae,triangulation:n7,defines:t.getDefines(),inject:t.getInject(),cull:{enable:!0,face:D.FRONT},depth:{enable:r}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:3,update:t=>{const{size:r}=t;if(r){let n=[];return Array.isArray(r)&&(n=r.length===2?[r[0],r[0],r[1]]:r),Array.isArray(r)||(n=[r,r,r]),n}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:jt.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:3,update:(t,r,n,i,a)=>a}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:jt.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:4,update:t=>{const r=Df(t.coordinates);return[r[0],r[1],pi(r[0]),pi(r[1])]}}})}};const Rae=`
layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if(u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }
  float intensity = 1.0;
  if(u_time!=-1.0){
    //wave
    float d = length(v_data.xy);
    if(d > 0.5) {
      discard;
    }
    intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor *= intensity;//wave
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor.a *= intensity;//wave 
    outputColor = filterColor(outputColor);
  }
   //  mask 
  if(outputColor.a < 0.01) {
    discard;
  } 
}
`,Cae=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // 
   v_stroke = stroke;
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize 
  *  u_meter2coord 
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);

  // TODP: /abs(extrude.x) 
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;let u7=class extends yn{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,SHAPE:10,EXTRUDE:11})}getCommonUniformsInfo(){const{strokeOpacity:t=1,strokeWidth:r=0,blend:n,blur:i=0,raisingHeight:a=0,heightfixed:o=!1,unit:u="pixel"}=this.layer.getLayerConfig();let c=this.getAnimateUniforms().u_time;isNaN(c)&&(c=-1);const f={u_blur_height_fixed:[i,Number(a),Number(o)],u_stroke_width:r,u_additive:n==="additive"?1:0,u_stroke_opacity:t,u_size_unit:CC[u],u_time:c,u_animate:this.getAnimateUniforms().u_animate};return this.getUniformsBufferInfo(f)}getAnimateUniforms(){const{animateOption:t={enable:!1}}=this.layer.getLayerConfig();return{u_animate:this.animateOption2Array(t),u_time:this.layer.getLayerAnimateTime()}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Mf)}initModels(){var t=this;return Je(function*(){return t.buildModels()})()}buildModels(){var t=this;return Je(function*(){const{frag:r,vert:n,type:i}=t.getShaders();return t.layer.triangulation=Mf,t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:i,vertexShader:n,fragmentShader:r,defines:t.getDefines(),inject:t.getInject(),triangulation:Mf,depth:{enable:!1}})]})()}getShaders(){return{frag:Rae,vert:Cae,type:"pointFill"}}animateOption2Array(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}registerBuiltinAttributes(){const t=this.layer.getLayerConfig().shape2d;this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:jt.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:3,update:(r,n,i,a)=>{const o=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],u=a%4*3;return[o[u],o[u+1],o[u+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:1,update:r=>{const{size:n=5}=r;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:jt.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:1,update:r=>{const{shape:n=2}=r;return[t.indexOf(n)]}}})}};const Oae=`in vec2 v_uv;//  uv 
in vec2 v_Iconuv;
in float v_opacity;
out vec4 outputColor;

uniform sampler2D u_texture;
layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  outputColor = texture(SAMPLER_2D(u_texture), pos);
  outputColor.a *= v_opacity;
  outputColor = filterColor(outputColor);
}
`,Mae=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed;
  float u_raisingHeight;
  float u_size_unit;
};

out vec2 v_uv;
out vec2 v_Iconuv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0) / 2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if (u_size_unit == 1.0) {
    newSize = newSize * u_PixelsPerMeter.z;
  }

  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = extrude.xy * newSize + offsets;

  offset = rotate_matrix(offset, rotation);

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`;class wae extends yn{constructor(...t){super(...t),B(this,"meter2coord",1),B(this,"texture",void 0),B(this,"isMeter",!1),B(this,"radian",0),B(this,"updateTexture",()=>{const{createTexture2D:r}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),this.layerService.throttleRenderLayers();return}this.texture=r({data:this.iconService.getCanvas(),mag:D.LINEAR,min:D.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10,UV:11})}getCommonUniformsInfo(){const{raisingHeight:t=0,heightfixed:r=!1,unit:n="pixel"}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var i;(i=this.texture)===null||i===void 0||i.bind()}const a={u_textSize:[1024,this.iconService.canvasHeight||128],u_heightfixed:Number(r),u_raisingHeight:Number(t),u_size_unit:CC[n]};return this.getUniformsBufferInfo(a)}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Mf)}initModels(){var t=this;return Je(function*(){return t.iconService.on("imageUpdate",t.updateTexture),t.updateTexture(),t.buildModels()})()}buildModels(){var t=this;return Je(function*(){return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:Mae,fragmentShader:Oae,triangulation:Mf,depth:{enable:!1},defines:t.getDefines(),inject:t.getInject(),cull:{enable:!0,face:D.FRONT}})]})()}clearModels(){var t;this.iconService.off("imageUpdate",this.updateTexture),(t=this.texture)===null||t===void 0||t.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:jt.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:2,update:t=>{const r=this.iconService.getIconMap(),{shape:n}=t,{x:i,y:a}=r[n]||{x:-64,y:-64};return[i,a]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:jt.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:3,update:(t,r,n,i)=>{const a=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=i%4*3;return[a[o],a[o+1],a[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{size:r=5}=t;return Array.isArray(r)?[r[0]]:[r]}}})}}const Nae=`layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

uniform sampler2D u_texture;

in vec4 v_color;
in vec2 v_uv;
in float v_opacity;

#pragma include "picking"

out vec4 outputColor;

void main(){
  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
  vec4 textureColor;

  // Y = 0.299R + 0.587G + 0.114B // 
  
  textureColor = texture(SAMPLER_2D(u_texture), pos);

  // Tip:  mipmap 
  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
  if(fragmengTocenter >= 0.5) {
        float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
        textureColor.a *= luma;
  }
  
  if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
        outputColor= textureColor;
  }else {
        outputColor= step(0.01, textureColor.z) * v_color;
  }
  outputColor.a *= v_opacity;
  if (outputColor.a < 0.01) {
      discard;
  }
  outputColor = filterColor(outputColor);
}
`,Iae=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

out vec4 v_color;
out vec2 v_uv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - 
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if (u_heightfixed < 1.0) {
    // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;class l7 extends yn{constructor(...t){super(...t),B(this,"texture",void 0),B(this,"updateTexture",()=>{const{createTexture2D:r}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(()=>{this.layerService.throttleRenderLayers()});return}this.texture=r({data:this.iconService.getCanvas(),mag:D.LINEAR,min:D.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0})})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,UV:10})}getUninforms(){if(this.rendererService.getDirty()){var t;(t=this.texture)===null||t===void 0||t.bind()}const r=this.getCommonUniformsInfo(),n=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Xe(Xe({},r.uniformsOption),n.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:t=0,heightfixed:r=!1}=this.layer.getLayerConfig(),n={u_textSize:[1024,this.iconService.canvasHeight||128],u_raisingHeight:Number(t),u_heightfixed:Number(r),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(n)}initModels(){var t=this;return Je(function*(){return t.iconService.on("imageUpdate",t.updateTexture),t.updateTexture(),t.buildModels()})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var t=this;return Je(function*(){return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"pointImage",vertexShader:Iae,fragmentShader:Nae,triangulation:Sie,defines:t.getDefines(),inject:t.getInject(),depth:{enable:!1},primitive:D.POINTS})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{size:r=5}=t;return Array.isArray(r)?[r[0]]:[r]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:jt.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:2,update:t=>{const r=this.iconService.getIconMap(),{shape:n}=t,{x:i,y:a}=r[n]||{x:-64,y:-64};return[i,a]}}})}}const Pae=`in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}`,Dae=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(project_pos);

  gl_PointSize = a_Size * u_size_scale * 2.0 * u_DevicePixelRatio;
}
`;function tL(e){const t=e.coordinates;return{vertices:[...t],indices:[0],size:t.length}}class c7 extends yn{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const t={u_size_scale:.5};return this.getUniformsBufferInfo(t)}initModels(){var t=this;return Je(function*(){return t.buildModels()})()}buildModels(){var t=this;return Je(function*(){return t.layer.triangulation=tL,t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:Dae,fragmentShader:Pae,triangulation:tL,defines:t.getDefines(),inject:t.getInject(),depth:{enable:!1},primitive:D.POINTS,pick:!1})]})()}clearModels(){}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{size:r=1}=t;return Array.isArray(r)?[r[0]]:[r]}}})}}const Lae=`
layout(std140) uniform commonUniorm{
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};
in vec4 v_data;
in vec4 v_color;
in float v_radius;
in vec2 v_extrude;
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  outputColor = vec4(v_color.rgb, v_color.a);

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
  } else {
    outputColor.a *= opacity_t;
  }

  if(outputColor.a > 0.0) {
    outputColor = filterColor(outputColor);
  }

  vec2 extrude =  v_extrude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  outputColor.a *= radar_v;
}
`,Bae=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniorm {
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};

out vec4 v_data;
out vec4 v_color;
out float v_radius;
out vec2 v_extrude;

#pragma include "projection"
#pragma include "picking"

void main() {
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2(
    cos(time), sin(time),
    -sin(time), cos(time)
  );
  v_extrude = rotateMatrix * a_Extrude.xy;

  v_color = a_Color;
  v_color.a *= opacity;

  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_size_unit == 1.) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  v_radius = newSize;

  vec2 offset = (a_Extrude.xy * (newSize));

  offset = project_pixel(offset);

  v_data = vec4(a_Extrude.x, a_Extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`;class Fae extends yn{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10})}getCommonUniformsInfo(){const{blend:t,speed:r=1,unit:n="pixel"}=this.layer.getLayerConfig(),i={u_additive:t==="additive"?1:0,u_size_unit:CC[n],u_speed:r,u_time:this.layer.getLayerAnimateTime()};return this.getUniformsBufferInfo(i)}getAnimateUniforms(){return{}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Mf)}initModels(){var t=this;return Je(function*(){return t.buildModels()})()}buildModels(){var t=this;return Je(function*(){return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:Bae,fragmentShader:Lae,triangulation:Mf,defines:t.getDefines(),inject:t.getInject(),depth:{enable:!1}})]})()}animateOption2Array(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:jt.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:3,update:(t,r,n,i)=>{const a=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=i%4*3;return[a[o],a[o+1],a[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{shaderLocation:this.attributeLocation.SIZE,name:"a_Size",buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{size:r=5}=t;return Array.isArray(r)?[r[0]]:[r]}}})}}class Uae{constructor(t,r,n){B(this,"boxCells",[]),B(this,"xCellCount",void 0),B(this,"yCellCount",void 0),B(this,"boxKeys",void 0),B(this,"bboxes",void 0),B(this,"width",void 0),B(this,"height",void 0),B(this,"xScale",void 0),B(this,"yScale",void 0),B(this,"boxUid",void 0);const i=this.boxCells;this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(r/n);for(let a=0;a<this.xCellCount*this.yCellCount;a++)i.push([]);this.boxKeys=[],this.bboxes=[],this.width=t,this.height=r,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/r,this.boxUid=0}insert(t,r,n,i,a){this.forEachCell(r,n,i,a,this.insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(a)}query(t,r,n,i,a){return this.queryHitTest(t,r,n,i,!1,a)}hitTest(t,r,n,i,a){return this.queryHitTest(t,r,n,i,!0,a)}insertBoxCell(t,r,n,i,a,o){this.boxCells[a].push(o)}queryHitTest(t,r,n,i,a,o){if(n<0||t>this.width||i<0||r>this.height)return a?!1:[];const u=[];if(t<=0&&r<=0&&this.width<=n&&this.height<=i){if(a)return!0;for(let f=0;f<this.boxKeys.length;f++)u.push({key:this.boxKeys[f],x1:this.bboxes[f*4],y1:this.bboxes[f*4+1],x2:this.bboxes[f*4+2],y2:this.bboxes[f*4+3]});return o?u.filter(o):u}const c={hitTest:a,seenUids:{box:{},circle:{}}};return this.forEachCell(t,r,n,i,this.queryCell,u,c,o),a?u.length>0:u}queryCell(t,r,n,i,a,o,u,c){const f=u.seenUids,h=this.boxCells[a];if(h!==null){const p=this.bboxes;for(const m of h)if(!f.box[m]){f.box[m]=!0;const _=m*4;if(t<=p[_+2]&&r<=p[_+3]&&n>=p[_+0]&&i>=p[_+1]&&(!c||c(this.boxKeys[m]))){if(u.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[m],x1:p[_],y1:p[_+1],x2:p[_+2],y2:p[_+3]})}}}return!1}forEachCell(t,r,n,i,a,o,u,c){const f=this.convertToXCellCoord(t),h=this.convertToYCellCoord(r),p=this.convertToXCellCoord(n),m=this.convertToYCellCoord(i);for(let _=f;_<=p;_++)for(let y=h;y<=m;y++){const E=this.xCellCount*y+_;if(a.call(this,t,r,n,i,E,o,u,c))return}}convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}}class kae{constructor(t,r){B(this,"width",void 0),B(this,"height",void 0),B(this,"grid",void 0),B(this,"viewportPadding",100),B(this,"screenRightBoundary",void 0),B(this,"screenBottomBoundary",void 0),B(this,"gridRightBoundary",void 0),B(this,"gridBottomBoundary",void 0),this.width=t,this.height=r,this.viewportPadding=Math.max(t,r),this.grid=new Uae(t+this.viewportPadding,r+this.viewportPadding,25),this.screenRightBoundary=t+this.viewportPadding,this.screenBottomBoundary=r+this.viewportPadding,this.gridRightBoundary=t+2*this.viewportPadding,this.gridBottomBoundary=r+2*this.viewportPadding}placeCollisionBox(t){const r=t.x1+t.anchorPointX+this.viewportPadding,n=t.y1+t.anchorPointY+this.viewportPadding,i=t.x2+t.anchorPointX+this.viewportPadding,a=t.y2+t.anchorPointY+this.viewportPadding;return!this.isInsideGrid(r,n,i,a)||this.grid.hitTest(r,n,i,a)?{box:[]}:{box:[r,n,i,a]}}insertCollisionBox(t,r){const n={featureIndex:r};this.grid.insert(n,t[0],t[1],t[2],t[3])}project(t,r,n){const i=gK(r,n,0,1),a=G5(),o=fK(...t);return pC(a,i,o),{x:(a[0]/a[3]+1)/2*this.width+this.viewportPadding,y:(-a[1]/a[3]+1)/2*this.height+this.viewportPadding}}isInsideGrid(t,r,n,i){return n>=0&&t<this.gridRightBoundary&&i>=0&&r<this.gridBottomBoundary}}function f7(e){let t=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0;break;default:t=.5}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0;break;default:r=.5}return{horizontalAlign:t,verticalAlign:r}}function d7(e,t,r,n,i,a,o){const u=(t-r)*i,c=(-n*o+.5)*a;for(const f of e)f.x+=u,f.y+=c}function zae(e,t,r,n,i,a,o){let c=0,f=-8,h=0;const p=e.positionedGlyphs,m=0,_=p.length;r.forEach(S=>{if(S.split("").forEach(A=>{const R=t[A];R&&(p.push({glyph:A,x:c,y:f+0,vertical:!1,scale:1,metrics:R}),c+=R.advance+o)}),p.length!==_){const A=c-o;h=Math.max(A,h),p.length-1}c=0,f-=n+5});const{horizontalAlign:y,verticalAlign:E}=f7(i);d7(p,m,y,E,h,n,r.length);const b=f- -8;e.top+=-E*b,e.bottom=e.top-b,e.left+=-y*h,e.right=e.left+h}function jae(e,t,r,n,i,a,o){let c=0,f=-8,h=0;const p=e.positionedGlyphs,m=0,_=p.length;r.forEach(S=>{const A=t[S];if(A&&(p.push({glyph:S,x:A.advance/2,y:f+0,vertical:!1,scale:1,metrics:A}),c+=A.advance+o),p.length!==_){const M=c-o;h=Math.max(M,h),p.length-1}c=0,f-=n+5});const{horizontalAlign:y,verticalAlign:E}=f7(i);d7(p,m,y,E,h,n,r.length);const b=f- -8;e.top+=-E*b,e.bottom=e.top-b,e.left+=-y*h,e.right=e.left+h}function Vae(e,t,r,n,i,a,o=[0,0],u){const c=e.split(`
`),f=[],h={positionedGlyphs:f,top:o[1],bottom:o[1],left:o[0],right:o[0],lineCount:c.length,text:e};return u?jae(h,t,c,r,n,i,a):zae(h,t,c,r,n,i,a),f.length?h:!1}function Hae(e,t=[0,0],r){const{positionedGlyphs:n=[]}=e,i=[];for(const a of n){const o=a.metrics,u=4,c=o.advance*a.scale/2,f=[0,0],h=[a.x+c+t[0],a.y+t[1]],p=(0-u)*a.scale-c+h[0],m=(0-u)*a.scale+h[1],_=p+o.width*a.scale,y=m+o.height*a.scale,E={x:p,y:m},b={x:_,y:m},S={x:p,y},A={x:_,y};i.push({tl:E,tr:b,bl:S,br:A,tex:o,glyphOffset:f})}return i}const rL=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0

uniform sampler2D u_sdf_map;
layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

in vec2 v_uv;
in float v_gamma_scale;
in vec4 v_color;
in vec4 v_stroke_color;
in float v_fontScale;

out vec4 outputColor;

#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  outputColor.a *= alpha;
   //  mask 
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,nL=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_TEXT_OFFSETS) in vec2 a_textOffsets;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_tex;

layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

out vec2 v_uv;
out float v_gamma_scale;
out vec4 v_color;
out vec4 v_stroke_color;
out float v_fontScale;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - 

  v_uv = a_tex / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // 
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textOffsets,rotation);

  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,{isEqual:qv}=Ln;function iL(e){const t=this,r=e.id,n=[],i=[];if(!t.glyphInfoMap||!t.glyphInfoMap[r])return{vertices:[],indices:[],size:7};const a=t.glyphInfoMap[r].centroid,o=a.length===2?[a[0],a[1],0]:a;return t.glyphInfoMap[r].glyphQuads.forEach((u,c)=>{n.push(...o,u.tex.x,u.tex.y+u.tex.height,u.tl.x,u.tl.y,...o,u.tex.x+u.tex.width,u.tex.y+u.tex.height,u.tr.x,u.tr.y,...o,u.tex.x+u.tex.width,u.tex.y,u.br.x,u.br.y,...o,u.tex.x,u.tex.y,u.bl.x,u.bl.y),i.push(0+c*4,1+c*4,2+c*4,2+c*4,3+c*4,0+c*4)}),{vertices:n,indices:i,size:7}}class h7 extends yn{constructor(...t){var r;super(...t),r=this,B(this,"glyphInfo",void 0),B(this,"glyphInfoMap",{}),B(this,"rawEncodeData",void 0),B(this,"texture",void 0),B(this,"currentZoom",-1),B(this,"extent",void 0),B(this,"textureHeight",0),B(this,"textCount",0),B(this,"preTextStyle",{}),B(this,"mapping",Je(function*(){r.initGlyph(),r.updateTexture(),yield r.reBuildModel()}))}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,TEXT_OFFSETS:10,UV:11})}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Xe(Xe(Xe({},t.uniformsOption),r.uniformsOption),{u_sdf_map:this.textures[0]})}getCommonUniformsInfo(){const{stroke:t="#fff",strokeWidth:r=0,halo:n=.5,gamma:i=2,raisingHeight:a=0}=this.layer.getLayerConfig(),o=this.getFontServiceMapping(),u=this.getFontServiceCanvas();o&&Object.keys(o).length!==this.textCount&&u&&(this.updateTexture(),this.textCount=Object.keys(o).length),this.preTextStyle=this.getTextStyle();const c={u_stroke_color:fn(t),u_sdf_map_size:[u?.width||1,u?.height||1],u_raisingHeight:Number(a),u_stroke_width:r,u_gamma_scale:i,u_halo_blur:n};return this.getUniformsBufferInfo(c)}initModels(){var t=this;return Je(function*(){return t.bindEvent(),t.extent=t.textExtent(),t.rawEncodeData=t.layer.getEncodedData(),t.preTextStyle=t.getTextStyle(),t.initUniformsBuffer(),t.buildModels()})()}buildModels(){var t=this;return Je(function*(){const{textAllowOverlap:r=!1}=t.layer.getLayerConfig();return t.initGlyph(),t.updateTexture(),r||t.filterGlyphs(),[yield t.layer.buildLayerModel({moduleName:"pointText",vertexShader:nL,fragmentShader:rL,defines:t.getDefines(),inject:t.getInject(),triangulation:iL.bind(t),depth:{enable:!1}})]})()}needUpdate(){var t=this;return Je(function*(){const{textAllowOverlap:r=!1,textAnchor:n="center",textOffset:i,padding:a,fontFamily:o,fontWeight:u}=t.getTextStyle();if(!qv(a,t.preTextStyle.padding)||!qv(i,t.preTextStyle.textOffset)||!qv(n,t.preTextStyle.textAnchor)||!qv(o,t.preTextStyle.fontFamily)||!qv(u,t.preTextStyle.fontWeight))return yield t.mapping(),!0;if(r)return!1;const c=t.mapService.getZoom(),f=t.mapService.getBounds(),h=_5(t.extent,f);return Math.abs(t.currentZoom-c)>.5||!h||r!==t.preTextStyle.textAllowOverlap?(yield t.reBuildModel(),!0):!1})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.layer.off("remapping",this.mapping)}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:jt.Attribute,descriptor:{shaderLocation:this.attributeLocation.TEXT_OFFSETS,name:"a_textOffsets",buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:2,update:(t,r,n)=>[n[5],n[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:jt.Attribute,descriptor:{name:"a_tex",shaderLocation:this.attributeLocation.UV,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:2,update:(t,r,n)=>[n[3],n[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{size:r=12}=t;return Array.isArray(r)?[r[0]]:[r]}}})}bindEvent(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}textExtent(){const t=this.mapService.getBounds();return uC(t,.5)}initTextFont(){const{fontWeight:t,fontFamily:r}=this.getTextStyle(),n=this.rawEncodeData,i=[];n.forEach(a=>{let{shape:o=""}=a;o=o.toString();for(const u of o)i.indexOf(u)===-1&&i.push(u)}),this.fontService.setFontOptions({characterSet:i,fontWeight:t,fontFamily:r,iconfont:!1})}initIconFontTex(){const{fontWeight:t,fontFamily:r}=this.getTextStyle(),n=this.rawEncodeData,i=[];n.forEach(a=>{let{shape:o=""}=a;o=`${o}`,i.indexOf(o)===-1&&i.push(o)}),this.fontService.setFontOptions({characterSet:i,fontWeight:t,fontFamily:r,iconfont:!0})}getTextStyle(){const{fontWeight:t="400",fontFamily:r="sans-serif",textAllowOverlap:n=!1,padding:i=[0,0],textAnchor:a="center",textOffset:o=[0,0],opacity:u=1,strokeOpacity:c=1,strokeWidth:f=0,stroke:h="#000"}=this.layer.getLayerConfig();return{fontWeight:t,fontFamily:r,textAllowOverlap:n,padding:i,textAnchor:a,textOffset:o,opacity:u,strokeOpacity:c,strokeWidth:f,stroke:h}}generateGlyphLayout(t){const r=this.getFontServiceMapping(),{spacing:n=2,textAnchor:i="center",textOffset:a}=this.layer.getLayerConfig(),o=this.rawEncodeData;this.glyphInfo=o.map(u=>{const{shape:c="",id:f,size:h=1}=u,p=u.textOffset?u.textOffset:a||[0,0],m=u.textAnchor?u.textAnchor:i||"center",_=Vae(c.toString(),r,h,m,"left",n,p,t),y=Hae(_,p);return u.shaping=_,u.glyphQuads=y,u.centroid=Df(u.coordinates),this.glyphInfoMap[f]={shaping:_,glyphQuads:y,centroid:Df(u.coordinates)},u})}getFontServiceMapping(){const{fontWeight:t="400",fontFamily:r="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getMappingByKey(`${r}_${t}`)}getFontServiceCanvas(){const{fontWeight:t="400",fontFamily:r="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getCanvasByKey(`${r}_${t}`)}filterGlyphs(){const{padding:t=[0,0],textAllowOverlap:r=!1}=this.layer.getLayerConfig();if(r)return;this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();const{width:n,height:i}=this.rendererService.getViewportSize(),a=new kae(n,i);this.glyphInfo.filter(u=>{const{shaping:c,id:f=0}=u,h=u.centroid,m=u.size/16,_=this.mapService.lngLatToContainer(h),{box:y}=a.placeCollisionBox({x1:c.left*m-t[0],x2:c.right*m+t[0],y1:c.top*m-t[1],y2:c.bottom*m+t[1],anchorPointX:_.x,anchorPointY:_.y});return y&&y.length?(a.insertCollisionBox(y,f),!0):!1}).forEach(u=>{this.glyphInfoMap[u.id]=u})}initGlyph(){const{iconfont:t=!1}=this.layer.getLayerConfig();t?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(t)}updateTexture(){const{createTexture2D:t}=this.rendererService,r=this.getFontServiceCanvas();this.textureHeight=r.height,this.texture&&this.texture.destroy(),this.texture=t({data:r,mag:D.LINEAR,min:D.LINEAR,width:r.width,height:r.height}),this.textures=[this.texture]}reBuildModel(){var t=this;return Je(function*(){t.filterGlyphs();const r=yield t.layer.buildLayerModel({moduleName:"pointText",vertexShader:nL,fragmentShader:rL,triangulation:iL.bind(t),defines:t.getDefines(),inject:t.getInject(),depth:{enable:!1}});t.layer.models=[r]})()}}const Xae={fillImage:wae,fill:u7,radar:Fae,image:l7,normal:c7,simplePoint:mae,extrude:s7,text:h7,earthFill:Sae,earthExtrude:Eae};class Ym extends dp{constructor(...t){super(...t),B(this,"type","PointLayer"),B(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),B(this,"enableDataEncodeStyles",["textOffset","textAnchor"]),B(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}})}buildModels(){var t=this;return Je(function*(){const r=t.getModelType();t.layerModel&&t.layerModel.clearModels(),t.layerModel=new Xae[r](t),yield t.initLayerModels()})()}rebuildModels(){var t=this;return Je(function*(){yield t.buildModels()})()}getModelTypeWillEmptyData(){if(this.shapeOption){const{field:t,values:r}=this.shapeOption,{shape2d:n}=this.getLayerConfig(),i=this.iconService.getIconMap();if(t&&n?.indexOf(t)!==-1)return"fill";if(r==="text")return"text";if(r&&r instanceof Array){for(const a of r)if(typeof a=="string"&&i.hasOwnProperty(a))return"image"}}return"normal"}getDefaultConfig(){const t=this.getModelType();return{fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}}[t]}getModelType(){const t=this.getEncodedData(),{shape2d:r,shape3d:n,billboard:i=!0}=this.getLayerConfig(),a=this.iconService.getIconMap(),o=t.find(u=>u.hasOwnProperty("shape"));if(o){const u=o.shape;return u==="dot"?"normal":u==="simple"?"simplePoint":u==="radar"?"radar":this.layerType==="fillImage"||i===!1?"fillImage":r?.indexOf(u)!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":n?.indexOf(u)!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":a.hasOwnProperty(u)?"image":"text"}else return this.getModelTypeWillEmptyData()}}function Gae(e){return GR.apply(this,arguments)}function GR(){return GR=Je(function*(e){if(window.createImageBitmap){const t=yield fetch(e);return yield createImageBitmap(yield t.blob())}else{const t=new window.Image;return new Promise(r=>{t.onload=()=>r(t),t.src=e,t.crossOrigin="Anonymous"})}}),GR.apply(this,arguments)}const qae=`layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 
  float u_raisingHeight;
};

in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = v_Color;
  
  outputColor = filterColor(outputColor);
}
`,Wae=`
layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;
out vec4 outputColor;

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  float isSide =  v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip:  GPU 
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      // side notuse linear
       outputColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    outputColor = v_Color;
  }

  outputColor = filterColorAlpha(outputColor, lightWeight);
}
`,$ae=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  v_uvs = a_uvs;
  // cal style mapping - 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);

  if (u_heightfixed > 0.0) {
    // 
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(project_pos);
  v_texture_data = vec2(a_Position.z, lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,Yae=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 
  float u_raisingHeight;
};

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float isSide = a_Position.z;
  float topU = a_uvs[0];
  float topV = 1.0 - a_uvs[1];
  float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);

  if (u_heightfixed > 0.0) {
    // 
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

 gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  // Tip:  GPU 
  if (isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,Zae=`uniform sampler2D u_texture;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;

#pragma include "scene_uniforms"
#pragma include "picking"

out vec4 outputColor;

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];

  outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));
  // Tip:  GPU 
  if (isSide < 0.999) {// 
    // side face
    if (u_sidesurface < 1.0) {
      discard;
    }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      outputColor = v_Color;
    }
  } else {
     // top face
    if (u_topsurface < 1.0) {
      discard;
    }
  }
  
  outputColor.a *= opacity;
  outputColor = filterColor(outputColor);
}
`,Kae=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_uvs = a_uvs;
  v_Color = a_Color;
  v_Color.a *= opacity;

  v_texture_data = vec2(a_Position.z, lightWeight);

  if (u_heightfixed > 0.0) {
    // 
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class Qae extends yn{constructor(...t){super(...t),B(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,UV:11})}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Xe(Xe({},t.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const{mapTexture:t,heightfixed:r=!1,raisingHeight:n=0,topsurface:i=!0,sidesurface:a=!0,sourceColor:o,targetColor:u}=this.layer.getLayerConfig();let c=0,f=[1,1,1,1],h=[1,1,1,1];o&&u&&(f=fn(o),h=fn(u),c=1);const p={u_sourceColor:f,u_targetColor:h,u_linearColor:c,u_topsurface:Number(i),u_sidesurface:Number(a),u_heightfixed:Number(r),u_raisingHeight:Number(n)};return t&&this.texture&&(p.u_texture=this.texture,this.textures=[this.texture]),this.getUniformsBufferInfo(p)}initModels(){var t=this;return Je(function*(){return yield t.loadTexture(),t.buildModels()})()}buildModels(){var t=this;return Je(function*(){const{frag:r,vert:n,type:i}=t.getShaders();return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:i,vertexShader:n,fragmentShader:r,depth:{enable:!0},defines:t.getDefines(),inject:t.getInject(),triangulation:i7})]})()}getShaders(){const{pickLight:t,mapTexture:r}=this.layer.getLayerConfig();return r?{frag:Zae,vert:Kae,type:"polygonExtrudeTexture"}:t?{frag:Wae,vert:$ae,type:"polygonExtrudePickLight"}:{frag:qae,vert:Yae,type:"polygonExtrude"}}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.textures=[]}registerBuiltinAttributes(){const t=this.layer.getSource().extent,r=t[2]-t[0],n=t[3]-t[1];this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uvs",type:jt.Attribute,descriptor:{name:"a_uvs",shaderLocation:this.attributeLocation.UV,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:3,update:(i,a,o)=>{const u=o[0],c=o[1];return[(u-t[0])/r,(c-t[1])/n,o[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:jt.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:3,update:(i,a,o,u,c)=>c}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:1,update:i=>{const{size:a=10}=i;return Array.isArray(a)?[a[0]]:[a]}}})}loadTexture(){var t=this;return Je(function*(){const{mapTexture:r}=t.layer.getLayerConfig(),{createTexture2D:n}=t.rendererService;if(t.texture=n({height:1,width:1}),r){const i=yield Gae(r);t.texture=n({data:i,width:i.width,height:i.height,wrapS:D.CLAMP_TO_EDGE,wrapT:D.CLAMP_TO_EDGE,min:D.LINEAR,mag:D.LINEAR})}})()}}const Jae=`
in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

  outputColor = v_Color;
  outputColor = filterColor(outputColor);
}
`,eoe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class toe extends yn{constructor(...t){super(...t),B(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,EXTRUSION_BASE:11})}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Xe(Xe({},t.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const t={};return this.getUniformsBufferInfo(t)}initModels(){var t=this;return Je(function*(){return t.buildModels()})()}buildModels(){var t=this;return Je(function*(){const{frag:r,vert:n,type:i}=t.getShaders();return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:i,vertexShader:n,fragmentShader:r,defines:t.getDefines(),inject:t.getInject(),triangulation:i7,depth:{enable:!0}})]})()}getShaders(){return{frag:Jae,vert:eoe,type:"polygonExtrude"}}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"normal",type:jt.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:3,update:(t,r,n,i,a)=>a}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:jt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{size:r=10}=t;return Array.isArray(r)?[r[0]]:[r]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrusionBase",type:jt.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:this.attributeLocation.EXTRUSION_BASE,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:1,update:t=>{const{extrusionBase:r=0}=t;return[r]}}})}}const roe=`in vec4 v_color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,noe=`
layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

in vec4 v_color;
in vec3 v_linear;
in vec2 v_pos;
out vec4 outputColor;
#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  outputColor = v_color;
  if (u_opacitylinear > 0.0) {
    outputColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }
  outputColor = filterColor(outputColor);
}
`,ioe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_LINEAR) in vec3 a_linear;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

out vec4 v_color;
out vec3 v_linear;
out vec2 v_pos;

#pragma include "projection"
#pragma include "picking"

void main() {
  if (u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  project_pos.z += u_raisingHeight;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}
`,aoe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - 

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  project_pos.z += u_raisingHeight;

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`;class ooe extends yn{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,LINEAR:9})}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Xe(Xe({},t.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:t=0,opacityLinear:r={enable:!1,dir:"in"}}=this.layer.getLayerConfig(),n={u_raisingHeight:Number(t),u_opacitylinear:Number(r.enable),u_dir:r.dir==="in"?1:0};return this.getUniformsBufferInfo(n)}initModels(){var t=this;return Je(function*(){return t.buildModels()})()}buildModels(){var t=this;return Je(function*(){const{frag:r,vert:n,triangulation:i,type:a}=t.getModelParams();return t.initUniformsBuffer(),t.layer.triangulation=i,[yield t.layer.buildLayerModel({moduleName:a,vertexShader:n,fragmentShader:r,defines:t.getDefines(),inject:t.getInject(),triangulation:i,primitive:D.TRIANGLES,depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute();const{opacityLinear:t={enable:!1,dir:"in"}}=this.layer.getLayerConfig();t.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:jt.Attribute,descriptor:{name:"a_linear",shaderLocation:this.attributeLocation.LINEAR,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:3,update:(r,n,i)=>[i[3],i[4],i[5]]}})}getModelParams(){const{opacityLinear:t={enable:!1}}=this.layer.getLayerConfig();return t.enable?{frag:noe,vert:ioe,type:"polygonLinear",triangulation:Rie}:{frag:roe,vert:aoe,type:"polygonFill",triangulation:p_}}}const soe=`
layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

in vec2 v_uv;
in float v_opacity;
out vec4 outputColor;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;

vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture(SAMPLER_2D(u_texture2),p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture(SAMPLER_2D(u_texture1),fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture(SAMPLER_2D(u_texture3), fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    
  outputColor = vec4(col, v_opacity);  
}
`,uoe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

out vec2 v_uv;
out float v_opacity;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_opacity = opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class loe extends yn{constructor(...t){super(...t),B(this,"texture1",void 0),B(this,"texture2",void 0),B(this,"texture3",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Xe(Xe({},t.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const{watercolor:t="#6D99A8",watercolor2:r="#0F121C"}=this.layer.getLayerConfig(),n={u_watercolor:fn(t),u_watercolor2:fn(r),u_time:this.layer.getLayerAnimateTime(),u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3};return this.textures=[this.texture1,this.texture2,this.texture3],this.getUniformsBufferInfo(n)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var t=this;return Je(function*(){return t.loadTexture(),t.buildModels()})()}buildModels(){var t=this;return Je(function*(){return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:uoe,fragmentShader:soe,defines:t.getDefines(),inject:t.getInject(),triangulation:p_,primitive:D.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var t,r,n;(t=this.texture1)===null||t===void 0||t.destroy(),(r=this.texture2)===null||r===void 0||r.destroy(),(n=this.texture3)===null||n===void 0||n.destroy()}registerBuiltinAttributes(){const t=this.layer.getSource().extent,[r,n,i,a]=t,o=i-r,u=a-n;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:jt.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:2,update:(c,f,h)=>{const[p,m]=h;return[(p-r)/o,(m-n)/u]}}})}loadTexture(){const{createTexture2D:t}=this.rendererService,r={height:0,width:0};this.texture1=t(r),this.texture2=t(r),this.texture3=t(r),n(a=>{this.texture1=i(a[0]),this.texture2=i(a[1]),this.texture3=i(a[2]),this.layerService.reRender()});function n(a){let o=0;const u=[];["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"].map(f=>{const h=new Image;h.crossOrigin="",h.src=f,u.push(h),h.onload=()=>{o++,o===3&&a(u)}})}function i(a){return t({data:a,width:a.width,height:a.height,wrapS:D.MIRRORED_REPEAT,wrapT:D.MIRRORED_REPEAT,min:D.LINEAR,mag:D.LINEAR})}}}const coe=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};

out vec4 outputColor;


in vec4 v_Color;
in vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {

  outputColor = v_Color;
  float spc = calSpc();
  outputColor += spc * 0.4;
}
`,foe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};
out vec4 v_Color;
out vec2 v_uv;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_Color = a_Color;
  v_Color.a *= opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class doe extends yn{constructor(...t){super(...t),B(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Xe(Xe({},t.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const{speed:t=.5}=this.layer.getLayerConfig(),r={u_speed:t,u_time:this.layer.getLayerAnimateTime(),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(r)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var t=this;return Je(function*(){return t.loadTexture(),t.buildModels()})()}buildModels(){var t=this;return Je(function*(){return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:foe,fragmentShader:coe,triangulation:p_,defines:t.getDefines(),inject:t.getInject(),primitive:D.TRIANGLES,depth:{enable:!1},pickingEnabled:!1,diagnosticDerivativeUniformityEnabled:!1})]})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy()}registerBuiltinAttributes(){const t=this.layer.getSource().extent,[r,n,i,a]=t,o=i-r,u=a-n;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:jt.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:D.STATIC_DRAW,data:[],type:D.FLOAT},size:2,update:(c,f,h)=>{const[p,m]=h;return[(p-r)/o,(m-n)/u]}}})}loadTexture(){const{waterTexture:t}=this.layer.getLayerConfig(),{createTexture2D:r}=this.rendererService;this.texture=r({height:1,width:1});const n=new Image;n.crossOrigin="",t?(console.warn("L7 recommendhttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),n.src=t):n.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",n.onload=()=>{this.texture=r({data:n,width:n.width,height:n.height,wrapS:D.MIRRORED_REPEAT,wrapT:D.MIRRORED_REPEAT,min:D.LINEAR,mag:D.LINEAR}),this.layerService.reRender()}}}const hoe={fill:ooe,line:a7,extrude:Qae,text:h7,point_fill:u7,point_image:l7,point_normal:c7,point_extrude:s7,water:doe,ocean:loe,extrusion:toe};class p7 extends dp{constructor(...t){super(...t),B(this,"type","PolygonLayer"),B(this,"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"])}buildModels(){var t=this;return Je(function*(){const r=t.getModelType();t.layerModel=new hoe[r](t),yield t.initLayerModels()})()}getModelType(){var t;const r=this.styleAttributeService.getLayerStyleAttribute("shape"),n=r==null||(t=r.scale)===null||t===void 0?void 0:t.field;return n==="fill"||!n?"fill":n==="extrude"?"extrude":n==="extrusion"?"extrusion":n==="water"?"water":n==="ocean"?"ocean":n==="line"?"line":this.getPointModelType()}getPointModelType(){const t=this.getEncodedData(),{shape2d:r,shape3d:n}=this.getLayerConfig(),i=this.iconService.getIconMap(),a=t.find(o=>o.hasOwnProperty("shape"));if(a){const o=a.shape;return o==="dot"?"point_normal":r?.indexOf(o)!==-1?"point_fill":n?.indexOf(o)!==-1?"point_extrude":i.hasOwnProperty(o)?"point_image":"text"}else return"fill"}}const poe=`layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

uniform sampler2D u_rasterTexture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;

bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }

out vec4 outputColor;

void main() {
  // Can use any component here since u_rasterTexture is under luminance format.
  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value)) {
    discard;
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
    discard;
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));
    
    outputColor = color;
    outputColor.a = outputColor.a * u_opacity ;
    if (outputColor.a < 0.01)
      discard;
  }
}
`,voe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;let aL=class extends yn{constructor(...t){super(...t),B(this,"texture",void 0),B(this,"colorTexture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Xe(Xe({},t.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const{opacity:t=1,clampLow:r=!0,clampHigh:n=!0,noDataValue:i=-9999999,domain:a,rampColors:o}=this.layer.getLayerConfig(),u=a||W2(o);this.colorTexture=this.layer.textureService.getColorTexture(o,u);const c={u_domain:u,u_opacity:t||1,u_noDataValue:i,u_clampLow:r?1:0,u_clampHigh:(typeof n<"u"?n:r)?1:0,u_rasterTexture:this.texture,u_colorTexture:this.colorTexture};return this.textures=[this.texture,this.colorTexture],this.getUniformsBufferInfo(c)}getRasterData(t){return Je(function*(){if(Array.isArray(t.data))return{data:t.data,width:t.width,height:t.height};{const{rasterData:r,width:n,height:i}=yield t.data;return{data:Array.from(r),width:n,height:i}}})()}initModels(){var t=this;return Je(function*(){return t.buildModels()})()}buildModels(){var t=this;return Je(function*(){t.initUniformsBuffer();const r=t.layer.getSource(),{createTexture2D:n,queryVerdorInfo:i}=t.rendererService,a=r.data.dataArray[0],{data:o,width:u,height:c}=yield t.getRasterData(a);return t.texture=n({data:new Float32Array(o),width:u,height:c,format:i()==="WebGL1"?D.LUMINANCE:D.RED,type:D.FLOAT,alignment:1}),[yield t.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:voe,fragmentShader:poe,defines:t.getDefines(),triangulation:AE,primitive:D.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}clearModels(){var t,r;(t=this.texture)===null||t===void 0||t.destroy(),(r=this.colorTexture)===null||r===void 0||r.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:jt.Attribute,descriptor:{shaderLocation:this.attributeLocation.UV,name:"a_Uv",buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:2,update:(t,r,n)=>[n[3],n[4]]}})}};const moe=["data"],_oe=["rasterData"],goe=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

in vec2 v_texCoord;

out vec4 outputColor;

void main() {

  vec3 rgb = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y)).rgb;

  if(rgb == vec3(u_noDataValue)) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }

  if(outputColor.a < 0.01)
    discard;
 
}`,yoe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_rminmax;
  vec2 u_gminmax;
  vec2 u_bminmax;
  float u_opacity;
  float u_noDataValue;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class Eoe extends yn{constructor(...t){super(...t),B(this,"texture",void 0),B(this,"dataOption",{})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Xe(Xe({},t.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const{opacity:t=1,noDataValue:r=0}=this.layer.getLayerConfig(),{rMinMax:n=[0,255],gMinMax:i=[0,255],bMinMax:a=[0,255]}=this.dataOption,o={u_rminmax:n,u_gminmax:i,u_bminmax:a,u_opacity:t||1,u_noDataValue:r,u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(o)}getRasterData(t){var r=this;return Je(function*(){if(Array.isArray(t.data)){const{data:o}=t,u=qs(t,moe);return r.dataOption=u,Xe({data:o},u)}const n=yield t.data,{rasterData:i}=n,a=qs(n,_oe);return r.dataOption=a,Array.isArray(i)?Xe({data:i},a):Xe({data:Array.from(i)},a)})()}initModels(){var t=this;return Je(function*(){t.initUniformsBuffer();const r=t.layer.getSource(),{createTexture2D:n}=t.rendererService,i=r.data.dataArray[0],{data:a,width:o,height:u}=yield t.getRasterData(i);return t.texture=n({data:new Float32Array(a),width:o,height:u,format:D.RGB,type:D.FLOAT}),[yield t.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:yoe,fragmentShader:goe,defines:t.getDefines(),triangulation:AE,primitive:D.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}buildModels(){var t=this;return Je(function*(){return t.initModels()})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:jt.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:2,update:(t,r,n)=>[n[3],n[4]]}})}}const boe=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

layout(std140) uniform commonUniforms {
 vec4 u_unpack;
 vec2 u_domain;
 float u_opacity;
 float u_noDataValue;
 float u_clampLow;
 float u_clampHigh;
};

in vec2 v_texCoord;
out vec4 outputColor;


float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data =  texture(SAMPLER_2D(u_texture), coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return  texture(SAMPLER_2D(u_colorTexture), coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
     outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    outputColor = getColor(value);
    outputColor.a =  outputColor.a * u_opacity ;
      if(outputColor.a < 0.01)
      discard;
  }
}
`,Toe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec4 u_unpack;
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};
out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class Soe extends yn{constructor(...t){super(...t),B(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getCommonUniformsInfo(){const{opacity:t,clampLow:r=!0,clampHigh:n=!0,noDataValue:i=-9999999,domain:a,rampColors:o,colorTexture:u,rScaler:c=6553.6,gScaler:f=25.6,bScaler:h=.1,offset:p=1e4}=this.layer.getLayerConfig(),m=a||W2(o);let _=u;u?this.layer.textureService.setColorTexture(u,o,m):_=this.layer.textureService.getColorTexture(o,m);const y={u_unpack:[c,f,h,p],u_domain:m,u_opacity:t||1,u_noDataValue:i,u_clampLow:r,u_clampHigh:typeof n<"u"?n:r,u_texture:this.texture,u_colorTexture:_};return this.textures=[this.texture,_],this.getUniformsBufferInfo(y)}initModels(){var t=this;return Je(function*(){t.initUniformsBuffer();const r=t.layer.getSource(),{createTexture2D:n}=t.rendererService,i=yield r.data.images;return t.texture=n({data:i[0],width:i[0].width,height:i[0].height,min:D.LINEAR,mag:D.LINEAR}),[yield t.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:Toe,fragmentShader:boe,defines:t.getDefines(),triangulation:AE,primitive:D.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy()}buildModels(){var t=this;return Je(function*(){return t.initModels()})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:jt.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:D.DYNAMIC_DRAW,data:[],type:D.FLOAT},size:2,update:(t,r,n)=>[n[3],n[4]]}})}}const Aoe={raster:aL,rasterRgb:Eoe,raster3d:aL,rasterTerrainRgb:Soe};class MC extends dp{constructor(...t){super(...t),B(this,"type","RasterLayer")}buildModels(){var t=this;return Je(function*(){const r=t.getModelType();t.layerModel=new Aoe[r](t),yield t.initLayerModels()})()}getDefaultConfig(){const t=this.getModelType();return{raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}}[t]}getModelType(){switch(this.layerSource.getParserType()){case"raster":case"ndi":return"raster";case"rasterRgb":return"rasterRgb";case"rgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}getLegend(t){if(t!=="color")return{type:void 0,field:void 0,items:[]};const r=this.getLayerConfig().rampColors;return Mie(r,t)}}class xoe{constructor({rendererService:t,layerService:r,parent:n}){B(this,"tileResource",new Map),B(this,"rendererService",void 0),B(this,"layerService",void 0),B(this,"parent",void 0),B(this,"layerTiles",[]),this.rendererService=t,this.layerService=r,this.parent=n}get tiles(){return this.layerTiles}hasTile(t){return this.layerTiles.some(r=>r.key===t)}addTile(t){this.layerTiles.push(t)}getTile(t){return this.layerTiles.find(r=>r.key===t)}getVisibleTileBylngLat(t){return this.layerTiles.find(r=>r.isLoaded&&r.visible&&r.lnglatInBounds(t))}removeTile(t){const r=this.layerTiles.findIndex(i=>i.key===t),n=this.layerTiles.splice(r,1);n[0]&&n[0].destroy()}updateTileVisible(t){const r=this.getTile(t.key);if(t.isVisible)if(t.parent){const n=this.isChildrenLoaded(t.parent);r?.updateVisible(n)}else r?.updateVisible(!0);else if(t.parent){const n=this.isChildrenLoaded(t.parent);r?.updateVisible(!n)}else r?.updateVisible(!1)}isParentLoaded(t){const r=t.parent;if(!r)return!0;const n=this.getTile(r?.key);return!!(n!=null&&n.isLoaded)}isChildrenLoaded(t){const r=t?.children;return r.length===0?!0:r.every(n=>{const i=this.getTile(n?.key);return i?i?.isLoaded===!0:!0})}render(){var t=this;return Je(function*(){const n=t.getRenderLayers().map((function(){var i=Je(function*(a){yield t.layerService.renderTileLayer(a)});return function(a){return i.apply(this,arguments)}})());yield Promise.all(n)})()}getRenderLayers(){const t=this.layerTiles.filter(n=>n.visible&&n.isLoaded),r=[];return t.map(n=>r.push(...n.getLayers())),r}getLayers(){const t=this.layerTiles.filter(n=>n.isLoaded),r=[];return t.map(n=>r.push(...n.getLayers())),r}getTiles(){return this.layerTiles}destroy(){this.layerTiles.forEach(t=>t.destroy()),this.tileResource.clear()}}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Roe(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(h){return c([f,h])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){r.label=f[1];break}if(f[0]===6&&r.label<a[1]){r.label=a[1],a=f;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(f);break}a[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(h){f=[6,h],i=0}finally{n=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var vc=(function(){function e(t,r){this.next=null,this.key=t,this.data=r,this.left=null,this.right=null}return e})();function Coe(e,t){return e>t?1:e<t?-1:0}function Jl(e,t,r){for(var n=new vc(null,null),i=n,a=n;;){var o=r(e,t.key);if(o<0){if(t.left===null)break;if(r(e,t.left.key)<0){var u=t.left;if(t.left=u.right,u.right=t,t=u,t.left===null)break}a.left=t,a=t,t=t.left}else if(o>0){if(t.right===null)break;if(r(e,t.right.key)>0){var u=t.right;if(t.right=u.left,u.left=t,t=u,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,a.left=t.right,t.left=n.right,t.right=n.left,t}function Ox(e,t,r,n){var i=new vc(e,t);if(r===null)return i.left=i.right=null,i;r=Jl(e,r,n);var a=n(e,r.key);return a<0?(i.left=r.left,i.right=r,r.left=null):a>=0&&(i.right=r.right,i.left=r,r.right=null),i}function oL(e,t,r){var n=null,i=null;if(t){t=Jl(e,t,r);var a=r(t.key,e);a===0?(n=t.left,i=t.right):a<0?(i=t.right,t.right=null,n=t):(n=t.left,t.left=null,i=t)}return{left:n,right:i}}function Ooe(e,t,r){return t===null?e:(e===null||(t=Jl(e.key,t,r),t.left=e),t)}function qR(e,t,r,n,i){if(e){n(""+t+(r?" ":" ")+i(e)+`
`);var a=t+(r?"    ":"   ");e.left&&qR(e.left,a,!1,n,i),e.right&&qR(e.right,a,!0,n,i)}}var wC=(function(){function e(t){t===void 0&&(t=Coe),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,r){return this._size++,this._root=Ox(t,r,this._root,this._comparator)},e.prototype.add=function(t,r){var n=new vc(t,r);this._root===null&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,a=Jl(t,this._root,i),o=i(t,a.key);return o===0?this._root=a:(o<0?(n.left=a.left,n.right=a,a.left=null):o>0&&(n.right=a.right,n.left=a,a.right=null),this._size++,this._root=n),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,r,n){var i;if(r===null)return null;r=Jl(t,r,n);var a=n(t,r.key);return a===0?(r.left===null?i=r.right:(i=Jl(t,r.left,n),i.right=r.right),this._size--,i):r},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=Jl(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var r=this._root,n=this._comparator;r;){var i=n(t,r.key);if(i===0)return r;i<0?r=r.left:r=r.right}return null},e.prototype.find=function(t){return this._root&&(this._root=Jl(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var r=this._root,n=this._comparator;r;){var i=n(t,r.key);if(i===0)return!0;i<0?r=r.left:r=r.right}return!1},e.prototype.forEach=function(t,r){for(var n=this._root,i=[],a=!1;!a;)n!==null?(i.push(n),n=n.left):i.length!==0?(n=i.pop(),t.call(r,n),n=n.right):a=!0;return this},e.prototype.range=function(t,r,n,i){for(var a=[],o=this._comparator,u=this._root,c;a.length!==0||u;)if(u)a.push(u),u=u.left;else{if(u=a.pop(),c=o(u.key,r),c>0)break;if(o(u.key,t)>=0&&n.call(i,u))return this;u=u.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(r){var n=r.key;return t.push(n)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(r){var n=r.data;return t.push(n)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var r=this._root,n=!1,i=0,a=[];!n;)if(r)a.push(r),r=r.left;else if(a.length>0){if(r=a.pop(),i===t)return r;i++,r=r.right}else n=!0;return null},e.prototype.next=function(t){var r=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var i=this._comparator;r;){var a=i(t.key,r.key);if(a===0)break;a<0?(n=r,r=r.left):r=r.right}return n},e.prototype.prev=function(t){var r=this._root,n=null;if(t.left!==null){for(n=t.left;n.right;)n=n.right;return n}for(var i=this._comparator;r;){var a=i(t.key,r.key);if(a===0)break;a<0?r=r.left:(n=r,r=r.right)}return n},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return woe(this._root)},e.prototype.load=function(t,r,n){r===void 0&&(r=[]),n===void 0&&(n=!1);var i=t.length,a=this._comparator;if(n&&YR(t,r,0,i-1,a),this._root===null)this._root=WR(t,r,0,i),this._size=i;else{var o=Noe(this.toList(),Moe(t,r),a);i=this._size+i,this._root=$R({head:o},0,i)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(n){return String(n.key)});var r=[];return qR(this._root,"",!0,function(n){return r.push(n)},t),r.join("")},e.prototype.update=function(t,r,n){var i=this._comparator,a=oL(t,this._root,i),o=a.left,u=a.right;i(t,r)<0?u=Ox(r,n,u,i):o=Ox(r,n,o,i),this._root=Ooe(o,u,i)},e.prototype.split=function(t){return oL(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,r,n;return Roe(this,function(i){switch(i.label){case 0:t=this._root,r=[],n=!1,i.label=1;case 1:return n?[3,6]:t===null?[3,2]:(r.push(t),t=t.left,[3,5]);case 2:return r.length===0?[3,4]:(t=r.pop(),[4,t]);case 3:return i.sent(),t=t.right,[3,5];case 4:n=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},e})();function WR(e,t,r,n){var i=n-r;if(i>0){var a=r+Math.floor(i/2),o=e[a],u=t[a],c=new vc(o,u);return c.left=WR(e,t,r,a),c.right=WR(e,t,a+1,n),c}return null}function Moe(e,t){for(var r=new vc(null,null),n=r,i=0;i<e.length;i++)n=n.next=new vc(e[i],t[i]);return n.next=null,r.next}function woe(e){for(var t=e,r=[],n=!1,i=new vc(null,null),a=i;!n;)t?(r.push(t),t=t.left):r.length>0?(t=a=a.next=r.pop(),t=t.right):n=!0;return a.next=null,i.next}function $R(e,t,r){var n=r-t;if(n>0){var i=t+Math.floor(n/2),a=$R(e,t,i),o=e.head;return o.left=a,e.head=e.head.next,o.right=$R(e,i+1,r),o}return null}function Noe(e,t,r){for(var n=new vc(null,null),i=n,a=e,o=t;a!==null&&o!==null;)r(a.key,o.key)<0?(i.next=a,a=a.next):(i.next=o,o=o.next),i=i.next;return a!==null?i.next=a:o!==null&&(i.next=o),n.next}function YR(e,t,r,n,i){if(!(r>=n)){for(var a=e[r+n>>1],o=r-1,u=n+1;;){do o++;while(i(e[o],a)<0);do u--;while(i(e[u],a)>0);if(o>=u)break;var c=e[o];e[o]=e[u],e[u]=c,c=t[o],t[o]=t[u],t[u]=c}YR(e,t,r,u,i),YR(e,t,u+1,n,i)}}const Fu=11102230246251565e-32,Qi=134217729,Ioe=(3+8*Fu)*Fu;function Mx(e,t,r,n,i){let a,o,u,c,f=t[0],h=n[0],p=0,m=0;h>f==h>-f?(a=f,f=t[++p]):(a=h,h=n[++m]);let _=0;if(p<e&&m<r)for(h>f==h>-f?(o=f+a,u=a-(o-f),f=t[++p]):(o=h+a,u=a-(o-h),h=n[++m]),a=o,u!==0&&(i[_++]=u);p<e&&m<r;)h>f==h>-f?(o=a+f,c=o-a,u=a-(o-c)+(f-c),f=t[++p]):(o=a+h,c=o-a,u=a-(o-c)+(h-c),h=n[++m]),a=o,u!==0&&(i[_++]=u);for(;p<e;)o=a+f,c=o-a,u=a-(o-c)+(f-c),f=t[++p],a=o,u!==0&&(i[_++]=u);for(;m<r;)o=a+h,c=o-a,u=a-(o-c)+(h-c),h=n[++m],a=o,u!==0&&(i[_++]=u);return(a!==0||_===0)&&(i[_++]=a),_}function Poe(e,t){let r=t[0];for(let n=1;n<e;n++)r+=t[n];return r}function v_(e){return new Float64Array(e)}const Doe=(3+16*Fu)*Fu,Loe=(2+12*Fu)*Fu,Boe=(9+64*Fu)*Fu*Fu,fh=v_(4),sL=v_(8),uL=v_(12),lL=v_(16),da=v_(4);function Foe(e,t,r,n,i,a,o){let u,c,f,h,p,m,_,y,E,b,S,A,R,M,P,I,w,U;const re=e-i,K=r-i,H=t-a,x=n-a;M=re*x,m=Qi*re,_=m-(m-re),y=re-_,m=Qi*x,E=m-(m-x),b=x-E,P=y*b-(M-_*E-y*E-_*b),I=H*K,m=Qi*H,_=m-(m-H),y=H-_,m=Qi*K,E=m-(m-K),b=K-E,w=y*b-(I-_*E-y*E-_*b),S=P-w,p=P-S,fh[0]=P-(S+p)+(p-w),A=M+S,p=A-M,R=M-(A-p)+(S-p),S=R-I,p=R-S,fh[1]=R-(S+p)+(p-I),U=A+S,p=U-A,fh[2]=A-(U-p)+(S-p),fh[3]=U;let N=Poe(4,fh),j=Loe*o;if(N>=j||-N>=j||(p=e-re,u=e-(re+p)+(p-i),p=r-K,f=r-(K+p)+(p-i),p=t-H,c=t-(H+p)+(p-a),p=n-x,h=n-(x+p)+(p-a),u===0&&c===0&&f===0&&h===0)||(j=Boe*o+Ioe*Math.abs(N),N+=re*h+x*u-(H*f+K*c),N>=j||-N>=j))return N;M=u*x,m=Qi*u,_=m-(m-u),y=u-_,m=Qi*x,E=m-(m-x),b=x-E,P=y*b-(M-_*E-y*E-_*b),I=c*K,m=Qi*c,_=m-(m-c),y=c-_,m=Qi*K,E=m-(m-K),b=K-E,w=y*b-(I-_*E-y*E-_*b),S=P-w,p=P-S,da[0]=P-(S+p)+(p-w),A=M+S,p=A-M,R=M-(A-p)+(S-p),S=R-I,p=R-S,da[1]=R-(S+p)+(p-I),U=A+S,p=U-A,da[2]=A-(U-p)+(S-p),da[3]=U;const fe=Mx(4,fh,4,da,sL);M=re*h,m=Qi*re,_=m-(m-re),y=re-_,m=Qi*h,E=m-(m-h),b=h-E,P=y*b-(M-_*E-y*E-_*b),I=H*f,m=Qi*H,_=m-(m-H),y=H-_,m=Qi*f,E=m-(m-f),b=f-E,w=y*b-(I-_*E-y*E-_*b),S=P-w,p=P-S,da[0]=P-(S+p)+(p-w),A=M+S,p=A-M,R=M-(A-p)+(S-p),S=R-I,p=R-S,da[1]=R-(S+p)+(p-I),U=A+S,p=U-A,da[2]=A-(U-p)+(S-p),da[3]=U;const O=Mx(fe,sL,4,da,uL);M=u*h,m=Qi*u,_=m-(m-u),y=u-_,m=Qi*h,E=m-(m-h),b=h-E,P=y*b-(M-_*E-y*E-_*b),I=c*f,m=Qi*c,_=m-(m-c),y=c-_,m=Qi*f,E=m-(m-f),b=f-E,w=y*b-(I-_*E-y*E-_*b),S=P-w,p=P-S,da[0]=P-(S+p)+(p-w),A=M+S,p=A-M,R=M-(A-p)+(S-p),S=R-I,p=R-S,da[1]=R-(S+p)+(p-I),U=A+S,p=U-A,da[2]=A-(U-p)+(S-p),da[3]=U;const k=Mx(O,uL,4,da,lL);return lL[k-1]}function Uoe(e,t,r,n,i,a){const o=(t-a)*(r-i),u=(e-i)*(n-a),c=o-u,f=Math.abs(o+u);return Math.abs(c)>=Doe*f?c:-Foe(e,t,r,n,i,a,f)}var v7={};const Wv=(e,t)=>e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y,ZR=(e,t)=>{if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;const r=e.ll.x<t.ll.x?t.ll.x:e.ll.x,n=e.ur.x<t.ur.x?e.ur.x:t.ur.x,i=e.ll.y<t.ll.y?t.ll.y:e.ll.y,a=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:r,y:i},ur:{x:n,y:a}}};let nc=Number.EPSILON;nc===void 0&&(nc=Math.pow(2,-52));const koe=nc*nc,cL=(e,t)=>{if(-nc<e&&e<nc&&-nc<t&&t<nc)return 0;const r=e-t;return r*r<koe*e*t?0:e<t?-1:1};class zoe{constructor(){this.reset()}reset(){this.xRounder=new fL,this.yRounder=new fL}round(t,r){return{x:this.xRounder.round(t),y:this.yRounder.round(r)}}}class fL{constructor(){this.tree=new wC,this.round(0)}round(t){const r=this.tree.add(t),n=this.tree.prev(r);if(n!==null&&cL(r.key,n.key)===0)return this.tree.remove(t),n.key;const i=this.tree.next(r);return i!==null&&cL(r.key,i.key)===0?(this.tree.remove(t),i.key):t}}const Zm=new zoe,I0=(e,t)=>e.x*t.y-e.y*t.x,m7=(e,t)=>e.x*t.x+e.y*t.y,dL=(e,t,r)=>{const n=Uoe(e.x,e.y,t.x,t.y,r.x,r.y);return n>0?-1:n<0?1:0},Cy=e=>Math.sqrt(m7(e,e)),joe=(e,t,r)=>{const n={x:t.x-e.x,y:t.y-e.y},i={x:r.x-e.x,y:r.y-e.y};return I0(i,n)/Cy(i)/Cy(n)},Voe=(e,t,r)=>{const n={x:t.x-e.x,y:t.y-e.y},i={x:r.x-e.x,y:r.y-e.y};return m7(i,n)/Cy(i)/Cy(n)},hL=(e,t,r)=>t.y===0?null:{x:e.x+t.x/t.y*(r-e.y),y:r},pL=(e,t,r)=>t.x===0?null:{x:r,y:e.y+t.y/t.x*(r-e.x)},Hoe=(e,t,r,n)=>{if(t.x===0)return pL(r,n,e.x);if(n.x===0)return pL(e,t,r.x);if(t.y===0)return hL(r,n,e.y);if(n.y===0)return hL(e,t,r.y);const i=I0(t,n);if(i==0)return null;const a={x:r.x-e.x,y:r.y-e.y},o=I0(a,t)/i,u=I0(a,n)/i,c=e.x+u*t.x,f=r.x+o*n.x,h=e.y+u*t.y,p=r.y+o*n.y,m=(c+f)/2,_=(h+p)/2;return{x:m,y:_}};class yo{static compare(t,r){const n=yo.comparePoints(t.point,r.point);return n!==0?n:(t.point!==r.point&&t.link(r),t.isLeft!==r.isLeft?t.isLeft?1:-1:cc.compare(t.segment,r.segment))}static comparePoints(t,r){return t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0}constructor(t,r){t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=r}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const r=t.point.events;for(let n=0,i=r.length;n<i;n++){const a=r[n];this.point.events.push(a),a.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let r=0;r<t;r++){const n=this.point.events[r];if(n.segment.consumedBy===void 0)for(let i=r+1;i<t;i++){const a=this.point.events[i];a.consumedBy===void 0&&n.otherSE.point.events===a.otherSE.point.events&&n.segment.consume(a.segment)}}}getAvailableLinkedEvents(){const t=[];for(let r=0,n=this.point.events.length;r<n;r++){const i=this.point.events[r];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}getLeftmostComparator(t){const r=new Map,n=i=>{const a=i.otherSE;r.set(i,{sine:joe(this.point,t.point,a.point),cosine:Voe(this.point,t.point,a.point)})};return(i,a)=>{r.has(i)||n(i),r.has(a)||n(a);const{sine:o,cosine:u}=r.get(i),{sine:c,cosine:f}=r.get(a);return o>=0&&c>=0?u<f?1:u>f?-1:0:o<0&&c<0?u<f?-1:u>f?1:0:c<o?-1:c>o?1:0}}}let Xoe=0;class cc{static compare(t,r){const n=t.leftSE.point.x,i=r.leftSE.point.x,a=t.rightSE.point.x,o=r.rightSE.point.x;if(o<n)return 1;if(a<i)return-1;const u=t.leftSE.point.y,c=r.leftSE.point.y,f=t.rightSE.point.y,h=r.rightSE.point.y;if(n<i){if(c<u&&c<f)return 1;if(c>u&&c>f)return-1;const p=t.comparePoint(r.leftSE.point);if(p<0)return 1;if(p>0)return-1;const m=r.comparePoint(t.rightSE.point);return m!==0?m:-1}if(n>i){if(u<c&&u<h)return-1;if(u>c&&u>h)return 1;const p=r.comparePoint(t.leftSE.point);if(p!==0)return p;const m=t.comparePoint(r.rightSE.point);return m<0?1:m>0?-1:1}if(u<c)return-1;if(u>c)return 1;if(a<o){const p=r.comparePoint(t.rightSE.point);if(p!==0)return p}if(a>o){const p=t.comparePoint(r.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(a!==o){const p=f-u,m=a-n,_=h-c,y=o-i;if(p>m&&_<y)return 1;if(p<m&&_>y)return-1}return a>o?1:a<o||f<h?-1:f>h?1:t.id<r.id?-1:t.id>r.id?1:0}constructor(t,r,n,i){this.id=++Xoe,this.leftSE=t,t.segment=this,t.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=t,this.rings=n,this.windings=i}static fromRing(t,r,n){let i,a,o;const u=yo.comparePoints(t,r);if(u<0)i=t,a=r,o=1;else if(u>0)i=r,a=t,o=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const c=new yo(i,!0),f=new yo(a,!1);return new cc(c,f,[n],[o])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,r=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<r?t:r},ur:{x:this.rightSE.point.x,y:t>r?t:r}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0;const r=this.leftSE.point,n=this.rightSE.point,i=this.vector();if(r.x===n.x)return t.x===r.x?0:t.x<r.x?1:-1;const a=(t.y-r.y)/i.y,o=r.x+a*i.x;if(t.x===o)return 0;const u=(t.x-r.x)/i.x,c=r.y+u*i.y;return t.y===c?0:t.y<c?-1:1}getIntersection(t){const r=this.bbox(),n=t.bbox(),i=ZR(r,n);if(i===null)return null;const a=this.leftSE.point,o=this.rightSE.point,u=t.leftSE.point,c=t.rightSE.point,f=Wv(r,u)&&this.comparePoint(u)===0,h=Wv(n,a)&&t.comparePoint(a)===0,p=Wv(r,c)&&this.comparePoint(c)===0,m=Wv(n,o)&&t.comparePoint(o)===0;if(h&&f)return m&&!p?o:!m&&p?c:null;if(h)return p&&a.x===c.x&&a.y===c.y?null:a;if(f)return m&&o.x===u.x&&o.y===u.y?null:u;if(m&&p)return null;if(m)return o;if(p)return c;const _=Hoe(a,this.vector(),u,t.vector());return _===null||!Wv(i,_)?null:Zm.round(_.x,_.y)}split(t){const r=[],n=t.events!==void 0,i=new yo(t,!0),a=new yo(t,!1),o=this.rightSE;this.replaceRightSE(a),r.push(a),r.push(i);const u=new cc(i,o,this.rings.slice(),this.windings.slice());return yo.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),yo.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(i.checkForConsuming(),a.checkForConsuming()),r}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let r=0,n=this.windings.length;r<n;r++)this.windings[r]*=-1}consume(t){let r=this,n=t;for(;r.consumedBy;)r=r.consumedBy;for(;n.consumedBy;)n=n.consumedBy;const i=cc.compare(r,n);if(i!==0){if(i>0){const a=r;r=n,n=a}if(r.prev===n){const a=r;r=n,n=a}for(let a=0,o=n.rings.length;a<o;a++){const u=n.rings[a],c=n.windings[a],f=r.rings.indexOf(u);f===-1?(r.rings.push(u),r.windings.push(c)):r.windings[f]+=c}n.rings=null,n.windings=null,n.consumedBy=r,n.leftSE.consumedBy=r.leftSE,n.rightSE.consumedBy=r.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const r=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys;for(let u=0,c=this.rings.length;u<c;u++){const f=this.rings[u],h=this.windings[u],p=r.indexOf(f);p===-1?(r.push(f),n.push(h)):n[p]+=h}const a=[],o=[];for(let u=0,c=r.length;u<c;u++){if(n[u]===0)continue;const f=r[u],h=f.poly;if(o.indexOf(h)===-1)if(f.isExterior)a.push(h);else{o.indexOf(h)===-1&&o.push(h);const p=a.indexOf(f.poly);p!==-1&&a.splice(p,1)}}for(let u=0,c=a.length;u<c;u++){const f=a[u].multiPoly;i.indexOf(f)===-1&&i.push(f)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,r=this.afterState().multiPolys;switch(ts.type){case"union":{const n=t.length===0,i=r.length===0;this._isInResult=n!==i;break}case"intersection":{let n,i;t.length<r.length?(n=t.length,i=r.length):(n=r.length,i=t.length),this._isInResult=i===ts.numMultiPolys&&n<i;break}case"xor":{const n=Math.abs(t.length-r.length);this._isInResult=n%2===1;break}case"difference":{const n=i=>i.length===1&&i[0].isSubject;this._isInResult=n(t)!==n(r);break}default:throw new Error(`Unrecognized operation type found ${ts.type}`)}return this._isInResult}}class vL{constructor(t,r,n){if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const i=Zm.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};let a=i;for(let o=1,u=t.length;o<u;o++){if(typeof t[o][0]!="number"||typeof t[o][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let c=Zm.round(t[o][0],t[o][1]);c.x===a.x&&c.y===a.y||(this.segments.push(cc.fromRing(a,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),a=c)}(i.x!==a.x||i.y!==a.y)&&this.segments.push(cc.fromRing(a,i,this))}getSweepEvents(){const t=[];for(let r=0,n=this.segments.length;r<n;r++){const i=this.segments[r];t.push(i.leftSE),t.push(i.rightSE)}return t}}class Goe{constructor(t,r){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new vL(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,i=t.length;n<i;n++){const a=new vL(t[n],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=r}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let r=0,n=this.interiorRings.length;r<n;r++){const i=this.interiorRings[r].getSweepEvents();for(let a=0,o=i.length;a<o;a++)t.push(i[a])}return t}}class mL{constructor(t,r){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let n=0,i=t.length;n<i;n++){const a=new Goe(t[n],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=r}getSweepEvents(){const t=[];for(let r=0,n=this.polys.length;r<n;r++){const i=this.polys[r].getSweepEvents();for(let a=0,o=i.length;a<o;a++)t.push(i[a])}return t}}class Oy{static factory(t){const r=[];for(let n=0,i=t.length;n<i;n++){const a=t[n];if(!a.isInResult()||a.ringOut)continue;let o=null,u=a.leftSE,c=a.rightSE;const f=[u],h=u.point,p=[];for(;o=u,u=c,f.push(u),u.point!==h;)for(;;){const m=u.getAvailableLinkedEvents();if(m.length===0){const E=f[0].point,b=f[f.length-1].point;throw new Error(`Unable to complete output ring starting at [${E.x}, ${E.y}]. Last matching segment found ends at [${b.x}, ${b.y}].`)}if(m.length===1){c=m[0].otherSE;break}let _=null;for(let E=0,b=p.length;E<b;E++)if(p[E].point===u.point){_=E;break}if(_!==null){const E=p.splice(_)[0],b=f.splice(E.index);b.unshift(b[0].otherSE),r.push(new Oy(b.reverse()));continue}p.push({index:f.length,point:u.point});const y=u.getLeftmostComparator(o);c=m.sort(y)[0].otherSE;break}r.push(new Oy(f))}return r}constructor(t){this.events=t;for(let r=0,n=t.length;r<n;r++)t[r].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const r=[t];for(let f=1,h=this.events.length-1;f<h;f++){const p=this.events[f].point,m=this.events[f+1].point;dL(p,t,m)!==0&&(r.push(p),t=p)}if(r.length===1)return null;const n=r[0],i=r[1];dL(n,t,i)===0&&r.shift(),r.push(r[0]);const a=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:r.length-1,u=this.isExteriorRing()?r.length:-1,c=[];for(let f=o;f!=u;f+=a)c.push([r[f].x,r[f].y]);return c}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let i=1,a=this.events.length;i<a;i++){const o=this.events[i];yo.compare(t,o)>0&&(t=o)}let r=t.segment.prevInResult(),n=r?r.prevInResult():null;for(;;){if(!r)return null;if(!n)return r.ringOut;if(n.ringOut!==r.ringOut)return n.ringOut.enclosingRing()!==r.ringOut?r.ringOut:r.ringOut.enclosingRing();r=n.prevInResult(),n=r?r.prevInResult():null}}}class _L{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(let r=0,n=this.interiorRings.length;r<n;r++){const i=this.interiorRings[r].getGeom();i!==null&&t.push(i)}return t}}class qoe{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let r=0,n=this.polys.length;r<n;r++){const i=this.polys[r].getGeom();i!==null&&t.push(i)}return t}_composePolys(t){const r=[];for(let n=0,i=t.length;n<i;n++){const a=t[n];if(!a.poly)if(a.isExteriorRing())r.push(new _L(a));else{const o=a.enclosingRing();o.poly||r.push(new _L(o)),o.poly.addInterior(a)}}return r}}class Woe{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cc.compare;this.queue=t,this.tree=new wC(r),this.segments=[]}process(t){const r=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(r),n;const i=t.isLeft?this.tree.add(r):this.tree.find(r);if(!i)throw new Error(`Unable to find segment #${r.id} [${r.leftSE.point.x}, ${r.leftSE.point.y}] -> [${r.rightSE.point.x}, ${r.rightSE.point.y}] in SweepLine tree.`);let a=i,o=i,u,c;for(;u===void 0;)a=this.tree.prev(a),a===null?u=null:a.key.consumedBy===void 0&&(u=a.key);for(;c===void 0;)o=this.tree.next(o),o===null?c=null:o.key.consumedBy===void 0&&(c=o.key);if(t.isLeft){let f=null;if(u){const p=u.getIntersection(r);if(p!==null&&(r.isAnEndpoint(p)||(f=p),!u.isAnEndpoint(p))){const m=this._splitSafely(u,p);for(let _=0,y=m.length;_<y;_++)n.push(m[_])}}let h=null;if(c){const p=c.getIntersection(r);if(p!==null&&(r.isAnEndpoint(p)||(h=p),!c.isAnEndpoint(p))){const m=this._splitSafely(c,p);for(let _=0,y=m.length;_<y;_++)n.push(m[_])}}if(f!==null||h!==null){let p=null;f===null?p=h:h===null?p=f:p=yo.comparePoints(f,h)<=0?f:h,this.queue.remove(r.rightSE),n.push(r.rightSE);const m=r.split(p);for(let _=0,y=m.length;_<y;_++)n.push(m[_])}n.length>0?(this.tree.remove(r),n.push(t)):(this.segments.push(r),r.prev=u)}else{if(u&&c){const f=u.getIntersection(c);if(f!==null){if(!u.isAnEndpoint(f)){const h=this._splitSafely(u,f);for(let p=0,m=h.length;p<m;p++)n.push(h[p])}if(!c.isAnEndpoint(f)){const h=this._splitSafely(c,f);for(let p=0,m=h.length;p<m;p++)n.push(h[p])}}}this.tree.remove(r)}return n}_splitSafely(t,r){this.tree.remove(t);const n=t.rightSE;this.queue.remove(n);const i=t.split(r);return i.push(n),t.consumedBy===void 0&&this.tree.add(t),i}}const gL=typeof process<"u"&&v7.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,$oe=typeof process<"u"&&v7.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class Yoe{run(t,r,n){ts.type=t,Zm.reset();const i=[new mL(r,!0)];for(let p=0,m=n.length;p<m;p++)i.push(new mL(n[p],!1));if(ts.numMultiPolys=i.length,ts.type==="difference"){const p=i[0];let m=1;for(;m<i.length;)ZR(i[m].bbox,p.bbox)!==null?m++:i.splice(m,1)}if(ts.type==="intersection")for(let p=0,m=i.length;p<m;p++){const _=i[p];for(let y=p+1,E=i.length;y<E;y++)if(ZR(_.bbox,i[y].bbox)===null)return[]}const a=new wC(yo.compare);for(let p=0,m=i.length;p<m;p++){const _=i[p].getSweepEvents();for(let y=0,E=_.length;y<E;y++)if(a.insert(_[y]),a.size>gL)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const o=new Woe(a);let u=a.size,c=a.pop();for(;c;){const p=c.key;if(a.size===u){const _=p.segment;throw new Error(`Unable to pop() ${p.isLeft?"left":"right"} SweepEvent [${p.point.x}, ${p.point.y}] from segment #${_.id} [${_.leftSE.point.x}, ${_.leftSE.point.y}] -> [${_.rightSE.point.x}, ${_.rightSE.point.y}] from queue.`)}if(a.size>gL)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(o.segments.length>$oe)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const m=o.process(p);for(let _=0,y=m.length;_<y;_++){const E=m[_];E.consumedBy===void 0&&a.insert(E)}u=a.size,c=a.pop()}Zm.reset();const f=Oy.factory(o.segments);return new qoe(f).getGeom()}}const ts=new Yoe,Zoe=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ts.run("union",e,r)},Koe=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ts.run("intersection",e,r)},Qoe=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ts.run("xor",e,r)},Joe=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ts.run("difference",e,r)};var ese={union:Zoe,intersection:Koe,xor:Qoe,difference:Joe};function tse(e,t,r){r===void 0&&(r={});var n=rM(e),i=rM(t),a=ese.union(n.coordinates,i.coordinates);return a.length===0?null:a.length===1?k2(a[0],r.properties):hX(a,r.properties)}class rse{getCombineFeature(t){let r=null;const n=t[0];return t.map(i=>{const a=k2(i.coordinates);r===null?r=a:r=tse(r,a)}),n&&(r.properties=Xe({},n)),r}}const $v="select",Yv="active";class nse{constructor({layerService:t,tileLayerService:r,parent:n}){B(this,"layerService",void 0),B(this,"tileLayerService",void 0),B(this,"tileSourceService",void 0),B(this,"parent",void 0),B(this,"tilePickID",new Map),this.layerService=t,this.tileLayerService=r,this.parent=n,this.tileSourceService=new rse}pickRender(t){const r=this.tileLayerService.getVisibleTileBylngLat(t.lngLat);if(r){const n=r.getMainLayer();n?.layerPickService.pickRender(t)}}pick(t,r){var n=this;return Je(function*(){const a=n.parent.getContainer().pickingService;if(t.type==="RasterLayer"){const o=n.tileLayerService.getVisibleTileBylngLat(r.lngLat);if(o&&o.getMainLayer()!==void 0){const u=o.getMainLayer();return u.layerPickService.pickRasterLayer(u,r,n.parent)}return!1}return n.pickRender(r),a.pickFromPickingFBO(t,r)})()}selectFeature(t){const[r,n,i]=t,a=this.color2PickId(r,n,i);this.tilePickID.set($v,a),this.updateHighLight(r,n,i,$v)}highlightPickedFeature(t){const[r,n,i]=t,a=this.color2PickId(r,n,i);this.tilePickID.set(Yv,a),this.updateHighLight(r,n,i,Yv)}updateHighLight(t,r,n,i){this.tileLayerService.tiles.map(a=>{const o=a.getMainLayer();switch(i){case $v:o?.hooks.beforeSelect.call([t,r,n]);break;case Yv:o?.hooks.beforeHighlight.call([t,r,n]);break}})}setPickState(){const t=this.tilePickID.get($v),r=this.tilePickID.get(Yv);if(t){const[n,i,a]=this.pickId2Color(t);this.updateHighLight(n,i,a,$v);return}if(r){const[n,i,a]=this.pickId2Color(r);this.updateHighLight(n,i,a,Yv);return}}color2PickId(t,r,n){return Cf(new Uint8Array([t,r,n]))}pickId2Color(t){return Hh(t)}getFeatureById(t){const r=this.tileLayerService.getTiles().filter(i=>i.visible),n=[];return r.forEach(i=>{n.push(...i.getFeatureById(t))}),n}pickRasterLayer(){return!1}}function ise(e){return e==="PolygonLayer"?p7:e==="LineLayer"?o7:Ym}function ase(e){return["PolygonLayer","LineLayer"].indexOf(e)!==-1}class Yf extends La.EventEmitter{constructor(t,r){super(),B(this,"x",void 0),B(this,"y",void 0),B(this,"z",void 0),B(this,"key",void 0),B(this,"parent",void 0),B(this,"sourceTile",void 0),B(this,"visible",!0),B(this,"layers",[]),B(this,"isLoaded",!1),B(this,"tileMaskLayers",[]),B(this,"tileMask",void 0),this.parent=r,this.sourceTile=t,this.x=t.x,this.y=t.y,this.z=t.z,this.key=`${this.x}_${this.y}_${this.z}`}getLayers(){return this.layers}styleUpdate(...t){}lnglatInBounds(t){const[r,n,i,a]=this.sourceTile.bounds,{lng:o,lat:u}=t;return o>=r&&o<=i&&u>=n&&u<=a}getLayerOptions(){var t;const r=this.parent.getLayerConfig();return Xe(Xe({},r),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:ase(this.parent.type),mask:r.mask||((t=r.maskLayers)===null||t===void 0?void 0:t.length)!==0&&r.enableMask})}getMaskLayer(){const{maskLayers:t}=this.parent.getLayerConfig(),r=[];return t?.forEach(n=>{if(!n.tileLayer)return r.push(n),n;const a=n.tileLayer.getTile(this.sourceTile.key),o=a?.getLayers()[0];o&&r.push(o)}),r}addTileMask(){var t=this;return Je(function*(){const r=new p7({name:"mask",visible:!0,enablePicking:!1}).source({type:"FeatureCollection",features:[t.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").color("#0f0").style({opacity:.5}),n=Mm(t.parent.container);r.setContainer(n),yield r.init(),t.tileMask=r;const i=t.getMainLayer();return i!==void 0&&(i.tileMask=r),r})()}addMask(t,r){var n=this;return Je(function*(){const i=Mm(n.parent.container);r.setContainer(i),yield r.init(),t.addMask(r),n.tileMaskLayers.push(r)})()}addLayer(t){var r=this;return Je(function*(){t.isTileLayer=!0;const n=Mm(r.parent.container);t.setContainer(n),r.layers.push(t),yield t.init()})()}updateVisible(t){this.visible=t,this.updateOptions("visible",t)}updateOptions(t,r){this.layers.forEach(n=>{n.updateLayerConfig({[t]:r})})}getMainLayer(){return this.layers[0]}getFeatures(t){return[]}getFeatureById(t){return[]}destroy(){var t;(t=this.tileMask)===null||t===void 0||t.destroy(),this.layers.forEach(r=>r.destroy())}}class ose extends Yf{initTileLayer(){var t=this;return Je(function*(){const r=t.getSourceOption(),n=r.data.features[0].properties,i=new o7().source(r.data,r.options).size(1).shape("line").color("red"),a=new Ym({minZoom:t.z-1,maxZoom:t.z+1,textAllowOverlap:!0}).source([n],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(t.key).style({stroke:"#fff",strokeWidth:2});yield t.addLayer(i),yield t.addLayer(a),t.isLoaded=!0})()}getSourceOption(){const t=this.parent.getSource();return{data:{type:"FeatureCollection",features:this.sourceTile.data.layers.testTile.features},options:{parser:{type:"geojson"},transforms:t.transforms}}}}class sse extends Yf{initTileLayer(){var t=this;return Je(function*(){const r=t.parent.getLayerAttributeConfig(),n=t.getLayerOptions(),i=t.getSourceOption(),a=new Die(Xe({},n)).source(i.data,i.options);r&&Object.keys(r).forEach(o=>{var u,c;const f=o;a[f]((u=r[f])===null||u===void 0?void 0:u.field,(c=r[f])===null||c===void 0?void 0:c.values)}),yield t.addLayer(a),t.isLoaded=!0})()}getSourceOption(){const t=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:t.transforms}}}}const use=`layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

out vec4 outputColor;

void main() {
  outputColor = u_color;
  outputColor.a *= u_opacity;
}
`,lse=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;

layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class cse extends yn{getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),Xe(Xe({},t.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const{opacity:t=1,color:r="#000"}=this.layer.getLayerConfig(),n={u_color:fn(r),u_opacity:t||1};return this.getUniformsBufferInfo(n)}initModels(){var t=this;return Je(function*(){return t.buildModels()})()}buildModels(){var t=this;return Je(function*(){return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"mask",vertexShader:lse,fragmentShader:use,defines:t.getDefines(),triangulation:p_,depth:{enable:!1},pick:!1})]})()}clearModels(t=!0){t&&this.layerService.clear()}registerBuiltinAttributes(){return""}}const fse={fill:cse};class _7 extends dp{constructor(...t){super(...t),B(this,"type","MaskLayer")}buildModels(){var t=this;return Je(function*(){const r=t.getModelType();t.layerModel=new fse[r](t),yield t.initLayerModels()})()}getModelType(){return"fill"}}class dse extends Yf{initTileLayer(){var t=this;return Je(function*(){const r=t.parent.getLayerAttributeConfig(),n=t.getLayerOptions(),i=t.getSourceOption(),a=new _7(Xe({},n)).source(i.data,i.options);r&&Object.keys(r).forEach(o=>{var u,c;const f=o;a[f]((u=r[f])===null||u===void 0?void 0:u.field,(c=r[f])===null||c===void 0?void 0:c.values)}),yield t.addLayer(a),t.isLoaded=!0})()}getFeatures(t){return t?this.sourceTile.data.getTileData(t):[]}getSourceOption(){const t=this.parent.getSource(),{sourceLayer:r,featureId:n}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(r)},options:{parser:{type:"geojson",featureId:n},transforms:t.transforms}}}}const hse=["rasterData"];let pse=class extends Yf{initTileLayer(){var t=this;return Je(function*(){const r=t.parent.getLayerAttributeConfig(),n=t.getLayerOptions(),i=t.getSourceOption(),a=new MC(Xe({},n)).source(i.data,i.options);r&&Object.keys(r).forEach(o=>{var u,c;const f=o;a[f]((u=r[f])===null||u===void 0?void 0:u.field,(c=r[f])===null||c===void 0?void 0:c.values)}),yield t.addLayer(a),t.isLoaded=!0})()}getSourceOption(){const t=this.parent.getSource(),r=this.sourceTile.data.data,{rasterData:n}=r,i=qs(r,hse);return{data:n,options:{parser:Xe({type:"rasterRgb",extent:this.sourceTile.bounds},i),transforms:t.transforms}}}};class vse extends Yf{initTileLayer(){var t=this;return Je(function*(){const r=t.parent.getLayerAttributeConfig(),n=t.getLayerOptions(),i=t.getSourceOption(),a=new MC(Xe({},n)).source(i.data,i.options);r&&Object.keys(r).forEach(o=>{var u,c;const f=o;a[f]((u=r[f])===null||u===void 0?void 0:u.field,(c=r[f])===null||c===void 0?void 0:c.values)}),yield t.addLayer(a),t.isLoaded=!0})()}getSourceOption(){const t=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:t.transforms}}}}const mse=["rasterData"],_se={positions:[0,1],colors:["#000","#fff"]};class gse extends Yf{constructor(...t){super(...t),B(this,"colorTexture",void 0)}initTileLayer(){var t=this;return Je(function*(){const r=t.parent.getLayerAttributeConfig(),n=t.getLayerOptions(),i=t.getSourceOption(),{rampColors:a,domain:o}=t.getLayerOptions();t.colorTexture=t.parent.textureService.getColorTexture(a,o);const u=new MC(Xe(Xe({},n),{},{colorTexture:t.colorTexture})).source(i.data,i.options);r&&Object.keys(r).forEach(c=>{var f,h;const p=c;u[p]((f=r[p])===null||f===void 0?void 0:f.field,(h=r[p])===null||h===void 0?void 0:h.values)}),yield t.addLayer(u),t.isLoaded=!0})()}getSourceOption(){const t=this.parent.getSource(),r=this.sourceTile.data.data,{rasterData:n}=r,i=qs(r,mse);return{data:n,options:{parser:Xe({type:"raster",extent:this.sourceTile.bounds},i),transforms:t.transforms}}}styleUpdate(...t){const{rampColors:r=_se,domain:n}=t;this.colorTexture=this.parent.textureService.getColorTexture(r,n||W2(r)),this.layers.forEach(i=>i.style({colorTexture:this.colorTexture}))}destroy(){this.layers.forEach(t=>t.destroy())}}class l0 extends Yf{initTileLayer(){var t=this;return Je(function*(){const r=t.parent.getLayerAttributeConfig(),n=t.getLayerOptions(),i=ise(t.parent.type),a=t.getSourceOption();if(!a){t.isLoaded=!0,t.emit("loaded");return}const o=new i(Xe({},n)).source(a.data,a.options);Object.keys(r).forEach(u=>{var c,f;const h=u;o[h]((c=r[h])===null||c===void 0?void 0:c.field,(f=r[h])===null||f===void 0?void 0:f.values)}),yield t.addLayer(o),n.tileMask&&(yield t.addTileMask()),t.setLayerMinMaxZoom(o),t.isLoaded=!0,t.emit("loaded")})()}getSourceOption(){const t=this.parent.getSource(),{sourceLayer:r="defaultLayer",featureId:n="id"}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(r)},options:{parser:{type:"geojson",featureId:n},transforms:t.transforms}}}setLayerMinMaxZoom(t){t.getModelType()==="text"&&t.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}getFeatures(t){return this.sourceTile.data.getTileData(t)}getFeatureById(t){const r=this.getMainLayer();return r?r.getSource().data.dataArray.filter(i=>i._id===t):[]}}function yse(e){switch(e.type){case"PolygonLayer":return l0;case"LineLayer":return l0;case"PointLayer":return l0;case"TileDebugLayer":return ose;case"MaskLayer":return dse;case"RasterLayer":const{dataType:r}=e.getSource().parser;switch(r){case ji.RGB:case ji.CUSTOMRGB:return pse;case ji.ARRAYBUFFER:case ji.CUSTOMARRAYBUFFER:return gse;case ji.TERRAINRGB:case ji.CUSTOMTERRAINRGB:return vse;default:return sse}default:return l0}}const Ese=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask","addMask","removeMask"],{debounce:bse}=Ln;class Tse{constructor(t){B(this,"parent",void 0),B(this,"tileLayerService",void 0),B(this,"mapService",void 0),B(this,"layerService",void 0),B(this,"rendererService",void 0),B(this,"pickingService",void 0),B(this,"tilePickService",void 0),B(this,"tilesetManager",void 0),B(this,"initedTileset",!1),B(this,"lastViewStates",void 0),B(this,"mapchange",()=>{var n;if(this.parent.isVisible()===!1)return;const{latLonBounds:i,zoom:a}=this.getCurrentView();this.lastViewStates&&this.lastViewStates.zoom===a&&this.lastViewStates.latLonBounds.toString()===i.toString()||(this.lastViewStates={zoom:a,latLonBounds:i},(n=this.tilesetManager)===null||n===void 0||n.throttleUpdate(a,i))}),B(this,"viewchange",bse(this.mapchange,24)),this.parent=t;const r=this.parent.getContainer();this.rendererService=r.rendererService,this.layerService=r.layerService,this.mapService=r.mapService,this.pickingService=r.pickingService,this.tileLayerService=new xoe({rendererService:this.rendererService,layerService:this.layerService,parent:t}),this.tilePickService=new nse({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:t}),this.parent.setLayerPickService(this.tilePickService),this.proxy(t),this.initTileSetManager()}initTileSetManager(){var t;const r=this.parent.getSource();if(this.tilesetManager=r.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),this.parent.isVisible()===!1)return;const{latLonBounds:n,zoom:i}=this.getCurrentView();(t=this.tilesetManager)===null||t===void 0||t.update(i,n)}getCurrentView(){const t=this.mapService.getBounds(),r=[t[0][0],t[0][1],t[1][0],t[1][1]],n=this.mapService.getZoom();return{latLonBounds:r,zoom:n}}bindTilesetEvent(){this.tilesetManager.on("tile-loaded",t=>{}),this.tilesetManager.on("tile-unload",t=>{this.tileUnLoad(t)}),this.tilesetManager.on("tile-error",(t,r)=>{this.tileError(t)}),this.tilesetManager.on("tile-update",()=>{this.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}render(){this.tileLayerService.render()}getLayers(){return this.tileLayerService.getLayers()}getTiles(){return this.tileLayerService.getTiles()}getTile(t){return this.tileLayerService.getTile(t)}tileLoaded(t){}tileError(t){console.warn("error:",t)}destroy(){var t;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(t=this.tilesetManager)===null||t===void 0||t.destroy(),this.tileLayerService.destroy()}reload(){var t;this.tilesetManager.clear();const{latLonBounds:r,zoom:n}=this.getCurrentView();(t=this.tilesetManager)===null||t===void 0||t.update(n,r)}tileUnLoad(t){this.tileLayerService.removeTile(t.key)}tileUpdate(){var t=this;return Je(function*(){if(!t.tilesetManager)return;const r=t.parent.getMinZoom(),n=t.parent.getMaxZoom(),i=t.tilesetManager.tiles.filter(a=>a.isLoaded).filter(a=>a.isVisibleChange).filter(a=>a.data).filter(a=>a.z>=r&&a.z<n);yield Promise.all(i.map((function(){var a=Je(function*(o){if(t.tileLayerService.hasTile(o.key))t.tileLayerService.updateTileVisible(o),t.tilePickService.setPickState(),t.layerService.reRender();else{const u=yse(t.parent),c=new u(o,t.parent);yield c.initTileLayer(),t.tilePickService.setPickState(),c.getLayers().length!==0&&(t.tileLayerService.addTile(c),t.tileLayerService.updateTileVisible(o),t.layerService.reRender())}});return function(o){return a.apply(this,arguments)}})())),t.tilesetManager.isLoaded&&t.parent.emit("tiles-loaded",t.tilesetManager.currentTiles)})()}setPickState(t){}pickRender(t){this.tilePickService.pickRender(t)}selectFeature(t){this.tilePickService.selectFeature(t)}highlightPickedFeature(t){this.tilePickService.highlightPickedFeature(t)}proxy(t){Ese.forEach(r=>{const n=t[r].bind(t);t[r]=(...i)=>(n(...i),this.getLayers().map(a=>{a[r](...i)}),r==="style"&&this.getTiles().forEach(a=>a.styleUpdate(...i)),t)})}}class g7 extends La.EventEmitter{get lngLat(){var t;return(t=this.popupOption.lngLat)!==null&&t!==void 0?t:{lng:0,lat:0}}set lngLat(t){this.popupOption.lngLat=t}constructor(t){super(),B(this,"popupOption",void 0),B(this,"mapsService",void 0),B(this,"sceneService",void 0),B(this,"layerService",void 0),B(this,"scene",void 0),B(this,"closeButton",void 0),B(this,"container",void 0),B(this,"content",void 0),B(this,"contentTitle",void 0),B(this,"contentPanel",void 0),B(this,"tip",void 0),B(this,"isShow",!0),B(this,"onMouseMove",n=>{var i;const a=this.mapsService.getMapContainer(),{left:o=0,top:u=0}=(i=a?.getBoundingClientRect())!==null&&i!==void 0?i:{};this.setPopupPosition(n.clientX-o,n.clientY-u)}),B(this,"updateLngLatPosition",()=>{if(!this.mapsService||this.popupOption.followCursor)return;const{lng:n,lat:i}=this.lngLat,{x:a,y:o}=this.mapsService.lngLatToContainer([n,i]);this.setPopupPosition(a,o)}),B(this,"updateLngLatPositionWhenZoom",n=>{if(!this.mapsService||this.popupOption.followCursor)return;const i=n.map,a=i.getSize();a.x=a.x/2,a.y=a.y/2;const o=n.center,u=n.zoom,c=i.DE(this.lngLat,u,o);c.x=Math.round(c.x),c.y=Math.round(c.y),this.setPopupPosition(c.x,c.y,!0)}),B(this,"onKeyDown",n=>{n.keyCode===27&&this.remove()}),B(this,"onCloseButtonClick",n=>{n.stopPropagation&&n.stopPropagation(),this.hide()}),B(this,"updatePosition",(n,i=!0)=>{const a=!!this.lngLat,{className:o,style:u,maxWidth:c,anchor:f,stopPropagation:h}=this.popupOption;if(!this.mapsService||!a||!this.content)return;const p=this.mapsService.getMarkerContainer();if(!this.container&&p&&(this.container=ai("div",`l7-popup ${o??""} ${this.isShow?"":"l7-popup-hide"}`,p),u&&this.container.setAttribute("style",u),this.tip=ai("div","l7-popup-tip",this.container),this.container.appendChild(this.content),h&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(m=>{this.container.addEventListener(m,_=>{_.stopPropagation()})}),this.container.style.whiteSpace="nowrap"),i?this.updateLngLatPositionWhenZoom(n):this.updateLngLatPosition(),a$(this.container,`${hR[f]}`),xX(this.container,f,"popup"),c){const{width:m}=this.container.getBoundingClientRect();m>parseFloat(c)&&(this.container.style.width=c)}else this.container.style.removeProperty("width")}),B(this,"updateWhenZoom",n=>{this.updatePosition(n,!0)}),B(this,"update",()=>{this.updatePosition(null,!1)}),this.popupOption=Xe(Xe({},this.getDefault(t??{})),t);const{lngLat:r}=this.popupOption;r&&(this.lngLat=r)}getIsShow(){return this.isShow}addTo(t){this.mapsService=t.mapService,this.sceneService=t.sceneService,this.layerService=t.layerService,this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=t,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();const{html:r,text:n,title:i}=this.popupOption;return r?this.setHTML(r):n&&this.setText(n),i&&this.setTitle(i),this.emit("open"),this}remove(){if(this!==null&&this!==void 0&&this.isOpen())return this.content&&Pu(this.content),this.container&&(Pu(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}getOptions(){return this.popupOption}setOptions(t){this.show();const{className:r}=this.popupOption;if(this.popupOption=Xe(Xe({},this.popupOption),t),this.checkUpdateOption(t,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","lngLat","offsets"])&&(this.container&&(Pu(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(t,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(t,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(t,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(t,["html"])&&t.html?this.setHTML(t.html):this.checkUpdateOption(t,["text"])&&t.text&&this.setText(t.text),this.checkUpdateOption(t,["className"])){var n;r&&this.container.classList.remove(r??""),this.container.classList.add((n=t.className)!==null&&n!==void 0?n:"")}if(this.checkUpdateOption(t,["style"])){var i;v5(this.container,(i=t.style)!==null&&i!==void 0?i:"")}return this.checkUpdateOption(t,["lngLat"])&&t.lngLat&&this.setLnglat(t.lngLat),this}open(){return this.addTo(this.scene),this}close(){return this.remove(),this}show(){if(!this.isShow)return this.container&&ry(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}hide(){if(this.isShow)return this.container&&Of(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}setHTML(t){return this.popupOption.html=t,this.setDOMContent(t)}setText(t){return this.popupOption.text=t,this.setDOMContent(window.document.createTextNode(t))}setTitle(t){this.show(),this.popupOption.title=t,t?(this.contentTitle||(this.contentTitle=ai("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),sC(this.contentTitle),yf(this.contentTitle,t)):this.contentTitle&&(Pu(this.contentTitle),this.contentTitle=void 0)}panToPopup(){const{lng:t,lat:r}=this.lngLat;return this.popupOption.autoPan&&this.mapsService.panTo([t,r]),this}setLngLat(t){return this.setLnglat(t)}setLnglat(t){return this.show(),this.lngLat=t,Array.isArray(t)&&(this.lngLat={lng:t[0],lat:t[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(()=>{this.panToPopup()},0),this}getLnglat(){return this.lngLat}setMaxWidth(t){return this.popupOption.maxWidth=t,this.update(),this}isOpen(){return!!this.mapsService}getDefault(t){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:OF.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}setDOMContent(t){return this.show(),this.createContent(),yf(this.contentPanel,t),this.update(),this}updateCloseOnClick(t){const r=this.mapsService;r&&(r?.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!t&&requestAnimationFrame(()=>{r?.on("click",this.onCloseButtonClick)}))}updateCloseOnEsc(t){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!t&&window.addEventListener("keydown",this.onKeyDown)}updateFollowCursor(t){var r;const n=(r=this.mapsService)===null||r===void 0?void 0:r.getContainer();n&&(n?.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!t&&n?.addEventListener("mousemove",this.onMouseMove))}createContent(){if(this.content&&Pu(this.content),this.contentTitle=void 0,this.content=ai("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){const t=Cte("l7-icon-guanbi");Of(t,"l7-popup-close-button"),this.content.appendChild(t),this.popupOption.closeButtonOffsets&&(t.style.right=this.popupOption.closeButtonOffsets[0]+"px",t.style.top=this.popupOption.closeButtonOffsets[1]+"px"),t.setAttribute("aria-label","Close popup"),t.addEventListener("click",()=>{this.hide()}),t.addEventListener("pointerup",r=>{r.stopPropagation()}),t.addEventListener("pointerdown",r=>{r.stopPropagation()}),this.closeButton=t}else this.closeButton=void 0;this.contentPanel=ai("div","l7-popup-content__panel",this.content)}setPopupPosition(t,r,n=!1){if(this.container){const{offsets:i}=this.popupOption;this.container.style.left=t+i[0]+"px",this.container.style.top=r-i[1]+"px",n?this.container.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)":this.container.style.transition=""}}checkUpdateOption(t,r){return r.some(n=>n in t)}}const{get:Sse}=Ln;class Ase extends g7{constructor(...t){super(...t),B(this,"layerClickCountByFrame",0),B(this,"layerConfigMap",new WeakMap),B(this,"displayFeatureInfo",void 0),B(this,"onLayerClick",(r,n)=>{requestAnimationFrame(()=>{if(this.popupOption.closeOnClick&&this.layerClickCountByFrame++,this.isShow&&this.isSameFeature(r,n.featureId))this.hide();else{const{title:i,content:a}=this.getLayerInfoFrag(r,n);this.setDOMContent(a),this.setLnglat(n.lngLat),this.setTitle(i),this.setDisplayFeatureInfo({layer:r,featureId:n.featureId}),this.show()}})}),B(this,"onSceneClick",()=>{this.layerClickCountByFrame=0,requestAnimationFrame(()=>{this.layerClickCountByFrame||this.hide()})}),B(this,"onLayerHide",()=>{this.hide(),this.setDisplayFeatureInfo(void 0)}),B(this,"updateCloseOnClick",()=>{})}get layerConfigItems(){var t;const{config:r,items:n}=this.popupOption;return(t=r??n)!==null&&t!==void 0?t:[]}addTo(t){return super.addTo(t),this.bindLayerEvent(),this.hide(),this}remove(){return super.remove(),this.unbindLayerEvent(),this}setOptions(t){this.unbindLayerEvent();const r=Xe({},t),n=r.trigger||this.popupOption.trigger,i=r.items||this.popupOption.items,a=i?.length===0;r.followCursor=n==="hover"&&!a;const o=this.isShow;return super.setOptions(r),this.bindLayerEvent(),(a||!o)&&this.hide(),this}getDefault(t){const r=t.trigger!=="click";return Xe(Xe({},super.getDefault(t)),{},{trigger:"hover",followCursor:r,lngLat:{lng:0,lat:0},offsets:[0,10],closeButton:!1,closeOnClick:!0,autoClose:!1,closeOnEsc:!1})}bindLayerEvent(){const{trigger:t,closeOnClick:r}=this.popupOption;this.layerConfigItems.forEach(n=>{var i;const a=this.getLayerByConfig(n);if(!a)return;const o=Xe({},n);if(t==="hover"){const h=this.onLayerMouseMove.bind(this,a),p=this.onLayerMouseOut.bind(this,a);o.onMouseMove=h,o.onMouseOut=p,a?.on("mousemove",h),a?.on("mouseout",p)}else{var u;const h=this.onLayerClick.bind(this,a);o.onClick=h,a?.on("click",h);const p=(u=this.mapsService)===null||u===void 0?void 0:u.getMapContainer();p&&r&&p.addEventListener("click",this.onSceneClick)}const c=a==null||(i=a.getSource)===null||i===void 0?void 0:i.call(a),f=this.onSourceUpdate.bind(this);c?.on("update",f),o.onSourceUpdate=f,this.layerConfigMap.set(a,o)})}unbindLayerEvent(){this.layerConfigItems.forEach(t=>{var r;const n=this.getLayerByConfig(t),i=n&&this.layerConfigMap.get(n);if(!i)return;const{onMouseMove:a,onMouseOut:o,onClick:u,onSourceUpdate:c}=i;if(a&&n.off("mousemove",a),o&&n.off("mouseout",o),u&&n.off("click",u),c){var f;n==null||(f=n.getSource())===null||f===void 0||f.off("update",c)}const h=(r=this.mapsService)===null||r===void 0?void 0:r.getMapContainer();h&&h.removeEventListener("click",this.onSceneClick)})}onLayerMouseMove(t,r){if(!this.isSameFeature(t,r.featureId)){const{title:n,content:i}=this.getLayerInfoFrag(t,r);this.setDOMContent(i),this.setTitle(n),this.setDisplayFeatureInfo({layer:t,featureId:r.featureId}),this.show()}}onLayerMouseOut(t,r){this.setDisplayFeatureInfo(void 0),this.isShow&&this.hide()}onSourceUpdate(){this.hide(),this.setDisplayFeatureInfo(void 0)}getLayerInfoFrag(t,r){const n=this.layerConfigMap.get(t);let i;const a=document.createDocumentFragment();if(n){let o=r.feature;o.type==="Feature"&&"properties"in o&&"geometry"in o&&(o=o.properties);const{title:u,fields:c,customContent:f}=n;if(u){i=document.createDocumentFragment();const h=u instanceof Function?u(o):u;yf(i,h)}if(f){const h=f instanceof Function?f(o):f;yf(a,h)}else c!=null&&c.length&&c?.forEach(h=>{var p,m;const{field:_,formatField:y,formatValue:E,getValue:b}=typeof h=="string"?{field:h}:h,S=ai("div","l7-layer-popup__row"),A=b?b(r.feature):Sse(o,_),R=(p=y instanceof Function?y(_,o):y)!==null&&p!==void 0?p:_;let M=(m=E instanceof Function?E(A,o):E)!==null&&m!==void 0?m:A;const P=ai("span","l7-layer-popup__key",S);yf(P,R),yf(P,document.createTextNode(""));const I=ai("span","l7-layer-popup__value",S);Array.isArray(M)&&M.every(w=>!(w instanceof Object))&&(M=M.map(w=>String(w)).join(",")),yf(I,M),a.appendChild(S)})}return{title:i,content:a}}getLayerByConfig(t){const r=t.layer;if(r instanceof Object)return r;if(typeof r=="string")return this.layerService.getLayer(r)||this.layerService.getLayerByName(r)}isSameFeature(t,r){const n=this.displayFeatureInfo;return n&&t===n.layer&&r===n.featureId}setDisplayFeatureInfo(t){const r=this.displayFeatureInfo;r&&r.layer.off("hide",this.onLayerHide),t&&t.layer.on("hide",this.onLayerHide),this.displayFeatureInfo=t}}function xse(e,t){var r=typeof my<"u"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,n=typeof wx<"u"&&wx!==null&&(typeof wx.request<"u"||typeof wx.miniProgram<"u");if(!(r||n)&&(t||(t=document),!!t)){var i=t.head||t.getElementsByTagName("head")[0];if(!i){i=t.createElement("head");var a=t.body||t.getElementsByTagName("body")[0];a?a.parentNode.insertBefore(i,a):t.documentElement.appendChild(i)}var o=t.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),i.appendChild(o),o}}xse(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font:
    12px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  box-sizing: border-box;
}
.l7-control-container {
  font:
    12px/1.5 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: flex;
  justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  align-items: flex-end;
}
.l7-control-container .l7-column {
  flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 6px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  align-items: flex-start;
}
.l7-popper.l7-popper-end {
  align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: flex;
  align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow-x: hidden;
  overflow-y: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: flex;
  flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  flex-direction: column;
  justify-content: center;
  box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: flex;
  flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: flex;
  align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  touch-action: none;
}
.l7-control-swipe_hide {
  display: none;
}
.l7-control-swipe:before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}
.l7-control-swipe.horizontal:before {
  top: 50%;
  right: -5000px;
  bottom: auto;
  left: -5000px;
  width: auto;
  height: 4px;
}
.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}
.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}
.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}
.l7-control-swipe:after,
.l7-control-swipe__button:before,
.l7-control-swipe__button:after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentColor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}
.l7-control-swipe__button:after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}
.l7-control-swipe__button:before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);class Rse{constructor(t){B(this,"configService",void 0),B(this,"config",void 0),this.config=t}setContainer(t,r){this.configService=t.globalConfigService,t.mapConfig=Xe(Xe({},this.config),{},{id:r}),t.mapService=new(this.getServiceConstructor())(t)}getServiceConstructor(){throw new Error("Method not implemented.")}}var P0={exports:{}},Cse=P0.exports,yL;function Ose(){return yL||(yL=1,(function(e,t){(function(r,n){e.exports=n()})(Cse,function(){function r(p){var m=[];return p.AMapUI&&m.push(n(p.AMapUI)),p.Loca&&m.push(i(p.Loca)),Promise.all(m)}function n(p){return new Promise(function(m,_){var y=[];if(p.plugins)for(var E=0;E<p.plugins.length;E+=1)o.AMapUI.plugins.indexOf(p.plugins[E])==-1&&y.push(p.plugins[E]);if(u.AMapUI===a.failed)_(" AMapUI ");else if(u.AMapUI===a.notload){u.AMapUI=a.loading,o.AMapUI.version=p.version||o.AMapUI.version,E=o.AMapUI.version;var b=document.body||document.head,S=document.createElement("script");S.type="text/javascript",S.src="https://webapi.amap.com/ui/"+E+"/main.js",S.onerror=function(A){u.AMapUI=a.failed,_(" AMapUI ")},S.onload=function(){if(u.AMapUI=a.loaded,y.length)window.AMapUI.loadUI(y,function(){for(var A=0,R=y.length;A<R;A++){var M=y[A].split("/").slice(-1)[0];window.AMapUI[M]=arguments[A]}for(m();c.AMapUI.length;)c.AMapUI.splice(0,1)[0]()});else for(m();c.AMapUI.length;)c.AMapUI.splice(0,1)[0]()},b.appendChild(S)}else u.AMapUI===a.loaded?p.version&&p.version!==o.AMapUI.version?_(" AMapUI "):y.length?window.AMapUI.loadUI(y,function(){for(var A=0,R=y.length;A<R;A++){var M=y[A].split("/").slice(-1)[0];window.AMapUI[M]=arguments[A]}m()}):m():p.version&&p.version!==o.AMapUI.version?_(" AMapUI "):c.AMapUI.push(function(A){A?_(A):y.length?window.AMapUI.loadUI(y,function(){for(var R=0,M=y.length;R<M;R++){var P=y[R].split("/").slice(-1)[0];window.AMapUI[P]=arguments[R]}m()}):m()})})}function i(p){return new Promise(function(m,_){if(u.Loca===a.failed)_(" Loca ");else if(u.Loca===a.notload){u.Loca=a.loading,o.Loca.version=p.version||o.Loca.version;var y=o.Loca.version,E=o.AMap.version.startsWith("2"),b=y.startsWith("2");if(E&&!b||!E&&b)_("JSAPI  Loca ");else{E=o.key,b=document.body||document.head;var S=document.createElement("script");S.type="text/javascript",S.src="https://webapi.amap.com/loca?v="+y+"&key="+E,S.onerror=function(A){u.Loca=a.failed,_(" AMapUI ")},S.onload=function(){for(u.Loca=a.loaded,m();c.Loca.length;)c.Loca.splice(0,1)[0]()},b.appendChild(S)}}else u.Loca===a.loaded?p.version&&p.version!==o.Loca.version?_(" Loca "):m():p.version&&p.version!==o.Loca.version?_(" Loca "):c.Loca.push(function(A){A?_(A):_()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var a;(function(p){p.notload="notload",p.loading="loading",p.loaded="loaded",p.failed="failed"})(a||(a={}));var o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},u={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},c={AMapUI:[],Loca:[]},f=[],h=function(p){typeof p=="function"&&(u.AMap===a.loaded?p(window.AMap):f.push(p))};return{load:function(p){return new Promise(function(m,_){if(u.AMap==a.failed)_("");else if(u.AMap==a.notload){var y=p.key,E=p.version,b=p.plugins;y?(window.AMap&&location.host!=="lbs.amap.com"&&_("API"),o.key=y,o.AMap.version=E||o.AMap.version,o.AMap.plugins=b||o.AMap.plugins,u.AMap=a.loading,E=document.body||document.head,window.___onAPILoaded=function(A){if(delete window.___onAPILoaded,A)u.AMap=a.failed,_(A);else for(u.AMap=a.loaded,r(p).then(function(){m(window.AMap)}).catch(_);f.length;)f.splice(0,1)[0]()},b=document.createElement("script"),b.type="text/javascript",b.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+o.AMap.version+"&key="+y+"&plugin="+o.AMap.plugins.join(","),b.onerror=function(A){u.AMap=a.failed,_(A)},E.appendChild(b)):_("key")}else if(u.AMap==a.loaded)if(p.key&&p.key!==o.key)_(" key");else if(p.version&&p.version!==o.AMap.version)_(" JSAPI ");else{if(y=[],p.plugins)for(E=0;E<p.plugins.length;E+=1)o.AMap.plugins.indexOf(p.plugins[E])==-1&&y.push(p.plugins[E]);y.length?window.AMap.plugin(y,function(){r(p).then(function(){m(window.AMap)}).catch(_)}):r(p).then(function(){m(window.AMap)}).catch(_)}else if(p.key&&p.key!==o.key)_(" key");else if(p.version&&p.version!==o.AMap.version)_(" JSAPI ");else{var S=[];if(p.plugins)for(E=0;E<p.plugins.length;E+=1)o.AMap.plugins.indexOf(p.plugins[E])==-1&&S.push(p.plugins[E]);h(function(){S.length?window.AMap.plugin(S,function(){r(p).then(function(){m(window.AMap)}).catch(_)}):r(p).then(function(){m(window.AMap)}).catch(_)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},u={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},c={AMap:[],AMapUI:[],Loca:[]}}}})})(P0)),P0.exports}var Mse=Ose();const wse=$r(Mse);class Nse{constructor(t){B(this,"size",1e4),this.size=t||1e4}setSize(t){this.size=t}getSize(){return[this.size,this.size]}mercatorXfromLng(t){return(180+t)/360*this.size}mercatorYfromLat(t){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360)*this.size}lngFromMercatorX(t){return t/this.size*360-180}latFromMercatorY(t){const r=180-(1-t/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90}project(t){const r=this.mercatorXfromLng(t[0]),n=this.mercatorYfromLat(t[1]);return[r,n]}unproject(t){const r=this.lngFromMercatorX(t[0]),n=this.latFromMercatorY(t[1]);return[r,n]}}const Ise=12;class Pse{constructor(t){B(this,"map",void 0),B(this,"simpleMapCoord",new Nse),B(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),B(this,"config",void 0),B(this,"configService",void 0),B(this,"coordinateSystemService",void 0),B(this,"eventEmitter",void 0),B(this,"markerContainer",void 0),B(this,"mapContainer",void 0),B(this,"cameraChangedCallback",void 0),this.config=t.mapConfig,this.configService=t.globalConfigService,this.coordinateSystemService=t.coordinateSystemService,this.eventEmitter=new La.EventEmitter}onCameraChanged(t){this.cameraChangedCallback=t}updateView(t){var r;this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:t.bearing,center:t.center,viewportHeight:t.viewportHeight,pitch:t.pitch,viewportWidth:t.viewportWidth,zoom:t.zoom}),this.updateCoordinateSystemService(),(r=this.cameraChangedCallback)===null||r===void 0||r.call(this,this.viewport)}updateCoordinateSystemService(){const{offsetCoordinate:t=!0}=this.config;this.viewport.getZoom()>Ise&&t?this.coordinateSystemService.setCoordinateSystem(oy.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(oy.LNGLAT)}creatMapContainer(t){let r;return typeof t=="string"?r=document.getElementById(t):r=t,r}getMapStyleValue(t){var r;return(r=this.getMapStyleConfig()[t])!==null&&r!==void 0?r:t}setBgColor(t){this.bgColor=t}getMapContainer(){return this.mapContainer}getMarkerContainer(){return this.markerContainer}getOverlayContainer(){}getCanvasOverlays(){}emit(t,...r){this.eventEmitter.emit(t,...r)}once(t,r){this.eventEmitter.once(t,r)}meterToCoord(t,r){return 1}destroy(){this.eventEmitter.removeAllListeners()}}function y7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dse(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k5(n.key),n)}}function E7(e,t,r){return t&&Dse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ym(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lse(e,t){if(t&&(Xh(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ym(e)}function KR(e){return KR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},KR(e)}function QR(e,t){return QR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},QR(e,t)}function Bse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QR(e,t)}function Fse(e){if(Array.isArray(e))return e}function Use(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,o,u=[],c=!0,f=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(h){f=!0,i=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(f)throw i}}return u}}function EL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function kse(e,t){if(e){if(typeof e=="string")return EL(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?EL(e,t):void 0}}function zse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bo(e,t){return Fse(e)||Use(e,t)||kse(e,t)||zse()}function wm(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function D0(e,t){var r=pC([],t,e);return yK(r,r,1/r[3]),r}function Uf(e,t){if(!e)throw new Error(t||"viewport-mercator-project: assertion failed.")}var rs=Math.PI,b7=rs/4,fc=rs/180,bL=180/rs,NC=512,TL=4003e4,jse=1.5;function T7(e){return Math.pow(2,e)}function Nx(e,t){var r=bo(e,2),n=r[0],i=r[1];Uf(Number.isFinite(n)&&Number.isFinite(t)),Uf(Number.isFinite(i)&&i>=-90&&i<=90,"invalid latitude"),t*=NC;var a=n*fc,o=i*fc,u=t*(a+rs)/(2*rs),c=t*(rs-Math.log(Math.tan(b7+o*.5)))/(2*rs);return[u,c]}function SL(e,t){var r=bo(e,2),n=r[0],i=r[1];t*=NC;var a=n/t*(2*rs)-rs,o=2*(Math.atan(Math.exp(rs-i/t*(2*rs)))-b7);return[a*bL,o*bL]}function Vse(e){var t=e.latitude,r=e.longitude,n=e.zoom,i=e.scale,a=e.highPrecision,o=a===void 0?!1:a;i=i!==void 0?i:T7(n),Uf(Number.isFinite(t)&&Number.isFinite(r)&&Number.isFinite(i));var u={},c=NC*i,f=Math.cos(t*fc),h=c/360,p=h/f,m=c/TL/f;if(u.pixelsPerMeter=[m,-m,m],u.metersPerPixel=[1/m,-1/m,1/m],u.pixelsPerDegree=[h,-p,m],u.degreesPerPixel=[1/h,-1/p,1/m],o){var _=fc*Math.tan(t*fc)/f,y=h*_/2,E=c/TL*_,b=E/p*m;u.pixelsPerDegree2=[0,-y,E],u.pixelsPerMeter2=[b,0,b]}return u}function Hse(e){var t=e.height,r=e.pitch,n=e.bearing,i=e.altitude,a=e.center,o=a===void 0?null:a,u=wm();return sy(u,u,[0,0,-i]),uy(u,u,[1,1,1/t]),hC(u,u,-r*fc),X5(u,u,n*fc),uy(u,u,[1,-1,1]),o&&sy(u,u,vK([],o)),u}function Xse(e){var t=e.width,r=e.height,n=e.altitude,i=n===void 0?jse:n,a=e.pitch,o=a===void 0?0:a,u=e.nearZMultiplier,c=u===void 0?1:u,f=e.farZMultiplier,h=f===void 0?1:f,p=o*fc,m=Math.atan(.5/i),_=Math.sin(m)*i/Math.sin(Math.PI/2-p-m),y=Math.cos(Math.PI/2-p)*_+i;return{fov:2*Math.atan(r/2/i),aspect:t/r,focalDistance:i,near:c,far:y*h}}function Gse(e){var t=e.width,r=e.height,n=e.pitch,i=e.altitude,a=e.nearZMultiplier,o=e.farZMultiplier,u=Xse({width:t,height:r,altitude:i,pitch:n,nearZMultiplier:a,farZMultiplier:o}),c=u.fov,f=u.aspect,h=u.near,p=u.far,m=hK([],c,f,h,p);return m}function qse(e,t){var r=bo(e,3),n=r[0],i=r[1],a=r[2],o=a===void 0?0:a;return Uf(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(o)),D0(t,[n,i,o,1])}function S7(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=bo(e,3),i=n[0],a=n[1],o=n[2];if(Uf(Number.isFinite(i)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(o)){var u=D0(t,[i,a,o,1]);return u}var c=D0(t,[i,a,0,1]),f=D0(t,[i,a,1,1]),h=c[2],p=f[2],m=h===p?0:((r||0)-h)/(p-h);return TK([],c,f,m)}var AL=wm(),Wse=(function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width,n=t.height,i=t.viewMatrix,a=i===void 0?AL:i,o=t.projectionMatrix,u=o===void 0?AL:o;y7(this,e),this.width=r||1,this.height=n||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=a,this.projectionMatrix=u;var c=wm();Ih(c,c,this.projectionMatrix),Ih(c,c,this.viewMatrix),this.viewProjectionMatrix=c;var f=wm();uy(f,f,[this.width/2,-this.height/2,1]),sy(f,f,[1,-1,0]),Ih(f,f,this.viewProjectionMatrix);var h=V5(wm(),f);if(!h)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=h,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return E7(e,[{key:"equals",value:function(r){return r instanceof e?r.width===this.width&&r.height===this.height&&Q4(r.projectionMatrix,this.projectionMatrix)&&Q4(r.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.topLeft,a=i===void 0?!0:i,o=this.projectPosition(r),u=qse(o,this.pixelProjectionMatrix),c=bo(u,2),f=c[0],h=c[1],p=a?h:this.height-h;return r.length===2?[f,p]:[f,p,u[2]]}},{key:"unproject",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.topLeft,a=i===void 0?!0:i,o=n.targetZ,u=bo(r,3),c=u[0],f=u[1],h=u[2],p=a?f:this.height-f,m=o&&o*this.pixelsPerMeter,_=S7([c,p,h],this.pixelUnprojectionMatrix,m),y=this.unprojectPosition(_),E=bo(y,3),b=E[0],S=E[1],A=E[2];return Number.isFinite(h)?[b,S,A]:Number.isFinite(o)?[b,S,o]:[b,S]}},{key:"projectPosition",value:function(r){var n=this.projectFlat(r),i=bo(n,2),a=i[0],o=i[1],u=(r[2]||0)*this.pixelsPerMeter;return[a,o,u]}},{key:"unprojectPosition",value:function(r){var n=this.unprojectFlat(r),i=bo(n,2),a=i[0],o=i[1],u=(r[2]||0)/this.pixelsPerMeter;return[a,o,u]}},{key:"projectFlat",value:function(r){return arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale,r}},{key:"unprojectFlat",value:function(r){return arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale,r}}]),e})();function $se(e){var t=e.width,r=e.height,n=e.bounds,i=e.minExtent,a=i===void 0?0:i,o=e.maxZoom,u=o===void 0?24:o,c=e.padding,f=c===void 0?0:c,h=e.offset,p=h===void 0?[0,0]:h,m=bo(n,2),_=bo(m[0],2),y=_[0],E=_[1],b=bo(m[1],2),S=b[0],A=b[1];if(Number.isFinite(f)){var R=f;f={top:R,bottom:R,left:R,right:R}}else Uf(Number.isFinite(f.top)&&Number.isFinite(f.bottom)&&Number.isFinite(f.left)&&Number.isFinite(f.right));var M=new JR({width:t,height:r,longitude:0,latitude:0,zoom:0}),P=M.project([y,A]),I=M.project([S,E]),w=[Math.max(Math.abs(I[0]-P[0]),a),Math.max(Math.abs(I[1]-P[1]),a)],U=[t-f.left-f.right-Math.abs(p[0])*2,r-f.top-f.bottom-Math.abs(p[1])*2];Uf(U[0]>0&&U[1]>0);var re=U[0]/w[0],K=U[1]/w[1],H=(f.right-f.left)/2/re,x=(f.bottom-f.top)/2/K,N=[(I[0]+P[0])/2+H,(I[1]+P[1])/2+x],j=M.unproject(N),fe=M.zoom+Math.log2(Math.abs(Math.min(re,K)));return{longitude:j[0],latitude:j[1],zoom:Math.min(fe,u)}}var JR=(function(e){Bse(t,e);function t(){var r,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.width,a=n.height,o=n.latitude,u=o===void 0?0:o,c=n.longitude,f=c===void 0?0:c,h=n.zoom,p=h===void 0?0:h,m=n.pitch,_=m===void 0?0:m,y=n.bearing,E=y===void 0?0:y,b=n.altitude,S=b===void 0?1.5:b,A=n.nearZMultiplier,R=n.farZMultiplier;y7(this,t),i=i||1,a=a||1;var M=T7(p);S=Math.max(.75,S);var P=Nx([f,u],M);P[2]=0;var I=Gse({width:i,height:a,pitch:_,altitude:S,nearZMultiplier:A||1/a,farZMultiplier:R||1.01}),w=Hse({height:a,center:P,pitch:_,bearing:E,altitude:S});return r=Lse(this,KR(t).call(this,{width:i,height:a,viewMatrix:w,projectionMatrix:I})),r.latitude=u,r.longitude=f,r.zoom=p,r.pitch=_,r.bearing=E,r.altitude=S,r.scale=M,r.center=P,r.pixelsPerMeter=Vse(ym(ym(r))).pixelsPerMeter[2],Object.freeze(ym(ym(r))),r}return E7(t,[{key:"projectFlat",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Nx(n,i)}},{key:"unprojectFlat",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return SL(n,i)}},{key:"getMapCenterByLngLatPosition",value:function(n){var i=n.lngLat,a=n.pos,o=S7(a,this.pixelUnprojectionMatrix),u=Nx(i,this.scale),c=Ql([],u,bK([],o)),f=Ql([],this.center,c);return SL(f,this.scale)}},{key:"getLocationAtPoint",value:function(n){var i=n.lngLat,a=n.pos;return this.getMapCenterByLngLatPosition({lngLat:i,pos:a})}},{key:"fitBounds",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.width,o=this.height,u=$se(Object.assign({width:a,height:o,bounds:n},i)),c=u.longitude,f=u.latitude,h=u.zoom;return new t({width:a,height:o,longitude:c,latitude:f,zoom:h})}}]),t})(Wse);class Yse{constructor(){B(this,"viewport",new JR)}syncWithMapCamera(t){const{center:r,zoom:n,pitch:i,bearing:a,viewportHeight:o,viewportWidth:u}=t,c={width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing};this.viewport=new JR(Xe(Xe({},c),{},{width:u,height:o,longitude:r&&r[0],latitude:r&&r[1],zoom:n,pitch:i,bearing:a}))}getZoom(){return this.viewport.zoom}getZoomScale(){return Math.pow(2,this.getZoom())}getCenter(){return[this.viewport.longitude,this.viewport.latitude]}getProjectionMatrix(){return this.viewport.projectionMatrix}getModelMatrix(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}getViewMatrix(){return this.viewport.viewMatrix}getViewMatrixUncentered(){return this.viewport.viewMatrixUncentered}getViewProjectionMatrix(){return this.viewport.viewProjectionMatrix}getViewProjectionMatrixUncentered(){return this.viewport.viewProjectionMatrix}getFocalDistance(){return 1}projectFlat(t,r){return this.viewport.projectFlat(t,r)}}let Zse=(function(e){return e.GAODE="GAODE",e.MAPBOX="MAPBOX",e.DEFAULT="DEFAUlTMAP",e.SIMPLE="SIMPLE",e.GLOBEL="GLOBEL",e})({});function xL(e={}){const t={top:0,right:0,bottom:0,left:0};if(typeof e=="number")return{top:e,right:e,bottom:e,left:e};if(Array.isArray(e)){if(e.length===4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]}}return Xe(Xe({},t),e)}const Kse={normal:"amap://styles/normal",light:"amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",dark:"amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true",fresh:"amap://styles/fresh",grey:"amap://styles/grey",graffiti:"amap://styles/graffiti",macaron:"amap://styles/macaron",darkblue:"amap://styles/darkblue",wine:"amap://styles/wine"},Qse=["id","style","minZoom","maxZoom","token","mapInstance","plugin"];function Jse(e,t){var r=typeof my<"u"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,n=typeof wx<"u"&&wx!==null&&(typeof wx.request<"u"||typeof wx.miniProgram<"u");if(!(r||n)&&(t||(t=document),!!t)){var i=t.head||t.getElementsByTagName("head")[0];if(!i){i=t.createElement("head");var a=t.body||t.getElementsByTagName("body")[0];a?a.parentNode.insertBefore(i,a):t.documentElement.appendChild(i)}var o=t.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),i.appendChild(o),o}}Jse(`.amap-logo {
  display: none !important;
}

.amap-copyright {
  display: none !important;
}

.amap-overlays {
  z-index: 3 !important;
}
`);const eue="2.0",RL="f59bcf249433f8b05caaee19f349b3d7",_f=1;window.forceWebGL=!0;const CL={contextmenu:"rightclick",camerachange:"viewchange"};class tue extends Pse{constructor(...t){super(...t),B(this,"viewport",new Yse),B(this,"version",Zse.GAODE),B(this,"handleCameraChanged",()=>{const r=this.getViewState();this.updateView(r)})}getType(){return"amap"}init(){var t=this;return Je(function*(){const r=t.config,{id:n,style:i="light",minZoom:a=0,maxZoom:o=24,token:u=RL,mapInstance:c,plugin:f=[]}=r,h=qs(r,Qse);if(window.AMap||c||(f.push("Map3D"),yield wse.load({key:u,version:eue,plugins:f})),c)t.map=c,t.mapContainer=t.map.getContainer(),t.map.on("viewchange",t.handleCameraChanged);else{const p=Xe({mapStyle:t.getMapStyleValue(i),zooms:[a,o],viewMode:"3D"},h);if(p.zoom&&(p.zoom+=_f),u===RL&&(window._AMapSecurityConfig={securityJsCode:"2653011adeb04230b3a26cc9a780a800"},console.warn(`%c${t.configService.getSceneWarninfo("MapToken")}!`,"color: #873bf4;font-weigh:900;font-size: 16px;")),!n)throw Error("No container id specified");window.forceWebGL=!0,t.mapContainer=t.creatMapContainer(n);const m=new AMap.Map(t.mapContainer,p);t.map=m,m.on("viewchange",t.handleCameraChanged)}t.syncInitViewPort()})()}syncInitViewPort(){const t=this.getViewState();this.updateView(t)}getViewState(){const{center:t,zoom:r}=rue(this.map);return{center:t,viewportWidth:this.map.getContainer().clientWidth,viewportHeight:this.map.getContainer().clientHeight,bearing:-this.map.getRotation(),pitch:this.map.getPitch(),zoom:r-_f}}creatMapContainer(t){const r=super.creatMapContainer(t),n=document.createElement("div");return n.style.cssText+=`
       position: absolute;
       top: 0;
       height: 100%;
       width: 100%;
     `,n.id=Ln.uniqueId("l7_amap_div"),r.appendChild(n),n}getContainer(){return this.map.getContainer()}addMarkerContainer(){if(!this.map)return;const t=this.map.getContainer();if(t!==null){const r=t.getElementsByClassName("amap-maps")[0];r.style.zIndex="auto",this.markerContainer=ai("div","l7-marker-container2",r)}}getMarkerContainer(){return this.markerContainer}getCanvasOverlays(){var t;return(t=this.mapContainer)===null||t===void 0?void 0:t.querySelector(".amap-overlays")}on(t,r){H4.indexOf(t)!==-1?this.eventEmitter.on(t,r):this.map.on(CL[t]||t,r)}off(t,r){H4.indexOf(t)!==-1?this.eventEmitter.off(t,r):this.map.off(CL[t]||t,r)}getSize(){const t=this.map.getSize();return[t.getWidth(),t.getHeight()]}getMinZoom(){return this.map.getZooms()[0]-_f}getMaxZoom(){return this.map.getZooms()[1]-_f}getZoom(){return this.map.getZoom()-_f}getCenter(t){if(t!=null&&t.padding){const n=this.getCenter(),i=xL(t.padding),a=this.lngLatToPixel([n.lng,n.lat]),o=[(i.right-i.left)/2,(i.bottom-i.top)/2];return this.pixelToLngLat([a.x-o[0],a.y-o[1]])}const r=this.map.getCenter();return{lng:r.getLng(),lat:r.getLat()}}getPitch(){return this.map.getPitch()}getRotation(){return 360-this.map.getRotation()}getBounds(){const t=this.map.getBounds(),r=t.getNorthEast(),n=t.getSouthWest(),i=this.getCenter(),a=i.lng>r.getLng()||i.lng<n.getLng()?180-r.getLng():r.getLng();return[[i.lng<n.getLng()?n.getLng()-180:n.getLng(),n.getLat()],[a,r.getLat()]]}getMapContainer(){return this.mapContainer}getMapCanvasContainer(){var t;return(t=this.map.getContainer())===null||t===void 0?void 0:t.getElementsByClassName("amap-maps")[0]}getMapStyleConfig(){return Kse}getMapStyleValue(t){return this.getMapStyleConfig()[t]||t}getMapStyle(){return this.map.getMapStyle()}setMapStyle(t){this.map.setMapStyle(this.getMapStyleValue(t))}setRotation(t){return this.map.setRotation(t)}zoomIn(){this.map.zoomIn()}zoomOut(){this.map.zoomOut()}panTo(t){this.map.panTo(t)}panBy(t=0,r=0){this.map.panBy(t,r)}fitBounds(t){this.map.setBounds(new AMap.Bounds([t[0][0],t[0][1],t[1][0],t[1][1]]),!0)}setZoomAndCenter(t,r){this.map.setZoomAndCenter(t+_f,r)}setCenter(t,r){if(r!=null&&r.padding){const n=xL(r.padding),i=this.lngLatToPixel(t),a=[(n.right-n.left)/2,(n.bottom-n.top)/2],o=this.pixelToLngLat([i.x+a[0],i.y+a[1]]);this.map.setCenter([o.lng,o.lat])}else this.map.setCenter(t)}setPitch(t){return this.map.setPitch(t)}setZoom(t){return this.map.setZoom(t+_f)}setMaxZoom(t){throw new Error("Method not implemented.")}setMinZoom(t){throw new Error("Method not implemented.")}setMapStatus(t){this.map.setStatus(t)}meterToCoord(t,r){const n=AMap.GeometryUtil.distance(new AMap.LngLat(...t),new AMap.LngLat(...r)),[i,a]=zA(...t),[o,u]=zA(...r);return Math.sqrt(Math.pow(i-o,2)+Math.pow(a-u,2))/n}pixelToLngLat(t){const r=this.map.pixelToLngLat(new AMap.Pixel(t[0],t[1]));return{lng:r.getLng(),lat:r.getLat()}}lngLatToPixel(t){const r=this.map.lnglatToPixel(t);return{x:r.getX(),y:r.getY()}}containerToLngLat(t){const r=new AMap.Pixel(t[0],t[1]),n=this.map.containerToLngLat(r);return{lng:n?.getLng(),lat:n?.getLat()}}lngLatToContainer(t){const r=this.map.lngLatToContainer(t);return{x:r.getX(),y:r.getY()}}lngLatToMercator([t,r],n){const[i,a]=zA(t,r);return{x:i,y:a,z:n}}getModelMatrix(t,r,n,i=[1,1,1]){const a=this.viewport.projectFlat(t),o=dC();return sy(o,o,Qo(a[0],a[1],r)),uy(o,o,Qo(i[0],i[1],i[2])),hC(o,o,n[0]),H5(o,o,n[1]),X5(o,o,n[2]),o}exportMap(t){var r;const n=(r=this.getContainer())===null||r===void 0?void 0:r.getElementsByClassName("amap-layer")[0];return t==="jpg"?n?.toDataURL("image/jpeg"):n?.toDataURL("image/png")}destroy(){var t;super.destroy(),(t=this.mapContainer)===null||t===void 0||(t=t.parentNode)===null||t===void 0||t.removeChild(this.mapContainer),delete window.initAMap;const r=document.getElementById("amap-script");r&&document.head.removeChild(r),this.map.destroy()}}function rue(e){const t=e._view.getOptions(),r=t.center,n=t.zoom;return{center:r,zoom:n}}class nue extends Rse{getServiceConstructor(){return tue}}const iue=nue;function To(e){return e==null}var aue=function(e,t,r){return e<t?t:e>r?r:e};function Ah(e){return typeof e=="number"}var e2=function(e,t){return e2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},e2(e,t)};function Bn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e2(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var wn=function(){return wn=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},wn.apply(this,arguments)};function oue(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Ph(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function u(h){try{f(n.next(h))}catch(p){o(p)}}function c(h){try{f(n.throw(h))}catch(p){o(p)}}function f(h){h.done?a(h.value):i(h.value).then(u,c)}f((n=n.apply(e,t||[])).next())})}function Dh(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=u(0),o.throw=u(1),o.return=u(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(h){return c([f,h])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(r=0)),r;)try{if(n=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){r.label=f[1];break}if(f[0]===6&&r.label<a[1]){r.label=a[1],a=f;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(f);break}a[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(h){f=[6,h],i=0}finally{n=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function kf(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ko(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function Zv(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var Ix={exports:{}},OL;function sue(){return OL||(OL=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,f,h){this.fn=c,this.context=f,this.once=h||!1}function a(c,f,h,p,m){if(typeof h!="function")throw new TypeError("The listener must be a function");var _=new i(h,p||c,m),y=r?r+f:f;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],_]:c._events[y].push(_):(c._events[y]=_,c._eventsCount++),c}function o(c,f){--c._eventsCount===0?c._events=new n:delete c._events[f]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],h,p;if(this._eventsCount===0)return f;for(p in h=this._events)t.call(h,p)&&f.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},u.prototype.listeners=function(f){var h=r?r+f:f,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,_=p.length,y=new Array(_);m<_;m++)y[m]=p[m].fn;return y},u.prototype.listenerCount=function(f){var h=r?r+f:f,p=this._events[h];return p?p.fn?1:p.length:0},u.prototype.emit=function(f,h,p,m,_,y){var E=r?r+f:f;if(!this._events[E])return!1;var b=this._events[E],S=arguments.length,A,R;if(b.fn){switch(b.once&&this.removeListener(f,b.fn,void 0,!0),S){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,h),!0;case 3:return b.fn.call(b.context,h,p),!0;case 4:return b.fn.call(b.context,h,p,m),!0;case 5:return b.fn.call(b.context,h,p,m,_),!0;case 6:return b.fn.call(b.context,h,p,m,_,y),!0}for(R=1,A=new Array(S-1);R<S;R++)A[R-1]=arguments[R];b.fn.apply(b.context,A)}else{var M=b.length,P;for(R=0;R<M;R++)switch(b[R].once&&this.removeListener(f,b[R].fn,void 0,!0),S){case 1:b[R].fn.call(b[R].context);break;case 2:b[R].fn.call(b[R].context,h);break;case 3:b[R].fn.call(b[R].context,h,p);break;case 4:b[R].fn.call(b[R].context,h,p,m);break;default:if(!A)for(P=1,A=new Array(S-1);P<S;P++)A[P-1]=arguments[P];b[R].fn.apply(b[R].context,A)}}return!0},u.prototype.on=function(f,h,p){return a(this,f,h,p,!1)},u.prototype.once=function(f,h,p){return a(this,f,h,p,!0)},u.prototype.removeListener=function(f,h,p,m){var _=r?r+f:f;if(!this._events[_])return this;if(!h)return o(this,_),this;var y=this._events[_];if(y.fn)y.fn===h&&(!m||y.once)&&(!p||y.context===p)&&o(this,_);else{for(var E=0,b=[],S=y.length;E<S;E++)(y[E].fn!==h||m&&!y[E].once||p&&y[E].context!==p)&&b.push(y[E]);b.length?this._events[_]=b.length===1?b[0]:b:o(this,_)}return this},u.prototype.removeAllListeners=function(f){var h;return f?(h=r?r+f:f,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(Ix)),Ix.exports}var uue=sue();const A7=$r(uue);var te;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",e[e.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.CULL_FACE=2884]="CULL_FACE",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.BLEND=3042]="BLEND",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.DITHER=3024]="DITHER",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DOUBLE=5130]="DOUBLE",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.ALWAYS=519]="ALWAYS",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.GEQUAL=518]="GEQUAL",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",e[e.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.READ_BUFFER=3074]="READ_BUFFER",e[e.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",e[e.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",e[e.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",e[e.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",e[e.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",e[e.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",e[e.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",e[e.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",e[e.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",e[e.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",e[e.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",e[e.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",e[e.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",e[e.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",e[e.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",e[e.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",e[e.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",e[e.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",e[e.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",e[e.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",e[e.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",e[e.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",e[e.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",e[e.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",e[e.RED=6403]="RED",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB10_A2=32857]="RGB10_A2",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",e[e.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",e[e.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",e[e.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",e[e.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",e[e.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",e[e.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",e[e.SRGB=35904]="SRGB",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",e[e.RGBA32F=34836]="RGBA32F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.RGB16F=34843]="RGB16F",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R16F=33325]="R16F",e[e.R32F=33326]="R32F",e[e.RG16F=33327]="RG16F",e[e.RG32F=33328]="RG32F",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2UI=36975]="RGB10_A2UI",e[e.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",e[e.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.RG=33319]="RG",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",e[e.CURRENT_QUERY=34917]="CURRENT_QUERY",e[e.QUERY_RESULT=34918]="QUERY_RESULT",e[e.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",e[e.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",e[e.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",e[e.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",e[e.DRAW_BUFFER0=34853]="DRAW_BUFFER0",e[e.DRAW_BUFFER1=34854]="DRAW_BUFFER1",e[e.DRAW_BUFFER2=34855]="DRAW_BUFFER2",e[e.DRAW_BUFFER3=34856]="DRAW_BUFFER3",e[e.DRAW_BUFFER4=34857]="DRAW_BUFFER4",e[e.DRAW_BUFFER5=34858]="DRAW_BUFFER5",e[e.DRAW_BUFFER6=34859]="DRAW_BUFFER6",e[e.DRAW_BUFFER7=34860]="DRAW_BUFFER7",e[e.DRAW_BUFFER8=34861]="DRAW_BUFFER8",e[e.DRAW_BUFFER9=34862]="DRAW_BUFFER9",e[e.DRAW_BUFFER10=34863]="DRAW_BUFFER10",e[e.DRAW_BUFFER11=34864]="DRAW_BUFFER11",e[e.DRAW_BUFFER12=34865]="DRAW_BUFFER12",e[e.DRAW_BUFFER13=34866]="DRAW_BUFFER13",e[e.DRAW_BUFFER14=34867]="DRAW_BUFFER14",e[e.DRAW_BUFFER15=34868]="DRAW_BUFFER15",e[e.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",e[e.MAX_SAMPLES=36183]="MAX_SAMPLES",e[e.SAMPLER_BINDING=35097]="SAMPLER_BINDING",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",e[e.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",e[e.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",e[e.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",e[e.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",e[e.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",e[e.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",e[e.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",e[e.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",e[e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",e[e.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",e[e.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",e[e.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",e[e.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",e[e.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",e[e.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",e[e.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",e[e.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",e[e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",e[e.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",e[e.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",e[e.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",e[e.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",e[e.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",e[e.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",e[e.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",e[e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",e[e.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",e[e.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",e[e.UNIFORM_TYPE=35383]="UNIFORM_TYPE",e[e.UNIFORM_SIZE=35384]="UNIFORM_SIZE",e[e.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",e[e.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",e[e.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",e[e.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",e[e.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",e[e.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",e[e.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",e[e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",e[e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS",e[e.SYNC_FENCE=37142]="SYNC_FENCE",e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED",e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED",e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",e[e.COLOR=6144]="COLOR",e[e.DEPTH=6145]="DEPTH",e[e.STENCIL=6146]="STENCIL",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STREAM_COPY=35042]="STREAM_COPY",e[e.STATIC_READ=35045]="STATIC_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",e[e.INVALID_INDEX=4294967295]="INVALID_INDEX",e[e.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",e[e.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",e[e.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",e[e.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",e[e.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",e[e.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",e[e.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",e[e.RGBA32F_EXT=34836]="RGBA32F_EXT",e[e.RGB32F_EXT=34837]="RGB32F_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",e[e.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.SRGB_EXT=35904]="SRGB_EXT",e[e.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",e[e.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",e[e.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",e[e.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",e[e.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",e[e.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",e[e.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",e[e.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",e[e.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",e[e.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",e[e.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",e[e.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",e[e.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",e[e.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",e[e.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",e[e.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",e[e.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",e[e.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",e[e.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",e[e.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",e[e.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",e[e.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",e[e.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",e[e.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",e[e.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",e[e.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",e[e.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",e[e.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",e[e.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",e[e.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",e[e.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",e[e.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",e[e.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",e[e.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",e[e.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",e[e.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",e[e.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",e[e.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",e[e.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",e[e.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",e[e.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",e[e.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",e[e.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",e[e.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"})(te||(te={}));var Vr;(function(e){e[e.Buffer=0]="Buffer",e[e.Texture=1]="Texture",e[e.RenderTarget=2]="RenderTarget",e[e.Sampler=3]="Sampler",e[e.Program=4]="Program",e[e.Bindings=5]="Bindings",e[e.InputLayout=6]="InputLayout",e[e.RenderPipeline=7]="RenderPipeline",e[e.ComputePipeline=8]="ComputePipeline",e[e.Readback=9]="Readback",e[e.QueryPool=10]="QueryPool",e[e.RenderBundle=11]="RenderBundle"})(Vr||(Vr={}));var Wr;(function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"})(Wr||(Wr={}));var Km;(function(e){e[e.CCW=2305]="CCW",e[e.CW=2304]="CW"})(Km||(Km={}));var Ia;(function(e){e[e.NONE=0]="NONE",e[e.FRONT=1]="FRONT",e[e.BACK=2]="BACK",e[e.FRONT_AND_BACK=3]="FRONT_AND_BACK"})(Ia||(Ia={}));var xr;(function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC=768]="SRC",e[e.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",e[e.DST=774]="DST",e[e.ONE_MINUS_DST=775]="ONE_MINUS_DST",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.CONST=32769]="CONST",e[e.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(xr||(xr={}));var Si;(function(e){e[e.ADD=32774]="ADD",e[e.SUBSTRACT=32778]="SUBSTRACT",e[e.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX"})(Si||(Si={}));var ma;(function(e){e[e.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",e[e.REPEAT=1]="REPEAT",e[e.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"})(ma||(ma={}));var Xn;(function(e){e[e.POINT=0]="POINT",e[e.BILINEAR=1]="BILINEAR"})(Xn||(Xn={}));var hi;(function(e){e[e.NO_MIP=0]="NO_MIP",e[e.NEAREST=1]="NEAREST",e[e.LINEAR=2]="LINEAR"})(hi||(hi={}));var ei;(function(e){e[e.POINTS=0]="POINTS",e[e.TRIANGLES=1]="TRIANGLES",e[e.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",e[e.LINES=3]="LINES",e[e.LINE_STRIP=4]="LINE_STRIP"})(ei||(ei={}));var ln;(function(e){e[e.MAP_READ=1]="MAP_READ",e[e.MAP_WRITE=2]="MAP_WRITE",e[e.COPY_SRC=4]="COPY_SRC",e[e.COPY_DST=8]="COPY_DST",e[e.INDEX=16]="INDEX",e[e.VERTEX=32]="VERTEX",e[e.UNIFORM=64]="UNIFORM",e[e.STORAGE=128]="STORAGE",e[e.INDIRECT=256]="INDIRECT",e[e.QUERY_RESOLVE=512]="QUERY_RESOLVE"})(ln||(ln={}));var is;(function(e){e[e.STATIC=1]="STATIC",e[e.DYNAMIC=2]="DYNAMIC"})(is||(is={}));var zf;(function(e){e[e.VERTEX=1]="VERTEX",e[e.INSTANCE=2]="INSTANCE"})(zf||(zf={}));var ML;(function(e){e.LOADED="loaded"})(ML||(ML={}));var Rr;(function(e){e[e.TEXTURE_2D=0]="TEXTURE_2D",e[e.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",e[e.TEXTURE_3D=2]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"})(Rr||(Rr={}));var ta;(function(e){e[e.SAMPLED=1]="SAMPLED",e[e.RENDER_TARGET=2]="RENDER_TARGET",e[e.STORAGE=4]="STORAGE"})(ta||(ta={}));var bi;(function(e){e[e.NONE=0]="NONE",e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA",e[e.RGB=7]="RGB",e[e.ALL=15]="ALL"})(bi||(bi={}));var Pn;(function(e){e[e.KEEP=7680]="KEEP",e[e.ZERO=0]="ZERO",e[e.REPLACE=7681]="REPLACE",e[e.INVERT=5386]="INVERT",e[e.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",e[e.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",e[e.INCREMENT_WRAP=34055]="INCREMENT_WRAP",e[e.DECREMENT_WRAP=34056]="DECREMENT_WRAP"})(Pn||(Pn={}));var In;(function(e){e[e.Float=0]="Float",e[e.UnfilterableFloat=1]="UnfilterableFloat",e[e.Uint=2]="Uint",e[e.Sint=3]="Sint",e[e.Depth=4]="Depth"})(In||(In={}));var ns;(function(e){e[e.LOWER_LEFT=0]="LOWER_LEFT",e[e.UPPER_LEFT=1]="UPPER_LEFT"})(ns||(ns={}));var $h;(function(e){e[e.NEGATIVE_ONE=0]="NEGATIVE_ONE",e[e.ZERO=1]="ZERO"})($h||($h={}));var My;(function(e){e[e.OcclusionConservative=0]="OcclusionConservative"})(My||(My={}));var Ke;(function(e){e[e.U8=1]="U8",e[e.U16=2]="U16",e[e.U32=3]="U32",e[e.S8=4]="S8",e[e.S16=5]="S16",e[e.S32=6]="S32",e[e.F16=7]="F16",e[e.F32=8]="F32",e[e.BC1=65]="BC1",e[e.BC2=66]="BC2",e[e.BC3=67]="BC3",e[e.BC4_UNORM=68]="BC4_UNORM",e[e.BC4_SNORM=69]="BC4_SNORM",e[e.BC5_UNORM=70]="BC5_UNORM",e[e.BC5_SNORM=71]="BC5_SNORM",e[e.U16_PACKED_5551=97]="U16_PACKED_5551",e[e.U16_PACKED_565=98]="U16_PACKED_565",e[e.D24=129]="D24",e[e.D32F=130]="D32F",e[e.D24S8=131]="D24S8",e[e.D32FS8=132]="D32FS8"})(Ke||(Ke={}));var Bt;(function(e){e[e.R=1]="R",e[e.RG=2]="RG",e[e.RGB=3]="RGB",e[e.RGBA=4]="RGBA",e[e.A=5]="A"})(Bt||(Bt={}));var Ot;(function(e){e[e.None=0]="None",e[e.Normalized=1]="Normalized",e[e.sRGB=2]="sRGB",e[e.Depth=4]="Depth",e[e.Stencil=8]="Stencil",e[e.RenderTarget=16]="RenderTarget",e[e.Luminance=32]="Luminance"})(Ot||(Ot={}));function qt(e,t,r){return e<<16|t<<8|r}var ve;(function(e){e[e.ALPHA=qt(Ke.U8,Bt.A,Ot.None)]="ALPHA",e[e.U8_LUMINANCE=qt(Ke.U8,Bt.A,Ot.Luminance)]="U8_LUMINANCE",e[e.F16_LUMINANCE=qt(Ke.F16,Bt.A,Ot.Luminance)]="F16_LUMINANCE",e[e.F32_LUMINANCE=qt(Ke.F32,Bt.A,Ot.Luminance)]="F32_LUMINANCE",e[e.F16_R=qt(Ke.F16,Bt.R,Ot.None)]="F16_R",e[e.F16_RG=qt(Ke.F16,Bt.RG,Ot.None)]="F16_RG",e[e.F16_RGB=qt(Ke.F16,Bt.RGB,Ot.None)]="F16_RGB",e[e.F16_RGBA=qt(Ke.F16,Bt.RGBA,Ot.None)]="F16_RGBA",e[e.F32_R=qt(Ke.F32,Bt.R,Ot.None)]="F32_R",e[e.F32_RG=qt(Ke.F32,Bt.RG,Ot.None)]="F32_RG",e[e.F32_RGB=qt(Ke.F32,Bt.RGB,Ot.None)]="F32_RGB",e[e.F32_RGBA=qt(Ke.F32,Bt.RGBA,Ot.None)]="F32_RGBA",e[e.U8_R=qt(Ke.U8,Bt.R,Ot.None)]="U8_R",e[e.U8_R_NORM=qt(Ke.U8,Bt.R,Ot.Normalized)]="U8_R_NORM",e[e.U8_RG=qt(Ke.U8,Bt.RG,Ot.None)]="U8_RG",e[e.U8_RG_NORM=qt(Ke.U8,Bt.RG,Ot.Normalized)]="U8_RG_NORM",e[e.U8_RGB=qt(Ke.U8,Bt.RGB,Ot.None)]="U8_RGB",e[e.U8_RGB_NORM=qt(Ke.U8,Bt.RGB,Ot.Normalized)]="U8_RGB_NORM",e[e.U8_RGB_SRGB=qt(Ke.U8,Bt.RGB,Ot.sRGB|Ot.Normalized)]="U8_RGB_SRGB",e[e.U8_RGBA=qt(Ke.U8,Bt.RGBA,Ot.None)]="U8_RGBA",e[e.U8_RGBA_NORM=qt(Ke.U8,Bt.RGBA,Ot.Normalized)]="U8_RGBA_NORM",e[e.U8_RGBA_SRGB=qt(Ke.U8,Bt.RGBA,Ot.sRGB|Ot.Normalized)]="U8_RGBA_SRGB",e[e.U16_R=qt(Ke.U16,Bt.R,Ot.None)]="U16_R",e[e.U16_R_NORM=qt(Ke.U16,Bt.R,Ot.Normalized)]="U16_R_NORM",e[e.U16_RG_NORM=qt(Ke.U16,Bt.RG,Ot.Normalized)]="U16_RG_NORM",e[e.U16_RGBA_NORM=qt(Ke.U16,Bt.RGBA,Ot.Normalized)]="U16_RGBA_NORM",e[e.U16_RGBA=qt(Ke.U16,Bt.RGBA,Ot.None)]="U16_RGBA",e[e.U16_RGB=qt(Ke.U16,Bt.RGB,Ot.None)]="U16_RGB",e[e.U16_RG=qt(Ke.U16,Bt.RG,Ot.None)]="U16_RG",e[e.U32_R=qt(Ke.U32,Bt.R,Ot.None)]="U32_R",e[e.U32_RG=qt(Ke.U32,Bt.RG,Ot.None)]="U32_RG",e[e.U32_RGB=qt(Ke.U32,Bt.RGB,Ot.None)]="U32_RGB",e[e.U32_RGBA=qt(Ke.U32,Bt.RGBA,Ot.None)]="U32_RGBA",e[e.S8_R=qt(Ke.S8,Bt.R,Ot.None)]="S8_R",e[e.S8_R_NORM=qt(Ke.S8,Bt.R,Ot.Normalized)]="S8_R_NORM",e[e.S8_RG_NORM=qt(Ke.S8,Bt.RG,Ot.Normalized)]="S8_RG_NORM",e[e.S8_RGB_NORM=qt(Ke.S8,Bt.RGB,Ot.Normalized)]="S8_RGB_NORM",e[e.S8_RGBA_NORM=qt(Ke.S8,Bt.RGBA,Ot.Normalized)]="S8_RGBA_NORM",e[e.S16_R=qt(Ke.S16,Bt.R,Ot.None)]="S16_R",e[e.S16_RG=qt(Ke.S16,Bt.RG,Ot.None)]="S16_RG",e[e.S16_RG_NORM=qt(Ke.S16,Bt.RG,Ot.Normalized)]="S16_RG_NORM",e[e.S16_RGB_NORM=qt(Ke.S16,Bt.RGB,Ot.Normalized)]="S16_RGB_NORM",e[e.S16_RGBA=qt(Ke.S16,Bt.RGBA,Ot.None)]="S16_RGBA",e[e.S16_RGBA_NORM=qt(Ke.S16,Bt.RGBA,Ot.Normalized)]="S16_RGBA_NORM",e[e.S32_R=qt(Ke.S32,Bt.R,Ot.None)]="S32_R",e[e.S32_RG=qt(Ke.S32,Bt.RG,Ot.None)]="S32_RG",e[e.S32_RGB=qt(Ke.S32,Bt.RGB,Ot.None)]="S32_RGB",e[e.S32_RGBA=qt(Ke.S32,Bt.RGBA,Ot.None)]="S32_RGBA",e[e.U16_RGBA_5551=qt(Ke.U16_PACKED_5551,Bt.RGBA,Ot.Normalized)]="U16_RGBA_5551",e[e.U16_RGB_565=qt(Ke.U16_PACKED_565,Bt.RGB,Ot.Normalized)]="U16_RGB_565",e[e.BC1=qt(Ke.BC1,Bt.RGBA,Ot.Normalized)]="BC1",e[e.BC1_SRGB=qt(Ke.BC1,Bt.RGBA,Ot.Normalized|Ot.sRGB)]="BC1_SRGB",e[e.BC2=qt(Ke.BC2,Bt.RGBA,Ot.Normalized)]="BC2",e[e.BC2_SRGB=qt(Ke.BC2,Bt.RGBA,Ot.Normalized|Ot.sRGB)]="BC2_SRGB",e[e.BC3=qt(Ke.BC3,Bt.RGBA,Ot.Normalized)]="BC3",e[e.BC3_SRGB=qt(Ke.BC3,Bt.RGBA,Ot.Normalized|Ot.sRGB)]="BC3_SRGB",e[e.BC4_UNORM=qt(Ke.BC4_UNORM,Bt.R,Ot.Normalized)]="BC4_UNORM",e[e.BC4_SNORM=qt(Ke.BC4_SNORM,Bt.R,Ot.Normalized)]="BC4_SNORM",e[e.BC5_UNORM=qt(Ke.BC5_UNORM,Bt.RG,Ot.Normalized)]="BC5_UNORM",e[e.BC5_SNORM=qt(Ke.BC5_SNORM,Bt.RG,Ot.Normalized)]="BC5_SNORM",e[e.D24=qt(Ke.D24,Bt.R,Ot.Depth)]="D24",e[e.D24_S8=qt(Ke.D24S8,Bt.RG,Ot.Depth|Ot.Stencil)]="D24_S8",e[e.D32F=qt(Ke.D32F,Bt.R,Ot.Depth)]="D32F",e[e.D32F_S8=qt(Ke.D32FS8,Bt.RG,Ot.Depth|Ot.Stencil)]="D32F_S8",e[e.U8_RGB_RT=qt(Ke.U8,Bt.RGB,Ot.RenderTarget|Ot.Normalized)]="U8_RGB_RT",e[e.U8_RGBA_RT=qt(Ke.U8,Bt.RGBA,Ot.RenderTarget|Ot.Normalized)]="U8_RGBA_RT",e[e.U8_RGBA_RT_SRGB=qt(Ke.U8,Bt.RGBA,Ot.RenderTarget|Ot.Normalized|Ot.sRGB)]="U8_RGBA_RT_SRGB"})(ve||(ve={}));function IC(e){return e>>>8&255}function $s(e){return e>>>16&255}function Yh(e){return e&255}function x7(e){switch(e){case Ke.F32:case Ke.U32:case Ke.S32:return 4;case Ke.U16:case Ke.S16:case Ke.F16:return 2;case Ke.U8:case Ke.S8:return 1;default:throw new Error("whoops")}}function R7(e){return x7($s(e))}function lue(e){var t=x7($s(e)),r=IC(e);return t*r}function C7(e){var t=Yh(e);if(t&Ot.Depth)return In.Depth;if(t&Ot.Normalized)return In.Float;var r=$s(e);if(r===Ke.F16||r===Ke.F32)return In.Float;if(r===Ke.U8||r===Ke.U16||r===Ke.U32)return In.Uint;if(r===Ke.S8||r===Ke.S16||r===Ke.S32)return In.Sint;throw new Error("whoops")}function mr(e,t){if(t===void 0&&(t=""),!e)throw new Error("Assert fail: ".concat(t))}function Tf(e){if(e!=null)return e;throw new Error("Missing object")}function O7(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}function M7(e,t){e.r=t.r,e.g=t.g,e.b=t.b,e.a=t.a}function w7(e){var t=e.r,r=e.g,n=e.b,i=e.a;return{r:t,g:r,b:n,a:i}}function m_(e,t,r,n){return n===void 0&&(n=1),{r:e,g:t,b:r,a:n}}var xE=m_(0,0,0,0);m_(0,0,0,1);var cue=m_(1,1,1,0);m_(1,1,1,1);function wy(e){return!!(e&&(e&e-1)===0)}function Hl(e,t){return e??t}function fue(e){return e===void 0?null:e}function Ny(e,t){var r=t-1;return e+r&~r}function due(e,t){for(var r=new Array(e),n=0;n<e;n++)r[n]=t();return r}function hue(e,t){t===void 0&&(t=1);var r=e.split(`
`);return r.map(function(n,i){return"".concat(pue(""+(t+i),4," "),"  ").concat(n)}).join(`
`)}function pue(e,t,r){for(;e.length<t;)e="".concat(r).concat(e);return e}function wL(e,t){e.blendDstFactor=t.blendDstFactor,e.blendSrcFactor=t.blendSrcFactor,e.blendMode=t.blendMode}function Iy(e,t){return e===void 0&&(e={}),e.compare=t.compare,e.depthFailOp=t.depthFailOp,e.passOp=t.passOp,e.failOp=t.failOp,e.mask=t.mask,e}function N7(e,t){return e===void 0&&(e={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),wL(e.rgbBlendState,t.rgbBlendState),wL(e.alphaBlendState,t.alphaBlendState),e.channelWriteMask=t.channelWriteMask,e}function I7(e,t){e.length!==t.length&&(e.length=t.length);for(var r=0;r<t.length;r++)e[r]=N7(e[r],t[r])}function vue(e,t){t.attachmentsState!==void 0&&I7(e.attachmentsState,t.attachmentsState),e.blendConstant&&t.blendConstant&&M7(e.blendConstant,t.blendConstant),e.depthCompare=Hl(t.depthCompare,e.depthCompare),e.depthWrite=Hl(t.depthWrite,e.depthWrite),e.stencilWrite=Hl(t.stencilWrite,e.stencilWrite),e.stencilFront&&t.stencilFront&&Iy(e.stencilFront,t.stencilFront),e.stencilBack&&t.stencilBack&&Iy(e.stencilBack,t.stencilBack),e.cullMode=Hl(t.cullMode,e.cullMode),e.frontFace=Hl(t.frontFace,e.frontFace),e.polygonOffset=Hl(t.polygonOffset,e.polygonOffset),e.polygonOffsetFactor=Hl(t.polygonOffsetFactor,e.polygonOffsetFactor),e.polygonOffsetUnits=Hl(t.polygonOffsetUnits,e.polygonOffsetUnits)}function Zh(e){var t=Object.assign({},e);return t.attachmentsState=[],I7(t.attachmentsState,e.attachmentsState),t.blendConstant=t.blendConstant&&w7(t.blendConstant),t.stencilFront=Iy(void 0,e.stencilFront),t.stencilBack=Iy(void 0,e.stencilBack),t}var NL={blendMode:Si.ADD,blendSrcFactor:xr.ONE,blendDstFactor:xr.ZERO},Kh={attachmentsState:[{channelWriteMask:bi.ALL,rgbBlendState:NL,alphaBlendState:NL}],blendConstant:w7(xE),depthWrite:!0,depthCompare:Wr.LEQUAL,stencilWrite:!1,stencilFront:{compare:Wr.ALWAYS,passOp:Pn.KEEP,depthFailOp:Pn.KEEP,failOp:Pn.KEEP},stencilBack:{compare:Wr.ALWAYS,passOp:Pn.KEEP,depthFailOp:Pn.KEEP,failOp:Pn.KEEP},cullMode:Ia.NONE,frontFace:Km.CCW,polygonOffset:!1,polygonOffsetFactor:0,polygonOffsetUnits:0};function mue(e,t){e===void 0&&(e=null),t===void 0&&(t=Kh);var r=Zh(t);return e!==null&&vue(r,e),r}mue({depthCompare:Wr.ALWAYS,depthWrite:!1},Kh);var P7={texture:null,sampler:null,formatKind:In.Float,dimension:Rr.TEXTURE_2D};function ic(e,t,r){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}function xh(e,t){for(var r=Array(e.length),n=0;n<e.length;n++)r[n]=t(e[n]);return r}function _ue(e,t){return e.texture===t.texture&&e.binding===t.binding}function IL(e,t){return e.buffer===t.buffer&&e.size===t.size&&e.binding===t.binding&&e.offset===t.offset}function gue(e,t){return e===null?t===null:t===null?!1:e.sampler===t.sampler&&e.texture===t.texture&&e.dimension===t.dimension&&e.formatKind===t.formatKind&&e.comparison===t.comparison}function yue(e,t){return e.samplerBindings=e.samplerBindings||[],e.uniformBufferBindings=e.uniformBufferBindings||[],e.storageBufferBindings=e.storageBufferBindings||[],e.storageTextureBindings=e.storageTextureBindings||[],t.samplerBindings=t.samplerBindings||[],t.uniformBufferBindings=t.uniformBufferBindings||[],t.storageBufferBindings=t.storageBufferBindings||[],t.storageTextureBindings=t.storageTextureBindings||[],!(e.samplerBindings.length!==t.samplerBindings.length||!ic(e.samplerBindings,t.samplerBindings,gue)||!ic(e.uniformBufferBindings,t.uniformBufferBindings,IL)||!ic(e.storageBufferBindings,t.storageBufferBindings,IL)||!ic(e.storageTextureBindings,t.storageTextureBindings,_ue))}function PL(e,t){return e.blendMode==t.blendMode&&e.blendSrcFactor===t.blendSrcFactor&&e.blendDstFactor===t.blendDstFactor}function Eue(e,t){return!(!PL(e.rgbBlendState,t.rgbBlendState)||!PL(e.alphaBlendState,t.alphaBlendState)||e.channelWriteMask!==t.channelWriteMask)}function Py(e,t){return e.compare==t.compare&&e.depthFailOp===t.depthFailOp&&e.failOp===t.failOp&&e.passOp===t.passOp&&e.mask===t.mask}function bue(e,t){return!ic(e.attachmentsState,t.attachmentsState,Eue)||e.blendConstant&&t.blendConstant&&!O7(e.blendConstant,t.blendConstant)||e.stencilFront&&t.stencilFront&&!Py(e.stencilFront,t.stencilFront)||e.stencilBack&&t.stencilBack&&!Py(e.stencilBack,t.stencilBack)?!1:e.depthCompare===t.depthCompare&&e.depthWrite===t.depthWrite&&e.stencilWrite===t.stencilWrite&&e.cullMode===t.cullMode&&e.frontFace===t.frontFace&&e.polygonOffset===t.polygonOffset&&e.polygonOffsetFactor===t.polygonOffsetFactor&&e.polygonOffsetUnits===t.polygonOffsetUnits}function D7(e,t){return e.id===t.id}function Tue(e,t){return e===t}function Sue(e,t){return!(e.topology!==t.topology||e.inputLayout!==t.inputLayout||e.sampleCount!==t.sampleCount||e.megaStateDescriptor&&t.megaStateDescriptor&&!bue(e.megaStateDescriptor,t.megaStateDescriptor)||!D7(e.program,t.program)||!ic(e.colorAttachmentFormats,t.colorAttachmentFormats,Tue)||e.depthStencilAttachmentFormat!==t.depthStencilAttachmentFormat)}function Aue(e,t){return e.offset===t.offset&&e.shaderLocation===t.shaderLocation&&e.format===t.format&&e.divisor===t.divisor}function xue(e,t){return To(e)?To(t):To(t)?!1:e.arrayStride===t.arrayStride&&e.stepMode===t.stepMode&&ic(e.attributes,t.attributes,Aue)}function Rue(e,t){return!(e.indexBufferFormat!==t.indexBufferFormat||!ic(e.vertexBufferDescriptors,t.vertexBufferDescriptors,xue)||!D7(e.program,t.program))}function Cue(e){var t=e.sampler,r=e.texture,n=e.dimension,i=e.formatKind,a=e.comparison;return{sampler:t,texture:r,dimension:n,formatKind:i,comparison:a}}function DL(e){var t=e.buffer,r=e.size,n=e.binding,i=e.offset;return{binding:n,buffer:t,offset:i,size:r}}function Oue(e){var t=e.binding,r=e.texture;return{binding:t,texture:r}}function Mue(e){var t=e.samplerBindings&&xh(e.samplerBindings,Cue),r=e.uniformBufferBindings&&xh(e.uniformBufferBindings,DL),n=e.storageBufferBindings&&xh(e.storageBufferBindings,DL),i=e.storageTextureBindings&&xh(e.storageTextureBindings,Oue);return{samplerBindings:t,uniformBufferBindings:r,storageBufferBindings:n,storageTextureBindings:i,pipeline:e.pipeline}}function wue(e){var t=e.inputLayout,r=e.program,n=e.topology,i=e.megaStateDescriptor&&Zh(e.megaStateDescriptor),a=e.colorAttachmentFormats.slice(),o=e.depthStencilAttachmentFormat,u=e.sampleCount;return{inputLayout:t,megaStateDescriptor:i,program:r,topology:n,colorAttachmentFormats:a,depthStencilAttachmentFormat:o,sampleCount:u}}function Nue(e){var t=e.shaderLocation,r=e.format,n=e.offset,i=e.divisor;return{shaderLocation:t,format:r,offset:n,divisor:i}}function Iue(e){if(To(e))return e;var t=e.arrayStride,r=e.stepMode,n=xh(e.attributes,Nue);return{arrayStride:t,stepMode:r,attributes:n}}function Pue(e){var t=xh(e.vertexBufferDescriptors,Iue),r=e.indexBufferFormat,n=e.program;return{vertexBufferDescriptors:t,indexBufferFormat:r,program:n}}var Dr,Due=/([^[]*)(\[[0-9]+\])?/;function Lue(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};var t=e.match(Due);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:Number(t[2])||1,isArray:!!t[2]}}function ha(){var e=null;return function(t,r,n){var i=e!==n;return i&&(t.uniform1i(r,n),e=n),i}}function On(e,t,r,n){var i=null,a=null;return function(o,u,c){var f=t(c,r),h=f.length,p=!1;if(i===null)i=new Float32Array(h),a=h,p=!0;else{mr(a===h,"Uniform length cannot change.");for(var m=0;m<h;++m)if(f[m]!==i[m]){p=!0;break}}return p&&(n(o,e,u,f),i.set(f)),p}}function Ji(e,t,r,n){e[t](r,n)}function Mu(e,t,r,n){e[t](r,!1,n)}var Bue={},Fue={},Uue={},LL=[0];function PC(e,t,r,n){t===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(LL[0]=e,e=LL);var i=e.length;if(e instanceof r)return e;var a=n[i];a||(a=new r(i),n[i]=a);for(var o=0;o<i;o++)a[o]=e[o];return a}function qa(e,t){return PC(e,t,Float32Array,Bue)}function Xl(e,t){return PC(e,t,Int32Array,Fue)}function c0(e,t){return PC(e,t,Uint32Array,Uue)}var kue=(Dr={},Dr[te.FLOAT]=On.bind(null,"uniform1fv",qa,1,Ji),Dr[te.FLOAT_VEC2]=On.bind(null,"uniform2fv",qa,2,Ji),Dr[te.FLOAT_VEC3]=On.bind(null,"uniform3fv",qa,3,Ji),Dr[te.FLOAT_VEC4]=On.bind(null,"uniform4fv",qa,4,Ji),Dr[te.INT]=On.bind(null,"uniform1iv",Xl,1,Ji),Dr[te.INT_VEC2]=On.bind(null,"uniform2iv",Xl,2,Ji),Dr[te.INT_VEC3]=On.bind(null,"uniform3iv",Xl,3,Ji),Dr[te.INT_VEC4]=On.bind(null,"uniform4iv",Xl,4,Ji),Dr[te.BOOL]=On.bind(null,"uniform1iv",Xl,1,Ji),Dr[te.BOOL_VEC2]=On.bind(null,"uniform2iv",Xl,2,Ji),Dr[te.BOOL_VEC3]=On.bind(null,"uniform3iv",Xl,3,Ji),Dr[te.BOOL_VEC4]=On.bind(null,"uniform4iv",Xl,4,Ji),Dr[te.FLOAT_MAT2]=On.bind(null,"uniformMatrix2fv",qa,4,Mu),Dr[te.FLOAT_MAT3]=On.bind(null,"uniformMatrix3fv",qa,9,Mu),Dr[te.FLOAT_MAT4]=On.bind(null,"uniformMatrix4fv",qa,16,Mu),Dr[te.UNSIGNED_INT]=On.bind(null,"uniform1uiv",c0,1,Ji),Dr[te.UNSIGNED_INT_VEC2]=On.bind(null,"uniform2uiv",c0,2,Ji),Dr[te.UNSIGNED_INT_VEC3]=On.bind(null,"uniform3uiv",c0,3,Ji),Dr[te.UNSIGNED_INT_VEC4]=On.bind(null,"uniform4uiv",c0,4,Ji),Dr[te.FLOAT_MAT2x3]=On.bind(null,"uniformMatrix2x3fv",qa,6,Mu),Dr[te.FLOAT_MAT2x4]=On.bind(null,"uniformMatrix2x4fv",qa,8,Mu),Dr[te.FLOAT_MAT3x2]=On.bind(null,"uniformMatrix3x2fv",qa,6,Mu),Dr[te.FLOAT_MAT3x4]=On.bind(null,"uniformMatrix3x4fv",qa,12,Mu),Dr[te.FLOAT_MAT4x2]=On.bind(null,"uniformMatrix4x2fv",qa,8,Mu),Dr[te.FLOAT_MAT4x3]=On.bind(null,"uniformMatrix4x3fv",qa,12,Mu),Dr[te.SAMPLER_2D]=ha,Dr[te.SAMPLER_CUBE]=ha,Dr[te.SAMPLER_3D]=ha,Dr[te.SAMPLER_2D_SHADOW]=ha,Dr[te.SAMPLER_2D_ARRAY]=ha,Dr[te.SAMPLER_2D_ARRAY_SHADOW]=ha,Dr[te.SAMPLER_CUBE_SHADOW]=ha,Dr[te.INT_SAMPLER_2D]=ha,Dr[te.INT_SAMPLER_3D]=ha,Dr[te.INT_SAMPLER_CUBE]=ha,Dr[te.INT_SAMPLER_2D_ARRAY]=ha,Dr[te.UNSIGNED_INT_SAMPLER_2D]=ha,Dr[te.UNSIGNED_INT_SAMPLER_3D]=ha,Dr[te.UNSIGNED_INT_SAMPLER_CUBE]=ha,Dr[te.UNSIGNED_INT_SAMPLER_2D_ARRAY]=ha,Dr);function BL(e,t,r){var n=kue[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}var zue={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function jue(e){return Object.prototype.toString.call(e)in zue}function Kv(e,t){return"#define ".concat(e," ").concat(t)}function Vue(e){var t={};return e.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(r,n,i){var a=Number(i);return t[n]=isNaN(a)?i:a,""}),t}function Hue(e,t){var r=[];return e.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(n,i,a){var o=Number(i);return r.push({location:isNaN(o)?t[i]:o,name:a}),""}),r}function FL(e){if(e===void 0)return null;var t=/binding\s*=\s*(\d+)/.exec(e);if(t!==null){var r=parseInt(t[1],10);if(!Number.isNaN(r))return r}return null}function UL(e){var t="",r=e;return[r,t]}function Qh(e,t,r,n,i){var a;n===void 0&&(n=null),i===void 0&&(i=!0);var o=e.glslVersion==="#version 100",u=t==="frag"&&((a=r.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))===null||a===void 0?void 0:a.length)>1,c=r.replace(`\r
`,`
`).split(`
`).map(function(I){return I.replace(/[/][/].*$/,"")}).filter(function(I){var w=!I||/^\s+$/.test(I);return!w}),f="";n!==null&&(f=Object.keys(n).map(function(I){return Kv(I,n[I])}).join(`
`));var h=c.find(function(I){return I.startsWith("precision")})||"precision mediump float;",p=i?c.filter(function(I){return!I.startsWith("precision")}).join(`
`):c.join(`
`),m="";if(e.viewportOrigin===ns.UPPER_LEFT&&(m+="".concat(Kv("VIEWPORT_ORIGIN_TL","1"),`
`)),e.clipSpaceNearZ===$h.ZERO&&(m+="".concat(Kv("CLIPSPACE_NEAR_ZERO","1"),`
`)),e.explicitBindingLocations){var _=0,y=0,E=0;p=p.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(I,w,U,re){var K=U?"".concat(U,", "):"";return"layout(".concat(K,"set = ").concat(_,", binding = ").concat(y++,") uniform ").concat(re)}),_++,y=0,mr(e.separateSamplerTextures),p=p.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(I,w,U,re,K){var H=FL(U);H===null&&(H=y++);var x=Ko(UL(re),2),N=x[0],j=x[1];return t==="frag"?`
layout(set = `.concat(_,", binding = ").concat(H*2+0,") uniform texture").concat(N," T_").concat(K,`;
layout(set = `).concat(_,", binding = ").concat(H*2+1,") uniform sampler").concat(j," S_").concat(K,";").trim():""}),p=p.replace(t==="frag"?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(I,w){return"layout(location = ".concat(E++,") ").concat(w)}),m+="".concat(Kv("gl_VertexID","gl_VertexIndex"),`
`),m+="".concat(Kv("gl_InstanceID","gl_InstanceIndex"),`
`),h=h.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var b=0;p=p.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(I,w,U,re,K){var H=FL(U);return H===null&&(H=b++),"uniform sampler".concat(re," ").concat(K,"; // BINDING=").concat(H)})}if(p=p.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g,function(I,w,U){return"SAMPLER_".concat(w,"(P_").concat(U,")")}),p=p.replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g,function(I,w,U){return"PP_SAMPLER_".concat(w,"(P_").concat(U,")")}),p=p.replace(/\bPU_TEXTURE\((.*?)\)/g,function(I,w){return"TEXTURE(P_".concat(w,")")}),e.separateSamplerTextures)p=p.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(I,w,U){var re=Ko(UL(w),2),K=re[0],H=re[1];return"texture".concat(K," T_P_").concat(U,", sampler").concat(H," S_P_").concat(U)}),p=p.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(I,w,U){return"T_".concat(U,", S_").concat(U)}),p=p.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(I,w,U){return"sampler".concat(w,"(T_").concat(U,", S_").concat(U,")")}),p=p.replace(/\bTEXTURE\((.*?)\)/g,function(I,w){return"T_".concat(w)});else{var S=[];p=p.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(I,w,U){return"sampler".concat(w," P_").concat(U)}),p=p.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(I,w,U){return U}),p=p.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(I,w,U){return S.push([U,w]),U}),o&&S.forEach(function(I){var w=Ko(I,2),U=w[0],re=w[1];p=p.replace(new RegExp("texture\\(".concat(U),"g"),function(){return"texture".concat(re,"(").concat(U)})}),p=p.replace(/\bTEXTURE\((.*?)\)/g,function(I,w){return w})}var A="".concat(o?"":e.glslVersion,`
`).concat(o&&u?`#extension GL_EXT_draw_buffers : require
`:"",`
`).concat(o&&t==="frag"?`#extension GL_OES_standard_derivatives : enable
`:"").concat(i?h:"",`
`).concat(m||"").concat(f?f+`
`:"",`
`).concat(p,`
`).trim();if(e.explicitBindingLocations&&t==="frag"&&(A=A.replace(/^\b(out)\b/g,function(I,w){return"layout(location = 0) ".concat(w)})),o){if(t==="frag"&&(A=A.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(I,w,U){return"varying ".concat(w," ").concat(U,`;
`)})),t==="vert"&&(A=A.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(I,w,U){return"varying ".concat(w," ").concat(U,`;
`)}),A=A.replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(I,w,U){return"attribute ".concat(w," ").concat(U,`;
`)})),A=A.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(I,w){return w.trim().replace(/^.*$/gm,function(U){var re=U.trim();return re.startsWith("#")?re:U?"uniform ".concat(re):""})}),t==="frag")if(u){var R=[];A=A.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(I,w){return R.push(w),"vec4 ".concat(w,`;
`)});var M=A.lastIndexOf("}");A=A.substring(0,M)+`
    `.concat(R.map(function(I,w){return"gl_FragData[".concat(w,"] = ").concat(I,`;
    `)}).join(`
`))+A.substring(M)}else{var P;if(A=A.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(I,w,U){return P=U,"".concat(w," ").concat(U,`;
`)}),P){var M=A.lastIndexOf("}");A=A.substring(0,M)+`
  gl_FragColor = vec4(`.concat(P,`);
`)+A.substring(M)}}A=A.replace(/^\s*layout\((.*)\)/gm,"")}return A}var Ro=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=e.call(this)||this;return a.id=n,a.device=i,a.device.resourceCreationTracker!==null&&a.device.resourceCreationTracker.trackResourceCreated(a),a}return t.prototype.destroy=function(){this.device.resourceCreationTracker!==null&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},t})(A7),Xue=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;o.type=Vr.Bindings;var u=a.uniformBufferBindings,c=a.samplerBindings;return o.uniformBufferBindings=u||[],o.samplerBindings=c||[],o.bindingLayouts=o.createBindingLayouts(),o}return t.prototype.createBindingLayouts=function(){var r=0,n=0,i=[],a=this.uniformBufferBindings.length,o=this.samplerBindings.length;return i.push({firstUniformBuffer:r,numUniformBuffers:a,firstSampler:n,numSamplers:o}),r+=a,n+=o,{numUniformBuffers:r,numSamplers:n,bindingLayoutTables:i}},t})(Ro),Qv;function zt(e){return Qv!==void 0?Qv:typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?(Qv=!0,!0):(Qv=!!(e&&e._version===2),Qv)}function L7(e){var t=$s(e);switch(t){case Ke.BC1:case Ke.BC2:case Ke.BC3:case Ke.BC4_UNORM:case Ke.BC4_SNORM:case Ke.BC5_UNORM:case Ke.BC5_SNORM:return!0;default:return!1}}function B7(e){var t=Yh(e);if(t&Ot.Normalized)return!1;var r=$s(e);return r===Ke.S8||r===Ke.S16||r===Ke.S32||r===Ke.U8||r===Ke.U16||r===Ke.U32}function Gue(e){switch(e){case is.STATIC:return te.STATIC_DRAW;case is.DYNAMIC:return te.DYNAMIC_DRAW}}function kL(e){if(e&ln.INDEX)return te.ELEMENT_ARRAY_BUFFER;if(e&ln.VERTEX)return te.ARRAY_BUFFER;if(e&ln.UNIFORM)return te.UNIFORM_BUFFER}function que(e){switch(e){case ei.TRIANGLES:return te.TRIANGLES;case ei.POINTS:return te.POINTS;case ei.TRIANGLE_STRIP:return te.TRIANGLE_STRIP;case ei.LINES:return te.LINES;case ei.LINE_STRIP:return te.LINE_STRIP;default:throw new Error("Unknown primitive topology mode")}}function Wue(e){switch(e){case Ke.U8:return te.UNSIGNED_BYTE;case Ke.U16:return te.UNSIGNED_SHORT;case Ke.U32:return te.UNSIGNED_INT;case Ke.S8:return te.BYTE;case Ke.S16:return te.SHORT;case Ke.S32:return te.INT;case Ke.F16:return te.HALF_FLOAT;case Ke.F32:return te.FLOAT;default:throw new Error("whoops")}}function $ue(e){switch(e){case Bt.R:return 1;case Bt.RG:return 2;case Bt.RGB:return 3;case Bt.RGBA:return 4;default:return 1}}function Yue(e){var t=$s(e),r=IC(e),n=Yh(e),i=Wue(t),a=$ue(r),o=!!(n&Ot.Normalized);return{size:a,type:i,normalized:o}}function Zue(e){switch(e){case ve.U8_R:return te.UNSIGNED_BYTE;case ve.U16_R:return te.UNSIGNED_SHORT;case ve.U32_R:return te.UNSIGNED_INT;default:throw new Error("whoops")}}function Jv(e){switch(e){case ma.CLAMP_TO_EDGE:return te.CLAMP_TO_EDGE;case ma.REPEAT:return te.REPEAT;case ma.MIRRORED_REPEAT:return te.MIRRORED_REPEAT;default:throw new Error("whoops")}}function f0(e,t){if(t===hi.LINEAR&&e===Xn.BILINEAR)return te.LINEAR_MIPMAP_LINEAR;if(t===hi.LINEAR&&e===Xn.POINT)return te.NEAREST_MIPMAP_LINEAR;if(t===hi.NEAREST&&e===Xn.BILINEAR)return te.LINEAR_MIPMAP_NEAREST;if(t===hi.NEAREST&&e===Xn.POINT)return te.NEAREST_MIPMAP_NEAREST;if(t===hi.NO_MIP&&e===Xn.BILINEAR)return te.LINEAR;if(t===hi.NO_MIP&&e===Xn.POINT)return te.NEAREST;throw new Error("Unknown texture filter mode")}function Lh(e,t){t===void 0&&(t=0);var r=e;return r.gl_buffer_pages[t/r.pageByteSize|0]}function bh(e){var t=e;return t.gl_texture}function t2(e){var t=e;return t.gl_sampler}function em(e,t){e.name=t,e.__SPECTOR_Metadata={name:t}}function zL(e,t){for(var r=[];;){var n=t.exec(e);if(!n)break;r.push(n)}return r}function Gl(e){return e.blendMode==Si.ADD&&e.blendSrcFactor==xr.ONE&&e.blendDstFactor===xr.ZERO}function Kue(e){switch(e){case My.OcclusionConservative:return te.ANY_SAMPLES_PASSED_CONSERVATIVE;default:throw new Error("whoops")}}function Que(e){if(e===Rr.TEXTURE_2D)return te.TEXTURE_2D;if(e===Rr.TEXTURE_2D_ARRAY)return te.TEXTURE_2D_ARRAY;if(e===Rr.TEXTURE_CUBE_MAP)return te.TEXTURE_CUBE_MAP;if(e===Rr.TEXTURE_3D)return te.TEXTURE_3D;throw new Error("whoops")}function Px(e,t,r,n){return!(e%r!==0||t%n!==0)}var Jue=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;o.type=Vr.Buffer;var u=a.viewOrSize,c=a.usage,f=a.hint,h=f===void 0?is.STATIC:f,p=i.uniformBufferMaxPageByteSize,m=i.gl,_=c&ln.UNIFORM;_||(zt(m)?m.bindVertexArray(null):i.OES_vertex_array_object.bindVertexArrayOES(null));var y=Ah(u)?Ny(u,4):Ny(u.byteLength,4);o.gl_buffer_pages=[];var E;if(_){for(var b=y;b>0;)o.gl_buffer_pages.push(o.createBufferPage(Math.min(b,p),c,h)),b-=p;E=p}else o.gl_buffer_pages.push(o.createBufferPage(y,c,h)),E=y;return o.pageByteSize=E,o.byteSize=y,o.usage=c,o.gl_target=kL(c),Ah(u)||o.setSubData(0,new Uint8Array(u.buffer)),_||(zt(m)?m.bindVertexArray(o.device.currentBoundVAO):i.OES_vertex_array_object.bindVertexArrayOES(o.device.currentBoundVAO)),o}return t.prototype.setSubData=function(r,n,i,a){i===void 0&&(i=0),a===void 0&&(a=n.byteLength-i);for(var o=this.device.gl,u=this.pageByteSize,c=r+a,f=r,h=r%u;f<c;){var p=zt(o)?o.COPY_WRITE_BUFFER:this.gl_target,m=Lh(this,f);if(m.ubo)return;o.bindBuffer(p,m),zt(o)?o.bufferSubData(p,h,n,i,Math.min(c-f,u)):o.bufferSubData(p,h,n),f+=u,h=0,i+=u,this.device.debugGroupStatisticsBufferUpload()}},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var r=0;r<this.gl_buffer_pages.length;r++)this.gl_buffer_pages[r].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[r]);this.gl_buffer_pages=[]},t.prototype.createBufferPage=function(r,n,i){var a=this.device.gl,o=n&ln.UNIFORM;if(!zt(a)&&o)return{ubo:!0};var u=this.device.ensureResourceExists(a.createBuffer()),c=kL(n),f=Gue(i);return a.bindBuffer(c,u),a.bufferData(c,r,f),u},t})(Ro),ele=(function(e){Bn(t,e);function t(r){var n,i,a,o,u=r.id,c=r.device,f=r.descriptor,h,p=e.call(this,{id:u,device:c})||this;p.type=Vr.InputLayout;var m=f.vertexBufferDescriptors,_=f.indexBufferFormat,y=f.program;mr(_===ve.U16_R||_===ve.U32_R||_===null);var E=_!==null?Zue(_):null,b=_!==null?R7(_):null,S=p.device.gl,A=p.device.ensureResourceExists(zt(S)?S.createVertexArray():c.OES_vertex_array_object.createVertexArrayOES());zt(S)?S.bindVertexArray(A):c.OES_vertex_array_object.bindVertexArrayOES(A),S.bindBuffer(S.ARRAY_BUFFER,Lh(p.device.fallbackVertexBuffer));try{for(var R=kf(f.vertexBufferDescriptors),M=R.next();!M.done;M=R.next()){var P=M.value,I=P.stepMode,w=P.attributes;try{for(var U=(a=void 0,kf(w)),re=U.next();!re.done;re=U.next()){var K=re.value,H=K.shaderLocation,x=K.format,N=K.divisor,j=N===void 0?1:N,fe=zt(S)?H:(h=y.attributes[H])===null||h===void 0?void 0:h.location,O=Yue(x);if(K.vertexFormat=O,!To(fe)){B7(x);var k=O.size,V=O.type,ee=O.normalized;S.vertexAttribPointer(fe,k,V,ee,0,0),I===zf.INSTANCE&&(zt(S)?S.vertexAttribDivisor(fe,j):c.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(fe,j)),S.enableVertexAttribArray(fe)}}}catch(oe){a={error:oe}}finally{try{re&&!re.done&&(o=U.return)&&o.call(U)}finally{if(a)throw a.error}}}}catch(oe){n={error:oe}}finally{try{M&&!M.done&&(i=R.return)&&i.call(R)}finally{if(n)throw n.error}}return zt(S)?S.bindVertexArray(null):c.OES_vertex_array_object.bindVertexArrayOES(null),p.vertexBufferDescriptors=m,p.vao=A,p.indexBufferFormat=_,p.indexBufferType=E,p.indexBufferCompByteSize=b,p.program=y,p}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(zt(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},t})(Ro),r2=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=r.fake,u=e.call(this,{id:n,device:i})||this;u.type=Vr.Texture,a=wn({dimension:Rr.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},a);var c=u.device.gl,f,h,p=u.clampmipLevelCount(a);if(u.immutable=a.usage===ta.RENDER_TARGET,u.pixelStore=a.pixelStore,u.format=a.format,u.dimension=a.dimension,u.formatKind=C7(a.format),u.width=a.width,u.height=a.height,u.depthOrArrayLayers=a.depthOrArrayLayers,u.mipmaps=p>=1,!o){h=u.device.ensureResourceExists(c.createTexture());var m=u.device.translateTextureType(a.format),_=u.device.translateTextureInternalFormat(a.format);if(u.device.setActiveTexture(c.TEXTURE0),u.device.currentTextures[0]=null,u.preprocessImage(),a.dimension===Rr.TEXTURE_2D){if(f=te.TEXTURE_2D,c.bindTexture(f,h),u.immutable)if(zt(c))c.texStorage2D(f,p,_,a.width,a.height);else{var y=(_===te.DEPTH_COMPONENT||u.isNPOT(),0);(u.format===ve.D32F||u.format===ve.D24_S8)&&!zt(c)&&!i.WEBGL_depth_texture||(c.texImage2D(f,y,_,a.width,a.height,0,_,m,null),u.mipmaps&&(u.mipmaps=!1,c.texParameteri(te.TEXTURE_2D,te.TEXTURE_MIN_FILTER,te.LINEAR),c.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_S,te.CLAMP_TO_EDGE),c.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_T,te.CLAMP_TO_EDGE)))}mr(a.depthOrArrayLayers===1)}else if(a.dimension===Rr.TEXTURE_2D_ARRAY)f=te.TEXTURE_2D_ARRAY,c.bindTexture(f,h),u.immutable&&zt(c)&&c.texStorage3D(f,p,_,a.width,a.height,a.depthOrArrayLayers);else if(a.dimension===Rr.TEXTURE_3D)f=te.TEXTURE_3D,c.bindTexture(f,h),u.immutable&&zt(c)&&c.texStorage3D(f,p,_,a.width,a.height,a.depthOrArrayLayers);else if(a.dimension===Rr.TEXTURE_CUBE_MAP)f=te.TEXTURE_CUBE_MAP,c.bindTexture(f,h),u.immutable&&zt(c)&&c.texStorage2D(f,p,_,a.width,a.height),mr(a.depthOrArrayLayers===6);else throw new Error("whoops")}return u.gl_texture=h,u.gl_target=f,u.mipLevelCount=p,u}return t.prototype.setImageData=function(r,n){n===void 0&&(n=0);var i=this.device.gl;L7(this.format);var a=this.gl_target===te.TEXTURE_3D||this.gl_target===te.TEXTURE_2D_ARRAY,o=this.gl_target===te.TEXTURE_CUBE_MAP,u=jue(r[0]);this.device.setActiveTexture(i.TEXTURE0),this.device.currentTextures[0]=null;var c=r[0],f,h;u?(f=this.width,h=this.height):(f=c.width,h=c.height,this.width=f,this.height=h),i.bindTexture(this.gl_target,this.gl_texture);var p=this.device.translateTextureFormat(this.format),m=zt(i)?this.device.translateInternalTextureFormat(this.format):p,_=this.device.translateTextureType(this.format);this.preprocessImage();for(var y=0;y<this.depthOrArrayLayers;y++){var E=r[y],b=this.gl_target;o&&(b=te.TEXTURE_CUBE_MAP_POSITIVE_X+y%6),this.immutable?i.texSubImage2D(b,n,0,0,f,h,p,_,E):zt(i)?a?i.texImage3D(b,n,m,f,h,this.depthOrArrayLayers,0,p,_,E):i.texImage2D(b,n,m,f,h,0,p,_,E):u?i.texImage2D(b,n,p,f,h,0,p,_,E):i.texImage2D(b,n,p,p,_,E)}this.mipmaps&&this.generateMipmap(a)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteTexture(bh(this))},t.prototype.clampmipLevelCount=function(r){if(r.dimension===Rr.TEXTURE_2D_ARRAY&&r.depthOrArrayLayers>1){var n=$s(r.format);if(n===Ke.BC1)for(var i=r.width,a=r.height,o=0;o<r.mipLevelCount;o++){if(i<=2||a<=2)return o-1;i=Math.max(i/2|0,1),a=Math.max(a/2|0,1)}}return r.mipLevelCount},t.prototype.preprocessImage=function(){var r=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&r.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&r.pixelStorei(te.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&r.pixelStorei(te.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},t.prototype.generateMipmap=function(r){r===void 0&&(r=!1);var n=this.device.gl;return!zt(n)&&this.isNPOT()?this:(this.gl_texture&&this.gl_target&&(n.bindTexture(this.gl_target,this.gl_texture),r?(n.texParameteri(this.gl_target,te.TEXTURE_BASE_LEVEL,0),n.texParameteri(this.gl_target,te.TEXTURE_MAX_LEVEL,Math.log2(this.width)),n.texParameteri(this.gl_target,te.TEXTURE_MIN_FILTER,te.LINEAR_MIPMAP_LINEAR),n.texParameteri(this.gl_target,te.TEXTURE_MAG_FILTER,te.LINEAR)):n.texParameteri(te.TEXTURE_2D,te.TEXTURE_MIN_FILTER,te.NEAREST_MIPMAP_LINEAR),n.generateMipmap(this.gl_target),n.bindTexture(this.gl_target,null)),this)},t.prototype.isNPOT=function(){var r=this.device.gl;return zt(r)?!1:!wy(this.width)||!wy(this.height)},t})(Ro),tle=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;o.type=Vr.RenderTarget,o.gl_renderbuffer=null,o.texture=null;var u=o.device.gl,c=a.format,f=a.width,h=a.height,p=a.sampleCount,m=p===void 0?1:p,_=a.texture,y=!1;if((c===ve.D32F||c===ve.D24_S8)&&_&&!zt(u)&&!i.WEBGL_depth_texture&&(_.destroy(),o.texture=null,y=!0),!y&&_)o.texture=_;else{o.gl_renderbuffer=o.device.ensureResourceExists(u.createRenderbuffer()),u.bindRenderbuffer(u.RENDERBUFFER,o.gl_renderbuffer);var E=o.device.translateTextureInternalFormat(c,!0);zt(u)&&m>1?u.renderbufferStorageMultisample(te.RENDERBUFFER,m,E,f,h):u.renderbufferStorage(te.RENDERBUFFER,E,f,h)}return o.format=c,o.width=f,o.height=h,o.sampleCount=m,o}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gl_renderbuffer!==null&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},t})(Ro),Ma;(function(e){e[e.NeedsCompile=0]="NeedsCompile",e[e.Compiling=1]="Compiling",e[e.NeedsBind=2]="NeedsBind",e[e.ReadyToUse=3]="ReadyToUse"})(Ma||(Ma={}));var rle=(function(e){Bn(t,e);function t(r,n){var i=r.id,a=r.device,o=r.descriptor,u=e.call(this,{id:i,device:a})||this;u.rawVertexGLSL=n,u.type=Vr.Program,u.uniformSetters={},u.attributes=[];var c=u.device.gl;return u.descriptor=o,u.gl_program=u.device.ensureResourceExists(c.createProgram()),u.gl_shader_vert=null,u.gl_shader_frag=null,u.compileState=Ma.NeedsCompile,u.tryCompileProgram(),u}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},t.prototype.tryCompileProgram=function(){mr(this.compileState===Ma.NeedsCompile);var r=this.descriptor,n=r.vertex,i=r.fragment,a=this.device.gl;n?.glsl&&i?.glsl&&(this.gl_shader_vert=this.compileShader(n.postprocess?n.postprocess(n.glsl):n.glsl,a.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(i.postprocess?i.postprocess(i.glsl):i.glsl,a.FRAGMENT_SHADER),a.attachShader(this.gl_program,this.gl_shader_vert),a.attachShader(this.gl_program,this.gl_shader_frag),a.linkProgram(this.gl_program),this.compileState=Ma.Compiling,zt(a)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},t.prototype.readAttributesFromLinkedProgram=function(){for(var r,n=this.device.gl,i=n.getProgramParameter(this.gl_program,n.ACTIVE_ATTRIBUTES),a=Vue(this.descriptor.vertex.glsl),o=Hue(this.rawVertexGLSL,a),u=function(h){var p=n.getActiveAttrib(c.gl_program,h),m=p.name,_=p.type,y=p.size,E=n.getAttribLocation(c.gl_program,m),b=(r=o.find(function(S){return S.name===m}))===null||r===void 0?void 0:r.location;E>=0&&!To(b)&&(c.attributes[b]={name:m,location:E,type:_,size:y})},c=this,f=0;f<i;f++)u(f)},t.prototype.readUniformLocationsFromLinkedProgram=function(){for(var r=this.device.gl,n=r.getProgramParameter(this.gl_program,r.ACTIVE_UNIFORMS),i=0;i<n;i++){var a=r.getActiveUniform(this.gl_program,i),o=Lue(a.name).name,u=r.getUniformLocation(this.gl_program,o);if(this.uniformSetters[o]=BL(r,u,a),a&&a.size>1)for(var c=0;c<a.size;c++)u=r.getUniformLocation(this.gl_program,"".concat(o,"[").concat(c,"]")),this.uniformSetters["".concat(o,"[").concat(c,"]")]=BL(r,u,a)}},t.prototype.compileShader=function(r,n){var i=this.device.gl,a=this.device.ensureResourceExists(i.createShader(n));return i.shaderSource(a,r),i.compileShader(a),a},t.prototype.setUniformsLegacy=function(r){r===void 0&&(r={});var n=this.device.gl;if(!zt(n)){var i=!1;for(var a in r){i||(n.useProgram(this.gl_program),i=!0);var o=r[a],u=this.uniformSetters[a];if(u){var c=o;c instanceof r2&&(c=c.textureIndex),u(c)}}}return this},t})(Ro),nle=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;o.type=Vr.QueryPool;var u=o.device.gl;if(zt(u)){var c=a.elemCount,f=a.type;o.gl_query=due(c,function(){return o.device.ensureResourceExists(u.createQuery())}),o.gl_query_type=Kue(f)}return o}return t.prototype.queryResultOcclusion=function(r){var n=this.device.gl;if(zt(n)){var i=this.gl_query[r];return n.getQueryParameter(i,n.QUERY_RESULT_AVAILABLE)?!!n.getQueryParameter(i,n.QUERY_RESULT):null}return null},t.prototype.destroy=function(){e.prototype.destroy.call(this);var r=this.device.gl;if(zt(r))for(var n=0;n<this.gl_query.length;n++)r.deleteQuery(this.gl_query[n])},t})(Ro),ile=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=e.call(this,{id:n,device:i})||this;return a.type=Vr.Readback,a.gl_pbo=null,a.gl_sync=null,a}return t.prototype.clientWaitAsync=function(r,n,i){n===void 0&&(n=0),i===void 0&&(i=10);var a=this.device.gl;return new Promise(function(o,u){function c(){var f=a.clientWaitSync(r,n,0);if(f==a.WAIT_FAILED){u();return}if(f==a.TIMEOUT_EXPIRED){setTimeout(c,aue(i,0,a.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}o()}c()})},t.prototype.getBufferSubDataAsync=function(r,n,i,a,o,u){return Ph(this,void 0,void 0,function(){var c;return Dh(this,function(f){switch(f.label){case 0:return c=this.device.gl,zt(c)?(this.gl_sync=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0),c.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)]):[3,2];case 1:return f.sent(),c.bindBuffer(r,n),c.getBufferSubData(r,i,a,o,u),c.bindBuffer(r,null),[2,a];case 2:return[2]}})})},t.prototype.readTexture=function(r,n,i,a,o,u,c,f){return c===void 0&&(c=0),f===void 0&&(f=u.byteLength||0),Ph(this,void 0,void 0,function(){var h,p,m,_,y;return Dh(this,function(E){return h=this.device.gl,p=r,m=this.device.translateTextureFormat(p.format),_=this.device.translateTextureType(p.format),y=lue(p.format),zt(h)?(this.gl_pbo=this.device.ensureResourceExists(h.createBuffer()),h.bindBuffer(h.PIXEL_PACK_BUFFER,this.gl_pbo),h.bufferData(h.PIXEL_PACK_BUFFER,f,h.STREAM_READ),h.bindBuffer(h.PIXEL_PACK_BUFFER,null),h.bindFramebuffer(te.READ_FRAMEBUFFER,this.device.readbackFramebuffer),h.framebufferTexture2D(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,p.gl_texture,0),h.bindBuffer(h.PIXEL_PACK_BUFFER,this.gl_pbo),h.readPixels(n,i,a,o,m,_,c*y),h.bindBuffer(h.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(h.PIXEL_PACK_BUFFER,this.gl_pbo,0,u,c,0)]):[2,this.readTextureSync(r,n,i,a,o,u,c,f)]})})},t.prototype.readTextureSync=function(r,n,i,a,o,u,c,f){f===void 0&&(f=u.byteLength||0);var h=this.device.gl,p=r,m=this.device.translateTextureType(p.format);return h.bindFramebuffer(te.FRAMEBUFFER,this.device.readbackFramebuffer),h.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,p.gl_texture,0),h.pixelStorei(h.PACK_ALIGNMENT,4),h.readPixels(n,i,a,o,h.RGBA,m,u),u},t.prototype.readBuffer=function(r,n,i,a,o){return Ph(this,void 0,void 0,function(){var u;return Dh(this,function(c){return u=this.device.gl,zt(u)?[2,this.getBufferSubDataAsync(u.ARRAY_BUFFER,Lh(r,n),n,i,a,o)]:[2,Promise.reject()]})})},t.prototype.destroy=function(){e.prototype.destroy.call(this),zt(this.device.gl)&&(this.gl_sync!==null&&this.device.gl.deleteSync(this.gl_sync),this.gl_pbo!==null&&this.device.gl.deleteBuffer(this.gl_pbo))},t})(Ro),ale=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o,u,c=e.call(this,{id:n,device:i})||this;return c.type=Vr.RenderPipeline,c.drawMode=que((o=a.topology)!==null&&o!==void 0?o:ei.TRIANGLES),c.program=a.program,c.inputLayout=a.inputLayout,c.megaState=wn(wn({},Zh(Kh)),a.megaStateDescriptor),c.colorAttachmentFormats=a.colorAttachmentFormats.slice(),c.depthStencilAttachmentFormat=a.depthStencilAttachmentFormat,c.sampleCount=(u=a.sampleCount)!==null&&u!==void 0?u:1,c}return t})(Ro),ole=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;return o.type=Vr.ComputePipeline,o.descriptor=a,o}return t})(Ro),sle=(function(){function e(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return e.prototype.trackResourceCreated=function(t){this.creationStacks.set(t,new Error().stack),this.liveObjects.add(t)},e.prototype.trackResourceDestroyed=function(t){this.deletionStacks.has(t)&&console.warn("Object double freed:",t,`

Creation stack: `,this.creationStacks.get(t),`

Deletion stack: `,this.deletionStacks.get(t),`

This stack: `,new Error().stack),this.deletionStacks.set(t,new Error().stack),this.liveObjects.delete(t)},e.prototype.checkForLeaks=function(){var t,r;try{for(var n=kf(this.liveObjects.values()),i=n.next();!i.done;i=n.next()){var a=i.value;console.warn("Object leaked:",a,"Creation stack:",this.creationStacks.get(a))}}catch(o){t={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.setResourceLeakCheck=function(t,r){r?this.liveObjects.add(t):this.liveObjects.delete(t)},e})(),ule=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o,u,c=e.call(this,{id:n,device:i})||this;c.type=Vr.Sampler;var f=c.device.gl;if(zt(f)){var h=c.device.ensureResourceExists(f.createSampler());f.samplerParameteri(h,te.TEXTURE_WRAP_S,Jv(a.addressModeU)),f.samplerParameteri(h,te.TEXTURE_WRAP_T,Jv(a.addressModeV)),f.samplerParameteri(h,te.TEXTURE_WRAP_R,Jv((o=a.addressModeW)!==null&&o!==void 0?o:a.addressModeU)),f.samplerParameteri(h,te.TEXTURE_MIN_FILTER,f0(a.minFilter,a.mipmapFilter)),f.samplerParameteri(h,te.TEXTURE_MAG_FILTER,f0(a.magFilter,hi.NO_MIP)),a.lodMinClamp!==void 0&&f.samplerParameterf(h,te.TEXTURE_MIN_LOD,a.lodMinClamp),a.lodMaxClamp!==void 0&&f.samplerParameterf(h,te.TEXTURE_MAX_LOD,a.lodMaxClamp),a.compareFunction!==void 0&&(f.samplerParameteri(h,f.TEXTURE_COMPARE_MODE,f.COMPARE_REF_TO_TEXTURE),f.samplerParameteri(h,f.TEXTURE_COMPARE_FUNC,a.compareFunction));var p=(u=a.maxAnisotropy)!==null&&u!==void 0?u:1;p>1&&c.device.EXT_texture_filter_anisotropic!==null&&(mr(a.minFilter===Xn.BILINEAR&&a.magFilter===Xn.BILINEAR&&a.mipmapFilter===hi.LINEAR),f.samplerParameterf(h,c.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,p)),c.gl_sampler=h}else c.descriptor=a;return c}return t.prototype.setTextureParameters=function(r,n,i){var a,o=this.device.gl,u=this.descriptor;this.isNPOT(n,i)?o.texParameteri(te.TEXTURE_2D,te.TEXTURE_MIN_FILTER,te.LINEAR):o.texParameteri(r,te.TEXTURE_MIN_FILTER,f0(u.minFilter,u.mipmapFilter)),o.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_S,Jv(u.addressModeU)),o.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_T,Jv(u.addressModeV)),o.texParameteri(r,te.TEXTURE_MAG_FILTER,f0(u.magFilter,hi.NO_MIP));var c=(a=u.maxAnisotropy)!==null&&a!==void 0?a:1;c>1&&this.device.EXT_texture_filter_anisotropic!==null&&(mr(u.minFilter===Xn.BILINEAR&&u.magFilter===Xn.BILINEAR&&u.mipmapFilter===hi.LINEAR),o.texParameteri(r,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,c))},t.prototype.destroy=function(){e.prototype.destroy.call(this),zt(this.device.gl)&&this.device.gl.deleteSampler(t2(this))},t.prototype.isNPOT=function(r,n){return!wy(r)||!wy(n)},t})(Ro),lle=(function(){function e(){}return e.prototype.dispatchWorkgroups=function(t,r,n){},e.prototype.dispatchWorkgroupsIndirect=function(t,r){},e.prototype.setPipeline=function(t){},e.prototype.setBindings=function(t){},e.prototype.pushDebugGroup=function(t){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(t){},e})(),cle=(function(e){Bn(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=Vr.RenderBundle,r.commands=[],r}return t.prototype.push=function(r){this.commands.push(r)},t.prototype.replay=function(){this.commands.forEach(function(r){return r()})},t})(Ro),jL=65536,fle=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,dle=(function(){function e(t,r){r===void 0&&(r={}),this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=Zh(Kh),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=ns.LOWER_LEFT,this.clipSpaceNearZ=$h.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=t,this.contextAttributes=Tf(t.getContextAttributes()),zt(t)?(this.EXT_texture_norm16=t.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=t.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=t.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=t.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=t.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=t.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=t.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=t.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=t.getExtension("EXT_color_buffer_half_float"),t.getExtension("EXT_frag_depth"),t.getExtension("OES_element_index_uint"),t.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=t.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=t.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=t.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=t.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=t.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=t.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=t.getExtension("KHR_parallel_shader_compile"),zt(t)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new r2({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:Rr.TEXTURE_2D,mipLevelCount:1,usage:ta.RENDER_TARGET,format:this.contextAttributes.alpha===!1?ve.U8_RGB_RT:ve.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=In.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(Rr.TEXTURE_2D,In.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(Rr.TEXTURE_2D,In.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:ln.VERTEX,hint:is.STATIC}),zt(t)&&(this.fallbackTexture2DArray=this.createFallbackTexture(Rr.TEXTURE_2D_ARRAY,In.Float),this.fallbackTexture3D=this.createFallbackTexture(Rr.TEXTURE_3D,In.Float),this.fallbackTextureCube=this.createFallbackTexture(Rr.TEXTURE_CUBE_MAP,In.Float)),this.currentMegaState.depthCompare=Wr.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=bi.ALL,t.enable(t.DEPTH_TEST),t.enable(t.STENCIL_TEST),this.checkLimits(),r.shaderDebug&&(this.shaderDebug=!0),r.trackResources&&(this.resourceCreationTracker=new sle)}return e.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},e.prototype.createFallbackTexture=function(t,r){var n=t===Rr.TEXTURE_CUBE_MAP?6:1,i=r===In.Depth?ve.D32F:ve.U8_RGBA_NORM,a=this.createTexture({dimension:t,format:i,usage:ta.SAMPLED,width:1,height:1,depthOrArrayLayers:n,mipLevelCount:1});return r===In.Float&&a.setImageData([new Uint8Array(4*n)]),bh(a)},e.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},e.prototype.checkLimits=function(){var t=this.gl;if(this.maxVertexAttribs=t.getParameter(te.MAX_VERTEX_ATTRIBS),zt(t)){this.uniformBufferMaxPageByteSize=Math.min(t.getParameter(te.MAX_UNIFORM_BLOCK_SIZE),jL),this.uniformBufferWordAlignment=t.getParameter(t.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var r=t.getInternalformatParameter(t.RENDERBUFFER,t.DEPTH32F_STENCIL8,t.SAMPLES);this.supportedSampleCounts=r?Zv([],Ko(r),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=jL;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(n,i){return n-i})},e.prototype.configureSwapChain=function(t,r,n){var i=this.scTexture;i.width=t,i.height=r,this.scPlatformFramebuffer=fue(n)},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.gl.canvas},e.prototype.getOnscreenTexture=function(){return this.scTexture},e.prototype.beginFrame=function(){},e.prototype.endFrame=function(){},e.prototype.translateTextureInternalFormat=function(t,r){switch(r===void 0&&(r=!1),t){case ve.ALPHA:return te.ALPHA;case ve.U8_LUMINANCE:case ve.F16_LUMINANCE:case ve.F32_LUMINANCE:return te.LUMINANCE;case ve.F16_R:return te.R16F;case ve.F16_RG:return te.RG16F;case ve.F16_RGB:return te.RGB16F;case ve.F16_RGBA:return te.RGBA16F;case ve.F32_R:return te.R32F;case ve.F32_RG:return te.RG32F;case ve.F32_RGB:return te.RGB32F;case ve.F32_RGBA:return zt(this.gl)?te.RGBA32F:r?this.WEBGL_color_buffer_float.RGBA32F_EXT:te.RGBA;case ve.U8_R_NORM:return te.R8;case ve.U8_RG_NORM:return te.RG8;case ve.U8_RGB_NORM:case ve.U8_RGB_RT:return te.RGB8;case ve.U8_RGB_SRGB:return te.SRGB8;case ve.U8_RGBA_NORM:case ve.U8_RGBA_RT:return zt(this.gl)?te.RGBA8:r?te.RGBA4:te.RGBA;case ve.U8_RGBA:return te.RGBA;case ve.U8_RGBA_SRGB:case ve.U8_RGBA_RT_SRGB:return te.SRGB8_ALPHA8;case ve.U16_R:return te.R16UI;case ve.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case ve.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case ve.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case ve.U16_RGBA_5551:return te.RGB5_A1;case ve.U16_RGB_565:return te.RGB565;case ve.U32_R:return te.R32UI;case ve.S8_RGBA_NORM:return te.RGBA8_SNORM;case ve.S8_RG_NORM:return te.RG8_SNORM;case ve.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case ve.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case ve.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case ve.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case ve.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case ve.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case ve.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case ve.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case ve.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case ve.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case ve.D32F_S8:return zt(this.gl)?te.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?te.DEPTH_STENCIL:te.DEPTH_COMPONENT16;case ve.D24_S8:return zt(this.gl)?te.DEPTH24_STENCIL8:this.WEBGL_depth_texture?te.DEPTH_STENCIL:te.DEPTH_COMPONENT16;case ve.D32F:return zt(this.gl)?te.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?te.DEPTH_COMPONENT:te.DEPTH_COMPONENT16;case ve.D24:return zt(this.gl)?te.DEPTH_COMPONENT24:this.WEBGL_depth_texture?te.DEPTH_COMPONENT:te.DEPTH_COMPONENT16;default:throw new Error("whoops")}},e.prototype.translateTextureType=function(t){var r=$s(t);switch(r){case Ke.U8:return te.UNSIGNED_BYTE;case Ke.U16:return te.UNSIGNED_SHORT;case Ke.U32:return te.UNSIGNED_INT;case Ke.S8:return te.BYTE;case Ke.F16:return te.HALF_FLOAT;case Ke.F32:return te.FLOAT;case Ke.U16_PACKED_5551:return te.UNSIGNED_SHORT_5_5_5_1;case Ke.D32F:return zt(this.gl)?te.FLOAT:this.WEBGL_depth_texture?te.UNSIGNED_INT:te.UNSIGNED_BYTE;case Ke.D24:return zt(this.gl)?te.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?te.UNSIGNED_SHORT:te.UNSIGNED_BYTE;case Ke.D24S8:return zt(this.gl)?te.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?te.UNSIGNED_INT_24_8_WEBGL:te.UNSIGNED_BYTE;case Ke.D32FS8:return te.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw new Error("whoops")}},e.prototype.translateInternalTextureFormat=function(t){switch(t){case ve.F32_R:return te.R32F;case ve.F32_RG:return te.RG32F;case ve.F32_RGB:return te.RGB32F;case ve.F32_RGBA:return te.RGBA32F;case ve.F16_R:return te.R16F;case ve.F16_RG:return te.RG16F;case ve.F16_RGB:return te.RGB16F;case ve.F16_RGBA:return te.RGBA16F}return this.translateTextureFormat(t)},e.prototype.translateTextureFormat=function(t){if(L7(t)||t===ve.F32_LUMINANCE||t===ve.U8_LUMINANCE)return this.translateTextureInternalFormat(t);var r=zt(this.gl)||!zt(this.gl)&&!!this.WEBGL_depth_texture;switch(t){case ve.D24_S8:case ve.D32F_S8:return r?te.DEPTH_STENCIL:te.RGBA;case ve.D24:case ve.D32F:return r?te.DEPTH_COMPONENT:te.RGBA}var n=B7(t),i=IC(t);switch(i){case Bt.A:return te.ALPHA;case Bt.R:return n?te.RED_INTEGER:te.RED;case Bt.RG:return n?te.RG_INTEGER:te.RG;case Bt.RGB:return n?te.RGB_INTEGER:te.RGB;case Bt.RGBA:return te.RGBA}},e.prototype.setActiveTexture=function(t){this.currentActiveTexture!==t&&(this.gl.activeTexture(t),this.currentActiveTexture=t)},e.prototype.bindVAO=function(t){this.currentBoundVAO!==t&&(zt(this.gl)?this.gl.bindVertexArray(t):this.OES_vertex_array_object.bindVertexArrayOES(t),this.currentBoundVAO=t)},e.prototype.programCompiled=function(t){mr(t.compileState!==Ma.NeedsCompile),t.compileState===Ma.Compiling&&(t.compileState=Ma.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(t))},e.prototype.useProgram=function(t){this.currentProgram!==t&&(this.programCompiled(t),this.gl.useProgram(t.gl_program),this.currentProgram=t)},e.prototype.ensureResourceExists=function(t){if(t===null){var r=this.gl.getError();throw new Error("Created resource is null; GL error encountered: ".concat(r))}else return t},e.prototype.createBuffer=function(t){return new Jue({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createTexture=function(t){return new r2({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createSampler=function(t){return new ule({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createRenderTarget=function(t){return new tle({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createRenderTargetFromTexture=function(t){var r=t,n=r.format,i=r.width,a=r.height,o=r.mipLevelCount;return mr(o===1),this.createRenderTarget({format:n,width:i,height:a,sampleCount:1,texture:t})},e.prototype.createProgram=function(t){var r,n,i,a=(r=t.vertex)===null||r===void 0?void 0:r.glsl;return!((n=t.vertex)===null||n===void 0)&&n.glsl&&(t.vertex.glsl=Qh(this.queryVendorInfo(),"vert",t.vertex.glsl)),!((i=t.fragment)===null||i===void 0)&&i.glsl&&(t.fragment.glsl=Qh(this.queryVendorInfo(),"frag",t.fragment.glsl)),this.createProgramSimple(t,a)},e.prototype.createProgramSimple=function(t,r){var n=new rle({id:this.getNextUniqueId(),device:this,descriptor:t},r);return n},e.prototype.createBindings=function(t){return new Xue({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createInputLayout=function(t){return new ele({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createRenderPipeline=function(t){return new ale({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createComputePass=function(){return new lle},e.prototype.createComputePipeline=function(t){return new ole({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createReadback=function(){return new ile({id:this.getNextUniqueId(),device:this})},e.prototype.createQueryPool=function(t,r){return new nle({id:this.getNextUniqueId(),device:this,descriptor:{type:t,elemCount:r}})},e.prototype.formatRenderPassDescriptor=function(t){var r,n,i,a,o,u,c=t.colorAttachment;t.depthClearValue=(r=t.depthClearValue)!==null&&r!==void 0?r:"load",t.stencilClearValue=(n=t.stencilClearValue)!==null&&n!==void 0?n:"load";for(var f=0;f<c.length;f++)t.colorAttachmentLevel||(t.colorAttachmentLevel=[]),t.colorAttachmentLevel[f]=(i=t.colorAttachmentLevel[f])!==null&&i!==void 0?i:0,t.colorResolveToLevel||(t.colorResolveToLevel=[]),t.colorResolveToLevel[f]=(a=t.colorResolveToLevel[f])!==null&&a!==void 0?a:0,t.colorClearColor||(t.colorClearColor=[]),t.colorClearColor[f]=(o=t.colorClearColor[f])!==null&&o!==void 0?o:"load",t.colorStore||(t.colorStore=[]),t.colorStore[f]=(u=t.colorStore[f])!==null&&u!==void 0?u:!1},e.prototype.createRenderBundle=function(){return new cle({id:this.getNextUniqueId(),device:this})},e.prototype.beginBundle=function(t){this.renderBundle=t},e.prototype.endBundle=function(){this.renderBundle=void 0},e.prototype.executeBundles=function(t){t.forEach(function(r){r.replay()})},e.prototype.createRenderPass=function(t){this.currentRenderPassDescriptor!==null&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=t,this.formatRenderPassDescriptor(t);var r=t.colorAttachment,n=t.colorAttachmentLevel,i=t.colorClearColor,a=t.colorResolveTo,o=t.colorResolveToLevel,u=t.depthStencilAttachment,c=t.depthClearValue,f=t.stencilClearValue,h=t.depthStencilResolveTo,p=a&&a.length===1&&a[0]===this.scTexture;this.setRenderPassParametersBegin(r.length,p);for(var m=0;m<r.length;m++)this.setRenderPassParametersColor(m,r[m],n[m],a[m],o[m],p);this.setRenderPassParametersDepthStencil(u,h,p),this.validateCurrentAttachments();for(var m=0;m<r.length;m++){var _=i[m];_!=="load"&&this.setRenderPassParametersClearColor(m,_.r,_.g,_.b,_.a)}return this.setRenderPassParametersClearDepthStencil(c,f),this},e.prototype.submitPass=function(t){mr(this.currentRenderPassDescriptor!==null),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},e.prototype.copySubTexture2D=function(t,r,n,i,a,o){var u=this.gl,c=t,f=i;if(mr(f.mipLevelCount===1),mr(c.mipLevelCount===1),zt(u))c===this.scTexture?u.bindFramebuffer(u.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(u.bindFramebuffer(u.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(u.DRAW_FRAMEBUFFER,u.COLOR_ATTACHMENT0,c,0)),u.bindFramebuffer(u.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(u.READ_FRAMEBUFFER,u.COLOR_ATTACHMENT0,f,0),u.blitFramebuffer(a,o,a+f.width,o+f.height,r,n,r+f.width,n+f.height,u.COLOR_BUFFER_BIT,u.LINEAR),u.bindFramebuffer(u.READ_FRAMEBUFFER,null),u.bindFramebuffer(u.DRAW_FRAMEBUFFER,null);else if(c===this.scTexture){var h=this.createRenderTargetFromTexture(i);this.submitBlitRenderPass(h,c)}},e.prototype.queryLimits=function(){return this},e.prototype.queryTextureFormatSupported=function(t,r,n){switch(t){case ve.BC1_SRGB:case ve.BC2_SRGB:case ve.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb!==null?Px(r,n,4,4):!1;case ve.BC1:case ve.BC2:case ve.BC3:return this.WEBGL_compressed_texture_s3tc!==null?Px(r,n,4,4):!1;case ve.BC4_UNORM:case ve.BC4_SNORM:case ve.BC5_UNORM:case ve.BC5_SNORM:return this.EXT_texture_compression_rgtc!==null?Px(r,n,4,4):!1;case ve.U16_R_NORM:case ve.U16_RG_NORM:case ve.U16_RGBA_NORM:return this.EXT_texture_norm16!==null;case ve.F32_R:case ve.F32_RG:case ve.F32_RGB:case ve.F32_RGBA:return this.OES_texture_float_linear!==null;case ve.F16_R:case ve.F16_RG:case ve.F16_RGB:case ve.F16_RGBA:return this.OES_texture_half_float_linear!==null;default:return!0}},e.prototype.queryProgramReady=function(t){var r=this.gl;if(t.compileState===Ma.NeedsCompile)throw new Error("whoops");if(t.compileState===Ma.Compiling){var n=void 0;return this.KHR_parallel_shader_compile!==null?n=r.getProgramParameter(t.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR):n=!0,n&&this.programCompiled(t),n}return t.compileState===Ma.NeedsBind||t.compileState===Ma.ReadyToUse},e.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(t){return this.currentRenderPassDescriptor},e.prototype.queryRenderTarget=function(t){var r=t;return r},e.prototype.setResourceName=function(t,r){if(t.name=r,t.type===Vr.Buffer)for(var n=t.gl_buffer_pages,i=0;i<n.length;i++)em(n[i],"".concat(r," Page ").concat(i));else if(t.type===Vr.Texture)em(bh(t),r);else if(t.type===Vr.Sampler)em(t2(t),r);else if(t.type===Vr.RenderTarget){var a=t.gl_renderbuffer;a!==null&&em(a,r)}else t.type===Vr.InputLayout&&em(t.vao,r)},e.prototype.setResourceLeakCheck=function(t,r){this.resourceCreationTracker!==null&&this.resourceCreationTracker.setResourceLeakCheck(t,r)},e.prototype.checkForLeaks=function(){this.resourceCreationTracker!==null&&this.resourceCreationTracker.checkForLeaks()},e.prototype.pushDebugGroup=function(t){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(t){},e.prototype.programPatched=function(t,r){mr(this.shaderDebug)},e.prototype.getBufferData=function(t,r,n){n===void 0&&(n=0);var i=this.gl;zt(i)&&(i.bindBuffer(i.COPY_READ_BUFFER,Lh(t,n*4)),i.getBufferSubData(i.COPY_READ_BUFFER,n*4,r))},e.prototype.debugGroupStatisticsDrawCall=function(t){t===void 0&&(t=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].drawCallCount+=t},e.prototype.debugGroupStatisticsBufferUpload=function(t){t===void 0&&(t=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].bufferUploadCount+=t},e.prototype.debugGroupStatisticsTextureBind=function(t){t===void 0&&(t=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].textureBindCount+=t},e.prototype.debugGroupStatisticsTriangles=function(t){for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].triangleCount+=t},e.prototype.reportShaderError=function(t,r){var n=this.gl,i=n.getShaderParameter(t,n.COMPILE_STATUS);if(!i){console.error(hue(r));var a=n.getExtension("WEBGL_debug_shaders");a&&console.error(a.getTranslatedShaderSource(t)),console.error(n.getShaderInfoLog(t))}return i},e.prototype.checkProgramCompilationForErrors=function(t){var r=this.gl,n=t.gl_program;if(!r.getProgramParameter(n,r.LINK_STATUS)){var i=t.descriptor;if(!this.reportShaderError(t.gl_shader_vert,i.vertex.glsl)||!this.reportShaderError(t.gl_shader_frag,i.fragment.glsl))return;console.error(r.getProgramInfoLog(t.gl_program))}},e.prototype.bindFramebufferAttachment=function(t,r,n,i){var a=this.gl;if(To(n))a.framebufferRenderbuffer(t,r,a.RENDERBUFFER,null);else if(n.type===Vr.RenderTarget)n.gl_renderbuffer!==null?a.framebufferRenderbuffer(t,r,a.RENDERBUFFER,n.gl_renderbuffer):n.texture!==null&&a.framebufferTexture2D(t,r,te.TEXTURE_2D,bh(n.texture),i);else if(n.type===Vr.Texture){var o=bh(n);n.dimension===Rr.TEXTURE_2D?a.framebufferTexture2D(t,r,te.TEXTURE_2D,o,i):zt(a)&&(n.dimension,Rr.TEXTURE_2D_ARRAY)}},e.prototype.bindFramebufferDepthStencilAttachment=function(t,r){var n=this.gl,i=To(r)?Ot.Depth|Ot.Stencil:Yh(r.format),a=!!(i&Ot.Depth),o=!!(i&Ot.Stencil);if(a&&o){var u=zt(this.gl)||!zt(this.gl)&&!!this.WEBGL_depth_texture;u?this.bindFramebufferAttachment(t,n.DEPTH_STENCIL_ATTACHMENT,r,0):this.bindFramebufferAttachment(t,n.DEPTH_ATTACHMENT,r,0)}else a?(this.bindFramebufferAttachment(t,n.DEPTH_ATTACHMENT,r,0),this.bindFramebufferAttachment(t,n.STENCIL_ATTACHMENT,null,0)):o&&(this.bindFramebufferAttachment(t,n.STENCIL_ATTACHMENT,r,0),this.bindFramebufferAttachment(t,n.DEPTH_ATTACHMENT,null,0))},e.prototype.validateCurrentAttachments=function(){for(var t=-1,r=-1,n=-1,i=0;i<this.currentColorAttachments.length;i++){var a=this.currentColorAttachments[i];a!==null&&(t===-1?(t=a.sampleCount,r=a.width,n=a.height):(mr(t===a.sampleCount),mr(r===a.width),mr(n===a.height)))}this.currentDepthStencilAttachment&&(t===-1?t=this.currentDepthStencilAttachment.sampleCount:(mr(t===this.currentDepthStencilAttachment.sampleCount),mr(r===this.currentDepthStencilAttachment.width),mr(n===this.currentDepthStencilAttachment.height))),this.currentSampleCount=t},e.prototype.setRenderPassParametersBegin=function(t,r){r===void 0&&(r=!1);var n=this.gl;if(r)n.bindFramebuffer(te.FRAMEBUFFER,null);else if(zt(n)?n.bindFramebuffer(te.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||n.bindFramebuffer(te.FRAMEBUFFER,this.renderPassDrawFramebuffer),zt(n)?n.drawBuffers([te.COLOR_ATTACHMENT0,te.COLOR_ATTACHMENT1,te.COLOR_ATTACHMENT2,te.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([te.COLOR_ATTACHMENT0_WEBGL,te.COLOR_ATTACHMENT1_WEBGL,te.COLOR_ATTACHMENT2_WEBGL,te.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var i=t;i<this.currentColorAttachments.length;i++){var a=zt(n)?te.DRAW_FRAMEBUFFER:te.FRAMEBUFFER,o=zt(n)?te.COLOR_ATTACHMENT0:te.COLOR_ATTACHMENT0_WEBGL;n.framebufferRenderbuffer(a,o+i,te.RENDERBUFFER,null),n.framebufferTexture2D(a,o+i,te.TEXTURE_2D,null,0)}this.currentColorAttachments.length=t},e.prototype.setRenderPassParametersColor=function(t,r,n,i,a,o){o===void 0&&(o=!1);var u=this.gl,c=zt(u);(this.currentColorAttachments[t]!==r||this.currentColorAttachmentLevels[t]!==n)&&(this.currentColorAttachments[t]=r,this.currentColorAttachmentLevels[t]=n,!o&&(c||!c&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(c?te.DRAW_FRAMEBUFFER:te.FRAMEBUFFER,(c?te.COLOR_ATTACHMENT0:te.COLOR_ATTACHMENT0_WEBGL)+t,r,n),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[t]!==i||this.currentColorResolveToLevels[t]!==a)&&(this.currentColorResolveTos[t]=i,this.currentColorResolveToLevels[t]=a,i!==null&&(this.resolveColorAttachmentsChanged=!0))},e.prototype.setRenderPassParametersDepthStencil=function(t,r,n){n===void 0&&(n=!1);var i=this.gl;this.currentDepthStencilAttachment!==t&&(this.currentDepthStencilAttachment=t,!n&&!this.inBlitRenderPass&&this.bindFramebufferDepthStencilAttachment(zt(i)?te.DRAW_FRAMEBUFFER:te.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==r&&(this.currentDepthStencilResolveTo=r,r&&(this.resolveDepthStencilAttachmentsChanged=!0))},e.prototype.setRenderPassParametersClearColor=function(t,r,n,i,a){var o=this.gl;if(this.OES_draw_buffers_indexed!==null){var u=this.currentMegaState.attachmentsState[t];u&&u.channelWriteMask!==bi.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(t,!0,!0,!0,!0),u.channelWriteMask=bi.ALL)}else{var u=this.currentMegaState.attachmentsState[0];u&&u.channelWriteMask!==bi.ALL&&(o.colorMask(!0,!0,!0,!0),u.channelWriteMask=bi.ALL)}this.setScissorRectEnabled(!1),zt(o)?o.clearBufferfv(o.COLOR,t,[r,n,i,a]):(o.clearColor(r,n,i,a),o.clear(o.COLOR_BUFFER_BIT))},e.prototype.setRenderPassParametersClearDepthStencil=function(t,r){t===void 0&&(t="load"),r===void 0&&(r="load");var n=this.gl;t!=="load"&&(mr(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(n.depthMask(!0),this.currentMegaState.depthWrite=!0),zt(n)?n.clearBufferfv(n.DEPTH,0,[t]):(n.clearDepth(t),n.clear(n.DEPTH_BUFFER_BIT))),r!=="load"&&(mr(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(n.enable(n.STENCIL_TEST),n.stencilMask(255),this.currentMegaState.stencilWrite=!0),zt(n)?n.clearBufferiv(n.STENCIL,0,[r]):(n.clearStencil(r),n.clear(n.STENCIL_BUFFER_BIT)))},e.prototype.setBindings=function(t){var r=this,n;if(this.renderBundle){this.renderBundle.push(function(){return r.setBindings(t)});return}var i=this.gl,a=t,o=a.uniformBufferBindings,u=a.samplerBindings,c=a.bindingLayouts;mr(0<c.bindingLayoutTables.length);var f=c.bindingLayoutTables[0];mr(o.length>=f.numUniformBuffers),mr(u.length>=f.numSamplers);for(var h=0;h<o.length;h++){var p=o[h];if(p.size!==0){var m=f.firstUniformBuffer+h,_=p.buffer,y=p.offset||0,E=p.size||_.byteSize;if(_!==this.currentUniformBuffers[m]||y!==this.currentUniformBufferByteOffsets[m]||E!==this.currentUniformBufferByteSizes[m]){var b=y%_.pageByteSize,S=_.gl_buffer_pages[y/_.pageByteSize|0];mr(b+E<=_.pageByteSize),zt(i)&&i.bindBufferRange(i.UNIFORM_BUFFER,m,S,b,E),this.currentUniformBuffers[m]=_,this.currentUniformBufferByteOffsets[m]=y,this.currentUniformBufferByteSizes[m]=E}}}for(var h=0;h<f.numSamplers;h++){var p=u[h],A=f.firstSampler+h,R=p!==null&&p.sampler!==null?t2(p.sampler):null,M=p!==null&&p.texture!==null?bh(p.texture):null;if(this.currentSamplers[A]!==R&&(zt(i)&&i.bindSampler(A,R),this.currentSamplers[A]=R),this.currentTextures[A]!==M){if(this.setActiveTexture(i.TEXTURE0+A),M!==null){var P=Tf(p).texture,I=P.gl_target,w=P.width,U=P.height;p.texture.textureIndex=A,i.bindTexture(I,M),zt(i)||(n=p.sampler)===null||n===void 0||n.setTextureParameters(I,w,U),this.debugGroupStatisticsTextureBind()}else{var re=wn(wn({},p),P7),K=re.dimension,H=re.formatKind,I=Que(K);i.bindTexture(I,this.getFallbackTexture(wn({gl_target:I,formatKind:H},re)))}this.currentTextures[A]=M}}},e.prototype.setViewport=function(t,r,n,i){var a=this.gl;a.viewport(t,r,n,i)},e.prototype.setScissorRect=function(t,r,n,i){var a=this.gl;this.setScissorRectEnabled(!0),a.scissor(t,r,n,i)},e.prototype.applyAttachmentStateIndexed=function(t,r,n){var i=this.gl,a=this.OES_draw_buffers_indexed;r.channelWriteMask!==n.channelWriteMask&&(a.colorMaskiOES(t,!!(n.channelWriteMask&bi.RED),!!(n.channelWriteMask&bi.GREEN),!!(n.channelWriteMask&bi.BLUE),!!(n.channelWriteMask&bi.ALPHA)),r.channelWriteMask=n.channelWriteMask);var o=r.rgbBlendState.blendMode!==n.rgbBlendState.blendMode||r.alphaBlendState.blendMode!==n.alphaBlendState.blendMode,u=r.rgbBlendState.blendSrcFactor!==n.rgbBlendState.blendSrcFactor||r.alphaBlendState.blendSrcFactor!==n.alphaBlendState.blendSrcFactor||r.rgbBlendState.blendDstFactor!==n.rgbBlendState.blendDstFactor||r.alphaBlendState.blendDstFactor!==n.alphaBlendState.blendDstFactor;(u||o)&&(Gl(r.rgbBlendState)&&Gl(r.alphaBlendState)?a.enableiOES(t,i.BLEND):Gl(n.rgbBlendState)&&Gl(n.alphaBlendState)&&a.disableiOES(t,i.BLEND)),o&&(a.blendEquationSeparateiOES(t,n.rgbBlendState.blendMode,n.alphaBlendState.blendMode),r.rgbBlendState.blendMode=n.rgbBlendState.blendMode,r.alphaBlendState.blendMode=n.alphaBlendState.blendMode),u&&(a.blendFuncSeparateiOES(t,n.rgbBlendState.blendSrcFactor,n.rgbBlendState.blendDstFactor,n.alphaBlendState.blendSrcFactor,n.alphaBlendState.blendDstFactor),r.rgbBlendState.blendSrcFactor=n.rgbBlendState.blendSrcFactor,r.alphaBlendState.blendSrcFactor=n.alphaBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor=n.rgbBlendState.blendDstFactor,r.alphaBlendState.blendDstFactor=n.alphaBlendState.blendDstFactor)},e.prototype.applyAttachmentState=function(t,r){var n=this.gl;t.channelWriteMask!==r.channelWriteMask&&(n.colorMask(!!(r.channelWriteMask&bi.RED),!!(r.channelWriteMask&bi.GREEN),!!(r.channelWriteMask&bi.BLUE),!!(r.channelWriteMask&bi.ALPHA)),t.channelWriteMask=r.channelWriteMask);var i=t.rgbBlendState.blendMode!==r.rgbBlendState.blendMode||t.alphaBlendState.blendMode!==r.alphaBlendState.blendMode,a=t.rgbBlendState.blendSrcFactor!==r.rgbBlendState.blendSrcFactor||t.alphaBlendState.blendSrcFactor!==r.alphaBlendState.blendSrcFactor||t.rgbBlendState.blendDstFactor!==r.rgbBlendState.blendDstFactor||t.alphaBlendState.blendDstFactor!==r.alphaBlendState.blendDstFactor;(a||i)&&(Gl(t.rgbBlendState)&&Gl(t.alphaBlendState)?n.enable(n.BLEND):Gl(r.rgbBlendState)&&Gl(r.alphaBlendState)&&n.disable(n.BLEND)),i&&(n.blendEquationSeparate(r.rgbBlendState.blendMode,r.alphaBlendState.blendMode),t.rgbBlendState.blendMode=r.rgbBlendState.blendMode,t.alphaBlendState.blendMode=r.alphaBlendState.blendMode),a&&(n.blendFuncSeparate(r.rgbBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor,r.alphaBlendState.blendSrcFactor,r.alphaBlendState.blendDstFactor),t.rgbBlendState.blendSrcFactor=r.rgbBlendState.blendSrcFactor,t.alphaBlendState.blendSrcFactor=r.alphaBlendState.blendSrcFactor,t.rgbBlendState.blendDstFactor=r.rgbBlendState.blendDstFactor,t.alphaBlendState.blendDstFactor=r.alphaBlendState.blendDstFactor)},e.prototype.setMegaState=function(t){var r=this.gl,n=this.currentMegaState;if(this.OES_draw_buffers_indexed!==null)for(var i=0;i<t.attachmentsState.length;i++)this.applyAttachmentStateIndexed(i,n.attachmentsState[0],t.attachmentsState[0]);else mr(t.attachmentsState.length===1),this.applyAttachmentState(n.attachmentsState[0],t.attachmentsState[0]);O7(n.blendConstant,t.blendConstant)||(r.blendColor(t.blendConstant.r,t.blendConstant.g,t.blendConstant.b,t.blendConstant.a),M7(n.blendConstant,t.blendConstant)),n.depthCompare!==t.depthCompare&&(r.depthFunc(t.depthCompare),n.depthCompare=t.depthCompare),!!n.depthWrite!=!!t.depthWrite&&(r.depthMask(t.depthWrite),n.depthWrite=t.depthWrite),!!n.stencilWrite!=!!t.stencilWrite&&(r.stencilMask(t.stencilWrite?255:0),n.stencilWrite=t.stencilWrite);var a=!1;if(!Py(n.stencilFront,t.stencilFront)){a=!0;var o=t.stencilFront,u=o.passOp,c=o.failOp,f=o.depthFailOp,h=o.compare;(n.stencilFront.passOp!==u||n.stencilFront.failOp!==c||n.stencilFront.depthFailOp!==f)&&(r.stencilOpSeparate(r.FRONT,c,f,u),n.stencilFront.passOp=u,n.stencilFront.failOp=c,n.stencilFront.depthFailOp=f),n.stencilFront.compare!==h&&(this.setStencilReference(0),n.stencilFront.compare=h)}if(!Py(n.stencilBack,t.stencilBack)){a=!0;var p=t.stencilBack,u=p.passOp,c=p.failOp,f=p.depthFailOp,h=p.compare;(n.stencilBack.passOp!==u||n.stencilBack.failOp!==c||n.stencilBack.depthFailOp!==f)&&(r.stencilOpSeparate(r.BACK,c,f,u),n.stencilBack.passOp=u,n.stencilBack.failOp=c,n.stencilBack.depthFailOp=f),n.stencilBack.compare!==h&&(this.setStencilReference(0),n.stencilBack.compare=h)}(n.stencilFront.mask!==t.stencilFront.mask||n.stencilBack.mask!==t.stencilBack.mask)&&(a=!0,n.stencilFront.mask=t.stencilFront.mask,n.stencilBack.mask=t.stencilBack.mask),a&&this.applyStencil(),n.cullMode!==t.cullMode&&(n.cullMode===Ia.NONE?r.enable(r.CULL_FACE):t.cullMode===Ia.NONE&&r.disable(r.CULL_FACE),t.cullMode===Ia.BACK?r.cullFace(r.BACK):t.cullMode===Ia.FRONT?r.cullFace(r.FRONT):t.cullMode===Ia.FRONT_AND_BACK&&r.cullFace(r.FRONT_AND_BACK),n.cullMode=t.cullMode),n.frontFace!==t.frontFace&&(r.frontFace(t.frontFace),n.frontFace=t.frontFace),n.polygonOffset!==t.polygonOffset&&(t.polygonOffset?r.enable(r.POLYGON_OFFSET_FILL):r.disable(r.POLYGON_OFFSET_FILL),n.polygonOffset=t.polygonOffset),(n.polygonOffsetFactor!==t.polygonOffsetFactor||n.polygonOffsetUnits!==t.polygonOffsetUnits)&&(r.polygonOffset(t.polygonOffsetFactor,t.polygonOffsetUnits),n.polygonOffsetFactor=t.polygonOffsetFactor,n.polygonOffsetUnits=t.polygonOffsetUnits)},e.prototype.validatePipelineFormats=function(t){for(var r=0;r<this.currentColorAttachments.length;r++)var n=this.currentColorAttachments[r];this.currentDepthStencilAttachment&&mr(this.currentDepthStencilAttachment.format===t.depthStencilAttachmentFormat),this.currentSampleCount!==-1&&mr(this.currentSampleCount===t.sampleCount)},e.prototype.setPipeline=function(t){var r=this;if(this.renderBundle){this.renderBundle.push(function(){return r.setPipeline(t)});return}this.currentPipeline=t,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var n=this.currentPipeline.program;if(this.useProgram(n),n.compileState===Ma.NeedsBind){var i=this.gl,a=n.gl_program,o=n.descriptor,u=zL(o.vertex.glsl,fle);if(zt(i))for(var c=0;c<u.length;c++){var f=Ko(u[c],2),h=f[1],p=i.getUniformBlockIndex(a,h);p!==-1&&p!==4294967295&&i.uniformBlockBinding(a,p,c)}for(var m=zL(o.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),c=0;c<m.length;c++){var _=Ko(m[c],3),y=_[1],E=_[2],b=i.getUniformLocation(a,y);i.uniform1i(b,parseInt(E))}n.compileState=Ma.ReadyToUse}},e.prototype.setVertexInput=function(t,r,n){var i,a,o=this,u;if(this.renderBundle){this.renderBundle.push(function(){return o.setVertexInput(t,r,n)});return}if(t!==null){mr(this.currentPipeline.inputLayout===t);var c=t;this.bindVAO(c.vao);for(var f=this.gl,h=0;h<c.vertexBufferDescriptors.length;h++){var p=c.vertexBufferDescriptors[h],m=p.arrayStride,_=p.attributes;try{for(var y=(i=void 0,kf(_)),E=y.next();!E.done;E=y.next()){var b=E.value,S=b.shaderLocation,A=b.offset,R=zt(f)?S:(u=c.program.attributes[S])===null||u===void 0?void 0:u.location;if(!To(R)){var M=r[h];if(M===null)continue;var P=b.vertexFormat;f.bindBuffer(f.ARRAY_BUFFER,Lh(M.buffer));var I=(M.offset||0)+A;f.vertexAttribPointer(R,P.size,P.type,P.normalized,m,I)}}}catch(U){i={error:U}}finally{try{E&&!E.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}}if(mr(n!==null==(c.indexBufferFormat!==null)),n!==null){var w=n.buffer;mr(w.usage===ln.INDEX),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,Lh(w)),this.currentIndexBufferByteOffset=n.offset||0}else this.currentIndexBufferByteOffset=null}else mr(this.currentPipeline.inputLayout===null),mr(n===null),this.bindVAO(null),this.currentIndexBufferByteOffset=0},e.prototype.setStencilReference=function(t){this.currentStencilRef!==t&&(this.currentStencilRef=t,this.applyStencil())},e.prototype.draw=function(t,r,n,i){var a,o=this;if(this.renderBundle){this.renderBundle.push(function(){return o.draw(t,r,n,i)});return}var u=this.gl,c=this.currentPipeline;if(r){var f=[c.drawMode,n||0,t,r];zt(u)?u.drawArraysInstanced.apply(u,Zv([],Ko(f),!1)):(a=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(a,Zv([],Ko(f),!1))}else u.drawArrays(c.drawMode,n,t);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(t/3*Math.max(r,1))},e.prototype.drawIndexed=function(t,r,n,i,a){var o,u=this;if(this.renderBundle){this.renderBundle.push(function(){return u.drawIndexed(t,r,n,i,a)});return}var c=this.gl,f=this.currentPipeline,h=Tf(f.inputLayout),p=Tf(this.currentIndexBufferByteOffset)+n*h.indexBufferCompByteSize;if(r){var m=[f.drawMode,t,h.indexBufferType,p,r];zt(c)?c.drawElementsInstanced.apply(c,Zv([],Ko(m),!1)):(o=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(o,Zv([],Ko(m),!1))}else c.drawElements(f.drawMode,t,h.indexBufferType,p);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(t/3*Math.max(r,1))},e.prototype.drawIndirect=function(t,r){},e.prototype.drawIndexedIndirect=function(t,r){},e.prototype.beginOcclusionQuery=function(t){var r=this.gl;if(zt(r)){var n=this.currentRenderPassDescriptor.occlusionQueryPool;r.beginQuery(n.gl_query_type,n.gl_query[t])}},e.prototype.endOcclusionQuery=function(){var t=this.gl;if(zt(t)){var r=this.currentRenderPassDescriptor.occlusionQueryPool;t.endQuery(r.gl_query_type)}},e.prototype.pipelineQueryReady=function(t){var r=t;return this.queryProgramReady(r.program)},e.prototype.pipelineForceReady=function(t){},e.prototype.endPass=function(){for(var t=this.gl,r=zt(t),n=this.currentColorResolveTos.length===1&&this.currentColorResolveTos[0]===this.scTexture,i=!1,a=0;a<this.currentColorAttachments.length;a++){var o=this.currentColorAttachments[a];if(o!==null){var u=this.currentColorResolveTos[a],c=!1;u!==null&&(mr(o.width===u.width&&o.height===u.height),this.setScissorRectEnabled(!1),n||(r&&t.bindFramebuffer(t.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&r&&this.bindFramebufferAttachment(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,o,this.currentColorAttachmentLevels[a])),c=!0,n||(u===this.scTexture?t.bindFramebuffer(r?te.DRAW_FRAMEBUFFER:te.FRAMEBUFFER,this.scPlatformFramebuffer):(t.bindFramebuffer(r?te.DRAW_FRAMEBUFFER:te.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&t.framebufferTexture2D(r?te.DRAW_FRAMEBUFFER:te.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,u.gl_texture,this.currentColorResolveToLevels[a]))),n||(r?(t.blitFramebuffer(0,0,o.width,o.height,0,0,u.width,u.height,t.COLOR_BUFFER_BIT,t.LINEAR),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(o,u)),i=!0),this.currentRenderPassDescriptor.colorStore[a]||!n&&!c&&(t.bindFramebuffer(r?te.READ_FRAMEBUFFER:te.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(r?te.READ_FRAMEBUFFER:te.FRAMEBUFFER,t.COLOR_ATTACHMENT0,o,this.currentColorAttachmentLevels[a])),n||t.bindFramebuffer(r?te.READ_FRAMEBUFFER:te.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var f=this.currentDepthStencilAttachment;if(f){var h=this.currentDepthStencilResolveTo,c=!1;h&&(mr(f.width===h.width&&f.height===h.height),this.setScissorRectEnabled(!1),n||(t.bindFramebuffer(r?te.READ_FRAMEBUFFER:te.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),t.bindFramebuffer(r?te.DRAW_FRAMEBUFFER:te.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(r?te.READ_FRAMEBUFFER:te.FRAMEBUFFER,f),this.bindFramebufferDepthStencilAttachment(r?te.DRAW_FRAMEBUFFER:te.FRAMEBUFFER,h))),c=!0,n||(r&&t.blitFramebuffer(0,0,f.width,f.height,0,0,h.width,h.height,t.DEPTH_BUFFER_BIT,t.NEAREST),t.bindFramebuffer(r?te.DRAW_FRAMEBUFFER:te.FRAMEBUFFER,null)),i=!0),!n&&!this.currentRenderPassDescriptor.depthStencilStore&&(c||(t.bindFramebuffer(r?te.READ_FRAMEBUFFER:te.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(r?te.READ_FRAMEBUFFER:te.FRAMEBUFFER,f),c=!0),r&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[t.DEPTH_STENCIL_ATTACHMENT])),!n&&c&&t.bindFramebuffer(r?te.READ_FRAMEBUFFER:te.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}!n&&!i&&t.bindFramebuffer(r?te.DRAW_FRAMEBUFFER:te.FRAMEBUFFER,null)},e.prototype.setScissorRectEnabled=function(t){if(this.currentScissorEnabled!==t){var r=this.gl;t?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST),this.currentScissorEnabled=t}},e.prototype.applyStencil=function(){To(this.currentStencilRef)||(this.gl.stencilFuncSeparate(te.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,this.currentMegaState.stencilFront.mask||255),this.gl.stencilFuncSeparate(te.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,this.currentMegaState.stencilBack.mask||255))},e.prototype.getFallbackTexture=function(t){var r=t.gl_target,n=t.formatKind;if(r===te.TEXTURE_2D)return n===In.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(r===te.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(r===te.TEXTURE_3D)return this.fallbackTexture3D;if(r===te.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},e.prototype.submitBlitRenderPass=function(t,r){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:`layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`},fragment:{glsl:`uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`}}),this.blitVertexBuffer=this.createBuffer({usage:ln.VERTEX|ln.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:8,stepMode:zf.VERTEX,attributes:[{format:ve.F32_RG,offset:0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:ei.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[ve.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:Zh(Kh)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:t.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:t}));var n=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var i=this.createRenderPass({colorAttachment:[t],colorResolveTo:[r],colorClearColor:[cue]}),a=this.getCanvas(),o=a.width,u=a.height;i.setPipeline(this.blitRenderPipeline),i.setBindings(this.blitBindings),i.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),i.setViewport(0,0,o,u),this.gl.disable(this.gl.BLEND),i.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=n,this.inBlitRenderPass=!1},e})(),hle=(function(){function e(t){this.pluginOptions=t}return e.prototype.createSwapChain=function(t){return Ph(this,void 0,void 0,function(){var r,n,i,a,o,u,c,f,h,p,m,_,y;return Dh(this,function(E){return r=this.pluginOptions,n=r.targets,i=r.xrCompatible,a=r.antialias,o=a===void 0?!1:a,u=r.preserveDrawingBuffer,c=u===void 0?!1:u,f=r.premultipliedAlpha,h=f===void 0?!0:f,p=r.shaderDebug,m=r.trackResources,_={antialias:o,preserveDrawingBuffer:c,stencil:!0,premultipliedAlpha:h,xrCompatible:i},this.handleContextEvents(t),n.includes("webgl2")&&(y=t.getContext("webgl2",_)||t.getContext("experimental-webgl2",_)),!y&&n.includes("webgl1")&&(y=t.getContext("webgl",_)||t.getContext("experimental-webgl",_)),[2,new dle(y,{shaderDebug:p,trackResources:m})]})})},e.prototype.handleContextEvents=function(t){var r=this.pluginOptions,n=r.onContextLost,i=r.onContextRestored,a=r.onContextCreationError;a&&t.addEventListener("webglcontextcreationerror",a,!1),n&&t.addEventListener("webglcontextlost",n,!1),i&&t.addEventListener("webglcontextrestored",i,!1)},e})();let Nn;const F7=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&F7.decode();let Em=null;function L0(){return(Em===null||Em.byteLength===0)&&(Em=new Uint8Array(Nn.memory.buffer)),Em}function Dy(e,t){return e=e>>>0,F7.decode(L0().subarray(e,e+t))}const Du=new Array(128).fill(void 0);Du.push(void 0,null,!0,!1);let Nm=Du.length;function ple(e){Nm===Du.length&&Du.push(Du.length+1);const t=Nm;return Nm=Du[t],Du[t]=e,t}function B0(e){return Du[e]}function vle(e){e<132||(Du[e]=Nm,Nm=e)}function mle(e){const t=B0(e);return vle(e),t}let Jh=0;const F0=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},_le=typeof F0.encodeInto=="function"?function(e,t){return F0.encodeInto(e,t)}:function(e,t){const r=F0.encode(e);return t.set(r),{read:e.length,written:r.length}};function Ly(e,t,r){if(r===void 0){const u=F0.encode(e),c=t(u.length,1)>>>0;return L0().subarray(c,c+u.length).set(u),Jh=u.length,c}let n=e.length,i=t(n,1)>>>0;const a=L0();let o=0;for(;o<n;o++){const u=e.charCodeAt(o);if(u>127)break;a[i+o]=u}if(o!==n){o!==0&&(e=e.slice(o)),i=r(i,n,n=o+e.length*3,1)>>>0;const u=L0().subarray(i+o,i+n),c=_le(e,u);o+=c.written}return Jh=o,i}let bm=null;function By(){return(bm===null||bm.byteLength===0)&&(bm=new Int32Array(Nn.memory.buffer)),bm}function gle(e,t,r){let n,i;try{const u=Nn.__wbindgen_add_to_stack_pointer(-16),c=Ly(e,Nn.__wbindgen_malloc,Nn.__wbindgen_realloc),f=Jh,h=Ly(t,Nn.__wbindgen_malloc,Nn.__wbindgen_realloc),p=Jh;Nn.glsl_compile(u,c,f,h,p,r);var a=By()[u/4+0],o=By()[u/4+1];return n=a,i=o,Dy(a,o)}finally{Nn.__wbindgen_add_to_stack_pointer(16),Nn.__wbindgen_free(n,i,1)}}class Qm{static __wrap(t){t=t>>>0;const r=Object.create(Qm.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();Nn.__wbg_wgslcomposer_free(t)}constructor(){const t=Nn.wgslcomposer_new();return Qm.__wrap(t)}load_composable(t){const r=Ly(t,Nn.__wbindgen_malloc,Nn.__wbindgen_realloc),n=Jh;Nn.wgslcomposer_load_composable(this.__wbg_ptr,r,n)}wgsl_compile(t){let r,n;try{const o=Nn.__wbindgen_add_to_stack_pointer(-16),u=Ly(t,Nn.__wbindgen_malloc,Nn.__wbindgen_realloc),c=Jh;Nn.wgslcomposer_wgsl_compile(o,this.__wbg_ptr,u,c);var i=By()[o/4+0],a=By()[o/4+1];return r=i,n=a,Dy(i,a)}finally{Nn.__wbindgen_add_to_stack_pointer(16),Nn.__wbindgen_free(r,n,1)}}}async function yle(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(n){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}else{const r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}function Ele(){const e={};return e.wbg={},e.wbg.__wbindgen_string_new=function(t,r){const n=Dy(t,r);return ple(n)},e.wbg.__wbindgen_object_drop_ref=function(t){mle(t)},e.wbg.__wbg_log_1d3ae0273d8f4f8a=function(t){console.log(B0(t))},e.wbg.__wbg_log_576ca876af0d4a77=function(t,r){console.log(B0(t),B0(r))},e.wbg.__wbindgen_throw=function(t,r){throw new Error(Dy(t,r))},e}function ble(e,t){return Nn=e.exports,U7.__wbindgen_wasm_module=t,bm=null,Em=null,Nn}async function U7(e){if(Nn!==void 0)return Nn;const t=Ele();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:n}=await yle(await e,t);return ble(r,n)}var ci;(function(e){e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.TEXTURE_BINDING=4]="TEXTURE_BINDING",e[e.STORAGE_BINDING=8]="STORAGE_BINDING",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(ci||(ci={}));var n2;(function(e){e[e.READ=1]="READ",e[e.WRITE=2]="WRITE"})(n2||(n2={}));function Tle(e){var t=0;return e&ta.SAMPLED&&(t|=ci.TEXTURE_BINDING|ci.COPY_DST|ci.COPY_SRC),e&ta.STORAGE&&(t|=ci.TEXTURE_BINDING|ci.STORAGE_BINDING|ci.COPY_SRC|ci.COPY_DST),e&ta.RENDER_TARGET&&(t|=ci.RENDER_ATTACHMENT|ci.TEXTURE_BINDING|ci.COPY_SRC|ci.COPY_DST),t}function DC(e){if(e===ve.U8_R_NORM)return"r8unorm";if(e===ve.S8_R_NORM)return"r8snorm";if(e===ve.U8_RG_NORM)return"rg8unorm";if(e===ve.S8_RG_NORM)return"rg8snorm";if(e===ve.U32_R)return"r32uint";if(e===ve.S32_R)return"r32sint";if(e===ve.F32_R)return"r32float";if(e===ve.U16_RG)return"rg16uint";if(e===ve.S16_RG)return"rg16sint";if(e===ve.F16_RG)return"rg16float";if(e===ve.U8_RGBA_RT)return"bgra8unorm";if(e===ve.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";if(e===ve.U8_RGBA_NORM)return"rgba8unorm";if(e===ve.U8_RGBA_SRGB)return"rgba8unorm-srgb";if(e===ve.S8_RGBA_NORM)return"rgba8snorm";if(e===ve.U32_RG)return"rg32uint";if(e===ve.S32_RG)return"rg32sint";if(e===ve.F32_RG)return"rg32float";if(e===ve.U16_RGBA)return"rgba16uint";if(e===ve.S16_RGBA)return"rgba16sint";if(e===ve.F16_RGBA)return"rgba16float";if(e===ve.F32_RGBA)return"rgba32float";if(e===ve.U32_RGBA)return"rgba32uint";if(e===ve.S32_RGBA)return"rgba32sint";if(e===ve.D24)return"depth24plus";if(e===ve.D24_S8)return"depth24plus-stencil8";if(e===ve.D32F)return"depth32float";if(e===ve.D32F_S8)return"depth32float-stencil8";if(e===ve.BC1)return"bc1-rgba-unorm";if(e===ve.BC1_SRGB)return"bc1-rgba-unorm-srgb";if(e===ve.BC2)return"bc2-rgba-unorm";if(e===ve.BC2_SRGB)return"bc2-rgba-unorm-srgb";if(e===ve.BC3)return"bc3-rgba-unorm";if(e===ve.BC3_SRGB)return"bc3-rgba-unorm-srgb";if(e===ve.BC4_SNORM)return"bc4-r-snorm";if(e===ve.BC4_UNORM)return"bc4-r-unorm";if(e===ve.BC5_SNORM)return"bc5-rg-snorm";if(e===ve.BC5_UNORM)return"bc5-rg-unorm";throw"whoops"}function Sle(e){if(e===Rr.TEXTURE_2D)return"2d";if(e===Rr.TEXTURE_CUBE_MAP)return"2d";if(e===Rr.TEXTURE_2D_ARRAY)return"2d";if(e===Rr.TEXTURE_3D)return"3d";throw new Error("whoops")}function Ale(e){if(e===Rr.TEXTURE_2D)return"2d";if(e===Rr.TEXTURE_CUBE_MAP)return"cube";if(e===Rr.TEXTURE_2D_ARRAY)return"2d-array";if(e===Rr.TEXTURE_3D)return"3d";throw new Error("whoops")}function xle(e){var t=0;return e&ln.INDEX&&(t|=GPUBufferUsage.INDEX),e&ln.VERTEX&&(t|=GPUBufferUsage.VERTEX),e&ln.UNIFORM&&(t|=GPUBufferUsage.UNIFORM),e&ln.STORAGE&&(t|=GPUBufferUsage.STORAGE),e&ln.COPY_SRC&&(t|=GPUBufferUsage.COPY_SRC),e&ln.INDIRECT&&(t|=GPUBufferUsage.INDIRECT),t|=GPUBufferUsage.COPY_DST,t}function Dx(e){if(e===ma.CLAMP_TO_EDGE)return"clamp-to-edge";if(e===ma.REPEAT)return"repeat";if(e===ma.MIRRORED_REPEAT)return"mirror-repeat";throw new Error("whoops")}function VL(e){if(e===Xn.BILINEAR)return"linear";if(e===Xn.POINT)return"nearest";throw new Error("whoops")}function Rle(e){if(e===hi.LINEAR)return"linear";if(e===hi.NEAREST)return"nearest";if(e===hi.NO_MIP)return"nearest";throw new Error("whoops")}function Rh(e){var t=e;return t.gpuBuffer}function Cle(e){var t=e;return t.gpuSampler}function Ole(e){var t=e;return t.querySet}function Mle(e){if(e===My.OcclusionConservative)return"occlusion";throw new Error("whoops")}function wle(e){switch(e){case ei.TRIANGLES:return"triangle-list";case ei.POINTS:return"point-list";case ei.TRIANGLE_STRIP:return"triangle-strip";case ei.LINES:return"line-list";case ei.LINE_STRIP:return"line-strip";default:throw new Error("Unknown primitive topology mode")}}function Nle(e){if(e===Ia.NONE)return"none";if(e===Ia.FRONT)return"front";if(e===Ia.BACK)return"back";throw new Error("whoops")}function Ile(e){if(e===Km.CCW)return"ccw";if(e===Km.CW)return"cw";throw new Error("whoops")}function Ple(e,t){return{topology:wle(e),cullMode:Nle(t.cullMode),frontFace:Ile(t.frontFace)}}function HL(e){if(e===xr.ZERO)return"zero";if(e===xr.ONE)return"one";if(e===xr.SRC)return"src";if(e===xr.ONE_MINUS_SRC)return"one-minus-src";if(e===xr.DST)return"dst";if(e===xr.ONE_MINUS_DST)return"one-minus-dst";if(e===xr.SRC_ALPHA)return"src-alpha";if(e===xr.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";if(e===xr.DST_ALPHA)return"dst-alpha";if(e===xr.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";if(e===xr.CONST)return"constant";if(e===xr.ONE_MINUS_CONSTANT)return"one-minus-constant";if(e===xr.SRC_ALPHA_SATURATE)return"src-alpha-saturated";throw new Error("whoops")}function Dle(e){if(e===Si.ADD)return"add";if(e===Si.SUBSTRACT)return"subtract";if(e===Si.REVERSE_SUBSTRACT)return"reverse-subtract";if(e===Si.MIN)return"min";if(e===Si.MAX)return"max";throw new Error("whoops")}function XL(e){return{operation:Dle(e.blendMode),srcFactor:HL(e.blendSrcFactor),dstFactor:HL(e.blendDstFactor)}}function GL(e){return e.blendMode===Si.ADD&&e.blendSrcFactor===xr.ONE&&e.blendDstFactor===xr.ZERO}function Lle(e){if(!(GL(e.rgbBlendState)&&GL(e.alphaBlendState)))return{color:XL(e.rgbBlendState),alpha:XL(e.alphaBlendState)}}function Ble(e,t){return{format:DC(t),blend:Lle(e),writeMask:e.channelWriteMask}}function Fle(e,t){return t.attachmentsState.map(function(r,n){return Ble(r,e[n])})}function U0(e){if(e===Wr.NEVER)return"never";if(e===Wr.LESS)return"less";if(e===Wr.EQUAL)return"equal";if(e===Wr.LEQUAL)return"less-equal";if(e===Wr.GREATER)return"greater";if(e===Wr.NOTEQUAL)return"not-equal";if(e===Wr.GEQUAL)return"greater-equal";if(e===Wr.ALWAYS)return"always";throw new Error("whoops")}function dh(e){if(e===Pn.KEEP)return"keep";if(e===Pn.REPLACE)return"replace";if(e===Pn.ZERO)return"zero";if(e===Pn.DECREMENT_CLAMP)return"decrement-clamp";if(e===Pn.DECREMENT_WRAP)return"decrement-wrap";if(e===Pn.INCREMENT_CLAMP)return"increment-clamp";if(e===Pn.INCREMENT_WRAP)return"increment-wrap";if(e===Pn.INVERT)return"invert";throw new Error("whoops")}function Ule(e,t){if(!To(e))return{format:DC(e),depthWriteEnabled:!!t.depthWrite,depthCompare:U0(t.depthCompare),depthBias:t.polygonOffset?t.polygonOffsetUnits:0,depthBiasSlopeScale:t.polygonOffset?t.polygonOffsetFactor:0,stencilFront:{compare:U0(t.stencilFront.compare),passOp:dh(t.stencilFront.passOp),failOp:dh(t.stencilFront.failOp),depthFailOp:dh(t.stencilFront.depthFailOp)},stencilBack:{compare:U0(t.stencilBack.compare),passOp:dh(t.stencilBack.passOp),failOp:dh(t.stencilBack.failOp),depthFailOp:dh(t.stencilBack.depthFailOp)},stencilReadMask:4294967295,stencilWriteMask:4294967295}}function kle(e){if(e!==null){if(e===ve.U16_R)return"uint16";if(e===ve.U32_R)return"uint32";throw new Error("whoops")}}function zle(e){if(e===zf.VERTEX)return"vertex";if(e===zf.INSTANCE)return"instance";throw new Error("whoops")}function jle(e){if(e===ve.U8_R)return"uint8x2";if(e===ve.U8_RG)return"uint8x2";if(e===ve.U8_RGB)return"uint8x4";if(e===ve.U8_RGBA)return"uint8x4";if(e===ve.U8_RG_NORM)return"unorm8x2";if(e===ve.U8_RGBA_NORM)return"unorm8x4";if(e===ve.S8_RGB_NORM)return"snorm8x4";if(e===ve.S8_RGBA_NORM)return"snorm8x4";if(e===ve.U16_RG_NORM)return"unorm16x2";if(e===ve.U16_RGBA_NORM)return"unorm16x4";if(e===ve.S16_RG_NORM)return"snorm16x2";if(e===ve.S16_RGBA_NORM)return"snorm16x4";if(e===ve.S16_RG)return"uint16x2";if(e===ve.F16_RG)return"float16x2";if(e===ve.F16_RGBA)return"float16x4";if(e===ve.F32_R)return"float32";if(e===ve.F32_RG)return"float32x2";if(e===ve.F32_RGB)return"float32x3";if(e===ve.F32_RGBA)return"float32x4";throw"whoops"}function Vle(e){var t=$s(e);switch(t){case Ke.BC1:case Ke.BC2:case Ke.BC3:case Ke.BC4_SNORM:case Ke.BC4_UNORM:case Ke.BC5_SNORM:case Ke.BC5_UNORM:return!0;default:return!1}}function Hle(e){var t=$s(e);switch(t){case Ke.BC1:case Ke.BC2:case Ke.BC3:case Ke.BC4_SNORM:case Ke.BC4_UNORM:case Ke.BC5_SNORM:case Ke.BC5_UNORM:return 4;default:return 1}}function qL(e,t,r,n){switch(r===void 0&&(r=!1),e){case ve.S8_R:case ve.S8_R_NORM:case ve.S8_RG_NORM:case ve.S8_RGB_NORM:case ve.S8_RGBA_NORM:{var i=t instanceof ArrayBuffer?new Int8Array(t):new Int8Array(t);return n&&i.set(new Int8Array(n)),i}case ve.U8_R:case ve.U8_R_NORM:case ve.U8_RG:case ve.U8_RG_NORM:case ve.U8_RGB:case ve.U8_RGB_NORM:case ve.U8_RGB_SRGB:case ve.U8_RGBA:case ve.U8_RGBA_NORM:case ve.U8_RGBA_SRGB:{var a=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t);return n&&a.set(new Uint8Array(n)),a}case ve.S16_R:case ve.S16_RG:case ve.S16_RG_NORM:case ve.S16_RGB_NORM:case ve.S16_RGBA:case ve.S16_RGBA_NORM:{var o=t instanceof ArrayBuffer?new Int16Array(t):new Int16Array(r?t/2:t);return n&&o.set(new Int16Array(n)),o}case ve.U16_R:case ve.U16_RGB:case ve.U16_RGBA_5551:case ve.U16_RGBA_NORM:case ve.U16_RG_NORM:case ve.U16_R_NORM:{var u=t instanceof ArrayBuffer?new Uint16Array(t):new Uint16Array(r?t/2:t);return n&&u.set(new Uint16Array(n)),u}case ve.S32_R:{var c=t instanceof ArrayBuffer?new Int32Array(t):new Int32Array(r?t/4:t);return n&&c.set(new Int32Array(n)),c}case ve.U32_R:case ve.U32_RG:{var f=t instanceof ArrayBuffer?new Uint32Array(t):new Uint32Array(r?t/4:t);return n&&f.set(new Uint32Array(n)),f}case ve.F32_R:case ve.F32_RG:case ve.F32_RGB:case ve.F32_RGBA:{var h=t instanceof ArrayBuffer?new Float32Array(t):new Float32Array(r?t/4:t);return n&&h.set(new Float32Array(n)),h}}var p=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t);return n&&p.set(new Uint8Array(n)),p}function Xle(e){var t=(e&32768)>>15,r=(e&31744)>>10,n=e&1023;return r===0?(t?-1:1)*Math.pow(2,-14)*(n/Math.pow(2,10)):r==31?n?NaN:(t?-1:1)*(1/0):(t?-1:1)*Math.pow(2,r-15)*(1+n/Math.pow(2,10))}function k7(e){switch(e){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw new Error("No fixed size for Stencil8 format!");case"depth16unorm":return{width:1,height:1,length:2};case"depth24plus":throw new Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw new Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float":return{width:1,height:1,length:4};case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};default:return{width:1,height:1,length:4}}}var us=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=e.call(this)||this;return a.id=n,a.device=i,a}return t.prototype.destroy=function(){},t})(A7),Gle=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o,u,c=e.call(this,{id:n,device:i})||this;c.type=Vr.Bindings;var f=a.pipeline;mr(!!f);var h=a.uniformBufferBindings,p=a.storageBufferBindings,m=a.samplerBindings,_=a.storageTextureBindings;c.numUniformBuffers=h?.length||0;var y=[[],[],[],[]],E=0;if(h&&h.length)for(var b=0;b<h.length;b++){var S=a.uniformBufferBindings[b],A=S.binding,R=S.size,M=S.offset,P=S.buffer,I={buffer:Rh(P),offset:M??0,size:R};y[0].push({binding:A??E++,resource:I})}if(m&&m.length){E=0;for(var b=0;b<m.length;b++){var w=wn(wn({},m[b]),P7),A=a.samplerBindings[b],U=A.texture!==null?A.texture:c.device.getFallbackTexture(w);w.dimension=U.dimension,w.formatKind=C7(U.format);var re=U.gpuTextureView;if(y[1].push({binding:(o=A.textureBinding)!==null&&o!==void 0?o:E++,resource:re}),A.samplerBinding!==-1){var K=A.sampler!==null?A.sampler:c.device.getFallbackSampler(w),H=Cle(K);y[1].push({binding:(u=A.samplerBinding)!==null&&u!==void 0?u:E++,resource:H})}}}if(p&&p.length){E=0;for(var b=0;b<p.length;b++){var x=a.storageBufferBindings[b],A=x.binding,R=x.size,M=x.offset,P=x.buffer,I={buffer:Rh(P),offset:M??0,size:R};y[2].push({binding:A??E++,resource:I})}}if(_&&_.length){E=0;for(var b=0;b<_.length;b++){var N=a.storageTextureBindings[b],A=N.binding,U=N.texture,re=U.gpuTextureView;y[3].push({binding:A??E++,resource:re})}}var j=y.findLastIndex(function(fe){return!!fe.length});return c.gpuBindGroup=y.map(function(fe,O){return O<=j&&c.device.device.createBindGroup({layout:f.getBindGroupLayout(O),entries:fe})}),c}return t})(us),qle=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;o.type=Vr.Buffer;var u=a.usage,c=a.viewOrSize,f=!!(u&ln.MAP_READ);o.usage=xle(u),f&&(o.usage=ln.MAP_READ|ln.COPY_DST);var h=!Ah(c);if(o.view=Ah(c)?null:c,o.size=Ah(c)?Ny(c,4):Ny(c.byteLength,4),Ah(c))o.gpuBuffer=o.device.device.createBuffer({usage:o.usage,size:o.size,mappedAtCreation:f?h:!1});else{o.gpuBuffer=o.device.device.createBuffer({usage:o.usage,size:o.size,mappedAtCreation:!0});var p=c&&c.constructor||Float32Array;new p(o.gpuBuffer.getMappedRange()).set(c),o.gpuBuffer.unmap()}return o}return t.prototype.setSubData=function(r,n,i,a){i===void 0&&(i=0),a===void 0&&(a=0);var o=this.gpuBuffer;a=a||n.byteLength,a=Math.min(a,this.size-r);var u=n.byteOffset+i,c=u+a,f=a+3&-4;if(f!==a){var h=new Uint8Array(n.buffer.slice(u,c));n=new Uint8Array(f),n.set(h),i=0,u=0,c=f,a=f}for(var p=1024*1024*15,m=0;c-(u+m)>p;)this.device.device.queue.writeBuffer(o,r+m,n.buffer,u+m,p),m+=p;this.device.device.queue.writeBuffer(o,r+m,n.buffer,u+m,a-m)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuBuffer.destroy()},t})(us),WL=(function(){function e(){this.gpuComputePassEncoder=null}return e.prototype.dispatchWorkgroups=function(t,r,n){this.gpuComputePassEncoder.dispatchWorkgroups(t,r,n)},e.prototype.dispatchWorkgroupsIndirect=function(t,r){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(t.gpuBuffer,r)},e.prototype.finish=function(){this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.frameCommandEncoder=null},e.prototype.beginComputePass=function(t){mr(this.gpuComputePassEncoder===null),this.frameCommandEncoder=t,this.gpuComputePassEncoder=this.frameCommandEncoder.beginComputePass(this.gpuComputePassDescriptor)},e.prototype.setPipeline=function(t){var r=t,n=Tf(r.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(n)},e.prototype.setBindings=function(t){var r=this,n=t;n.gpuBindGroup.forEach(function(i,a){i&&r.gpuComputePassEncoder.setBindGroup(a,n.gpuBindGroup[a])})},e.prototype.pushDebugGroup=function(t){this.gpuComputePassEncoder.pushDebugGroup(t)},e.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(t){this.gpuComputePassEncoder.insertDebugMarker(t)},e})(),Wle=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;o.type=Vr.ComputePipeline,o.gpuComputePipeline=null,o.descriptor=a;var u=a.program,c=u.computeStage;if(c===null)return o;var f={layout:"auto",compute:wn({},c)};return o.gpuComputePipeline=o.device.device.createComputePipeline(f),o.name!==void 0&&(o.gpuComputePipeline.label=o.name),o}return t.prototype.getBindGroupLayout=function(r){return this.gpuComputePipeline.getBindGroupLayout(r)},t})(us),$le=(function(e){Bn(t,e);function t(r){var n,i,a,o,u=r.id,c=r.device,f=r.descriptor,h=e.call(this,{id:u,device:c})||this;h.type=Vr.InputLayout;var p=[];try{for(var m=kf(f.vertexBufferDescriptors),_=m.next();!_.done;_=m.next()){var y=_.value,E=y.arrayStride,b=y.stepMode,S=y.attributes;p.push({arrayStride:E,stepMode:zle(b),attributes:[]});try{for(var A=(a=void 0,kf(S)),R=A.next();!R.done;R=A.next()){var M=R.value,P=M.shaderLocation,I=M.format,w=M.offset;p[p.length-1].attributes.push({shaderLocation:P,format:jle(I),offset:w})}}catch(U){a={error:U}}finally{try{R&&!R.done&&(o=A.return)&&o.call(A)}finally{if(a)throw a.error}}}}catch(U){n={error:U}}finally{try{_&&!_.done&&(i=m.return)&&i.call(m)}finally{if(n)throw n.error}}return h.indexFormat=kle(f.indexBufferFormat),h.buffers=p,h}return t})(us),$L=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;return o.type=Vr.Program,o.vertexStage=null,o.fragmentStage=null,o.computeStage=null,o.descriptor=a,a.vertex&&(o.vertexStage=o.createShaderStage(a.vertex,"vertex")),a.fragment&&(o.fragmentStage=o.createShaderStage(a.fragment,"fragment")),a.compute&&(o.computeStage=o.createShaderStage(a.compute,"compute")),o}return t.prototype.setUniformsLegacy=function(r){},t.prototype.createShaderStage=function(r,n){var i,a,o=r.glsl,u=r.wgsl,c=r.entryPoint,f=r.postprocess,h=!1,p=u;if(!p)try{p=this.device.glsl_compile(o,n,h)}catch(S){throw console.error(S,o),new Error("whoops")}var m=function(S){if(!p.includes(S))return"continue";p=p.replace("var T_".concat(S,": texture_2d<f32>;"),"var T_".concat(S,": texture_depth_2d;")),p=p.replace(new RegExp("textureSample\\(T_".concat(S,"(.*)\\);$"),"gm"),function(A,R){return"vec4<f32>(textureSample(T_".concat(S).concat(R,"), 0.0, 0.0, 0.0);")})};try{for(var _=kf(["u_TextureFramebufferDepth"]),y=_.next();!y.done;y=_.next()){var E=y.value;m(E)}}catch(S){i={error:S}}finally{try{y&&!y.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}f&&(p=f(p));var b=this.device.device.createShaderModule({code:p});return{module:b,entryPoint:c||"main"}},t})(us),Yle=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;o.type=Vr.QueryPool;var u=a.elemCount,c=a.type;return o.querySet=o.device.device.createQuerySet({type:Mle(c),count:u}),o.resolveBuffer=o.device.device.createBuffer({size:u*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),o.cpuBuffer=o.device.device.createBuffer({size:u*8,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),o.results=null,o}return t.prototype.queryResultOcclusion=function(r){return this.results===null?null:this.results[r]!==BigInt(0)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},t})(us),Zle=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=e.call(this,{id:n,device:i})||this;return a.type=Vr.Readback,a}return t.prototype.readTexture=function(r,n,i,a,o,u,c,f){return c===void 0&&(c=0),Ph(this,void 0,void 0,function(){var h,p,m,_,y,E,b,S;return Dh(this,function(A){return h=r,p=0,m=k7(h.gpuTextureformat),_=Math.ceil(a/m.width)*m.length,y=Math.ceil(_/256)*256,E=y*o,b=this.device.createBuffer({usage:ln.STORAGE|ln.MAP_READ|ln.COPY_DST,hint:is.STATIC,viewOrSize:E}),S=this.device.device.createCommandEncoder(),S.copyTextureToBuffer({texture:h.gpuTexture,mipLevel:0,origin:{x:n,y:i,z:Math.max(p,0)}},{buffer:b.gpuBuffer,offset:0,bytesPerRow:y},{width:a,height:o,depthOrArrayLayers:1}),this.device.device.queue.submit([S.finish()]),[2,this.readBuffer(b,0,u.byteLength===E?u:null,c,E,h.format,!0,!1,_,y,o)]})})},t.prototype.readTextureSync=function(r,n,i,a,o,u,c,f){throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},t.prototype.readBuffer=function(r,n,i,a,o,u,c,f,h,p,m){var _=this;n===void 0&&(n=0),i===void 0&&(i=null),o===void 0&&(o=0),u===void 0&&(u=ve.U8_RGB),c===void 0&&(c=!1),h===void 0&&(h=0),p===void 0&&(p=0),m===void 0&&(m=0);var y=r,E=o||y.size,b=i||y.view,S=b&&b.constructor&&b.constructor.BYTES_PER_ELEMENT||R7(u),A=y;if(!(y.usage&ln.MAP_READ&&y.usage&ln.COPY_DST)){var R=this.device.device.createCommandEncoder();A=this.device.createBuffer({usage:ln.STORAGE|ln.MAP_READ|ln.COPY_DST,hint:is.STATIC,viewOrSize:E}),R.copyBufferToBuffer(y.gpuBuffer,n,A.gpuBuffer,0,E),this.device.device.queue.submit([R.finish()])}return new Promise(function(M,P){A.gpuBuffer.mapAsync(n2.READ,n,E).then(function(){var I=A.gpuBuffer.getMappedRange(n,E),w=b;if(c)w===null?w=qL(u,E,!0,I):w=qL(u,w.buffer,void 0,I);else if(w===null)switch(S){case 1:w=new Uint8Array(E),w.set(new Uint8Array(I));break;case 2:w=_.getHalfFloatAsFloatRGBAArrayBuffer(E/2,I);break;case 4:w=new Float32Array(E/4),w.set(new Float32Array(I));break}else switch(S){case 1:w=new Uint8Array(w.buffer),w.set(new Uint8Array(I));break;case 2:w=_.getHalfFloatAsFloatRGBAArrayBuffer(E/2,I,b);break;case 4:var U=b&&b.constructor||Float32Array;w=new U(w.buffer),w.set(new U(I));break}if(h!==p){S===1&&!c&&(h*=2,p*=2);for(var re=new Uint8Array(w.buffer),K=h,H=0,x=1;x<m;++x){H=x*p;for(var N=0;N<h;++N)re[K++]=re[H++]}S!==0&&!c?w=new Float32Array(re.buffer,0,K/4):w=new Uint8Array(re.buffer,0,K)}A.gpuBuffer.unmap(),M(w)},function(I){return P(I)})})},t.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(r,n,i){i||(i=new Float32Array(r));for(var a=new Uint16Array(n);r--;)i[r]=Xle(a[r]);return i},t})(us),YL=(function(){function e(t){this.device=t,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return e.prototype.getEncoder=function(){var t;return((t=this.renderBundle)===null||t===void 0?void 0:t.renderBundleEncoder)||this.gpuRenderPassEncoder},e.prototype.getTextureView=function(t,r){return mr(r<t.mipLevelCount),t.mipLevelCount===1?t.gpuTextureView:t.gpuTexture.createView({baseMipLevel:r,mipLevelCount:1})},e.prototype.setRenderPassDescriptor=function(t){var r,n,i,a,o,u;this.descriptor=t,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var c=t.colorAttachment.length;this.gfxColorAttachment.length=c,this.gfxColorResolveTo.length=c;for(var f=0;f<t.colorAttachment.length;f++){var h=t.colorAttachment[f],p=t.colorResolveTo[f];if(h===null&&p!==null&&(h=p,p=null),this.gfxColorAttachment[f]=h,this.gfxColorResolveTo[f]=p,this.gfxColorAttachmentLevel[f]=((r=t.colorAttachmentLevel)===null||r===void 0?void 0:r[f])||0,this.gfxColorResolveToLevel[f]=((n=t.colorResolveToLevel)===null||n===void 0?void 0:n[f])||0,h!==null){this.gpuColorAttachments[f]===void 0&&(this.gpuColorAttachments[f]={});var m=this.gpuColorAttachments[f];m.view=this.getTextureView(h,((i=this.gfxColorAttachmentLevel)===null||i===void 0?void 0:i[f])||0);var _=(o=(a=t.colorClearColor)===null||a===void 0?void 0:a[f])!==null&&o!==void 0?o:"load";_==="load"?m.loadOp="load":(m.loadOp="clear",m.clearValue=_),m.storeOp=!((u=t.colorStore)===null||u===void 0)&&u[f]?"store":"discard",m.resolveTarget=void 0,p!==null&&(h.sampleCount>1?m.resolveTarget=this.getTextureView(p,this.gfxColorResolveToLevel[f]):m.storeOp="store")}else{this.gpuColorAttachments.length=f,this.gfxColorAttachment.length=f,this.gfxColorResolveTo.length=f;break}}if(this.gfxDepthStencilAttachment=t.depthStencilAttachment,this.gfxDepthStencilResolveTo=t.depthStencilResolveTo,t.depthStencilAttachment){var y=t.depthStencilAttachment,m=this.gpuDepthStencilAttachment;m.view=y.gpuTextureView;var E=!!(Yh(y.format)&Ot.Depth);E?(t.depthClearValue==="load"?m.depthLoadOp="load":(m.depthLoadOp="clear",m.depthClearValue=t.depthClearValue),t.depthStencilStore||this.gfxDepthStencilResolveTo!==null?m.depthStoreOp="store":m.depthStoreOp="discard"):(m.depthLoadOp=void 0,m.depthStoreOp=void 0);var b=!!(Yh(y.format)&Ot.Stencil);b?(t.stencilClearValue==="load"?m.stencilLoadOp="load":(m.stencilLoadOp="clear",m.stencilClearValue=t.stencilClearValue),t.depthStencilStore||this.gfxDepthStencilResolveTo!==null?m.stencilStoreOp="store":m.stencilStoreOp="discard"):(m.stencilLoadOp=void 0,m.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=To(t.occlusionQueryPool)?void 0:Ole(t.occlusionQueryPool)},e.prototype.beginRenderPass=function(t,r){mr(this.gpuRenderPassEncoder===null),this.setRenderPassDescriptor(r),this.frameCommandEncoder=t,this.gpuRenderPassEncoder=this.frameCommandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},e.prototype.flipY=function(t,r){var n=this.device.swapChainHeight;return n-t-r},e.prototype.setViewport=function(t,r,n,i,a,o){a===void 0&&(a=0),o===void 0&&(o=1),this.gpuRenderPassEncoder.setViewport(t,this.flipY(r,i),n,i,a,o)},e.prototype.setScissorRect=function(t,r,n,i){this.gpuRenderPassEncoder.setScissorRect(t,this.flipY(r,i),n,i)},e.prototype.setPipeline=function(t){var r=t,n=Tf(r.gpuRenderPipeline);this.getEncoder().setPipeline(n)},e.prototype.setVertexInput=function(t,r,n){if(t!==null){var i=this.getEncoder(),a=t;n!==null&&i.setIndexBuffer(Rh(n.buffer),Tf(a.indexFormat),n.offset);for(var o=0;o<r.length;o++){var u=r[o];u!==null&&i.setVertexBuffer(o,Rh(u.buffer),u.offset)}}},e.prototype.setBindings=function(t){var r=t,n=this.getEncoder();r.gpuBindGroup.forEach(function(i,a){i&&n.setBindGroup(a,r.gpuBindGroup[a])})},e.prototype.setStencilReference=function(t){this.gpuRenderPassEncoder.setStencilReference(t)},e.prototype.draw=function(t,r,n,i){this.getEncoder().draw(t,r,n,i)},e.prototype.drawIndexed=function(t,r,n,i,a){this.getEncoder().drawIndexed(t,r,n,i,a)},e.prototype.drawIndirect=function(t,r){this.getEncoder().drawIndirect(Rh(t),r)},e.prototype.drawIndexedIndirect=function(t,r){this.getEncoder().drawIndexedIndirect(Rh(t),r)},e.prototype.beginOcclusionQuery=function(t){this.gpuRenderPassEncoder.beginOcclusionQuery(t)},e.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},e.prototype.pushDebugGroup=function(t){this.gpuRenderPassEncoder.pushDebugGroup(t)},e.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(t){this.gpuRenderPassEncoder.insertDebugMarker(t)},e.prototype.beginBundle=function(t){this.renderBundle=t},e.prototype.endBundle=function(){this.renderBundle.finish()},e.prototype.executeBundles=function(t){this.gpuRenderPassEncoder.executeBundles(t.map(function(r){return r.renderBundle}))},e.prototype.finish=function(){var t;(t=this.gpuRenderPassEncoder)===null||t===void 0||t.end(),this.gpuRenderPassEncoder=null;for(var r=0;r<this.gfxColorAttachment.length;r++){var n=this.gfxColorAttachment[r],i=this.gfxColorResolveTo[r];n!==null&&i!==null&&n.sampleCount===1&&this.copyAttachment(i,this.gfxColorAttachmentLevel[r],n,this.gfxColorResolveToLevel[r])}this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.frameCommandEncoder=null},e.prototype.copyAttachment=function(t,r,n,i){mr(n.sampleCount===1);var a={texture:n.gpuTexture,mipLevel:i},o={texture:t.gpuTexture,mipLevel:r};mr(n.width>>>i===t.width>>>r),mr(n.height>>>i===t.height>>>r),mr(!!(n.usage&ci.COPY_SRC)),mr(!!(t.usage&ci.COPY_DST)),this.frameCommandEncoder.copyTextureToTexture(a,o,[t.width,t.height,1])},e})(),Kle=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;return o.type=Vr.RenderPipeline,o.isCreatingAsync=!1,o.gpuRenderPipeline=null,o.descriptor=a,o.device.createRenderPipelineInternal(o,!1),o}return t.prototype.getBindGroupLayout=function(r){return this.gpuRenderPipeline.getBindGroupLayout(r)},t})(us),Qle=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o,u,c=e.call(this,{id:n,device:i})||this;c.type=Vr.Sampler;var f=a.lodMinClamp,h=a.mipmapFilter===hi.NO_MIP?a.lodMinClamp:a.lodMaxClamp,p=(o=a.maxAnisotropy)!==null&&o!==void 0?o:1;return p>1&&mr(a.minFilter===Xn.BILINEAR&&a.magFilter===Xn.BILINEAR&&a.mipmapFilter===hi.LINEAR),c.gpuSampler=c.device.device.createSampler({addressModeU:Dx(a.addressModeU),addressModeV:Dx(a.addressModeV),addressModeW:Dx((u=a.addressModeW)!==null&&u!==void 0?u:a.addressModeU),lodMinClamp:f,lodMaxClamp:h,minFilter:VL(a.minFilter),magFilter:VL(a.magFilter),mipmapFilter:Rle(a.mipmapFilter),compare:a.compareFunction!==void 0?U0(a.compareFunction):void 0,maxAnisotropy:p}),c}return t})(us),d0=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=r.skipCreate,u=r.sampleCount,c=e.call(this,{id:n,device:i})||this;c.type=Vr.Texture,c.flipY=!1;var f=a.format,h=a.dimension,p=a.width,m=a.height,_=a.depthOrArrayLayers,y=a.mipLevelCount,E=a.usage,b=a.pixelStore;return c.flipY=!!b?.unpackFlipY,c.device.createTextureShared({format:f,dimension:h??Rr.TEXTURE_2D,width:p,height:m,depthOrArrayLayers:_??1,mipLevelCount:y??1,usage:E,sampleCount:u??1},c,o),c}return t.prototype.textureFromImageBitmapOrCanvas=function(r,n,i){for(var a=n[0].width,o=n[0].height,u={size:{width:a,height:o,depthOrArrayLayers:i},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},c=r.createTexture(u),f=0;f<n.length;f++)r.queue.copyExternalImageToTexture({source:n[f],flipY:this.flipY},{texture:c,origin:[0,0,f]},[a,o]);return[c,a,o]},t.prototype.isImageBitmapOrCanvases=function(r){var n=r[0];return n instanceof ImageBitmap||n instanceof HTMLCanvasElement||n instanceof OffscreenCanvas},t.prototype.isVideo=function(r){var n=r[0];return n instanceof HTMLVideoElement},t.prototype.setImageData=function(r,n){var i,a=this,o=this.device.device,u,c,f;if(this.isImageBitmapOrCanvases(r))i=Ko(this.textureFromImageBitmapOrCanvas(o,r,this.depthOrArrayLayers),3),u=i[0],c=i[1],f=i[2];else if(this.isVideo(r))u=o.importExternalTexture({source:r[0]});else{var h=k7(this.gpuTextureformat),p=Math.ceil(this.width/h.width)*h.length;r.forEach(function(m){o.queue.writeTexture({texture:a.gpuTexture},m,{bytesPerRow:p},{width:a.width,height:a.height})})}this.width=c,this.height=f,u&&(this.gpuTexture=u),this.gpuTextureView=this.gpuTexture.createView({dimension:Ale(this.dimension)})},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuTexture.destroy()},t})(us),Jle=(function(e){Bn(t,e);function t(r){var n=r.id,i=r.device,a=e.call(this,{id:n,device:i})||this;return a.type=Vr.RenderBundle,a.renderBundleEncoder=a.device.device.createRenderBundleEncoder({colorFormats:[a.device.swapChainFormat]}),a}return t.prototype.finish=function(){this.renderBundle=this.renderBundleEncoder.finish()},t})(us),ece=(function(){function e(t,r,n,i,a,o){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=ci.RENDER_ATTACHMENT|ci.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.frameCommandEncoderPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=ns.UPPER_LEFT,this.clipSpaceNearZ=$h.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=r,this.canvas=n,this.canvasContext=i,this.glsl_compile=a,this.WGSLComposer=o,this.fallbackTexture2D=this.createFallbackTexture(Rr.TEXTURE_2D,In.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(Rr.TEXTURE_2D,In.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(Rr.TEXTURE_2D_ARRAY,In.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(Rr.TEXTURE_3D,In.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(Rr.TEXTURE_CUBE_MAP,In.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:ma.REPEAT,addressModeV:ma.REPEAT,minFilter:Xn.POINT,magFilter:Xn.POINT,mipmapFilter:hi.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:ma.REPEAT,addressModeV:ma.REPEAT,minFilter:Xn.POINT,magFilter:Xn.POINT,mipmapFilter:hi.NEAREST,compareFunction:Wr.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(u){console.error(u.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return e.prototype.destroy=function(){},e.prototype.configureSwapChain=function(t,r){this.swapChainWidth===t&&this.swapChainHeight===r||(this.swapChainWidth=t,this.swapChainHeight=r)},e.prototype.getOnscreenTexture=function(){var t=this.canvasContext.getCurrentTexture(),r=t.createView(),n=new d0({id:0,device:this,descriptor:{format:ve.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:Rr.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return n.depthOrArrayLayers=1,n.sampleCount=1,n.gpuTexture=t,n.gpuTextureView=r,n.name="Onscreen",this.setResourceName(n,"Onscreen Texture"),n},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.canvas},e.prototype.beginFrame=function(){mr(this.frameCommandEncoderPool.length===0)},e.prototype.endFrame=function(){mr(this.frameCommandEncoderPool.every(function(t){return t!==null})),this.device.queue.submit(this.frameCommandEncoderPool.map(function(t){return t.finish()})),this.frameCommandEncoderPool=[]},e.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},e.prototype.createBuffer=function(t){return new qle({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createTexture=function(t){return new d0({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createSampler=function(t){return new Qle({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createRenderTarget=function(t){var r=new d0({id:this.getNextUniqueId(),device:this,descriptor:wn(wn({},t),{dimension:Rr.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:ta.RENDER_TARGET}),sampleCount:t.sampleCount});return r.depthOrArrayLayers=1,r.type=Vr.RenderTarget,r},e.prototype.createRenderTargetFromTexture=function(t){var r=t,n=r.format,i=r.width,a=r.height,o=r.depthOrArrayLayers,u=r.sampleCount,c=r.mipLevelCount,f=r.gpuTexture,h=r.gpuTextureView,p=r.usage;mr(!!(p&ci.RENDER_ATTACHMENT));var m=new d0({id:this.getNextUniqueId(),device:this,descriptor:{format:n,width:i,height:a,depthOrArrayLayers:o,dimension:Rr.TEXTURE_2D,mipLevelCount:c,usage:p},skipCreate:!0});return m.depthOrArrayLayers=o,m.sampleCount=u,m.gpuTexture=f,m.gpuTextureView=h,m},e.prototype.createProgram=function(t){var r,n;return!((r=t.vertex)===null||r===void 0)&&r.glsl&&(t.vertex.glsl=Qh(this.queryVendorInfo(),"vert",t.vertex.glsl)),!((n=t.fragment)===null||n===void 0)&&n.glsl&&(t.fragment.glsl=Qh(this.queryVendorInfo(),"frag",t.fragment.glsl)),new $L({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createProgramSimple=function(t){return new $L({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createTextureShared=function(t,r,n){var i={width:t.width,height:t.height,depthOrArrayLayers:t.depthOrArrayLayers},a=t.mipLevelCount,o=DC(t.format),u=Sle(t.dimension),c=Tle(t.usage);if(r.gpuTextureformat=o,r.dimension=t.dimension,r.format=t.format,r.width=t.width,r.height=t.height,r.depthOrArrayLayers=t.depthOrArrayLayers,r.mipLevelCount=a,r.usage=c,r.sampleCount=t.sampleCount,!n){var f=this.device.createTexture({size:i,mipLevelCount:a,format:o,dimension:u,sampleCount:t.sampleCount,usage:c}),h=f.createView();r.gpuTexture=f,r.gpuTextureView=h}},e.prototype.getFallbackSampler=function(t){var r=t.formatKind;return r===In.Depth&&t.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},e.prototype.getFallbackTexture=function(t){var r=t.dimension,n=t.formatKind;if(r===Rr.TEXTURE_2D)return n===In.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(r===Rr.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(r===Rr.TEXTURE_3D)return this.fallbackTexture3D;if(r===Rr.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},e.prototype.createFallbackTexture=function(t,r){var n=t===Rr.TEXTURE_CUBE_MAP?6:1,i=r===In.Float?ve.U8_RGBA_NORM:ve.D24;return this.createTexture({dimension:t,format:i,usage:ta.SAMPLED,width:1,height:1,depthOrArrayLayers:n,mipLevelCount:1})},e.prototype.createBindings=function(t){return new Gle({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createInputLayout=function(t){return new $le({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createComputePipeline=function(t){return new Wle({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createRenderPipeline=function(t){return new Kle({id:this.getNextUniqueId(),device:this,descriptor:wn({},t)})},e.prototype.createQueryPool=function(t,r){return new Yle({id:this.getNextUniqueId(),device:this,descriptor:{type:t,elemCount:r}})},e.prototype.createRenderPipelineInternal=function(t,r){var n;if(t.gpuRenderPipeline===null){var i=t.descriptor,a=i.program,o=a.vertexStage,u=a.fragmentStage;if(!(o===null||u===null)){var c=i.megaStateDescriptor||{},f=c.stencilBack,h=c.stencilFront,p=oue(c,["stencilBack","stencilFront"]),m=Zh(Kh);i.megaStateDescriptor=wn(wn(wn({},m),{stencilBack:wn(wn({},m.stencilBack),f),stencilFront:wn(wn({},m.stencilFront),h)}),p);var _=i.megaStateDescriptor.attachmentsState[0];i.colorAttachmentFormats.forEach(function(M,P){i.megaStateDescriptor.attachmentsState[P]||(i.megaStateDescriptor.attachmentsState[P]=N7(void 0,_))});var y=Ple((n=i.topology)!==null&&n!==void 0?n:ei.TRIANGLES,i.megaStateDescriptor),E=Fle(i.colorAttachmentFormats,i.megaStateDescriptor),b=Ule(i.depthStencilAttachmentFormat,i.megaStateDescriptor),S=void 0;i.inputLayout!==null&&(S=i.inputLayout.buffers);var A=i.sampleCount,R={layout:"auto",vertex:wn(wn({},o),{buffers:S}),primitive:y,depthStencil:b,multisample:{count:A},fragment:wn(wn({},u),{targets:E})};t.gpuRenderPipeline=this.device.createRenderPipeline(R)}}},e.prototype.createReadback=function(){return new Zle({id:this.getNextUniqueId(),device:this})},e.prototype.createRenderBundle=function(){return new Jle({id:this.getNextUniqueId(),device:this})},e.prototype.createRenderPass=function(t){var r=this.renderPassPool.pop();r===void 0&&(r=new YL(this));var n=this.frameCommandEncoderPool.pop();return n===void 0&&(n=this.device.createCommandEncoder()),r.beginRenderPass(n,t),r},e.prototype.createComputePass=function(){var t=this.computePassPool.pop();t===void 0&&(t=new WL);var r=this.frameCommandEncoderPool.pop();return r===void 0&&(r=this.device.createCommandEncoder()),t.beginComputePass(r),t},e.prototype.submitPass=function(t){var r=t;r instanceof YL?(this.frameCommandEncoderPool.push(r.frameCommandEncoder),r.finish(),this.renderPassPool.push(r)):r instanceof WL&&(this.frameCommandEncoderPool.push(r.frameCommandEncoder),r.finish(),this.computePassPool.push(r))},e.prototype.copySubTexture2D=function(t,r,n,i,a,o,u){var c=this.device.createCommandEncoder(),f=t,h=i,p={texture:h.gpuTexture,origin:[a,o,0],mipLevel:0,aspect:"all"},m={texture:f.gpuTexture,origin:[r,n,0],mipLevel:0,aspect:"all"};mr(!!(h.usage&ci.COPY_SRC)),mr(!!(f.usage&ci.COPY_DST)),c.copyTextureToTexture(p,m,[h.width,h.height,u||1]),this.device.queue.submit([c.finish()])},e.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},e.prototype.queryTextureFormatSupported=function(t,r,n){if(Vle(t)){if(!this.featureTextureCompressionBC)return!1;var i=Hle(t);return r%i!==0||n%i!==0?!1:this.featureTextureCompressionBC}switch(t){case ve.U16_RGBA_NORM:return!1;case ve.F32_RGBA:return!1}return!0},e.prototype.queryPlatformAvailable=function(){return!0},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(t){var r=t;return r.descriptor},e.prototype.queryRenderTarget=function(t){var r=t;return r},e.prototype.setResourceName=function(t,r){if(t.name=r,t.type===Vr.Buffer){var n=t;n.gpuBuffer.label=r}else if(t.type===Vr.Texture){var n=t;n.gpuTexture.label=r,n.gpuTextureView.label=r}else if(t.type===Vr.RenderTarget){var n=t;n.gpuTexture.label=r,n.gpuTextureView.label=r}else if(t.type===Vr.Sampler){var n=t;n.gpuSampler.label=r}else if(t.type===Vr.RenderPipeline){var n=t;n.gpuRenderPipeline!==null&&(n.gpuRenderPipeline.label=r)}},e.prototype.setResourceLeakCheck=function(t,r){},e.prototype.checkForLeaks=function(){},e.prototype.programPatched=function(t){},e.prototype.pipelineQueryReady=function(t){var r=t;return r.gpuRenderPipeline!==null},e.prototype.pipelineForceReady=function(t){var r=t;this.createRenderPipelineInternal(r,!1)},e})(),tce=(function(){function e(t){this.pluginOptions=t}return e.prototype.createSwapChain=function(t){return Ph(this,void 0,void 0,function(){var r,n,i,a,o,u,c,f;return Dh(this,function(h){switch(h.label){case 0:if(globalThis.navigator.gpu===void 0)return[2,null];r=null,h.label=1;case 1:return h.trys.push([1,3,,4]),n=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:n})];case 2:return r=h.sent(),[3,4];case 3:return i=h.sent(),console.log(i),[3,4];case 4:return r===null?[2,null]:(a=["depth32float-stencil8","texture-compression-bc","float32-filterable"],o=a.filter(function(p){return r.features.has(p)}),[4,r.requestDevice({requiredFeatures:o})]);case 5:if(u=h.sent(),u&&(c=this.pluginOptions.onContextLost,u.lost.then(function(){c&&c()})),u===null)return[2,null];if(f=t.getContext("webgpu"),!f)return[2,null];h.label=6;case 6:return h.trys.push([6,8,,9]),[4,U7(this.pluginOptions.shaderCompilerPath)];case 7:return h.sent(),[3,9];case 8:return h.sent(),[3,9];case 9:return[2,new ece(r,u,t,f,gle,Qm&&new Qm)]}})})},e})(),rce=class{constructor(e,t){const{buffer:r,offset:n,stride:i,normalized:a,size:o,divisor:u,shaderLocation:c}=t;this.buffer=r,this.attribute={shaderLocation:c,buffer:r.get(),offset:n||0,stride:i||0,normalized:a||!1,divisor:u||0},o&&(this.attribute.size=o)}get(){return this.buffer}updateBuffer(e){this.buffer.subData(e)}destroy(){this.buffer.destroy()}},Fy={[D.FLOAT]:Float32Array,[D.UNSIGNED_BYTE]:Uint8Array,[D.SHORT]:Int16Array,[D.UNSIGNED_SHORT]:Uint16Array,[D.INT]:Int32Array,[D.UNSIGNED_INT]:Uint32Array},nce={[D.POINTS]:ei.POINTS,[D.LINES]:ei.LINES,[D.LINE_LOOP]:ei.LINES,[D.LINE_STRIP]:ei.LINE_STRIP,[D.TRIANGLES]:ei.TRIANGLES,[D.TRIANGLE_FAN]:ei.TRIANGLES,[D.TRIANGLE_STRIP]:ei.TRIANGLE_STRIP},ice={1:ve.F32_R,2:ve.F32_RG,3:ve.F32_RGB,4:ve.F32_RGBA},ace={[D.STATIC_DRAW]:is.STATIC,[D.DYNAMIC_DRAW]:is.DYNAMIC,[D.STREAM_DRAW]:is.DYNAMIC},ZL={[D.REPEAT]:ma.REPEAT,[D.CLAMP_TO_EDGE]:ma.CLAMP_TO_EDGE,[D.MIRRORED_REPEAT]:ma.MIRRORED_REPEAT},oce={[D.NEVER]:Wr.NEVER,[D.ALWAYS]:Wr.ALWAYS,[D.LESS]:Wr.LESS,[D.LEQUAL]:Wr.LEQUAL,[D.GREATER]:Wr.GREATER,[D.GEQUAL]:Wr.GEQUAL,[D.EQUAL]:Wr.EQUAL,[D.NOTEQUAL]:Wr.NOTEQUAL},sce={[D.FRONT]:Ia.FRONT,[D.BACK]:Ia.BACK},KL={[D.FUNC_ADD]:Si.ADD,[D.MIN_EXT]:Si.MIN,[D.MAX_EXT]:Si.MAX,[D.FUNC_SUBTRACT]:Si.SUBSTRACT,[D.FUNC_REVERSE_SUBTRACT]:Si.REVERSE_SUBSTRACT},h0={[D.ZERO]:xr.ZERO,[D.ONE]:xr.ONE,[D.SRC_COLOR]:xr.SRC,[D.ONE_MINUS_SRC_COLOR]:xr.ONE_MINUS_SRC,[D.SRC_ALPHA]:xr.SRC_ALPHA,[D.ONE_MINUS_SRC_ALPHA]:xr.ONE_MINUS_SRC_ALPHA,[D.DST_COLOR]:xr.DST,[D.ONE_MINUS_DST_COLOR]:xr.ONE_MINUS_DST,[D.DST_ALPHA]:xr.DST_ALPHA,[D.ONE_MINUS_DST_ALPHA]:xr.ONE_MINUS_DST_ALPHA,[D.CONSTANT_COLOR]:xr.CONST,[D.ONE_MINUS_CONSTANT_COLOR]:xr.ONE_MINUS_CONSTANT,[D.CONSTANT_ALPHA]:xr.CONST,[D.ONE_MINUS_CONSTANT_ALPHA]:xr.ONE_MINUS_CONSTANT,[D.SRC_ALPHA_SATURATE]:xr.SRC_ALPHA_SATURATE},hh={[D.REPLACE]:Pn.REPLACE,[D.KEEP]:Pn.KEEP,[D.ZERO]:Pn.ZERO,[D.INVERT]:Pn.INVERT,[D.INCR]:Pn.INCREMENT_CLAMP,[D.DECR]:Pn.DECREMENT_CLAMP,[D.INCR_WRAP]:Pn.INCREMENT_WRAP,[D.DECR_WRAP]:Pn.DECREMENT_WRAP},uce={[D.ALWAYS]:Wr.ALWAYS,[D.EQUAL]:Wr.EQUAL,[D.GEQUAL]:Wr.GEQUAL,[D.GREATER]:Wr.GREATER,[D.LEQUAL]:Wr.LEQUAL,[D.LESS]:Wr.LESS,[D.NEVER]:Wr.NEVER,[D.NOTEQUAL]:Wr.NOTEQUAL},lce={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function Uy(e){return Object.prototype.toString.call(e)in lce}function cce(e,t){const r=e.length,n=Math.ceil(r/3),i=r+n,a=new Float32Array(i);for(let o=0;o<i;o+=4)a[o]=e[o/4*3],a[o+1]=e[o/4*3+1],a[o+2]=e[o/4*3+2],a[o+3]=t;return a}var fce=class{constructor(e,t){this.isDestroyed=!1;const{data:r,usage:n,type:i,isUBO:a,label:o}=t;let u;Uy(r)?u=r:u=new Fy[this.type||D.FLOAT](r),this.type=i,this.size=u.byteLength,this.buffer=e.createBuffer({viewOrSize:u,usage:a?ln.UNIFORM:ln.VERTEX,hint:ace[n||D.STATIC_DRAW]}),o&&e.setResourceName(this.buffer,o)}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:e,offset:t}){let r;Uy(e)?r=e:r=new Fy[this.type||D.FLOAT](e),this.buffer.setSubData(t,new Uint8Array(r.buffer))}};function Zr(e,t=0){return e+=t,e+=e<<10,e+=e>>>6,e>>>0}function z7(e){return e+=e<<3,e^=e>>>11,e+=e<<15,e>>>0}function QL(){return 0}var dce=class{constructor(){this.keys=[],this.values=[]}},p0=class{constructor(e,t){this.keyEqualFunc=e,this.keyHashFunc=t,this.buckets=new Map}findBucketIndex(e,t){for(let r=0;r<e.keys.length;r++)if(this.keyEqualFunc(t,e.keys[r]))return r;return-1}findBucket(e){const t=this.keyHashFunc(e);return this.buckets.get(t)}get(e){const t=this.findBucket(e);if(t===void 0)return null;const r=this.findBucketIndex(t,e);return r<0?null:t.values[r]}add(e,t){const r=this.keyHashFunc(e);this.buckets.get(r)===void 0&&this.buckets.set(r,new dce);const n=this.buckets.get(r);n.keys.push(e),n.values.push(t)}delete(e){const t=this.findBucket(e);if(t===void 0)return;const r=this.findBucketIndex(t,e);r!==-1&&(t.keys.splice(r,1),t.values.splice(r,1))}clear(){this.buckets.clear()}size(){let e=0;for(const t of this.buckets.values())e+=t.values.length;return e}*values(){for(const e of this.buckets.values())for(let t=e.values.length-1;t>=0;t--)yield e.values[t]}};function JL(e,t){return e=Zr(e,t.blendMode),e=Zr(e,t.blendSrcFactor),e=Zr(e,t.blendDstFactor),e}function hce(e,t){return e=JL(e,t.rgbBlendState),e=JL(e,t.alphaBlendState),e=Zr(e,t.channelWriteMask),e}function pce(e,t){return e=Zr(e,t.r<<24|t.g<<16|t.b<<8|t.a),e}function vce(e,t){var r,n,i,a,o,u,c,f;for(let h=0;h<t.attachmentsState.length;h++)e=hce(e,t.attachmentsState[h]);return e=pce(e,t.blendConstant||xE),e=Zr(e,t.depthCompare),e=Zr(e,t.depthWrite?1:0),e=Zr(e,(r=t.stencilFront)==null?void 0:r.compare),e=Zr(e,(n=t.stencilFront)==null?void 0:n.passOp),e=Zr(e,(i=t.stencilFront)==null?void 0:i.failOp),e=Zr(e,(a=t.stencilFront)==null?void 0:a.depthFailOp),e=Zr(e,(o=t.stencilBack)==null?void 0:o.compare),e=Zr(e,(u=t.stencilBack)==null?void 0:u.passOp),e=Zr(e,(c=t.stencilBack)==null?void 0:c.failOp),e=Zr(e,(f=t.stencilBack)==null?void 0:f.depthFailOp),e=Zr(e,t.stencilWrite?1:0),e=Zr(e,t.cullMode),e=Zr(e,t.frontFace?1:0),e=Zr(e,t.polygonOffset?1:0),e}function mce(e){let t=0;t=Zr(t,e.program.id),e.inputLayout!==null&&(t=Zr(t,e.inputLayout.id)),t=vce(t,e.megaStateDescriptor);for(let r=0;r<e.colorAttachmentFormats.length;r++)t=Zr(t,e.colorAttachmentFormats[r]||0);return t=Zr(t,e.depthStencilAttachmentFormat||0),z7(t)}function _ce(e){let t=0;if(e.samplerBindings)for(let r=0;r<e.samplerBindings.length;r++){const n=e.samplerBindings[r];n!==null&&n.texture!==null&&(t=Zr(t,n.texture.id))}if(e.uniformBufferBindings)for(let r=0;r<e.uniformBufferBindings.length;r++){const n=e.uniformBufferBindings[r];n!==null&&n.buffer!==null&&(t=Zr(t,n.buffer.id),t=Zr(t,n.binding),t=Zr(t,n.offset),t=Zr(t,n.size))}if(e.storageBufferBindings)for(let r=0;r<e.storageBufferBindings.length;r++){const n=e.storageBufferBindings[r];n!==null&&n.buffer!==null&&(t=Zr(t,n.buffer.id),t=Zr(t,n.binding),t=Zr(t,n.offset),t=Zr(t,n.size))}if(e.storageTextureBindings)for(let r=0;r<e.storageTextureBindings.length;r++){const n=e.storageTextureBindings[r];n!==null&&n.texture!==null&&(t=Zr(t,n.texture.id),t=Zr(t,n.binding))}return z7(t)}function gce(e,t){var r,n,i,a;return((r=e.vertex)==null?void 0:r.glsl)===((n=t.vertex)==null?void 0:n.glsl)&&((i=e.fragment)==null?void 0:i.glsl)===((a=t.fragment)==null?void 0:a.glsl)}function yce(e){var t,r;return{vertex:{glsl:(t=e.vertex)==null?void 0:t.glsl},fragment:{glsl:(r=e.fragment)==null?void 0:r.glsl}}}var Ece=class{constructor(e){this.device=e,this.bindingsCache=new p0(yue,_ce),this.renderPipelinesCache=new p0(Sue,mce),this.inputLayoutsCache=new p0(Rue,QL),this.programCache=new p0(gce,QL)}createBindings(e){var t;let r=this.bindingsCache.get(e);if(r===null){const n=Mue(e);n.uniformBufferBindings=(t=n.uniformBufferBindings)==null?void 0:t.filter(({size:i})=>i&&i>0),r=this.device.createBindings(n),this.bindingsCache.add(n,r)}return r}createRenderPipeline(e){let t=this.renderPipelinesCache.get(e);if(t===null){const r=wue(e);r.colorAttachmentFormats=r.colorAttachmentFormats.filter(n=>n),t=this.device.createRenderPipeline(r),this.renderPipelinesCache.add(r,t)}return t}createInputLayout(e){e.vertexBufferDescriptors=e.vertexBufferDescriptors.filter(r=>!!r);let t=this.inputLayoutsCache.get(e);if(t===null){const r=Pue(e);t=this.device.createInputLayout(r),this.inputLayoutsCache.add(r,t)}return t}createProgram(e){let t=this.programCache.get(e);if(t===null){const r=yce(e);t=this.device.createProgram(e),this.programCache.add(r,t)}return t}destroy(){for(const e of this.bindingsCache.values())e.destroy();for(const e of this.renderPipelinesCache.values())e.destroy();for(const e of this.inputLayoutsCache.values())e.destroy();for(const e of this.programCache.values())e.destroy();this.bindingsCache.clear(),this.renderPipelinesCache.clear(),this.inputLayoutsCache.clear(),this.programCache.clear()}},bce=class{constructor(e,t){const{data:r,type:n,count:i=0}=t;let a;Uy(r)?a=r:a=new Fy[this.type||D.UNSIGNED_INT](r),this.type=n,this.count=i,this.indexBuffer=e.createBuffer({viewOrSize:a,usage:ln.INDEX})}get(){return this.indexBuffer}subData({data:e}){let t;Uy(e)?t=e:t=new Fy[this.type||D.UNSIGNED_INT](e),this.indexBuffer.setSubData(0,new Uint8Array(t.buffer))}destroy(){this.indexBuffer.destroy()}};function e6(e){return!!(e&&e.texture)}var j7=class{constructor(e,t){this.device=e,this.options=t,this.isDestroy=!1;const{wrapS:r=D.CLAMP_TO_EDGE,wrapT:n=D.CLAMP_TO_EDGE,aniso:i,mag:a=D.NEAREST,min:o=D.NEAREST}=t;this.createTexture(t),this.sampler=e.createSampler({addressModeU:ZL[r],addressModeV:ZL[n],minFilter:o===D.NEAREST?Xn.POINT:Xn.BILINEAR,magFilter:a===D.NEAREST?Xn.POINT:Xn.BILINEAR,mipmapFilter:hi.NO_MIP,maxAnisotropy:i})}createTexture(e){const{type:t=D.UNSIGNED_BYTE,width:r,height:n,flipY:i=!1,format:a=D.RGBA,alignment:o=1,usage:u=zm.SAMPLED,unorm:c=!1,label:f}=e;let{data:h}=e;this.width=r,this.height=n;let p=ve.U8_RGBA_RT;if(t===D.UNSIGNED_BYTE&&a===D.RGBA)p=c?ve.U8_RGBA_NORM:ve.U8_RGBA_RT;else if(t===D.UNSIGNED_BYTE&&a===D.LUMINANCE)p=ve.U8_LUMINANCE;else if(t===D.FLOAT&&a===D.LUMINANCE)p=ve.F32_LUMINANCE;else if(t===D.FLOAT&&a===D.RGB)this.device.queryVendorInfo().platformString==="WebGPU"?(h&&(h=cce(h,0)),p=ve.F32_RGBA):p=ve.F32_RGB;else if(t===D.FLOAT&&a===D.RGBA)p=ve.F32_RGBA;else if(t===D.FLOAT&&a===D.RED)p=ve.F32_R;else throw new Error(`create texture error, type: ${t}, format: ${a}`);this.texture=this.device.createTexture({format:p,width:r,height:n,usage:u===zm.SAMPLED?ta.SAMPLED:ta.RENDER_TARGET,pixelStore:{unpackFlipY:i,packAlignment:o},mipLevelCount:1}),f&&this.device.setResourceName(this.texture,f),h&&this.texture.setImageData([h])}get(){return this.texture}update(e){const{data:t}=e;this.texture.setImageData([t])}bind(){}resize({width:e,height:t}){(this.width!==e||this.height!==t)&&this.destroy(),this.options.width=e,this.options.height=t,this.createTexture(this.options),this.isDestroy=!1}getSize(){return[this.width,this.height]}destroy(){var e;!this.isDestroy&&!this.texture.destroyed&&((e=this.texture)==null||e.destroy()),this.isDestroy=!0}},V7=class{constructor(e,t){this.device=e,this.options=t,this.createColorRenderTarget(),this.createDepthRenderTarget()}createColorRenderTarget(e=!1){const{width:t,height:r,color:n}=this.options;n&&(e6(n)?(e&&n.resize({width:t,height:r}),this.colorTexture=n.get(),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=n.width,this.height=n.height):t&&r&&(this.colorTexture=this.device.createTexture({format:ve.U8_RGBA_RT,usage:ta.RENDER_TARGET,width:t,height:r}),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=t,this.height=r))}createDepthRenderTarget(e=!1){const{width:t,height:r,depth:n}=this.options;n&&(e6(n)?(e&&n.resize({width:t,height:r}),this.depthTexture=n.get(),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=n.width,this.height=n.height):t&&r&&(this.depthTexture=this.device.createTexture({format:ve.D24_S8,usage:ta.RENDER_TARGET,width:t,height:r}),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=t,this.height=r))}get(){return this.colorRenderTarget}destroy(){var e,t;(e=this.colorRenderTarget)==null||e.destroy(),(t=this.depthRenderTarget)==null||t.destroy()}resize({width:e,height:t}){(this.width!==e||this.height!==t)&&(this.destroy(),this.colorTexture.destroyed=!0,this.depthTexture.destroyed=!0,this.options.width=e,this.options.height=t,this.createColorRenderTarget(!0),this.createDepthRenderTarget(!0))}},Tce=Object.defineProperty,Sce=Object.defineProperties,Ace=Object.getOwnPropertyDescriptors,t6=Object.getOwnPropertySymbols,xce=Object.prototype.hasOwnProperty,Rce=Object.prototype.propertyIsEnumerable,r6=(e,t,r)=>t in e?Tce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gf=(e,t)=>{for(var r in t||(t={}))xce.call(t,r)&&r6(e,r,t[r]);if(t6)for(var r of t6(t))Rce.call(t,r)&&r6(e,r,t[r]);return e},Cce=(e,t)=>Sce(e,Ace(t)),{isPlainObject:Oce,isTypedArray:Mce,isNil:n6}=Ln,wce=class{constructor(e,t,r){this.device=e,this.options=t,this.service=r,this.destroyed=!1,this.uniforms={},this.vertexBuffers=[];const{vs:n,fs:i,attributes:a,uniforms:o,count:u,elements:c,diagnosticDerivativeUniformityEnabled:f}=t;this.options=t;const h=f?"":this.service.viewportOrigin===ns.UPPER_LEFT?"diagnostic(off,derivative_uniformity);":"";this.program=r.renderCache.createProgram({vertex:{glsl:n},fragment:{glsl:i,postprocess:y=>h+y}}),o&&(this.uniforms=this.extractUniforms(o));const p=[];let m=0;Object.keys(a).forEach(y=>{const E=a[y],b=E.get();this.vertexBuffers.push(b.get());const{offset:S=0,stride:A=0,size:R=1,divisor:M=0,shaderLocation:P=0}=E.attribute;p.push({arrayStride:A||R*4,stepMode:zf.VERTEX,attributes:[{format:ice[R],shaderLocation:P,offset:S,divisor:M}]}),m=b.size/R}),u||(this.options.count=m),c&&(this.indexBuffer=c.get());const _=r.renderCache.createInputLayout({vertexBufferDescriptors:p,indexBufferFormat:c?ve.U32_R:null,program:this.program});this.inputLayout=_,this.pipeline=this.createPipeline(t)}createPipeline(e,t){var r;const{primitive:n=D.TRIANGLES,depth:i,cull:a,blend:o,stencil:u}=e,c=this.initDepthDrawParams({depth:i}),f=!!(c&&c.enable),h=this.initCullDrawParams({cull:a}),p=!!(h&&h.enable),m=this.getBlendDrawParams({blend:o}),_=!!(m&&m.enable),y=this.getStencilDrawParams({stencil:u}),E=!!(y&&y.enable),b=this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:nce[n],colorAttachmentFormats:[ve.U8_RGBA_RT],depthStencilAttachmentFormat:ve.D24_S8,megaStateDescriptor:{attachmentsState:[t?{channelWriteMask:bi.ALL,rgbBlendState:{blendMode:Si.ADD,blendSrcFactor:xr.ONE,blendDstFactor:xr.ZERO},alphaBlendState:{blendMode:Si.ADD,blendSrcFactor:xr.ONE,blendDstFactor:xr.ZERO}}:{channelWriteMask:E&&y.opFront.zpass===Pn.REPLACE?bi.NONE:bi.ALL,rgbBlendState:{blendMode:_&&m.equation.rgb||Si.ADD,blendSrcFactor:_&&m.func.srcRGB||xr.SRC_ALPHA,blendDstFactor:_&&m.func.dstRGB||xr.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:_&&m.equation.alpha||Si.ADD,blendSrcFactor:_&&m.func.srcAlpha||xr.ONE,blendDstFactor:_&&m.func.dstAlpha||xr.ONE}}],blendConstant:_?xE:void 0,depthWrite:f,depthCompare:f&&c.func||Wr.LESS,cullMode:p&&h.face||Ia.NONE,stencilWrite:E,stencilFront:{compare:E?y.func.cmp:Wr.ALWAYS,passOp:y.opFront.zpass,failOp:y.opFront.fail,depthFailOp:y.opFront.zfail,mask:y.opFront.mask},stencilBack:{compare:E?y.func.cmp:Wr.ALWAYS,passOp:y.opBack.zpass,failOp:y.opBack.fail,depthFailOp:y.opBack.zfail,mask:y.opBack.mask}}});return E&&!n6((r=u?.func)==null?void 0:r.ref)&&(b.stencilFuncReference=u.func.ref),b}updateAttributesAndElements(){}updateAttributes(){}addUniforms(e){this.uniforms=gf(gf({},this.uniforms),this.extractUniforms(e))}draw(e,t){const r=gf(gf({},this.options),e),{count:n=0,instances:i,elements:a,uniforms:o={},uniformBuffers:u,textures:c}=r;this.uniforms=gf(gf({},this.uniforms),this.extractUniforms(o));const{renderPass:f,currentFramebuffer:h,width:p,height:m}=this.service;this.pipeline=this.createPipeline(r,t);const _=this.service.device,y=_.swapChainHeight;if(_.swapChainHeight=h?.height||m,f.setViewport(0,0,h?.width||p,h?.height||m),_.swapChainHeight=y,f.setPipeline(this.pipeline),n6(this.pipeline.stencilFuncReference)||f.setStencilReference(this.pipeline.stencilFuncReference),f.setVertexInput(this.inputLayout,this.vertexBuffers.map(E=>({buffer:E})),a?{buffer:this.indexBuffer,offset:0}:null),u&&(this.bindings=_.createBindings({pipeline:this.pipeline,uniformBufferBindings:u.map((E,b)=>{const S=E;return{binding:b,buffer:S.get(),size:S.size}}),samplerBindings:c?.map(E=>({texture:E.texture,sampler:E.sampler}))})),this.bindings&&(f.setBindings(this.bindings),Object.keys(this.uniforms).forEach(E=>{const b=this.uniforms[E];b instanceof j7?this.uniforms[E]=b.get():b instanceof V7&&(this.uniforms[E]=b.get().texture)}),this.program.setUniformsLegacy(this.uniforms)),a){const E=a.count;E===0?f.draw(n,i):f.drawIndexed(E,i)}else f.draw(n,i)}destroy(){var e,t,r;(e=this.vertexBuffers)==null||e.forEach(n=>n.destroy()),(t=this.indexBuffer)==null||t.destroy(),(r=this.bindings)==null||r.destroy(),this.pipeline.destroy(),this.destroyed=!0}initDepthDrawParams({depth:e}){if(e)return{enable:e.enable===void 0?!0:!!e.enable,mask:e.mask===void 0?!0:!!e.mask,func:oce[e.func||D.LESS],range:e.range||[0,1]}}getBlendDrawParams({blend:e}){const{enable:t,func:r,equation:n,color:i=[0,0,0,0]}=e||{};return{enable:!!t,func:{srcRGB:h0[r&&r.srcRGB||D.SRC_ALPHA],srcAlpha:h0[r&&r.srcAlpha||D.SRC_ALPHA],dstRGB:h0[r&&r.dstRGB||D.ONE_MINUS_SRC_ALPHA],dstAlpha:h0[r&&r.dstAlpha||D.ONE_MINUS_SRC_ALPHA]},equation:{rgb:KL[n&&n.rgb||D.FUNC_ADD],alpha:KL[n&&n.alpha||D.FUNC_ADD]},color:i}}getStencilDrawParams({stencil:e}){const{enable:t,mask:r=4294967295,func:n={cmp:D.ALWAYS,ref:0,mask:4294967295},opFront:i={fail:D.KEEP,zfail:D.KEEP,zpass:D.KEEP},opBack:a={fail:D.KEEP,zfail:D.KEEP,zpass:D.KEEP}}=e||{};return{enable:!!t,mask:r,func:Cce(gf({},n),{cmp:uce[n.cmp]}),opFront:{fail:hh[i.fail],zfail:hh[i.zfail],zpass:hh[i.zpass],mask:n.mask},opBack:{fail:hh[a.fail],zfail:hh[a.zfail],zpass:hh[a.zpass],mask:n.mask}}}initCullDrawParams({cull:e}){if(e){const{enable:t,face:r=D.BACK}=e;return{enable:!!t,face:sce[r]}}}extractUniforms(e){const t={};return Object.keys(e).forEach(r=>{this.extractUniformsRecursively(r,e[r],t,"")}),t}extractUniformsRecursively(e,t,r,n){if(t===null||typeof t=="number"||typeof t=="boolean"||Array.isArray(t)&&typeof t[0]=="number"||Mce(t)||t===""||"resize"in t){r[`${n&&n+"."}${e}`]=t;return}Oce(t)&&Object.keys(t).forEach(i=>{this.extractUniformsRecursively(i,t[i],r,`${n&&n+"."}${e}`)}),Array.isArray(t)&&t.forEach((i,a)=>{Object.keys(i).forEach(o=>{this.extractUniformsRecursively(o,i[o],r,`${n&&n+"."}${e}[${a}]`)})})}};function Nce(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:!!(e&&e._version===2)}var Lx=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{u(r.next(c))}catch(f){i(f)}},o=c=>{try{u(r.throw(c))}catch(f){i(f)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);u((r=r.apply(e,t)).next())}),{isUndefined:v0}=Ln,Ice=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>this.device.queryVendorInfo().platformString,this.createModel=e=>new wce(this.device,e,this),this.createAttribute=e=>new rce(this.device,e),this.createBuffer=e=>new fce(this.device,e),this.createElements=e=>new bce(this.device,e),this.createTexture2D=e=>new j7(this.device,e),this.createFramebuffer=e=>new V7(this.device,e),this.useFramebuffer=(e,t)=>{this.currentFramebuffer=e,this.beginFrame(),t(),this.endFrame(),this.currentFramebuffer=null},this.useFramebufferAsync=(e,t)=>Lx(this,null,function*(){this.currentFramebuffer=e,this.preRenderPass=this.renderPass,this.beginFrame(),yield t(),this.endFrame(),this.currentFramebuffer=null,this.renderPass=this.preRenderPass}),this.clear=e=>{const{color:t,depth:r,stencil:n,framebuffer:i=null}=e;if(i)i.clearOptions={color:t,depth:r,stencil:n};else{const a=this.queryVerdorInfo();if(a==="WebGL1"){const o=this.getGLContext();v0(n)?v0(r)||(o.clearDepth(r),o.clear(o.DEPTH_BUFFER_BIT)):(o.clearStencil(n),o.clear(o.STENCIL_BUFFER_BIT))}else if(a==="WebGL2"){const o=this.getGLContext();v0(n)?v0(r)||o.clearBufferfv(o.DEPTH,0,[r]):o.clearBufferiv(o.STENCIL,0,[n])}}},this.viewport=({width:e,height:t})=>{this.swapChain.configureSwapChain(e,t),this.createMainColorDepthRT(e,t),this.width=e,this.height=t},this.readPixels=e=>{const{framebuffer:t,x:r,y:n,width:i,height:a}=e,o=this.device.createReadback(),u=t.colorTexture,c=o.readTextureSync(u,r,this.viewportOrigin===ns.LOWER_LEFT?n:this.height-n,i,a,new Uint8Array(i*a*4));if(this.viewportOrigin!==ns.LOWER_LEFT)for(let f=0;f<c.length;f+=4){const h=c[f];c[f]=c[f+2],c[f+2]=h}return o.destroy(),c},this.readPixelsAsync=e=>Lx(this,null,function*(){const{framebuffer:t,x:r,y:n,width:i,height:a}=e,o=this.device.createReadback(),u=t.colorTexture,c=yield o.readTexture(u,r,this.viewportOrigin===ns.LOWER_LEFT?n:this.height-n,i,a,new Uint8Array(i*a*4));if(this.viewportOrigin!==ns.LOWER_LEFT)for(let f=0;f<c.length;f+=4){const h=c[f];c[f]=c[f+2],c[f+2]=h}return o.destroy(),c}),this.getViewportSize=()=>({width:this.width,height:this.height}),this.getContainer=()=>{var e;return(e=this.canvas)==null?void 0:e.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.device.gl,this.destroy=()=>{var e;this.canvas=null,(e=this.uniformBuffers)==null||e.forEach(t=>{t.destroy()}),this.device.destroy(),this.renderCache.destroy()}}init(e,t){return Lx(this,null,function*(){const{enableWebGPU:r,shaderCompilerPath:n,antialias:i}=t;this.canvas=e;const o=yield(r?new tce({shaderCompilerPath:n}):new hle({targets:["webgl2","webgl1"],antialias:i,onContextLost(c){console.warn("context lost",c)},onContextCreationError(c){console.warn("context creation error",c)},onContextRestored(c){console.warn("context restored",c)}})).createSwapChain(e);o.configureSwapChain(e.width,e.height),this.device=o.getDevice(),this.swapChain=o,this.renderCache=new Ece(this.device),this.currentFramebuffer=null,this.viewportOrigin=this.device.queryVendorInfo().viewportOrigin;const u=this.device.gl;this.extensionObject={OES_texture_float:!Nce(u)&&this.device.OES_texture_float},this.createMainColorDepthRT(e.width,e.height)})}createMainColorDepthRT(e,t){this.mainColorRT&&this.mainColorRT.destroy(),this.mainDepthRT&&this.mainDepthRT.destroy(),this.mainColorRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:ve.U8_RGBA_RT,width:e,height:t,usage:ta.RENDER_TARGET})),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:ve.D24_S8,width:e,height:t,usage:ta.RENDER_TARGET}))}beginFrame(){this.device.beginFrame();const{currentFramebuffer:e,swapChain:t,mainColorRT:r,mainDepthRT:n}=this,i=e?e.colorRenderTarget:r,a=e?null:t.getOnscreenTexture(),o=e?e.depthRenderTarget:n,{color:u=[0,0,0,0],depth:c=1,stencil:f=0}=e?.clearOptions||{},h=i?m_(u[0]*255,u[1]*255,u[2]*255,u[3]):xE,p=o?c:void 0,m=o?f:void 0,_=this.device.createRenderPass({colorAttachment:[i],colorResolveTo:[a],colorClearColor:[h],colorStore:[!0],depthStencilAttachment:o,depthClearValue:p,stencilClearValue:m});this.renderPass=_}endFrame(){this.device.submitPass(this.renderPass),this.device.endFrame()}getPointSizeRange(){const e=this.device.gl;return e.getParameter(e.ALIASED_POINT_SIZE_RANGE)}testExtension(e){return!!this.getGLContext().getExtension(e)}setState(){}setBaseState(){}setCustomLayerDefaults(){}setDirty(e){this.isDirty=e}getDirty(){return this.isDirty}},k0={exports:{}},Pce=k0.exports,i6;function Dce(){return i6||(i6=1,(function(e,t){(function(r,n){e.exports=n()})(Pce,(function(){var r=function(C){return C instanceof Uint8Array||C instanceof Uint16Array||C instanceof Uint32Array||C instanceof Int8Array||C instanceof Int16Array||C instanceof Int32Array||C instanceof Float32Array||C instanceof Float64Array||C instanceof Uint8ClampedArray},n=function(C,W){for(var ie=Object.keys(W),Re=0;Re<ie.length;++Re)C[ie[Re]]=W[ie[Re]];return C},i=`
`;function a(C){return typeof atob<"u"?atob(C):"base64:"+C}function o(C){var W=new Error("(regl) "+C);throw console.error(W),W}function u(C,W){C||o(W)}function c(C){return C?": "+C:""}function f(C,W,ie){C in W||o("unknown parameter ("+C+")"+c(ie)+". possible values: "+Object.keys(W).join())}function h(C,W){r(C)||o("invalid parameter type"+c(W)+". must be a typed array")}function p(C,W){switch(W){case"number":return typeof C=="number";case"object":return typeof C=="object";case"string":return typeof C=="string";case"boolean":return typeof C=="boolean";case"function":return typeof C=="function";case"undefined":return typeof C>"u";case"symbol":return typeof C=="symbol"}}function m(C,W,ie){p(C,W)||o("invalid parameter type"+c(ie)+". expected "+W+", got "+typeof C)}function _(C,W){C>=0&&(C|0)===C||o("invalid parameter type, ("+C+")"+c(W)+". must be a nonnegative integer")}function y(C,W,ie){W.indexOf(C)<0&&o("invalid value"+c(ie)+". must be one of: "+W)}var E=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function b(C){Object.keys(C).forEach(function(W){E.indexOf(W)<0&&o('invalid regl constructor argument "'+W+'". must be one of '+E)})}function S(C,W){for(C=C+"";C.length<W;)C=" "+C;return C}function A(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function R(C,W){this.number=C,this.line=W,this.errors=[]}function M(C,W,ie){this.file=C,this.line=W,this.message=ie}function P(){var C=new Error,W=(C.stack||C).toString(),ie=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(W);if(ie)return ie[1];var Re=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(W);return Re?Re[1]:"unknown"}function I(){var C=new Error,W=(C.stack||C).toString(),ie=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(W);if(ie)return ie[1];var Re=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(W);return Re?Re[1]:"unknown"}function w(C,W){var ie=C.split(`
`),Re=1,Ge=0,Me={unknown:new A,0:new A};Me.unknown.name=Me[0].name=W||P(),Me.unknown.lines.push(new R(0,""));for(var Ue=0;Ue<ie.length;++Ue){var ut=ie[Ue],ft=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(ut);if(ft)switch(ft[1]){case"line":var Tt=/(\d+)(\s+\d+)?/.exec(ft[2]);Tt&&(Re=Tt[1]|0,Tt[2]&&(Ge=Tt[2]|0,Ge in Me||(Me[Ge]=new A)));break;case"define":var dt=/SHADER_NAME(_B64)?\s+(.*)$/.exec(ft[2]);dt&&(Me[Ge].name=dt[1]?a(dt[2]):dt[2]);break}Me[Ge].lines.push(new R(Re++,ut))}return Object.keys(Me).forEach(function(mt){var Et=Me[mt];Et.lines.forEach(function(nt){Et.index[nt.number]=nt})}),Me}function U(C){var W=[];return C.split(`
`).forEach(function(ie){if(!(ie.length<5)){var Re=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(ie);Re?W.push(new M(Re[1]|0,Re[2]|0,Re[3].trim())):ie.length>0&&W.push(new M("unknown",0,ie))}}),W}function re(C,W){W.forEach(function(ie){var Re=C[ie.file];if(Re){var Ge=Re.index[ie.line];if(Ge){Ge.errors.push(ie),Re.hasErrors=!0;return}}C.unknown.hasErrors=!0,C.unknown.lines[0].errors.push(ie)})}function K(C,W,ie,Re,Ge){if(!C.getShaderParameter(W,C.COMPILE_STATUS)){var Me=C.getShaderInfoLog(W),Ue=Re===C.FRAGMENT_SHADER?"fragment":"vertex";k(ie,"string",Ue+" shader source must be a string",Ge);var ut=w(ie,Ge),ft=U(Me);re(ut,ft),Object.keys(ut).forEach(function(Tt){var dt=ut[Tt];if(!dt.hasErrors)return;var mt=[""],Et=[""];function nt(_t,ye){mt.push(_t),Et.push(ye||"")}nt("file number "+Tt+": "+dt.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),dt.lines.forEach(function(_t){if(_t.errors.length>0){nt(S(_t.number,4)+"|  ","background-color:yellow; font-weight:bold"),nt(_t.line+i,"color:red; background-color:yellow; font-weight:bold");var ye=0;_t.errors.forEach(function(Ie){var lt=Ie.message,xt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(lt);if(xt){var Qe=xt[1];switch(lt=xt[2],Qe){case"assign":Qe="=";break}ye=Math.max(_t.line.indexOf(Qe,ye),0)}else ye=0;nt(S("| ",6)),nt(S("^^^",ye+3)+i,"font-weight:bold"),nt(S("| ",6)),nt(lt+i,"font-weight:bold")}),nt(S("| ",6)+i)}else nt(S(_t.number,4)+"|  "),nt(_t.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(Et[0]=mt.join("%c"),console.log.apply(console,Et)):console.log(mt.join(""))}),u.raise("Error compiling "+Ue+" shader, "+ut[0].name)}}function H(C,W,ie,Re,Ge){if(!C.getProgramParameter(W,C.LINK_STATUS)){var Me=C.getProgramInfoLog(W),Ue=w(ie,Ge),ut=w(Re,Ge),ft='Error linking program with vertex shader, "'+ut[0].name+'", and fragment shader "'+Ue[0].name+'"';typeof document<"u"?console.log("%c"+ft+i+"%c"+Me,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(ft+i+Me),u.raise(ft)}}function x(C){C._commandRef=P()}function N(C,W,ie,Re){x(C);function Ge(ft){return ft?Re.id(ft):0}C._fragId=Ge(C.static.frag),C._vertId=Ge(C.static.vert);function Me(ft,Tt){Object.keys(Tt).forEach(function(dt){ft[Re.id(dt)]=!0})}var Ue=C._uniformSet={};Me(Ue,W.static),Me(Ue,W.dynamic);var ut=C._attributeSet={};Me(ut,ie.static),Me(ut,ie.dynamic),C._hasCount="count"in C.static||"count"in C.dynamic||"elements"in C.static||"elements"in C.dynamic}function j(C,W){var ie=I();o(C+" in command "+(W||P())+(ie==="unknown"?"":" called from "+ie))}function fe(C,W,ie){C||j(W,ie||P())}function O(C,W,ie,Re){C in W||j("unknown parameter ("+C+")"+c(ie)+". possible values: "+Object.keys(W).join(),Re||P())}function k(C,W,ie,Re){p(C,W)||j("invalid parameter type"+c(ie)+". expected "+W+", got "+typeof C,Re||P())}function V(C){C()}function ee(C,W,ie){C.texture?y(C.texture._texture.internalformat,W,"unsupported texture format for attachment"):y(C.renderbuffer._renderbuffer.format,ie,"unsupported renderbuffer format for attachment")}var oe=33071,ge=9728,Ee=9984,De=9985,tt=9986,$e=9987,It=5120,qe=5121,St=5122,ke=5123,_e=5124,ot=5125,Ce=5126,Wt=32819,Xt=32820,bt=33635,Pt=34042,Nt=36193,Jt={};Jt[It]=Jt[qe]=1,Jt[St]=Jt[ke]=Jt[Nt]=Jt[bt]=Jt[Wt]=Jt[Xt]=2,Jt[_e]=Jt[ot]=Jt[Ce]=Jt[Pt]=4;function Br(C,W){return C===Xt||C===Wt||C===bt?2:C===Pt?4:Jt[C]*W}function se(C){return!(C&C-1)&&!!C}function be(C,W,ie){var Re,Ge=W.width,Me=W.height,Ue=W.channels;u(Ge>0&&Ge<=ie.maxTextureSize&&Me>0&&Me<=ie.maxTextureSize,"invalid texture shape"),(C.wrapS!==oe||C.wrapT!==oe)&&u(se(Ge)&&se(Me),"incompatible wrap mode for texture, both width and height must be power of 2"),W.mipmask===1?Ge!==1&&Me!==1&&u(C.minFilter!==Ee&&C.minFilter!==tt&&C.minFilter!==De&&C.minFilter!==$e,"min filter requires mipmap"):(u(se(Ge)&&se(Me),"texture must be a square power of 2 to support mipmapping"),u(W.mipmask===(Ge<<1)-1,"missing or incomplete mipmap data")),W.type===Ce&&(ie.extensions.indexOf("oes_texture_float_linear")<0&&u(C.minFilter===ge&&C.magFilter===ge,"filter not supported, must enable oes_texture_float_linear"),u(!C.genMipmaps,"mipmap generation not supported with float textures"));var ut=W.images;for(Re=0;Re<16;++Re)if(ut[Re]){var ft=Ge>>Re,Tt=Me>>Re;u(W.mipmask&1<<Re,"missing mipmap data");var dt=ut[Re];if(u(dt.width===ft&&dt.height===Tt,"invalid shape for mip images"),u(dt.format===W.format&&dt.internalformat===W.internalformat&&dt.type===W.type,"incompatible type for mip image"),!dt.compressed)if(dt.data){var mt=Math.ceil(Br(dt.type,Ue)*ft/dt.unpackAlignment)*dt.unpackAlignment;u(dt.data.byteLength===mt*Tt,"invalid data for image, buffer size is inconsistent with image format")}else dt.element||dt.copy}else C.genMipmaps||u((W.mipmask&1<<Re)===0,"extra mipmap data");W.compressed&&u(!C.genMipmaps,"mipmap generation for compressed images not supported")}function Fe(C,W,ie,Re){var Ge=C.width,Me=C.height,Ue=C.channels;u(Ge>0&&Ge<=Re.maxTextureSize&&Me>0&&Me<=Re.maxTextureSize,"invalid texture shape"),u(Ge===Me,"cube map must be square"),u(W.wrapS===oe&&W.wrapT===oe,"wrap mode not supported by cube map");for(var ut=0;ut<ie.length;++ut){var ft=ie[ut];u(ft.width===Ge&&ft.height===Me,"inconsistent cube map face shape"),W.genMipmaps&&(u(!ft.compressed,"can not generate mipmap for compressed textures"),u(ft.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Tt=ft.images,dt=0;dt<16;++dt){var mt=Tt[dt];if(mt){var Et=Ge>>dt,nt=Me>>dt;u(ft.mipmask&1<<dt,"missing mipmap data"),u(mt.width===Et&&mt.height===nt,"invalid shape for mip images"),u(mt.format===C.format&&mt.internalformat===C.internalformat&&mt.type===C.type,"incompatible type for mip image"),mt.compressed||(mt.data?u(mt.data.byteLength===Et*nt*Math.max(Br(mt.type,Ue),mt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):mt.element||mt.copy)}}}}var F=n(u,{optional:V,raise:o,commandRaise:j,command:fe,parameter:f,commandParameter:O,constructor:b,type:m,commandType:k,isTypedArray:h,nni:_,oneOf:y,shaderError:K,linkError:H,callSite:I,saveCommandRef:x,saveDrawInfo:N,framebufferFormat:ee,guessCommand:P,texture2D:be,textureCube:Fe}),vt=0,ht=0;function Ft(C,W){this.id=vt++,this.type=C,this.data=W}function sr(C){return C.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function fr(C){if(C.length===0)return[];var W=C.charAt(0),ie=C.charAt(C.length-1);if(C.length>1&&W===ie&&(W==='"'||W==="'"))return['"'+sr(C.substr(1,C.length-2))+'"'];var Re=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(C);if(Re)return fr(C.substr(0,Re.index)).concat(fr(Re[1])).concat(fr(C.substr(Re.index+Re[0].length)));var Ge=C.split(".");if(Ge.length===1)return['"'+sr(C)+'"'];for(var Me=[],Ue=0;Ue<Ge.length;++Ue)Me=Me.concat(fr(Ge[Ue]));return Me}function dr(C){return"["+fr(C).join("][")+"]"}function Fn(C,W){return new Ft(C,dr(W+""))}function En(C){return typeof C=="function"&&!C._reglType||C instanceof Ft}function oi(C,W){return typeof C=="function"?new Ft(ht,C):C}var Kr={DynamicVariable:Ft,define:Fn,isDynamic:En,unbox:oi,accessor:dr},mn={next:typeof requestAnimationFrame=="function"?function(C){return requestAnimationFrame(C)}:function(C){return setTimeout(C,16)},cancel:typeof cancelAnimationFrame=="function"?function(C){return cancelAnimationFrame(C)}:clearTimeout},Hi=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function ra(){var C={"":0},W=[""];return{id:function(ie){var Re=C[ie];return Re||(Re=C[ie]=W.length,W.push(ie),Re)},str:function(ie){return W[ie]}}}function Ba(C,W,ie){var Re=document.createElement("canvas");n(Re.style,{border:0,margin:0,padding:0,top:0,left:0}),C.appendChild(Re),C===document.body&&(Re.style.position="absolute",n(C.style,{margin:0,padding:0}));function Ge(){var ut=window.innerWidth,ft=window.innerHeight;if(C!==document.body){var Tt=C.getBoundingClientRect();ut=Tt.right-Tt.left,ft=Tt.bottom-Tt.top}Re.width=ie*ut,Re.height=ie*ft,n(Re.style,{width:ut+"px",height:ft+"px"})}var Me;C!==document.body&&typeof ResizeObserver=="function"?(Me=new ResizeObserver(function(){setTimeout(Ge)}),Me.observe(C)):window.addEventListener("resize",Ge,!1);function Ue(){Me?Me.disconnect():window.removeEventListener("resize",Ge),C.removeChild(Re)}return Ge(),{canvas:Re,onDestroy:Ue}}function Oo(C,W){function ie(Re){try{return C.getContext(Re,W)}catch{return null}}return ie("webgl")||ie("experimental-webgl")||ie("webgl-experimental")}function Kf(C){return typeof C.nodeName=="string"&&typeof C.appendChild=="function"&&typeof C.getBoundingClientRect=="function"}function Qf(C){return typeof C.drawArrays=="function"||typeof C.drawElements=="function"}function Zs(C){return typeof C=="string"?C.split():(F(Array.isArray(C),"invalid extension array"),C)}function Mo(C){return typeof C=="string"?(F(typeof document<"u","not supported outside of DOM"),document.querySelector(C)):C}function Cc(C){var W=C||{},ie,Re,Ge,Me,Ue={},ut=[],ft=[],Tt=typeof window>"u"?1:window.devicePixelRatio,dt=!1,mt=function(_t){_t&&F.raise(_t)},Et=function(){};if(typeof W=="string"?(F(typeof document<"u","selector queries only supported in DOM enviroments"),ie=document.querySelector(W),F(ie,"invalid query string for element")):typeof W=="object"?Kf(W)?ie=W:Qf(W)?(Me=W,Ge=Me.canvas):(F.constructor(W),"gl"in W?Me=W.gl:"canvas"in W?Ge=Mo(W.canvas):"container"in W&&(Re=Mo(W.container)),"attributes"in W&&(Ue=W.attributes,F.type(Ue,"object","invalid context attributes")),"extensions"in W&&(ut=Zs(W.extensions)),"optionalExtensions"in W&&(ft=Zs(W.optionalExtensions)),"onDone"in W&&(F.type(W.onDone,"function","invalid or missing onDone callback"),mt=W.onDone),"profile"in W&&(dt=!!W.profile),"pixelRatio"in W&&(Tt=+W.pixelRatio,F(Tt>0,"invalid pixel ratio"))):F.raise("invalid arguments to regl"),ie&&(ie.nodeName.toLowerCase()==="canvas"?Ge=ie:Re=ie),!Me){if(!Ge){F(typeof document<"u","must manually specify webgl context outside of DOM environments");var nt=Ba(Re||document.body,mt,Tt);if(!nt)return null;Ge=nt.canvas,Et=nt.onDestroy}Ue.premultipliedAlpha===void 0&&(Ue.premultipliedAlpha=!0),Me=Oo(Ge,Ue)}return Me?{gl:Me,canvas:Ge,container:Re,extensions:ut,optionalExtensions:ft,pixelRatio:Tt,profile:dt,onDone:mt,onDestroy:Et}:(Et(),mt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Jf(C,W){var ie={};function Re(Ue){F.type(Ue,"string","extension name must be string");var ut=Ue.toLowerCase(),ft;try{ft=ie[ut]=C.getExtension(ut)}catch{}return!!ft}for(var Ge=0;Ge<W.extensions.length;++Ge){var Me=W.extensions[Ge];if(!Re(Me))return W.onDestroy(),W.onDone('"'+Me+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return W.optionalExtensions.forEach(Re),{extensions:ie,restore:function(){Object.keys(ie).forEach(function(Ue){if(ie[Ue]&&!Re(Ue))throw new Error("(regl): error restoring extension "+Ue)})}}}function Ri(C,W){for(var ie=Array(C),Re=0;Re<C;++Re)ie[Re]=W(Re);return ie}var Oc=5120,qu=5121,ed=5122,gp=5123,eo=5124,Gn=5125,Ci=5126;function cs(C){for(var W=16;W<=1<<28;W*=16)if(C<=W)return W;return 0}function Ks(C){var W,ie;return W=(C>65535)<<4,C>>>=W,ie=(C>255)<<3,C>>>=ie,W|=ie,ie=(C>15)<<2,C>>>=ie,W|=ie,ie=(C>3)<<1,C>>>=ie,W|=ie,W|C>>1}function Wu(){var C=Ri(8,function(){return[]});function W(Me){var Ue=cs(Me),ut=C[Ks(Ue)>>2];return ut.length>0?ut.pop():new ArrayBuffer(Ue)}function ie(Me){C[Ks(Me.byteLength)>>2].push(Me)}function Re(Me,Ue){var ut=null;switch(Me){case Oc:ut=new Int8Array(W(Ue),0,Ue);break;case qu:ut=new Uint8Array(W(Ue),0,Ue);break;case ed:ut=new Int16Array(W(2*Ue),0,Ue);break;case gp:ut=new Uint16Array(W(2*Ue),0,Ue);break;case eo:ut=new Int32Array(W(4*Ue),0,Ue);break;case Gn:ut=new Uint32Array(W(4*Ue),0,Ue);break;case Ci:ut=new Float32Array(W(4*Ue),0,Ue);break;default:return null}return ut.length!==Ue?ut.subarray(0,Ue):ut}function Ge(Me){ie(Me.buffer)}return{alloc:W,free:ie,allocType:Re,freeType:Ge}}var bn=Wu();bn.zero=Wu();var Mc=3408,Qs=3410,$u=3411,wo=3412,No=3413,fs=3414,to=3415,dn=33901,ds=33902,hs=3379,ga=3386,ro=34921,yp=36347,td=36348,Js=35661,Xi=35660,Fa=34930,na=36349,ti=34076,Io=34024,ia=7936,Oi=7937,Yu=7938,Zu=35724,Ku=34047,Gi=36063,mi=34852,Po=3553,Qu=34067,ps=34069,Ju=33984,aa=6408,ya=5126,Bi=5121,vs=36160,el=36053,tl=36064,ms=16384,rd=function(C,W){var ie=1;W.ext_texture_filter_anisotropic&&(ie=C.getParameter(Ku));var Re=1,Ge=1;W.webgl_draw_buffers&&(Re=C.getParameter(mi),Ge=C.getParameter(Gi));var Me=!!W.oes_texture_float;if(Me){var Ue=C.createTexture();C.bindTexture(Po,Ue),C.texImage2D(Po,0,aa,1,1,0,aa,ya,null);var ut=C.createFramebuffer();if(C.bindFramebuffer(vs,ut),C.framebufferTexture2D(vs,tl,Po,Ue,0),C.bindTexture(Po,null),C.checkFramebufferStatus(vs)!==el)Me=!1;else{C.viewport(0,0,1,1),C.clearColor(1,0,0,1),C.clear(ms);var ft=bn.allocType(ya,4);C.readPixels(0,0,1,1,aa,ya,ft),C.getError()?Me=!1:(C.deleteFramebuffer(ut),C.deleteTexture(Ue),Me=ft[0]===1),bn.freeType(ft)}}var Tt=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),dt=!0;if(!Tt){var mt=C.createTexture(),Et=bn.allocType(Bi,36);C.activeTexture(Ju),C.bindTexture(Qu,mt),C.texImage2D(ps,0,aa,3,3,0,aa,Bi,Et),bn.freeType(Et),C.bindTexture(Qu,null),C.deleteTexture(mt),dt=!C.getError()}return{colorBits:[C.getParameter(Qs),C.getParameter($u),C.getParameter(wo),C.getParameter(No)],depthBits:C.getParameter(fs),stencilBits:C.getParameter(to),subpixelBits:C.getParameter(Mc),extensions:Object.keys(W).filter(function(nt){return!!W[nt]}),maxAnisotropic:ie,maxDrawbuffers:Re,maxColorAttachments:Ge,pointSizeDims:C.getParameter(dn),lineWidthDims:C.getParameter(ds),maxViewportDims:C.getParameter(ga),maxCombinedTextureUnits:C.getParameter(Js),maxCubeMapSize:C.getParameter(ti),maxRenderbufferSize:C.getParameter(Io),maxTextureUnits:C.getParameter(Fa),maxTextureSize:C.getParameter(hs),maxAttributes:C.getParameter(ro),maxVertexUniforms:C.getParameter(yp),maxVertexTextureUnits:C.getParameter(Xi),maxVaryingVectors:C.getParameter(td),maxFragmentUniforms:C.getParameter(na),glsl:C.getParameter(Zu),renderer:C.getParameter(Oi),vendor:C.getParameter(ia),version:C.getParameter(Yu),readFloat:Me,npotTextureCube:dt}};function G(C){return!!C&&typeof C=="object"&&Array.isArray(C.shape)&&Array.isArray(C.stride)&&typeof C.offset=="number"&&C.shape.length===C.stride.length&&(Array.isArray(C.data)||r(C.data))}var Z=function(C){return Object.keys(C).map(function(W){return C[W]})},he={shape:Un,flatten:Zn};function Ve(C,W,ie){for(var Re=0;Re<W;++Re)ie[Re]=C[Re]}function yt(C,W,ie,Re){for(var Ge=0,Me=0;Me<W;++Me)for(var Ue=C[Me],ut=0;ut<ie;++ut)Re[Ge++]=Ue[ut]}function Ut(C,W,ie,Re,Ge,Me){for(var Ue=Me,ut=0;ut<W;++ut)for(var ft=C[ut],Tt=0;Tt<ie;++Tt)for(var dt=ft[Tt],mt=0;mt<Re;++mt)Ge[Ue++]=dt[mt]}function wr(C,W,ie,Re,Ge){for(var Me=1,Ue=ie+1;Ue<W.length;++Ue)Me*=W[Ue];var ut=W[ie];if(W.length-ie===4){var ft=W[ie+1],Tt=W[ie+2],dt=W[ie+3];for(Ue=0;Ue<ut;++Ue)Ut(C[Ue],ft,Tt,dt,Re,Ge),Ge+=Me}else for(Ue=0;Ue<ut;++Ue)wr(C[Ue],W,ie+1,Re,Ge),Ge+=Me}function Zn(C,W,ie,Re){var Ge=1;if(W.length)for(var Me=0;Me<W.length;++Me)Ge*=W[Me];else Ge=0;var Ue=Re||bn.allocType(ie,Ge);switch(W.length){case 0:break;case 1:Ve(C,W[0],Ue);break;case 2:yt(C,W[0],W[1],Ue);break;case 3:Ut(C,W[0],W[1],W[2],Ue,0);break;default:wr(C,W,0,Ue,0)}return Ue}function Un(C){for(var W=[],ie=C;ie.length;ie=ie[0])W.push(ie.length);return W}var qn={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},qi=5120,rl=5122,nl=5124,E_=5121,Ep=5123,b_=5125,wc=5126,Do=5126,Lo={int8:qi,int16:rl,int32:nl,uint8:E_,uint16:Ep,uint32:b_,float:wc,float32:Do},Nc=35048,_s=35040,il={dynamic:Nc,stream:_s,static:35044},al=he.flatten,bp=he.shape,Ic=35044,nd=35040,id=5121,Mi=5126,Wi=[];Wi[5120]=1,Wi[5122]=2,Wi[5124]=4,Wi[5121]=1,Wi[5123]=2,Wi[5125]=4,Wi[5126]=4;function eu(C){return qn[Object.prototype.toString.call(C)]|0}function ol(C,W){for(var ie=0;ie<W.length;++ie)C[ie]=W[ie]}function T_(C,W,ie,Re,Ge,Me,Ue){for(var ut=0,ft=0;ft<ie;++ft)for(var Tt=0;Tt<Re;++Tt)C[ut++]=W[Ge*ft+Me*Tt+Ue]}function Tp(C,W,ie,Re){var Ge=0,Me={};function Ue(ye){this.id=Ge++,this.buffer=C.createBuffer(),this.type=ye,this.usage=Ic,this.byteLength=0,this.dimension=1,this.dtype=id,this.persistentData=null,ie.profile&&(this.stats={size:0})}Ue.prototype.bind=function(){C.bindBuffer(this.type,this.buffer)},Ue.prototype.destroy=function(){Et(this)};var ut=[];function ft(ye,Ie){var lt=ut.pop();return lt||(lt=new Ue(ye)),lt.bind(),mt(lt,Ie,nd,0,1,!1),lt}function Tt(ye){ut.push(ye)}function dt(ye,Ie,lt){ye.byteLength=Ie.byteLength,C.bufferData(ye.type,Ie,lt)}function mt(ye,Ie,lt,xt,Qe,Rt){var ct;if(ye.usage=lt,Array.isArray(Ie)){if(ye.dtype=xt||Mi,Ie.length>0){var Ct;if(Array.isArray(Ie[0])){ct=bp(Ie);for(var et=1,gt=1;gt<ct.length;++gt)et*=ct[gt];ye.dimension=et,Ct=al(Ie,ct,ye.dtype),dt(ye,Ct,lt),Rt?ye.persistentData=Ct:bn.freeType(Ct)}else if(typeof Ie[0]=="number"){ye.dimension=Qe;var Vt=bn.allocType(ye.dtype,Ie.length);ol(Vt,Ie),dt(ye,Vt,lt),Rt?ye.persistentData=Vt:bn.freeType(Vt)}else r(Ie[0])?(ye.dimension=Ie[0].length,ye.dtype=xt||eu(Ie[0])||Mi,Ct=al(Ie,[Ie.length,Ie[0].length],ye.dtype),dt(ye,Ct,lt),Rt?ye.persistentData=Ct:bn.freeType(Ct)):F.raise("invalid buffer data")}}else if(r(Ie))ye.dtype=xt||eu(Ie),ye.dimension=Qe,dt(ye,Ie,lt),Rt&&(ye.persistentData=new Uint8Array(new Uint8Array(Ie.buffer)));else if(G(Ie)){ct=Ie.shape;var tr=Ie.stride,At=Ie.offset,We=0,Ze=0,ir=0,Sr=0;ct.length===1?(We=ct[0],Ze=1,ir=tr[0],Sr=0):ct.length===2?(We=ct[0],Ze=ct[1],ir=tr[0],Sr=tr[1]):F.raise("invalid shape"),ye.dtype=xt||eu(Ie.data)||Mi,ye.dimension=Ze;var Lt=bn.allocType(ye.dtype,We*Ze);T_(Lt,Ie.data,We,Ze,ir,Sr,At),dt(ye,Lt,lt),Rt?ye.persistentData=Lt:bn.freeType(Lt)}else Ie instanceof ArrayBuffer?(ye.dtype=id,ye.dimension=Qe,dt(ye,Ie,lt),Rt&&(ye.persistentData=new Uint8Array(new Uint8Array(Ie)))):F.raise("invalid buffer data")}function Et(ye){W.bufferCount--,Re(ye);var Ie=ye.buffer;F(Ie,"buffer must not be deleted already"),C.deleteBuffer(Ie),ye.buffer=null,delete Me[ye.id]}function nt(ye,Ie,lt,xt){W.bufferCount++;var Qe=new Ue(Ie);Me[Qe.id]=Qe;function Rt(et){var gt=Ic,Vt=null,tr=0,At=0,We=1;return Array.isArray(et)||r(et)||G(et)||et instanceof ArrayBuffer?Vt=et:typeof et=="number"?tr=et|0:et&&(F.type(et,"object","buffer arguments must be an object, a number or an array"),"data"in et&&(F(Vt===null||Array.isArray(Vt)||r(Vt)||G(Vt),"invalid data for buffer"),Vt=et.data),"usage"in et&&(F.parameter(et.usage,il,"invalid buffer usage"),gt=il[et.usage]),"type"in et&&(F.parameter(et.type,Lo,"invalid buffer type"),At=Lo[et.type]),"dimension"in et&&(F.type(et.dimension,"number","invalid dimension"),We=et.dimension|0),"length"in et&&(F.nni(tr,"buffer length must be a nonnegative integer"),tr=et.length|0)),Qe.bind(),Vt?mt(Qe,Vt,gt,At,We,xt):(tr&&C.bufferData(Qe.type,tr,gt),Qe.dtype=At||id,Qe.usage=gt,Qe.dimension=We,Qe.byteLength=tr),ie.profile&&(Qe.stats.size=Qe.byteLength*Wi[Qe.dtype]),Rt}function ct(et,gt){F(gt+et.byteLength<=Qe.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+et.byteLength+" starting from offset "+gt+" to a buffer of size "+Qe.byteLength),C.bufferSubData(Qe.type,gt,et)}function Ct(et,gt){var Vt=(gt||0)|0,tr;if(Qe.bind(),r(et)||et instanceof ArrayBuffer)ct(et,Vt);else if(Array.isArray(et)){if(et.length>0)if(typeof et[0]=="number"){var At=bn.allocType(Qe.dtype,et.length);ol(At,et),ct(At,Vt),bn.freeType(At)}else if(Array.isArray(et[0])||r(et[0])){tr=bp(et);var We=al(et,tr,Qe.dtype);ct(We,Vt),bn.freeType(We)}else F.raise("invalid buffer data")}else if(G(et)){tr=et.shape;var Ze=et.stride,ir=0,Sr=0,Lt=0,ur=0;tr.length===1?(ir=tr[0],Sr=1,Lt=Ze[0],ur=0):tr.length===2?(ir=tr[0],Sr=tr[1],Lt=Ze[0],ur=Ze[1]):F.raise("invalid shape");var ar=Array.isArray(et.data)?Qe.dtype:eu(et.data),pr=bn.allocType(ar,ir*Sr);T_(pr,et.data,ir,Sr,Lt,ur,et.offset),ct(pr,Vt),bn.freeType(pr)}else F.raise("invalid data for buffer subdata");return Rt}return lt||Rt(ye),Rt._reglType="buffer",Rt._buffer=Qe,Rt.subdata=Ct,ie.profile&&(Rt.stats=Qe.stats),Rt.destroy=function(){Et(Qe)},Rt}function _t(){Z(Me).forEach(function(ye){ye.buffer=C.createBuffer(),C.bindBuffer(ye.type,ye.buffer),C.bufferData(ye.type,ye.persistentData||ye.byteLength,ye.usage)})}return ie.profile&&(W.getTotalBufferSize=function(){var ye=0;return Object.keys(Me).forEach(function(Ie){ye+=Me[Ie].stats.size}),ye}),{create:nt,createStream:ft,destroyStream:Tt,clear:function(){Z(Me).forEach(Et),ut.forEach(Et)},getBuffer:function(ye){return ye&&ye._buffer instanceof Ue?ye._buffer:null},restore:_t,_initBuffer:mt}}var Sp=0,Pc=0,ad=1,S_=1,zE=4,jE=4,sl={points:Sp,point:Pc,lines:ad,line:S_,triangles:zE,triangle:jE,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ap=0,VE=1,Dc=4,HE=5120,ul=5121,A_=5122,tu=5123,x_=5124,ru=5125,xp=34963,XE=35040,Rp=35044;function GE(C,W,ie,Re){var Ge={},Me=0,Ue={uint8:ul,uint16:tu};W.oes_element_index_uint&&(Ue.uint32=ru);function ut(_t){this.id=Me++,Ge[this.id]=this,this.buffer=_t,this.primType=Dc,this.vertCount=0,this.type=0}ut.prototype.bind=function(){this.buffer.bind()};var ft=[];function Tt(_t){var ye=ft.pop();return ye||(ye=new ut(ie.create(null,xp,!0,!1)._buffer)),mt(ye,_t,XE,-1,-1,0,0),ye}function dt(_t){ft.push(_t)}function mt(_t,ye,Ie,lt,xt,Qe,Rt){_t.buffer.bind();var ct;if(ye){var Ct=Rt;!Rt&&(!r(ye)||G(ye)&&!r(ye.data))&&(Ct=W.oes_element_index_uint?ru:tu),ie._initBuffer(_t.buffer,ye,Ie,Ct,3)}else C.bufferData(xp,Qe,Ie),_t.buffer.dtype=ct||ul,_t.buffer.usage=Ie,_t.buffer.dimension=3,_t.buffer.byteLength=Qe;if(ct=Rt,!Rt){switch(_t.buffer.dtype){case ul:case HE:ct=ul;break;case tu:case A_:ct=tu;break;case ru:case x_:ct=ru;break;default:F.raise("unsupported type for element array")}_t.buffer.dtype=ct}_t.type=ct,F(ct!==ru||!!W.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var et=xt;et<0&&(et=_t.buffer.byteLength,ct===tu?et>>=1:ct===ru&&(et>>=2)),_t.vertCount=et;var gt=lt;if(lt<0){gt=Dc;var Vt=_t.buffer.dimension;Vt===1&&(gt=Ap),Vt===2&&(gt=VE),Vt===3&&(gt=Dc)}_t.primType=gt}function Et(_t){Re.elementsCount--,F(_t.buffer!==null,"must not double destroy elements"),delete Ge[_t.id],_t.buffer.destroy(),_t.buffer=null}function nt(_t,ye){var Ie=ie.create(null,xp,!0),lt=new ut(Ie._buffer);Re.elementsCount++;function xt(Qe){if(!Qe)Ie(),lt.primType=Dc,lt.vertCount=0,lt.type=ul;else if(typeof Qe=="number")Ie(Qe),lt.primType=Dc,lt.vertCount=Qe|0,lt.type=ul;else{var Rt=null,ct=Rp,Ct=-1,et=-1,gt=0,Vt=0;Array.isArray(Qe)||r(Qe)||G(Qe)?Rt=Qe:(F.type(Qe,"object","invalid arguments for elements"),"data"in Qe&&(Rt=Qe.data,F(Array.isArray(Rt)||r(Rt)||G(Rt),"invalid data for element buffer")),"usage"in Qe&&(F.parameter(Qe.usage,il,"invalid element buffer usage"),ct=il[Qe.usage]),"primitive"in Qe&&(F.parameter(Qe.primitive,sl,"invalid element buffer primitive"),Ct=sl[Qe.primitive]),"count"in Qe&&(F(typeof Qe.count=="number"&&Qe.count>=0,"invalid vertex count for elements"),et=Qe.count|0),"type"in Qe&&(F.parameter(Qe.type,Ue,"invalid buffer type"),Vt=Ue[Qe.type]),"length"in Qe?gt=Qe.length|0:(gt=et,Vt===tu||Vt===A_?gt*=2:(Vt===ru||Vt===x_)&&(gt*=4))),mt(lt,Rt,ct,Ct,et,gt,Vt)}return xt}return xt(_t),xt._reglType="elements",xt._elements=lt,xt.subdata=function(Qe,Rt){return Ie.subdata(Qe,Rt),xt},xt.destroy=function(){Et(lt)},xt}return{create:nt,createStream:Tt,destroyStream:dt,getElements:function(_t){return typeof _t=="function"&&_t._elements instanceof ut?_t._elements:null},clear:function(){Z(Ge).forEach(Et)}}}var R_=new Float32Array(1),qE=new Uint32Array(R_.buffer),C_=5123;function O_(C){for(var W=bn.allocType(C_,C.length),ie=0;ie<C.length;++ie)if(isNaN(C[ie]))W[ie]=65535;else if(C[ie]===1/0)W[ie]=31744;else if(C[ie]===-1/0)W[ie]=64512;else{R_[0]=C[ie];var Re=qE[0],Ge=Re>>>31<<15,Me=(Re<<1>>>24)-127,Ue=Re>>13&1023;if(Me<-24)W[ie]=Ge;else if(Me<-14){var ut=-14-Me;W[ie]=Ge+(Ue+1024>>ut)}else Me>15?W[ie]=Ge+31744:W[ie]=Ge+(Me+15<<10)+Ue}return W}function xn(C){return Array.isArray(C)||r(C)}var M_=function(C){return!(C&C-1)&&!!C},WE=34467,Bo=3553,w_=34067,od=34069,nu=6408,Cp=6406,ll=6407,Fo=6409,sd=6410,Op=32854,ud=32855,Mp=36194,N_=32819,I_=32820,cl=33635,$E=34042,wp=6402,ld=34041,cd=35904,fd=35906,no=36193,iu=33776,Np=33777,fl=33778,dd=33779,Ip=35986,hd=35987,pd=34798,Pp=35840,Dp=35841,Lp=35842,P_=35843,D_=36196,dl=5121,Bp=5123,Fp=5125,_i=5126,Lc=10242,L_=10243,B_=10497,vd=33071,F_=33648,Up=10240,YE=10241,gs=9728,kp=9729,au=9984,md=9985,zp=9986,Uo=9987,hl=33170,pl=4352,U_=4353,ou=4354,k_=34046,z_=3317,j_=37440,ZE=37441,KE=37443,V_=37444,Bc=33984,H_=[au,zp,md,Uo],vl=[0,Fo,sd,ll,nu],kn={};kn[Fo]=kn[Cp]=kn[wp]=1,kn[ld]=kn[sd]=2,kn[ll]=kn[cd]=3,kn[nu]=kn[fd]=4;function su(C){return"[object "+C+"]"}var oa=su("HTMLCanvasElement"),sa=su("OffscreenCanvas"),uu=su("CanvasRenderingContext2D"),_d=su("ImageBitmap"),Fc=su("HTMLImageElement"),Uc=su("HTMLVideoElement"),jp=Object.keys(qn).concat([oa,sa,uu,_d,Fc,Uc]),Ua=[];Ua[dl]=1,Ua[_i]=4,Ua[no]=2,Ua[Bp]=2,Ua[Fp]=4;var ri=[];ri[Op]=2,ri[ud]=2,ri[Mp]=2,ri[ld]=4,ri[iu]=.5,ri[Np]=.5,ri[fl]=1,ri[dd]=1,ri[Ip]=.5,ri[hd]=1,ri[pd]=1,ri[Pp]=.5,ri[Dp]=.25,ri[Lp]=.5,ri[P_]=.25,ri[D_]=.5;function kc(C){return Array.isArray(C)&&(C.length===0||typeof C[0]=="number")}function lu(C){if(!Array.isArray(C))return!1;var W=C.length;return!(W===0||!xn(C[0]))}function cu(C){return Object.prototype.toString.call(C)}function $i(C){return cu(C)===oa}function gd(C){return cu(C)===sa}function ko(C){return cu(C)===uu}function X_(C){return cu(C)===_d}function yd(C){return cu(C)===Fc}function fu(C){return cu(C)===Uc}function zc(C){if(!C)return!1;var W=cu(C);return jp.indexOf(W)>=0?!0:kc(C)||lu(C)||G(C)}function Ed(C){return qn[Object.prototype.toString.call(C)]|0}function ml(C,W){var ie=W.length;switch(C.type){case dl:case Bp:case Fp:case _i:var Re=bn.allocType(C.type,ie);Re.set(W),C.data=Re;break;case no:C.data=O_(W);break;default:F.raise("unsupported texture type, must specify a typed array")}}function du(C,W){return bn.allocType(C.type===no?_i:C.type,W)}function jc(C,W){C.type===no?(C.data=O_(W),bn.freeType(W)):C.data=W}function bd(C,W,ie,Re,Ge,Me){for(var Ue=C.width,ut=C.height,ft=C.channels,Tt=Ue*ut*ft,dt=du(C,Tt),mt=0,Et=0;Et<ut;++Et)for(var nt=0;nt<Ue;++nt)for(var _t=0;_t<ft;++_t)dt[mt++]=W[ie*nt+Re*Et+Ge*_t+Me];jc(C,dt)}function Fi(C,W,ie,Re,Ge,Me){var Ue;if(typeof ri[C]<"u"?Ue=ri[C]:Ue=kn[C]*Ua[W],Me&&(Ue*=6),Ge){for(var ut=0,ft=ie;ft>=1;)ut+=Ue*ft*ft,ft/=2;return ut}else return Ue*ie*Re}function Ea(C,W,ie,Re,Ge,Me,Ue){var ut={"don't care":pl,"dont care":pl,nice:ou,fast:U_},ft={repeat:B_,clamp:vd,mirror:F_},Tt={nearest:gs,linear:kp},dt=n({mipmap:Uo,"nearest mipmap nearest":au,"linear mipmap nearest":md,"nearest mipmap linear":zp,"linear mipmap linear":Uo},Tt),mt={none:0,browser:V_},Et={uint8:dl,rgba4:N_,rgb565:cl,"rgb5 a1":I_},nt={alpha:Cp,luminance:Fo,"luminance alpha":sd,rgb:ll,rgba:nu,rgba4:Op,"rgb5 a1":ud,rgb565:Mp},_t={};W.ext_srgb&&(nt.srgb=cd,nt.srgba=fd),W.oes_texture_float&&(Et.float32=Et.float=_i),W.oes_texture_half_float&&(Et.float16=Et["half float"]=no),W.webgl_depth_texture&&(n(nt,{depth:wp,"depth stencil":ld}),n(Et,{uint16:Bp,uint32:Fp,"depth stencil":$E})),W.webgl_compressed_texture_s3tc&&n(_t,{"rgb s3tc dxt1":iu,"rgba s3tc dxt1":Np,"rgba s3tc dxt3":fl,"rgba s3tc dxt5":dd}),W.webgl_compressed_texture_atc&&n(_t,{"rgb atc":Ip,"rgba atc explicit alpha":hd,"rgba atc interpolated alpha":pd}),W.webgl_compressed_texture_pvrtc&&n(_t,{"rgb pvrtc 4bppv1":Pp,"rgb pvrtc 2bppv1":Dp,"rgba pvrtc 4bppv1":Lp,"rgba pvrtc 2bppv1":P_}),W.webgl_compressed_texture_etc1&&(_t["rgb etc1"]=D_);var ye=Array.prototype.slice.call(C.getParameter(WE));Object.keys(_t).forEach(function(J){var we=_t[J];ye.indexOf(we)>=0&&(nt[J]=we)});var Ie=Object.keys(nt);ie.textureFormats=Ie;var lt=[];Object.keys(nt).forEach(function(J){var we=nt[J];lt[we]=J});var xt=[];Object.keys(Et).forEach(function(J){var we=Et[J];xt[we]=J});var Qe=[];Object.keys(Tt).forEach(function(J){var we=Tt[J];Qe[we]=J});var Rt=[];Object.keys(dt).forEach(function(J){var we=dt[J];Rt[we]=J});var ct=[];Object.keys(ft).forEach(function(J){var we=ft[J];ct[we]=J});var Ct=Ie.reduce(function(J,we){var xe=nt[we];return xe===Fo||xe===Cp||xe===Fo||xe===sd||xe===wp||xe===ld||W.ext_srgb&&(xe===cd||xe===fd)?J[xe]=xe:xe===ud||we.indexOf("rgba")>=0?J[xe]=nu:J[xe]=ll,J},{});function et(){this.internalformat=nu,this.format=nu,this.type=dl,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=V_,this.width=0,this.height=0,this.channels=0}function gt(J,we){J.internalformat=we.internalformat,J.format=we.format,J.type=we.type,J.compressed=we.compressed,J.premultiplyAlpha=we.premultiplyAlpha,J.flipY=we.flipY,J.unpackAlignment=we.unpackAlignment,J.colorSpace=we.colorSpace,J.width=we.width,J.height=we.height,J.channels=we.channels}function Vt(J,we){if(!(typeof we!="object"||!we)){if("premultiplyAlpha"in we&&(F.type(we.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),J.premultiplyAlpha=we.premultiplyAlpha),"flipY"in we&&(F.type(we.flipY,"boolean","invalid texture flip"),J.flipY=we.flipY),"alignment"in we&&(F.oneOf(we.alignment,[1,2,4,8],"invalid texture unpack alignment"),J.unpackAlignment=we.alignment),"colorSpace"in we&&(F.parameter(we.colorSpace,mt,"invalid colorSpace"),J.colorSpace=mt[we.colorSpace]),"type"in we){var xe=we.type;F(W.oes_texture_float||!(xe==="float"||xe==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),F(W.oes_texture_half_float||!(xe==="half float"||xe==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),F(W.webgl_depth_texture||!(xe==="uint16"||xe==="uint32"||xe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),F.parameter(xe,Et,"invalid texture type"),J.type=Et[xe]}var Mt=J.width,rr=J.height,Ir=J.channels,X=!1;"shape"in we?(F(Array.isArray(we.shape)&&we.shape.length>=2,"shape must be an array"),Mt=we.shape[0],rr=we.shape[1],we.shape.length===3&&(Ir=we.shape[2],F(Ir>0&&Ir<=4,"invalid number of channels"),X=!0),F(Mt>=0&&Mt<=ie.maxTextureSize,"invalid width"),F(rr>=0&&rr<=ie.maxTextureSize,"invalid height")):("radius"in we&&(Mt=rr=we.radius,F(Mt>=0&&Mt<=ie.maxTextureSize,"invalid radius")),"width"in we&&(Mt=we.width,F(Mt>=0&&Mt<=ie.maxTextureSize,"invalid width")),"height"in we&&(rr=we.height,F(rr>=0&&rr<=ie.maxTextureSize,"invalid height")),"channels"in we&&(Ir=we.channels,F(Ir>0&&Ir<=4,"invalid number of channels"),X=!0)),J.width=Mt|0,J.height=rr|0,J.channels=Ir|0;var $=!1;if("format"in we){var ne=we.format;F(W.webgl_depth_texture||!(ne==="depth"||ne==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),F.parameter(ne,nt,"invalid texture format");var Te=J.internalformat=nt[ne];J.format=Ct[Te],ne in Et&&("type"in we||(J.type=Et[ne])),ne in _t&&(J.compressed=!0),$=!0}!X&&$?J.channels=kn[J.format]:X&&!$?J.channels!==vl[J.format]&&(J.format=J.internalformat=vl[J.channels]):$&&X&&F(J.channels===kn[J.format],"number of channels inconsistent with specified format")}}function tr(J){C.pixelStorei(j_,J.flipY),C.pixelStorei(ZE,J.premultiplyAlpha),C.pixelStorei(KE,J.colorSpace),C.pixelStorei(z_,J.unpackAlignment)}function At(){et.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function We(J,we){var xe=null;if(zc(we)?xe=we:we&&(F.type(we,"object","invalid pixel data type"),Vt(J,we),"x"in we&&(J.xOffset=we.x|0),"y"in we&&(J.yOffset=we.y|0),zc(we.data)&&(xe=we.data)),F(!J.compressed||xe instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),we.copy){F(!xe,"can not specify copy and data field for the same texture");var Mt=Ge.viewportWidth,rr=Ge.viewportHeight;J.width=J.width||Mt-J.xOffset,J.height=J.height||rr-J.yOffset,J.needsCopy=!0,F(J.xOffset>=0&&J.xOffset<Mt&&J.yOffset>=0&&J.yOffset<rr&&J.width>0&&J.width<=Mt&&J.height>0&&J.height<=rr,"copy texture read out of bounds")}else if(!xe)J.width=J.width||1,J.height=J.height||1,J.channels=J.channels||4;else if(r(xe))J.channels=J.channels||4,J.data=xe,!("type"in we)&&J.type===dl&&(J.type=Ed(xe));else if(kc(xe))J.channels=J.channels||4,ml(J,xe),J.alignment=1,J.needsFree=!0;else if(G(xe)){var Ir=xe.data;!Array.isArray(Ir)&&J.type===dl&&(J.type=Ed(Ir));var X=xe.shape,$=xe.stride,ne,Te,Se,ae,de,pe;X.length===3?(Se=X[2],pe=$[2]):(F(X.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Se=1,pe=1),ne=X[0],Te=X[1],ae=$[0],de=$[1],J.alignment=1,J.width=ne,J.height=Te,J.channels=Se,J.format=J.internalformat=vl[Se],J.needsFree=!0,bd(J,Ir,ae,de,pe,xe.offset)}else if($i(xe)||gd(xe)||ko(xe))$i(xe)||gd(xe)?J.element=xe:J.element=xe.canvas,J.width=J.element.width,J.height=J.element.height,J.channels=4;else if(X_(xe))J.element=xe,J.width=xe.width,J.height=xe.height,J.channels=4;else if(yd(xe))J.element=xe,J.width=xe.naturalWidth,J.height=xe.naturalHeight,J.channels=4;else if(fu(xe))J.element=xe,J.width=xe.videoWidth,J.height=xe.videoHeight,J.channels=4;else if(lu(xe)){var Q=J.width||xe[0].length,ue=J.height||xe.length,Y=J.channels;xn(xe[0][0])?Y=Y||xe[0][0].length:Y=Y||1;for(var le=he.shape(xe),Oe=1,Be=0;Be<le.length;++Be)Oe*=le[Be];var rt=du(J,Oe);he.flatten(xe,le,"",rt),jc(J,rt),J.alignment=1,J.width=Q,J.height=ue,J.channels=Y,J.format=J.internalformat=vl[Y],J.needsFree=!0}J.type===_i?F(ie.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):J.type===no&&F(ie.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Ze(J,we,xe){var Mt=J.element,rr=J.data,Ir=J.internalformat,X=J.format,$=J.type,ne=J.width,Te=J.height;tr(J),Mt?C.texImage2D(we,xe,X,X,$,Mt):J.compressed?C.compressedTexImage2D(we,xe,Ir,ne,Te,0,rr):J.needsCopy?(Re(),C.copyTexImage2D(we,xe,X,J.xOffset,J.yOffset,ne,Te,0)):C.texImage2D(we,xe,X,ne,Te,0,X,$,rr||null)}function ir(J,we,xe,Mt,rr){var Ir=J.element,X=J.data,$=J.internalformat,ne=J.format,Te=J.type,Se=J.width,ae=J.height;tr(J),Ir?C.texSubImage2D(we,rr,xe,Mt,ne,Te,Ir):J.compressed?C.compressedTexSubImage2D(we,rr,xe,Mt,$,Se,ae,X):J.needsCopy?(Re(),C.copyTexSubImage2D(we,rr,xe,Mt,J.xOffset,J.yOffset,Se,ae)):C.texSubImage2D(we,rr,xe,Mt,Se,ae,ne,Te,X)}var Sr=[];function Lt(){return Sr.pop()||new At}function ur(J){J.needsFree&&bn.freeType(J.data),At.call(J),Sr.push(J)}function ar(){et.call(this),this.genMipmaps=!1,this.mipmapHint=pl,this.mipmask=0,this.images=Array(16)}function pr(J,we,xe){var Mt=J.images[0]=Lt();J.mipmask=1,Mt.width=J.width=we,Mt.height=J.height=xe,Mt.channels=J.channels=4}function Ar(J,we){var xe=null;if(zc(we))xe=J.images[0]=Lt(),gt(xe,J),We(xe,we),J.mipmask=1;else if(Vt(J,we),Array.isArray(we.mipmap))for(var Mt=we.mipmap,rr=0;rr<Mt.length;++rr)xe=J.images[rr]=Lt(),gt(xe,J),xe.width>>=rr,xe.height>>=rr,We(xe,Mt[rr]),J.mipmask|=1<<rr;else xe=J.images[0]=Lt(),gt(xe,J),We(xe,we),J.mipmask=1;gt(J,J.images[0]),J.compressed&&(J.internalformat===iu||J.internalformat===Np||J.internalformat===fl||J.internalformat===dd)&&F(J.width%4===0&&J.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Qr(J,we){for(var xe=J.images,Mt=0;Mt<xe.length;++Mt){if(!xe[Mt])return;Ze(xe[Mt],we,Mt)}}var Yn=[];function Er(){var J=Yn.pop()||new ar;et.call(J),J.mipmask=0;for(var we=0;we<16;++we)J.images[we]=null;return J}function jn(J){for(var we=J.images,xe=0;xe<we.length;++xe)we[xe]&&ur(we[xe]),we[xe]=null;Yn.push(J)}function tn(){this.minFilter=gs,this.magFilter=gs,this.wrapS=vd,this.wrapT=vd,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=pl}function Tn(J,we){if("min"in we){var xe=we.min;F.parameter(xe,dt),J.minFilter=dt[xe],H_.indexOf(J.minFilter)>=0&&!("faces"in we)&&(J.genMipmaps=!0)}if("mag"in we){var Mt=we.mag;F.parameter(Mt,Tt),J.magFilter=Tt[Mt]}var rr=J.wrapS,Ir=J.wrapT;if("wrap"in we){var X=we.wrap;typeof X=="string"?(F.parameter(X,ft),rr=Ir=ft[X]):Array.isArray(X)&&(F.parameter(X[0],ft),F.parameter(X[1],ft),rr=ft[X[0]],Ir=ft[X[1]])}else{if("wrapS"in we){var $=we.wrapS;F.parameter($,ft),rr=ft[$]}if("wrapT"in we){var ne=we.wrapT;F.parameter(ne,ft),Ir=ft[ne]}}if(J.wrapS=rr,J.wrapT=Ir,"anisotropic"in we){var Te=we.anisotropic;F(typeof Te=="number"&&Te>=1&&Te<=ie.maxAnisotropic,"aniso samples must be between 1 and "),J.anisotropic=we.anisotropic}if("mipmap"in we){var Se=!1;switch(typeof we.mipmap){case"string":F.parameter(we.mipmap,ut,"invalid mipmap hint"),J.mipmapHint=ut[we.mipmap],J.genMipmaps=!0,Se=!0;break;case"boolean":Se=J.genMipmaps=we.mipmap;break;case"object":F(Array.isArray(we.mipmap),"invalid mipmap type"),J.genMipmaps=!1,Se=!0;break;default:F.raise("invalid mipmap type")}Se&&!("min"in we)&&(J.minFilter=au)}}function Sn(J,we){C.texParameteri(we,YE,J.minFilter),C.texParameteri(we,Up,J.magFilter),C.texParameteri(we,Lc,J.wrapS),C.texParameteri(we,L_,J.wrapT),W.ext_texture_filter_anisotropic&&C.texParameteri(we,k_,J.anisotropic),J.genMipmaps&&(C.hint(hl,J.mipmapHint),C.generateMipmap(we))}var Vn=0,cn={},Fr=ie.maxTextureUnits,Cn=Array(Fr).map(function(){return null});function hr(J){et.call(this),this.mipmask=0,this.internalformat=nu,this.id=Vn++,this.refCount=1,this.target=J,this.texture=C.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new tn,Ue.profile&&(this.stats={size:0})}function Xr(J){C.activeTexture(Bc),C.bindTexture(J.target,J.texture)}function Ur(){var J=Cn[0];J?C.bindTexture(J.target,J.texture):C.bindTexture(Bo,null)}function $t(J){var we=J.texture;F(we,"must not double destroy texture");var xe=J.unit,Mt=J.target;xe>=0&&(C.activeTexture(Bc+xe),C.bindTexture(Mt,null),Cn[xe]=null),C.deleteTexture(we),J.texture=null,J.params=null,J.pixels=null,J.refCount=0,delete cn[J.id],Me.textureCount--}n(hr.prototype,{bind:function(){var J=this;J.bindCount+=1;var we=J.unit;if(we<0){for(var xe=0;xe<Fr;++xe){var Mt=Cn[xe];if(Mt){if(Mt.bindCount>0)continue;Mt.unit=-1}Cn[xe]=J,we=xe;break}we>=Fr&&F.raise("insufficient number of texture units"),Ue.profile&&Me.maxTextureUnits<we+1&&(Me.maxTextureUnits=we+1),J.unit=we,C.activeTexture(Bc+we),C.bindTexture(J.target,J.texture)}return we},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&$t(this)}});function br(J,we){var xe=new hr(Bo);cn[xe.id]=xe,Me.textureCount++;function Mt(X,$){var ne=xe.texInfo;tn.call(ne);var Te=Er();return typeof X=="number"?typeof $=="number"?pr(Te,X|0,$|0):pr(Te,X|0,X|0):X?(F.type(X,"object","invalid arguments to regl.texture"),Tn(ne,X),Ar(Te,X)):pr(Te,1,1),ne.genMipmaps&&(Te.mipmask=(Te.width<<1)-1),xe.mipmask=Te.mipmask,gt(xe,Te),F.texture2D(ne,Te,ie),xe.internalformat=Te.internalformat,Mt.width=Te.width,Mt.height=Te.height,Xr(xe),Qr(Te,Bo),Sn(ne,Bo),Ur(),jn(Te),Ue.profile&&(xe.stats.size=Fi(xe.internalformat,xe.type,Te.width,Te.height,ne.genMipmaps,!1)),Mt.format=lt[xe.internalformat],Mt.type=xt[xe.type],Mt.mag=Qe[ne.magFilter],Mt.min=Rt[ne.minFilter],Mt.wrapS=ct[ne.wrapS],Mt.wrapT=ct[ne.wrapT],Mt}function rr(X,$,ne,Te){F(!!X,"must specify image data");var Se=$|0,ae=ne|0,de=Te|0,pe=Lt();return gt(pe,xe),pe.width=0,pe.height=0,We(pe,X),pe.width=pe.width||(xe.width>>de)-Se,pe.height=pe.height||(xe.height>>de)-ae,F(xe.type===pe.type&&xe.format===pe.format&&xe.internalformat===pe.internalformat,"incompatible format for texture.subimage"),F(Se>=0&&ae>=0&&Se+pe.width<=xe.width&&ae+pe.height<=xe.height,"texture.subimage write out of bounds"),F(xe.mipmask&1<<de,"missing mipmap data"),F(pe.data||pe.element||pe.needsCopy,"missing image data"),Xr(xe),ir(pe,Bo,Se,ae,de),Ur(),ur(pe),Mt}function Ir(X,$){var ne=X|0,Te=$|0||ne;if(ne===xe.width&&Te===xe.height)return Mt;Mt.width=xe.width=ne,Mt.height=xe.height=Te,Xr(xe);for(var Se=0;xe.mipmask>>Se;++Se){var ae=ne>>Se,de=Te>>Se;if(!ae||!de)break;C.texImage2D(Bo,Se,xe.format,ae,de,0,xe.format,xe.type,null)}return Ur(),Ue.profile&&(xe.stats.size=Fi(xe.internalformat,xe.type,ne,Te,!1,!1)),Mt}return Mt(J,we),Mt.subimage=rr,Mt.resize=Ir,Mt._reglType="texture2d",Mt._texture=xe,Ue.profile&&(Mt.stats=xe.stats),Mt.destroy=function(){xe.decRef()},Mt}function Yt(J,we,xe,Mt,rr,Ir){var X=new hr(w_);cn[X.id]=X,Me.cubeCount++;var $=new Array(6);function ne(ae,de,pe,Q,ue,Y){var le,Oe=X.texInfo;for(tn.call(Oe),le=0;le<6;++le)$[le]=Er();if(typeof ae=="number"||!ae){var Be=ae|0||1;for(le=0;le<6;++le)pr($[le],Be,Be)}else if(typeof ae=="object")if(de)Ar($[0],ae),Ar($[1],de),Ar($[2],pe),Ar($[3],Q),Ar($[4],ue),Ar($[5],Y);else if(Tn(Oe,ae),Vt(X,ae),"faces"in ae){var rt=ae.faces;for(F(Array.isArray(rt)&&rt.length===6,"cube faces must be a length 6 array"),le=0;le<6;++le)F(typeof rt[le]=="object"&&!!rt[le],"invalid input for cube map face"),gt($[le],X),Ar($[le],rt[le])}else for(le=0;le<6;++le)Ar($[le],ae);else F.raise("invalid arguments to cube map");for(gt(X,$[0]),ie.npotTextureCube||F(M_(X.width)&&M_(X.height),"your browser does not support non power or two texture dimensions"),Oe.genMipmaps?X.mipmask=($[0].width<<1)-1:X.mipmask=$[0].mipmask,F.textureCube(X,Oe,$,ie),X.internalformat=$[0].internalformat,ne.width=$[0].width,ne.height=$[0].height,Xr(X),le=0;le<6;++le)Qr($[le],od+le);for(Sn(Oe,w_),Ur(),Ue.profile&&(X.stats.size=Fi(X.internalformat,X.type,ne.width,ne.height,Oe.genMipmaps,!0)),ne.format=lt[X.internalformat],ne.type=xt[X.type],ne.mag=Qe[Oe.magFilter],ne.min=Rt[Oe.minFilter],ne.wrapS=ct[Oe.wrapS],ne.wrapT=ct[Oe.wrapT],le=0;le<6;++le)jn($[le]);return ne}function Te(ae,de,pe,Q,ue){F(!!de,"must specify image data"),F(typeof ae=="number"&&ae===(ae|0)&&ae>=0&&ae<6,"invalid face");var Y=pe|0,le=Q|0,Oe=ue|0,Be=Lt();return gt(Be,X),Be.width=0,Be.height=0,We(Be,de),Be.width=Be.width||(X.width>>Oe)-Y,Be.height=Be.height||(X.height>>Oe)-le,F(X.type===Be.type&&X.format===Be.format&&X.internalformat===Be.internalformat,"incompatible format for texture.subimage"),F(Y>=0&&le>=0&&Y+Be.width<=X.width&&le+Be.height<=X.height,"texture.subimage write out of bounds"),F(X.mipmask&1<<Oe,"missing mipmap data"),F(Be.data||Be.element||Be.needsCopy,"missing image data"),Xr(X),ir(Be,od+ae,Y,le,Oe),Ur(),ur(Be),ne}function Se(ae){var de=ae|0;if(de!==X.width){ne.width=X.width=de,ne.height=X.height=de,Xr(X);for(var pe=0;pe<6;++pe)for(var Q=0;X.mipmask>>Q;++Q)C.texImage2D(od+pe,Q,X.format,de>>Q,de>>Q,0,X.format,X.type,null);return Ur(),Ue.profile&&(X.stats.size=Fi(X.internalformat,X.type,ne.width,ne.height,!1,!0)),ne}}return ne(J,we,xe,Mt,rr,Ir),ne.subimage=Te,ne.resize=Se,ne._reglType="textureCube",ne._texture=X,Ue.profile&&(ne.stats=X.stats),ne.destroy=function(){X.decRef()},ne}function kr(){for(var J=0;J<Fr;++J)C.activeTexture(Bc+J),C.bindTexture(Bo,null),Cn[J]=null;Z(cn).forEach($t),Me.cubeCount=0,Me.textureCount=0}Ue.profile&&(Me.getTotalTextureSize=function(){var J=0;return Object.keys(cn).forEach(function(we){J+=cn[we].stats.size}),J});function ui(){for(var J=0;J<Fr;++J){var we=Cn[J];we&&(we.bindCount=0,we.unit=-1,Cn[J]=null)}Z(cn).forEach(function(xe){xe.texture=C.createTexture(),C.bindTexture(xe.target,xe.texture);for(var Mt=0;Mt<32;++Mt)if((xe.mipmask&1<<Mt)!==0)if(xe.target===Bo)C.texImage2D(Bo,Mt,xe.internalformat,xe.width>>Mt,xe.height>>Mt,0,xe.internalformat,xe.type,null);else for(var rr=0;rr<6;++rr)C.texImage2D(od+rr,Mt,xe.internalformat,xe.width>>Mt,xe.height>>Mt,0,xe.internalformat,xe.type,null);Sn(xe.texInfo,xe.target)})}return{create2D:br,createCube:Yt,clear:kr,getTexture:function(J){return null},restore:ui}}var Yi=36161,ba=32854,io=32855,ys=36194,Vp=33189,Td=36168,Sd=34041,wi=35907,Rn=34836,Yr=34842,Es=34843,Kn=[];Kn[ba]=2,Kn[io]=2,Kn[ys]=2,Kn[Vp]=2,Kn[Td]=1,Kn[Sd]=4,Kn[wi]=4,Kn[Rn]=16,Kn[Yr]=8,Kn[Es]=6;function Ad(C,W,ie){return Kn[C]*W*ie}var hu=function(C,W,ie,Re,Ge){var Me={rgba4:ba,rgb565:ys,"rgb5 a1":io,depth:Vp,stencil:Td,"depth stencil":Sd};W.ext_srgb&&(Me.srgba=wi),W.ext_color_buffer_half_float&&(Me.rgba16f=Yr,Me.rgb16f=Es),W.webgl_color_buffer_float&&(Me.rgba32f=Rn);var Ue=[];Object.keys(Me).forEach(function(nt){var _t=Me[nt];Ue[_t]=nt});var ut=0,ft={};function Tt(nt){this.id=ut++,this.refCount=1,this.renderbuffer=nt,this.format=ba,this.width=0,this.height=0,Ge.profile&&(this.stats={size:0})}Tt.prototype.decRef=function(){--this.refCount<=0&&dt(this)};function dt(nt){var _t=nt.renderbuffer;F(_t,"must not double destroy renderbuffer"),C.bindRenderbuffer(Yi,null),C.deleteRenderbuffer(_t),nt.renderbuffer=null,nt.refCount=0,delete ft[nt.id],Re.renderbufferCount--}function mt(nt,_t){var ye=new Tt(C.createRenderbuffer());ft[ye.id]=ye,Re.renderbufferCount++;function Ie(xt,Qe){var Rt=0,ct=0,Ct=ba;if(typeof xt=="object"&&xt){var et=xt;if("shape"in et){var gt=et.shape;F(Array.isArray(gt)&&gt.length>=2,"invalid renderbuffer shape"),Rt=gt[0]|0,ct=gt[1]|0}else"radius"in et&&(Rt=ct=et.radius|0),"width"in et&&(Rt=et.width|0),"height"in et&&(ct=et.height|0);"format"in et&&(F.parameter(et.format,Me,"invalid renderbuffer format"),Ct=Me[et.format])}else typeof xt=="number"?(Rt=xt|0,typeof Qe=="number"?ct=Qe|0:ct=Rt):xt?F.raise("invalid arguments to renderbuffer constructor"):Rt=ct=1;if(F(Rt>0&&ct>0&&Rt<=ie.maxRenderbufferSize&&ct<=ie.maxRenderbufferSize,"invalid renderbuffer size"),!(Rt===ye.width&&ct===ye.height&&Ct===ye.format))return Ie.width=ye.width=Rt,Ie.height=ye.height=ct,ye.format=Ct,C.bindRenderbuffer(Yi,ye.renderbuffer),C.renderbufferStorage(Yi,Ct,Rt,ct),F(C.getError()===0,"invalid render buffer format"),Ge.profile&&(ye.stats.size=Ad(ye.format,ye.width,ye.height)),Ie.format=Ue[ye.format],Ie}function lt(xt,Qe){var Rt=xt|0,ct=Qe|0||Rt;return Rt===ye.width&&ct===ye.height||(F(Rt>0&&ct>0&&Rt<=ie.maxRenderbufferSize&&ct<=ie.maxRenderbufferSize,"invalid renderbuffer size"),Ie.width=ye.width=Rt,Ie.height=ye.height=ct,C.bindRenderbuffer(Yi,ye.renderbuffer),C.renderbufferStorage(Yi,ye.format,Rt,ct),F(C.getError()===0,"invalid render buffer format"),Ge.profile&&(ye.stats.size=Ad(ye.format,ye.width,ye.height))),Ie}return Ie(nt,_t),Ie.resize=lt,Ie._reglType="renderbuffer",Ie._renderbuffer=ye,Ge.profile&&(Ie.stats=ye.stats),Ie.destroy=function(){ye.decRef()},Ie}Ge.profile&&(Re.getTotalRenderbufferSize=function(){var nt=0;return Object.keys(ft).forEach(function(_t){nt+=ft[_t].stats.size}),nt});function Et(){Z(ft).forEach(function(nt){nt.renderbuffer=C.createRenderbuffer(),C.bindRenderbuffer(Yi,nt.renderbuffer),C.renderbufferStorage(Yi,nt.format,nt.width,nt.height)}),C.bindRenderbuffer(Yi,null)}return{create:mt,clear:function(){Z(ft).forEach(dt)},restore:Et}},ao=36160,xd=36161,ka=3553,bs=34069,Hp=36064,_l=36096,Rd=36128,Ts=33306,oo=36053,Ss=36054,zo=36055,Xp=36057,Gp=36061,Vc=36193,Cd=5121,pu=5126,gi=6407,Hc=6408,G_=6402,QE=[gi,Hc],qp=[];qp[Hc]=4,qp[gi]=3;var Od=[];Od[Cd]=1,Od[pu]=4,Od[Vc]=2;var ni=32854,Wp=32855,Xc=36194,Gc=33189,$p=36168,vu=34041,gl=35907,JE=34836,q_=34842,e1=34843,W_=[ni,Wp,Xc,gl,q_,e1,JE],Ta={};Ta[oo]="complete",Ta[Ss]="incomplete attachment",Ta[Xp]="incomplete dimensions",Ta[zo]="incomplete, missing attachment",Ta[Gp]="unsupported";function Yp(C,W,ie,Re,Ge,Me){var Ue={cur:null,next:null,dirty:!1,setFBO:null},ut=["rgba"],ft=["rgba4","rgb565","rgb5 a1"];W.ext_srgb&&ft.push("srgba"),W.ext_color_buffer_half_float&&ft.push("rgba16f","rgb16f"),W.webgl_color_buffer_float&&ft.push("rgba32f");var Tt=["uint8"];W.oes_texture_half_float&&Tt.push("half float","float16"),W.oes_texture_float&&Tt.push("float","float32");function dt(At,We,Ze){this.target=At,this.texture=We,this.renderbuffer=Ze;var ir=0,Sr=0;We?(ir=We.width,Sr=We.height):Ze&&(ir=Ze.width,Sr=Ze.height),this.width=ir,this.height=Sr}function mt(At){At&&(At.texture&&At.texture._texture.decRef(),At.renderbuffer&&At.renderbuffer._renderbuffer.decRef())}function Et(At,We,Ze){if(At)if(At.texture){var ir=At.texture._texture,Sr=Math.max(1,ir.width),Lt=Math.max(1,ir.height);F(Sr===We&&Lt===Ze,"inconsistent width/height for supplied texture"),ir.refCount+=1}else{var ur=At.renderbuffer._renderbuffer;F(ur.width===We&&ur.height===Ze,"inconsistent width/height for renderbuffer"),ur.refCount+=1}}function nt(At,We){We&&(We.texture?C.framebufferTexture2D(ao,At,We.target,We.texture._texture.texture,0):C.framebufferRenderbuffer(ao,At,xd,We.renderbuffer._renderbuffer.renderbuffer))}function _t(At){var We=ka,Ze=null,ir=null,Sr=At;typeof At=="object"&&(Sr=At.data,"target"in At&&(We=At.target|0)),F.type(Sr,"function","invalid attachment data");var Lt=Sr._reglType;return Lt==="texture2d"?(Ze=Sr,F(We===ka)):Lt==="textureCube"?(Ze=Sr,F(We>=bs&&We<bs+6,"invalid cube map target")):Lt==="renderbuffer"?(ir=Sr,We=xd):F.raise("invalid regl object for attachment"),new dt(We,Ze,ir)}function ye(At,We,Ze,ir,Sr){if(Ze){var Lt=Re.create2D({width:At,height:We,format:ir,type:Sr});return Lt._texture.refCount=0,new dt(ka,Lt,null)}else{var ur=Ge.create({width:At,height:We,format:ir});return ur._renderbuffer.refCount=0,new dt(xd,null,ur)}}function Ie(At){return At&&(At.texture||At.renderbuffer)}function lt(At,We,Ze){At&&(At.texture?At.texture.resize(We,Ze):At.renderbuffer&&At.renderbuffer.resize(We,Ze),At.width=We,At.height=Ze)}var xt=0,Qe={};function Rt(){this.id=xt++,Qe[this.id]=this,this.framebuffer=C.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function ct(At){At.colorAttachments.forEach(mt),mt(At.depthAttachment),mt(At.stencilAttachment),mt(At.depthStencilAttachment)}function Ct(At){var We=At.framebuffer;F(We,"must not double destroy framebuffer"),C.deleteFramebuffer(We),At.framebuffer=null,Me.framebufferCount--,delete Qe[At.id]}function et(At){var We;C.bindFramebuffer(ao,At.framebuffer);var Ze=At.colorAttachments;for(We=0;We<Ze.length;++We)nt(Hp+We,Ze[We]);for(We=Ze.length;We<ie.maxColorAttachments;++We)C.framebufferTexture2D(ao,Hp+We,ka,null,0);C.framebufferTexture2D(ao,Ts,ka,null,0),C.framebufferTexture2D(ao,_l,ka,null,0),C.framebufferTexture2D(ao,Rd,ka,null,0),nt(_l,At.depthAttachment),nt(Rd,At.stencilAttachment),nt(Ts,At.depthStencilAttachment);var ir=C.checkFramebufferStatus(ao);!C.isContextLost()&&ir!==oo&&F.raise("framebuffer configuration not supported, status = "+Ta[ir]),C.bindFramebuffer(ao,Ue.next?Ue.next.framebuffer:null),Ue.cur=Ue.next,C.getError()}function gt(At,We){var Ze=new Rt;Me.framebufferCount++;function ir(Lt,ur){var ar;F(Ue.next!==Ze,"can not update framebuffer which is currently in use");var pr=0,Ar=0,Qr=!0,Yn=!0,Er=null,jn=!0,tn="rgba",Tn="uint8",Sn=1,Vn=null,cn=null,Fr=null,Cn=!1;if(typeof Lt=="number")pr=Lt|0,Ar=ur|0||pr;else if(!Lt)pr=Ar=1;else{F.type(Lt,"object","invalid arguments for framebuffer");var hr=Lt;if("shape"in hr){var Xr=hr.shape;F(Array.isArray(Xr)&&Xr.length>=2,"invalid shape for framebuffer"),pr=Xr[0],Ar=Xr[1]}else"radius"in hr&&(pr=Ar=hr.radius),"width"in hr&&(pr=hr.width),"height"in hr&&(Ar=hr.height);("color"in hr||"colors"in hr)&&(Er=hr.color||hr.colors,Array.isArray(Er)&&F(Er.length===1||W.webgl_draw_buffers,"multiple render targets not supported")),Er||("colorCount"in hr&&(Sn=hr.colorCount|0,F(Sn>0,"invalid color buffer count")),"colorTexture"in hr&&(jn=!!hr.colorTexture,tn="rgba4"),"colorType"in hr&&(Tn=hr.colorType,jn?(F(W.oes_texture_float||!(Tn==="float"||Tn==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),F(W.oes_texture_half_float||!(Tn==="half float"||Tn==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Tn==="half float"||Tn==="float16"?(F(W.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),tn="rgba16f"):(Tn==="float"||Tn==="float32")&&(F(W.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),tn="rgba32f"),F.oneOf(Tn,Tt,"invalid color type")),"colorFormat"in hr&&(tn=hr.colorFormat,ut.indexOf(tn)>=0?jn=!0:ft.indexOf(tn)>=0?jn=!1:jn?F.oneOf(hr.colorFormat,ut,"invalid color format for texture"):F.oneOf(hr.colorFormat,ft,"invalid color format for renderbuffer"))),("depthTexture"in hr||"depthStencilTexture"in hr)&&(Cn=!!(hr.depthTexture||hr.depthStencilTexture),F(!Cn||W.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in hr&&(typeof hr.depth=="boolean"?Qr=hr.depth:(Vn=hr.depth,Yn=!1)),"stencil"in hr&&(typeof hr.stencil=="boolean"?Yn=hr.stencil:(cn=hr.stencil,Qr=!1)),"depthStencil"in hr&&(typeof hr.depthStencil=="boolean"?Qr=Yn=hr.depthStencil:(Fr=hr.depthStencil,Qr=!1,Yn=!1))}var Ur=null,$t=null,br=null,Yt=null;if(Array.isArray(Er))Ur=Er.map(_t);else if(Er)Ur=[_t(Er)];else for(Ur=new Array(Sn),ar=0;ar<Sn;++ar)Ur[ar]=ye(pr,Ar,jn,tn,Tn);F(W.webgl_draw_buffers||Ur.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),F(Ur.length<=ie.maxColorAttachments,"too many color attachments, not supported"),pr=pr||Ur[0].width,Ar=Ar||Ur[0].height,Vn?$t=_t(Vn):Qr&&!Yn&&($t=ye(pr,Ar,Cn,"depth","uint32")),cn?br=_t(cn):Yn&&!Qr&&(br=ye(pr,Ar,!1,"stencil","uint8")),Fr?Yt=_t(Fr):!Vn&&!cn&&Yn&&Qr&&(Yt=ye(pr,Ar,Cn,"depth stencil","depth stencil")),F(!!Vn+!!cn+!!Fr<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var kr=null;for(ar=0;ar<Ur.length;++ar)if(Et(Ur[ar],pr,Ar),F(!Ur[ar]||Ur[ar].texture&&QE.indexOf(Ur[ar].texture._texture.format)>=0||Ur[ar].renderbuffer&&W_.indexOf(Ur[ar].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ar+" is invalid"),Ur[ar]&&Ur[ar].texture){var ui=qp[Ur[ar].texture._texture.format]*Od[Ur[ar].texture._texture.type];kr===null?kr=ui:F(kr===ui,"all color attachments much have the same number of bits per pixel.")}return Et($t,pr,Ar),F(!$t||$t.texture&&$t.texture._texture.format===G_||$t.renderbuffer&&$t.renderbuffer._renderbuffer.format===Gc,"invalid depth attachment for framebuffer object"),Et(br,pr,Ar),F(!br||br.renderbuffer&&br.renderbuffer._renderbuffer.format===$p,"invalid stencil attachment for framebuffer object"),Et(Yt,pr,Ar),F(!Yt||Yt.texture&&Yt.texture._texture.format===vu||Yt.renderbuffer&&Yt.renderbuffer._renderbuffer.format===vu,"invalid depth-stencil attachment for framebuffer object"),ct(Ze),Ze.width=pr,Ze.height=Ar,Ze.colorAttachments=Ur,Ze.depthAttachment=$t,Ze.stencilAttachment=br,Ze.depthStencilAttachment=Yt,ir.color=Ur.map(Ie),ir.depth=Ie($t),ir.stencil=Ie(br),ir.depthStencil=Ie(Yt),ir.width=Ze.width,ir.height=Ze.height,et(Ze),ir}function Sr(Lt,ur){F(Ue.next!==Ze,"can not resize a framebuffer which is currently in use");var ar=Math.max(Lt|0,1),pr=Math.max(ur|0||ar,1);if(ar===Ze.width&&pr===Ze.height)return ir;for(var Ar=Ze.colorAttachments,Qr=0;Qr<Ar.length;++Qr)lt(Ar[Qr],ar,pr);return lt(Ze.depthAttachment,ar,pr),lt(Ze.stencilAttachment,ar,pr),lt(Ze.depthStencilAttachment,ar,pr),Ze.width=ir.width=ar,Ze.height=ir.height=pr,et(Ze),ir}return ir(At,We),n(ir,{resize:Sr,_reglType:"framebuffer",_framebuffer:Ze,destroy:function(){Ct(Ze),ct(Ze)},use:function(Lt){Ue.setFBO({framebuffer:ir},Lt)}})}function Vt(At){var We=Array(6);function Ze(Sr){var Lt;F(We.indexOf(Ue.next)<0,"can not update framebuffer which is currently in use");var ur={color:null},ar=0,pr=null,Ar="rgba",Qr="uint8",Yn=1;if(typeof Sr=="number")ar=Sr|0;else if(!Sr)ar=1;else{F.type(Sr,"object","invalid arguments for framebuffer");var Er=Sr;if("shape"in Er){var jn=Er.shape;F(Array.isArray(jn)&&jn.length>=2,"invalid shape for framebuffer"),F(jn[0]===jn[1],"cube framebuffer must be square"),ar=jn[0]}else"radius"in Er&&(ar=Er.radius|0),"width"in Er?(ar=Er.width|0,"height"in Er&&F(Er.height===ar,"must be square")):"height"in Er&&(ar=Er.height|0);("color"in Er||"colors"in Er)&&(pr=Er.color||Er.colors,Array.isArray(pr)&&F(pr.length===1||W.webgl_draw_buffers,"multiple render targets not supported")),pr||("colorCount"in Er&&(Yn=Er.colorCount|0,F(Yn>0,"invalid color buffer count")),"colorType"in Er&&(F.oneOf(Er.colorType,Tt,"invalid color type"),Qr=Er.colorType),"colorFormat"in Er&&(Ar=Er.colorFormat,F.oneOf(Er.colorFormat,ut,"invalid color format for texture"))),"depth"in Er&&(ur.depth=Er.depth),"stencil"in Er&&(ur.stencil=Er.stencil),"depthStencil"in Er&&(ur.depthStencil=Er.depthStencil)}var tn;if(pr)if(Array.isArray(pr))for(tn=[],Lt=0;Lt<pr.length;++Lt)tn[Lt]=pr[Lt];else tn=[pr];else{tn=Array(Yn);var Tn={radius:ar,format:Ar,type:Qr};for(Lt=0;Lt<Yn;++Lt)tn[Lt]=Re.createCube(Tn)}for(ur.color=Array(tn.length),Lt=0;Lt<tn.length;++Lt){var Sn=tn[Lt];F(typeof Sn=="function"&&Sn._reglType==="textureCube","invalid cube map"),ar=ar||Sn.width,F(Sn.width===ar&&Sn.height===ar,"invalid cube map shape"),ur.color[Lt]={target:bs,data:tn[Lt]}}for(Lt=0;Lt<6;++Lt){for(var Vn=0;Vn<tn.length;++Vn)ur.color[Vn].target=bs+Lt;Lt>0&&(ur.depth=We[0].depth,ur.stencil=We[0].stencil,ur.depthStencil=We[0].depthStencil),We[Lt]?We[Lt](ur):We[Lt]=gt(ur)}return n(Ze,{width:ar,height:ar,color:tn})}function ir(Sr){var Lt,ur=Sr|0;if(F(ur>0&&ur<=ie.maxCubeMapSize,"invalid radius for cube fbo"),ur===Ze.width)return Ze;var ar=Ze.color;for(Lt=0;Lt<ar.length;++Lt)ar[Lt].resize(ur);for(Lt=0;Lt<6;++Lt)We[Lt].resize(ur);return Ze.width=Ze.height=ur,Ze}return Ze(At),n(Ze,{faces:We,resize:ir,_reglType:"framebufferCube",destroy:function(){We.forEach(function(Sr){Sr.destroy()})}})}function tr(){Ue.cur=null,Ue.next=null,Ue.dirty=!0,Z(Qe).forEach(function(At){At.framebuffer=C.createFramebuffer(),et(At)})}return n(Ue,{getFramebuffer:function(At){if(typeof At=="function"&&At._reglType==="framebuffer"){var We=At._framebuffer;if(We instanceof Rt)return We}return null},create:gt,createCube:Vt,clear:function(){Z(Qe).forEach(Ct)},restore:tr})}var Md=5126,Zp=34962;function mu(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Md,this.offset=0,this.stride=0,this.divisor=0}function $_(C,W,ie,Re,Ge){for(var Me=ie.maxAttributes,Ue=new Array(Me),ut=0;ut<Me;++ut)Ue[ut]=new mu;var ft=0,Tt={},dt={Record:mu,scope:{},state:Ue,currentVAO:null,targetVAO:null,restore:Et()?Qe:function(){},createVAO:Rt,getVAO:_t,destroyBuffer:mt,setVAO:Et()?ye:Ie,clear:Et()?lt:function(){}};function mt(ct){for(var Ct=0;Ct<Ue.length;++Ct){var et=Ue[Ct];et.buffer===ct&&(C.disableVertexAttribArray(Ct),et.buffer=null)}}function Et(){return W.oes_vertex_array_object}function nt(){return W.angle_instanced_arrays}function _t(ct){return typeof ct=="function"&&ct._vao?ct._vao:null}function ye(ct){if(ct!==dt.currentVAO){var Ct=Et();ct?Ct.bindVertexArrayOES(ct.vao):Ct.bindVertexArrayOES(null),dt.currentVAO=ct}}function Ie(ct){if(ct!==dt.currentVAO){if(ct)ct.bindAttrs();else for(var Ct=nt(),et=0;et<Ue.length;++et){var gt=Ue[et];gt.buffer?(C.enableVertexAttribArray(et),C.vertexAttribPointer(et,gt.size,gt.type,gt.normalized,gt.stride,gt.offfset),Ct&&Ct.vertexAttribDivisorANGLE(et,gt.divisor)):(C.disableVertexAttribArray(et),C.vertexAttrib4f(et,gt.x,gt.y,gt.z,gt.w))}dt.currentVAO=ct}}function lt(){Z(Tt).forEach(function(ct){ct.destroy()})}function xt(){this.id=++ft,this.attributes=[];var ct=Et();ct?this.vao=ct.createVertexArrayOES():this.vao=null,Tt[this.id]=this,this.buffers=[]}xt.prototype.bindAttrs=function(){for(var ct=nt(),Ct=this.attributes,et=0;et<Ct.length;++et){var gt=Ct[et];gt.buffer?(C.enableVertexAttribArray(et),C.bindBuffer(Zp,gt.buffer.buffer),C.vertexAttribPointer(et,gt.size,gt.type,gt.normalized,gt.stride,gt.offset),ct&&ct.vertexAttribDivisorANGLE(et,gt.divisor)):(C.disableVertexAttribArray(et),C.vertexAttrib4f(et,gt.x,gt.y,gt.z,gt.w))}for(var Vt=Ct.length;Vt<Me;++Vt)C.disableVertexAttribArray(Vt)},xt.prototype.refresh=function(){var ct=Et();ct&&(ct.bindVertexArrayOES(this.vao),this.bindAttrs(),dt.currentVAO=this)},xt.prototype.destroy=function(){if(this.vao){var ct=Et();this===dt.currentVAO&&(dt.currentVAO=null,ct.bindVertexArrayOES(null)),ct.deleteVertexArrayOES(this.vao),this.vao=null}Tt[this.id]&&(delete Tt[this.id],Re.vaoCount-=1)};function Qe(){var ct=Et();ct&&Z(Tt).forEach(function(Ct){Ct.refresh()})}function Rt(ct){var Ct=new xt;Re.vaoCount+=1;function et(gt){F(Array.isArray(gt),"arguments to vertex array constructor must be an array"),F(gt.length<Me,"too many attributes"),F(gt.length>0,"must specify at least one attribute");for(var Vt=0;Vt<Ct.buffers.length;++Vt)Ct.buffers[Vt].destroy();Ct.buffers.length=0;var tr=Ct.attributes;tr.length=gt.length;for(var At=0;At<gt.length;++At){var We=gt[At],Ze=tr[At]=new mu;if(Array.isArray(We)||r(We)||G(We)){var ir=Ge.create(We,Zp,!1,!0);Ze.buffer=Ge.getBuffer(ir),Ze.size=Ze.buffer.dimension|0,Ze.normalized=!1,Ze.type=Ze.buffer.dtype,Ze.offset=0,Ze.stride=0,Ze.divisor=0,Ze.state=1,Ct.buffers.push(ir)}else Ge.getBuffer(We)?(Ze.buffer=Ge.getBuffer(We),Ze.size=Ze.buffer.dimension|0,Ze.normalized=!1,Ze.type=Ze.buffer.dtype,Ze.offset=0,Ze.stride=0,Ze.divisor=0,Ze.state=1):Ge.getBuffer(We.buffer)?(Ze.buffer=Ge.getBuffer(We.buffer),Ze.size=(+We.size||Ze.buffer.dimension)|0,Ze.normalized=!!We.normalized||!1,"type"in We?(F.parameter(We.type,Lo,"invalid buffer type"),Ze.type=Lo[We.type]):Ze.type=Ze.buffer.dtype,Ze.offset=(We.offset||0)|0,Ze.stride=(We.stride||0)|0,Ze.divisor=(We.divisor||0)|0,Ze.state=1,F(Ze.size>=1&&Ze.size<=4,"size must be between 1 and 4"),F(Ze.offset>=0,"invalid offset"),F(Ze.stride>=0&&Ze.stride<=255,"stride must be between 0 and 255"),F(Ze.divisor>=0,"divisor must be positive"),F(!Ze.divisor||!!W.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in We?(F(At>0,"first attribute must not be a constant"),Ze.x=+We.x||0,Ze.y=+We.y||0,Ze.z=+We.z||0,Ze.w=+We.w||0,Ze.state=2):F(!1,"invalid attribute spec for location "+At)}return Ct.refresh(),et}return et.destroy=function(){Ct.destroy()},et._vao=Ct,et._reglType="vao",et(ct)}return dt}var qc=35632,Kp=35633,Y_=35718,wd=35721;function Z_(C,W,ie,Re){var Ge={},Me={};function Ue(ye,Ie,lt,xt){this.name=ye,this.id=Ie,this.location=lt,this.info=xt}function ut(ye,Ie){for(var lt=0;lt<ye.length;++lt)if(ye[lt].id===Ie.id){ye[lt].location=Ie.location;return}ye.push(Ie)}function ft(ye,Ie,lt){var xt=ye===qc?Ge:Me,Qe=xt[Ie];if(!Qe){var Rt=W.str(Ie);Qe=C.createShader(ye),C.shaderSource(Qe,Rt),C.compileShader(Qe),F.shaderError(C,Qe,Rt,ye,lt),xt[Ie]=Qe}return Qe}var Tt={},dt=[],mt=0;function Et(ye,Ie){this.id=mt++,this.fragId=ye,this.vertId=Ie,this.program=null,this.uniforms=[],this.attributes=[],Re.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function nt(ye,Ie,lt){var xt,Qe,Rt=ft(qc,ye.fragId),ct=ft(Kp,ye.vertId),Ct=ye.program=C.createProgram();if(C.attachShader(Ct,Rt),C.attachShader(Ct,ct),lt)for(xt=0;xt<lt.length;++xt){var et=lt[xt];C.bindAttribLocation(Ct,et[0],et[1])}C.linkProgram(Ct),F.linkError(C,Ct,W.str(ye.fragId),W.str(ye.vertId),Ie);var gt=C.getProgramParameter(Ct,Y_);Re.profile&&(ye.stats.uniformsCount=gt);var Vt=ye.uniforms;for(xt=0;xt<gt;++xt)if(Qe=C.getActiveUniform(Ct,xt),Qe)if(Qe.size>1)for(var tr=0;tr<Qe.size;++tr){var At=Qe.name.replace("[0]","["+tr+"]");ut(Vt,new Ue(At,W.id(At),C.getUniformLocation(Ct,At),Qe))}else ut(Vt,new Ue(Qe.name,W.id(Qe.name),C.getUniformLocation(Ct,Qe.name),Qe));var We=C.getProgramParameter(Ct,wd);Re.profile&&(ye.stats.attributesCount=We);var Ze=ye.attributes;for(xt=0;xt<We;++xt)Qe=C.getActiveAttrib(Ct,xt),Qe&&ut(Ze,new Ue(Qe.name,W.id(Qe.name),C.getAttribLocation(Ct,Qe.name),Qe))}Re.profile&&(ie.getMaxUniformsCount=function(){var ye=0;return dt.forEach(function(Ie){Ie.stats.uniformsCount>ye&&(ye=Ie.stats.uniformsCount)}),ye},ie.getMaxAttributesCount=function(){var ye=0;return dt.forEach(function(Ie){Ie.stats.attributesCount>ye&&(ye=Ie.stats.attributesCount)}),ye});function _t(){Ge={},Me={};for(var ye=0;ye<dt.length;++ye)nt(dt[ye],null,dt[ye].attributes.map(function(Ie){return[Ie.location,Ie.name]}))}return{clear:function(){var ye=C.deleteShader.bind(C);Z(Ge).forEach(ye),Ge={},Z(Me).forEach(ye),Me={},dt.forEach(function(Ie){C.deleteProgram(Ie.program)}),dt.length=0,Tt={},ie.shaderCount=0},program:function(ye,Ie,lt,xt){F.command(ye>=0,"missing vertex shader",lt),F.command(Ie>=0,"missing fragment shader",lt);var Qe=Tt[Ie];Qe||(Qe=Tt[Ie]={});var Rt=Qe[ye];if(Rt&&!xt)return Rt;var ct=new Et(Ie,ye);return ie.shaderCount++,nt(ct,lt,xt),Rt||(Qe[ye]=ct),dt.push(ct),ct},restore:_t,shader:ft,frag:-1,vert:-1}}var Wc=6408,yl=5121,K_=3333,za=5126;function Qp(C,W,ie,Re,Ge,Me,Ue){function ut(dt){var mt;W.next===null?(F(Ge.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),mt=yl):(F(W.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),mt=W.next.colorAttachments[0].texture._texture.type,Me.oes_texture_float?(F(mt===yl||mt===za,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),mt===za&&F(Ue.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):F(mt===yl,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Et=0,nt=0,_t=Re.framebufferWidth,ye=Re.framebufferHeight,Ie=null;r(dt)?Ie=dt:dt&&(F.type(dt,"object","invalid arguments to regl.read()"),Et=dt.x|0,nt=dt.y|0,F(Et>=0&&Et<Re.framebufferWidth,"invalid x offset for regl.read"),F(nt>=0&&nt<Re.framebufferHeight,"invalid y offset for regl.read"),_t=(dt.width||Re.framebufferWidth-Et)|0,ye=(dt.height||Re.framebufferHeight-nt)|0,Ie=dt.data||null),Ie&&(mt===yl?F(Ie instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):mt===za&&F(Ie instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),F(_t>0&&_t+Et<=Re.framebufferWidth,"invalid width for read pixels"),F(ye>0&&ye+nt<=Re.framebufferHeight,"invalid height for read pixels"),ie();var lt=_t*ye*4;return Ie||(mt===yl?Ie=new Uint8Array(lt):mt===za&&(Ie=Ie||new Float32Array(lt))),F.isTypedArray(Ie,"data buffer for regl.read() must be a typedarray"),F(Ie.byteLength>=lt,"data buffer for regl.read() too small"),C.pixelStorei(K_,4),C.readPixels(Et,nt,_t,ye,Wc,mt,Ie),Ie}function ft(dt){var mt;return W.setFBO({framebuffer:dt.framebuffer},function(){mt=ut(dt)}),mt}function Tt(dt){return!dt||!("framebuffer"in dt)?ut(dt):ft(dt)}return Tt}function As(C){return Array.prototype.slice.call(C)}function ua(C){return As(C).join("")}function xs(){var C=0,W=[],ie=[];function Re(mt){for(var Et=0;Et<ie.length;++Et)if(ie[Et]===mt)return W[Et];var nt="g"+C++;return W.push(nt),ie.push(mt),nt}function Ge(){var mt=[];function Et(){mt.push.apply(mt,As(arguments))}var nt=[];function _t(){var ye="v"+C++;return nt.push(ye),arguments.length>0&&(mt.push(ye,"="),mt.push.apply(mt,As(arguments)),mt.push(";")),ye}return n(Et,{def:_t,toString:function(){return ua([nt.length>0?"var "+nt.join(",")+";":"",ua(mt)])}})}function Me(){var mt=Ge(),Et=Ge(),nt=mt.toString,_t=Et.toString;function ye(Ie,lt){Et(Ie,lt,"=",mt.def(Ie,lt),";")}return n(function(){mt.apply(mt,As(arguments))},{def:mt.def,entry:mt,exit:Et,save:ye,set:function(Ie,lt,xt){ye(Ie,lt),mt(Ie,lt,"=",xt,";")},toString:function(){return nt()+_t()}})}function Ue(){var mt=ua(arguments),Et=Me(),nt=Me(),_t=Et.toString,ye=nt.toString;return n(Et,{then:function(){return Et.apply(Et,As(arguments)),this},else:function(){return nt.apply(nt,As(arguments)),this},toString:function(){var Ie=ye();return Ie&&(Ie="else{"+Ie+"}"),ua(["if(",mt,"){",_t(),"}",Ie])}})}var ut=Ge(),ft={};function Tt(mt,Et){var nt=[];function _t(){var Qe="a"+nt.length;return nt.push(Qe),Qe}Et=Et||0;for(var ye=0;ye<Et;++ye)_t();var Ie=Me(),lt=Ie.toString,xt=ft[mt]=n(Ie,{arg:_t,toString:function(){return ua(["function(",nt.join(),"){",lt(),"}"])}});return xt}function dt(){var mt=['"use strict";',ut,"return {"];Object.keys(ft).forEach(function(_t){mt.push('"',_t,'":',ft[_t].toString(),",")}),mt.push("}");var Et=ua(mt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),nt=Function.apply(null,W.concat(Et));return nt.apply(null,ie)}return{global:ut,link:Re,block:Ge,proc:Tt,scope:Me,cond:Ue,compile:dt}}var so="xyzw".split(""),Nd=5121,Rs=1,_u=2,El=0,Jp=1,ev=2,gu=3,bl=4,tv="dither",Id="blend.enable",Pd="blend.color",uo="blend.equation",Mr="blend.func",on="depth.enable",Wn="depth.func",$c="depth.range",yu="depth.mask",jo="colorMask",Yc="cull.enable",Tl="cull.face",Cs="frontFace",rv="lineWidth",zn="polygonOffset.enable",Zc="polygonOffset.offset",Dd="sample.alpha",nv="sample.enable",Ld="sample.coverage",Q_="stencil.enable",Bd="stencil.mask",Kc="stencil.func",Qc="stencil.opFront",si="stencil.opBack",$n="scissor.enable",Sl="scissor.box",la="viewport",Os="profile",Vo="framebuffer",ca="vert",Ms="frag",Ho="elements",Xo="primitive",ws="count",Jc="offset",ef="instances",Al="vao",Fd="Width",Ud="Height",Ns=Vo+Fd,Eu=Vo+Ud,t1=la+Fd,J_=la+Ud,iv="drawingBuffer",av=iv+Fd,kd=iv+Ud,eg=[Mr,uo,Kc,Qc,si,Ld,la,Sl,Zc],bu=34962,tg=34963,rg=35632,ng=35633,ig=3553,ag=34067,xl=2884,zd=3042,og=3024,jd=2960,tf=2929,sg=3089,ug=32823,lg=32926,cg=32928,Vd=5126,rf=35664,Rl=35665,nf=35666,Hd=5124,Cl=35667,af=35668,of=35669,ov=35670,Ol=35671,sf=35672,uf=35673,Tu=35674,Ml=35675,wl=35676,lf=35678,cf=35680,sv=4,Go=1028,qo=1029,ff=2304,Xd=2305,fg=32775,Gd=32776,dg=519,Wo=7680,hg=0,Su=1,Nl=32774,qd=513,Il=36160,Wd=36064,ja={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},uv=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Va={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},$o={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},fa={frag:rg,vert:ng},Sa={cw:ff,ccw:Xd};function Ha(C){return Array.isArray(C)||r(C)||G(C)}function lv(C){return C.sort(function(W,ie){return W===la?-1:ie===la?1:W<ie?-1:1})}function Qn(C,W,ie,Re){this.thisDep=C,this.contextDep=W,this.propDep=ie,this.append=Re}function Ni(C){return C&&!(C.thisDep||C.contextDep||C.propDep)}function Nr(C){return new Qn(!1,!1,!1,C)}function yi(C,W){var ie=C.type;if(ie===El){var Re=C.data.length;return new Qn(!0,Re>=1,Re>=2,W)}else if(ie===bl){var Ge=C.data;return new Qn(Ge.thisDep,Ge.contextDep,Ge.propDep,W)}else return new Qn(ie===gu,ie===ev,ie===Jp,W)}var $d=new Qn(!1,!1,!1,function(){});function cv(C,W,ie,Re,Ge,Me,Ue,ut,ft,Tt,dt,mt,Et,nt,_t){var ye=Tt.Record,Ie={add:32774,subtract:32778,"reverse subtract":32779};ie.ext_blend_minmax&&(Ie.min=fg,Ie.max=Gd);var lt=ie.angle_instanced_arrays,xt=ie.webgl_draw_buffers,Qe={dirty:!0,profile:_t.profile},Rt={},ct=[],Ct={},et={};function gt(X){return X.replace(".","_")}function Vt(X,$,ne){var Te=gt(X);ct.push(X),Rt[Te]=Qe[Te]=!!ne,Ct[Te]=$}function tr(X,$,ne){var Te=gt(X);ct.push(X),Array.isArray(ne)?(Qe[Te]=ne.slice(),Rt[Te]=ne.slice()):Qe[Te]=Rt[Te]=ne,et[Te]=$}Vt(tv,og),Vt(Id,zd),tr(Pd,"blendColor",[0,0,0,0]),tr(uo,"blendEquationSeparate",[Nl,Nl]),tr(Mr,"blendFuncSeparate",[Su,hg,Su,hg]),Vt(on,tf,!0),tr(Wn,"depthFunc",qd),tr($c,"depthRange",[0,1]),tr(yu,"depthMask",!0),tr(jo,jo,[!0,!0,!0,!0]),Vt(Yc,xl),tr(Tl,"cullFace",qo),tr(Cs,Cs,Xd),tr(rv,rv,1),Vt(zn,ug),tr(Zc,"polygonOffset",[0,0]),Vt(Dd,lg),Vt(nv,cg),tr(Ld,"sampleCoverage",[1,!1]),Vt(Q_,jd),tr(Bd,"stencilMask",-1),tr(Kc,"stencilFunc",[dg,0,-1]),tr(Qc,"stencilOpSeparate",[Go,Wo,Wo,Wo]),tr(si,"stencilOpSeparate",[qo,Wo,Wo,Wo]),Vt($n,sg),tr(Sl,"scissor",[0,0,C.drawingBufferWidth,C.drawingBufferHeight]),tr(la,la,[0,0,C.drawingBufferWidth,C.drawingBufferHeight]);var At={gl:C,context:Et,strings:W,next:Rt,current:Qe,draw:mt,elements:Me,buffer:Ge,shader:dt,attributes:Tt.state,vao:Tt,uniforms:ft,framebuffer:ut,extensions:ie,timer:nt,isBufferArgs:Ha},We={primTypes:sl,compareFuncs:Va,blendFuncs:ja,blendEquations:Ie,stencilOps:$o,glTypes:Lo,orientationType:Sa};F.optional(function(){At.isArrayLike=xn}),xt&&(We.backBuffer=[qo],We.drawBuffer=Ri(Re.maxDrawbuffers,function(X){return X===0?[0]:Ri(X,function($){return Wd+$})}));var Ze=0;function ir(){var X=xs(),$=X.link,ne=X.global;X.id=Ze++,X.batchId="0";var Te=$(At),Se=X.shared={props:"a0"};Object.keys(At).forEach(function(ue){Se[ue]=ne.def(Te,".",ue)}),F.optional(function(){X.CHECK=$(F),X.commandStr=F.guessCommand(),X.command=$(X.commandStr),X.assert=function(ue,Y,le){ue("if(!(",Y,"))",this.CHECK,".commandRaise(",$(le),",",this.command,");")},We.invalidBlendCombinations=uv});var ae=X.next={},de=X.current={};Object.keys(et).forEach(function(ue){Array.isArray(Qe[ue])&&(ae[ue]=ne.def(Se.next,".",ue),de[ue]=ne.def(Se.current,".",ue))});var pe=X.constants={};Object.keys(We).forEach(function(ue){pe[ue]=ne.def(JSON.stringify(We[ue]))}),X.invoke=function(ue,Y){switch(Y.type){case El:var le=["this",Se.context,Se.props,X.batchId];return ue.def($(Y.data),".call(",le.slice(0,Math.max(Y.data.length+1,4)),")");case Jp:return ue.def(Se.props,Y.data);case ev:return ue.def(Se.context,Y.data);case gu:return ue.def("this",Y.data);case bl:return Y.data.append(X,ue),Y.data.ref}},X.attribCache={};var Q={};return X.scopeAttrib=function(ue){var Y=W.id(ue);if(Y in Q)return Q[Y];var le=Tt.scope[Y];le||(le=Tt.scope[Y]=new ye);var Oe=Q[Y]=$(le);return Oe},X}function Sr(X){var $=X.static,ne=X.dynamic,Te;if(Os in $){var Se=!!$[Os];Te=Nr(function(de,pe){return Se}),Te.enable=Se}else if(Os in ne){var ae=ne[Os];Te=yi(ae,function(de,pe){return de.invoke(pe,ae)})}return Te}function Lt(X,$){var ne=X.static,Te=X.dynamic;if(Vo in ne){var Se=ne[Vo];return Se?(Se=ut.getFramebuffer(Se),F.command(Se,"invalid framebuffer object"),Nr(function(de,pe){var Q=de.link(Se),ue=de.shared;pe.set(ue.framebuffer,".next",Q);var Y=ue.context;return pe.set(Y,"."+Ns,Q+".width"),pe.set(Y,"."+Eu,Q+".height"),Q})):Nr(function(de,pe){var Q=de.shared;pe.set(Q.framebuffer,".next","null");var ue=Q.context;return pe.set(ue,"."+Ns,ue+"."+av),pe.set(ue,"."+Eu,ue+"."+kd),"null"})}else if(Vo in Te){var ae=Te[Vo];return yi(ae,function(de,pe){var Q=de.invoke(pe,ae),ue=de.shared,Y=ue.framebuffer,le=pe.def(Y,".getFramebuffer(",Q,")");F.optional(function(){de.assert(pe,"!"+Q+"||"+le,"invalid framebuffer object")}),pe.set(Y,".next",le);var Oe=ue.context;return pe.set(Oe,"."+Ns,le+"?"+le+".width:"+Oe+"."+av),pe.set(Oe,"."+Eu,le+"?"+le+".height:"+Oe+"."+kd),le})}else return null}function ur(X,$,ne){var Te=X.static,Se=X.dynamic;function ae(Q){if(Q in Te){var ue=Te[Q];F.commandType(ue,"object","invalid "+Q,ne.commandStr);var Y=!0,le=ue.x|0,Oe=ue.y|0,Be,rt;return"width"in ue?(Be=ue.width|0,F.command(Be>=0,"invalid "+Q,ne.commandStr)):Y=!1,"height"in ue?(rt=ue.height|0,F.command(rt>=0,"invalid "+Q,ne.commandStr)):Y=!1,new Qn(!Y&&$&&$.thisDep,!Y&&$&&$.contextDep,!Y&&$&&$.propDep,function(kt,lr){var Dt=kt.shared.context,Zt=Be;"width"in ue||(Zt=lr.def(Dt,".",Ns,"-",le));var cr=rt;return"height"in ue||(cr=lr.def(Dt,".",Eu,"-",Oe)),[le,Oe,Zt,cr]})}else if(Q in Se){var Ye=Se[Q],at=yi(Ye,function(kt,lr){var Dt=kt.invoke(lr,Ye);F.optional(function(){kt.assert(lr,Dt+"&&typeof "+Dt+'==="object"',"invalid "+Q)});var Zt=kt.shared.context,cr=lr.def(Dt,".x|0"),Gt=lr.def(Dt,".y|0"),gr=lr.def('"width" in ',Dt,"?",Dt,".width|0:","(",Zt,".",Ns,"-",cr,")"),yr=lr.def('"height" in ',Dt,"?",Dt,".height|0:","(",Zt,".",Eu,"-",Gt,")");return F.optional(function(){kt.assert(lr,gr+">=0&&"+yr+">=0","invalid "+Q)}),[cr,Gt,gr,yr]});return $&&(at.thisDep=at.thisDep||$.thisDep,at.contextDep=at.contextDep||$.contextDep,at.propDep=at.propDep||$.propDep),at}else return $?new Qn($.thisDep,$.contextDep,$.propDep,function(kt,lr){var Dt=kt.shared.context;return[0,0,lr.def(Dt,".",Ns),lr.def(Dt,".",Eu)]}):null}var de=ae(la);if(de){var pe=de;de=new Qn(de.thisDep,de.contextDep,de.propDep,function(Q,ue){var Y=pe.append(Q,ue),le=Q.shared.context;return ue.set(le,"."+t1,Y[2]),ue.set(le,"."+J_,Y[3]),Y})}return{viewport:de,scissor_box:ae(Sl)}}function ar(X,$){var ne=X.static,Te=typeof ne[Ms]=="string"&&typeof ne[ca]=="string";if(Te){if(Object.keys($.dynamic).length>0)return null;var Se=$.static,ae=Object.keys(Se);if(ae.length>0&&typeof Se[ae[0]]=="number"){for(var de=[],pe=0;pe<ae.length;++pe)F(typeof Se[ae[pe]]=="number","must specify all vertex attribute locations when using vaos"),de.push([Se[ae[pe]]|0,ae[pe]]);return de}}return null}function pr(X,$,ne){var Te=X.static,Se=X.dynamic;function ae(Y){if(Y in Te){var le=W.id(Te[Y]);F.optional(function(){dt.shader(fa[Y],le,F.guessCommand())});var Oe=Nr(function(){return le});return Oe.id=le,Oe}else if(Y in Se){var Be=Se[Y];return yi(Be,function(rt,Ye){var at=rt.invoke(Ye,Be),kt=Ye.def(rt.shared.strings,".id(",at,")");return F.optional(function(){Ye(rt.shared.shader,".shader(",fa[Y],",",kt,",",rt.command,");")}),kt})}return null}var de=ae(Ms),pe=ae(ca),Q=null,ue;return Ni(de)&&Ni(pe)?(Q=dt.program(pe.id,de.id,null,ne),ue=Nr(function(Y,le){return Y.link(Q)})):ue=new Qn(de&&de.thisDep||pe&&pe.thisDep,de&&de.contextDep||pe&&pe.contextDep,de&&de.propDep||pe&&pe.propDep,function(Y,le){var Oe=Y.shared.shader,Be;de?Be=de.append(Y,le):Be=le.def(Oe,".",Ms);var rt;pe?rt=pe.append(Y,le):rt=le.def(Oe,".",ca);var Ye=Oe+".program("+rt+","+Be;return F.optional(function(){Ye+=","+Y.command}),le.def(Ye+")")}),{frag:de,vert:pe,progVar:ue,program:Q}}function Ar(X,$){var ne=X.static,Te=X.dynamic;function Se(){if(Ho in ne){var Y=ne[Ho];Ha(Y)?Y=Me.getElements(Me.create(Y,!0)):Y&&(Y=Me.getElements(Y),F.command(Y,"invalid elements",$.commandStr));var le=Nr(function(Be,rt){if(Y){var Ye=Be.link(Y);return Be.ELEMENTS=Ye,Ye}return Be.ELEMENTS=null,null});return le.value=Y,le}else if(Ho in Te){var Oe=Te[Ho];return yi(Oe,function(Be,rt){var Ye=Be.shared,at=Ye.isBufferArgs,kt=Ye.elements,lr=Be.invoke(rt,Oe),Dt=rt.def("null"),Zt=rt.def(at,"(",lr,")"),cr=Be.cond(Zt).then(Dt,"=",kt,".createStream(",lr,");").else(Dt,"=",kt,".getElements(",lr,");");return F.optional(function(){Be.assert(cr.else,"!"+lr+"||"+Dt,"invalid elements")}),rt.entry(cr),rt.exit(Be.cond(Zt).then(kt,".destroyStream(",Dt,");")),Be.ELEMENTS=Dt,Dt})}return null}var ae=Se();function de(){if(Xo in ne){var Y=ne[Xo];return F.commandParameter(Y,sl,"invalid primitve",$.commandStr),Nr(function(Oe,Be){return sl[Y]})}else if(Xo in Te){var le=Te[Xo];return yi(le,function(Oe,Be){var rt=Oe.constants.primTypes,Ye=Oe.invoke(Be,le);return F.optional(function(){Oe.assert(Be,Ye+" in "+rt,"invalid primitive, must be one of "+Object.keys(sl))}),Be.def(rt,"[",Ye,"]")})}else if(ae)return Ni(ae)?ae.value?Nr(function(Oe,Be){return Be.def(Oe.ELEMENTS,".primType")}):Nr(function(){return sv}):new Qn(ae.thisDep,ae.contextDep,ae.propDep,function(Oe,Be){var rt=Oe.ELEMENTS;return Be.def(rt,"?",rt,".primType:",sv)});return null}function pe(Y,le){if(Y in ne){var Oe=ne[Y]|0;return F.command(!le||Oe>=0,"invalid "+Y,$.commandStr),Nr(function(rt,Ye){return le&&(rt.OFFSET=Oe),Oe})}else if(Y in Te){var Be=Te[Y];return yi(Be,function(rt,Ye){var at=rt.invoke(Ye,Be);return le&&(rt.OFFSET=at,F.optional(function(){rt.assert(Ye,at+">=0","invalid "+Y)})),at})}else if(le&&ae)return Nr(function(rt,Ye){return rt.OFFSET="0",0});return null}var Q=pe(Jc,!0);function ue(){if(ws in ne){var Y=ne[ws]|0;return F.command(typeof Y=="number"&&Y>=0,"invalid vertex count",$.commandStr),Nr(function(){return Y})}else if(ws in Te){var le=Te[ws];return yi(le,function(rt,Ye){var at=rt.invoke(Ye,le);return F.optional(function(){rt.assert(Ye,"typeof "+at+'==="number"&&'+at+">=0&&"+at+"===("+at+"|0)","invalid vertex count")}),at})}else if(ae)if(Ni(ae)){if(ae)return Q?new Qn(Q.thisDep,Q.contextDep,Q.propDep,function(rt,Ye){var at=Ye.def(rt.ELEMENTS,".vertCount-",rt.OFFSET);return F.optional(function(){rt.assert(Ye,at+">=0","invalid vertex offset/element buffer too small")}),at}):Nr(function(rt,Ye){return Ye.def(rt.ELEMENTS,".vertCount")});var Oe=Nr(function(){return-1});return F.optional(function(){Oe.MISSING=!0}),Oe}else{var Be=new Qn(ae.thisDep||Q.thisDep,ae.contextDep||Q.contextDep,ae.propDep||Q.propDep,function(rt,Ye){var at=rt.ELEMENTS;return rt.OFFSET?Ye.def(at,"?",at,".vertCount-",rt.OFFSET,":-1"):Ye.def(at,"?",at,".vertCount:-1")});return F.optional(function(){Be.DYNAMIC=!0}),Be}return null}return{elements:ae,primitive:de(),count:ue(),instances:pe(ef,!1),offset:Q}}function Qr(X,$){var ne=X.static,Te=X.dynamic,Se={};return ct.forEach(function(ae){var de=gt(ae);function pe(Q,ue){if(ae in ne){var Y=Q(ne[ae]);Se[de]=Nr(function(){return Y})}else if(ae in Te){var le=Te[ae];Se[de]=yi(le,function(Oe,Be){return ue(Oe,Be,Oe.invoke(Be,le))})}}switch(ae){case Yc:case Id:case tv:case Q_:case on:case $n:case zn:case Dd:case nv:case yu:return pe(function(Q){return F.commandType(Q,"boolean",ae,$.commandStr),Q},function(Q,ue,Y){return F.optional(function(){Q.assert(ue,"typeof "+Y+'==="boolean"',"invalid flag "+ae,Q.commandStr)}),Y});case Wn:return pe(function(Q){return F.commandParameter(Q,Va,"invalid "+ae,$.commandStr),Va[Q]},function(Q,ue,Y){var le=Q.constants.compareFuncs;return F.optional(function(){Q.assert(ue,Y+" in "+le,"invalid "+ae+", must be one of "+Object.keys(Va))}),ue.def(le,"[",Y,"]")});case $c:return pe(function(Q){return F.command(xn(Q)&&Q.length===2&&typeof Q[0]=="number"&&typeof Q[1]=="number"&&Q[0]<=Q[1],"depth range is 2d array",$.commandStr),Q},function(Q,ue,Y){F.optional(function(){Q.assert(ue,Q.shared.isArrayLike+"("+Y+")&&"+Y+".length===2&&typeof "+Y+'[0]==="number"&&typeof '+Y+'[1]==="number"&&'+Y+"[0]<="+Y+"[1]","depth range must be a 2d array")});var le=ue.def("+",Y,"[0]"),Oe=ue.def("+",Y,"[1]");return[le,Oe]});case Mr:return pe(function(Q){F.commandType(Q,"object","blend.func",$.commandStr);var ue="srcRGB"in Q?Q.srcRGB:Q.src,Y="srcAlpha"in Q?Q.srcAlpha:Q.src,le="dstRGB"in Q?Q.dstRGB:Q.dst,Oe="dstAlpha"in Q?Q.dstAlpha:Q.dst;return F.commandParameter(ue,ja,de+".srcRGB",$.commandStr),F.commandParameter(Y,ja,de+".srcAlpha",$.commandStr),F.commandParameter(le,ja,de+".dstRGB",$.commandStr),F.commandParameter(Oe,ja,de+".dstAlpha",$.commandStr),F.command(uv.indexOf(ue+", "+le)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+ue+", "+le+")",$.commandStr),[ja[ue],ja[le],ja[Y],ja[Oe]]},function(Q,ue,Y){var le=Q.constants.blendFuncs;F.optional(function(){Q.assert(ue,Y+"&&typeof "+Y+'==="object"',"invalid blend func, must be an object")});function Oe(Dt,Zt){var cr=ue.def('"',Dt,Zt,'" in ',Y,"?",Y,".",Dt,Zt,":",Y,".",Dt);return F.optional(function(){Q.assert(ue,cr+" in "+le,"invalid "+ae+"."+Dt+Zt+", must be one of "+Object.keys(ja))}),cr}var Be=Oe("src","RGB"),rt=Oe("dst","RGB");F.optional(function(){var Dt=Q.constants.invalidBlendCombinations;Q.assert(ue,Dt+".indexOf("+Be+'+", "+'+rt+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Ye=ue.def(le,"[",Be,"]"),at=ue.def(le,"[",Oe("src","Alpha"),"]"),kt=ue.def(le,"[",rt,"]"),lr=ue.def(le,"[",Oe("dst","Alpha"),"]");return[Ye,kt,at,lr]});case uo:return pe(function(Q){if(typeof Q=="string")return F.commandParameter(Q,Ie,"invalid "+ae,$.commandStr),[Ie[Q],Ie[Q]];if(typeof Q=="object")return F.commandParameter(Q.rgb,Ie,ae+".rgb",$.commandStr),F.commandParameter(Q.alpha,Ie,ae+".alpha",$.commandStr),[Ie[Q.rgb],Ie[Q.alpha]];F.commandRaise("invalid blend.equation",$.commandStr)},function(Q,ue,Y){var le=Q.constants.blendEquations,Oe=ue.def(),Be=ue.def(),rt=Q.cond("typeof ",Y,'==="string"');return F.optional(function(){function Ye(at,kt,lr){Q.assert(at,lr+" in "+le,"invalid "+kt+", must be one of "+Object.keys(Ie))}Ye(rt.then,ae,Y),Q.assert(rt.else,Y+"&&typeof "+Y+'==="object"',"invalid "+ae),Ye(rt.else,ae+".rgb",Y+".rgb"),Ye(rt.else,ae+".alpha",Y+".alpha")}),rt.then(Oe,"=",Be,"=",le,"[",Y,"];"),rt.else(Oe,"=",le,"[",Y,".rgb];",Be,"=",le,"[",Y,".alpha];"),ue(rt),[Oe,Be]});case Pd:return pe(function(Q){return F.command(xn(Q)&&Q.length===4,"blend.color must be a 4d array",$.commandStr),Ri(4,function(ue){return+Q[ue]})},function(Q,ue,Y){return F.optional(function(){Q.assert(ue,Q.shared.isArrayLike+"("+Y+")&&"+Y+".length===4","blend.color must be a 4d array")}),Ri(4,function(le){return ue.def("+",Y,"[",le,"]")})});case Bd:return pe(function(Q){return F.commandType(Q,"number",de,$.commandStr),Q|0},function(Q,ue,Y){return F.optional(function(){Q.assert(ue,"typeof "+Y+'==="number"',"invalid stencil.mask")}),ue.def(Y,"|0")});case Kc:return pe(function(Q){F.commandType(Q,"object",de,$.commandStr);var ue=Q.cmp||"keep",Y=Q.ref||0,le="mask"in Q?Q.mask:-1;return F.commandParameter(ue,Va,ae+".cmp",$.commandStr),F.commandType(Y,"number",ae+".ref",$.commandStr),F.commandType(le,"number",ae+".mask",$.commandStr),[Va[ue],Y,le]},function(Q,ue,Y){var le=Q.constants.compareFuncs;F.optional(function(){function Ye(){Q.assert(ue,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Ye(Y+"&&typeof ",Y,'==="object"'),Ye('!("cmp" in ',Y,")||(",Y,".cmp in ",le,")")});var Oe=ue.def('"cmp" in ',Y,"?",le,"[",Y,".cmp]",":",Wo),Be=ue.def(Y,".ref|0"),rt=ue.def('"mask" in ',Y,"?",Y,".mask|0:-1");return[Oe,Be,rt]});case Qc:case si:return pe(function(Q){F.commandType(Q,"object",de,$.commandStr);var ue=Q.fail||"keep",Y=Q.zfail||"keep",le=Q.zpass||"keep";return F.commandParameter(ue,$o,ae+".fail",$.commandStr),F.commandParameter(Y,$o,ae+".zfail",$.commandStr),F.commandParameter(le,$o,ae+".zpass",$.commandStr),[ae===si?qo:Go,$o[ue],$o[Y],$o[le]]},function(Q,ue,Y){var le=Q.constants.stencilOps;F.optional(function(){Q.assert(ue,Y+"&&typeof "+Y+'==="object"',"invalid "+ae)});function Oe(Be){return F.optional(function(){Q.assert(ue,'!("'+Be+'" in '+Y+")||("+Y+"."+Be+" in "+le+")","invalid "+ae+"."+Be+", must be one of "+Object.keys($o))}),ue.def('"',Be,'" in ',Y,"?",le,"[",Y,".",Be,"]:",Wo)}return[ae===si?qo:Go,Oe("fail"),Oe("zfail"),Oe("zpass")]});case Zc:return pe(function(Q){F.commandType(Q,"object",de,$.commandStr);var ue=Q.factor|0,Y=Q.units|0;return F.commandType(ue,"number",de+".factor",$.commandStr),F.commandType(Y,"number",de+".units",$.commandStr),[ue,Y]},function(Q,ue,Y){F.optional(function(){Q.assert(ue,Y+"&&typeof "+Y+'==="object"',"invalid "+ae)});var le=ue.def(Y,".factor|0"),Oe=ue.def(Y,".units|0");return[le,Oe]});case Tl:return pe(function(Q){var ue=0;return Q==="front"?ue=Go:Q==="back"&&(ue=qo),F.command(!!ue,de,$.commandStr),ue},function(Q,ue,Y){return F.optional(function(){Q.assert(ue,Y+'==="front"||'+Y+'==="back"',"invalid cull.face")}),ue.def(Y,'==="front"?',Go,":",qo)});case rv:return pe(function(Q){return F.command(typeof Q=="number"&&Q>=Re.lineWidthDims[0]&&Q<=Re.lineWidthDims[1],"invalid line width, must be a positive number between "+Re.lineWidthDims[0]+" and "+Re.lineWidthDims[1],$.commandStr),Q},function(Q,ue,Y){return F.optional(function(){Q.assert(ue,"typeof "+Y+'==="number"&&'+Y+">="+Re.lineWidthDims[0]+"&&"+Y+"<="+Re.lineWidthDims[1],"invalid line width")}),Y});case Cs:return pe(function(Q){return F.commandParameter(Q,Sa,de,$.commandStr),Sa[Q]},function(Q,ue,Y){return F.optional(function(){Q.assert(ue,Y+'==="cw"||'+Y+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),ue.def(Y+'==="cw"?'+ff+":"+Xd)});case jo:return pe(function(Q){return F.command(xn(Q)&&Q.length===4,"color.mask must be length 4 array",$.commandStr),Q.map(function(ue){return!!ue})},function(Q,ue,Y){return F.optional(function(){Q.assert(ue,Q.shared.isArrayLike+"("+Y+")&&"+Y+".length===4","invalid color.mask")}),Ri(4,function(le){return"!!"+Y+"["+le+"]"})});case Ld:return pe(function(Q){F.command(typeof Q=="object"&&Q,de,$.commandStr);var ue="value"in Q?Q.value:1,Y=!!Q.invert;return F.command(typeof ue=="number"&&ue>=0&&ue<=1,"sample.coverage.value must be a number between 0 and 1",$.commandStr),[ue,Y]},function(Q,ue,Y){F.optional(function(){Q.assert(ue,Y+"&&typeof "+Y+'==="object"',"invalid sample.coverage")});var le=ue.def('"value" in ',Y,"?+",Y,".value:1"),Oe=ue.def("!!",Y,".invert");return[le,Oe]})}}),Se}function Yn(X,$){var ne=X.static,Te=X.dynamic,Se={};return Object.keys(ne).forEach(function(ae){var de=ne[ae],pe;if(typeof de=="number"||typeof de=="boolean")pe=Nr(function(){return de});else if(typeof de=="function"){var Q=de._reglType;Q==="texture2d"||Q==="textureCube"?pe=Nr(function(ue){return ue.link(de)}):Q==="framebuffer"||Q==="framebufferCube"?(F.command(de.color.length>0,'missing color attachment for framebuffer sent to uniform "'+ae+'"',$.commandStr),pe=Nr(function(ue){return ue.link(de.color[0])})):F.commandRaise('invalid data for uniform "'+ae+'"',$.commandStr)}else xn(de)?pe=Nr(function(ue){var Y=ue.global.def("[",Ri(de.length,function(le){return F.command(typeof de[le]=="number"||typeof de[le]=="boolean","invalid uniform "+ae,ue.commandStr),de[le]}),"]");return Y}):F.commandRaise('invalid or missing data for uniform "'+ae+'"',$.commandStr);pe.value=de,Se[ae]=pe}),Object.keys(Te).forEach(function(ae){var de=Te[ae];Se[ae]=yi(de,function(pe,Q){return pe.invoke(Q,de)})}),Se}function Er(X,$){var ne=X.static,Te=X.dynamic,Se={};return Object.keys(ne).forEach(function(ae){var de=ne[ae],pe=W.id(ae),Q=new ye;if(Ha(de))Q.state=Rs,Q.buffer=Ge.getBuffer(Ge.create(de,bu,!1,!0)),Q.type=0;else{var ue=Ge.getBuffer(de);if(ue)Q.state=Rs,Q.buffer=ue,Q.type=0;else if(F.command(typeof de=="object"&&de,"invalid data for attribute "+ae,$.commandStr),"constant"in de){var Y=de.constant;Q.buffer="null",Q.state=_u,typeof Y=="number"?Q.x=Y:(F.command(xn(Y)&&Y.length>0&&Y.length<=4,"invalid constant for attribute "+ae,$.commandStr),so.forEach(function(kt,lr){lr<Y.length&&(Q[kt]=Y[lr])}))}else{Ha(de.buffer)?ue=Ge.getBuffer(Ge.create(de.buffer,bu,!1,!0)):ue=Ge.getBuffer(de.buffer),F.command(!!ue,'missing buffer for attribute "'+ae+'"',$.commandStr);var le=de.offset|0;F.command(le>=0,'invalid offset for attribute "'+ae+'"',$.commandStr);var Oe=de.stride|0;F.command(Oe>=0&&Oe<256,'invalid stride for attribute "'+ae+'", must be integer betweeen [0, 255]',$.commandStr);var Be=de.size|0;F.command(!("size"in de)||Be>0&&Be<=4,'invalid size for attribute "'+ae+'", must be 1,2,3,4',$.commandStr);var rt=!!de.normalized,Ye=0;"type"in de&&(F.commandParameter(de.type,Lo,"invalid type for attribute "+ae,$.commandStr),Ye=Lo[de.type]);var at=de.divisor|0;"divisor"in de&&(F.command(at===0||lt,'cannot specify divisor for attribute "'+ae+'", instancing not supported',$.commandStr),F.command(at>=0,'invalid divisor for attribute "'+ae+'"',$.commandStr)),F.optional(function(){var kt=$.commandStr,lr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(de).forEach(function(Dt){F.command(lr.indexOf(Dt)>=0,'unknown parameter "'+Dt+'" for attribute pointer "'+ae+'" (valid parameters are '+lr+")",kt)})}),Q.buffer=ue,Q.state=Rs,Q.size=Be,Q.normalized=rt,Q.type=Ye||ue.dtype,Q.offset=le,Q.stride=Oe,Q.divisor=at}}Se[ae]=Nr(function(kt,lr){var Dt=kt.attribCache;if(pe in Dt)return Dt[pe];var Zt={isStream:!1};return Object.keys(Q).forEach(function(cr){Zt[cr]=Q[cr]}),Q.buffer&&(Zt.buffer=kt.link(Q.buffer),Zt.type=Zt.type||Zt.buffer+".dtype"),Dt[pe]=Zt,Zt})}),Object.keys(Te).forEach(function(ae){var de=Te[ae];function pe(Q,ue){var Y=Q.invoke(ue,de),le=Q.shared,Oe=Q.constants,Be=le.isBufferArgs,rt=le.buffer;F.optional(function(){Q.assert(ue,Y+"&&(typeof "+Y+'==="object"||typeof '+Y+'==="function")&&('+Be+"("+Y+")||"+rt+".getBuffer("+Y+")||"+rt+".getBuffer("+Y+".buffer)||"+Be+"("+Y+'.buffer)||("constant" in '+Y+"&&(typeof "+Y+'.constant==="number"||'+le.isArrayLike+"("+Y+".constant))))",'invalid dynamic attribute "'+ae+'"')});var Ye={isStream:ue.def(!1)},at=new ye;at.state=Rs,Object.keys(at).forEach(function(Zt){Ye[Zt]=ue.def(""+at[Zt])});var kt=Ye.buffer,lr=Ye.type;ue("if(",Be,"(",Y,")){",Ye.isStream,"=true;",kt,"=",rt,".createStream(",bu,",",Y,");",lr,"=",kt,".dtype;","}else{",kt,"=",rt,".getBuffer(",Y,");","if(",kt,"){",lr,"=",kt,".dtype;",'}else if("constant" in ',Y,"){",Ye.state,"=",_u,";","if(typeof "+Y+'.constant === "number"){',Ye[so[0]],"=",Y,".constant;",so.slice(1).map(function(Zt){return Ye[Zt]}).join("="),"=0;","}else{",so.map(function(Zt,cr){return Ye[Zt]+"="+Y+".constant.length>"+cr+"?"+Y+".constant["+cr+"]:0;"}).join(""),"}}else{","if(",Be,"(",Y,".buffer)){",kt,"=",rt,".createStream(",bu,",",Y,".buffer);","}else{",kt,"=",rt,".getBuffer(",Y,".buffer);","}",lr,'="type" in ',Y,"?",Oe.glTypes,"[",Y,".type]:",kt,".dtype;",Ye.normalized,"=!!",Y,".normalized;");function Dt(Zt){ue(Ye[Zt],"=",Y,".",Zt,"|0;")}return Dt("size"),Dt("offset"),Dt("stride"),Dt("divisor"),ue("}}"),ue.exit("if(",Ye.isStream,"){",rt,".destroyStream(",kt,");","}"),Ye}Se[ae]=yi(de,pe)}),Se}function jn(X,$){var ne=X.static,Te=X.dynamic;if(Al in ne){var Se=ne[Al];return Se!==null&&Tt.getVAO(Se)===null&&(Se=Tt.createVAO(Se)),Nr(function(de){return de.link(Tt.getVAO(Se))})}else if(Al in Te){var ae=Te[Al];return yi(ae,function(de,pe){var Q=de.invoke(pe,ae);return pe.def(de.shared.vao+".getVAO("+Q+")")})}return null}function tn(X){var $=X.static,ne=X.dynamic,Te={};return Object.keys($).forEach(function(Se){var ae=$[Se];Te[Se]=Nr(function(de,pe){return typeof ae=="number"||typeof ae=="boolean"?""+ae:de.link(ae)})}),Object.keys(ne).forEach(function(Se){var ae=ne[Se];Te[Se]=yi(ae,function(de,pe){return de.invoke(pe,ae)})}),Te}function Tn(X,$,ne,Te,Se){var ae=X.static,de=X.dynamic;F.optional(function(){var Dt=[Vo,ca,Ms,Ho,Xo,Jc,ws,ef,Os,Al].concat(ct);function Zt(cr){Object.keys(cr).forEach(function(Gt){F.command(Dt.indexOf(Gt)>=0,'unknown parameter "'+Gt+'"',Se.commandStr)})}Zt(ae),Zt(de)});var pe=ar(X,$),Q=Lt(X),ue=ur(X,Q,Se),Y=Ar(X,Se),le=Qr(X,Se),Oe=pr(X,Se,pe);function Be(Dt){var Zt=ue[Dt];Zt&&(le[Dt]=Zt)}Be(la),Be(gt(Sl));var rt=Object.keys(le).length>0,Ye={framebuffer:Q,draw:Y,shader:Oe,state:le,dirty:rt,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Ye.profile=Sr(X),Ye.uniforms=Yn(ne,Se),Ye.drawVAO=Ye.scopeVAO=jn(X),!Ye.drawVAO&&Oe.program&&!pe&&ie.angle_instanced_arrays){var at=!0,kt=Oe.program.attributes.map(function(Dt){var Zt=$.static[Dt];return at=at&&!!Zt,Zt});if(at&&kt.length>0){var lr=Tt.getVAO(Tt.createVAO(kt));Ye.drawVAO=new Qn(null,null,null,function(Dt,Zt){return Dt.link(lr)}),Ye.useVAO=!0}}return pe?Ye.useVAO=!0:Ye.attributes=Er($,Se),Ye.context=tn(Te),Ye}function Sn(X,$,ne){var Te=X.shared,Se=Te.context,ae=X.scope();Object.keys(ne).forEach(function(de){$.save(Se,"."+de);var pe=ne[de];ae(Se,".",de,"=",pe.append(X,$),";")}),$(ae)}function Vn(X,$,ne,Te){var Se=X.shared,ae=Se.gl,de=Se.framebuffer,pe;xt&&(pe=$.def(Se.extensions,".webgl_draw_buffers"));var Q=X.constants,ue=Q.drawBuffer,Y=Q.backBuffer,le;ne?le=ne.append(X,$):le=$.def(de,".next"),Te||$("if(",le,"!==",de,".cur){"),$("if(",le,"){",ae,".bindFramebuffer(",Il,",",le,".framebuffer);"),xt&&$(pe,".drawBuffersWEBGL(",ue,"[",le,".colorAttachments.length]);"),$("}else{",ae,".bindFramebuffer(",Il,",null);"),xt&&$(pe,".drawBuffersWEBGL(",Y,");"),$("}",de,".cur=",le,";"),Te||$("}")}function cn(X,$,ne){var Te=X.shared,Se=Te.gl,ae=X.current,de=X.next,pe=Te.current,Q=Te.next,ue=X.cond(pe,".dirty");ct.forEach(function(Y){var le=gt(Y);if(!(le in ne.state)){var Oe,Be;if(le in de){Oe=de[le],Be=ae[le];var rt=Ri(Qe[le].length,function(at){return ue.def(Oe,"[",at,"]")});ue(X.cond(rt.map(function(at,kt){return at+"!=="+Be+"["+kt+"]"}).join("||")).then(Se,".",et[le],"(",rt,");",rt.map(function(at,kt){return Be+"["+kt+"]="+at}).join(";"),";"))}else{Oe=ue.def(Q,".",le);var Ye=X.cond(Oe,"!==",pe,".",le);ue(Ye),le in Ct?Ye(X.cond(Oe).then(Se,".enable(",Ct[le],");").else(Se,".disable(",Ct[le],");"),pe,".",le,"=",Oe,";"):Ye(Se,".",et[le],"(",Oe,");",pe,".",le,"=",Oe,";")}}}),Object.keys(ne.state).length===0&&ue(pe,".dirty=false;"),$(ue)}function Fr(X,$,ne,Te){var Se=X.shared,ae=X.current,de=Se.current,pe=Se.gl;lv(Object.keys(ne)).forEach(function(Q){var ue=ne[Q];if(!(Te&&!Te(ue))){var Y=ue.append(X,$);if(Ct[Q]){var le=Ct[Q];Ni(ue)?Y?$(pe,".enable(",le,");"):$(pe,".disable(",le,");"):$(X.cond(Y).then(pe,".enable(",le,");").else(pe,".disable(",le,");")),$(de,".",Q,"=",Y,";")}else if(xn(Y)){var Oe=ae[Q];$(pe,".",et[Q],"(",Y,");",Y.map(function(Be,rt){return Oe+"["+rt+"]="+Be}).join(";"),";")}else $(pe,".",et[Q],"(",Y,");",de,".",Q,"=",Y,";")}})}function Cn(X,$){lt&&(X.instancing=$.def(X.shared.extensions,".angle_instanced_arrays"))}function hr(X,$,ne,Te,Se){var ae=X.shared,de=X.stats,pe=ae.current,Q=ae.timer,ue=ne.profile;function Y(){return typeof performance>"u"?"Date.now()":"performance.now()"}var le,Oe;function Be(Dt){le=$.def(),Dt(le,"=",Y(),";"),typeof Se=="string"?Dt(de,".count+=",Se,";"):Dt(de,".count++;"),nt&&(Te?(Oe=$.def(),Dt(Oe,"=",Q,".getNumPendingQueries();")):Dt(Q,".beginQuery(",de,");"))}function rt(Dt){Dt(de,".cpuTime+=",Y(),"-",le,";"),nt&&(Te?Dt(Q,".pushScopeStats(",Oe,",",Q,".getNumPendingQueries(),",de,");"):Dt(Q,".endQuery();"))}function Ye(Dt){var Zt=$.def(pe,".profile");$(pe,".profile=",Dt,";"),$.exit(pe,".profile=",Zt,";")}var at;if(ue){if(Ni(ue)){ue.enable?(Be($),rt($.exit),Ye("true")):Ye("false");return}at=ue.append(X,$),Ye(at)}else at=$.def(pe,".profile");var kt=X.block();Be(kt),$("if(",at,"){",kt,"}");var lr=X.block();rt(lr),$.exit("if(",at,"){",lr,"}")}function Xr(X,$,ne,Te,Se){var ae=X.shared;function de(Q){switch(Q){case rf:case Cl:case Ol:return 2;case Rl:case af:case sf:return 3;case nf:case of:case uf:return 4;default:return 1}}function pe(Q,ue,Y){var le=ae.gl,Oe=$.def(Q,".location"),Be=$.def(ae.attributes,"[",Oe,"]"),rt=Y.state,Ye=Y.buffer,at=[Y.x,Y.y,Y.z,Y.w],kt=["buffer","normalized","offset","stride"];function lr(){$("if(!",Be,".buffer){",le,".enableVertexAttribArray(",Oe,");}");var Zt=Y.type,cr;if(Y.size?cr=$.def(Y.size,"||",ue):cr=ue,$("if(",Be,".type!==",Zt,"||",Be,".size!==",cr,"||",kt.map(function(gr){return Be+"."+gr+"!=="+Y[gr]}).join("||"),"){",le,".bindBuffer(",bu,",",Ye,".buffer);",le,".vertexAttribPointer(",[Oe,cr,Zt,Y.normalized,Y.stride,Y.offset],");",Be,".type=",Zt,";",Be,".size=",cr,";",kt.map(function(gr){return Be+"."+gr+"="+Y[gr]+";"}).join(""),"}"),lt){var Gt=Y.divisor;$("if(",Be,".divisor!==",Gt,"){",X.instancing,".vertexAttribDivisorANGLE(",[Oe,Gt],");",Be,".divisor=",Gt,";}")}}function Dt(){$("if(",Be,".buffer){",le,".disableVertexAttribArray(",Oe,");",Be,".buffer=null;","}if(",so.map(function(Zt,cr){return Be+"."+Zt+"!=="+at[cr]}).join("||"),"){",le,".vertexAttrib4f(",Oe,",",at,");",so.map(function(Zt,cr){return Be+"."+Zt+"="+at[cr]+";"}).join(""),"}")}rt===Rs?lr():rt===_u?Dt():($("if(",rt,"===",Rs,"){"),lr(),$("}else{"),Dt(),$("}"))}Te.forEach(function(Q){var ue=Q.name,Y=ne.attributes[ue],le;if(Y){if(!Se(Y))return;le=Y.append(X,$)}else{if(!Se($d))return;var Oe=X.scopeAttrib(ue);F.optional(function(){X.assert($,Oe+".state","missing attribute "+ue)}),le={},Object.keys(new ye).forEach(function(Be){le[Be]=$.def(Oe,".",Be)})}pe(X.link(Q),de(Q.info.type),le)})}function Ur(X,$,ne,Te,Se){for(var ae=X.shared,de=ae.gl,pe,Q=0;Q<Te.length;++Q){var ue=Te[Q],Y=ue.name,le=ue.info.type,Oe=ne.uniforms[Y],Be=X.link(ue),rt=Be+".location",Ye;if(Oe){if(!Se(Oe))continue;if(Ni(Oe)){var at=Oe.value;if(F.command(at!==null&&typeof at<"u",'missing uniform "'+Y+'"',X.commandStr),le===lf||le===cf){F.command(typeof at=="function"&&(le===lf&&(at._reglType==="texture2d"||at._reglType==="framebuffer")||le===cf&&(at._reglType==="textureCube"||at._reglType==="framebufferCube")),"invalid texture for uniform "+Y,X.commandStr);var kt=X.link(at._texture||at.color[0]._texture);$(de,".uniform1i(",rt,",",kt+".bind());"),$.exit(kt,".unbind();")}else if(le===Tu||le===Ml||le===wl){F.optional(function(){F.command(xn(at),"invalid matrix for uniform "+Y,X.commandStr),F.command(le===Tu&&at.length===4||le===Ml&&at.length===9||le===wl&&at.length===16,"invalid length for matrix uniform "+Y,X.commandStr)});var lr=X.global.def("new Float32Array(["+Array.prototype.slice.call(at)+"])"),Dt=2;le===Ml?Dt=3:le===wl&&(Dt=4),$(de,".uniformMatrix",Dt,"fv(",rt,",false,",lr,");")}else{switch(le){case Vd:F.commandType(at,"number","uniform "+Y,X.commandStr),pe="1f";break;case rf:F.command(xn(at)&&at.length===2,"uniform "+Y,X.commandStr),pe="2f";break;case Rl:F.command(xn(at)&&at.length===3,"uniform "+Y,X.commandStr),pe="3f";break;case nf:F.command(xn(at)&&at.length===4,"uniform "+Y,X.commandStr),pe="4f";break;case ov:F.commandType(at,"boolean","uniform "+Y,X.commandStr),pe="1i";break;case Hd:F.commandType(at,"number","uniform "+Y,X.commandStr),pe="1i";break;case Ol:F.command(xn(at)&&at.length===2,"uniform "+Y,X.commandStr),pe="2i";break;case Cl:F.command(xn(at)&&at.length===2,"uniform "+Y,X.commandStr),pe="2i";break;case sf:F.command(xn(at)&&at.length===3,"uniform "+Y,X.commandStr),pe="3i";break;case af:F.command(xn(at)&&at.length===3,"uniform "+Y,X.commandStr),pe="3i";break;case uf:F.command(xn(at)&&at.length===4,"uniform "+Y,X.commandStr),pe="4i";break;case of:F.command(xn(at)&&at.length===4,"uniform "+Y,X.commandStr),pe="4i";break}$(de,".uniform",pe,"(",rt,",",xn(at)?Array.prototype.slice.call(at):at,");")}continue}else Ye=Oe.append(X,$)}else{if(!Se($d))continue;Ye=$.def(ae.uniforms,"[",W.id(Y),"]")}le===lf?$("if(",Ye,"&&",Ye,'._reglType==="framebuffer"){',Ye,"=",Ye,".color[0];","}"):le===cf&&$("if(",Ye,"&&",Ye,'._reglType==="framebufferCube"){',Ye,"=",Ye,".color[0];","}"),F.optional(function(){function yr(Ii,xu){X.assert($,Ii,'bad data or missing for uniform "'+Y+'".  '+xu)}function zr(Ii){yr("typeof "+Ye+'==="'+Ii+'"',"invalid type, expected "+Ii)}function Pr(Ii,xu){yr(ae.isArrayLike+"("+Ye+")&&"+Ye+".length==="+Ii,"invalid vector, should have length "+Ii,X.commandStr)}function Zi(Ii){yr("typeof "+Ye+'==="function"&&'+Ye+'._reglType==="texture'+(Ii===ig?"2d":"Cube")+'"',"invalid texture type",X.commandStr)}switch(le){case Hd:zr("number");break;case Cl:Pr(2);break;case af:Pr(3);break;case of:Pr(4);break;case Vd:zr("number");break;case rf:Pr(2);break;case Rl:Pr(3);break;case nf:Pr(4);break;case ov:zr("boolean");break;case Ol:Pr(2);break;case sf:Pr(3);break;case uf:Pr(4);break;case Tu:Pr(4);break;case Ml:Pr(9);break;case wl:Pr(16);break;case lf:Zi(ig);break;case cf:Zi(ag);break}});var Zt=1;switch(le){case lf:case cf:var cr=$.def(Ye,"._texture");$(de,".uniform1i(",rt,",",cr,".bind());"),$.exit(cr,".unbind();");continue;case Hd:case ov:pe="1i";break;case Cl:case Ol:pe="2i",Zt=2;break;case af:case sf:pe="3i",Zt=3;break;case of:case uf:pe="4i",Zt=4;break;case Vd:pe="1f";break;case rf:pe="2f",Zt=2;break;case Rl:pe="3f",Zt=3;break;case nf:pe="4f",Zt=4;break;case Tu:pe="Matrix2fv";break;case Ml:pe="Matrix3fv";break;case wl:pe="Matrix4fv";break}if($(de,".uniform",pe,"(",rt,","),pe.charAt(0)==="M"){var Gt=Math.pow(le-Tu+2,2),gr=X.global.def("new Float32Array(",Gt,")");$("false,(Array.isArray(",Ye,")||",Ye," instanceof Float32Array)?",Ye,":(",Ri(Gt,function(yr){return gr+"["+yr+"]="+Ye+"["+yr+"]"}),",",gr,")")}else Zt>1?$(Ri(Zt,function(yr){return Ye+"["+yr+"]"})):$(Ye);$(");")}}function $t(X,$,ne,Te){var Se=X.shared,ae=Se.gl,de=Se.draw,pe=Te.draw;function Q(){var cr=pe.elements,Gt,gr=$;return cr?((cr.contextDep&&Te.contextDynamic||cr.propDep)&&(gr=ne),Gt=cr.append(X,gr)):Gt=gr.def(de,".",Ho),Gt&&gr("if("+Gt+")"+ae+".bindBuffer("+tg+","+Gt+".buffer.buffer);"),Gt}function ue(){var cr=pe.count,Gt,gr=$;return cr?((cr.contextDep&&Te.contextDynamic||cr.propDep)&&(gr=ne),Gt=cr.append(X,gr),F.optional(function(){cr.MISSING&&X.assert($,"false","missing vertex count"),cr.DYNAMIC&&X.assert(gr,Gt+">=0","missing vertex count")})):(Gt=gr.def(de,".",ws),F.optional(function(){X.assert(gr,Gt+">=0","missing vertex count")})),Gt}var Y=Q();function le(cr){var Gt=pe[cr];return Gt?Gt.contextDep&&Te.contextDynamic||Gt.propDep?Gt.append(X,ne):Gt.append(X,$):$.def(de,".",cr)}var Oe=le(Xo),Be=le(Jc),rt=ue();if(typeof rt=="number"){if(rt===0)return}else ne("if(",rt,"){"),ne.exit("}");var Ye,at;lt&&(Ye=le(ef),at=X.instancing);var kt=Y+".type",lr=pe.elements&&Ni(pe.elements);function Dt(){function cr(){ne(at,".drawElementsInstancedANGLE(",[Oe,rt,kt,Be+"<<(("+kt+"-"+Nd+")>>1)",Ye],");")}function Gt(){ne(at,".drawArraysInstancedANGLE(",[Oe,Be,rt,Ye],");")}Y?lr?cr():(ne("if(",Y,"){"),cr(),ne("}else{"),Gt(),ne("}")):Gt()}function Zt(){function cr(){ne(ae+".drawElements("+[Oe,rt,kt,Be+"<<(("+kt+"-"+Nd+")>>1)"]+");")}function Gt(){ne(ae+".drawArrays("+[Oe,Be,rt]+");")}Y?lr?cr():(ne("if(",Y,"){"),cr(),ne("}else{"),Gt(),ne("}")):Gt()}lt&&(typeof Ye!="number"||Ye>=0)?typeof Ye=="string"?(ne("if(",Ye,">0){"),Dt(),ne("}else if(",Ye,"<0){"),Zt(),ne("}")):Dt():Zt()}function br(X,$,ne,Te,Se){var ae=ir(),de=ae.proc("body",Se);return F.optional(function(){ae.commandStr=$.commandStr,ae.command=ae.link($.commandStr)}),lt&&(ae.instancing=de.def(ae.shared.extensions,".angle_instanced_arrays")),X(ae,de,ne,Te),ae.compile().body}function Yt(X,$,ne,Te){Cn(X,$),ne.useVAO?ne.drawVAO?$(X.shared.vao,".setVAO(",ne.drawVAO.append(X,$),");"):$(X.shared.vao,".setVAO(",X.shared.vao,".targetVAO);"):($(X.shared.vao,".setVAO(null);"),Xr(X,$,ne,Te.attributes,function(){return!0})),Ur(X,$,ne,Te.uniforms,function(){return!0}),$t(X,$,$,ne)}function kr(X,$){var ne=X.proc("draw",1);Cn(X,ne),Sn(X,ne,$.context),Vn(X,ne,$.framebuffer),cn(X,ne,$),Fr(X,ne,$.state),hr(X,ne,$,!1,!0);var Te=$.shader.progVar.append(X,ne);if(ne(X.shared.gl,".useProgram(",Te,".program);"),$.shader.program)Yt(X,ne,$,$.shader.program);else{ne(X.shared.vao,".setVAO(null);");var Se=X.global.def("{}"),ae=ne.def(Te,".id"),de=ne.def(Se,"[",ae,"]");ne(X.cond(de).then(de,".call(this,a0);").else(de,"=",Se,"[",ae,"]=",X.link(function(pe){return br(Yt,X,$,pe,1)}),"(",Te,");",de,".call(this,a0);"))}Object.keys($.state).length>0&&ne(X.shared.current,".dirty=true;")}function ui(X,$,ne,Te){X.batchId="a1",Cn(X,$);function Se(){return!0}Xr(X,$,ne,Te.attributes,Se),Ur(X,$,ne,Te.uniforms,Se),$t(X,$,$,ne)}function J(X,$,ne,Te){Cn(X,$);var Se=ne.contextDep,ae=$.def(),de="a0",pe="a1",Q=$.def();X.shared.props=Q,X.batchId=ae;var ue=X.scope(),Y=X.scope();$(ue.entry,"for(",ae,"=0;",ae,"<",pe,";++",ae,"){",Q,"=",de,"[",ae,"];",Y,"}",ue.exit);function le(kt){return kt.contextDep&&Se||kt.propDep}function Oe(kt){return!le(kt)}if(ne.needsContext&&Sn(X,Y,ne.context),ne.needsFramebuffer&&Vn(X,Y,ne.framebuffer),Fr(X,Y,ne.state,le),ne.profile&&le(ne.profile)&&hr(X,Y,ne,!1,!0),Te)ne.useVAO?ne.drawVAO?le(ne.drawVAO)?Y(X.shared.vao,".setVAO(",ne.drawVAO.append(X,Y),");"):ue(X.shared.vao,".setVAO(",ne.drawVAO.append(X,ue),");"):ue(X.shared.vao,".setVAO(",X.shared.vao,".targetVAO);"):(ue(X.shared.vao,".setVAO(null);"),Xr(X,ue,ne,Te.attributes,Oe),Xr(X,Y,ne,Te.attributes,le)),Ur(X,ue,ne,Te.uniforms,Oe),Ur(X,Y,ne,Te.uniforms,le),$t(X,ue,Y,ne);else{var Be=X.global.def("{}"),rt=ne.shader.progVar.append(X,Y),Ye=Y.def(rt,".id"),at=Y.def(Be,"[",Ye,"]");Y(X.shared.gl,".useProgram(",rt,".program);","if(!",at,"){",at,"=",Be,"[",Ye,"]=",X.link(function(kt){return br(ui,X,ne,kt,2)}),"(",rt,");}",at,".call(this,a0[",ae,"],",ae,");")}}function we(X,$){var ne=X.proc("batch",2);X.batchId="0",Cn(X,ne);var Te=!1,Se=!0;Object.keys($.context).forEach(function(Be){Te=Te||$.context[Be].propDep}),Te||(Sn(X,ne,$.context),Se=!1);var ae=$.framebuffer,de=!1;ae?(ae.propDep?Te=de=!0:ae.contextDep&&Te&&(de=!0),de||Vn(X,ne,ae)):Vn(X,ne,null),$.state.viewport&&$.state.viewport.propDep&&(Te=!0);function pe(Be){return Be.contextDep&&Te||Be.propDep}cn(X,ne,$),Fr(X,ne,$.state,function(Be){return!pe(Be)}),(!$.profile||!pe($.profile))&&hr(X,ne,$,!1,"a1"),$.contextDep=Te,$.needsContext=Se,$.needsFramebuffer=de;var Q=$.shader.progVar;if(Q.contextDep&&Te||Q.propDep)J(X,ne,$,null);else{var ue=Q.append(X,ne);if(ne(X.shared.gl,".useProgram(",ue,".program);"),$.shader.program)J(X,ne,$,$.shader.program);else{ne(X.shared.vao,".setVAO(null);");var Y=X.global.def("{}"),le=ne.def(ue,".id"),Oe=ne.def(Y,"[",le,"]");ne(X.cond(Oe).then(Oe,".call(this,a0,a1);").else(Oe,"=",Y,"[",le,"]=",X.link(function(Be){return br(J,X,$,Be,2)}),"(",ue,");",Oe,".call(this,a0,a1);"))}}Object.keys($.state).length>0&&ne(X.shared.current,".dirty=true;")}function xe(X,$){var ne=X.proc("scope",3);X.batchId="a2";var Te=X.shared,Se=Te.current;Sn(X,ne,$.context),$.framebuffer&&$.framebuffer.append(X,ne),lv(Object.keys($.state)).forEach(function(de){var pe=$.state[de],Q=pe.append(X,ne);xn(Q)?Q.forEach(function(ue,Y){ne.set(X.next[de],"["+Y+"]",ue)}):ne.set(Te.next,"."+de,Q)}),hr(X,ne,$,!0,!0),[Ho,Jc,ws,ef,Xo].forEach(function(de){var pe=$.draw[de];pe&&ne.set(Te.draw,"."+de,""+pe.append(X,ne))}),Object.keys($.uniforms).forEach(function(de){ne.set(Te.uniforms,"["+W.id(de)+"]",$.uniforms[de].append(X,ne))}),Object.keys($.attributes).forEach(function(de){var pe=$.attributes[de].append(X,ne),Q=X.scopeAttrib(de);Object.keys(new ye).forEach(function(ue){ne.set(Q,"."+ue,pe[ue])})}),$.scopeVAO&&ne.set(Te.vao,".targetVAO",$.scopeVAO.append(X,ne));function ae(de){var pe=$.shader[de];pe&&ne.set(Te.shader,"."+de,pe.append(X,ne))}ae(ca),ae(Ms),Object.keys($.state).length>0&&(ne(Se,".dirty=true;"),ne.exit(Se,".dirty=true;")),ne("a1(",X.shared.context,",a0,",X.batchId,");")}function Mt(X){if(!(typeof X!="object"||xn(X))){for(var $=Object.keys(X),ne=0;ne<$.length;++ne)if(Kr.isDynamic(X[$[ne]]))return!0;return!1}}function rr(X,$,ne){var Te=$.static[ne];if(!Te||!Mt(Te))return;var Se=X.global,ae=Object.keys(Te),de=!1,pe=!1,Q=!1,ue=X.global.def("{}");ae.forEach(function(le){var Oe=Te[le];if(Kr.isDynamic(Oe)){typeof Oe=="function"&&(Oe=Te[le]=Kr.unbox(Oe));var Be=yi(Oe,null);de=de||Be.thisDep,Q=Q||Be.propDep,pe=pe||Be.contextDep}else{switch(Se(ue,".",le,"="),typeof Oe){case"number":Se(Oe);break;case"string":Se('"',Oe,'"');break;case"object":Array.isArray(Oe)&&Se("[",Oe.join(),"]");break;default:Se(X.link(Oe));break}Se(";")}});function Y(le,Oe){ae.forEach(function(Be){var rt=Te[Be];if(Kr.isDynamic(rt)){var Ye=le.invoke(Oe,rt);Oe(ue,".",Be,"=",Ye,";")}})}$.dynamic[ne]=new Kr.DynamicVariable(bl,{thisDep:de,contextDep:pe,propDep:Q,ref:ue,append:Y}),delete $.static[ne]}function Ir(X,$,ne,Te,Se){var ae=ir();ae.stats=ae.link(Se),Object.keys($.static).forEach(function(pe){rr(ae,$,pe)}),eg.forEach(function(pe){rr(ae,X,pe)});var de=Tn(X,$,ne,Te,ae);return kr(ae,de),xe(ae,de),we(ae,de),ae.compile()}return{next:Rt,current:Qe,procs:(function(){var X=ir(),$=X.proc("poll"),ne=X.proc("refresh"),Te=X.block();$(Te),ne(Te);var Se=X.shared,ae=Se.gl,de=Se.next,pe=Se.current;Te(pe,".dirty=false;"),Vn(X,$),Vn(X,ne,null,!0);var Q;lt&&(Q=X.link(lt)),ie.oes_vertex_array_object&&ne(X.link(ie.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var ue=0;ue<Re.maxAttributes;++ue){var Y=ne.def(Se.attributes,"[",ue,"]"),le=X.cond(Y,".buffer");le.then(ae,".enableVertexAttribArray(",ue,");",ae,".bindBuffer(",bu,",",Y,".buffer.buffer);",ae,".vertexAttribPointer(",ue,",",Y,".size,",Y,".type,",Y,".normalized,",Y,".stride,",Y,".offset);").else(ae,".disableVertexAttribArray(",ue,");",ae,".vertexAttrib4f(",ue,",",Y,".x,",Y,".y,",Y,".z,",Y,".w);",Y,".buffer=null;"),ne(le),lt&&ne(Q,".vertexAttribDivisorANGLE(",ue,",",Y,".divisor);")}return ne(X.shared.vao,".currentVAO=null;",X.shared.vao,".setVAO(",X.shared.vao,".targetVAO);"),Object.keys(Ct).forEach(function(Oe){var Be=Ct[Oe],rt=Te.def(de,".",Oe),Ye=X.block();Ye("if(",rt,"){",ae,".enable(",Be,")}else{",ae,".disable(",Be,")}",pe,".",Oe,"=",rt,";"),ne(Ye),$("if(",rt,"!==",pe,".",Oe,"){",Ye,"}")}),Object.keys(et).forEach(function(Oe){var Be=et[Oe],rt=Qe[Oe],Ye,at,kt=X.block();if(kt(ae,".",Be,"("),xn(rt)){var lr=rt.length;Ye=X.global.def(de,".",Oe),at=X.global.def(pe,".",Oe),kt(Ri(lr,function(Dt){return Ye+"["+Dt+"]"}),");",Ri(lr,function(Dt){return at+"["+Dt+"]="+Ye+"["+Dt+"];"}).join("")),$("if(",Ri(lr,function(Dt){return Ye+"["+Dt+"]!=="+at+"["+Dt+"]"}).join("||"),"){",kt,"}")}else Ye=Te.def(de,".",Oe),at=Te.def(pe,".",Oe),kt(Ye,");",pe,".",Oe,"=",Ye,";"),$("if(",Ye,"!==",at,"){",kt,"}");ne(kt)}),X.compile()})(),compile:Ir}}function pg(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var vg=34918,Au=34919,df=35007,mg=function(C,W){if(!W.ext_disjoint_timer_query)return null;var ie=[];function Re(){return ie.pop()||W.ext_disjoint_timer_query.createQueryEXT()}function Ge(lt){ie.push(lt)}var Me=[];function Ue(lt){var xt=Re();W.ext_disjoint_timer_query.beginQueryEXT(df,xt),Me.push(xt),nt(Me.length-1,Me.length,lt)}function ut(){W.ext_disjoint_timer_query.endQueryEXT(df)}function ft(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Tt=[];function dt(){return Tt.pop()||new ft}function mt(lt){Tt.push(lt)}var Et=[];function nt(lt,xt,Qe){var Rt=dt();Rt.startQueryIndex=lt,Rt.endQueryIndex=xt,Rt.sum=0,Rt.stats=Qe,Et.push(Rt)}var _t=[],ye=[];function Ie(){var lt,xt,Qe=Me.length;if(Qe!==0){ye.length=Math.max(ye.length,Qe+1),_t.length=Math.max(_t.length,Qe+1),_t[0]=0,ye[0]=0;var Rt=0;for(lt=0,xt=0;xt<Me.length;++xt){var ct=Me[xt];W.ext_disjoint_timer_query.getQueryObjectEXT(ct,Au)?(Rt+=W.ext_disjoint_timer_query.getQueryObjectEXT(ct,vg),Ge(ct)):Me[lt++]=ct,_t[xt+1]=Rt,ye[xt+1]=lt}for(Me.length=lt,lt=0,xt=0;xt<Et.length;++xt){var Ct=Et[xt],et=Ct.startQueryIndex,gt=Ct.endQueryIndex;Ct.sum+=_t[gt]-_t[et];var Vt=ye[et],tr=ye[gt];tr===Vt?(Ct.stats.gpuTime+=Ct.sum/1e6,mt(Ct)):(Ct.startQueryIndex=Vt,Ct.endQueryIndex=tr,Et[lt++]=Ct)}Et.length=lt}}return{beginQuery:Ue,endQuery:ut,pushScopeStats:nt,update:Ie,getNumPendingQueries:function(){return Me.length},clear:function(){ie.push.apply(ie,Me);for(var lt=0;lt<ie.length;lt++)W.ext_disjoint_timer_query.deleteQueryEXT(ie[lt]);Me.length=0,ie.length=0},restore:function(){Me.length=0,ie.length=0}}},_g=16384,gg=256,Yd=1024,yg=34962,Zd="webglcontextlost",fv="webglcontextrestored",dv=1,r1=2,Eg=3;function ii(C,W){for(var ie=0;ie<C.length;++ie)if(C[ie]===W)return ie;return-1}function Ei(C){var W=Cc(C);if(!W)return null;var ie=W.gl,Re=ie.getContextAttributes(),Ge=ie.isContextLost(),Me=Jf(ie,W);if(!Me)return null;var Ue=ra(),ut=pg(),ft=Me.extensions,Tt=mg(ie,ft),dt=Hi(),mt=ie.drawingBufferWidth,Et=ie.drawingBufferHeight,nt={tick:0,time:0,viewportWidth:mt,viewportHeight:Et,framebufferWidth:mt,framebufferHeight:Et,drawingBufferWidth:mt,drawingBufferHeight:Et,pixelRatio:W.pixelRatio},_t={},ye={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ie=rd(ie,ft),lt=Tp(ie,ut,W,Qe),xt=$_(ie,ft,Ie,ut,lt);function Qe($t){return xt.destroyBuffer($t)}var Rt=GE(ie,ft,lt,ut),ct=Z_(ie,Ue,ut,W),Ct=Ea(ie,ft,Ie,function(){Vt.procs.poll()},nt,ut,W),et=hu(ie,ft,Ie,ut,W),gt=Yp(ie,ft,Ie,Ct,et,ut),Vt=cv(ie,Ue,ft,Ie,lt,Rt,Ct,gt,_t,xt,ct,ye,nt,Tt,W),tr=Qp(ie,gt,Vt.procs.poll,nt,Re,ft,Ie),At=Vt.next,We=ie.canvas,Ze=[],ir=[],Sr=[],Lt=[W.onDestroy],ur=null;function ar(){if(Ze.length===0){Tt&&Tt.update(),ur=null;return}ur=mn.next(ar),Fr();for(var $t=Ze.length-1;$t>=0;--$t){var br=Ze[$t];br&&br(nt,null,0)}ie.flush(),Tt&&Tt.update()}function pr(){!ur&&Ze.length>0&&(ur=mn.next(ar))}function Ar(){ur&&(mn.cancel(ar),ur=null)}function Qr($t){$t.preventDefault(),Ge=!0,Ar(),ir.forEach(function(br){br()})}function Yn($t){ie.getError(),Ge=!1,Me.restore(),ct.restore(),lt.restore(),Ct.restore(),et.restore(),gt.restore(),xt.restore(),Tt&&Tt.restore(),Vt.procs.refresh(),pr(),Sr.forEach(function(br){br()})}We&&(We.addEventListener(Zd,Qr,!1),We.addEventListener(fv,Yn,!1));function Er(){Ze.length=0,Ar(),We&&(We.removeEventListener(Zd,Qr),We.removeEventListener(fv,Yn)),ct.clear(),gt.clear(),et.clear(),Ct.clear(),Rt.clear(),lt.clear(),xt.clear(),Tt&&Tt.clear(),Lt.forEach(function($t){$t()})}function jn($t){F(!!$t,"invalid args to regl({...})"),F.type($t,"object","invalid args to regl({...})");function br(Se){var ae=n({},Se);delete ae.uniforms,delete ae.attributes,delete ae.context,delete ae.vao,"stencil"in ae&&ae.stencil.op&&(ae.stencil.opBack=ae.stencil.opFront=ae.stencil.op,delete ae.stencil.op);function de(pe){if(pe in ae){var Q=ae[pe];delete ae[pe],Object.keys(Q).forEach(function(ue){ae[pe+"."+ue]=Q[ue]})}}return de("blend"),de("depth"),de("cull"),de("stencil"),de("polygonOffset"),de("scissor"),de("sample"),"vao"in Se&&(ae.vao=Se.vao),ae}function Yt(Se){var ae={},de={};return Object.keys(Se).forEach(function(pe){var Q=Se[pe];Kr.isDynamic(Q)?de[pe]=Kr.unbox(Q,pe):ae[pe]=Q}),{dynamic:de,static:ae}}var kr=Yt($t.context||{}),ui=Yt($t.uniforms||{}),J=Yt($t.attributes||{}),we=Yt(br($t)),xe={gpuTime:0,cpuTime:0,count:0},Mt=Vt.compile(we,J,ui,kr,xe),rr=Mt.draw,Ir=Mt.batch,X=Mt.scope,$=[];function ne(Se){for(;$.length<Se;)$.push(null);return $}function Te(Se,ae){var de;if(Ge&&F.raise("context lost"),typeof Se=="function")return X.call(this,null,Se,0);if(typeof ae=="function")if(typeof Se=="number")for(de=0;de<Se;++de)X.call(this,null,ae,de);else if(Array.isArray(Se))for(de=0;de<Se.length;++de)X.call(this,Se[de],ae,de);else return X.call(this,Se,ae,0);else if(typeof Se=="number"){if(Se>0)return Ir.call(this,ne(Se|0),Se|0)}else if(Array.isArray(Se)){if(Se.length)return Ir.call(this,Se,Se.length)}else return rr.call(this,Se)}return n(Te,{stats:xe})}var tn=gt.setFBO=jn({framebuffer:Kr.define.call(null,dv,"framebuffer")});function Tn($t,br){var Yt=0;Vt.procs.poll();var kr=br.color;kr&&(ie.clearColor(+kr[0]||0,+kr[1]||0,+kr[2]||0,+kr[3]||0),Yt|=_g),"depth"in br&&(ie.clearDepth(+br.depth),Yt|=gg),"stencil"in br&&(ie.clearStencil(br.stencil|0),Yt|=Yd),F(!!Yt,"called regl.clear with no buffer specified"),ie.clear(Yt)}function Sn($t){if(F(typeof $t=="object"&&$t,"regl.clear() takes an object as input"),"framebuffer"in $t)if($t.framebuffer&&$t.framebuffer_reglType==="framebufferCube")for(var br=0;br<6;++br)tn(n({framebuffer:$t.framebuffer.faces[br]},$t),Tn);else tn($t,Tn);else Tn(null,$t)}function Vn($t){F.type($t,"function","regl.frame() callback must be a function"),Ze.push($t);function br(){var Yt=ii(Ze,$t);F(Yt>=0,"cannot cancel a frame twice");function kr(){var ui=ii(Ze,kr);Ze[ui]=Ze[Ze.length-1],Ze.length-=1,Ze.length<=0&&Ar()}Ze[Yt]=kr}return pr(),{cancel:br}}function cn(){var $t=At.viewport,br=At.scissor_box;$t[0]=$t[1]=br[0]=br[1]=0,nt.viewportWidth=nt.framebufferWidth=nt.drawingBufferWidth=$t[2]=br[2]=ie.drawingBufferWidth,nt.viewportHeight=nt.framebufferHeight=nt.drawingBufferHeight=$t[3]=br[3]=ie.drawingBufferHeight}function Fr(){nt.tick+=1,nt.time=hr(),cn(),Vt.procs.poll()}function Cn(){cn(),Vt.procs.refresh(),Tt&&Tt.update()}function hr(){return(Hi()-dt)/1e3}Cn();function Xr($t,br){F.type(br,"function","listener callback must be a function");var Yt;switch($t){case"frame":return Vn(br);case"lost":Yt=ir;break;case"restore":Yt=Sr;break;case"destroy":Yt=Lt;break;default:F.raise("invalid event, must be one of frame,lost,restore,destroy")}return Yt.push(br),{cancel:function(){for(var kr=0;kr<Yt.length;++kr)if(Yt[kr]===br){Yt[kr]=Yt[Yt.length-1],Yt.pop();return}}}}var Ur=n(jn,{clear:Sn,prop:Kr.define.bind(null,dv),context:Kr.define.bind(null,r1),this:Kr.define.bind(null,Eg),draw:jn({}),buffer:function($t){return lt.create($t,yg,!1,!1)},elements:function($t){return Rt.create($t,!1)},texture:Ct.create2D,cube:Ct.createCube,renderbuffer:et.create,framebuffer:gt.create,framebufferCube:gt.createCube,vao:xt.createVAO,attributes:Re,frame:Vn,on:Xr,limits:Ie,hasExtension:function($t){return Ie.extensions.indexOf($t.toLowerCase())>=0},read:tr,destroy:Er,_gl:ie,_refresh:Cn,poll:function(){Fr(),Tt&&Tt.update()},now:hr,stats:ut});return W.onDone(null,Ur),Ur}return Ei}))})(k0)),k0.exports}var Lce=Dce();const Bce=$r(Lce);var Fce=class{constructor(e,t){const{buffer:r,offset:n,stride:i,normalized:a,size:o,divisor:u}=t;this.buffer=r,this.attribute={buffer:r.get(),offset:n||0,stride:i||0,normalized:a||!1,divisor:u||0},o&&(this.attribute.size=o)}get(){return this.attribute}updateBuffer(e){this.buffer.subData(e)}destroy(){this.buffer.destroy()}},Uce={[D.POINTS]:"points",[D.LINES]:"lines",[D.LINE_LOOP]:"line loop",[D.LINE_STRIP]:"line strip",[D.TRIANGLES]:"triangles",[D.TRIANGLE_FAN]:"triangle fan",[D.TRIANGLE_STRIP]:"triangle strip"},H7={[D.STATIC_DRAW]:"static",[D.DYNAMIC_DRAW]:"dynamic",[D.STREAM_DRAW]:"stream"},LC={[D.BYTE]:"int8",[D.INT]:"int32",[D.UNSIGNED_BYTE]:"uint8",[D.UNSIGNED_SHORT]:"uint16",[D.UNSIGNED_INT]:"uint32",[D.FLOAT]:"float"},kce={[D.ALPHA]:"alpha",[D.LUMINANCE]:"luminance",[D.LUMINANCE_ALPHA]:"luminance alpha",[D.RGB]:"rgb",[D.RGBA]:"rgba",[D.RGBA4]:"rgba4",[D.RGB5_A1]:"rgb5 a1",[D.RGB565]:"rgb565",[D.DEPTH_COMPONENT]:"depth",[D.DEPTH_STENCIL]:"depth stencil"},zce={[D.DONT_CARE]:"dont care",[D.NICEST]:"nice",[D.FASTEST]:"fast"},a6={[D.NEAREST]:"nearest",[D.LINEAR]:"linear",[D.LINEAR_MIPMAP_LINEAR]:"mipmap",[D.NEAREST_MIPMAP_LINEAR]:"nearest mipmap linear",[D.LINEAR_MIPMAP_NEAREST]:"linear mipmap nearest",[D.NEAREST_MIPMAP_NEAREST]:"nearest mipmap nearest"},o6={[D.REPEAT]:"repeat",[D.CLAMP_TO_EDGE]:"clamp",[D.MIRRORED_REPEAT]:"mirror"},jce={[D.NONE]:"none",[D.BROWSER_DEFAULT_WEBGL]:"browser"},Vce={[D.NEVER]:"never",[D.ALWAYS]:"always",[D.LESS]:"less",[D.LEQUAL]:"lequal",[D.GREATER]:"greater",[D.GEQUAL]:"gequal",[D.EQUAL]:"equal",[D.NOTEQUAL]:"notequal"},s6={[D.FUNC_ADD]:"add",[D.MIN_EXT]:"min",[D.MAX_EXT]:"max",[D.FUNC_SUBTRACT]:"subtract",[D.FUNC_REVERSE_SUBTRACT]:"reverse subtract"},m0={[D.ZERO]:"zero",[D.ONE]:"one",[D.SRC_COLOR]:"src color",[D.ONE_MINUS_SRC_COLOR]:"one minus src color",[D.SRC_ALPHA]:"src alpha",[D.ONE_MINUS_SRC_ALPHA]:"one minus src alpha",[D.DST_COLOR]:"dst color",[D.ONE_MINUS_DST_COLOR]:"one minus dst color",[D.DST_ALPHA]:"dst alpha",[D.ONE_MINUS_DST_ALPHA]:"one minus dst alpha",[D.CONSTANT_COLOR]:"constant color",[D.ONE_MINUS_CONSTANT_COLOR]:"one minus constant color",[D.CONSTANT_ALPHA]:"constant alpha",[D.ONE_MINUS_CONSTANT_ALPHA]:"one minus constant alpha",[D.SRC_ALPHA_SATURATE]:"src alpha saturate"},Hce={[D.NEVER]:"never",[D.ALWAYS]:"always",[D.LESS]:"less",[D.LEQUAL]:"lequal",[D.GREATER]:"greater",[D.GEQUAL]:"gequal",[D.EQUAL]:"equal",[D.NOTEQUAL]:"notequal"},ph={[D.ZERO]:"zero",[D.KEEP]:"keep",[D.REPLACE]:"replace",[D.INVERT]:"invert",[D.INCR]:"increment",[D.DECR]:"decrement",[D.INCR_WRAP]:"increment wrap",[D.DECR_WRAP]:"decrement wrap"},Xce={[D.FRONT]:"front",[D.BACK]:"back"},Gce=class{constructor(e,t){this.isDestroyed=!1;const{data:r,usage:n,type:i}=t;this.buffer=e.buffer({data:r,usage:H7[n||D.STATIC_DRAW],type:LC[i||D.UNSIGNED_BYTE]})}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:e,offset:t}){this.buffer.subdata(e,t)}},qce=class{constructor(e,t){const{data:r,usage:n,type:i,count:a}=t;this.elements=e.elements({data:r,usage:H7[n||D.STATIC_DRAW],type:LC[i||D.UNSIGNED_BYTE],count:a})}get(){return this.elements}subData({data:e}){this.elements.subdata(e)}destroy(){}},Wce=class{constructor(e,t){const{width:r,height:n,color:i,colors:a}=t,o={width:r,height:n};Array.isArray(a)&&(o.colors=a.map(u=>u.get())),i&&typeof i!="boolean"&&(o.color=i.get()),this.framebuffer=e.framebuffer(o)}get(){return this.framebuffer}destroy(){this.framebuffer.destroy()}resize({width:e,height:t}){this.framebuffer.resize(e,t)}},$ce=Object.defineProperty,Yce=Object.defineProperties,Zce=Object.getOwnPropertyDescriptors,u6=Object.getOwnPropertySymbols,Kce=Object.prototype.hasOwnProperty,Qce=Object.prototype.propertyIsEnumerable,l6=(e,t,r)=>t in e?$ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,tm=(e,t)=>{for(var r in t||(t={}))Kce.call(t,r)&&l6(e,r,t[r]);if(u6)for(var r of u6(t))Qce.call(t,r)&&l6(e,r,t[r]);return e},Jce=(e,t)=>Yce(e,Zce(t)),{isPlainObject:efe,isTypedArray:tfe}=Ln,rfe=class{constructor(e,t){this.destroyed=!1,this.uniforms={},this.reGl=e;const{vs:r,fs:n,attributes:i,uniforms:a,primitive:o,count:u,elements:c,depth:f,cull:h,instances:p}=t,m={glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:ns.LOWER_LEFT,clipSpaceNearZ:$h.NEGATIVE_ONE},_={};this.options=t,a&&(this.uniforms=this.extractUniforms(a),Object.keys(a).forEach(A=>{_[A]=e.prop(A)}));const y={};Object.keys(i).forEach(A=>{y[A]=i[A].get()});const E=V4(Qh(m,"frag",n,null,!1)),b=V4(Qh(m,"vert",r,null,!1)),S={attributes:y,frag:E,uniforms:_,vert:b,colorMask:e.prop("colorMask"),lineWidth:1,blend:{enable:e.prop("blend.enable"),func:e.prop("blend.func"),equation:e.prop("blend.equation"),color:e.prop("blend.color")},stencil:{enable:e.prop("stencil.enable"),mask:e.prop("stencil.mask"),func:e.prop("stencil.func"),opFront:e.prop("stencil.opFront"),opBack:e.prop("stencil.opBack")},primitive:Uce[o===void 0?D.TRIANGLES:o]};p&&(S.instances=p),u?S.count=u:c&&(S.elements=c.get()),this.initDepthDrawParams({depth:f},S),this.initCullDrawParams({cull:h},S),this.drawCommand=e(S),this.drawParams=S}updateAttributesAndElements(e,t){const r={};Object.keys(e).forEach(n=>{r[n]=e[n].get()}),this.drawParams.attributes=r,this.drawParams.elements=t.get(),this.drawCommand=this.reGl(this.drawParams)}updateAttributes(e){const t={};Object.keys(e).forEach(r=>{t[r]=e[r].get()}),this.drawParams.attributes=t,this.drawCommand=this.reGl(this.drawParams)}addUniforms(e){this.uniforms=tm(tm({},this.uniforms),this.extractUniforms(e))}draw(e,t){if(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)return;const r=tm(tm({},this.uniforms),this.extractUniforms(e.uniforms||{})),n={};Object.keys(r).forEach(i=>{const a=typeof r[i];a==="boolean"||a==="number"||Array.isArray(r[i])||r[i].BYTES_PER_ELEMENT?n[i]=r[i]:n[i]=r[i].get()}),n.blend=t?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(e),n.stencil=this.getStencilDrawParams(e),n.colorMask=this.getColorMaskDrawParams(e,t),this.drawCommand(n)}destroy(){var e,t;(t=(e=this.drawParams)==null?void 0:e.elements)==null||t.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(r=>{r?.destroy()}),this.destroyed=!0}initDepthDrawParams({depth:e},t){e&&(t.depth={enable:e.enable===void 0?!0:!!e.enable,mask:e.mask===void 0?!0:!!e.mask,func:Vce[e.func||D.LESS],range:e.range||[0,1]})}getBlendDrawParams({blend:e}){const{enable:t,func:r,equation:n,color:i=[0,0,0,0]}=e||{};return{enable:!!t,func:{srcRGB:m0[r&&r.srcRGB||D.SRC_ALPHA],srcAlpha:m0[r&&r.srcAlpha||D.SRC_ALPHA],dstRGB:m0[r&&r.dstRGB||D.ONE_MINUS_SRC_ALPHA],dstAlpha:m0[r&&r.dstAlpha||D.ONE_MINUS_SRC_ALPHA]},equation:{rgb:s6[n&&n.rgb||D.FUNC_ADD],alpha:s6[n&&n.alpha||D.FUNC_ADD]},color:i}}getStencilDrawParams({stencil:e}){const{enable:t,mask:r=-1,func:n={cmp:D.ALWAYS,ref:0,mask:-1},opFront:i={fail:D.KEEP,zfail:D.KEEP,zpass:D.KEEP},opBack:a={fail:D.KEEP,zfail:D.KEEP,zpass:D.KEEP}}=e||{};return{enable:!!t,mask:r,func:Jce(tm({},n),{cmp:Hce[n.cmp]}),opFront:{fail:ph[i.fail],zfail:ph[i.zfail],zpass:ph[i.zpass]},opBack:{fail:ph[a.fail],zfail:ph[a.zfail],zpass:ph[a.zpass]}}}getColorMaskDrawParams({stencil:e},t){return e?.enable&&e.opFront&&!t?[!1,!1,!1,!1]:[!0,!0,!0,!0]}initCullDrawParams({cull:e},t){if(e){const{enable:r,face:n=D.BACK}=e;t.cull={enable:!!r,face:Xce[n]}}}extractUniforms(e){const t={};return Object.keys(e).forEach(r=>{this.extractUniformsRecursively(r,e[r],t,"")}),t}extractUniformsRecursively(e,t,r,n){if(t===null||typeof t=="number"||typeof t=="boolean"||Array.isArray(t)&&typeof t[0]=="number"||tfe(t)||t===""||"resize"in t){r[`${n&&n+"."}${e}`]=t;return}efe(t)&&Object.keys(t).forEach(i=>{this.extractUniformsRecursively(i,t[i],r,`${n&&n+"."}${e}`)}),Array.isArray(t)&&t.forEach((i,a)=>{Object.keys(i).forEach(o=>{this.extractUniformsRecursively(o,i[o],r,`${n&&n+"."}${e}[${a}]`)})})}},nfe=class{constructor(e,t){this.isDestroy=!1;const{data:r,type:n=D.UNSIGNED_BYTE,width:i,height:a,flipY:o=!1,format:u=D.RGBA,mipmap:c=!1,wrapS:f=D.CLAMP_TO_EDGE,wrapT:h=D.CLAMP_TO_EDGE,aniso:p=0,alignment:m=1,premultiplyAlpha:_=!1,mag:y=D.NEAREST,min:E=D.NEAREST,colorSpace:b=D.BROWSER_DEFAULT_WEBGL,x:S=0,y:A=0,copy:R=!1}=t;this.width=i,this.height=a;const M={width:i,height:a,type:LC[n],format:kce[u],wrapS:o6[f],wrapT:o6[h],mag:a6[y],min:a6[E],alignment:m,flipY:o,colorSpace:jce[b],premultiplyAlpha:_,aniso:p,x:S,y:A,copy:R};r&&(M.data=r),typeof c=="number"?M.mipmap=zce[c]:typeof c=="boolean"&&(M.mipmap=c),this.texture=e.texture(M)}get(){return this.texture}update(e={}){this.texture(e)}bind(){this.texture._texture.bind()}resize({width:e,height:t}){this.texture.resize(e,t),this.width=e,this.height=t}getSize(){return[this.width,this.height]}destroy(){var e;this.isDestroy||(e=this.texture)==null||e.destroy(),this.isDestroy=!0}},Bx=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{u(r.next(c))}catch(f){i(f)}},o=c=>{try{u(r.throw(c))}catch(f){i(f)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);u((r=r.apply(e,t)).next())}),ife=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>"WebGL1",this.createModel=e=>new rfe(this.gl,e),this.createAttribute=e=>new Fce(this.gl,e),this.createBuffer=e=>new Gce(this.gl,e),this.createElements=e=>new qce(this.gl,e),this.createTexture2D=e=>new nfe(this.gl,e),this.createFramebuffer=e=>new Wce(this.gl,e),this.useFramebuffer=(e,t)=>{this.gl({framebuffer:e?e.get():null})(t)},this.useFramebufferAsync=(e,t)=>Bx(this,null,function*(){this.gl({framebuffer:e?e.get():null})(t)}),this.clear=e=>{var t;const{color:r,depth:n,stencil:i,framebuffer:a=null}=e,o={color:r,depth:n,stencil:i};o.framebuffer=a===null?a:a.get(),(t=this.gl)==null||t.clear(o)},this.viewport=({x:e,y:t,width:r,height:n})=>{this.gl._gl.viewport(e,t,r,n),this.width=r,this.height=n,this.gl._refresh()},this.readPixels=e=>{const{framebuffer:t,x:r,y:n,width:i,height:a}=e,o={x:r,y:n,width:i,height:a};return t&&(o.framebuffer=t.get()),this.gl.read(o)},this.readPixelsAsync=e=>Bx(this,null,function*(){return this.readPixels(e)}),this.getViewportSize=()=>({width:this.gl._gl.drawingBufferWidth,height:this.gl._gl.drawingBufferHeight}),this.getContainer=()=>{var e;return(e=this.canvas)==null?void 0:e.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.gl._gl,this.destroy=()=>{var e,t,r;this.canvas=null,(r=(t=(e=this.gl)==null?void 0:e._gl)==null?void 0:t.getExtension("WEBGL_lose_context"))==null||r.loseContext(),this.gl.destroy(),this.gl=null}}init(e,t,r){return Bx(this,null,function*(){this.canvas=e,r?this.gl=r:this.gl=yield new Promise((n,i)=>{Bce({canvas:this.canvas,attributes:{alpha:!0,antialias:t.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,stencil:t.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:(a,o)=>{(a||!o)&&i(a),n(o)}})}),this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")}})}getPointSizeRange(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}testExtension(e){return!!this.getGLContext().getExtension(e)}setState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}setBaseState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}setCustomLayerDefaults(){const e=this.getGLContext();e.disable(e.CULL_FACE)}setDirty(e){this.isDirty=e}getDirty(){return this.isDirty}beginFrame(){}endFrame(){}},Fx=["selectstart","selecting","selectend"],afe=class extends La.EventEmitter{constructor(e,t={}){super(),this.isEnable=!1,this.onDragStart=r=>{this.box.style.display="block",this.startEvent=this.endEvent=r,this.syncBoxBound(),this.emit("selectstart",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragging=r=>{this.endEvent=r,this.syncBoxBound(),this.emit("selecting",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragEnd=r=>{this.endEvent=r,this.box.style.display="none",this.emit("selectend",this.getLngLatBox(),this.startEvent,this.endEvent)},this.scene=e,this.options=t}get container(){return this.scene.getMapService().getMarkerContainer()}enable(){if(this.isEnable)return;const{className:e}=this.options;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){const t=ai("div",void 0,this.container);t.classList.add("l7-select-box"),e&&t.classList.add(e),t.style.display="none",this.box=t}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}disable(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}syncBoxBound(){const{x:e,y:t}=this.startEvent,{x:r,y:n}=this.endEvent,i=Math.min(e,r),a=Math.min(t,n),o=Math.abs(e-r),u=Math.abs(t-n);this.box.style.top=`${a}px`,this.box.style.left=`${i}px`,this.box.style.width=`${o}px`,this.box.style.height=`${u}px`}getLngLatBox(){const{lngLat:{lng:e,lat:t}}=this.startEvent,{lngLat:{lng:r,lat:n}}=this.endEvent;return E$([[e,t],[r,n]])}},ofe=Object.defineProperty,sfe=Object.defineProperties,ufe=Object.getOwnPropertyDescriptors,c6=Object.getOwnPropertySymbols,lfe=Object.prototype.hasOwnProperty,cfe=Object.prototype.propertyIsEnumerable,f6=(e,t,r)=>t in e?ofe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ffe=(e,t)=>{for(var r in t||(t={}))lfe.call(t,r)&&f6(e,r,t[r]);if(c6)for(var r of c6(t))cfe.call(t,r)&&f6(e,r,t[r]);return e},dfe=(e,t)=>sfe(e,ufe(t)),rm=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{u(r.next(c))}catch(f){i(f)}},o=c=>{try{u(r.throw(c))}catch(f){i(f)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);u((r=r.apply(e,t)).next())}),hfe=class{constructor(e){const{id:t,map:r,renderer:n="device"}=e,i=bJ();this.container=i,r.setContainer(i,t),n==="regl"?i.rendererService=new ife:i.rendererService=new Ice,this.sceneService=i.sceneService,this.mapService=i.mapService,this.iconService=i.iconService,this.fontService=i.fontService,this.controlService=i.controlService,this.layerService=i.layerService,this.debugService=i.debugService,this.debugService.setEnable(e.debug),this.markerService=i.markerService,this.interactionService=i.interactionService,this.popupService=i.popupService,this.boxSelect=new afe(this,{}),this.initComponent(t),this.sceneService.init(e),this.initControl()}get map(){return this.mapService.map}get loaded(){return this.sceneService.loaded}getServiceContainer(){return this.container}getSize(){return this.mapService.getSize()}getMinZoom(){return this.mapService.getMinZoom()}getMaxZoom(){return this.mapService.getMaxZoom()}getType(){return this.mapService.getType()}getMapContainer(){return this.mapService.getMapContainer()}getMapCanvasContainer(){return this.mapService.getMapCanvasContainer()}getMapService(){return this.mapService}getDebugService(){return this.debugService}exportPng(e){return rm(this,null,function*(){return this.sceneService.exportPng(e)})}exportMap(e){return rm(this,null,function*(){return this.sceneService.exportPng(e)})}registerRenderService(e){this.sceneService.loaded?new e(this).init():this.on("loaded",()=>{new e(this).init()})}setBgColor(e){this.mapService.setBgColor(e)}addLayer(e){this.loaded?this.preAddLayer(e):this.once("loaded",()=>{this.preAddLayer(e)})}preAddLayer(e){const t=Mm(this.container);if(e.setContainer(t),this.sceneService.addLayer(e),e.inited){this.initTileLayer(e);const r=this.initMask(e);this.addMask(r,e.id)}else e.on("inited",()=>{this.initTileLayer(e);const r=this.initMask(e);this.addMask(r,e.id)})}initMask(e){const{mask:t,maskfence:r,maskColor:n="#000",maskOpacity:i=0}=e.getLayerConfig();return!t||!r?void 0:new _7().source(r).shape("fill").style({color:n,opacity:i})}addMask(e,t){if(!e)return;const r=this.getLayer(t);if(r){const n=Mm(this.container);e.setContainer(n),r.addMaskLayer(e),this.sceneService.addMask(e)}else console.warn("parent layer not find!")}getPickedLayer(){return this.layerService.pickedLayerId}getLayers(){return this.layerService.getLayers()}getLayer(e){return this.layerService.getLayer(e)}getLayerByName(e){return this.layerService.getLayerByName(e)}removeLayer(e,t){return rm(this,null,function*(){yield this.layerService.remove(e,t)})}removeAllLayer(){return rm(this,null,function*(){yield this.layerService.removeAllLayers()})}render(){this.sceneService.render()}setEnableRender(e){this.layerService.setEnableRender(e)}addIconFont(e,t){this.fontService.addIconFont(e,t)}addIconFonts(e){e.forEach(([t,r])=>{this.fontService.addIconFont(t,r)})}addFontFace(e,t){this.fontService.once("fontloaded",r=>{this.emit("fontloaded",r)}),this.fontService.addFontFace(e,t)}addImage(e,t){return rm(this,null,function*(){yield this.iconService.addImage(e,t)})}hasImage(e){return this.iconService.hasImage(e)}removeImage(e){this.iconService.removeImage(e)}addIconFontGlyphs(e,t){this.fontService.addIconGlyphs(t)}addControl(e){this.controlService.addControl(e,this.container)}removeControl(e){this.controlService.removeControl(e)}getControlByName(e){return this.controlService.getControlByName(e)}addMarker(e){this.markerService.addMarker(e)}addMarkerLayer(e){this.markerService.addMarkerLayer(e)}removeMarkerLayer(e){this.markerService.removeMarkerLayer(e)}removeAllMarkers(){this.markerService.removeAllMarkers()}removeAllMakers(){console.warn("removeAllMakers  removeAllMarkers"),this.markerService.removeAllMarkers()}addPopup(e){this.popupService.addPopup(e)}removePopup(e){this.popupService.removePopup(e)}on(e,t){var r;Fx.includes(e)?(r=this.boxSelect)==null||r.on(e,t):r0.includes(e)?this.sceneService.on(e,t):this.mapService.on(e,t)}once(e,t){var r;Fx.includes(e)?(r=this.boxSelect)==null||r.once(e,t):r0.includes(e)?this.sceneService.once(e,t):this.mapService.once(e,t)}emit(e,t){r0.indexOf(e)===-1?this.mapService.on(e,t):this.sceneService.emit(e,t)}off(e,t){var r;Fx.includes(e)?(r=this.boxSelect)==null||r.off(e,t):r0.includes(e)?this.sceneService.off(e,t):this.mapService.off(e,t)}getZoom(){return this.mapService.getZoom()}getCenter(e){return this.mapService.getCenter(e)}setCenter(e,t){return this.mapService.setCenter(e,t)}getPitch(){return this.mapService.getPitch()}setPitch(e){return this.mapService.setPitch(e)}getRotation(){return this.mapService.getRotation()}getBounds(){return this.mapService.getBounds()}setRotation(e){this.mapService.setRotation(e)}zoomIn(){this.mapService.zoomIn()}zoomOut(){this.mapService.zoomOut()}panTo(e){this.mapService.panTo(e)}panBy(e,t){this.mapService.panBy(e,t)}getContainer(){return this.mapService.getContainer()}setZoom(e){this.mapService.setZoom(e)}fitBounds(e,t){const{fitBoundsOptions:r,animate:n}=this.sceneService.getSceneConfig();this.mapService.fitBounds(e,t||dfe(ffe({},r),{animate:n}))}setZoomAndCenter(e,t){this.mapService.setZoomAndCenter(e,t)}setMapStyle(e){this.mapService.setMapStyle(e)}setMapStatus(e){this.mapService.setMapStatus(e)}pixelToLngLat(e){return this.mapService.pixelToLngLat(e)}lngLatToPixel(e){return this.mapService.lngLatToPixel(e)}containerToLngLat(e){return this.mapService.containerToLngLat(e)}lngLatToContainer(e){return this.mapService.lngLatToContainer(e)}destroy(){this.sceneService.destroy()}registerPostProcessingPass(e){this.container.postProcessingPass.name=new e}enableShaderPick(){this.layerService.enableShaderPick()}diasbleShaderPick(){this.layerService.disableShaderPick()}enableBoxSelect(e=!0){this.boxSelect.enable(),e&&this.boxSelect.once("selectend",()=>{this.disableBoxSelect()})}disableBoxSelect(){this.boxSelect.disable()}static addProtocol(e,t){R0.REGISTERED_PROTOCOLS[e]=t}static removeProtocol(e){delete R0.REGISTERED_PROTOCOLS[e]}getProtocol(e){return R0.REGISTERED_PROTOCOLS[e]}startAnimate(){this.layerService.startAnimate()}stopAnimate(){this.layerService.stopAnimate()}getPointSizeRange(){return this.sceneService.getPointSizeRange()}initComponent(e){this.controlService.init({container:t$(e)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}initControl(){const{logoVisible:e,logoPosition:t}=this.sceneService.getSceneConfig();e&&this.addControl(new Ote({position:t}))}initTileLayer(e){e.getSource().isTile&&(e.tileLayer=new Tse(e))}},d6={exports:{}},nm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h6;function pfe(){if(h6)return nm;h6=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var u in i)u!=="key"&&(a[u]=i[u])}else a=i;return i=a.ref,{$$typeof:e,type:n,key:o,ref:i!==void 0?i:null,props:a}}return nm.Fragment=t,nm.jsx=r,nm.jsxs=r,nm}var p6;function vfe(){return p6||(p6=1,d6.exports=pfe()),d6.exports}var Le=vfe();function v6(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function X7(...e){return t=>{let r=!1;const n=e.map(i=>{const a=v6(i,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():v6(e[i],null)}}}}function Dn(...e){return z.useCallback(X7(...e),e)}function ep(e){const t=_fe(e),r=z.forwardRef((n,i)=>{const{children:a,...o}=n,u=z.Children.toArray(a),c=u.find(yfe);if(c){const f=c.props.children,h=u.map(p=>p===c?z.Children.count(f)>1?z.Children.only(null):z.isValidElement(f)?f.props.children:null:p);return Le.jsx(t,{...o,ref:i,children:z.isValidElement(f)?z.cloneElement(f,void 0,h):null})}return Le.jsx(t,{...o,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}var mfe=ep("Slot");function _fe(e){const t=z.forwardRef((r,n)=>{const{children:i,...a}=r;if(z.isValidElement(i)){const o=bfe(i),u=Efe(a,i.props);return i.type!==z.Fragment&&(u.ref=n?X7(n,o):o),z.cloneElement(i,u)}return z.Children.count(i)>1?z.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var gfe=Symbol("radix.slottable");function yfe(e){return z.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===gfe}function Efe(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...o)=>{const u=a(...o);return i(...o),u}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function bfe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function G7(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=G7(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function q7(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=G7(e))&&(n&&(n+=" "),n+=t);return n}const m6=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,_6=q7,BC=(e,t)=>r=>{var n;if(t?.variants==null)return _6(e,r?.class,r?.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(f=>{const h=r?.[f],p=a?.[f];if(h===null)return null;const m=m6(h)||m6(p);return i[f][m]}),u=r&&Object.entries(r).reduce((f,h)=>{let[p,m]=h;return m===void 0||(f[p]=m),f},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((f,h)=>{let{class:p,className:m,..._}=h;return Object.entries(_).every(y=>{let[E,b]=y;return Array.isArray(b)?b.includes({...a,...u}[E]):{...a,...u}[E]===b})?[...f,p,m]:f},[]);return _6(e,o,c,r?.class,r?.className)},FC="-",Tfe=e=>{const t=Afe(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:i=>{const a=i.split(FC);return a[0]===""&&a.length!==1&&a.shift(),W7(a,t)||Sfe(i)},getConflictingClassGroupIds:(i,a)=>{const o=r[i]||[];return a&&n[i]?[...o,...n[i]]:o}}},W7=(e,t)=>{if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?W7(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(FC);return t.validators.find(({validator:o})=>o(a))?.classGroupId},g6=/^\[(.+)\]$/,Sfe=e=>{if(g6.test(e)){const t=g6.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Afe=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Rfe(Object.entries(e.classGroups),r).forEach(([i,a])=>{i2(a,n,i,t)}),n},i2=(e,t,r,n)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:y6(t,i);a.classGroupId=r;return}if(typeof i=="function"){if(xfe(i)){i2(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([a,o])=>{i2(o,y6(t,a),r,n)})})},y6=(e,t)=>{let r=e;return t.split(FC).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},xfe=e=>e.isThemeGetter,Rfe=(e,t)=>t?e.map(([r,n])=>{const i=n.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,u])=>[t+o,u])):a);return[r,i]}):e,Cfe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const i=(a,o)=>{r.set(a,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return i(a,o),o},set(a,o){r.has(a)?r.set(a,o):i(a,o)}}},$7="!",Ofe=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,i=t[0],a=t.length,o=u=>{const c=[];let f=0,h=0,p;for(let b=0;b<u.length;b++){let S=u[b];if(f===0){if(S===i&&(n||u.slice(b,b+a)===t)){c.push(u.slice(h,b)),h=b+a;continue}if(S==="/"){p=b;continue}}S==="["?f++:S==="]"&&f--}const m=c.length===0?u:u.substring(h),_=m.startsWith($7),y=_?m.substring(1):m,E=p&&p>h?p-h:void 0;return{modifiers:c,hasImportantModifier:_,baseClassName:y,maybePostfixModifierPosition:E}};return r?u=>r({className:u,parseClassName:o}):o},Mfe=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},wfe=e=>({cache:Cfe(e.cacheSize),parseClassName:Ofe(e),...Tfe(e)}),Nfe=/\s+/,Ife=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,a=[],o=e.trim().split(Nfe);let u="";for(let c=o.length-1;c>=0;c-=1){const f=o[c],{modifiers:h,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:_}=r(f);let y=!!_,E=n(y?m.substring(0,_):m);if(!E){if(!y){u=f+(u.length>0?" "+u:u);continue}if(E=n(m),!E){u=f+(u.length>0?" "+u:u);continue}y=!1}const b=Mfe(h).join(":"),S=p?b+$7:b,A=S+E;if(a.includes(A))continue;a.push(A);const R=i(E,y);for(let M=0;M<R.length;++M){const P=R[M];a.push(S+P)}u=f+(u.length>0?" "+u:u)}return u};function Pfe(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Y7(t))&&(n&&(n+=" "),n+=r);return n}const Y7=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Y7(e[n]))&&(r&&(r+=" "),r+=t);return r};function Dfe(e,...t){let r,n,i,a=o;function o(c){const f=t.reduce((h,p)=>p(h),e());return r=wfe(f),n=r.cache.get,i=r.cache.set,a=u,u(c)}function u(c){const f=n(c);if(f)return f;const h=Ife(c,r);return i(c,h),h}return function(){return a(Pfe.apply(null,arguments))}}const Mn=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Z7=/^\[(?:([a-z-]+):)?(.+)\]$/i,Lfe=/^\d+\/\d+$/,Bfe=new Set(["px","full","screen"]),Ffe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ufe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kfe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,zfe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,jfe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wu=e=>Bh(e)||Bfe.has(e)||Lfe.test(e),ql=e=>hp(e,"length",Yfe),Bh=e=>!!e&&!Number.isNaN(Number(e)),Ux=e=>hp(e,"number",Bh),im=e=>!!e&&Number.isInteger(Number(e)),Vfe=e=>e.endsWith("%")&&Bh(e.slice(0,-1)),Lr=e=>Z7.test(e),Wl=e=>Ffe.test(e),Hfe=new Set(["length","size","percentage"]),Xfe=e=>hp(e,Hfe,K7),Gfe=e=>hp(e,"position",K7),qfe=new Set(["image","url"]),Wfe=e=>hp(e,qfe,Kfe),$fe=e=>hp(e,"",Zfe),am=()=>!0,hp=(e,t,r)=>{const n=Z7.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},Yfe=e=>Ufe.test(e)&&!kfe.test(e),K7=()=>!1,Zfe=e=>zfe.test(e),Kfe=e=>jfe.test(e),Qfe=()=>{const e=Mn("colors"),t=Mn("spacing"),r=Mn("blur"),n=Mn("brightness"),i=Mn("borderColor"),a=Mn("borderRadius"),o=Mn("borderSpacing"),u=Mn("borderWidth"),c=Mn("contrast"),f=Mn("grayscale"),h=Mn("hueRotate"),p=Mn("invert"),m=Mn("gap"),_=Mn("gradientColorStops"),y=Mn("gradientColorStopPositions"),E=Mn("inset"),b=Mn("margin"),S=Mn("opacity"),A=Mn("padding"),R=Mn("saturate"),M=Mn("scale"),P=Mn("sepia"),I=Mn("skew"),w=Mn("space"),U=Mn("translate"),re=()=>["auto","contain","none"],K=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto",Lr,t],x=()=>[Lr,t],N=()=>["",wu,ql],j=()=>["auto",Bh,Lr],fe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],O=()=>["solid","dashed","dotted","double","none"],k=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],ee=()=>["","0",Lr],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ge=()=>[Bh,Lr];return{cacheSize:500,separator:":",theme:{colors:[am],spacing:[wu,ql],blur:["none","",Wl,Lr],brightness:ge(),borderColor:[e],borderRadius:["none","","full",Wl,Lr],borderSpacing:x(),borderWidth:N(),contrast:ge(),grayscale:ee(),hueRotate:ge(),invert:ee(),gap:x(),gradientColorStops:[e],gradientColorStopPositions:[Vfe,ql],inset:H(),margin:H(),opacity:ge(),padding:x(),saturate:ge(),scale:ge(),sepia:ee(),skew:ge(),space:x(),translate:x()},classGroups:{aspect:[{aspect:["auto","square","video",Lr]}],container:["container"],columns:[{columns:[Wl]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...fe(),Lr]}],overflow:[{overflow:K()}],"overflow-x":[{"overflow-x":K()}],"overflow-y":[{"overflow-y":K()}],overscroll:[{overscroll:re()}],"overscroll-x":[{"overscroll-x":re()}],"overscroll-y":[{"overscroll-y":re()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",im,Lr]}],basis:[{basis:H()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Lr]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",im,Lr]}],"grid-cols":[{"grid-cols":[am]}],"col-start-end":[{col:["auto",{span:["full",im,Lr]},Lr]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[am]}],"row-start-end":[{row:["auto",{span:[im,Lr]},Lr]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Lr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Lr]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[A]}],px:[{px:[A]}],py:[{py:[A]}],ps:[{ps:[A]}],pe:[{pe:[A]}],pt:[{pt:[A]}],pr:[{pr:[A]}],pb:[{pb:[A]}],pl:[{pl:[A]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[w]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[w]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Lr,t]}],"min-w":[{"min-w":[Lr,t,"min","max","fit"]}],"max-w":[{"max-w":[Lr,t,"none","full","min","max","fit","prose",{screen:[Wl]},Wl]}],h:[{h:[Lr,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Lr,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Lr,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Lr,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Wl,ql]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ux]}],"font-family":[{font:[am]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Lr]}],"line-clamp":[{"line-clamp":["none",Bh,Ux]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",wu,Lr]}],"list-image":[{"list-image":["none",Lr]}],"list-style-type":[{list:["none","disc","decimal",Lr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...O(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",wu,ql]}],"underline-offset":[{"underline-offset":["auto",wu,Lr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Lr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Lr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...fe(),Gfe]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Xfe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Wfe]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...O(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:O()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...O()]}],"outline-offset":[{"outline-offset":[wu,Lr]}],"outline-w":[{outline:[wu,ql]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[wu,ql]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Wl,$fe]}],"shadow-color":[{shadow:[am]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...k(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":k()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Wl,Lr]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[R]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[R]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Lr]}],duration:[{duration:ge()}],ease:[{ease:["linear","in","out","in-out",Lr]}],delay:[{delay:ge()}],animate:[{animate:["none","spin","ping","pulse","bounce",Lr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[im,Lr]}],"translate-x":[{"translate-x":[U]}],"translate-y":[{"translate-y":[U]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Lr]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Lr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Lr]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[wu,ql,Ux]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Jfe=Dfe(Qfe);function Jr(...e){return Jfe(q7(e))}const ede=BC("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),mc=z.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},a)=>{const o=n?mfe:"button";return Le.jsx(o,{className:Jr(ede({variant:t,size:r,className:e})),ref:a,...i})});mc.displayName="Button";const Jm=z.forwardRef(({className:e,type:t,...r},n)=>Le.jsx("input",{type:t,className:Jr("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));Jm.displayName="Input";const wf=z.forwardRef(({className:e,...t},r)=>Le.jsx("div",{ref:r,className:Jr("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));wf.displayName="Card";const tde=z.forwardRef(({className:e,...t},r)=>Le.jsx("div",{ref:r,className:Jr("flex flex-col space-y-1.5 p-6",e),...t}));tde.displayName="CardHeader";const rde=z.forwardRef(({className:e,...t},r)=>Le.jsx("div",{ref:r,className:Jr("text-2xl font-semibold leading-none tracking-tight",e),...t}));rde.displayName="CardTitle";const nde=z.forwardRef(({className:e,...t},r)=>Le.jsx("div",{ref:r,className:Jr("text-sm text-muted-foreground",e),...t}));nde.displayName="CardDescription";const ide=z.forwardRef(({className:e,...t},r)=>Le.jsx("div",{ref:r,className:Jr("p-6 pt-0",e),...t}));ide.displayName="CardContent";const ade=z.forwardRef(({className:e,...t},r)=>Le.jsx("div",{ref:r,className:Jr("flex items-center p-6 pt-0",e),...t}));ade.displayName="CardFooter";var ode=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qr=ode.reduce((e,t)=>{const r=ep(`Primitive.${t}`),n=z.forwardRef((i,a)=>{const{asChild:o,...u}=i,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Le.jsx(c,{...u,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function sde(e,t){e&&up.flushSync(()=>e.dispatchEvent(t))}var ude="Label",Q7=z.forwardRef((e,t)=>Le.jsx(qr.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Q7.displayName=ude;var J7=Q7;const lde=BC("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),z0=z.forwardRef(({className:e,...t},r)=>Le.jsx(J7,{ref:r,className:Jr(lde(),e),...t}));z0.displayName=J7.displayName;const cde=BC("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function fde({className:e,variant:t,...r}){return Le.jsx("div",{className:Jr(cde({variant:t}),e),...r})}function dde(e,t){const r=z.createContext(t),n=a=>{const{children:o,...u}=a,c=z.useMemo(()=>u,Object.values(u));return Le.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function i(a){const o=z.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[n,i]}function Zf(e,t=[]){let r=[];function n(a,o){const u=z.createContext(o),c=r.length;r=[...r,o];const f=p=>{const{scope:m,children:_,...y}=p,E=m?.[e]?.[c]||u,b=z.useMemo(()=>y,Object.values(y));return Le.jsx(E.Provider,{value:b,children:_})};f.displayName=a+"Provider";function h(p,m){const _=m?.[e]?.[c]||u,y=z.useContext(_);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[f,h]}const i=()=>{const a=r.map(o=>z.createContext(o));return function(o){const u=o?.[e]||a;return z.useMemo(()=>({[`__scope${e}`]:{...o,[e]:u}}),[o,u])}};return i.scopeName=e,[n,hde(i,...t)]}function hde(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(i){const a=n.reduce((o,{useScope:u,scopeName:c})=>{const f=u(i)[`__scope${c}`];return{...o,...f}},{});return z.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function _c(e){const t=z.useRef(e);return z.useEffect(()=>{t.current=e}),z.useMemo(()=>(...r)=>t.current?.(...r),[])}var xi=globalThis?.document?z.useLayoutEffect:()=>{},E6={exports:{}},kx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b6;function pde(){if(b6)return kx;b6=1;var e=un;function t(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,a=e.useLayoutEffect,o=e.useDebugValue;function u(p,m){var _=m(),y=n({inst:{value:_,getSnapshot:m}}),E=y[0].inst,b=y[1];return a(function(){E.value=_,E.getSnapshot=m,c(E)&&b({inst:E})},[p,_,m]),i(function(){return c(E)&&b({inst:E}),p(function(){c(E)&&b({inst:E})})},[p]),o(_),_}function c(p){var m=p.getSnapshot;p=p.value;try{var _=m();return!r(p,_)}catch{return!0}}function f(p,m){return m()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return kx.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,kx}var T6;function vde(){return T6||(T6=1,E6.exports=pde()),E6.exports}var mde=vde();function _de(){return mde.useSyncExternalStore(gde,()=>!0,()=>!1)}function gde(){return()=>{}}var UC="Avatar",[yde]=Zf(UC),[Ede,e8]=yde(UC),t8=z.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[i,a]=z.useState("idle");return Le.jsx(Ede,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:Le.jsx(qr.span,{...n,ref:t})})});t8.displayName=UC;var r8="AvatarImage",n8=z.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:i=()=>{},...a}=e,o=e8(r8,r),u=bde(n,a),c=_c(f=>{i(f),o.onImageLoadingStatusChange(f)});return xi(()=>{u!=="idle"&&c(u)},[u,c]),u==="loaded"?Le.jsx(qr.img,{...a,ref:t,src:n}):null});n8.displayName=r8;var i8="AvatarFallback",a8=z.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...i}=e,a=e8(i8,r),[o,u]=z.useState(n===void 0);return z.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>u(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&a.imageLoadingStatus!=="loaded"?Le.jsx(qr.span,{...i,ref:t}):null});a8.displayName=i8;function S6(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function bde(e,{referrerPolicy:t,crossOrigin:r}){const n=_de(),i=z.useRef(null),a=n?(i.current||(i.current=new window.Image),i.current):null,[o,u]=z.useState(()=>S6(a,e));return xi(()=>{u(S6(a,e))},[a,e]),xi(()=>{const c=p=>()=>{u(p)};if(!a)return;const f=c("loaded"),h=c("error");return a.addEventListener("load",f),a.addEventListener("error",h),t&&(a.referrerPolicy=t),typeof r=="string"&&(a.crossOrigin=r),()=>{a.removeEventListener("load",f),a.removeEventListener("error",h)}},[a,r,t]),o}var o8=t8,s8=n8,u8=a8;const Tde=z.forwardRef(({className:e,...t},r)=>Le.jsx(o8,{ref:r,className:Jr("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Tde.displayName=o8.displayName;const Sde=z.forwardRef(({className:e,...t},r)=>Le.jsx(s8,{ref:r,className:Jr("aspect-square h-full w-full",e),...t}));Sde.displayName=s8.displayName;const Ade=z.forwardRef(({className:e,...t},r)=>Le.jsx(u8,{ref:r,className:Jr("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Ade.displayName=u8.displayName;function vn(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),r===!1||!n.defaultPrevented)return t?.(n)}}var xde=HB[" useId ".trim().toString()]||(()=>{}),Rde=0;function Im(e){const[t,r]=z.useState(xde());return xi(()=>{r(n=>n??String(Rde++))},[e]),t?`radix-${t}`:""}var Cde=HB[" useInsertionEffect ".trim().toString()]||xi;function kC({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[i,a,o]=Ode({defaultProp:t,onChange:r}),u=e!==void 0,c=u?e:i;{const h=z.useRef(e!==void 0);z.useEffect(()=>{const p=h.current;p!==u&&console.warn(`${n} is changing from ${p?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=u},[u,n])}const f=z.useCallback(h=>{if(u){const p=Mde(h)?h(e):h;p!==e&&o.current?.(p)}else a(h)},[u,e,a,o]);return[c,f]}function Ode({defaultProp:e,onChange:t}){const[r,n]=z.useState(e),i=z.useRef(r),a=z.useRef(t);return Cde(()=>{a.current=t},[t]),z.useEffect(()=>{i.current!==r&&(a.current?.(r),i.current=r)},[r,i]),[r,n,a]}function Mde(e){return typeof e=="function"}function wde(e,t=globalThis?.document){const r=_c(e);z.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Nde="DismissableLayer",a2="dismissableLayer.update",Ide="dismissableLayer.pointerDownOutside",Pde="dismissableLayer.focusOutside",A6,l8=z.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zC=z.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:u,...c}=e,f=z.useContext(l8),[h,p]=z.useState(null),m=h?.ownerDocument??globalThis?.document,[,_]=z.useState({}),y=Dn(t,w=>p(w)),E=Array.from(f.layers),[b]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),S=E.indexOf(b),A=h?E.indexOf(h):-1,R=f.layersWithOutsidePointerEventsDisabled.size>0,M=A>=S,P=Bde(w=>{const U=w.target,re=[...f.branches].some(K=>K.contains(U));!M||re||(i?.(w),o?.(w),w.defaultPrevented||u?.())},m),I=Fde(w=>{const U=w.target;[...f.branches].some(re=>re.contains(U))||(a?.(w),o?.(w),w.defaultPrevented||u?.())},m);return wde(w=>{A===f.layers.size-1&&(n?.(w),!w.defaultPrevented&&u&&(w.preventDefault(),u()))},m),z.useEffect(()=>{if(h)return r&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(A6=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(h)),f.layers.add(h),x6(),()=>{r&&f.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=A6)}},[h,m,r,f]),z.useEffect(()=>()=>{h&&(f.layers.delete(h),f.layersWithOutsidePointerEventsDisabled.delete(h),x6())},[h,f]),z.useEffect(()=>{const w=()=>_({});return document.addEventListener(a2,w),()=>document.removeEventListener(a2,w)},[]),Le.jsx(qr.div,{...c,ref:y,style:{pointerEvents:R?M?"auto":"none":void 0,...e.style},onFocusCapture:vn(e.onFocusCapture,I.onFocusCapture),onBlurCapture:vn(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:vn(e.onPointerDownCapture,P.onPointerDownCapture)})});zC.displayName=Nde;var Dde="DismissableLayerBranch",Lde=z.forwardRef((e,t)=>{const r=z.useContext(l8),n=z.useRef(null),i=Dn(t,n);return z.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),Le.jsx(qr.div,{...e,ref:i})});Lde.displayName=Dde;function Bde(e,t=globalThis?.document){const r=_c(e),n=z.useRef(!1),i=z.useRef(()=>{});return z.useEffect(()=>{const a=u=>{if(u.target&&!n.current){let c=function(){c8(Ide,r,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function Fde(e,t=globalThis?.document){const r=_c(e),n=z.useRef(!1);return z.useEffect(()=>{const i=a=>{a.target&&!n.current&&c8(Pde,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function x6(){const e=new CustomEvent(a2);document.dispatchEvent(e)}function c8(e,t,r,{discrete:n}){const i=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?sde(i,a):i.dispatchEvent(a)}var zx="focusScope.autoFocusOnMount",jx="focusScope.autoFocusOnUnmount",R6={bubbles:!1,cancelable:!0},Ude="FocusScope",jC=z.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[u,c]=z.useState(null),f=_c(i),h=_c(a),p=z.useRef(null),m=Dn(t,E=>c(E)),_=z.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;z.useEffect(()=>{if(n){let E=function(R){if(_.paused||!u)return;const M=R.target;u.contains(M)?p.current=M:$l(p.current,{select:!0})},b=function(R){if(_.paused||!u)return;const M=R.relatedTarget;M!==null&&(u.contains(M)||$l(p.current,{select:!0}))},S=function(R){if(document.activeElement===document.body)for(const M of R)M.removedNodes.length>0&&$l(u)};document.addEventListener("focusin",E),document.addEventListener("focusout",b);const A=new MutationObserver(S);return u&&A.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",b),A.disconnect()}}},[n,u,_.paused]),z.useEffect(()=>{if(u){O6.add(_);const E=document.activeElement;if(!u.contains(E)){const b=new CustomEvent(zx,R6);u.addEventListener(zx,f),u.dispatchEvent(b),b.defaultPrevented||(kde(Xde(f8(u)),{select:!0}),document.activeElement===E&&$l(u))}return()=>{u.removeEventListener(zx,f),setTimeout(()=>{const b=new CustomEvent(jx,R6);u.addEventListener(jx,h),u.dispatchEvent(b),b.defaultPrevented||$l(E??document.body,{select:!0}),u.removeEventListener(jx,h),O6.remove(_)},0)}}},[u,f,h,_]);const y=z.useCallback(E=>{if(!r&&!n||_.paused)return;const b=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,S=document.activeElement;if(b&&S){const A=E.currentTarget,[R,M]=zde(A);R&&M?!E.shiftKey&&S===M?(E.preventDefault(),r&&$l(R,{select:!0})):E.shiftKey&&S===R&&(E.preventDefault(),r&&$l(M,{select:!0})):S===A&&E.preventDefault()}},[r,n,_.paused]);return Le.jsx(qr.div,{tabIndex:-1,...o,ref:m,onKeyDown:y})});jC.displayName=Ude;function kde(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if($l(n,{select:t}),document.activeElement!==r)return}function zde(e){const t=f8(e),r=C6(t,e),n=C6(t.reverse(),e);return[r,n]}function f8(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function C6(e,t){for(const r of e)if(!jde(r,{upTo:t}))return r}function jde(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Vde(e){return e instanceof HTMLInputElement&&"select"in e}function $l(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Vde(e)&&t&&e.select()}}var O6=Hde();function Hde(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=M6(e,t),e.unshift(t)},remove(t){e=M6(e,t),e[0]?.resume()}}}function M6(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Xde(e){return e.filter(t=>t.tagName!=="A")}var Gde="Portal",VC=z.forwardRef((e,t)=>{const{container:r,...n}=e,[i,a]=z.useState(!1);xi(()=>a(!0),[]);const o=r||i&&globalThis?.document?.body;return o?NV.createPortal(Le.jsx(qr.div,{...n,ref:t}),o):null});VC.displayName=Gde;function qde(e,t){return z.useReducer((r,n)=>t[r][n]??r,e)}var __=e=>{const{present:t,children:r}=e,n=Wde(t),i=typeof r=="function"?r({present:n.isPresent}):z.Children.only(r),a=Dn(n.ref,$de(i));return typeof r=="function"||n.isPresent?z.cloneElement(i,{ref:a}):null};__.displayName="Presence";function Wde(e){const[t,r]=z.useState(),n=z.useRef(null),i=z.useRef(e),a=z.useRef("none"),o=e?"mounted":"unmounted",[u,c]=qde(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return z.useEffect(()=>{const f=_0(n.current);a.current=u==="mounted"?f:"none"},[u]),xi(()=>{const f=n.current,h=i.current;if(h!==e){const p=a.current,m=_0(f);e?c("MOUNT"):m==="none"||f?.display==="none"?c("UNMOUNT"):c(h&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),xi(()=>{if(t){let f;const h=t.ownerDocument.defaultView??window,p=_=>{const y=_0(n.current).includes(CSS.escape(_.animationName));if(_.target===t&&y&&(c("ANIMATION_END"),!i.current)){const E=t.style.animationFillMode;t.style.animationFillMode="forwards",f=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=E)})}},m=_=>{_.target===t&&(a.current=_0(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{h.clearTimeout(f),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:z.useCallback(f=>{n.current=f?getComputedStyle(f):null,r(f)},[])}}function _0(e){return e?.animationName||"none"}function $de(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Vx=0;function d8(){z.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??w6()),document.body.insertAdjacentElement("beforeend",e[1]??w6()),Vx++,()=>{Vx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Vx--}},[])}function w6(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Bs=function(){return Bs=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Bs.apply(this,arguments)};function h8(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Yde(e,t,r){for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var j0="right-scroll-bar-position",V0="width-before-scroll-bar",Zde="with-scroll-bars-hidden",Kde="--removed-body-scroll-bar-size";function Hx(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Qde(e,t){var r=z.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=t,r.facade}var Jde=typeof window<"u"?z.useLayoutEffect:z.useEffect,N6=new WeakMap;function ehe(e,t){var r=Qde(null,function(n){return e.forEach(function(i){return Hx(i,n)})});return Jde(function(){var n=N6.get(r);if(n){var i=new Set(n),a=new Set(e),o=r.current;i.forEach(function(u){a.has(u)||Hx(u,null)}),a.forEach(function(u){i.has(u)||Hx(u,o)})}N6.set(r,e)},[e]),r}function the(e){return e}function rhe(e,t){t===void 0&&(t=the);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var o=t(a,n);return r.push(o),function(){r=r.filter(function(u){return u!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(u){return a(u)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var u=r;r=[],u.forEach(a),o=r}var c=function(){var h=o;o=[],h.forEach(a)},f=function(){return Promise.resolve().then(c)};f(),r={push:function(h){o.push(h),f()},filter:function(h){return o=o.filter(h),r}}}};return i}function nhe(e){e===void 0&&(e={});var t=rhe(null);return t.options=Bs({async:!0,ssr:!1},e),t}var p8=function(e){var t=e.sideCar,r=h8(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return z.createElement(n,Bs({},r))};p8.isSideCarExport=!0;function ihe(e,t){return e.useMedium(t),p8}var v8=nhe(),Xx=function(){},RE=z.forwardRef(function(e,t){var r=z.useRef(null),n=z.useState({onScrollCapture:Xx,onWheelCapture:Xx,onTouchMoveCapture:Xx}),i=n[0],a=n[1],o=e.forwardProps,u=e.children,c=e.className,f=e.removeScrollBar,h=e.enabled,p=e.shards,m=e.sideCar,_=e.noRelative,y=e.noIsolation,E=e.inert,b=e.allowPinchZoom,S=e.as,A=S===void 0?"div":S,R=e.gapMode,M=h8(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=m,I=ehe([r,t]),w=Bs(Bs({},M),i);return z.createElement(z.Fragment,null,h&&z.createElement(P,{sideCar:v8,removeScrollBar:f,shards:p,noRelative:_,noIsolation:y,inert:E,setCallbacks:a,allowPinchZoom:!!b,lockRef:r,gapMode:R}),o?z.cloneElement(z.Children.only(u),Bs(Bs({},w),{ref:I})):z.createElement(A,Bs({},w,{className:c,ref:I}),u))});RE.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RE.classNames={fullWidth:V0,zeroRight:j0};var ahe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ohe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ahe();return t&&e.setAttribute("nonce",t),e}function she(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function uhe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var lhe=function(){var e=0,t=null;return{add:function(r){e==0&&(t=ohe())&&(she(t,r),uhe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},che=function(){var e=lhe();return function(t,r){z.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},m8=function(){var e=che(),t=function(r){var n=r.styles,i=r.dynamic;return e(n,i),null};return t},fhe={left:0,top:0,right:0,gap:0},Gx=function(e){return parseInt(e||"",10)||0},dhe=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[Gx(r),Gx(n),Gx(i)]},hhe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return fhe;var t=dhe(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},phe=m8(),Fh="data-scroll-locked",vhe=function(e,t,r,n){var i=e.left,a=e.top,o=e.right,u=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Zde,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(u,"px ").concat(n,`;
  }
  body[`).concat(Fh,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(u,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(j0,` {
    right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(V0,` {
    margin-right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(j0," .").concat(j0,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(V0," .").concat(V0,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Fh,`] {
    `).concat(Kde,": ").concat(u,`px;
  }
`)},I6=function(){var e=parseInt(document.body.getAttribute(Fh)||"0",10);return isFinite(e)?e:0},mhe=function(){z.useEffect(function(){return document.body.setAttribute(Fh,(I6()+1).toString()),function(){var e=I6()-1;e<=0?document.body.removeAttribute(Fh):document.body.setAttribute(Fh,e.toString())}},[])},_he=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=n===void 0?"margin":n;mhe();var a=z.useMemo(function(){return hhe(i)},[i]);return z.createElement(phe,{styles:vhe(a,!t,i,r?"":"!important")})},o2=!1;if(typeof window<"u")try{var g0=Object.defineProperty({},"passive",{get:function(){return o2=!0,!0}});window.addEventListener("test",g0,g0),window.removeEventListener("test",g0,g0)}catch{o2=!1}var vh=o2?{passive:!1}:!1,ghe=function(e){return e.tagName==="TEXTAREA"},_8=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!ghe(e)&&r[t]==="visible")},yhe=function(e){return _8(e,"overflowY")},Ehe=function(e){return _8(e,"overflowX")},P6=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=g8(e,n);if(i){var a=y8(e,n),o=a[1],u=a[2];if(o>u)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},bhe=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},The=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},g8=function(e,t){return e==="v"?yhe(t):Ehe(t)},y8=function(e,t){return e==="v"?bhe(t):The(t)},She=function(e,t){return e==="h"&&t==="rtl"?-1:1},Ahe=function(e,t,r,n,i){var a=She(e,window.getComputedStyle(t).direction),o=a*n,u=r.target,c=t.contains(u),f=!1,h=o>0,p=0,m=0;do{if(!u)break;var _=y8(e,u),y=_[0],E=_[1],b=_[2],S=E-b-a*y;(y||S)&&g8(e,u)&&(p+=S,m+=y);var A=u.parentNode;u=A&&A.nodeType===Node.DOCUMENT_FRAGMENT_NODE?A.host:A}while(!c&&u!==document.body||c&&(t.contains(u)||t===u));return(h&&Math.abs(p)<1||!h&&Math.abs(m)<1)&&(f=!0),f},y0=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},D6=function(e){return[e.deltaX,e.deltaY]},L6=function(e){return e&&"current"in e?e.current:e},xhe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Rhe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Che=0,mh=[];function Ohe(e){var t=z.useRef([]),r=z.useRef([0,0]),n=z.useRef(),i=z.useState(Che++)[0],a=z.useState(m8)[0],o=z.useRef(e);z.useEffect(function(){o.current=e},[e]),z.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var E=Yde([e.lockRef.current],(e.shards||[]).map(L6)).filter(Boolean);return E.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),E.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var u=z.useCallback(function(E,b){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!o.current.allowPinchZoom;var S=y0(E),A=r.current,R="deltaX"in E?E.deltaX:A[0]-S[0],M="deltaY"in E?E.deltaY:A[1]-S[1],P,I=E.target,w=Math.abs(R)>Math.abs(M)?"h":"v";if("touches"in E&&w==="h"&&I.type==="range")return!1;var U=P6(w,I);if(!U)return!0;if(U?P=w:(P=w==="v"?"h":"v",U=P6(w,I)),!U)return!1;if(!n.current&&"changedTouches"in E&&(R||M)&&(n.current=P),!P)return!0;var re=n.current||P;return Ahe(re,b,E,re==="h"?R:M)},[]),c=z.useCallback(function(E){var b=E;if(!(!mh.length||mh[mh.length-1]!==a)){var S="deltaY"in b?D6(b):y0(b),A=t.current.filter(function(P){return P.name===b.type&&(P.target===b.target||b.target===P.shadowParent)&&xhe(P.delta,S)})[0];if(A&&A.should){b.cancelable&&b.preventDefault();return}if(!A){var R=(o.current.shards||[]).map(L6).filter(Boolean).filter(function(P){return P.contains(b.target)}),M=R.length>0?u(b,R[0]):!o.current.noIsolation;M&&b.cancelable&&b.preventDefault()}}},[]),f=z.useCallback(function(E,b,S,A){var R={name:E,delta:b,target:S,should:A,shadowParent:Mhe(S)};t.current.push(R),setTimeout(function(){t.current=t.current.filter(function(M){return M!==R})},1)},[]),h=z.useCallback(function(E){r.current=y0(E),n.current=void 0},[]),p=z.useCallback(function(E){f(E.type,D6(E),E.target,u(E,e.lockRef.current))},[]),m=z.useCallback(function(E){f(E.type,y0(E),E.target,u(E,e.lockRef.current))},[]);z.useEffect(function(){return mh.push(a),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:m}),document.addEventListener("wheel",c,vh),document.addEventListener("touchmove",c,vh),document.addEventListener("touchstart",h,vh),function(){mh=mh.filter(function(E){return E!==a}),document.removeEventListener("wheel",c,vh),document.removeEventListener("touchmove",c,vh),document.removeEventListener("touchstart",h,vh)}},[]);var _=e.removeScrollBar,y=e.inert;return z.createElement(z.Fragment,null,y?z.createElement(a,{styles:Rhe(i)}):null,_?z.createElement(_he,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Mhe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const whe=ihe(v8,Ohe);var HC=z.forwardRef(function(e,t){return z.createElement(RE,Bs({},e,{ref:t,sideCar:whe}))});HC.classNames=RE.classNames;var Nhe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},_h=new WeakMap,E0=new WeakMap,b0={},qx=0,E8=function(e){return e&&(e.host||E8(e.parentNode))},Ihe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=E8(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Phe=function(e,t,r,n){var i=Ihe(t,Array.isArray(e)?e:[e]);b0[r]||(b0[r]=new WeakMap);var a=b0[r],o=[],u=new Set,c=new Set(i),f=function(p){!p||u.has(p)||(u.add(p),f(p.parentNode))};i.forEach(f);var h=function(p){!p||c.has(p)||Array.prototype.forEach.call(p.children,function(m){if(u.has(m))h(m);else try{var _=m.getAttribute(n),y=_!==null&&_!=="false",E=(_h.get(m)||0)+1,b=(a.get(m)||0)+1;_h.set(m,E),a.set(m,b),o.push(m),E===1&&y&&E0.set(m,!0),b===1&&m.setAttribute(r,"true"),y||m.setAttribute(n,"true")}catch(S){console.error("aria-hidden: cannot operate on ",m,S)}})};return h(t),u.clear(),qx++,function(){o.forEach(function(p){var m=_h.get(p)-1,_=a.get(p)-1;_h.set(p,m),a.set(p,_),m||(E0.has(p)||p.removeAttribute(n),E0.delete(p)),_||p.removeAttribute(r)}),qx--,qx||(_h=new WeakMap,_h=new WeakMap,E0=new WeakMap,b0={})}},b8=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=Nhe(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),Phe(n,i,r,"aria-hidden")):function(){return null}},CE="Dialog",[T8]=Zf(CE),[Dhe,ls]=T8(CE),S8=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,u=z.useRef(null),c=z.useRef(null),[f,h]=kC({prop:n,defaultProp:i??!1,onChange:a,caller:CE});return Le.jsx(Dhe,{scope:t,triggerRef:u,contentRef:c,contentId:Im(),titleId:Im(),descriptionId:Im(),open:f,onOpenChange:h,onOpenToggle:z.useCallback(()=>h(p=>!p),[h]),modal:o,children:r})};S8.displayName=CE;var A8="DialogTrigger",Lhe=z.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=ls(A8,r),a=Dn(t,i.triggerRef);return Le.jsx(qr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":qC(i.open),...n,ref:a,onClick:vn(e.onClick,i.onOpenToggle)})});Lhe.displayName=A8;var XC="DialogPortal",[Bhe,x8]=T8(XC,{forceMount:void 0}),R8=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:i}=e,a=ls(XC,t);return Le.jsx(Bhe,{scope:t,forceMount:r,children:z.Children.map(n,o=>Le.jsx(__,{present:r||a.open,children:Le.jsx(VC,{asChild:!0,container:i,children:o})}))})};R8.displayName=XC;var ky="DialogOverlay",C8=z.forwardRef((e,t)=>{const r=x8(ky,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,a=ls(ky,e.__scopeDialog);return a.modal?Le.jsx(__,{present:n||a.open,children:Le.jsx(Uhe,{...i,ref:t})}):null});C8.displayName=ky;var Fhe=ep("DialogOverlay.RemoveScroll"),Uhe=z.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=ls(ky,r);return Le.jsx(HC,{as:Fhe,allowPinchZoom:!0,shards:[i.contentRef],children:Le.jsx(qr.div,{"data-state":qC(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),jf="DialogContent",O8=z.forwardRef((e,t)=>{const r=x8(jf,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,a=ls(jf,e.__scopeDialog);return Le.jsx(__,{present:n||a.open,children:a.modal?Le.jsx(khe,{...i,ref:t}):Le.jsx(zhe,{...i,ref:t})})});O8.displayName=jf;var khe=z.forwardRef((e,t)=>{const r=ls(jf,e.__scopeDialog),n=z.useRef(null),i=Dn(t,r.contentRef,n);return z.useEffect(()=>{const a=n.current;if(a)return b8(a)},[]),Le.jsx(M8,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:vn(e.onCloseAutoFocus,a=>{a.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:vn(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,u=o.button===0&&o.ctrlKey===!0;(o.button===2||u)&&a.preventDefault()}),onFocusOutside:vn(e.onFocusOutside,a=>a.preventDefault())})}),zhe=z.forwardRef((e,t)=>{const r=ls(jf,e.__scopeDialog),n=z.useRef(!1),i=z.useRef(!1);return Le.jsx(M8,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(n.current||r.triggerRef.current?.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;r.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),M8=z.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,u=ls(jf,r),c=z.useRef(null),f=Dn(t,c);return d8(),Le.jsxs(Le.Fragment,{children:[Le.jsx(jC,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:Le.jsx(zC,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":qC(u.open),...o,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),Le.jsxs(Le.Fragment,{children:[Le.jsx(jhe,{titleId:u.titleId}),Le.jsx(Hhe,{contentRef:c,descriptionId:u.descriptionId})]})]})}),GC="DialogTitle",w8=z.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=ls(GC,r);return Le.jsx(qr.h2,{id:i.titleId,...n,ref:t})});w8.displayName=GC;var N8="DialogDescription",I8=z.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=ls(N8,r);return Le.jsx(qr.p,{id:i.descriptionId,...n,ref:t})});I8.displayName=N8;var P8="DialogClose",D8=z.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=ls(P8,r);return Le.jsx(qr.button,{type:"button",...n,ref:t,onClick:vn(e.onClick,()=>i.onOpenChange(!1))})});D8.displayName=P8;function qC(e){return e?"open":"closed"}var L8="DialogTitleWarning",[Dge,B8]=dde(L8,{contentName:jf,titleName:GC,docsSlug:"dialog"}),jhe=({titleId:e})=>{const t=B8(L8),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return z.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Vhe="DialogDescriptionWarning",Hhe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${B8(Vhe).contentName}}.`;return z.useEffect(()=>{const n=e.current?.getAttribute("aria-describedby");t&&n&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Xhe=S8,Ghe=R8,F8=C8,U8=O8,k8=w8,z8=I8,qhe=D8;/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Whe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$he=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),B6=e=>{const t=$he(e);return t.charAt(0).toUpperCase()+t.slice(1)},j8=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Yhe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zhe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Khe=z.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:o,...u},c)=>z.createElement("svg",{ref:c,...Zhe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:j8("lucide",i),...!a&&!Yhe(u)&&{"aria-hidden":"true"},...u},[...o.map(([f,h])=>z.createElement(f,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=(e,t)=>{const r=z.forwardRef(({className:n,...i},a)=>z.createElement(Khe,{ref:a,iconNode:t,className:j8(`lucide-${Whe(B6(e))}`,`lucide-${e}`,n),...i}));return r.displayName=B6(e),r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qhe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],V8=OE("check",Qhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jhe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],H8=OE("chevron-down",Jhe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const epe=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],tpe=OE("chevron-up",epe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rpe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],npe=OE("x",rpe),ipe=Xhe,ape=Ghe,X8=z.forwardRef(({className:e,...t},r)=>Le.jsx(F8,{ref:r,className:Jr("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));X8.displayName=F8.displayName;const G8=z.forwardRef(({className:e,children:t,...r},n)=>Le.jsxs(ape,{children:[Le.jsx(X8,{}),Le.jsxs(U8,{ref:n,className:Jr("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,Le.jsxs(qhe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[Le.jsx(npe,{className:"h-4 w-4"}),Le.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));G8.displayName=U8.displayName;const q8=({className:e,...t})=>Le.jsx("div",{className:Jr("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});q8.displayName="DialogHeader";const W8=z.forwardRef(({className:e,...t},r)=>Le.jsx(k8,{ref:r,className:Jr("text-lg font-semibold leading-none tracking-tight",e),...t}));W8.displayName=k8.displayName;const ope=z.forwardRef(({className:e,...t},r)=>Le.jsx(z8,{ref:r,className:Jr("text-sm text-muted-foreground",e),...t}));ope.displayName=z8.displayName;function F6(e,[t,r]){return Math.min(r,Math.max(t,e))}function spe(e){const t=e+"CollectionProvider",[r,n]=Zf(t),[i,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=E=>{const{scope:b,children:S}=E,A=un.useRef(null),R=un.useRef(new Map).current;return Le.jsx(i,{scope:b,itemMap:R,collectionRef:A,children:S})};o.displayName=t;const u=e+"CollectionSlot",c=ep(u),f=un.forwardRef((E,b)=>{const{scope:S,children:A}=E,R=a(u,S),M=Dn(b,R.collectionRef);return Le.jsx(c,{ref:M,children:A})});f.displayName=u;const h=e+"CollectionItemSlot",p="data-radix-collection-item",m=ep(h),_=un.forwardRef((E,b)=>{const{scope:S,children:A,...R}=E,M=un.useRef(null),P=Dn(b,M),I=a(h,S);return un.useEffect(()=>(I.itemMap.set(M,{ref:M,...R}),()=>void I.itemMap.delete(M))),Le.jsx(m,{[p]:"",ref:P,children:A})});_.displayName=h;function y(E){const b=a(e+"CollectionConsumer",E);return un.useCallback(()=>{const S=b.collectionRef.current;if(!S)return[];const A=Array.from(S.querySelectorAll(`[${p}]`));return Array.from(b.itemMap.values()).sort((R,M)=>A.indexOf(R.ref.current)-A.indexOf(M.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:f,ItemSlot:_},y,n]}z.createContext(void 0);const upe=["top","right","bottom","left"],gc=Math.min,Wa=Math.max,zy=Math.round,T0=Math.floor,Vs=e=>({x:e,y:e}),lpe={left:"right",right:"left",bottom:"top",top:"bottom"},cpe={start:"end",end:"start"};function s2(e,t,r){return Wa(e,gc(t,r))}function zu(e,t){return typeof e=="function"?e(t):e}function ju(e){return e.split("-")[0]}function pp(e){return e.split("-")[1]}function WC(e){return e==="x"?"y":"x"}function $C(e){return e==="y"?"height":"width"}const fpe=new Set(["top","bottom"]);function ks(e){return fpe.has(ju(e))?"y":"x"}function YC(e){return WC(ks(e))}function dpe(e,t,r){r===void 0&&(r=!1);const n=pp(e),i=YC(e),a=$C(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=jy(o)),[o,jy(o)]}function hpe(e){const t=jy(e);return[u2(e),t,u2(t)]}function u2(e){return e.replace(/start|end/g,t=>cpe[t])}const U6=["left","right"],k6=["right","left"],ppe=["top","bottom"],vpe=["bottom","top"];function mpe(e,t,r){switch(e){case"top":case"bottom":return r?t?k6:U6:t?U6:k6;case"left":case"right":return t?ppe:vpe;default:return[]}}function _pe(e,t,r,n){const i=pp(e);let a=mpe(ju(e),r==="start",n);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(u2)))),a}function jy(e){return e.replace(/left|right|bottom|top/g,t=>lpe[t])}function gpe(e){return{top:0,right:0,bottom:0,left:0,...e}}function $8(e){return typeof e!="number"?gpe(e):{top:e,right:e,bottom:e,left:e}}function Vy(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function z6(e,t,r){let{reference:n,floating:i}=e;const a=ks(t),o=YC(t),u=$C(o),c=ju(t),f=a==="y",h=n.x+n.width/2-i.width/2,p=n.y+n.height/2-i.height/2,m=n[u]/2-i[u]/2;let _;switch(c){case"top":_={x:h,y:n.y-i.height};break;case"bottom":_={x:h,y:n.y+n.height};break;case"right":_={x:n.x+n.width,y:p};break;case"left":_={x:n.x-i.width,y:p};break;default:_={x:n.x,y:n.y}}switch(pp(t)){case"start":_[o]-=m*(r&&f?-1:1);break;case"end":_[o]+=m*(r&&f?-1:1);break}return _}const ype=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:o}=r,u=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let f=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:p}=z6(f,n,c),m=n,_={},y=0;for(let E=0;E<u.length;E++){const{name:b,fn:S}=u[E],{x:A,y:R,data:M,reset:P}=await S({x:h,y:p,initialPlacement:n,placement:m,strategy:i,middlewareData:_,rects:f,platform:o,elements:{reference:e,floating:t}});h=A??h,p=R??p,_={..._,[b]:{..._[b],...M}},P&&y<=50&&(y++,typeof P=="object"&&(P.placement&&(m=P.placement),P.rects&&(f=P.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):P.rects),{x:h,y:p}=z6(f,m,c)),E=-1)}return{x:h,y:p,placement:m,strategy:i,middlewareData:_}};async function e_(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:a,rects:o,elements:u,strategy:c}=e,{boundary:f="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:m=!1,padding:_=0}=zu(t,e),y=$8(_),E=u[m?p==="floating"?"reference":"floating":p],b=Vy(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(E)))==null||r?E:E.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:f,rootBoundary:h,strategy:c})),S=p==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,A=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),R=await(a.isElement==null?void 0:a.isElement(A))?await(a.getScale==null?void 0:a.getScale(A))||{x:1,y:1}:{x:1,y:1},M=Vy(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:S,offsetParent:A,strategy:c}):S);return{top:(b.top-M.top+y.top)/R.y,bottom:(M.bottom-b.bottom+y.bottom)/R.y,left:(b.left-M.left+y.left)/R.x,right:(M.right-b.right+y.right)/R.x}}const Epe=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:a,platform:o,elements:u,middlewareData:c}=t,{element:f,padding:h=0}=zu(e,t)||{};if(f==null)return{};const p=$8(h),m={x:r,y:n},_=YC(i),y=$C(_),E=await o.getDimensions(f),b=_==="y",S=b?"top":"left",A=b?"bottom":"right",R=b?"clientHeight":"clientWidth",M=a.reference[y]+a.reference[_]-m[_]-a.floating[y],P=m[_]-a.reference[_],I=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let w=I?I[R]:0;(!w||!await(o.isElement==null?void 0:o.isElement(I)))&&(w=u.floating[R]||a.floating[y]);const U=M/2-P/2,re=w/2-E[y]/2-1,K=gc(p[S],re),H=gc(p[A],re),x=K,N=w-E[y]-H,j=w/2-E[y]/2+U,fe=s2(x,j,N),O=!c.arrow&&pp(i)!=null&&j!==fe&&a.reference[y]/2-(j<x?K:H)-E[y]/2<0,k=O?j<x?j-x:j-N:0;return{[_]:m[_]+k,data:{[_]:fe,centerOffset:j-fe-k,...O&&{alignmentOffset:k}},reset:O}}}),bpe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:a,rects:o,initialPlacement:u,platform:c,elements:f}=t,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:E=!0,...b}=zu(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const S=ju(i),A=ks(u),R=ju(u)===u,M=await(c.isRTL==null?void 0:c.isRTL(f.floating)),P=m||(R||!E?[jy(u)]:hpe(u)),I=y!=="none";!m&&I&&P.push(..._pe(u,E,y,M));const w=[u,...P],U=await e_(t,b),re=[];let K=((n=a.flip)==null?void 0:n.overflows)||[];if(h&&re.push(U[S]),p){const j=dpe(i,o,M);re.push(U[j[0]],U[j[1]])}if(K=[...K,{placement:i,overflows:re}],!re.every(j=>j<=0)){var H,x;const j=(((H=a.flip)==null?void 0:H.index)||0)+1,fe=w[j];if(fe&&(!(p==="alignment"&&A!==ks(fe))||K.every(k=>ks(k.placement)===A?k.overflows[0]>0:!0)))return{data:{index:j,overflows:K},reset:{placement:fe}};let O=(x=K.filter(k=>k.overflows[0]<=0).sort((k,V)=>k.overflows[1]-V.overflows[1])[0])==null?void 0:x.placement;if(!O)switch(_){case"bestFit":{var N;const k=(N=K.filter(V=>{if(I){const ee=ks(V.placement);return ee===A||ee==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(ee=>ee>0).reduce((ee,oe)=>ee+oe,0)]).sort((V,ee)=>V[1]-ee[1])[0])==null?void 0:N[0];k&&(O=k);break}case"initialPlacement":O=u;break}if(i!==O)return{reset:{placement:O}}}return{}}}};function j6(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function V6(e){return upe.some(t=>e[t]>=0)}const Tpe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...i}=zu(e,t);switch(n){case"referenceHidden":{const a=await e_(t,{...i,elementContext:"reference"}),o=j6(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:V6(o)}}}case"escaped":{const a=await e_(t,{...i,altBoundary:!0}),o=j6(a,r.floating);return{data:{escapedOffsets:o,escaped:V6(o)}}}default:return{}}}}},Y8=new Set(["left","top"]);async function Spe(e,t){const{placement:r,platform:n,elements:i}=e,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=ju(r),u=pp(r),c=ks(r)==="y",f=Y8.has(o)?-1:1,h=a&&c?-1:1,p=zu(t,e);let{mainAxis:m,crossAxis:_,alignmentAxis:y}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return u&&typeof y=="number"&&(_=u==="end"?y*-1:y),c?{x:_*h,y:m*f}:{x:m*f,y:_*h}}const Ape=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:a,placement:o,middlewareData:u}=t,c=await Spe(t,e);return o===((r=u.offset)==null?void 0:r.placement)&&(n=u.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},xpe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:u={fn:b=>{let{x:S,y:A}=b;return{x:S,y:A}}},...c}=zu(e,t),f={x:r,y:n},h=await e_(t,c),p=ks(ju(i)),m=WC(p);let _=f[m],y=f[p];if(a){const b=m==="y"?"top":"left",S=m==="y"?"bottom":"right",A=_+h[b],R=_-h[S];_=s2(A,_,R)}if(o){const b=p==="y"?"top":"left",S=p==="y"?"bottom":"right",A=y+h[b],R=y-h[S];y=s2(A,y,R)}const E=u.fn({...t,[m]:_,[p]:y});return{...E,data:{x:E.x-r,y:E.y-n,enabled:{[m]:a,[p]:o}}}}}},Rpe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:a,middlewareData:o}=t,{offset:u=0,mainAxis:c=!0,crossAxis:f=!0}=zu(e,t),h={x:r,y:n},p=ks(i),m=WC(p);let _=h[m],y=h[p];const E=zu(u,t),b=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(c){const R=m==="y"?"height":"width",M=a.reference[m]-a.floating[R]+b.mainAxis,P=a.reference[m]+a.reference[R]-b.mainAxis;_<M?_=M:_>P&&(_=P)}if(f){var S,A;const R=m==="y"?"width":"height",M=Y8.has(ju(i)),P=a.reference[p]-a.floating[R]+(M&&((S=o.offset)==null?void 0:S[p])||0)+(M?0:b.crossAxis),I=a.reference[p]+a.reference[R]+(M?0:((A=o.offset)==null?void 0:A[p])||0)-(M?b.crossAxis:0);y<P?y=P:y>I&&(y=I)}return{[m]:_,[p]:y}}}},Cpe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:i,rects:a,platform:o,elements:u}=t,{apply:c=()=>{},...f}=zu(e,t),h=await e_(t,f),p=ju(i),m=pp(i),_=ks(i)==="y",{width:y,height:E}=a.floating;let b,S;p==="top"||p==="bottom"?(b=p,S=m===(await(o.isRTL==null?void 0:o.isRTL(u.floating))?"start":"end")?"left":"right"):(S=p,b=m==="end"?"top":"bottom");const A=E-h.top-h.bottom,R=y-h.left-h.right,M=gc(E-h[b],A),P=gc(y-h[S],R),I=!t.middlewareData.shift;let w=M,U=P;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(U=R),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(w=A),I&&!m){const K=Wa(h.left,0),H=Wa(h.right,0),x=Wa(h.top,0),N=Wa(h.bottom,0);_?U=y-2*(K!==0||H!==0?K+H:Wa(h.left,h.right)):w=E-2*(x!==0||N!==0?x+N:Wa(h.top,h.bottom))}await c({...t,availableWidth:U,availableHeight:w});const re=await o.getDimensions(u.floating);return y!==re.width||E!==re.height?{reset:{rects:!0}}:{}}}};function ME(){return typeof window<"u"}function vp(e){return Z8(e)?(e.nodeName||"").toLowerCase():"#document"}function Za(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ys(e){var t;return(t=(Z8(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Z8(e){return ME()?e instanceof Node||e instanceof Za(e).Node:!1}function as(e){return ME()?e instanceof Element||e instanceof Za(e).Element:!1}function Ws(e){return ME()?e instanceof HTMLElement||e instanceof Za(e).HTMLElement:!1}function H6(e){return!ME()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Za(e).ShadowRoot}const Ope=new Set(["inline","contents"]);function g_(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=os(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!Ope.has(i)}const Mpe=new Set(["table","td","th"]);function wpe(e){return Mpe.has(vp(e))}const Npe=[":popover-open",":modal"];function wE(e){return Npe.some(t=>{try{return e.matches(t)}catch{return!1}})}const Ipe=["transform","translate","scale","rotate","perspective"],Ppe=["transform","translate","scale","rotate","perspective","filter"],Dpe=["paint","layout","strict","content"];function ZC(e){const t=KC(),r=as(e)?os(e):e;return Ipe.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||Ppe.some(n=>(r.willChange||"").includes(n))||Dpe.some(n=>(r.contain||"").includes(n))}function Lpe(e){let t=yc(e);for(;Ws(t)&&!tp(t);){if(ZC(t))return t;if(wE(t))return null;t=yc(t)}return null}function KC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Bpe=new Set(["html","body","#document"]);function tp(e){return Bpe.has(vp(e))}function os(e){return Za(e).getComputedStyle(e)}function NE(e){return as(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function yc(e){if(vp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||H6(e)&&e.host||Ys(e);return H6(t)?t.host:t}function K8(e){const t=yc(e);return tp(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ws(t)&&g_(t)?t:K8(t)}function t_(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=K8(e),a=i===((n=e.ownerDocument)==null?void 0:n.body),o=Za(i);if(a){const u=l2(o);return t.concat(o,o.visualViewport||[],g_(i)?i:[],u&&r?t_(u):[])}return t.concat(i,t_(i,[],r))}function l2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Q8(e){const t=os(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=Ws(e),a=i?e.offsetWidth:r,o=i?e.offsetHeight:n,u=zy(r)!==a||zy(n)!==o;return u&&(r=a,n=o),{width:r,height:n,$:u}}function QC(e){return as(e)?e:e.contextElement}function Uh(e){const t=QC(e);if(!Ws(t))return Vs(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:a}=Q8(t);let o=(a?zy(r.width):r.width)/n,u=(a?zy(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!u||!Number.isFinite(u))&&(u=1),{x:o,y:u}}const Fpe=Vs(0);function J8(e){const t=Za(e);return!KC()||!t.visualViewport?Fpe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Upe(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Za(e)?!1:t}function Vf(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),a=QC(e);let o=Vs(1);t&&(n?as(n)&&(o=Uh(n)):o=Uh(e));const u=Upe(a,r,n)?J8(a):Vs(0);let c=(i.left+u.x)/o.x,f=(i.top+u.y)/o.y,h=i.width/o.x,p=i.height/o.y;if(a){const m=Za(a),_=n&&as(n)?Za(n):n;let y=m,E=l2(y);for(;E&&n&&_!==y;){const b=Uh(E),S=E.getBoundingClientRect(),A=os(E),R=S.left+(E.clientLeft+parseFloat(A.paddingLeft))*b.x,M=S.top+(E.clientTop+parseFloat(A.paddingTop))*b.y;c*=b.x,f*=b.y,h*=b.x,p*=b.y,c+=R,f+=M,y=Za(E),E=l2(y)}}return Vy({width:h,height:p,x:c,y:f})}function IE(e,t){const r=NE(e).scrollLeft;return t?t.left+r:Vf(Ys(e)).left+r}function ek(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-IE(e,r),i=r.top+t.scrollTop;return{x:n,y:i}}function kpe(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const a=i==="fixed",o=Ys(n),u=t?wE(t.floating):!1;if(n===o||u&&a)return r;let c={scrollLeft:0,scrollTop:0},f=Vs(1);const h=Vs(0),p=Ws(n);if((p||!p&&!a)&&((vp(n)!=="body"||g_(o))&&(c=NE(n)),Ws(n))){const _=Vf(n);f=Uh(n),h.x=_.x+n.clientLeft,h.y=_.y+n.clientTop}const m=o&&!p&&!a?ek(o,c):Vs(0);return{width:r.width*f.x,height:r.height*f.y,x:r.x*f.x-c.scrollLeft*f.x+h.x+m.x,y:r.y*f.y-c.scrollTop*f.y+h.y+m.y}}function zpe(e){return Array.from(e.getClientRects())}function jpe(e){const t=Ys(e),r=NE(e),n=e.ownerDocument.body,i=Wa(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=Wa(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+IE(e);const u=-r.scrollTop;return os(n).direction==="rtl"&&(o+=Wa(t.clientWidth,n.clientWidth)-i),{width:i,height:a,x:o,y:u}}const X6=25;function Vpe(e,t){const r=Za(e),n=Ys(e),i=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,u=0,c=0;if(i){a=i.width,o=i.height;const h=KC();(!h||h&&t==="fixed")&&(u=i.offsetLeft,c=i.offsetTop)}const f=IE(n);if(f<=0){const h=n.ownerDocument,p=h.body,m=getComputedStyle(p),_=h.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,y=Math.abs(n.clientWidth-p.clientWidth-_);y<=X6&&(a-=y)}else f<=X6&&(a+=f);return{width:a,height:o,x:u,y:c}}const Hpe=new Set(["absolute","fixed"]);function Xpe(e,t){const r=Vf(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,a=Ws(e)?Uh(e):Vs(1),o=e.clientWidth*a.x,u=e.clientHeight*a.y,c=i*a.x,f=n*a.y;return{width:o,height:u,x:c,y:f}}function G6(e,t,r){let n;if(t==="viewport")n=Vpe(e,r);else if(t==="document")n=jpe(Ys(e));else if(as(t))n=Xpe(t,r);else{const i=J8(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Vy(n)}function tk(e,t){const r=yc(e);return r===t||!as(r)||tp(r)?!1:os(r).position==="fixed"||tk(r,t)}function Gpe(e,t){const r=t.get(e);if(r)return r;let n=t_(e,[],!1).filter(u=>as(u)&&vp(u)!=="body"),i=null;const a=os(e).position==="fixed";let o=a?yc(e):e;for(;as(o)&&!tp(o);){const u=os(o),c=ZC(o);!c&&u.position==="fixed"&&(i=null),(a?!c&&!i:!c&&u.position==="static"&&i&&Hpe.has(i.position)||g_(o)&&!c&&tk(e,o))?n=n.filter(f=>f!==o):i=u,o=yc(o)}return t.set(e,n),n}function qpe(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const a=[...r==="clippingAncestors"?wE(t)?[]:Gpe(t,this._c):[].concat(r),n],o=a[0],u=a.reduce((c,f)=>{const h=G6(t,f,i);return c.top=Wa(h.top,c.top),c.right=gc(h.right,c.right),c.bottom=gc(h.bottom,c.bottom),c.left=Wa(h.left,c.left),c},G6(t,o,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Wpe(e){const{width:t,height:r}=Q8(e);return{width:t,height:r}}function $pe(e,t,r){const n=Ws(t),i=Ys(t),a=r==="fixed",o=Vf(e,!0,a,t);let u={scrollLeft:0,scrollTop:0};const c=Vs(0);function f(){c.x=IE(i)}if(n||!n&&!a)if((vp(t)!=="body"||g_(i))&&(u=NE(t)),n){const _=Vf(t,!0,a,t);c.x=_.x+t.clientLeft,c.y=_.y+t.clientTop}else i&&f();a&&!n&&i&&f();const h=i&&!n&&!a?ek(i,u):Vs(0),p=o.left+u.scrollLeft-c.x-h.x,m=o.top+u.scrollTop-c.y-h.y;return{x:p,y:m,width:o.width,height:o.height}}function Wx(e){return os(e).position==="static"}function q6(e,t){if(!Ws(e)||os(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Ys(e)===r&&(r=r.ownerDocument.body),r}function rk(e,t){const r=Za(e);if(wE(e))return r;if(!Ws(e)){let i=yc(e);for(;i&&!tp(i);){if(as(i)&&!Wx(i))return i;i=yc(i)}return r}let n=q6(e,t);for(;n&&wpe(n)&&Wx(n);)n=q6(n,t);return n&&tp(n)&&Wx(n)&&!ZC(n)?r:n||Lpe(e)||r}const Ype=async function(e){const t=this.getOffsetParent||rk,r=this.getDimensions,n=await r(e.floating);return{reference:$pe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Zpe(e){return os(e).direction==="rtl"}const Kpe={convertOffsetParentRelativeRectToViewportRelativeRect:kpe,getDocumentElement:Ys,getClippingRect:qpe,getOffsetParent:rk,getElementRects:Ype,getClientRects:zpe,getDimensions:Wpe,getScale:Uh,isElement:as,isRTL:Zpe};function nk(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Qpe(e,t){let r=null,n;const i=Ys(e);function a(){var u;clearTimeout(n),(u=r)==null||u.disconnect(),r=null}function o(u,c){u===void 0&&(u=!1),c===void 0&&(c=1),a();const f=e.getBoundingClientRect(),{left:h,top:p,width:m,height:_}=f;if(u||t(),!m||!_)return;const y=T0(p),E=T0(i.clientWidth-(h+m)),b=T0(i.clientHeight-(p+_)),S=T0(h),A={rootMargin:-y+"px "+-E+"px "+-b+"px "+-S+"px",threshold:Wa(0,gc(1,c))||1};let R=!0;function M(P){const I=P[0].intersectionRatio;if(I!==c){if(!R)return o();I?o(!1,I):n=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!nk(f,e.getBoundingClientRect())&&o(),R=!1}try{r=new IntersectionObserver(M,{...A,root:i.ownerDocument})}catch{r=new IntersectionObserver(M,A)}r.observe(e)}return o(!0),a}function Jpe(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,f=QC(e),h=i||a?[...f?t_(f):[],...t_(t)]:[];h.forEach(S=>{i&&S.addEventListener("scroll",r,{passive:!0}),a&&S.addEventListener("resize",r)});const p=f&&u?Qpe(f,r):null;let m=-1,_=null;o&&(_=new ResizeObserver(S=>{let[A]=S;A&&A.target===f&&_&&(_.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var R;(R=_)==null||R.observe(t)})),r()}),f&&!c&&_.observe(f),_.observe(t));let y,E=c?Vf(e):null;c&&b();function b(){const S=Vf(e);E&&!nk(E,S)&&r(),E=S,y=requestAnimationFrame(b)}return r(),()=>{var S;h.forEach(A=>{i&&A.removeEventListener("scroll",r),a&&A.removeEventListener("resize",r)}),p?.(),(S=_)==null||S.disconnect(),_=null,c&&cancelAnimationFrame(y)}}const eve=Ape,tve=xpe,rve=bpe,nve=Cpe,ive=Tpe,W6=Epe,ave=Rpe,ove=(e,t,r)=>{const n=new Map,i={platform:Kpe,...r},a={...i.platform,_c:n};return ype(e,t,{...i,platform:a})};var sve=typeof document<"u",uve=function(){},H0=sve?z.useLayoutEffect:uve;function Hy(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Hy(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const a=i[n];if(!(a==="_owner"&&e.$$typeof)&&!Hy(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function ik(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function $6(e,t){const r=ik(e);return Math.round(t*r)/r}function $x(e){const t=z.useRef(e);return H0(()=>{t.current=e}),t}function lve(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:o}={},transform:u=!0,whileElementsMounted:c,open:f}=e,[h,p]=z.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,_]=z.useState(n);Hy(m,n)||_(n);const[y,E]=z.useState(null),[b,S]=z.useState(null),A=z.useCallback(V=>{V!==I.current&&(I.current=V,E(V))},[]),R=z.useCallback(V=>{V!==w.current&&(w.current=V,S(V))},[]),M=a||y,P=o||b,I=z.useRef(null),w=z.useRef(null),U=z.useRef(h),re=c!=null,K=$x(c),H=$x(i),x=$x(f),N=z.useCallback(()=>{if(!I.current||!w.current)return;const V={placement:t,strategy:r,middleware:m};H.current&&(V.platform=H.current),ove(I.current,w.current,V).then(ee=>{const oe={...ee,isPositioned:x.current!==!1};j.current&&!Hy(U.current,oe)&&(U.current=oe,up.flushSync(()=>{p(oe)}))})},[m,t,r,H,x]);H0(()=>{f===!1&&U.current.isPositioned&&(U.current.isPositioned=!1,p(V=>({...V,isPositioned:!1})))},[f]);const j=z.useRef(!1);H0(()=>(j.current=!0,()=>{j.current=!1}),[]),H0(()=>{if(M&&(I.current=M),P&&(w.current=P),M&&P){if(K.current)return K.current(M,P,N);N()}},[M,P,N,K,re]);const fe=z.useMemo(()=>({reference:I,floating:w,setReference:A,setFloating:R}),[A,R]),O=z.useMemo(()=>({reference:M,floating:P}),[M,P]),k=z.useMemo(()=>{const V={position:r,left:0,top:0};if(!O.floating)return V;const ee=$6(O.floating,h.x),oe=$6(O.floating,h.y);return u?{...V,transform:"translate("+ee+"px, "+oe+"px)",...ik(O.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:ee,top:oe}},[r,u,O.floating,h.x,h.y]);return z.useMemo(()=>({...h,update:N,refs:fe,elements:O,floatingStyles:k}),[h,N,fe,O,k])}const cve=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?W6({element:n.current,padding:i}).fn(r):{}:n?W6({element:n,padding:i}).fn(r):{}}}},fve=(e,t)=>({...eve(e),options:[e,t]}),dve=(e,t)=>({...tve(e),options:[e,t]}),hve=(e,t)=>({...ave(e),options:[e,t]}),pve=(e,t)=>({...rve(e),options:[e,t]}),vve=(e,t)=>({...nve(e),options:[e,t]}),mve=(e,t)=>({...ive(e),options:[e,t]}),_ve=(e,t)=>({...cve(e),options:[e,t]});var gve="Arrow",ak=z.forwardRef((e,t)=>{const{children:r,width:n=10,height:i=5,...a}=e;return Le.jsx(qr.svg,{...a,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:Le.jsx("polygon",{points:"0,0 30,0 15,10"})})});ak.displayName=gve;var yve=ak;function JC(e){const[t,r]=z.useState(void 0);return xi(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,u;if("borderBoxSize"in a){const c=a.borderBoxSize,f=Array.isArray(c)?c[0]:c;o=f.inlineSize,u=f.blockSize}else o=e.offsetWidth,u=e.offsetHeight;r({width:o,height:u})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var ok="Popper",[sk,uk]=Zf(ok),[Lge,lk]=sk(ok),ck="PopperAnchor",fk=z.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,a=lk(ck,r),o=z.useRef(null),u=Dn(t,o),c=z.useRef(null);return z.useEffect(()=>{const f=c.current;c.current=n?.current||o.current,f!==c.current&&a.onAnchorChange(c.current)}),n?null:Le.jsx(qr.div,{...i,ref:u})});fk.displayName=ck;var e3="PopperContent",[Eve,bve]=sk(e3),dk=z.forwardRef((e,t)=>{const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:u=0,avoidCollisions:c=!0,collisionBoundary:f=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:m=!1,updatePositionStrategy:_="optimized",onPlaced:y,...E}=e,b=lk(e3,r),[S,A]=z.useState(null),R=Dn(t,qe=>A(qe)),[M,P]=z.useState(null),I=JC(M),w=I?.width??0,U=I?.height??0,re=n+(a!=="center"?"-"+a:""),K=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},H=Array.isArray(f)?f:[f],x=H.length>0,N={padding:K,boundary:H.filter(Sve),altBoundary:x},{refs:j,floatingStyles:fe,placement:O,isPositioned:k,middlewareData:V}=lve({strategy:"fixed",placement:re,whileElementsMounted:(...qe)=>Jpe(...qe,{animationFrame:_==="always"}),elements:{reference:b.anchor},middleware:[fve({mainAxis:i+U,alignmentAxis:o}),c&&dve({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?hve():void 0,...N}),c&&pve({...N}),vve({...N,apply:({elements:qe,rects:St,availableWidth:ke,availableHeight:_e})=>{const{width:ot,height:Ce}=St.reference,Wt=qe.floating.style;Wt.setProperty("--radix-popper-available-width",`${ke}px`),Wt.setProperty("--radix-popper-available-height",`${_e}px`),Wt.setProperty("--radix-popper-anchor-width",`${ot}px`),Wt.setProperty("--radix-popper-anchor-height",`${Ce}px`)}}),M&&_ve({element:M,padding:u}),Ave({arrowWidth:w,arrowHeight:U}),m&&mve({strategy:"referenceHidden",...N})]}),[ee,oe]=vk(O),ge=_c(y);xi(()=>{k&&ge?.()},[k,ge]);const Ee=V.arrow?.x,De=V.arrow?.y,tt=V.arrow?.centerOffset!==0,[$e,It]=z.useState();return xi(()=>{S&&It(window.getComputedStyle(S).zIndex)},[S]),Le.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...fe,transform:k?fe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$e,"--radix-popper-transform-origin":[V.transformOrigin?.x,V.transformOrigin?.y].join(" "),...V.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:Le.jsx(Eve,{scope:r,placedSide:ee,onArrowChange:P,arrowX:Ee,arrowY:De,shouldHideArrow:tt,children:Le.jsx(qr.div,{"data-side":ee,"data-align":oe,...E,ref:R,style:{...E.style,animation:k?void 0:"none"}})})})});dk.displayName=e3;var hk="PopperArrow",Tve={top:"bottom",right:"left",bottom:"top",left:"right"},pk=z.forwardRef(function(e,t){const{__scopePopper:r,...n}=e,i=bve(hk,r),a=Tve[i.placedSide];return Le.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:Le.jsx(yve,{...n,ref:t,style:{...n.style,display:"block"}})})});pk.displayName=hk;function Sve(e){return e!==null}var Ave=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:i}=t,a=i.arrow?.centerOffset!==0,o=a?0:e.arrowWidth,u=a?0:e.arrowHeight,[c,f]=vk(r),h={start:"0%",center:"50%",end:"100%"}[f],p=(i.arrow?.x??0)+o/2,m=(i.arrow?.y??0)+u/2;let _="",y="";return c==="bottom"?(_=a?h:`${p}px`,y=`${-u}px`):c==="top"?(_=a?h:`${p}px`,y=`${n.floating.height+u}px`):c==="right"?(_=`${-u}px`,y=a?h:`${m}px`):c==="left"&&(_=`${n.floating.width+u}px`,y=a?h:`${m}px`),{data:{x:_,y}}}});function vk(e){const[t,r="center"]=e.split("-");return[t,r]}var xve=fk,Rve=dk,Cve=pk;function t3(e){const t=z.useRef({value:e,previous:e});return z.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var mk=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Ove="VisuallyHidden",Mve=z.forwardRef((e,t)=>Le.jsx(qr.span,{...e,ref:t,style:{...mk,...e.style}}));Mve.displayName=Ove;var wve=[" ","Enter","ArrowUp","ArrowDown"],Nve=[" ","Enter"],PE="Select",[r3,DE,Ive]=spe(PE),[mp]=Zf(PE,[Ive,uk]),n3=uk(),[Bge,xc]=mp(PE),[Fge,Pve]=mp(PE),_k="SelectTrigger",gk=z.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...i}=e,a=n3(r),o=xc(_k,r),u=o.disabled||n,c=Dn(t,o.onTriggerChange),f=DE(r),h=z.useRef("touch"),[p,m,_]=zk(E=>{const b=f().filter(R=>!R.disabled),S=b.find(R=>R.value===o.value),A=jk(b,E,S);A!==void 0&&o.onValueChange(A.value)}),y=E=>{u||(o.onOpenChange(!0),_()),E&&(o.triggerPointerDownPosRef.current={x:Math.round(E.pageX),y:Math.round(E.pageY)})};return Le.jsx(xve,{asChild:!0,...a,children:Le.jsx(qr.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":kk(o.value)?"":void 0,...i,ref:c,onClick:vn(i.onClick,E=>{E.currentTarget.focus(),h.current!=="mouse"&&y(E)}),onPointerDown:vn(i.onPointerDown,E=>{h.current=E.pointerType;const b=E.target;b.hasPointerCapture(E.pointerId)&&b.releasePointerCapture(E.pointerId),E.button===0&&E.ctrlKey===!1&&E.pointerType==="mouse"&&(y(E),E.preventDefault())}),onKeyDown:vn(i.onKeyDown,E=>{const b=p.current!=="";!(E.ctrlKey||E.altKey||E.metaKey)&&E.key.length===1&&m(E.key),!(b&&E.key===" ")&&wve.includes(E.key)&&(y(),E.preventDefault())})})})});gk.displayName=_k;var yk="SelectValue",Dve=z.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,children:a,placeholder:o="",...u}=e,c=xc(yk,r),{onValueNodeHasChildrenChange:f}=c,h=a!==void 0,p=Dn(t,c.onValueNodeChange);return xi(()=>{f(h)},[f,h]),Le.jsx(qr.span,{...u,ref:p,style:{pointerEvents:"none"},children:kk(c.value)?Le.jsx(Le.Fragment,{children:o}):a})});Dve.displayName=yk;var Lve="SelectIcon",Ek=z.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...i}=e;return Le.jsx(qr.span,{"aria-hidden":!0,...i,ref:t,children:n||""})});Ek.displayName=Lve;var Bve="SelectPortal",bk=e=>Le.jsx(VC,{asChild:!0,...e});bk.displayName=Bve;var Hf="SelectContent",Tk=z.forwardRef((e,t)=>{const r=xc(Hf,e.__scopeSelect),[n,i]=z.useState();if(xi(()=>{i(new DocumentFragment)},[]),!r.open){const a=n;return a?up.createPortal(Le.jsx(Sk,{scope:e.__scopeSelect,children:Le.jsx(r3.Slot,{scope:e.__scopeSelect,children:Le.jsx("div",{children:e.children})})}),a):null}return Le.jsx(Ak,{...e,ref:t})});Tk.displayName=Hf;var Zo=10,[Sk,Rc]=mp(Hf),Fve="SelectContentImpl",Uve=ep("SelectContent.RemoveScroll"),Ak=z.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:u,sideOffset:c,align:f,alignOffset:h,arrowPadding:p,collisionBoundary:m,collisionPadding:_,sticky:y,hideWhenDetached:E,avoidCollisions:b,...S}=e,A=xc(Hf,r),[R,M]=z.useState(null),[P,I]=z.useState(null),w=Dn(t,qe=>M(qe)),[U,re]=z.useState(null),[K,H]=z.useState(null),x=DE(r),[N,j]=z.useState(!1),fe=z.useRef(!1);z.useEffect(()=>{if(R)return b8(R)},[R]),d8();const O=z.useCallback(qe=>{const[St,...ke]=x().map(Ce=>Ce.ref.current),[_e]=ke.slice(-1),ot=document.activeElement;for(const Ce of qe)if(Ce===ot||(Ce?.scrollIntoView({block:"nearest"}),Ce===St&&P&&(P.scrollTop=0),Ce===_e&&P&&(P.scrollTop=P.scrollHeight),Ce?.focus(),document.activeElement!==ot))return},[x,P]),k=z.useCallback(()=>O([U,R]),[O,U,R]);z.useEffect(()=>{N&&k()},[N,k]);const{onOpenChange:V,triggerPointerDownPosRef:ee}=A;z.useEffect(()=>{if(R){let qe={x:0,y:0};const St=_e=>{qe={x:Math.abs(Math.round(_e.pageX)-(ee.current?.x??0)),y:Math.abs(Math.round(_e.pageY)-(ee.current?.y??0))}},ke=_e=>{qe.x<=10&&qe.y<=10?_e.preventDefault():R.contains(_e.target)||V(!1),document.removeEventListener("pointermove",St),ee.current=null};return ee.current!==null&&(document.addEventListener("pointermove",St),document.addEventListener("pointerup",ke,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",St),document.removeEventListener("pointerup",ke,{capture:!0})}}},[R,V,ee]),z.useEffect(()=>{const qe=()=>V(!1);return window.addEventListener("blur",qe),window.addEventListener("resize",qe),()=>{window.removeEventListener("blur",qe),window.removeEventListener("resize",qe)}},[V]);const[oe,ge]=zk(qe=>{const St=x().filter(ot=>!ot.disabled),ke=St.find(ot=>ot.ref.current===document.activeElement),_e=jk(St,qe,ke);_e&&setTimeout(()=>_e.ref.current.focus())}),Ee=z.useCallback((qe,St,ke)=>{const _e=!fe.current&&!ke;(A.value!==void 0&&A.value===St||_e)&&(re(qe),_e&&(fe.current=!0))},[A.value]),De=z.useCallback(()=>R?.focus(),[R]),tt=z.useCallback((qe,St,ke)=>{const _e=!fe.current&&!ke;(A.value!==void 0&&A.value===St||_e)&&H(qe)},[A.value]),$e=n==="popper"?c2:xk,It=$e===c2?{side:u,sideOffset:c,align:f,alignOffset:h,arrowPadding:p,collisionBoundary:m,collisionPadding:_,sticky:y,hideWhenDetached:E,avoidCollisions:b}:{};return Le.jsx(Sk,{scope:r,content:R,viewport:P,onViewportChange:I,itemRefCallback:Ee,selectedItem:U,onItemLeave:De,itemTextRefCallback:tt,focusSelectedItem:k,selectedItemText:K,position:n,isPositioned:N,searchRef:oe,children:Le.jsx(HC,{as:Uve,allowPinchZoom:!0,children:Le.jsx(jC,{asChild:!0,trapped:A.open,onMountAutoFocus:qe=>{qe.preventDefault()},onUnmountAutoFocus:vn(i,qe=>{A.trigger?.focus({preventScroll:!0}),qe.preventDefault()}),children:Le.jsx(zC,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:qe=>qe.preventDefault(),onDismiss:()=>A.onOpenChange(!1),children:Le.jsx($e,{role:"listbox",id:A.contentId,"data-state":A.open?"open":"closed",dir:A.dir,onContextMenu:qe=>qe.preventDefault(),...S,...It,onPlaced:()=>j(!0),ref:w,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:vn(S.onKeyDown,qe=>{const St=qe.ctrlKey||qe.altKey||qe.metaKey;if(qe.key==="Tab"&&qe.preventDefault(),!St&&qe.key.length===1&&ge(qe.key),["ArrowUp","ArrowDown","Home","End"].includes(qe.key)){let ke=x().filter(_e=>!_e.disabled).map(_e=>_e.ref.current);if(["ArrowUp","End"].includes(qe.key)&&(ke=ke.slice().reverse()),["ArrowUp","ArrowDown"].includes(qe.key)){const _e=qe.target,ot=ke.indexOf(_e);ke=ke.slice(ot+1)}setTimeout(()=>O(ke)),qe.preventDefault()}})})})})})})});Ak.displayName=Fve;var kve="SelectItemAlignedPosition",xk=z.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...i}=e,a=xc(Hf,r),o=Rc(Hf,r),[u,c]=z.useState(null),[f,h]=z.useState(null),p=Dn(t,w=>h(w)),m=DE(r),_=z.useRef(!1),y=z.useRef(!0),{viewport:E,selectedItem:b,selectedItemText:S,focusSelectedItem:A}=o,R=z.useCallback(()=>{if(a.trigger&&a.valueNode&&u&&f&&E&&b&&S){const w=a.trigger.getBoundingClientRect(),U=f.getBoundingClientRect(),re=a.valueNode.getBoundingClientRect(),K=S.getBoundingClientRect();if(a.dir!=="rtl"){const _e=K.left-U.left,ot=re.left-_e,Ce=w.left-ot,Wt=w.width+Ce,Xt=Math.max(Wt,U.width),bt=window.innerWidth-Zo,Pt=F6(ot,[Zo,Math.max(Zo,bt-Xt)]);u.style.minWidth=Wt+"px",u.style.left=Pt+"px"}else{const _e=U.right-K.right,ot=window.innerWidth-re.right-_e,Ce=window.innerWidth-w.right-ot,Wt=w.width+Ce,Xt=Math.max(Wt,U.width),bt=window.innerWidth-Zo,Pt=F6(ot,[Zo,Math.max(Zo,bt-Xt)]);u.style.minWidth=Wt+"px",u.style.right=Pt+"px"}const H=m(),x=window.innerHeight-Zo*2,N=E.scrollHeight,j=window.getComputedStyle(f),fe=parseInt(j.borderTopWidth,10),O=parseInt(j.paddingTop,10),k=parseInt(j.borderBottomWidth,10),V=parseInt(j.paddingBottom,10),ee=fe+O+N+V+k,oe=Math.min(b.offsetHeight*5,ee),ge=window.getComputedStyle(E),Ee=parseInt(ge.paddingTop,10),De=parseInt(ge.paddingBottom,10),tt=w.top+w.height/2-Zo,$e=x-tt,It=b.offsetHeight/2,qe=b.offsetTop+It,St=fe+O+qe,ke=ee-St;if(St<=tt){const _e=H.length>0&&b===H[H.length-1].ref.current;u.style.bottom="0px";const ot=f.clientHeight-E.offsetTop-E.offsetHeight,Ce=Math.max($e,It+(_e?De:0)+ot+k),Wt=St+Ce;u.style.height=Wt+"px"}else{const _e=H.length>0&&b===H[0].ref.current;u.style.top="0px";const ot=Math.max(tt,fe+E.offsetTop+(_e?Ee:0)+It)+ke;u.style.height=ot+"px",E.scrollTop=St-tt+E.offsetTop}u.style.margin=`${Zo}px 0`,u.style.minHeight=oe+"px",u.style.maxHeight=x+"px",n?.(),requestAnimationFrame(()=>_.current=!0)}},[m,a.trigger,a.valueNode,u,f,E,b,S,a.dir,n]);xi(()=>R(),[R]);const[M,P]=z.useState();xi(()=>{f&&P(window.getComputedStyle(f).zIndex)},[f]);const I=z.useCallback(w=>{w&&y.current===!0&&(R(),A?.(),y.current=!1)},[R,A]);return Le.jsx(jve,{scope:r,contentWrapper:u,shouldExpandOnScrollRef:_,onScrollButtonChange:I,children:Le.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:Le.jsx(qr.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});xk.displayName=kve;var zve="SelectPopperPosition",c2=z.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=Zo,...a}=e,o=n3(r);return Le.jsx(Rve,{...o,...a,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});c2.displayName=zve;var[jve,i3]=mp(Hf,{}),f2="SelectViewport",Rk=z.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...i}=e,a=Rc(f2,r),o=i3(f2,r),u=Dn(t,a.onViewportChange),c=z.useRef(0);return Le.jsxs(Le.Fragment,{children:[Le.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),Le.jsx(r3.Slot,{scope:r,children:Le.jsx(qr.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:vn(i.onScroll,f=>{const h=f.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:m}=o;if(m?.current&&p){const _=Math.abs(c.current-h.scrollTop);if(_>0){const y=window.innerHeight-Zo*2,E=parseFloat(p.style.minHeight),b=parseFloat(p.style.height),S=Math.max(E,b);if(S<y){const A=S+_,R=Math.min(y,A),M=A-R;p.style.height=R+"px",p.style.bottom==="0px"&&(h.scrollTop=M>0?M:0,p.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});Rk.displayName=f2;var Ck="SelectGroup",[Vve,Hve]=mp(Ck),Xve=z.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=Im();return Le.jsx(Vve,{scope:r,id:i,children:Le.jsx(qr.div,{role:"group","aria-labelledby":i,...n,ref:t})})});Xve.displayName=Ck;var Ok="SelectLabel",Mk=z.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=Hve(Ok,r);return Le.jsx(qr.div,{id:i.id,...n,ref:t})});Mk.displayName=Ok;var Xy="SelectItem",[Gve,wk]=mp(Xy),Nk=z.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:a,...o}=e,u=xc(Xy,r),c=Rc(Xy,r),f=u.value===n,[h,p]=z.useState(a??""),[m,_]=z.useState(!1),y=Dn(t,A=>c.itemRefCallback?.(A,n,i)),E=Im(),b=z.useRef("touch"),S=()=>{i||(u.onValueChange(n),u.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return Le.jsx(Gve,{scope:r,value:n,disabled:i,textId:E,isSelected:f,onItemTextChange:z.useCallback(A=>{p(R=>R||(A?.textContent??"").trim())},[]),children:Le.jsx(r3.ItemSlot,{scope:r,value:n,disabled:i,textValue:h,children:Le.jsx(qr.div,{role:"option","aria-labelledby":E,"data-highlighted":m?"":void 0,"aria-selected":f&&m,"data-state":f?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:y,onFocus:vn(o.onFocus,()=>_(!0)),onBlur:vn(o.onBlur,()=>_(!1)),onClick:vn(o.onClick,()=>{b.current!=="mouse"&&S()}),onPointerUp:vn(o.onPointerUp,()=>{b.current==="mouse"&&S()}),onPointerDown:vn(o.onPointerDown,A=>{b.current=A.pointerType}),onPointerMove:vn(o.onPointerMove,A=>{b.current=A.pointerType,i?c.onItemLeave?.():b.current==="mouse"&&A.currentTarget.focus({preventScroll:!0})}),onPointerLeave:vn(o.onPointerLeave,A=>{A.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:vn(o.onKeyDown,A=>{c.searchRef?.current!==""&&A.key===" "||(Nve.includes(A.key)&&S(),A.key===" "&&A.preventDefault())})})})})});Nk.displayName=Xy;var Tm="SelectItemText",Ik=z.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,...a}=e,o=xc(Tm,r),u=Rc(Tm,r),c=wk(Tm,r),f=Pve(Tm,r),[h,p]=z.useState(null),m=Dn(t,S=>p(S),c.onItemTextChange,S=>u.itemTextRefCallback?.(S,c.value,c.disabled)),_=h?.textContent,y=z.useMemo(()=>Le.jsx("option",{value:c.value,disabled:c.disabled,children:_},c.value),[c.disabled,c.value,_]),{onNativeOptionAdd:E,onNativeOptionRemove:b}=f;return xi(()=>(E(y),()=>b(y)),[E,b,y]),Le.jsxs(Le.Fragment,{children:[Le.jsx(qr.span,{id:c.textId,...a,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?up.createPortal(a.children,o.valueNode):null]})});Ik.displayName=Tm;var Pk="SelectItemIndicator",Dk=z.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return wk(Pk,r).isSelected?Le.jsx(qr.span,{"aria-hidden":!0,...n,ref:t}):null});Dk.displayName=Pk;var d2="SelectScrollUpButton",Lk=z.forwardRef((e,t)=>{const r=Rc(d2,e.__scopeSelect),n=i3(d2,e.__scopeSelect),[i,a]=z.useState(!1),o=Dn(t,n.onScrollButtonChange);return xi(()=>{if(r.viewport&&r.isPositioned){let u=function(){const f=c.scrollTop>0;a(f)};const c=r.viewport;return u(),c.addEventListener("scroll",u),()=>c.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),i?Le.jsx(Fk,{...e,ref:o,onAutoScroll:()=>{const{viewport:u,selectedItem:c}=r;u&&c&&(u.scrollTop=u.scrollTop-c.offsetHeight)}}):null});Lk.displayName=d2;var h2="SelectScrollDownButton",Bk=z.forwardRef((e,t)=>{const r=Rc(h2,e.__scopeSelect),n=i3(h2,e.__scopeSelect),[i,a]=z.useState(!1),o=Dn(t,n.onScrollButtonChange);return xi(()=>{if(r.viewport&&r.isPositioned){let u=function(){const f=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<f;a(h)};const c=r.viewport;return u(),c.addEventListener("scroll",u),()=>c.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),i?Le.jsx(Fk,{...e,ref:o,onAutoScroll:()=>{const{viewport:u,selectedItem:c}=r;u&&c&&(u.scrollTop=u.scrollTop+c.offsetHeight)}}):null});Bk.displayName=h2;var Fk=z.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=e,a=Rc("SelectScrollButton",r),o=z.useRef(null),u=DE(r),c=z.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return z.useEffect(()=>()=>c(),[c]),xi(()=>{u().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),Le.jsx(qr.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:vn(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:vn(i.onPointerMove,()=>{a.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:vn(i.onPointerLeave,()=>{c()})})}),qve="SelectSeparator",Uk=z.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return Le.jsx(qr.div,{"aria-hidden":!0,...n,ref:t})});Uk.displayName=qve;var p2="SelectArrow",Wve=z.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=n3(r),a=xc(p2,r),o=Rc(p2,r);return a.open&&o.position==="popper"?Le.jsx(Cve,{...i,...n,ref:t}):null});Wve.displayName=p2;var $ve="SelectBubbleInput",Yve=z.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const i=z.useRef(null),a=Dn(n,i),o=t3(t);return z.useEffect(()=>{const u=i.current;if(!u)return;const c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&f){const h=new Event("change",{bubbles:!0});f.call(u,t),u.dispatchEvent(h)}},[o,t]),Le.jsx(qr.select,{...r,style:{...mk,...r.style},ref:a,defaultValue:t})});Yve.displayName=$ve;function kk(e){return e===""||e===void 0}function zk(e){const t=_c(e),r=z.useRef(""),n=z.useRef(0),i=z.useCallback(o=>{const u=r.current+o;t(u),(function c(f){r.current=f,window.clearTimeout(n.current),f!==""&&(n.current=window.setTimeout(()=>c(""),1e3))})(u)},[t]),a=z.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return z.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,a]}function jk(e,t,r){const n=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let a=Zve(e,Math.max(i,0));n.length===1&&(a=a.filter(u=>u!==r));const o=a.find(u=>u.textValue.toLowerCase().startsWith(n.toLowerCase()));return o!==r?o:void 0}function Zve(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Vk=gk,Kve=Ek,Qve=bk,Hk=Tk,Jve=Rk,Xk=Mk,Gk=Nk,eme=Ik,tme=Dk,qk=Lk,Wk=Bk,$k=Uk;const rme=z.forwardRef(({className:e,children:t,...r},n)=>Le.jsxs(Vk,{ref:n,className:Jr("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,Le.jsx(Kve,{asChild:!0,children:Le.jsx(H8,{className:"h-4 w-4 opacity-50"})})]}));rme.displayName=Vk.displayName;const Yk=z.forwardRef(({className:e,...t},r)=>Le.jsx(qk,{ref:r,className:Jr("flex cursor-default items-center justify-center py-1",e),...t,children:Le.jsx(tpe,{className:"h-4 w-4"})}));Yk.displayName=qk.displayName;const Zk=z.forwardRef(({className:e,...t},r)=>Le.jsx(Wk,{ref:r,className:Jr("flex cursor-default items-center justify-center py-1",e),...t,children:Le.jsx(H8,{className:"h-4 w-4"})}));Zk.displayName=Wk.displayName;const nme=z.forwardRef(({className:e,children:t,position:r="popper",...n},i)=>Le.jsx(Qve,{children:Le.jsxs(Hk,{ref:i,className:Jr("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[Le.jsx(Yk,{}),Le.jsx(Jve,{className:Jr("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),Le.jsx(Zk,{})]})}));nme.displayName=Hk.displayName;const ime=z.forwardRef(({className:e,...t},r)=>Le.jsx(Xk,{ref:r,className:Jr("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));ime.displayName=Xk.displayName;const ame=z.forwardRef(({className:e,children:t,...r},n)=>Le.jsxs(Gk,{ref:n,className:Jr("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[Le.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Le.jsx(tme,{children:Le.jsx(V8,{className:"h-4 w-4"})})}),Le.jsx(eme,{children:t})]}));ame.displayName=Gk.displayName;const ome=z.forwardRef(({className:e,...t},r)=>Le.jsx($k,{ref:r,className:Jr("-mx-1 my-1 h-px bg-muted",e),...t}));ome.displayName=$k.displayName;var LE="Checkbox",[sme]=Zf(LE),[ume,a3]=sme(LE);function lme(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:i,disabled:a,form:o,name:u,onCheckedChange:c,required:f,value:h="on",internal_do_not_use_render:p}=e,[m,_]=kC({prop:r,defaultProp:i??!1,onChange:c,caller:LE}),[y,E]=z.useState(null),[b,S]=z.useState(null),A=z.useRef(!1),R=y?!!o||!!y.closest("form"):!0,M={checked:m,disabled:a,setChecked:_,control:y,setControl:E,name:u,form:o,value:h,hasConsumerStoppedPropagationRef:A,required:f,defaultChecked:dc(i)?!1:i,isFormControl:R,bubbleInput:b,setBubbleInput:S};return Le.jsx(ume,{scope:t,...M,children:cme(p)?p(M):n})}var Kk="CheckboxTrigger",Qk=z.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},i)=>{const{control:a,value:o,disabled:u,checked:c,required:f,setControl:h,setChecked:p,hasConsumerStoppedPropagationRef:m,isFormControl:_,bubbleInput:y}=a3(Kk,e),E=Dn(i,h),b=z.useRef(c);return z.useEffect(()=>{const S=a?.form;if(S){const A=()=>p(b.current);return S.addEventListener("reset",A),()=>S.removeEventListener("reset",A)}},[a,p]),Le.jsx(qr.button,{type:"button",role:"checkbox","aria-checked":dc(c)?"mixed":c,"aria-required":f,"data-state":n9(c),"data-disabled":u?"":void 0,disabled:u,value:o,...n,ref:E,onKeyDown:vn(t,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:vn(r,S=>{p(A=>dc(A)?!0:!A),y&&_&&(m.current=S.isPropagationStopped(),m.current||S.stopPropagation())})})});Qk.displayName=Kk;var o3=z.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:i,defaultChecked:a,required:o,disabled:u,value:c,onCheckedChange:f,form:h,...p}=e;return Le.jsx(lme,{__scopeCheckbox:r,checked:i,defaultChecked:a,disabled:u,required:o,onCheckedChange:f,name:n,form:h,value:c,internal_do_not_use_render:({isFormControl:m})=>Le.jsxs(Le.Fragment,{children:[Le.jsx(Qk,{...p,ref:t,__scopeCheckbox:r}),m&&Le.jsx(r9,{__scopeCheckbox:r})]})})});o3.displayName=LE;var Jk="CheckboxIndicator",e9=z.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...i}=e,a=a3(Jk,r);return Le.jsx(__,{present:n||dc(a.checked)||a.checked===!0,children:Le.jsx(qr.span,{"data-state":n9(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});e9.displayName=Jk;var t9="CheckboxBubbleInput",r9=z.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:o,required:u,disabled:c,name:f,value:h,form:p,bubbleInput:m,setBubbleInput:_}=a3(t9,e),y=Dn(r,_),E=t3(a),b=JC(n);z.useEffect(()=>{const A=m;if(!A)return;const R=window.HTMLInputElement.prototype,M=Object.getOwnPropertyDescriptor(R,"checked").set,P=!i.current;if(E!==a&&M){const I=new Event("click",{bubbles:P});A.indeterminate=dc(a),M.call(A,dc(a)?!1:a),A.dispatchEvent(I)}},[m,E,a,i]);const S=z.useRef(dc(a)?!1:a);return Le.jsx(qr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??S.current,required:u,disabled:c,name:f,value:h,form:p,...t,tabIndex:-1,ref:y,style:{...t.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});r9.displayName=t9;function cme(e){return typeof e=="function"}function dc(e){return e==="indeterminate"}function n9(e){return dc(e)?"indeterminate":e?"checked":"unchecked"}const fme=z.forwardRef(({className:e,...t},r)=>Le.jsx(o3,{ref:r,className:Jr("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:Le.jsx(e9,{className:Jr("flex items-center justify-center text-current"),children:Le.jsx(V8,{className:"h-4 w-4"})})}));fme.displayName=o3.displayName;var BE="Switch",[dme]=Zf(BE),[hme,pme]=dme(BE),i9=z.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:i,defaultChecked:a,required:o,disabled:u,value:c="on",onCheckedChange:f,form:h,...p}=e,[m,_]=z.useState(null),y=Dn(t,R=>_(R)),E=z.useRef(!1),b=m?h||!!m.closest("form"):!0,[S,A]=kC({prop:i,defaultProp:a??!1,onChange:f,caller:BE});return Le.jsxs(hme,{scope:r,checked:S,disabled:u,children:[Le.jsx(qr.button,{type:"button",role:"switch","aria-checked":S,"aria-required":o,"data-state":u9(S),"data-disabled":u?"":void 0,disabled:u,value:c,...p,ref:y,onClick:vn(e.onClick,R=>{A(M=>!M),b&&(E.current=R.isPropagationStopped(),E.current||R.stopPropagation())})}),b&&Le.jsx(s9,{control:m,bubbles:!E.current,name:n,value:c,checked:S,required:o,disabled:u,form:h,style:{transform:"translateX(-100%)"}})]})});i9.displayName=BE;var a9="SwitchThumb",o9=z.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,i=pme(a9,r);return Le.jsx(qr.span,{"data-state":u9(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})});o9.displayName=a9;var vme="SwitchBubbleInput",s9=z.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...i},a)=>{const o=z.useRef(null),u=Dn(o,a),c=t3(r),f=JC(t);return z.useEffect(()=>{const h=o.current;if(!h)return;const p=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==r&&m){const _=new Event("click",{bubbles:n});m.call(h,r),h.dispatchEvent(_)}},[c,r,n]),Le.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:u,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});s9.displayName=vme;function u9(e){return e?"checked":"unchecked"}var l9=i9,mme=o9;const _me=z.forwardRef(({className:e,...t},r)=>Le.jsx(l9,{className:Jr("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:Le.jsx(mme,{className:Jr("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));_me.displayName=l9.displayName;const c9=z.forwardRef(({className:e,...t},r)=>Le.jsx("textarea",{className:Jr("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));c9.displayName="Textarea";var gme="Separator",Y6="horizontal",yme=["horizontal","vertical"],f9=z.forwardRef((e,t)=>{const{decorative:r,orientation:n=Y6,...i}=e,a=Eme(n)?n:Y6,o=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return Le.jsx(qr.div,{"data-orientation":a,...o,...i,ref:t})});f9.displayName=gme;function Eme(e){return yme.includes(e)}var d9=f9;const bme=z.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},i)=>Le.jsx(d9,{ref:i,decorative:r,orientation:t,className:Jr("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));bme.displayName=d9.displayName;var Z6={exports:{}},om={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K6;function Tme(){if(K6)return om;K6=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var u in i)u!=="key"&&(a[u]=i[u])}else a=i;return i=a.ref,{$$typeof:e,type:n,key:o,ref:i!==void 0?i:null,props:a}}return om.Fragment=t,om.jsx=r,om.jsxs=r,om}var Q6;function Sme(){return Q6||(Q6=1,Z6.exports=Tme()),Z6.exports}var An=Sme();function Ame({events:e,className:t,enableCluster:r=!0,clusterRadius:n=50,minClusterSize:i=2}){const a=z.useRef(null),o=z.useRef(null),u=z.useRef(null),c=z.useRef(null),[f,h]=z.useState(!1),[p,m]=z.useState(!0),_=z.useMemo(()=>{const S=e.filter(R=>R.location&&typeof R.location.lng=="number"&&typeof R.location.lat=="number"&&!isNaN(R.location.lng)&&!isNaN(R.location.lat)&&Math.abs(R.location.lng)<=180&&Math.abs(R.location.lat)<=90),A=S.map(R=>({lng:R.location.lng,lat:R.location.lat,title:R.title,sentiment:R.sentiment,hotness:R.hotness||1,address:R.address,timestamp:R.timestamp,score:R.score||0,source:R.source,content:R.content,tags:R.tags||[]}));return{validEvents:S,pointData:A}},[e]),y=z.useCallback(S=>{switch(S){case"positive":return"#52c41a";case"negative":return"#ff4d4f";case"neutral":return"#1890ff";default:return"#d9d9d9"}},[]),E=z.useCallback(S=>{const A=new Map([["positive",""],["negative",""],["neutral",""]]),R=String(S.sentiment||""),M=A.get(R)||"",P=y(S.sentiment);return`
      <div style="padding: 12px; min-width: 280px; max-width: 320px; font-family: Arial, sans-serif;">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
          <h3 style="font-weight: 600; font-size: 14px; color: #333; margin: 0; max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${S.title||""}</h3>
          <span style="padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 500; background-color: ${P}20; color: ${P};">
            ${M}
          </span>
        </div>
        <p style="font-size: 12px; color: #666; margin: 0 0 8px 0; line-height: 1.4; max-height: 60px; overflow: hidden;">${S.content||""}</p>
        <div style="display: flex; align-items: center; justify-content: space-between; font-size: 12px; color: #999; margin-bottom: 4px;">
          <span> ${S.source||""}</span>
          <span> ${S.address||""}</span>
        </div>
        <div style="display: flex; align-items: center; justify-content: space-between; font-size: 12px; color: #999;">
          <span> : ${S.hotness||0}</span>
          <span> ${S.timestamp||""}</span>
        </div>
        ${Array.isArray(S.tags)&&S.tags.length>0?`
          <div style="margin-top: 8px;">
            <div style="display: flex; flex-wrap: wrap; gap: 4px;">
              ${S.tags.map(I=>`<span style="padding: 2px 6px; background-color: #e3f2fd; color: #1976d2; font-size: 12px; border-radius: 4px;">${String(I)}</span>`).join("")}
            </div>
          </div>
        `:""}
      </div>
    `},[y]),b=()=>{try{const S=new hfe({id:a.current,map:new iue({style:"light",center:[104,35.5],zoom:4,token:"d2f3394e4d2807b003a50a8a6f4bb6bb"})});S.on("loaded",()=>{h(!0),m(!1)});const A=new g7({closeButton:!0,closeOnClick:!1,className:"custom-popup"});u.current=A,o.current=S}catch(S){console.error("L7:",S)}};return z.useEffect(()=>{if(a.current)return b(),()=>{c.current&&o.current&&(o.current.removePopup(c.current),c.current=null),u.current&&o.current&&(o.current.removePopup(u.current),u.current=null),o.current&&(o.current.destroy(),o.current=null)}},[]),z.useEffect(()=>{if(!o.current||!f||!_.validEvents.length)return;const S=o.current;if(!S)return;const{validEvents:A,pointData:R}=_;S.getLayers().filter(w=>w.name==="event-points"||w.name==="cluster-text").forEach(w=>{S.removeLayer(w)});const M=new Ym({name:"event-points"});r&&A.length>=i?M.source(R,{parser:{type:"json",x:"lng",y:"lat"},cluster:!0,clusterOptions:{field:"point_count",method:"sum",radius:n,minZoom:0,maxZoom:20}}).size("point_count",w=>w===1?14:w<=3?20:w<=6?28:w<=10?36:44).color("point_count",w=>w===1?y("neutral"):w<=3?"#52c41a":w<=6?"#faad14":w<=10?"#fa8c16":"#f5222d").shape("circle").style({opacity:.9,strokeWidth:2,stroke:"#ffffff"}).select({color:"#1890ff"}).active({color:"#0050b3"}):M.source(R,{parser:{type:"json",x:"lng",y:"lat"}}).size("hotness",w=>Math.max(10,Math.min(30,w*2.5+5))).color("sentiment",w=>y(w)).shape("circle").style({opacity:.8,strokeWidth:2,stroke:"#ffffff"}).select({color:"#1890ff"}).active({color:"#0050b3"}),M.on("mousemove",w=>{a.current&&(a.current.style.cursor="pointer")}),M.on("mouseleave",()=>{a.current&&(a.current.style.cursor="grab")}),S.addLayer(M),c.current&&S.removePopup(c.current);const P=r&&A.length>=i?[{field:"point_count",formatField:w=>(w?.point_count||0)===1?"":"",formatValue:(w,U)=>w===1?U?.title||"":`${w} `},{field:"point_count",formatField:w=>(w?.point_count||0)===1?"":"",formatValue:(w,U)=>{if(w===1){const re=U?.sentiment;return new Map([["positive",""],["negative",""],["neutral",""]]).get(re)||""}return w<=3?"":w<=6?"":w<=10?"":""}},{field:"point_count",formatField:()=>"",formatValue:w=>{const U=A.length;return`${(w/U*100).toFixed(1)}%`}},{field:"point_count",formatField:()=>"",formatValue:w=>w===1?"":`${w}`}]:[{field:"title",formatField:()=>""},{field:"sentiment",formatField:()=>"",formatValue:w=>new Map([["positive",""],["negative",""],["neutral",""]]).get(w)||""},{field:"content",formatField:()=>"",formatValue:w=>w&&w.length>50?w.substring(0,50)+"...":w||""},{field:"source",formatField:()=>""},{field:"address",formatField:()=>""},{field:"hotness",formatField:()=>""},{field:"timestamp",formatField:()=>""}],I=new Ase({items:[{layer:M,fields:P}]});if(c.current=I,S.addPopup(I),r&&A.length>=i&&o.current){const w=new Ym({name:"cluster-text"}).source(R,{parser:{type:"json",x:"lng",y:"lat"},cluster:!0,clusterOptions:{field:"point_count",method:"sum",radius:n,minZoom:0,maxZoom:20}}).shape("point_count","text").size(14).color("#ffffff").style({opacity:1,strokeWidth:1,stroke:"#333333",fontFamily:"Arial, sans-serif",fontWeight:"bold"});o.current.addLayer(w)}return()=>{}},[_,f,r,n,i,y,E]),An.jsxs("div",{className:Jr("relative w-full h-full bg-gradient-to-br from-blue-50 to-gray-100",t),children:[An.jsx("div",{ref:a,className:"w-full h-full cursor-grab active:cursor-grabbing"}),p&&An.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gradient-to-br from-blue-50/90 to-gray-100/90 backdrop-blur-sm",children:[An.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full mb-3"}),An.jsx("div",{className:"text-sm text-gray-700 font-medium",children:"..."}),An.jsx("div",{className:"text-xs text-gray-500 mt-1",children:""})]}),f&&_.validEvents.length>0&&An.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur-sm rounded-lg px-3 py-2 shadow-lg",children:An.jsxs("div",{className:"text-xs text-gray-600",children:[":"," ",An.jsx("span",{className:"font-semibold text-blue-600",children:_.validEvents.length}),r&&An.jsx("span",{className:"ml-2",children:""})]})}),f&&!r&&An.jsxs("div",{className:"absolute bottom-4 left-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-lg",children:[An.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:""}),An.jsxs("div",{className:"space-y-1",children:[An.jsxs("div",{className:"flex items-center text-xs",children:[An.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 mr-2"}),An.jsx("span",{children:""})]}),An.jsxs("div",{className:"flex items-center text-xs",children:[An.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 mr-2"}),An.jsx("span",{children:""})]}),An.jsxs("div",{className:"flex items-center text-xs",children:[An.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mr-2"}),An.jsx("span",{children:""})]})]})]}),f&&_.validEvents.length===0&&An.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:An.jsxs("div",{className:"text-center text-gray-500",children:[An.jsx("div",{className:"text-lg mb-2",children:""}),An.jsx("div",{className:"text-sm",children:""})]})})]})}const xme=[{id:"1",title:"",content:"",sentiment:"positive",score:.85,location:{lat:39.9042,lng:116.4074},address:"",source:"",timestamp:"2024-01-24 14:30",hotness:8,tags:["","",""]},{id:"2",title:"",content:"",sentiment:"negative",score:-.72,location:{lat:31.2304,lng:121.4737},address:"",source:"",timestamp:"2024-01-24 13:45",hotness:6,tags:["","",""]},{id:"3",title:"",content:"4.0",sentiment:"neutral",score:.15,location:{lat:22.3193,lng:114.1694},address:"",source:"",timestamp:"2024-01-24 12:00",hotness:5,tags:["","","4.0"]},{id:"4",title:"",content:"",sentiment:"positive",score:.78,location:{lat:23.1291,lng:113.2644},address:"",source:"",timestamp:"2024-01-24 11:30",hotness:7,tags:["","",""]},{id:"5",title:"",content:"",sentiment:"negative",score:-.45,location:{lat:30.2741,lng:120.1551},address:"",source:"",timestamp:"2024-01-24 10:15",hotness:4,tags:["","",""]},{id:"6",title:"",content:"",sentiment:"positive",score:.62,location:{lat:30.5728,lng:104.0668},address:"",source:"",timestamp:"2024-01-24 09:45",hotness:6,tags:["","",""]},{id:"7",title:"",content:"",sentiment:"neutral",score:.25,location:{lat:34.3416,lng:108.9398},address:"",source:"",timestamp:"2024-01-24 08:30",hotness:3,tags:["","",""]},{id:"8",title:"",content:"2024",sentiment:"positive",score:.55,location:{lat:30.5928,lng:114.3055},address:"",source:"",timestamp:"2024-01-24 07:20",hotness:5,tags:["","",""]},{id:"9",title:"",content:"",sentiment:"positive",score:.68,location:{lat:32.0603,lng:118.7969},address:"",source:"",timestamp:"2024-01-24 16:45",hotness:7,tags:["","",""]},{id:"10",title:"",content:"2024",sentiment:"positive",score:.72,location:{lat:36.0986,lng:120.3719},address:"",source:"",timestamp:"2024-01-24 15:30",hotness:8,tags:["","",""]},{id:"11",title:"",content:"",sentiment:"negative",score:-.85,location:{lat:29.563,lng:106.5516},address:"",source:"",timestamp:"2024-01-24 18:20",hotness:9,tags:["","",""]},{id:"12",title:"",content:"",sentiment:"positive",score:.76,location:{lat:39.1042,lng:117.2},address:"",source:"",timestamp:"2024-01-24 14:10",hotness:6,tags:["","",""]},{id:"13",title:"",content:"",sentiment:"neutral",score:-.15,location:{lat:41.8057,lng:123.4315},address:"",source:"",timestamp:"2024-01-24 10:30",hotness:4,tags:["","",""]},{id:"14",title:"",content:"",sentiment:"negative",score:-.58,location:{lat:24.4798,lng:118.0819},address:"",source:"",timestamp:"2024-01-24 12:45",hotness:6,tags:["","",""]},{id:"15",title:"",content:"",sentiment:"positive",score:.64,location:{lat:38.914,lng:121.6147},address:"",source:"",timestamp:"2024-01-24 09:15",hotness:5,tags:["","",""]},{id:"16",title:"",content:"",sentiment:"neutral",score:.08,location:{lat:28.2282,lng:112.9388},address:"",source:"",timestamp:"2024-01-24 19:00",hotness:3,tags:["","",""]},{id:"17",title:"",content:"",sentiment:"positive",score:.58,location:{lat:45.8038,lng:126.5349},address:"",source:"",timestamp:"2024-01-24 11:00",hotness:7,tags:["","",""]},{id:"18",title:"",content:"6",sentiment:"negative",score:-.42,location:{lat:26.0745,lng:119.2965},address:"",source:"",timestamp:"2024-01-24 13:20",hotness:4,tags:["","",""]},{id:"19",title:"",content:"",sentiment:"neutral",score:.22,location:{lat:25.0389,lng:102.7183},address:"",source:"",timestamp:"2024-01-24 08:45",hotness:5,tags:["","",""]},{id:"20",title:"",content:"",sentiment:"positive",score:.71,location:{lat:37.8706,lng:112.5489},address:"",source:"",timestamp:"2024-01-24 16:30",hotness:6,tags:["","",""]},{id:"21",title:"",content:"",sentiment:"positive",score:.69,location:{lat:38.0428,lng:114.5149},address:"",source:"",timestamp:"2024-01-24 07:45",hotness:5,tags:["","",""]},{id:"22",title:"",content:"",sentiment:"positive",score:.53,location:{lat:36.0611,lng:103.8343},address:"",source:"",timestamp:"2024-01-24 14:50",hotness:4,tags:["","",""]},{id:"23",title:"",content:"",sentiment:"negative",score:-.38,location:{lat:38.4872,lng:106.2309},address:"",source:"",timestamp:"2024-01-24 15:10",hotness:3,tags:["","",""]},{id:"24",title:"",content:"2024",sentiment:"positive",score:.66,location:{lat:40.8414,lng:111.7519},address:"",source:"",timestamp:"2024-01-24 17:25",hotness:6,tags:["","",""]},{id:"25",title:"",content:"",sentiment:"positive",score:.74,location:{lat:29.652,lng:91.1721},address:"",source:"",timestamp:"2024-01-24 12:30",hotness:7,tags:["","",""]},{id:"26",title:"",content:"",sentiment:"positive",score:.61,location:{lat:43.8256,lng:87.6168},address:"",source:"",timestamp:"2024-01-24 20:30",hotness:6,tags:["","",""]},{id:"27",title:"",content:"",sentiment:"positive",score:.78,location:{lat:20.0444,lng:110.1989},address:"",source:"",timestamp:"2024-01-24 18:45",hotness:8,tags:["","",""]},{id:"28",title:"",content:"",sentiment:"positive",score:.65,location:{lat:31.8206,lng:117.2272},address:"",source:"",timestamp:"2024-01-24 09:20",hotness:5,tags:["","",""]},{id:"29",title:"4",content:"4",sentiment:"negative",score:-.52,location:{lat:28.6844,lng:115.8579},address:"",source:"",timestamp:"2024-01-24 11:40",hotness:4,tags:["","",""]},{id:"30",title:"",content:"2024",sentiment:"positive",score:.67,location:{lat:26.647,lng:106.6302},address:"",source:"",timestamp:"2024-01-24 14:15",hotness:6,tags:["","",""]},{id:"31",title:"",content:"",sentiment:"neutral",score:-.08,location:{lat:36.6512,lng:117.1201},address:"",source:"",timestamp:"2024-01-24 08:00",hotness:3,tags:["","",""]},{id:"32",title:"",content:"35%",sentiment:"positive",score:.72,location:{lat:34.7466,lng:113.6254},address:"",source:"",timestamp:"2024-01-24 16:20",hotness:7,tags:["","",""]},{id:"33",title:"",content:"",sentiment:"positive",score:.59,location:{lat:22.817,lng:108.3669},address:"",source:"",timestamp:"2024-01-24 13:50",hotness:5,tags:["","",""]},{id:"34",title:"",content:"",sentiment:"negative",score:-.63,location:{lat:40.6574,lng:109.8403},address:"",source:"",timestamp:"2024-01-24 15:30",hotness:6,tags:["","",""]},{id:"35",title:"",content:"",sentiment:"positive",score:.56,location:{lat:28.0181,lng:120.6528},address:"",source:"",timestamp:"2024-01-24 10:25",hotness:4,tags:["","",""]},{id:"36",title:"",content:"",sentiment:"positive",score:.7,location:{lat:23.0489,lng:113.7447},address:"",source:"",timestamp:"2024-01-24 17:10",hotness:6,tags:["","",""]},{id:"37",title:"",content:"",sentiment:"positive",score:.75,location:{lat:31.4912,lng:120.3114},address:"",source:"",timestamp:"2024-01-24 12:00",hotness:7,tags:["","",""]},{id:"38",title:"",content:"",sentiment:"negative",score:-.35,location:{lat:23.035,lng:113.1244},address:"",source:"",timestamp:"2024-01-24 09:45",hotness:3,tags:["","",""]},{id:"39",title:"",content:"128%",sentiment:"positive",score:.68,location:{lat:22.2711,lng:113.5767},address:"",source:"",timestamp:"2024-01-24 14:40",hotness:5,tags:["","",""]},{id:"40",title:"",content:"",sentiment:"positive",score:.63,location:{lat:22.5211,lng:113.3924},address:"",source:"",timestamp:"2024-01-24 11:15",hotness:4,tags:["","",""]},{id:"41",title:"",content:"",sentiment:"positive",score:.71,location:{lat:31.7976,lng:119.9462},address:"",source:"",timestamp:"2024-01-24 16:50",hotness:6,tags:["","",""]},{id:"42",title:"",content:"",sentiment:"positive",score:.64,location:{lat:30.7467,lng:120.755},address:"",source:"",timestamp:"2024-01-24 13:25",hotness:7,tags:["","",""]},{id:"43",title:"",content:"",sentiment:"positive",score:.58,location:{lat:30.0023,lng:120.581},address:"",source:"",timestamp:"2024-01-24 08:30",hotness:4,tags:["","",""]},{id:"44",title:"",content:"",sentiment:"positive",score:.73,location:{lat:29.3071,lng:120.0758},address:"",source:"",timestamp:"2024-01-24 19:20",hotness:8,tags:["","",""]},{id:"45",title:"",content:"",sentiment:"positive",score:.66,location:{lat:28.6129,lng:121.4204},address:"",source:"",timestamp:"2024-01-24 15:00",hotness:5,tags:["","",""]}];function Rme(){return ze.jsx("div",{className:"dashboard-layout",children:ze.jsx("div",{className:"h-[calc(100vh)] relative",children:ze.jsx(Ame,{events:xme,enableCluster:!0,clusterRadius:80,minClusterSize:2})})})}/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cme=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),h9=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ome={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mme=z.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:o,...u},c)=>z.createElement("svg",{ref:c,...Ome,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:h9("lucide",i),...u},[...o.map(([f,h])=>z.createElement(f,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=(e,t)=>{const r=z.forwardRef(({className:n,...i},a)=>z.createElement(Mme,{ref:a,iconNode:t,className:h9(`lucide-${Cme(e)}`,n),...i}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wme=s3("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nme=s3("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ime=s3("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),J6=e=>{let t;const r=new Set,n=(f,h)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const m=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),r.forEach(_=>_(t,m))}},i=()=>t,u={setState:n,getState:i,getInitialState:()=>c,subscribe:f=>(r.add(f),()=>r.delete(f))},c=t=e(n,i,u);return u},Pme=(e=>e?J6(e):J6),Dme=e=>e;function Lme(e,t=Dme){const r=un.useSyncExternalStore(e.subscribe,un.useCallback(()=>t(e.getState()),[e,t]),un.useCallback(()=>t(e.getInitialState()),[e,t]));return un.useDebugValue(r),r}const eB=e=>{const t=Pme(e),r=n=>Lme(t,n);return Object.assign(r,t),r},Bme=(e=>e?eB(e):eB),p9=Bme(e=>({items:[],isLoading:!1,error:null,searchTitle:"",searchIntensity:null,isCreateDialogOpen:!1,isEditDialogOpen:!1,editingItem:null,setItems:t=>e({items:t}),setLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),setSearchTitle:t=>e({searchTitle:t}),setSearchIntensity:t=>e({searchIntensity:t}),clearSearch:()=>e({searchTitle:"",searchIntensity:null}),openCreateDialog:()=>e({isCreateDialogOpen:!0}),closeCreateDialog:()=>e({isCreateDialogOpen:!1}),openEditDialog:t=>e({isEditDialogOpen:!0,editingItem:t}),closeEditDialog:()=>e({isEditDialogOpen:!1,editingItem:null})})),Fme={bodySerializer:e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString():r)},Ume=({onRequest:e,onSseError:t,onSseEvent:r,responseTransformer:n,responseValidator:i,sseDefaultRetryDelay:a,sseMaxRetryAttempts:o,sseMaxRetryDelay:u,sseSleepFn:c,url:f,...h})=>{let p;const m=c??(E=>new Promise(b=>setTimeout(b,E)));return{stream:async function*(){let E=a??3e3,b=0;const S=h.signal??new AbortController().signal;for(;!S.aborted;){b++;const A=h.headers instanceof Headers?h.headers:new Headers(h.headers);p!==void 0&&A.set("Last-Event-ID",p);try{const R={redirect:"follow",...h,body:h.serializedBody,headers:A,signal:S};let M=new Request(f,R);e&&(M=await e(f,R));const I=await(h.fetch??globalThis.fetch)(M);if(!I.ok)throw new Error(`SSE failed: ${I.status} ${I.statusText}`);if(!I.body)throw new Error("No body in SSE response");const w=I.body.pipeThrough(new TextDecoderStream).getReader();let U="";const re=()=>{try{w.cancel()}catch{}};S.addEventListener("abort",re);try{for(;;){const{done:K,value:H}=await w.read();if(K)break;U+=H;const x=U.split(`

`);U=x.pop()??"";for(const N of x){const j=N.split(`
`),fe=[];let O;for(const ee of j)if(ee.startsWith("data:"))fe.push(ee.replace(/^data:\s*/,""));else if(ee.startsWith("event:"))O=ee.replace(/^event:\s*/,"");else if(ee.startsWith("id:"))p=ee.replace(/^id:\s*/,"");else if(ee.startsWith("retry:")){const oe=Number.parseInt(ee.replace(/^retry:\s*/,""),10);Number.isNaN(oe)||(E=oe)}let k,V=!1;if(fe.length){const ee=fe.join(`
`);try{k=JSON.parse(ee),V=!0}catch{k=ee}}V&&(i&&await i(k),n&&(k=await n(k))),r?.({data:k,event:O,id:p,retry:E}),fe.length&&(yield k)}}}finally{S.removeEventListener("abort",re),w.releaseLock()}break}catch(R){if(t?.(R),o!==void 0&&b>=o)break;const M=Math.min(E*2**(b-1),u??3e4);await m(M)}}}()}},kme=e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},zme=e=>{switch(e){case"form":return",";case"pipeDelimited":return"|";case"spaceDelimited":return"%20";default:return","}},jme=e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},v9=({allowReserved:e,explode:t,name:r,style:n,value:i})=>{if(!t){const u=(e?i:i.map(c=>encodeURIComponent(c))).join(zme(n));switch(n){case"label":return`.${u}`;case"matrix":return`;${r}=${u}`;case"simple":return u;default:return`${r}=${u}`}}const a=kme(n),o=i.map(u=>n==="label"||n==="simple"?e?u:encodeURIComponent(u):FE({allowReserved:e,name:r,value:u})).join(a);return n==="label"||n==="matrix"?a+o:o},FE=({allowReserved:e,name:t,value:r})=>{if(r==null)return"";if(typeof r=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${t}=${e?r:encodeURIComponent(r)}`},m9=({allowReserved:e,explode:t,name:r,style:n,value:i,valueOnly:a})=>{if(i instanceof Date)return a?i.toISOString():`${r}=${i.toISOString()}`;if(n!=="deepObject"&&!t){let c=[];Object.entries(i).forEach(([h,p])=>{c=[...c,h,e?p:encodeURIComponent(p)]});const f=c.join(",");switch(n){case"form":return`${r}=${f}`;case"label":return`.${f}`;case"matrix":return`;${r}=${f}`;default:return f}}const o=jme(n),u=Object.entries(i).map(([c,f])=>FE({allowReserved:e,name:n==="deepObject"?`${r}[${c}]`:c,value:f})).join(o);return n==="label"||n==="matrix"?o+u:u},Vme=/\{[^{}]+\}/g,Hme=({path:e,url:t})=>{let r=t;const n=t.match(Vme);if(n)for(const i of n){let a=!1,o=i.substring(1,i.length-1),u="simple";o.endsWith("*")&&(a=!0,o=o.substring(0,o.length-1)),o.startsWith(".")?(o=o.substring(1),u="label"):o.startsWith(";")&&(o=o.substring(1),u="matrix");const c=e[o];if(c==null)continue;if(Array.isArray(c)){r=r.replace(i,v9({explode:a,name:o,style:u,value:c}));continue}if(typeof c=="object"){r=r.replace(i,m9({explode:a,name:o,style:u,value:c,valueOnly:!0}));continue}if(u==="matrix"){r=r.replace(i,`;${FE({name:o,value:c})}`);continue}const f=encodeURIComponent(u==="label"?`.${c}`:c);r=r.replace(i,f)}return r},Xme=({baseUrl:e,path:t,query:r,querySerializer:n,url:i})=>{const a=i.startsWith("/")?i:`/${i}`;let o=(e??"")+a;t&&(o=Hme({path:t,url:o}));let u=r?n(r):"";return u.startsWith("?")&&(u=u.substring(1)),u&&(o+=`?${u}`),o};function Gme(e){const t=e.body!==void 0;if(t&&e.bodySerializer)return"serializedBody"in e?e.serializedBody!==void 0&&e.serializedBody!==""?e.serializedBody:null:e.body!==""?e.body:null;if(t)return e.body}const qme=async(e,t)=>{const r=typeof t=="function"?await t(e):t;if(r)return e.scheme==="bearer"?`Bearer ${r}`:e.scheme==="basic"?`Basic ${btoa(r)}`:r},_9=({allowReserved:e,array:t,object:r}={})=>i=>{const a=[];if(i&&typeof i=="object")for(const o in i){const u=i[o];if(u!=null)if(Array.isArray(u)){const c=v9({allowReserved:e,explode:!0,name:o,style:"form",value:u,...t});c&&a.push(c)}else if(typeof u=="object"){const c=m9({allowReserved:e,explode:!0,name:o,style:"deepObject",value:u,...r});c&&a.push(c)}else{const c=FE({allowReserved:e,name:o,value:u});c&&a.push(c)}}return a.join("&")},Wme=e=>{if(!e)return"stream";const t=e.split(";")[0]?.trim();if(t){if(t.startsWith("application/json")||t.endsWith("+json"))return"json";if(t==="multipart/form-data")return"formData";if(["application/","audio/","image/","video/"].some(r=>t.startsWith(r)))return"blob";if(t.startsWith("text/"))return"text"}},$me=(e,t)=>t?!!(e.headers.has(t)||e.query?.[t]||e.headers.get("Cookie")?.includes(`${t}=`)):!1,Yme=async({security:e,...t})=>{for(const r of e){if($me(t,r.name))continue;const n=await qme(r,t.auth);if(!n)continue;const i=r.name??"Authorization";switch(r.in){case"query":t.query||(t.query={}),t.query[i]=n;break;case"cookie":t.headers.append("Cookie",`${i}=${n}`);break;case"header":default:t.headers.set(i,n);break}}},tB=e=>Xme({baseUrl:e.baseUrl,path:e.path,query:e.query,querySerializer:typeof e.querySerializer=="function"?e.querySerializer:_9(e.querySerializer),url:e.url}),rB=(e,t)=>{const r={...e,...t};return r.baseUrl?.endsWith("/")&&(r.baseUrl=r.baseUrl.substring(0,r.baseUrl.length-1)),r.headers=g9(e.headers,t.headers),r},Zme=e=>{const t=[];return e.forEach((r,n)=>{t.push([n,r])}),t},g9=(...e)=>{const t=new Headers;for(const r of e){if(!r)continue;const n=r instanceof Headers?Zme(r):Object.entries(r);for(const[i,a]of n)if(a===null)t.delete(i);else if(Array.isArray(a))for(const o of a)t.append(i,o);else a!==void 0&&t.set(i,typeof a=="object"?JSON.stringify(a):a)}return t};class Yx{constructor(){this.fns=[]}clear(){this.fns=[]}eject(t){const r=this.getInterceptorIndex(t);this.fns[r]&&(this.fns[r]=null)}exists(t){const r=this.getInterceptorIndex(t);return!!this.fns[r]}getInterceptorIndex(t){return typeof t=="number"?this.fns[t]?t:-1:this.fns.indexOf(t)}update(t,r){const n=this.getInterceptorIndex(t);return this.fns[n]?(this.fns[n]=r,t):!1}use(t){return this.fns.push(t),this.fns.length-1}}const Kme=()=>({error:new Yx,request:new Yx,response:new Yx}),Qme=_9({allowReserved:!1,array:{explode:!0,style:"form"},object:{explode:!0,style:"deepObject"}}),Jme={"Content-Type":"application/json"},y9=(e={})=>({...Fme,headers:Jme,parseAs:"auto",querySerializer:Qme,...e}),e_e=(e={})=>{let t=rB(y9(),e);const r=()=>({...t}),n=f=>(t=rB(t,f),r()),i=Kme(),a=async f=>{const h={...t,...f,fetch:f.fetch??t.fetch??globalThis.fetch,headers:g9(t.headers,f.headers),serializedBody:void 0};h.security&&await Yme({...h,security:h.security}),h.requestValidator&&await h.requestValidator(h),h.body!==void 0&&h.bodySerializer&&(h.serializedBody=h.bodySerializer(h.body)),(h.body===void 0||h.serializedBody==="")&&h.headers.delete("Content-Type");const p=tB(h);return{opts:h,url:p}},o=async f=>{const{opts:h,url:p}=await a(f),m={redirect:"follow",...h,body:Gme(h)};let _=new Request(p,m);for(const P of i.request.fns)P&&(_=await P(_,h));const y=h.fetch;let E=await y(_);for(const P of i.response.fns)P&&(E=await P(E,_,h));const b={request:_,response:E};if(E.ok){const P=(h.parseAs==="auto"?Wme(E.headers.get("Content-Type")):h.parseAs)??"json";if(E.status===204||E.headers.get("Content-Length")==="0"){let w;switch(P){case"arrayBuffer":case"blob":case"text":w=await E[P]();break;case"formData":w=new FormData;break;case"stream":w=E.body;break;case"json":default:w={};break}return h.responseStyle==="data"?w:{data:w,...b}}let I;switch(P){case"arrayBuffer":case"blob":case"formData":case"json":case"text":I=await E[P]();break;case"stream":return h.responseStyle==="data"?E.body:{data:E.body,...b}}return P==="json"&&(h.responseValidator&&await h.responseValidator(I),h.responseTransformer&&(I=await h.responseTransformer(I))),h.responseStyle==="data"?I:{data:I,...b}}const S=await E.text();let A;try{A=JSON.parse(S)}catch{}const R=A??S;let M=R;for(const P of i.error.fns)P&&(M=await P(R,E,_,h));if(M=M||{},h.throwOnError)throw M;return h.responseStyle==="data"?void 0:{error:M,...b}},u=f=>h=>o({...h,method:f}),c=f=>async h=>{const{opts:p,url:m}=await a(h);return Ume({...p,body:p.body,headers:p.headers,method:f,onRequest:async(_,y)=>{let E=new Request(_,y);for(const b of i.request.fns)b&&(E=await b(E,p));return E},url:m})};return{buildUrl:tB,connect:u("CONNECT"),delete:u("DELETE"),get:u("GET"),getConfig:r,head:u("HEAD"),interceptors:i,options:u("OPTIONS"),patch:u("PATCH"),post:u("POST"),put:u("PUT"),request:o,setConfig:n,sse:{connect:c("CONNECT"),delete:c("DELETE"),get:c("GET"),head:c("HEAD"),options:c("OPTIONS"),patch:c("PATCH"),post:c("POST"),put:c("PUT"),trace:c("TRACE")},trace:u("TRACE")}},_p=e_e(y9()),t_e=e=>(e?.client??_p).get({url:"/api/sentiment-intensity",...e}),r_e=e=>(e.client??_p).post({url:"/api/sentiment-intensity",...e,headers:{"Content-Type":"application/json",...e.headers}}),n_e=e=>(e?.client??_p).get({url:"/api/sentiment-intensity/search",...e}),i_e=e=>(e.client??_p).delete({url:"/api/sentiment-intensity/{id}",...e}),a_e=e=>(e.client??_p).patch({url:"/api/sentiment-intensity/{id}",...e,headers:{"Content-Type":"application/json",...e.headers}});_p.setConfig({baseUrl:"http://localhost:3000"});const Xf={all:["sentiment-intensity"],lists:()=>[...Xf.all,"list"],search:e=>[...Xf.all,"search",e]},o_e=()=>qB({queryKey:Xf.lists(),queryFn:async()=>(await t_e()).data}),s_e=e=>qB({queryKey:Xf.search(e),queryFn:async()=>(await n_e({query:{...e.title&&{title:e.title},...e.intensity!==void 0&&{intensity:e.intensity}}})).data,enabled:!!(e.title||e.intensity!==void 0)}),u_e=()=>{const e=i_();return C2({mutationFn:async t=>(await r_e({body:{title:t.title,intensity:t.intensity,...t.description&&{description:t.description}}})).data,onSuccess:()=>{e.invalidateQueries({queryKey:Xf.lists()})}})},l_e=()=>{const e=i_();return C2({mutationFn:async({id:t,data:r})=>(await a_e({path:{id:t.toString()},body:r})).data,onSuccess:()=>{e.invalidateQueries({queryKey:Xf.lists()})}})},c_e=()=>{const e=i_();return C2({mutationFn:async t=>{await i_e({path:{id:t.toString()}})},onSuccess:()=>{e.invalidateQueries({queryKey:Xf.lists()})}})};var y_=e=>e.type==="checkbox",Sf=e=>e instanceof Date,va=e=>e==null;const E9=e=>typeof e=="object";var vi=e=>!va(e)&&!Array.isArray(e)&&E9(e)&&!Sf(e),f_e=e=>vi(e)&&e.target?y_(e.target)?e.target.checked:e.target.value:e,d_e=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,h_e=(e,t)=>e.has(d_e(t)),p_e=e=>{const t=e.constructor&&e.constructor.prototype;return vi(t)&&t.hasOwnProperty("isPrototypeOf")},u3=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Di(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(u3&&(e instanceof Blob||n))&&(r||vi(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!p_e(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=Di(e[i]));else return e;return t}var UE=e=>/^\w*$/.test(e),di=e=>e===void 0,l3=e=>Array.isArray(e)?e.filter(Boolean):[],c3=e=>l3(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Qt=(e,t,r)=>{if(!t||!vi(e))return r;const n=(UE(t)?[t]:c3(t)).reduce((i,a)=>va(i)?i:i[a],e);return di(n)||n===e?di(e[t])?r:e[t]:n},Ds=e=>typeof e=="boolean",gn=(e,t,r)=>{let n=-1;const i=UE(t)?[t]:c3(t),a=i.length,o=a-1;for(;++n<a;){const u=i[n];let c=r;if(n!==o){const f=e[u];c=vi(f)||Array.isArray(f)?f:isNaN(+i[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=c,e=e[u]}};const nB={BLUR:"blur",FOCUS_OUT:"focusout"},Jo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Nu={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},v_e=un.createContext(null);v_e.displayName="HookFormContext";var m_e=(e,t,r,n=!0)=>{const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const o=a;return t._proxyFormState[o]!==Jo.all&&(t._proxyFormState[o]=!n||Jo.all),e[o]}});return i};const __e=typeof window<"u"?un.useLayoutEffect:un.useEffect;var $a=e=>typeof e=="string",g_e=(e,t,r,n,i)=>$a(e)?(n&&t.watch.add(e),Qt(r,e,i)):Array.isArray(e)?e.map(a=>(n&&t.watch.add(a),Qt(r,a))):(n&&(t.watchAll=!0),r),v2=e=>va(e)||!E9(e);function ec(e,t,r=new WeakSet){if(v2(e)||v2(t))return e===t;if(Sf(e)&&Sf(t))return e.getTime()===t.getTime();const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const a of n){const o=e[a];if(!i.includes(a))return!1;if(a!=="ref"){const u=t[a];if(Sf(o)&&Sf(u)||vi(o)&&vi(u)||Array.isArray(o)&&Array.isArray(u)?!ec(o,u,r):o!==u)return!1}}return!0}var b9=(e,t,r,n,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:i||!0}}:{},Pm=e=>Array.isArray(e)?e:[e],iB=()=>{let e=[];return{get observers(){return e},next:i=>{for(const a of e)a.next&&a.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(a=>a!==i)}}),unsubscribe:()=>{e=[]}}};function T9(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const i=e[n],a=t[n];if(i&&vi(i)&&a){const o=T9(i,a);vi(o)&&(r[n]=o)}else e[n]&&(r[n]=a)}return r}var Ra=e=>vi(e)&&!Object.keys(e).length,f3=e=>e.type==="file",es=e=>typeof e=="function",Gy=e=>{if(!u3)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},S9=e=>e.type==="select-multiple",d3=e=>e.type==="radio",y_e=e=>d3(e)||y_(e),Zx=e=>Gy(e)&&e.isConnected;function E_e(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=di(e)?n++:e[t[n++]];return e}function b_e(e){for(const t in e)if(e.hasOwnProperty(t)&&!di(e[t]))return!1;return!0}function li(e,t){const r=Array.isArray(t)?t:UE(t)?[t]:c3(t),n=r.length===1?e:E_e(e,r),i=r.length-1,a=r[i];return n&&delete n[a],i!==0&&(vi(n)&&Ra(n)||Array.isArray(n)&&b_e(n))&&li(e,r.slice(0,-1)),e}var T_e=e=>{for(const t in e)if(es(e[t]))return!0;return!1};function A9(e){return Array.isArray(e)||vi(e)&&!T_e(e)}function m2(e,t={}){for(const r in e)A9(e[r])?(t[r]=Array.isArray(e[r])?[]:{},m2(e[r],t[r])):va(e[r])||(t[r]=!0);return t}function Th(e,t,r){r||(r=m2(t));for(const n in e)A9(e[n])?di(t)||v2(r[n])?r[n]=m2(e[n],Array.isArray(e[n])?[]:{}):Th(e[n],va(t)?{}:t[n],r[n]):r[n]=!ec(e[n],t[n]);return r}const aB={value:!1,isValid:!1},oB={value:!0,isValid:!0};var x9=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!di(e[0].attributes.value)?di(e[0].value)||e[0].value===""?oB:{value:e[0].value,isValid:!0}:oB:aB}return aB},R9=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>di(e)?e:t?e===""?NaN:e&&+e:r&&$a(e)?new Date(e):n?n(e):e;const sB={isValid:!1,value:null};var C9=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,sB):sB;function uB(e){const t=e.ref;return f3(t)?t.files:d3(t)?C9(e.refs).value:S9(t)?[...t.selectedOptions].map(({value:r})=>r):y_(t)?x9(e.refs).value:R9(di(t.value)?e.ref.value:t.value,e)}var S_e=(e,t,r,n)=>{const i={};for(const a of e){const o=Qt(t,a);o&&gn(i,a,o._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},qy=e=>e instanceof RegExp,sm=e=>di(e)?e:qy(e)?e.source:vi(e)?qy(e.value)?e.value.source:e.value:e,lB=e=>({isOnSubmit:!e||e===Jo.onSubmit,isOnBlur:e===Jo.onBlur,isOnChange:e===Jo.onChange,isOnAll:e===Jo.all,isOnTouch:e===Jo.onTouched});const cB="AsyncFunction";var A_e=e=>!!e&&!!e.validate&&!!(es(e.validate)&&e.validate.constructor.name===cB||vi(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===cB)),x_e=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),fB=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Dm=(e,t,r,n)=>{for(const i of r||Object.keys(e)){const a=Qt(e,i);if(a){const{_f:o,...u}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(Dm(u,t))break}else if(vi(u)&&Dm(u,t))break}}};function dB(e,t,r){const n=Qt(e,r);if(n||UE(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const a=i.join("."),o=Qt(t,a),u=Qt(e,a);if(o&&!Array.isArray(o)&&r!==a)return{name:r};if(u&&u.type)return{name:a,error:u};if(u&&u.root&&u.root.type)return{name:`${a}.root`,error:u.root};i.pop()}return{name:r}}var R_e=(e,t,r,n)=>{r(e);const{name:i,...a}=e;return Ra(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!n||Jo.all))},C_e=(e,t,r)=>!e||!t||e===t||Pm(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),O_e=(e,t,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?n.isOnChange:i.isOnChange)?e:!0,M_e=(e,t)=>!l3(Qt(e,t)).length&&li(e,t),w_e=(e,t,r)=>{const n=Pm(Qt(e,r));return gn(n,"root",t[r]),gn(e,r,n),e};function hB(e,t,r="validate"){if($a(e)||Array.isArray(e)&&e.every($a)||Ds(e)&&!e)return{type:r,message:$a(e)?e:"",ref:t}}var gh=e=>vi(e)&&!qy(e)?e:{value:e,message:""},pB=async(e,t,r,n,i,a)=>{const{ref:o,refs:u,required:c,maxLength:f,minLength:h,min:p,max:m,pattern:_,validate:y,name:E,valueAsNumber:b,mount:S}=e._f,A=Qt(r,E);if(!S||t.has(E))return{};const R=u?u[0]:o,M=x=>{i&&R.reportValidity&&(R.setCustomValidity(Ds(x)?"":x||""),R.reportValidity())},P={},I=d3(o),w=y_(o),U=I||w,re=(b||f3(o))&&di(o.value)&&di(A)||Gy(o)&&o.value===""||A===""||Array.isArray(A)&&!A.length,K=b9.bind(null,E,n,P),H=(x,N,j,fe=Nu.maxLength,O=Nu.minLength)=>{const k=x?N:j;P[E]={type:x?fe:O,message:k,ref:o,...K(x?fe:O,k)}};if(a?!Array.isArray(A)||!A.length:c&&(!U&&(re||va(A))||Ds(A)&&!A||w&&!x9(u).isValid||I&&!C9(u).isValid)){const{value:x,message:N}=$a(c)?{value:!!c,message:c}:gh(c);if(x&&(P[E]={type:Nu.required,message:N,ref:R,...K(Nu.required,N)},!n))return M(N),P}if(!re&&(!va(p)||!va(m))){let x,N;const j=gh(m),fe=gh(p);if(!va(A)&&!isNaN(A)){const O=o.valueAsNumber||A&&+A;va(j.value)||(x=O>j.value),va(fe.value)||(N=O<fe.value)}else{const O=o.valueAsDate||new Date(A),k=oe=>new Date(new Date().toDateString()+" "+oe),V=o.type=="time",ee=o.type=="week";$a(j.value)&&A&&(x=V?k(A)>k(j.value):ee?A>j.value:O>new Date(j.value)),$a(fe.value)&&A&&(N=V?k(A)<k(fe.value):ee?A<fe.value:O<new Date(fe.value))}if((x||N)&&(H(!!x,j.message,fe.message,Nu.max,Nu.min),!n))return M(P[E].message),P}if((f||h)&&!re&&($a(A)||a&&Array.isArray(A))){const x=gh(f),N=gh(h),j=!va(x.value)&&A.length>+x.value,fe=!va(N.value)&&A.length<+N.value;if((j||fe)&&(H(j,x.message,N.message),!n))return M(P[E].message),P}if(_&&!re&&$a(A)){const{value:x,message:N}=gh(_);if(qy(x)&&!A.match(x)&&(P[E]={type:Nu.pattern,message:N,ref:o,...K(Nu.pattern,N)},!n))return M(N),P}if(y){if(es(y)){const x=await y(A,r),N=hB(x,R);if(N&&(P[E]={...N,...K(Nu.validate,N.message)},!n))return M(N.message),P}else if(vi(y)){let x={};for(const N in y){if(!Ra(x)&&!n)break;const j=hB(await y[N](A,r),R,N);j&&(x={...j,...K(N,j.message)},M(j.message),n&&(P[E]=x))}if(!Ra(x)&&(P[E]={ref:R,...x},!n))return P}}return M(!0),P};const N_e={mode:Jo.onSubmit,reValidateMode:Jo.onChange,shouldFocusError:!0};function I_e(e={}){let t={...N_e,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:es(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},i=vi(t.defaultValues)||vi(t.values)?Di(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:Di(i),o={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,f=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...h};const m={array:iB(),state:iB()},_=t.criteriaMode===Jo.all,y=se=>be=>{clearTimeout(f),f=setTimeout(se,be)},E=async se=>{if(!t.disabled&&(h.isValid||p.isValid||se)){const be=t.resolver?Ra((await w()).errors):await re(n,!0);be!==r.isValid&&m.state.next({isValid:be})}},b=(se,be)=>{!t.disabled&&(h.isValidating||h.validatingFields||p.isValidating||p.validatingFields)&&((se||Array.from(u.mount)).forEach(Fe=>{Fe&&(be?gn(r.validatingFields,Fe,be):li(r.validatingFields,Fe))}),m.state.next({validatingFields:r.validatingFields,isValidating:!Ra(r.validatingFields)}))},S=(se,be=[],Fe,F,vt=!0,ht=!0)=>{if(F&&Fe&&!t.disabled){if(o.action=!0,ht&&Array.isArray(Qt(n,se))){const Ft=Fe(Qt(n,se),F.argA,F.argB);vt&&gn(n,se,Ft)}if(ht&&Array.isArray(Qt(r.errors,se))){const Ft=Fe(Qt(r.errors,se),F.argA,F.argB);vt&&gn(r.errors,se,Ft),M_e(r.errors,se)}if((h.touchedFields||p.touchedFields)&&ht&&Array.isArray(Qt(r.touchedFields,se))){const Ft=Fe(Qt(r.touchedFields,se),F.argA,F.argB);vt&&gn(r.touchedFields,se,Ft)}(h.dirtyFields||p.dirtyFields)&&(r.dirtyFields=Th(i,a)),m.state.next({name:se,isDirty:H(se,be),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else gn(a,se,be)},A=(se,be)=>{gn(r.errors,se,be),m.state.next({errors:r.errors})},R=se=>{r.errors=se,m.state.next({errors:r.errors,isValid:!1})},M=(se,be,Fe,F)=>{const vt=Qt(n,se);if(vt){const ht=Qt(a,se,di(Fe)?Qt(i,se):Fe);di(ht)||F&&F.defaultChecked||be?gn(a,se,be?ht:uB(vt._f)):j(se,ht),o.mount&&E()}},P=(se,be,Fe,F,vt)=>{let ht=!1,Ft=!1;const sr={name:se};if(!t.disabled){if(!Fe||F){(h.isDirty||p.isDirty)&&(Ft=r.isDirty,r.isDirty=sr.isDirty=H(),ht=Ft!==sr.isDirty);const fr=ec(Qt(i,se),be);Ft=!!Qt(r.dirtyFields,se),fr?li(r.dirtyFields,se):gn(r.dirtyFields,se,!0),sr.dirtyFields=r.dirtyFields,ht=ht||(h.dirtyFields||p.dirtyFields)&&Ft!==!fr}if(Fe){const fr=Qt(r.touchedFields,se);fr||(gn(r.touchedFields,se,Fe),sr.touchedFields=r.touchedFields,ht=ht||(h.touchedFields||p.touchedFields)&&fr!==Fe)}ht&&vt&&m.state.next(sr)}return ht?sr:{}},I=(se,be,Fe,F)=>{const vt=Qt(r.errors,se),ht=(h.isValid||p.isValid)&&Ds(be)&&r.isValid!==be;if(t.delayError&&Fe?(c=y(()=>A(se,Fe)),c(t.delayError)):(clearTimeout(f),c=null,Fe?gn(r.errors,se,Fe):li(r.errors,se)),(Fe?!ec(vt,Fe):vt)||!Ra(F)||ht){const Ft={...F,...ht&&Ds(be)?{isValid:be}:{},errors:r.errors,name:se};r={...r,...Ft},m.state.next(Ft)}},w=async se=>{b(se,!0);const be=await t.resolver(a,t.context,S_e(se||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(se),be},U=async se=>{const{errors:be}=await w(se);if(se)for(const Fe of se){const F=Qt(be,Fe);F?gn(r.errors,Fe,F):li(r.errors,Fe)}else r.errors=be;return be},re=async(se,be,Fe={valid:!0})=>{for(const F in se){const vt=se[F];if(vt){const{_f:ht,...Ft}=vt;if(ht){const sr=u.array.has(ht.name),fr=vt._f&&A_e(vt._f);fr&&h.validatingFields&&b([ht.name],!0);const dr=await pB(vt,u.disabled,a,_,t.shouldUseNativeValidation&&!be,sr);if(fr&&h.validatingFields&&b([ht.name]),dr[ht.name]&&(Fe.valid=!1,be))break;!be&&(Qt(dr,ht.name)?sr?w_e(r.errors,dr,ht.name):gn(r.errors,ht.name,dr[ht.name]):li(r.errors,ht.name))}!Ra(Ft)&&await re(Ft,be,Fe)}}return Fe.valid},K=()=>{for(const se of u.unMount){const be=Qt(n,se);be&&(be._f.refs?be._f.refs.every(Fe=>!Zx(Fe)):!Zx(be._f.ref))&&qe(se)}u.unMount=new Set},H=(se,be)=>!t.disabled&&(se&&be&&gn(a,se,be),!ec(oe(),i)),x=(se,be,Fe)=>g_e(se,u,{...o.mount?a:di(be)?i:$a(se)?{[se]:be}:be},Fe,be),N=se=>l3(Qt(o.mount?a:i,se,t.shouldUnregister?Qt(i,se,[]):[])),j=(se,be,Fe={})=>{const F=Qt(n,se);let vt=be;if(F){const ht=F._f;ht&&(!ht.disabled&&gn(a,se,R9(be,ht)),vt=Gy(ht.ref)&&va(be)?"":be,S9(ht.ref)?[...ht.ref.options].forEach(Ft=>Ft.selected=vt.includes(Ft.value)):ht.refs?y_(ht.ref)?ht.refs.forEach(Ft=>{(!Ft.defaultChecked||!Ft.disabled)&&(Array.isArray(vt)?Ft.checked=!!vt.find(sr=>sr===Ft.value):Ft.checked=vt===Ft.value||!!vt)}):ht.refs.forEach(Ft=>Ft.checked=Ft.value===vt):f3(ht.ref)?ht.ref.value="":(ht.ref.value=vt,ht.ref.type||m.state.next({name:se,values:Di(a)})))}(Fe.shouldDirty||Fe.shouldTouch)&&P(se,vt,Fe.shouldTouch,Fe.shouldDirty,!0),Fe.shouldValidate&&ee(se)},fe=(se,be,Fe)=>{for(const F in be){if(!be.hasOwnProperty(F))return;const vt=be[F],ht=se+"."+F,Ft=Qt(n,ht);(u.array.has(se)||vi(vt)||Ft&&!Ft._f)&&!Sf(vt)?fe(ht,vt,Fe):j(ht,vt,Fe)}},O=(se,be,Fe={})=>{const F=Qt(n,se),vt=u.array.has(se),ht=Di(be);gn(a,se,ht),vt?(m.array.next({name:se,values:Di(a)}),(h.isDirty||h.dirtyFields||p.isDirty||p.dirtyFields)&&Fe.shouldDirty&&m.state.next({name:se,dirtyFields:Th(i,a),isDirty:H(se,ht)})):F&&!F._f&&!va(ht)?fe(se,ht,Fe):j(se,ht,Fe),fB(se,u)&&m.state.next({...r,name:se}),m.state.next({name:o.mount?se:void 0,values:Di(a)})},k=async se=>{o.mount=!0;const be=se.target;let Fe=be.name,F=!0;const vt=Qt(n,Fe),ht=fr=>{F=Number.isNaN(fr)||Sf(fr)&&isNaN(fr.getTime())||ec(fr,Qt(a,Fe,fr))},Ft=lB(t.mode),sr=lB(t.reValidateMode);if(vt){let fr,dr;const Fn=be.type?uB(vt._f):f_e(se),En=se.type===nB.BLUR||se.type===nB.FOCUS_OUT,oi=!x_e(vt._f)&&!t.resolver&&!Qt(r.errors,Fe)&&!vt._f.deps||O_e(En,Qt(r.touchedFields,Fe),r.isSubmitted,sr,Ft),Kr=fB(Fe,u,En);gn(a,Fe,Fn),En?(!be||!be.readOnly)&&(vt._f.onBlur&&vt._f.onBlur(se),c&&c(0)):vt._f.onChange&&vt._f.onChange(se);const mn=P(Fe,Fn,En),Hi=!Ra(mn)||Kr;if(!En&&m.state.next({name:Fe,type:se.type,values:Di(a)}),oi)return(h.isValid||p.isValid)&&(t.mode==="onBlur"?En&&E():En||E()),Hi&&m.state.next({name:Fe,...Kr?{}:mn});if(!En&&Kr&&m.state.next({...r}),t.resolver){const{errors:ra}=await w([Fe]);if(ht(Fn),F){const Ba=dB(r.errors,n,Fe),Oo=dB(ra,n,Ba.name||Fe);fr=Oo.error,Fe=Oo.name,dr=Ra(ra)}}else b([Fe],!0),fr=(await pB(vt,u.disabled,a,_,t.shouldUseNativeValidation))[Fe],b([Fe]),ht(Fn),F&&(fr?dr=!1:(h.isValid||p.isValid)&&(dr=await re(n,!0)));F&&(vt._f.deps&&(!Array.isArray(vt._f.deps)||vt._f.deps.length>0)&&ee(vt._f.deps),I(Fe,dr,fr,mn))}},V=(se,be)=>{if(Qt(r.errors,be)&&se.focus)return se.focus(),1},ee=async(se,be={})=>{let Fe,F;const vt=Pm(se);if(t.resolver){const ht=await U(di(se)?se:vt);Fe=Ra(ht),F=se?!vt.some(Ft=>Qt(ht,Ft)):Fe}else se?(F=(await Promise.all(vt.map(async ht=>{const Ft=Qt(n,ht);return await re(Ft&&Ft._f?{[ht]:Ft}:Ft)}))).every(Boolean),!(!F&&!r.isValid)&&E()):F=Fe=await re(n);return m.state.next({...!$a(se)||(h.isValid||p.isValid)&&Fe!==r.isValid?{}:{name:se},...t.resolver||!se?{isValid:Fe}:{},errors:r.errors}),be.shouldFocus&&!F&&Dm(n,V,se?vt:u.mount),F},oe=(se,be)=>{let Fe={...o.mount?a:i};return be&&(Fe=T9(be.dirtyFields?r.dirtyFields:r.touchedFields,Fe)),di(se)?Fe:$a(se)?Qt(Fe,se):se.map(F=>Qt(Fe,F))},ge=(se,be)=>({invalid:!!Qt((be||r).errors,se),isDirty:!!Qt((be||r).dirtyFields,se),error:Qt((be||r).errors,se),isValidating:!!Qt(r.validatingFields,se),isTouched:!!Qt((be||r).touchedFields,se)}),Ee=se=>{se&&Pm(se).forEach(be=>li(r.errors,be)),m.state.next({errors:se?r.errors:{}})},De=(se,be,Fe)=>{const F=(Qt(n,se,{_f:{}})._f||{}).ref,vt=Qt(r.errors,se)||{},{ref:ht,message:Ft,type:sr,...fr}=vt;gn(r.errors,se,{...fr,...be,ref:F}),m.state.next({name:se,errors:r.errors,isValid:!1}),Fe&&Fe.shouldFocus&&F&&F.focus&&F.focus()},tt=(se,be)=>es(se)?m.state.subscribe({next:Fe=>"values"in Fe&&se(x(void 0,be),Fe)}):x(se,be,!0),$e=se=>m.state.subscribe({next:be=>{C_e(se.name,be.name,se.exact)&&R_e(be,se.formState||h,Nt,se.reRenderRoot)&&se.callback({values:{...a},...r,...be,defaultValues:i})}}).unsubscribe,It=se=>(o.mount=!0,p={...p,...se.formState},$e({...se,formState:p})),qe=(se,be={})=>{for(const Fe of se?Pm(se):u.mount)u.mount.delete(Fe),u.array.delete(Fe),be.keepValue||(li(n,Fe),li(a,Fe)),!be.keepError&&li(r.errors,Fe),!be.keepDirty&&li(r.dirtyFields,Fe),!be.keepTouched&&li(r.touchedFields,Fe),!be.keepIsValidating&&li(r.validatingFields,Fe),!t.shouldUnregister&&!be.keepDefaultValue&&li(i,Fe);m.state.next({values:Di(a)}),m.state.next({...r,...be.keepDirty?{isDirty:H()}:{}}),!be.keepIsValid&&E()},St=({disabled:se,name:be})=>{(Ds(se)&&o.mount||se||u.disabled.has(be))&&(se?u.disabled.add(be):u.disabled.delete(be))},ke=(se,be={})=>{let Fe=Qt(n,se);const F=Ds(be.disabled)||Ds(t.disabled);return gn(n,se,{...Fe||{},_f:{...Fe&&Fe._f?Fe._f:{ref:{name:se}},name:se,mount:!0,...be}}),u.mount.add(se),Fe?St({disabled:Ds(be.disabled)?be.disabled:t.disabled,name:se}):M(se,!0,be.value),{...F?{disabled:be.disabled||t.disabled}:{},...t.progressive?{required:!!be.required,min:sm(be.min),max:sm(be.max),minLength:sm(be.minLength),maxLength:sm(be.maxLength),pattern:sm(be.pattern)}:{},name:se,onChange:k,onBlur:k,ref:vt=>{if(vt){ke(se,be),Fe=Qt(n,se);const ht=di(vt.value)&&vt.querySelectorAll&&vt.querySelectorAll("input,select,textarea")[0]||vt,Ft=y_e(ht),sr=Fe._f.refs||[];if(Ft?sr.find(fr=>fr===ht):ht===Fe._f.ref)return;gn(n,se,{_f:{...Fe._f,...Ft?{refs:[...sr.filter(Zx),ht,...Array.isArray(Qt(i,se))?[{}]:[]],ref:{type:ht.type,name:se}}:{ref:ht}}}),M(se,!1,void 0,ht)}else Fe=Qt(n,se,{}),Fe._f&&(Fe._f.mount=!1),(t.shouldUnregister||be.shouldUnregister)&&!(h_e(u.array,se)&&o.action)&&u.unMount.add(se)}}},_e=()=>t.shouldFocusError&&Dm(n,V,u.mount),ot=se=>{Ds(se)&&(m.state.next({disabled:se}),Dm(n,(be,Fe)=>{const F=Qt(n,Fe);F&&(be.disabled=F._f.disabled||se,Array.isArray(F._f.refs)&&F._f.refs.forEach(vt=>{vt.disabled=F._f.disabled||se}))},0,!1))},Ce=(se,be)=>async Fe=>{let F;Fe&&(Fe.preventDefault&&Fe.preventDefault(),Fe.persist&&Fe.persist());let vt=Di(a);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:ht,values:Ft}=await w();r.errors=ht,vt=Di(Ft)}else await re(n);if(u.disabled.size)for(const ht of u.disabled)li(vt,ht);if(li(r.errors,"root"),Ra(r.errors)){m.state.next({errors:{}});try{await se(vt,Fe)}catch(ht){F=ht}}else be&&await be({...r.errors},Fe),_e(),setTimeout(_e);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ra(r.errors)&&!F,submitCount:r.submitCount+1,errors:r.errors}),F)throw F},Wt=(se,be={})=>{Qt(n,se)&&(di(be.defaultValue)?O(se,Di(Qt(i,se))):(O(se,be.defaultValue),gn(i,se,Di(be.defaultValue))),be.keepTouched||li(r.touchedFields,se),be.keepDirty||(li(r.dirtyFields,se),r.isDirty=be.defaultValue?H(se,Di(Qt(i,se))):H()),be.keepError||(li(r.errors,se),h.isValid&&E()),m.state.next({...r}))},Xt=(se,be={})=>{const Fe=se?Di(se):i,F=Di(Fe),vt=Ra(se),ht=vt?i:F;if(be.keepDefaultValues||(i=Fe),!be.keepValues){if(be.keepDirtyValues){const Ft=new Set([...u.mount,...Object.keys(Th(i,a))]);for(const sr of Array.from(Ft))Qt(r.dirtyFields,sr)?gn(ht,sr,Qt(a,sr)):O(sr,Qt(ht,sr))}else{if(u3&&di(se))for(const Ft of u.mount){const sr=Qt(n,Ft);if(sr&&sr._f){const fr=Array.isArray(sr._f.refs)?sr._f.refs[0]:sr._f.ref;if(Gy(fr)){const dr=fr.closest("form");if(dr){dr.reset();break}}}}if(be.keepFieldsRef)for(const Ft of u.mount)O(Ft,Qt(ht,Ft));else n={}}a=t.shouldUnregister?be.keepDefaultValues?Di(i):{}:Di(ht),m.array.next({values:{...ht}}),m.state.next({values:{...ht}})}u={mount:be.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!be.keepIsValid||!!be.keepDirtyValues,o.watch=!!t.shouldUnregister,m.state.next({submitCount:be.keepSubmitCount?r.submitCount:0,isDirty:vt?!1:be.keepDirty?r.isDirty:!!(be.keepDefaultValues&&!ec(se,i)),isSubmitted:be.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:vt?{}:be.keepDirtyValues?be.keepDefaultValues&&a?Th(i,a):r.dirtyFields:be.keepDefaultValues&&se?Th(i,se):be.keepDirty?r.dirtyFields:{},touchedFields:be.keepTouched?r.touchedFields:{},errors:be.keepErrors?r.errors:{},isSubmitSuccessful:be.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},bt=(se,be)=>Xt(es(se)?se(a):se,be),Pt=(se,be={})=>{const Fe=Qt(n,se),F=Fe&&Fe._f;if(F){const vt=F.refs?F.refs[0]:F.ref;vt.focus&&(vt.focus(),be.shouldSelect&&es(vt.select)&&vt.select())}},Nt=se=>{r={...r,...se}},Br={control:{register:ke,unregister:qe,getFieldState:ge,handleSubmit:Ce,setError:De,_subscribe:$e,_runSchema:w,_focusError:_e,_getWatch:x,_getDirty:H,_setValid:E,_setFieldArray:S,_setDisabledField:St,_setErrors:R,_getFieldArray:N,_reset:Xt,_resetDefaultValues:()=>es(t.defaultValues)&&t.defaultValues().then(se=>{bt(se,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:K,_disableForm:ot,_subjects:m,_proxyFormState:h,get _fields(){return n},get _formValues(){return a},get _state(){return o},set _state(se){o=se},get _defaultValues(){return i},get _names(){return u},set _names(se){u=se},get _formState(){return r},get _options(){return t},set _options(se){t={...t,...se}}},subscribe:It,trigger:ee,register:ke,handleSubmit:Ce,watch:tt,setValue:O,getValues:oe,reset:bt,resetField:Wt,clearErrors:Ee,unregister:qe,setError:De,setFocus:Pt,getFieldState:ge};return{...Br,formControl:Br}}function O9(e={}){const t=un.useRef(void 0),r=un.useRef(void 0),[n,i]=un.useState({isDirty:!1,isValidating:!1,isLoading:es(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:es(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!es(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...u}=I_e(e);t.current={...u,formState:n}}const a=t.current.control;return a._options=e,__e(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(u=>({...u,isReady:!0})),a._formState.isReady=!0,o},[a]),un.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),un.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),un.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),un.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),un.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==n.isDirty&&a._subjects.state.next({isDirty:o})}},[a,n.isDirty]),un.useEffect(()=>{e.values&&!ec(e.values,r.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),r.current=e.values,i(o=>({...o}))):a._resetDefaultValues()},[a,e.values]),un.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=m_e(n,a),t.current}const vB=(e,t,r)=>{if(e&&"reportValidity"in e){const n=Qt(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},M9=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?vB(n.ref,r,e):n.refs&&n.refs.forEach(i=>vB(i,r,e))}},P_e=(e,t)=>{t.shouldUseNativeValidation&&M9(e,t);const r={};for(const n in e){const i=Qt(t.fields,n),a=Object.assign(e[n]||{},{ref:i&&i.ref});if(D_e(t.names||Object.keys(e),n)){const o=Object.assign({},Qt(r,n));gn(o,"root",a),gn(r,n,o)}else gn(r,n,a)}return r},D_e=(e,t)=>e.some(r=>r.startsWith(t+"."));var L_e=function(e,t){for(var r={};e.length;){var n=e[0],i=n.code,a=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var u=n.unionErrors[0].errors[0];r[o]={message:u.message,type:u.code}}else r[o]={message:a,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(h){return h.errors.forEach(function(p){return e.push(p)})}),t){var c=r[o].types,f=c&&c[n.code];r[o]=b9(o,t,r,i,f?[].concat(f,n.message):n.message)}e.shift()}return r},w9=function(e,t,r){return r===void 0&&(r={}),function(n,i,a){try{return Promise.resolve((function(o,u){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(f){return a.shouldUseNativeValidation&&M9({},a),{errors:{},values:r.raw?n:f}})}catch(f){return u(f)}return c&&c.then?c.then(void 0,u):c})(0,function(o){if((function(u){return Array.isArray(u?.errors)})(o))return{values:{},errors:P_e(L_e(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},nn;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function r(i){throw new Error}e.assertNever=r,e.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),o={};for(const u of a)o[u]=i[u];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},e.find=(i,a)=>{for(const o of i)if(a(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}e.joinValues=n,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(nn||(nn={}));var mB;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(mB||(mB={}));const er=nn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Zl=e=>{switch(typeof e){case"undefined":return er.undefined;case"string":return er.string;case"number":return Number.isNaN(e)?er.nan:er.number;case"boolean":return er.boolean;case"function":return er.function;case"bigint":return er.bigint;case"symbol":return er.symbol;case"object":return Array.isArray(e)?er.array:e===null?er.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?er.promise:typeof Map<"u"&&e instanceof Map?er.map:typeof Set<"u"&&e instanceof Set?er.set:typeof Date<"u"&&e instanceof Date?er.date:er.object;default:return er.unknown}},wt=nn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Vu extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(a){return a.message},n={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let u=n,c=0;for(;c<o.path.length;){const f=o.path[c];c===o.path.length-1?(u[f]=u[f]||{_errors:[]},u[f]._errors.push(r(o))):u[f]=u[f]||{_errors:[]},u=u[f],c++}}};return i(this),n}static assert(t){if(!(t instanceof Vu))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,nn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];r[a]=r[a]||[],r[a].push(t(i))}else n.push(t(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Vu.create=e=>new Vu(e);const _2=(e,t)=>{let r;switch(e.code){case wt.invalid_type:e.received===er.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case wt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,nn.jsonStringifyReplacer)}`;break;case wt.unrecognized_keys:r=`Unrecognized key(s) in object: ${nn.joinValues(e.keys,", ")}`;break;case wt.invalid_union:r="Invalid input";break;case wt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${nn.joinValues(e.options)}`;break;case wt.invalid_enum_value:r=`Invalid enum value. Expected ${nn.joinValues(e.options)}, received '${e.received}'`;break;case wt.invalid_arguments:r="Invalid function arguments";break;case wt.invalid_return_type:r="Invalid function return type";break;case wt.invalid_date:r="Invalid date";break;case wt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:nn.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case wt.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case wt.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case wt.custom:r="Invalid input";break;case wt.invalid_intersection_types:r="Intersection results could not be merged";break;case wt.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case wt.not_finite:r="Number must be finite";break;default:r=t.defaultError,nn.assertNever(e)}return{message:r}};let B_e=_2;function F_e(){return B_e}const U_e=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,a=[...r,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let u="";const c=n.filter(f=>!!f).slice().reverse();for(const f of c)u=f(o,{data:t,defaultError:u}).message;return{...i,path:a,message:u}};function Ht(e,t){const r=F_e(),n=U_e({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===_2?void 0:_2].filter(i=>!!i)});e.common.issues.push(n)}class Ka{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const i of r){if(i.status==="aborted")return Cr;i.status==="dirty"&&t.dirty(),n.push(i.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const i of r){const a=await i.key,o=await i.value;n.push({key:a,value:o})}return Ka.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const i of r){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return Cr;a.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(n[a.value]=o.value)}return{status:t.value,value:n}}}const Cr=Object.freeze({status:"aborted"}),Sm=e=>({status:"dirty",value:e}),Co=e=>({status:"valid",value:e}),_B=e=>e.status==="aborted",gB=e=>e.status==="dirty",rp=e=>e.status==="valid",Wy=e=>typeof Promise<"u"&&e instanceof Promise;var nr;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(nr||(nr={}));class Ec{constructor(t,r,n,i){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const yB=(e,t)=>{if(rp(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Vu(e.common.issues);return this._error=r,this._error}}};function Hr(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,u)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??u.defaultError}:typeof u.data>"u"?{message:c??n??u.defaultError}:o.code!=="invalid_type"?{message:u.defaultError}:{message:c??r??u.defaultError}},description:i}}class en{get description(){return this._def.description}_getType(t){return Zl(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Zl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ka,ctx:{common:t.parent.common,data:t.data,parsedType:Zl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Wy(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Zl(t)},i=this._parseSync({data:t,path:n.path,parent:n});return yB(n,i)}"~validate"(t){const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Zl(t)};if(!this["~standard"].async)try{const n=this._parseSync({data:t,path:[],parent:r});return rp(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(n=>rp(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Zl(t)},i=this._parse({data:t,path:n.path,parent:n}),a=await(Wy(i)?i:Promise.resolve(i));return yB(n,a)}refine(t,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{const o=t(i),u=()=>a.addIssue({code:wt.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(u(),!1)):o?!0:(u(),!1)})}refinement(t,r){return this._refinement((n,i)=>t(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(t){return new ap({schema:this,typeName:Or.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return hc.create(this,this._def)}nullable(){return op.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Hs.create(this)}promise(){return Ky.create(this,this._def)}or(t){return Yy.create([this,t],this._def)}and(t){return Zy.create(this,t,this._def)}transform(t){return new ap({...Hr(this._def),schema:this,typeName:Or.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new y2({...Hr(this._def),innerType:this,defaultValue:r,typeName:Or.ZodDefault})}brand(){return new sge({typeName:Or.ZodBranded,type:this,...Hr(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new E2({...Hr(this._def),innerType:this,catchValue:r,typeName:Or.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return h3.create(this,t)}readonly(){return b2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const k_e=/^c[^\s-]{8,}$/i,z_e=/^[0-9a-z]+$/,j_e=/^[0-9A-HJKMNP-TV-Z]{26}$/i,V_e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,H_e=/^[a-z0-9_-]{21}$/i,X_e=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,G_e=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,q_e=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,W_e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Kx;const $_e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Y_e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Z_e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,K_e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Q_e=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,J_e=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,N9="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ege=new RegExp(`^${N9}$`);function I9(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function tge(e){return new RegExp(`^${I9(e)}$`)}function rge(e){let t=`${N9}T${I9(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function nge(e,t){return!!((t==="v4"||!t)&&$_e.test(e)||(t==="v6"||!t)&&Z_e.test(e))}function ige(e,t){if(!X_e.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function age(e,t){return!!((t==="v4"||!t)&&Y_e.test(e)||(t==="v6"||!t)&&K_e.test(e))}class ac extends en{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==er.string){const a=this._getOrReturnCtx(t);return Ht(a,{code:wt.invalid_type,expected:er.string,received:a.parsedType}),Cr}const n=new Ka;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),Ht(i,{code:wt.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),Ht(i,{code:wt.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const o=t.data.length>a.value,u=t.data.length<a.value;(o||u)&&(i=this._getOrReturnCtx(t,i),o?Ht(i,{code:wt.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):u&&Ht(i,{code:wt.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")q_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"email",code:wt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Kx||(Kx=new RegExp(W_e,"u")),Kx.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"emoji",code:wt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")V_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"uuid",code:wt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")H_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"nanoid",code:wt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")k_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"cuid",code:wt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")z_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"cuid2",code:wt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")j_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"ulid",code:wt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Ht(i,{validation:"url",code:wt.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"regex",code:wt.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),Ht(i,{code:wt.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ht(i,{code:wt.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ht(i,{code:wt.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?rge(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{code:wt.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?ege.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{code:wt.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?tge(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{code:wt.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?G_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"duration",code:wt.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?nge(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"ip",code:wt.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?ige(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"jwt",code:wt.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?age(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"cidr",code:wt.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?Q_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"base64",code:wt.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?J_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"base64url",code:wt.invalid_string,message:a.message}),n.dirty()):nn.assertNever(a);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(i=>t.test(i),{validation:r,code:wt.invalid_string,...nr.errToObj(n)})}_addCheck(t){return new ac({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...nr.errToObj(t)})}url(t){return this._addCheck({kind:"url",...nr.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...nr.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...nr.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...nr.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...nr.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...nr.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...nr.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...nr.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...nr.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...nr.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...nr.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...nr.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...nr.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...nr.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...nr.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...nr.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r?.position,...nr.errToObj(r?.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...nr.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...nr.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...nr.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...nr.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...nr.errToObj(r)})}nonempty(t){return this.min(1,nr.errToObj(t))}trim(){return new ac({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ac({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ac({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}ac.create=e=>new ac({checks:[],typeName:Or.ZodString,coerce:e?.coerce??!1,...Hr(e)});function oge(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,a=Number.parseInt(e.toFixed(i).replace(".","")),o=Number.parseInt(t.toFixed(i).replace(".",""));return a%o/10**i}class np extends en{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==er.number){const a=this._getOrReturnCtx(t);return Ht(a,{code:wt.invalid_type,expected:er.number,received:a.parsedType}),Cr}let n;const i=new Ka;for(const a of this._def.checks)a.kind==="int"?nn.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),Ht(n,{code:wt.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(n=this._getOrReturnCtx(t,n),Ht(n,{code:wt.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(n=this._getOrReturnCtx(t,n),Ht(n,{code:wt.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?oge(t.data,a.value)!==0&&(n=this._getOrReturnCtx(t,n),Ht(n,{code:wt.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),Ht(n,{code:wt.not_finite,message:a.message}),i.dirty()):nn.assertNever(a);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,nr.toString(r))}gt(t,r){return this.setLimit("min",t,!1,nr.toString(r))}lte(t,r){return this.setLimit("max",t,!0,nr.toString(r))}lt(t,r){return this.setLimit("max",t,!1,nr.toString(r))}setLimit(t,r,n,i){return new np({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:nr.toString(i)}]})}_addCheck(t){return new np({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:nr.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:nr.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:nr.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:nr.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:nr.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:nr.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:nr.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:nr.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:nr.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&nn.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}np.create=e=>new np({checks:[],typeName:Or.ZodNumber,coerce:e?.coerce||!1,...Hr(e)});class r_ extends en{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==er.bigint)return this._getInvalidInput(t);let n;const i=new Ka;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(n=this._getOrReturnCtx(t,n),Ht(n,{code:wt.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(n=this._getOrReturnCtx(t,n),Ht(n,{code:wt.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),Ht(n,{code:wt.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):nn.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Ht(r,{code:wt.invalid_type,expected:er.bigint,received:r.parsedType}),Cr}gte(t,r){return this.setLimit("min",t,!0,nr.toString(r))}gt(t,r){return this.setLimit("min",t,!1,nr.toString(r))}lte(t,r){return this.setLimit("max",t,!0,nr.toString(r))}lt(t,r){return this.setLimit("max",t,!1,nr.toString(r))}setLimit(t,r,n,i){return new r_({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:nr.toString(i)}]})}_addCheck(t){return new r_({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:nr.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:nr.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:nr.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:nr.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:nr.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}r_.create=e=>new r_({checks:[],typeName:Or.ZodBigInt,coerce:e?.coerce??!1,...Hr(e)});class EB extends en{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==er.boolean){const n=this._getOrReturnCtx(t);return Ht(n,{code:wt.invalid_type,expected:er.boolean,received:n.parsedType}),Cr}return Co(t.data)}}EB.create=e=>new EB({typeName:Or.ZodBoolean,coerce:e?.coerce||!1,...Hr(e)});class $y extends en{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==er.date){const a=this._getOrReturnCtx(t);return Ht(a,{code:wt.invalid_type,expected:er.date,received:a.parsedType}),Cr}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return Ht(a,{code:wt.invalid_date}),Cr}const n=new Ka;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),Ht(i,{code:wt.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),Ht(i,{code:wt.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):nn.assertNever(a);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new $y({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:nr.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:nr.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}$y.create=e=>new $y({checks:[],coerce:e?.coerce||!1,typeName:Or.ZodDate,...Hr(e)});class bB extends en{_parse(t){if(this._getType(t)!==er.symbol){const n=this._getOrReturnCtx(t);return Ht(n,{code:wt.invalid_type,expected:er.symbol,received:n.parsedType}),Cr}return Co(t.data)}}bB.create=e=>new bB({typeName:Or.ZodSymbol,...Hr(e)});class TB extends en{_parse(t){if(this._getType(t)!==er.undefined){const n=this._getOrReturnCtx(t);return Ht(n,{code:wt.invalid_type,expected:er.undefined,received:n.parsedType}),Cr}return Co(t.data)}}TB.create=e=>new TB({typeName:Or.ZodUndefined,...Hr(e)});class SB extends en{_parse(t){if(this._getType(t)!==er.null){const n=this._getOrReturnCtx(t);return Ht(n,{code:wt.invalid_type,expected:er.null,received:n.parsedType}),Cr}return Co(t.data)}}SB.create=e=>new SB({typeName:Or.ZodNull,...Hr(e)});class AB extends en{constructor(){super(...arguments),this._any=!0}_parse(t){return Co(t.data)}}AB.create=e=>new AB({typeName:Or.ZodAny,...Hr(e)});class xB extends en{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Co(t.data)}}xB.create=e=>new xB({typeName:Or.ZodUnknown,...Hr(e)});class bc extends en{_parse(t){const r=this._getOrReturnCtx(t);return Ht(r,{code:wt.invalid_type,expected:er.never,received:r.parsedType}),Cr}}bc.create=e=>new bc({typeName:Or.ZodNever,...Hr(e)});class RB extends en{_parse(t){if(this._getType(t)!==er.undefined){const n=this._getOrReturnCtx(t);return Ht(n,{code:wt.invalid_type,expected:er.void,received:n.parsedType}),Cr}return Co(t.data)}}RB.create=e=>new RB({typeName:Or.ZodVoid,...Hr(e)});class Hs extends en{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),i=this._def;if(r.parsedType!==er.array)return Ht(r,{code:wt.invalid_type,expected:er.array,received:r.parsedType}),Cr;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,u=r.data.length<i.exactLength.value;(o||u)&&(Ht(r,{code:o?wt.too_big:wt.too_small,minimum:u?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(Ht(r,{code:wt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(Ht(r,{code:wt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,u)=>i.type._parseAsync(new Ec(r,o,r.path,u)))).then(o=>Ka.mergeArray(n,o));const a=[...r.data].map((o,u)=>i.type._parseSync(new Ec(r,o,r.path,u)));return Ka.mergeArray(n,a)}get element(){return this._def.type}min(t,r){return new Hs({...this._def,minLength:{value:t,message:nr.toString(r)}})}max(t,r){return new Hs({...this._def,maxLength:{value:t,message:nr.toString(r)}})}length(t,r){return new Hs({...this._def,exactLength:{value:t,message:nr.toString(r)}})}nonempty(t){return this.min(1,t)}}Hs.create=(e,t)=>new Hs({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Or.ZodArray,...Hr(t)});function Sh(e){if(e instanceof fi){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=hc.create(Sh(n))}return new fi({...e._def,shape:()=>t})}else return e instanceof Hs?new Hs({...e._def,type:Sh(e.element)}):e instanceof hc?hc.create(Sh(e.unwrap())):e instanceof op?op.create(Sh(e.unwrap())):e instanceof Gf?Gf.create(e.items.map(t=>Sh(t))):e}class fi extends en{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=nn.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==er.object){const f=this._getOrReturnCtx(t);return Ht(f,{code:wt.invalid_type,expected:er.object,received:f.parsedType}),Cr}const{status:n,ctx:i}=this._processInputParams(t),{shape:a,keys:o}=this._getCached(),u=[];if(!(this._def.catchall instanceof bc&&this._def.unknownKeys==="strip"))for(const f in i.data)o.includes(f)||u.push(f);const c=[];for(const f of o){const h=a[f],p=i.data[f];c.push({key:{status:"valid",value:f},value:h._parse(new Ec(i,p,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof bc){const f=this._def.unknownKeys;if(f==="passthrough")for(const h of u)c.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(f==="strict")u.length>0&&(Ht(i,{code:wt.unrecognized_keys,keys:u}),n.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const h of u){const p=i.data[h];c.push({key:{status:"valid",value:h},value:f._parse(new Ec(i,p,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const f=[];for(const h of c){const p=await h.key,m=await h.value;f.push({key:p,value:m,alwaysSet:h.alwaysSet})}return f}).then(f=>Ka.mergeObjectSync(n,f)):Ka.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return nr.errToObj,new fi({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{const i=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:nr.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new fi({...this._def,unknownKeys:"strip"})}passthrough(){return new fi({...this._def,unknownKeys:"passthrough"})}extend(t){return new fi({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new fi({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Or.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new fi({...this._def,catchall:t})}pick(t){const r={};for(const n of nn.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new fi({...this._def,shape:()=>r})}omit(t){const r={};for(const n of nn.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new fi({...this._def,shape:()=>r})}deepPartial(){return Sh(this)}partial(t){const r={};for(const n of nn.objectKeys(this.shape)){const i=this.shape[n];t&&!t[n]?r[n]=i:r[n]=i.optional()}return new fi({...this._def,shape:()=>r})}required(t){const r={};for(const n of nn.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof hc;)a=a._def.innerType;r[n]=a}return new fi({...this._def,shape:()=>r})}keyof(){return P9(nn.objectKeys(this.shape))}}fi.create=(e,t)=>new fi({shape:()=>e,unknownKeys:"strip",catchall:bc.create(),typeName:Or.ZodObject,...Hr(t)});fi.strictCreate=(e,t)=>new fi({shape:()=>e,unknownKeys:"strict",catchall:bc.create(),typeName:Or.ZodObject,...Hr(t)});fi.lazycreate=(e,t)=>new fi({shape:e,unknownKeys:"strip",catchall:bc.create(),typeName:Or.ZodObject,...Hr(t)});class Yy extends en{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function i(a){for(const u of a)if(u.result.status==="valid")return u.result;for(const u of a)if(u.result.status==="dirty")return r.common.issues.push(...u.ctx.common.issues),u.result;const o=a.map(u=>new Vu(u.ctx.common.issues));return Ht(r,{code:wt.invalid_union,unionErrors:o}),Cr}if(r.common.async)return Promise.all(n.map(async a=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const c of n){const f={...r,common:{...r.common,issues:[]},parent:null},h=c._parseSync({data:r.data,path:r.path,parent:f});if(h.status==="valid")return h;h.status==="dirty"&&!a&&(a={result:h,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const u=o.map(c=>new Vu(c));return Ht(r,{code:wt.invalid_union,unionErrors:u}),Cr}}get options(){return this._def.options}}Yy.create=(e,t)=>new Yy({options:e,typeName:Or.ZodUnion,...Hr(t)});function g2(e,t){const r=Zl(e),n=Zl(t);if(e===t)return{valid:!0,data:e};if(r===er.object&&n===er.object){const i=nn.objectKeys(t),a=nn.objectKeys(e).filter(u=>i.indexOf(u)!==-1),o={...e,...t};for(const u of a){const c=g2(e[u],t[u]);if(!c.valid)return{valid:!1};o[u]=c.data}return{valid:!0,data:o}}else if(r===er.array&&n===er.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const o=e[a],u=t[a],c=g2(o,u);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===er.date&&n===er.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Zy extends en{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=(a,o)=>{if(_B(a)||_B(o))return Cr;const u=g2(a.value,o.value);return u.valid?((gB(a)||gB(o))&&r.dirty(),{status:r.value,value:u.data}):(Ht(n,{code:wt.invalid_intersection_types}),Cr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Zy.create=(e,t,r)=>new Zy({left:e,right:t,typeName:Or.ZodIntersection,...Hr(r)});class Gf extends en{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==er.array)return Ht(n,{code:wt.invalid_type,expected:er.array,received:n.parsedType}),Cr;if(n.data.length<this._def.items.length)return Ht(n,{code:wt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Cr;!this._def.rest&&n.data.length>this._def.items.length&&(Ht(n,{code:wt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((o,u)=>{const c=this._def.items[u]||this._def.rest;return c?c._parse(new Ec(n,o,n.path,u)):null}).filter(o=>!!o);return n.common.async?Promise.all(a).then(o=>Ka.mergeArray(r,o)):Ka.mergeArray(r,a)}get items(){return this._def.items}rest(t){return new Gf({...this._def,rest:t})}}Gf.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Gf({items:e,typeName:Or.ZodTuple,rest:null,...Hr(t)})};class CB extends en{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==er.map)return Ht(n,{code:wt.invalid_type,expected:er.map,received:n.parsedType}),Cr;const i=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(([u,c],f)=>({key:i._parse(new Ec(n,u,n.path,[f,"key"])),value:a._parse(new Ec(n,c,n.path,[f,"value"]))}));if(n.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const c of o){const f=await c.key,h=await c.value;if(f.status==="aborted"||h.status==="aborted")return Cr;(f.status==="dirty"||h.status==="dirty")&&r.dirty(),u.set(f.value,h.value)}return{status:r.value,value:u}})}else{const u=new Map;for(const c of o){const f=c.key,h=c.value;if(f.status==="aborted"||h.status==="aborted")return Cr;(f.status==="dirty"||h.status==="dirty")&&r.dirty(),u.set(f.value,h.value)}return{status:r.value,value:u}}}}CB.create=(e,t,r)=>new CB({valueType:t,keyType:e,typeName:Or.ZodMap,...Hr(r)});class n_ extends en{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==er.set)return Ht(n,{code:wt.invalid_type,expected:er.set,received:n.parsedType}),Cr;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Ht(n,{code:wt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Ht(n,{code:wt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const a=this._def.valueType;function o(c){const f=new Set;for(const h of c){if(h.status==="aborted")return Cr;h.status==="dirty"&&r.dirty(),f.add(h.value)}return{status:r.value,value:f}}const u=[...n.data.values()].map((c,f)=>a._parse(new Ec(n,c,n.path,f)));return n.common.async?Promise.all(u).then(c=>o(c)):o(u)}min(t,r){return new n_({...this._def,minSize:{value:t,message:nr.toString(r)}})}max(t,r){return new n_({...this._def,maxSize:{value:t,message:nr.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}n_.create=(e,t)=>new n_({valueType:e,minSize:null,maxSize:null,typeName:Or.ZodSet,...Hr(t)});class OB extends en{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}OB.create=(e,t)=>new OB({getter:e,typeName:Or.ZodLazy,...Hr(t)});class MB extends en{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return Ht(r,{received:r.data,code:wt.invalid_literal,expected:this._def.value}),Cr}return{status:"valid",value:t.data}}get value(){return this._def.value}}MB.create=(e,t)=>new MB({value:e,typeName:Or.ZodLiteral,...Hr(t)});function P9(e,t){return new ip({values:e,typeName:Or.ZodEnum,...Hr(t)})}class ip extends en{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return Ht(r,{expected:nn.joinValues(n),received:r.parsedType,code:wt.invalid_type}),Cr}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return Ht(r,{received:r.data,code:wt.invalid_enum_value,options:n}),Cr}return Co(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return ip.create(t,{...this._def,...r})}exclude(t,r=this._def){return ip.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}ip.create=P9;class wB extends en{_parse(t){const r=nn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==er.string&&n.parsedType!==er.number){const i=nn.objectValues(r);return Ht(n,{expected:nn.joinValues(i),received:n.parsedType,code:wt.invalid_type}),Cr}if(this._cache||(this._cache=new Set(nn.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=nn.objectValues(r);return Ht(n,{received:n.data,code:wt.invalid_enum_value,options:i}),Cr}return Co(t.data)}get enum(){return this._def.values}}wB.create=(e,t)=>new wB({values:e,typeName:Or.ZodNativeEnum,...Hr(t)});class Ky extends en{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==er.promise&&r.common.async===!1)return Ht(r,{code:wt.invalid_type,expected:er.promise,received:r.parsedType}),Cr;const n=r.parsedType===er.promise?r.data:Promise.resolve(r.data);return Co(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Ky.create=(e,t)=>new Ky({type:e,typeName:Or.ZodPromise,...Hr(t)});class ap extends en{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Or.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:o=>{Ht(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(n.data,a);if(n.common.async)return Promise.resolve(o).then(async u=>{if(r.value==="aborted")return Cr;const c=await this._def.schema._parseAsync({data:u,path:n.path,parent:n});return c.status==="aborted"?Cr:c.status==="dirty"||r.value==="dirty"?Sm(c.value):c});{if(r.value==="aborted")return Cr;const u=this._def.schema._parseSync({data:o,path:n.path,parent:n});return u.status==="aborted"?Cr:u.status==="dirty"||r.value==="dirty"?Sm(u.value):u}}if(i.type==="refinement"){const o=u=>{const c=i.refinement(u,a);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?Cr:(u.status==="dirty"&&r.dirty(),o(u.value),{status:r.value,value:u.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>u.status==="aborted"?Cr:(u.status==="dirty"&&r.dirty(),o(u.value).then(()=>({status:r.value,value:u.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!rp(o))return Cr;const u=i.transform(o.value,a);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:u}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>rp(o)?Promise.resolve(i.transform(o.value,a)).then(u=>({status:r.value,value:u})):Cr);nn.assertNever(i)}}ap.create=(e,t,r)=>new ap({schema:e,typeName:Or.ZodEffects,effect:t,...Hr(r)});ap.createWithPreprocess=(e,t,r)=>new ap({schema:t,effect:{type:"preprocess",transform:e},typeName:Or.ZodEffects,...Hr(r)});class hc extends en{_parse(t){return this._getType(t)===er.undefined?Co(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}hc.create=(e,t)=>new hc({innerType:e,typeName:Or.ZodOptional,...Hr(t)});class op extends en{_parse(t){return this._getType(t)===er.null?Co(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}op.create=(e,t)=>new op({innerType:e,typeName:Or.ZodNullable,...Hr(t)});class y2 extends en{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===er.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}y2.create=(e,t)=>new y2({innerType:e,typeName:Or.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Hr(t)});class E2 extends en{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Wy(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Vu(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Vu(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}E2.create=(e,t)=>new E2({innerType:e,typeName:Or.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Hr(t)});class NB extends en{_parse(t){if(this._getType(t)!==er.nan){const n=this._getOrReturnCtx(t);return Ht(n,{code:wt.invalid_type,expected:er.nan,received:n.parsedType}),Cr}return{status:"valid",value:t.data}}}NB.create=e=>new NB({typeName:Or.ZodNaN,...Hr(e)});class sge extends en{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class h3 extends en{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Cr:a.status==="dirty"?(r.dirty(),Sm(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Cr:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(t,r){return new h3({in:t,out:r,typeName:Or.ZodPipeline})}}class b2 extends en{_parse(t){const r=this._def.innerType._parse(t),n=i=>(rp(i)&&(i.value=Object.freeze(i.value)),i);return Wy(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}b2.create=(e,t)=>new b2({innerType:e,typeName:Or.ZodReadonly,...Hr(t)});var Or;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Or||(Or={}));const T2=ac.create,D9=np.create;bc.create;Hs.create;const L9=fi.create;Yy.create;Zy.create;Gf.create;ip.create;Ky.create;hc.create;op.create;const uge=L9({title:T2().min(1,"").max(255,"255"),intensity:D9().min(0,"0").max(1,"1"),description:T2().optional()}),lge=L9({title:T2().optional(),intensity:D9().min(0).max(1).optional()}),cge=({onSearch:e,onClear:t})=>{const{searchTitle:r,searchIntensity:n}=p9(),{register:i,handleSubmit:a,reset:o,formState:{isSubmitting:u}}=O9({resolver:w9(lge),defaultValues:{title:r,intensity:n||void 0}}),c=h=>{e(h)},f=()=>{o({title:"",intensity:void 0}),t()};return ze.jsx(wf,{className:"p-6 mb-6",children:ze.jsxs("form",{onSubmit:a(c),className:"space-y-4",children:[ze.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ze.jsxs("div",{children:[ze.jsx("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",children:""}),ze.jsx(Jm,{id:"title",placeholder:"",...i("title")})]}),ze.jsxs("div",{children:[ze.jsx("label",{htmlFor:"intensity",className:"block text-sm font-medium mb-2",children:""}),ze.jsx(Jm,{id:"intensity",type:"number",min:"0",max:"1",step:"0.01",placeholder:" (0-1)",...i("intensity",{setValueAs:h=>h===""?void 0:parseFloat(h)})})]})]}),ze.jsxs("div",{className:"flex gap-2",children:[ze.jsx(mc,{type:"submit",disabled:u,children:""}),ze.jsx(mc,{type:"button",variant:"outline",onClick:f,children:""})]})]})})},fge=({items:e,isLoading:t,onEdit:r,onDelete:n})=>{if(t)return ze.jsx(wf,{className:"p-6",children:ze.jsx("div",{className:"text-center text-gray-500",children:"..."})});if(e.length===0)return ze.jsx(wf,{className:"p-6",children:ze.jsx("div",{className:"text-center text-gray-500",children:'""'})});const i=o=>o>=.7?"bg-green-100 text-green-800 border-green-300":o>=.4?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-red-100 text-red-800 border-red-300",a=o=>o>=.7?"":o>=.4?"":"";return ze.jsx("div",{className:"space-y-4",children:e.map(o=>ze.jsx(wf,{className:"p-6",children:ze.jsxs("div",{className:"flex items-center justify-between",children:[ze.jsxs("div",{className:"flex-1",children:[ze.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[ze.jsx("h3",{className:"text-lg font-medium",children:o.title}),ze.jsx(fde,{variant:"outline",className:i(o.intensity),children:a(o.intensity)})]}),ze.jsxs("div",{className:"text-sm text-gray-600",children:[": ",o.intensity.toFixed(2)]}),ze.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:ze.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${o.intensity*100}%`}})})]}),ze.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[ze.jsx(mc,{variant:"outline",size:"sm",onClick:()=>r(o),children:ze.jsx(Nme,{className:"w-4 h-4"})}),ze.jsx(mc,{variant:"outline",size:"sm",onClick:()=>n(o),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:ze.jsx(Ime,{className:"w-4 h-4"})})]})]})},o.id))})},dge=({initialData:e,onSubmit:t,onCancel:r,isSubmitting:n=!1})=>{const{register:i,handleSubmit:a,formState:{errors:o}}=O9({resolver:w9(uge),defaultValues:{title:e?.title||"",intensity:e?.intensity||0,description:""}}),u=c=>{t(c)};return ze.jsxs("form",{onSubmit:a(u),className:"space-y-6",children:[ze.jsxs("div",{className:"space-y-2",children:[ze.jsxs(z0,{htmlFor:"title",children:[" ",ze.jsx("span",{className:"text-red-500",children:"*"})]}),ze.jsx(Jm,{id:"title",placeholder:"",...i("title"),className:o.title?"border-red-500":""}),o.title&&ze.jsx("p",{className:"text-sm text-red-500",children:o.title.message})]}),ze.jsxs("div",{className:"space-y-2",children:[ze.jsxs(z0,{htmlFor:"intensity",children:[" ",ze.jsx("span",{className:"text-red-500",children:"*"})]}),ze.jsx(Jm,{id:"intensity",type:"number",min:"0",max:"1",step:"0.01",placeholder:" (0-1)",...i("intensity",{setValueAs:c=>parseFloat(c)}),className:o.intensity?"border-red-500":""}),o.intensity&&ze.jsx("p",{className:"text-sm text-red-500",children:o.intensity.message}),ze.jsx("p",{className:"text-sm text-gray-500",children:"0.00 - 1.00"})]}),ze.jsxs("div",{className:"space-y-2",children:[ze.jsx(z0,{htmlFor:"description",children:""}),ze.jsx(c9,{id:"description",rows:3,placeholder:"",...i("description")}),o.description&&ze.jsx("p",{className:"text-sm text-red-500",children:o.description.message})]}),ze.jsxs("div",{className:"flex justify-end gap-2",children:[ze.jsx(mc,{type:"button",variant:"outline",onClick:r,disabled:n,children:""}),ze.jsx(mc,{type:"submit",disabled:n,children:n?"...":e?"":""})]})]})},IB=({isOpen:e,onClose:t,onSubmit:r,initialData:n,isSubmitting:i=!1,title:a})=>{const o=a||(n?"":"");return ze.jsx(ipe,{open:e,onOpenChange:t,children:ze.jsxs(G8,{className:"max-w-md",children:[ze.jsx(q8,{children:ze.jsx(W8,{children:o})}),ze.jsx(dge,{initialData:n,onSubmit:r,onCancel:t,isSubmitting:i})]})})},hge=()=>{const{searchTitle:e,searchIntensity:t,isCreateDialogOpen:r,isEditDialogOpen:n,editingItem:i,setSearchTitle:a,setSearchIntensity:o,clearSearch:u,openCreateDialog:c,closeCreateDialog:f,openEditDialog:h,closeEditDialog:p}=p9(),{data:m=[],isLoading:_}=o_e(),y={title:e||void 0,intensity:t||void 0},{data:E=[],isLoading:b}=s_e(y),S=u_e(),A=l_e(),R=c_e(),M=!!(e||t!==null),P=M?E:m,I=M?b:_,w=x=>{a(x.title||""),o(x.intensity??null)},U=()=>{u()},re=async x=>{try{await S.mutateAsync(x),f(),Hn.success("")}catch(N){Hn.error(""),console.error("Create error:",N)}},K=async x=>{if(i)try{await A.mutateAsync({id:i.id,data:x}),p(),Hn.success("")}catch(N){Hn.error(""),console.error("Update error:",N)}},H=async x=>{if(x&&window.confirm(`"${x.title}"`))try{await R.mutateAsync(x.id),Hn.success("")}catch(N){Hn.error(""),console.error("Delete error:",N)}};return ze.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[ze.jsx(wf,{className:"p-6",children:ze.jsxs("div",{className:"flex items-center justify-between",children:[ze.jsxs("div",{children:[ze.jsx("h1",{className:"text-2xl font-bold mb-2",children:""}),ze.jsx("p",{className:"text-gray-600",children:""})]}),ze.jsxs(mc,{onClick:c,children:[ze.jsx(wme,{className:"w-4 h-4 mr-2"}),""]})]})}),ze.jsx(cge,{onSearch:w,onClear:U}),M&&ze.jsx(wf,{className:"p-4 bg-blue-50 border-blue-200",children:ze.jsx("div",{className:"text-sm text-blue-800",children:b?"...":ze.jsxs(ze.Fragment,{children:[" ",P.length," ",e&&ze.jsxs("span",{className:"ml-2",children:['"',e,'"']}),t!==null&&ze.jsxs("span",{className:"ml-2",children:["",t]})]})})}),ze.jsx(fge,{items:P,isLoading:I,onEdit:h,onDelete:H}),ze.jsx(IB,{isOpen:r,onClose:f,onSubmit:re,isSubmitting:S.isPending,title:""}),ze.jsx(IB,{isOpen:n,onClose:p,onSubmit:K,initialData:i,isSubmitting:A.isPending,title:""})]})},kE=HV({component:QH}),pge=nE({getParentRoute:()=>kE,path:"/",component:nX}),vge=nE({getParentRoute:()=>kE,path:"/dashboard",component:Rme}),mge=nE({getParentRoute:()=>kE,path:"/sentiment-intensity",component:hge}),_ge=kE.addChildren([pge,vge,mge]),gge=QV({routeTree:_ge,defaultPreload:"intent",scrollRestoration:!0}),B9=document.getElementById("root");if(!B9)throw new Error("Failed to find the root element");oH.createRoot(B9).render(ze.jsx(z.StrictMode,{children:ze.jsx(rj,{client:KH,children:ze.jsxs(ZH,{children:[ze.jsx(tH,{router:gge}),ze.jsx($H,{position:"top-right",toastOptions:{duration:4e3,style:{background:"var(--card)",color:"var(--foreground)",border:"1px solid var(--border)"}}}),!1]})})}));
//# sourceMappingURL=index-BiExV_v5.js.map
