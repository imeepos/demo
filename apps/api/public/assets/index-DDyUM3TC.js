import{r as G1,g as Kr,a as y5,c as L_}from"./vendor-c5ypKtDW.js";function kV(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var kb={exports:{}},hv={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fw;function jV(){if(Fw)return hv;Fw=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:e,type:n,key:o,ref:i!==void 0?i:null,props:a}}return hv.Fragment=t,hv.jsx=r,hv.jsxs=r,hv}var Uw;function zV(){return Uw||(Uw=1,kb.exports=jV()),kb.exports}var A=zV(),Hp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},VV={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},HV=class{#e=VV;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Yf=new HV;function XV(e){setTimeout(e,0)}var sd=typeof window>"u"||"Deno"in globalThis;function Ra(){}function qV(e,t){return typeof e=="function"?e(t):e}function t2(e){return typeof e=="number"&&e>=0&&e!==1/0}function E5(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Dc(e,t){return typeof e=="function"?e(t):e}function Do(e,t){return typeof e=="function"?e(t):e}function kw(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:a,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==LC(o,t.options))return!1}else if(!Sg(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||a&&!a(t))}function jw(e,t){const{exact:r,status:n,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(ld(t.options.mutationKey)!==ld(a))return!1}else if(!Sg(t.options.mutationKey,a))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function LC(e,t){return(t?.queryKeyHashFn||ld)(e)}function ld(e){return JSON.stringify(e,(t,r)=>r2(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Sg(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Sg(e[r],t[r])):!1}var GV=Object.prototype.hasOwnProperty;function b5(e,t){if(e===t)return e;const r=zw(e)&&zw(t);if(!r&&!(r2(e)&&r2(t)))return t;const i=(r?e:Object.keys(e)).length,a=r?t:Object.keys(t),o=a.length,l=r?new Array(o):{};let c=0;for(let f=0;f<o;f++){const h=r?f:a[f],p=e[h],v=t[h];if(p===v){l[h]=p,(r?f<i:GV.call(e,h))&&c++;continue}if(p===null||v===null||typeof p!="object"||typeof v!="object"){l[h]=v;continue}const g=b5(p,v);l[h]=g,g===p&&c++}return i===o&&c===i?e:l}function ky(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function zw(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function r2(e){if(!Vw(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Vw(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Vw(e){return Object.prototype.toString.call(e)==="[object Object]"}function WV(e){return new Promise(t=>{Yf.setTimeout(t,e)})}function n2(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?b5(e,t):t}function $V(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function YV(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var BC=Symbol();function x5(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===BC?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function S5(e,t){return typeof e=="function"?e(...t):!!e}var ZV=class extends Hp{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!sd&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},FC=new ZV;function i2(){let e,t;const r=new Promise((i,a)=>{e=i,t=a});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}var KV=XV;function QV(){let e=[],t=0,r=l=>{l()},n=l=>{l()},i=KV;const a=l=>{t?e.push(l):i(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&i(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{i=l}}}var wi=QV(),JV=class extends Hp{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!sd&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},jy=new JV;function eH(e){return Math.min(1e3*2**e,3e4)}function T5(e){return(e??"online")==="online"?jy.isOnline():!0}var a2=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function A5(e){let t=!1,r=0,n;const i=i2(),a=()=>i.status!=="pending",o=E=>{if(!a()){const b=new a2(E);v(b),e.onCancel?.(b)}},l=()=>{t=!0},c=()=>{t=!1},f=()=>FC.isFocused()&&(e.networkMode==="always"||jy.isOnline())&&e.canRun(),h=()=>T5(e.networkMode)&&e.canRun(),p=E=>{a()||(n?.(),i.resolve(E))},v=E=>{a()||(n?.(),i.reject(E))},g=()=>new Promise(E=>{n=b=>{(a()||f())&&E(b)},e.onPause?.()}).then(()=>{n=void 0,a()||e.onContinue?.()}),_=()=>{if(a())return;let E;const b=r===0?e.initialPromise:void 0;try{E=b??e.fn()}catch(S){E=Promise.reject(S)}Promise.resolve(E).then(p).catch(S=>{if(a())return;const T=e.retry??(sd?0:3),C=e.retryDelay??eH,M=typeof C=="function"?C(r,S):C,D=T===!0||typeof T=="number"&&r<T||typeof T=="function"&&T(r,S);if(t||!D){v(S);return}r++,e.onFail?.(r,S),WV(M).then(()=>f()?void 0:g()).then(()=>{t?v(S):_()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n?.(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?_():g().then(_),i)}}var R5=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),t2(this.gcTime)&&(this.#e=Yf.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(sd?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Yf.clearTimeout(this.#e),this.#e=void 0)}},tH=class extends R5{#e;#t;#r;#i;#n;#o;#s;constructor(e){super(),this.#s=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#r=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Hw(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Hw(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=n2(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(Ra).catch(Ra):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Do(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===BC||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Dc(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!E5(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#s?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,n=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#s=!0,r.signal)})},i=()=>{const l=x5(this.options,t),f=(()=>{const h={client:this.#i,queryKey:this.queryKey,meta:this.meta};return n(h),h})();return this.#s=!1,this.options.persister?this.options.persister(l,f,this):l(f)},o=(()=>{const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:i};return n(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#a({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=A5({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof a2&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(l,c)=>{this.#a({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#n.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof a2){if(l.silent)return this.#n.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#a({type:"error",error:l}),this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#a(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...C5(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?n:void 0,n;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),wi.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function C5(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:T5(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Hw(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var rH=class extends Hp{constructor(e,t){super(),this.options=t,this.#e=e,this.#a=null,this.#s=i2(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#i=void 0;#n;#o;#s;#a;#m;#d;#h;#u;#c;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Xw(this.#t,this.options)?this.#f():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return o2(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return o2(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#E(),this.#b(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Do(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#t.setOptions(this.options),t._defaulted&&!ky(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&qw(this.#t,r,this.options,t)&&this.#f(),this.updateResult(),n&&(this.#t!==r||Do(this.options.enabled,this.#t)!==Do(t.enabled,this.#t)||Dc(this.options.staleTime,this.#t)!==Dc(t.staleTime,this.#t))&&this.#v();const i=this.#g();n&&(this.#t!==r||Do(this.options.enabled,this.#t)!==Do(t.enabled,this.#t)||i!==this.#l)&&this.#_(i)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return iH(this,r)&&(this.#i=r,this.#o=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#i}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t?.(n),n==="promise"&&!this.options.experimental_prefetchInRender&&this.#s.status==="pending"&&this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,n))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#f({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#f(e){this.#x();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Ra)),t}#v(){this.#E();const e=Dc(this.options.staleTime,this.#t);if(sd||this.#i.isStale||!t2(e))return;const r=E5(this.#i.dataUpdatedAt,e)+1;this.#u=Yf.setTimeout(()=>{this.#i.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#_(e){this.#b(),this.#l=e,!(sd||Do(this.options.enabled,this.#t)===!1||!t2(this.#l)||this.#l===0)&&(this.#c=Yf.setInterval(()=>{(this.options.refetchIntervalInBackground||FC.isFocused())&&this.#f()},this.#l))}#y(){this.#v(),this.#_(this.#g())}#E(){this.#u&&(Yf.clearTimeout(this.#u),this.#u=void 0)}#b(){this.#c&&(Yf.clearInterval(this.#c),this.#c=void 0)}createResult(e,t){const r=this.#t,n=this.options,i=this.#i,a=this.#n,o=this.#o,c=e!==r?e.state:this.#r,{state:f}=e;let h={...f},p=!1,v;if(t._optimisticResults){const j=this.hasListeners(),re=!j&&Xw(e,t),Q=j&&qw(e,r,t,n);(re||Q)&&(h={...h,...C5(f.data,e.options)}),t._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:g,errorUpdatedAt:_,status:E}=h;v=h.data;let b=!1;if(t.placeholderData!==void 0&&v===void 0&&E==="pending"){let j;i?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(j=i.data,b=!0):j=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,j!==void 0&&(E="success",v=n2(i?.data,j,t),p=!0)}if(t.select&&v!==void 0&&!b)if(i&&v===a?.data&&t.select===this.#m)v=this.#d;else try{this.#m=t.select,v=t.select(v),v=n2(i?.data,v,t),this.#d=v,this.#a=null}catch(j){this.#a=j}this.#a&&(g=this.#a,v=this.#d,_=Date.now(),E="error");const S=h.fetchStatus==="fetching",T=E==="pending",C=E==="error",M=T&&S,D=v!==void 0,N={status:E,fetchStatus:h.fetchStatus,isPending:T,isSuccess:E==="success",isError:C,isInitialLoading:M,isLoading:M,data:v,dataUpdatedAt:h.dataUpdatedAt,error:g,errorUpdatedAt:_,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:S,isRefetching:S&&!T,isLoadingError:C&&!D,isPaused:h.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:C&&D,isStale:UC(e,t),refetch:this.refetch,promise:this.#s,isEnabled:Do(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const j=X=>{N.status==="error"?X.reject(N.error):N.data!==void 0&&X.resolve(N.data)},re=()=>{const X=this.#s=N.promise=i2();j(X)},Q=this.#s;switch(Q.status){case"pending":e.queryHash===r.queryHash&&j(Q);break;case"fulfilled":(N.status==="error"||N.data!==Q.value)&&re();break;case"rejected":(N.status!=="error"||N.error!==Q.reason)&&re();break}}return N}updateResult(){const e=this.#i,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#o=this.options,this.#n.data!==void 0&&(this.#h=this.#t),ky(t,e))return;this.#i=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!this.#p.size)return!0;const a=new Set(i??this.#p);return this.options.throwOnError&&a.add("error"),Object.keys(this.#i).some(o=>{const l=o;return this.#i[l]!==e[l]&&a.has(l)})};this.#S({listeners:r()})}#x(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#S(e){wi.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function nH(e,t){return Do(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Xw(e,t){return nH(e,t)||e.state.data!==void 0&&o2(e,t,t.refetchOnMount)}function o2(e,t,r){if(Do(t.enabled,e)!==!1&&Dc(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&UC(e,t)}return!1}function qw(e,t,r,n){return(e!==t||Do(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&UC(e,r)}function UC(e,t){return Do(t.enabled,e)!==!1&&e.isStaleByTime(Dc(t.staleTime,e))}function iH(e,t){return!ky(e.getCurrentResult(),t)}function Gw(e){return{onFetch:(t,r)=>{const n=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,a=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const f=async()=>{let h=!1;const p=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(t.signal.aborted?h=!0:t.signal.addEventListener("abort",()=>{h=!0}),t.signal)})},v=x5(t.options,t.fetchOptions),g=async(_,E,b)=>{if(h)return Promise.reject();if(E==null&&_.pages.length)return Promise.resolve(_);const T=(()=>{const I={client:t.client,queryKey:t.queryKey,pageParam:E,direction:b?"backward":"forward",meta:t.options.meta};return p(I),I})(),C=await v(T),{maxPages:M}=t.options,D=b?YV:$V;return{pages:D(_.pages,C,M),pageParams:D(_.pageParams,E,M)}};if(i&&a.length){const _=i==="backward",E=_?aH:Ww,b={pages:a,pageParams:o},S=E(n,b);l=await g(b,S,_)}else{const _=e??a.length;do{const E=c===0?o[0]??n.initialPageParam:Ww(n,l);if(c>0&&E==null)break;l=await g(l,E),c++}while(c<_)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=f}}}function Ww(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function aH(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var oH=class extends R5{#e;#t;#r;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||O5(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=A5({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(a,o)=>{this.#n({type:"failed",failureCount:a,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",i=!this.#i.canStart();try{if(n)t();else{this.#n({type:"pending",variables:e,isPaused:i}),await this.#r.config.onMutate?.(e,this,r);const o=await this.options.onMutate?.(e,r);o!==this.state.context&&this.#n({type:"pending",context:o,variables:e,isPaused:i})}const a=await this.#i.start();return await this.#r.config.onSuccess?.(a,e,this.state.context,this,r),await this.options.onSuccess?.(a,e,this.state.context,r),await this.#r.config.onSettled?.(a,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(a,null,e,this.state.context,r),this.#n({type:"success",data:a}),a}catch(a){try{throw await this.#r.config.onError?.(a,e,this.state.context,this,r),await this.options.onError?.(a,e,this.state.context,r),await this.#r.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,a,e,this.state.context,r),a}finally{this.#n({type:"error",error:a})}}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),wi.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function O5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var sH=class extends Hp{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const n=new oH({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#e.add(e);const t=B_(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=B_(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=B_(e);if(typeof t=="string"){const n=this.#t.get(t)?.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=B_(e);return typeof t=="string"?this.#t.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){wi.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>jw(t,r))}findAll(e={}){return this.getAll().filter(t=>jw(e,t))}notify(e){wi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return wi.batch(()=>Promise.all(e.map(t=>t.continue().catch(Ra))))}};function B_(e){return e.options.scope?.id}var lH=class extends Hp{#e;#t=void 0;#r;#i;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),ky(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&ld(r.mutationKey)!==ld(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#o(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#o()}mutate(t,r){return this.#i=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??O5();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#o(t){wi.batch(()=>{if(this.#i&&this.hasListeners()){const r=this.#t.variables,n=this.#t.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#i.onSuccess?.(t.data,r,n,i),this.#i.onSettled?.(t.data,null,r,n,i)):t?.type==="error"&&(this.#i.onError?.(t.error,r,n,i),this.#i.onSettled?.(void 0,t.error,r,n,i))}this.listeners.forEach(r=>{r(this.#t)})})}},uH=class extends Hp{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const n=t.queryKey,i=t.queryHash??LC(n,t);let a=this.get(i);return a||(a=new tH({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){wi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>kw(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>kw(e,r)):t}notify(e){wi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){wi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){wi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},cH=class{#e;#t;#r;#i;#n;#o;#s;#a;constructor(e={}){this.#e=e.queryCache||new uH,this.#t=e.mutationCache||new sH,this.#r=e.defaultOptions||{},this.#i=new Map,this.#n=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#s=FC.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=jy.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#s?.(),this.#s=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Dc(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=this.#e.get(n.queryHash)?.state.data,o=qV(t,a);if(o!==void 0)return this.#e.build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return wi.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;wi.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return wi.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=wi.batch(()=>this.#e.findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(Ra).catch(Ra)}invalidateQueries(e,t={}){return wi.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=wi.batch(()=>this.#e.findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,r);return r.throwOnError||(a=a.catch(Ra)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(Ra)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(Dc(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ra).catch(Ra)}fetchInfiniteQuery(e){return e.behavior=Gw(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ra).catch(Ra)}ensureInfiniteQueryData(e){return e.behavior=Gw(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return jy.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#i.set(ld(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#i.values()],r={};return t.forEach(n=>{Sg(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(ld(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(n=>{Sg(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=LC(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===BC&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},U=G1();const cn=Kr(U),w5=kV({__proto__:null,default:cn},[U]);var N5=U.createContext(void 0),Zc=e=>{const t=U.useContext(N5);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},fH=({client:e,children:t})=>(U.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),A.jsx(N5.Provider,{value:e,children:t})),M5=U.createContext(!1),dH=()=>U.useContext(M5);M5.Provider;function hH(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var pH=U.createContext(hH()),mH=()=>U.useContext(pH),vH=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},gH=e=>{U.useEffect(()=>{e.clearReset()},[e])},_H=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&e.data===void 0||S5(r,[e.error,n])),yH=e=>{if(e.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},EH=(e,t)=>e.isLoading&&e.isFetching&&!t,bH=(e,t)=>e?.suspense&&t.isPending,$w=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function xH(e,t,r){const n=dH(),i=mH(),a=Zc(),o=a.defaultQueryOptions(e);a.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=n?"isRestoring":"optimistic",yH(o),vH(o,i),gH(i);const l=!a.getQueryCache().get(o.queryHash),[c]=U.useState(()=>new t(a,o)),f=c.getOptimisticResult(o),h=!n&&e.subscribed!==!1;if(U.useSyncExternalStore(U.useCallback(p=>{const v=h?c.subscribe(wi.batchCalls(p)):Ra;return c.updateResult(),v},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),U.useEffect(()=>{c.setOptions(o)},[o,c]),bH(o,f))throw $w(o,c,i);if(_H({result:f,errorResetBoundary:i,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw f.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(o,f),o.experimental_prefetchInRender&&!sd&&EH(f,n)&&(l?$w(o,c,i):a.getQueryCache().get(o.queryHash)?.promise)?.catch(Ra).finally(()=>{c.updateResult()}),o.notifyOnChangeProps?f:c.trackResult(f)}function kC(e,t){return xH(e,rH)}function Xp(e,t){const r=Zc(),[n]=U.useState(()=>new lH(r,e));U.useEffect(()=>{n.setOptions(e)},[n,e]);const i=U.useSyncExternalStore(U.useCallback(o=>n.subscribe(wi.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=U.useCallback((o,l)=>{n.mutate(o,l).catch(Ra)},[n]);if(i.error&&S5(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}const lp=new WeakMap,vy=new WeakMap,zy={current:[]};let jb=!1,fg=0;const Yv=new Set,F_=new Map;function I5(e){const t=Array.from(e).sort((r,n)=>r instanceof up&&r.options.deps.includes(n)?1:n instanceof up&&n.options.deps.includes(r)?-1:0);for(const r of t){if(zy.current.includes(r))continue;zy.current.push(r),r.recompute();const n=vy.get(r);if(n)for(const i of n){const a=lp.get(i);a&&I5(a)}}}function SH(e){const t={prevVal:e.prevState,currentVal:e.state};for(const r of e.listeners)r(t)}function TH(e){const t={prevVal:e.prevState,currentVal:e.state};for(const r of e.listeners)r(t)}function P5(e){if(fg>0&&!F_.has(e)&&F_.set(e,e.prevState),Yv.add(e),!(fg>0)&&!jb)try{for(jb=!0;Yv.size>0;){const t=Array.from(Yv);Yv.clear();for(const r of t){const n=F_.get(r)??r.prevState;r.prevState=n,SH(r)}for(const r of t){const n=lp.get(r);n&&(zy.current.push(r),I5(n))}for(const r of t){const n=lp.get(r);if(n)for(const i of n)TH(i)}}}finally{jb=!1,zy.current=[],F_.clear()}}function dg(e){fg++;try{e()}finally{if(fg--,fg===0){const t=Yv.values().next().value;t&&P5(t)}}}function AH(e){return typeof e=="function"}class s2{constructor(t,r){this.listeners=new Set,this.subscribe=n=>{var i,a;this.listeners.add(n);const o=(a=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:a.call(i,n,this);return()=>{this.listeners.delete(n),o?.()}},this.prevState=t,this.state=t,this.options=r}setState(t){var r,n,i;this.prevState=this.state,(r=this.options)!=null&&r.updateFn?this.state=this.options.updateFn(this.prevState)(t):AH(t)?this.state=t(this.prevState):this.state=t,(i=(n=this.options)==null?void 0:n.onUpdate)==null||i.call(n),P5(this)}}class up{constructor(t){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const r=this.options.deps.length,n=new Array(r),i=new Array(r);for(let a=0;a<r;a++){const o=this.options.deps[a];n[a]=o.prevState,i[a]=o.state}return this.lastSeenDepValues=i,{prevDepVals:n,currDepVals:i,prevVal:this.prevState??void 0}},this.recompute=()=>{var r,n;this.prevState=this.state;const i=this.getDepVals();this.state=this.options.fn(i),(n=(r=this.options).onUpdate)==null||n.call(r)},this.checkIfRecalculationNeededDeeply=()=>{for(const a of this.options.deps)a instanceof up&&a.checkIfRecalculationNeededDeeply();let r=!1;const n=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let a=0;a<i.length;a++)if(i[a]!==n[a]){r=!0;break}r&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const r of this._subscriptions)r()}),this.subscribe=r=>{var n,i;this.listeners.add(r);const a=(i=(n=this.options).onSubscribe)==null?void 0:i.call(n,r,this);return()=>{this.listeners.delete(r),a?.()}},this.options=t,this.state=t.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(t=this.options.deps){for(const r of t)if(r instanceof up)r.registerOnGraph(),this.registerOnGraph(r.options.deps);else if(r instanceof s2){let n=lp.get(r);n||(n=new Set,lp.set(r,n)),n.add(this);let i=vy.get(this);i||(i=new Set,vy.set(this,i)),i.add(r)}}unregisterFromGraph(t=this.options.deps){for(const r of t)if(r instanceof up)this.unregisterFromGraph(r.options.deps);else if(r instanceof s2){const n=lp.get(r);n&&n.delete(this);const i=vy.get(this);i&&i.delete(r)}}}const Lc="__TSR_index",Yw="popstate",Zw="beforeunload";function RH(e){let t=e.getLocation();const r=new Set,n=o=>{t=e.getLocation(),r.forEach(l=>l({location:t,action:o}))},i=o=>{e.notifyOnIndexChange??!0?n(o):t=e.getLocation()},a=async({task:o,navigateOpts:l,...c})=>{if(l?.ignoreBlocker??!1){o();return}const h=e.getBlockers?.()??[],p=c.type==="PUSH"||c.type==="REPLACE";if(typeof document<"u"&&h.length&&p)for(const v of h){const g=Vy(c.path,c.state);if(await v.blockerFn({currentLocation:t,nextLocation:g,action:c.type})){e.onBlocked?.();return}}o()};return{get location(){return t},get length(){return e.getLength()},subscribers:r,subscribe:o=>(r.add(o),()=>{r.delete(o)}),push:(o,l,c)=>{const f=t.state[Lc];l=Kw(f+1,l),a({task:()=>{e.pushState(o,l),n({type:"PUSH"})},navigateOpts:c,type:"PUSH",path:o,state:l})},replace:(o,l,c)=>{const f=t.state[Lc];l=Kw(f,l),a({task:()=>{e.replaceState(o,l),n({type:"REPLACE"})},navigateOpts:c,type:"REPLACE",path:o,state:l})},go:(o,l)=>{a({task:()=>{e.go(o),i({type:"GO",index:o})},navigateOpts:l,type:"GO"})},back:o=>{a({task:()=>{e.back(o?.ignoreBlocker??!1),i({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{a({task:()=>{e.forward(o?.ignoreBlocker??!1),i({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>t.state[Lc]!==0,createHref:o=>e.createHref(o),block:o=>{if(!e.setBlockers)return()=>{};const l=e.getBlockers?.()??[];return e.setBlockers([...l,o]),()=>{const c=e.getBlockers?.()??[];e.setBlockers?.(c.filter(f=>f!==o))}},flush:()=>e.flush?.(),destroy:()=>e.destroy?.(),notify:n}}function Kw(e,t){t||(t={});const r=jC();return{...t,key:r,__TSR_key:r,[Lc]:e}}function CH(e){const t=typeof document<"u"?window:void 0,r=t.history.pushState,n=t.history.replaceState;let i=[];const a=()=>i,o=j=>i=j,l=(j=>j),c=(()=>Vy(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state));if(!t.history.state?.__TSR_key&&!t.history.state?.key){const j=jC();t.history.replaceState({[Lc]:0,key:j,__TSR_key:j},"")}let f=c(),h,p=!1,v=!1,g=!1,_=!1;const E=()=>f;let b,S;const T=()=>{b&&(N._ignoreSubscribers=!0,(b.isPush?t.history.pushState:t.history.replaceState)(b.state,"",b.href),N._ignoreSubscribers=!1,b=void 0,S=void 0,h=void 0)},C=(j,re,Q)=>{const X=l(re);S||(h=f),f=Vy(re,Q),b={href:X,state:Q,isPush:b?.isPush||j==="push"},S||(S=Promise.resolve().then(()=>T()))},M=j=>{f=c(),N.notify({type:j})},D=async()=>{if(v){v=!1;return}const j=c(),re=j.state[Lc]-f.state[Lc],Q=re===1,X=re===-1,R=!Q&&!X||p;p=!1;const P=R?"GO":X?"BACK":"FORWARD",V=R?{type:"GO",index:re}:{type:X?"BACK":"FORWARD"};if(g)g=!1;else{const le=a();if(typeof document<"u"&&le.length){for(const w of le)if(await w.blockerFn({currentLocation:f,nextLocation:j,action:P})){v=!0,t.history.go(1),N.notify(V);return}}}f=c(),N.notify(V)},I=j=>{if(_){_=!1;return}let re=!1;const Q=a();if(typeof document<"u"&&Q.length)for(const X of Q){const R=X.enableBeforeUnload??!0;if(R===!0){re=!0;break}if(typeof R=="function"&&R()===!0){re=!0;break}}if(re)return j.preventDefault(),j.returnValue=""},N=RH({getLocation:E,getLength:()=>t.history.length,pushState:(j,re)=>C("push",j,re),replaceState:(j,re)=>C("replace",j,re),back:j=>(j&&(g=!0),_=!0,t.history.back()),forward:j=>{j&&(g=!0),_=!0,t.history.forward()},go:j=>{p=!0,t.history.go(j)},createHref:j=>l(j),flush:T,destroy:()=>{t.history.pushState=r,t.history.replaceState=n,t.removeEventListener(Zw,I,{capture:!0}),t.removeEventListener(Yw,D)},onBlocked:()=>{h&&f!==h&&(f=h)},getBlockers:a,setBlockers:o,notifyOnIndexChange:!1});return t.addEventListener(Zw,I,{capture:!0}),t.addEventListener(Yw,D),t.history.pushState=function(...j){const re=r.apply(t.history,j);return N._ignoreSubscribers||M("PUSH"),re},t.history.replaceState=function(...j){const re=n.apply(t.history,j);return N._ignoreSubscribers||M("REPLACE"),re},N}function Vy(e,t){const r=e.indexOf("#"),n=e.indexOf("?"),i=jC();return{href:e,pathname:e.substring(0,r>0?n>0?Math.min(r,n):r:n>0?n:e.length),hash:r>-1?e.substring(r):"",search:n>-1?e.slice(n,r===-1?void 0:r):"",state:t||{[Lc]:0,key:i,__TSR_key:i}}}function jC(){return(Math.random()+1).toString(36).substring(7)}function l2(e){return e[e.length-1]}function OH(e){return typeof e=="function"}function ed(e,t){return OH(e)?e(t):e}const wH=Object.prototype.hasOwnProperty;function Io(e,t){if(e===t)return e;const r=t,n=eN(e)&&eN(r);if(!n&&!(Hy(e)&&Hy(r)))return r;const i=n?e:Qw(e);if(!i)return r;const a=n?r:Qw(r);if(!a)return r;const o=i.length,l=a.length,c=n?new Array(l):{};let f=0;for(let h=0;h<l;h++){const p=n?h:a[h],v=e[p],g=r[p];if(v===g){c[p]=v,(n?h<o:wH.call(e,p))&&f++;continue}if(v===null||g===null||typeof v!="object"||typeof g!="object"){c[p]=g;continue}const _=Io(v,g);c[p]=_,_===v&&f++}return o===l&&f===o?e:c}function Qw(e){const t=[],r=Object.getOwnPropertyNames(e);for(const i of r){if(!Object.prototype.propertyIsEnumerable.call(e,i))return!1;t.push(i)}const n=Object.getOwnPropertySymbols(e);for(const i of n){if(!Object.prototype.propertyIsEnumerable.call(e,i))return!1;t.push(i)}return t}function Hy(e){if(!Jw(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const r=t.prototype;return!(!Jw(r)||!r.hasOwnProperty("isPrototypeOf"))}function Jw(e){return Object.prototype.toString.call(e)==="[object Object]"}function eN(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function td(e,t,r){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!td(e[n],t[n],r))return!1;return!0}if(Hy(e)&&Hy(t)){const n=r?.ignoreUndefined??!0;if(r?.partial){for(const o in t)if((!n||t[o]!==void 0)&&!td(e[o],t[o],r))return!1;return!0}let i=0;if(!n)i=Object.keys(e).length;else for(const o in e)e[o]!==void 0&&i++;let a=0;for(const o in t)if((!n||t[o]!==void 0)&&(a++,a>i||!td(e[o],t[o],r)))return!1;return i===a}return!1}function Ep(e){let t,r;const n=new Promise((i,a)=>{t=i,r=a});return n.status="pending",n.resolve=i=>{n.status="resolved",n.value=i,t(i),e?.(i)},n.reject=i=>{n.status="rejected",r(i)},n}function Bc(e){return!!(e&&typeof e=="object"&&typeof e.then=="function")}var NH="Invariant failed";function fu(e,t){if(!e)throw new Error(NH)}const ll=0,ud=1,bp=2,xp=3;function lu(e){return zC(e.filter(t=>t!==void 0).join("/"))}function zC(e){return e.replace(/\/{2,}/g,"/")}function VC(e){return e==="/"?e:e.replace(/^\/{1,}/,"")}function Fc(e){return e==="/"?e:e.replace(/\/{1,}$/,"")}function u2(e){return Fc(VC(e))}function Xy(e,t){return e?.endsWith("/")&&e!=="/"&&e!==`${t}/`?e.slice(0,-1):e}function MH(e,t,r){return Xy(e,r)===Xy(t,r)}function IH(e){const{type:t,value:r}=e;if(t===ll)return r;const{prefixSegment:n,suffixSegment:i}=e;if(t===ud){const a=r.substring(1);if(n&&i)return`${n}{$${a}}${i}`;if(n)return`${n}{$${a}}`;if(i)return`{$${a}}${i}`}if(t===xp){const a=r.substring(1);return n&&i?`${n}{-$${a}}${i}`:n?`${n}{-$${a}}`:i?`{-$${a}}${i}`:`{-$${a}}`}if(t===bp){if(n&&i)return`${n}{$}${i}`;if(n)return`${n}{$}`;if(i)return`{$}${i}`}return r}function PH({base:e,to:t,trailingSlash:r="never",parseCache:n}){let i=D5(e,n).slice();const a=W1(t,n);i.length>1&&l2(i)?.value==="/"&&i.pop();for(let c=0,f=a.length;c<f;c++){const h=a[c],p=h.value;p==="/"?c?c===f-1&&i.push(h):i=[h]:p===".."?i.pop():p==="."||i.push(h)}i.length>1&&(l2(i).value==="/"?r==="never"&&i.pop():r==="always"&&i.push({type:ll,value:"/"}));const o=i.map(IH);return lu(o)}const D5=(e,t)=>L5(e,t,!0),W1=(e,t)=>L5(e,t,!1),L5=(e,t,r)=>{if(!e)return[];const n=t?.get(e);if(n)return n;const i=kH(e,r);return t?.set(e,i),i},DH=/^\$.{1,}$/,LH=/^(.*?)\{(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,BH=/^(.*?)\{-(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,FH=/^\$$/,UH=/^(.*?)\{\$\}(.*)$/;function kH(e,t){e=zC(e);const r=[];if(e.slice(0,1)==="/"&&(e=e.substring(1),r.push({type:ll,value:"/"})),!e)return r;const n=e.split("/").filter(Boolean);return r.push(...n.map(i=>{const a=!t&&i.slice(-1)==="_"?i.slice(0,-1):i,o=a.match(UH);if(o){const f=o[1],h=o[2];return{type:bp,value:"$",prefixSegment:f||void 0,suffixSegment:h||void 0}}const l=a.match(BH);if(l){const f=l[1],h=l[2],p=l[3];return{type:xp,value:h,prefixSegment:f||void 0,suffixSegment:p||void 0}}const c=a.match(LH);if(c){const f=c[1],h=c[2],p=c[3];return{type:ud,value:""+h,prefixSegment:f||void 0,suffixSegment:p||void 0}}if(DH.test(a)){const f=a.substring(1);return{type:ud,value:"$"+f,prefixSegment:void 0,suffixSegment:void 0}}return FH.test(a)?{type:bp,value:"$",prefixSegment:void 0,suffixSegment:void 0}:{type:ll,value:a.includes("%25")?a.split("%25").map(f=>decodeURI(f)).join("%25"):decodeURI(a)}})),e.slice(-1)==="/"&&(e=e.substring(1),r.push({type:ll,value:"/"})),r}function U_({path:e,params:t,leaveWildcards:r,leaveParams:n,decodeCharMap:i,parseCache:a}){const o=W1(e,a);function l(p){const v=t[p],g=typeof v=="string";return p==="*"||p==="_splat"?g?encodeURI(v):v:g?jH(v,i):v}let c=!1;const f={},h=lu(o.map(p=>{if(p.type===ll)return p.value;if(p.type===bp){f._splat=t._splat,f["*"]=t._splat;const v=p.prefixSegment||"",g=p.suffixSegment||"";if(!("_splat"in t))return c=!0,r?`${v}${p.value}${g}`:v||g?`${v}${g}`:void 0;const _=l("_splat");return r?`${v}${p.value}${_??""}${g}`:`${v}${_}${g}`}if(p.type===ud){const v=p.value.substring(1);!c&&!(v in t)&&(c=!0),f[v]=t[v];const g=p.prefixSegment||"",_=p.suffixSegment||"";if(n){const E=l(p.value);return`${g}${p.value}${E??""}${_}`}return`${g}${l(v)??"undefined"}${_}`}if(p.type===xp){const v=p.value.substring(1),g=p.prefixSegment||"",_=p.suffixSegment||"";if(!(v in t)||t[v]==null)return r?`${g}${v}${_}`:g||_?`${g}${_}`:void 0;if(f[v]=t[v],n){const E=l(p.value);return`${g}${p.value}${E??""}${_}`}return r?`${g}${v}${l(v)??""}${_}`:`${g}${l(v)??""}${_}`}return p.value}));return{usedParams:f,interpolatedPath:h,isMissingParams:c}}function jH(e,t){let r=encodeURIComponent(e);if(t)for(const[n,i]of t)r=r.replaceAll(n,i);return r}function c2(e,t,r){const n=zH(e,t,r);if(!(t.to&&!n))return n??{}}function zH(e,{to:t,fuzzy:r,caseSensitive:n},i){const a=t,o=D5(e.startsWith("/")?e:`/${e}`,i),l=W1(a.startsWith("/")?a:`/${a}`,i),c={};return VH(o,l,c,r,n)?c:void 0}function VH(e,t,r,n,i){let a=0,o=0;for(;a<e.length||o<t.length;){const l=e[a],c=t[o];if(c){if(c.type===bp){const f=e.slice(a);let h;if(c.prefixSegment||c.suffixSegment){if(!l)return!1;const p=c.prefixSegment||"",v=c.suffixSegment||"",g=l.value;if("prefixSegment"in c&&!g.startsWith(p)||"suffixSegment"in c&&!e[e.length-1]?.value.endsWith(v))return!1;let _=decodeURI(lu(f.map(E=>E.value)));p&&_.startsWith(p)&&(_=_.slice(p.length)),v&&_.endsWith(v)&&(_=_.slice(0,_.length-v.length)),h=_}else h=decodeURI(lu(f.map(p=>p.value)));return r["*"]=h,r._splat=h,!0}if(c.type===ll){if(c.value==="/"&&!l?.value){o++;continue}if(l){if(i){if(c.value!==l.value)return!1}else if(c.value.toLowerCase()!==l.value.toLowerCase())return!1;a++,o++;continue}else return!1}if(c.type===ud){if(!l||l.value==="/")return!1;let f="",h=!1;if(c.prefixSegment||c.suffixSegment){const p=c.prefixSegment||"",v=c.suffixSegment||"",g=l.value;if(p&&!g.startsWith(p)||v&&!g.endsWith(v))return!1;let _=g;p&&_.startsWith(p)&&(_=_.slice(p.length)),v&&_.endsWith(v)&&(_=_.slice(0,_.length-v.length)),f=decodeURIComponent(_),h=!0}else f=decodeURIComponent(l.value),h=!0;h&&(r[c.value.substring(1)]=f,a++),o++;continue}if(c.type===xp){if(!l){o++;continue}if(l.value==="/"){o++;continue}let f="",h=!1;if(c.prefixSegment||c.suffixSegment){const p=c.prefixSegment||"",v=c.suffixSegment||"",g=l.value;if((!p||g.startsWith(p))&&(!v||g.endsWith(v))){let _=g;p&&_.startsWith(p)&&(_=_.slice(p.length)),v&&_.endsWith(v)&&(_=_.slice(0,_.length-v.length)),f=decodeURIComponent(_),h=!0}}else{let p=!0;for(let v=o+1;v<t.length;v++){const g=t[v];if(g?.type===ll&&g.value===l.value){p=!1;break}if(g?.type===ud||g?.type===bp){e.length<t.length&&(p=!1);break}}p&&(f=decodeURIComponent(l.value),h=!0)}h&&(r[c.value.substring(1)]=f,a++),o++;continue}}if(a<e.length&&o>=t.length)return r["**"]=lu(e.slice(a).map(f=>f.value)),!!n&&t[t.length-1]?.value!=="/";if(o<t.length&&a>=e.length){for(let f=o;f<t.length;f++)if(t[f]?.type!==xp)return!1;break}break}return!0}const HH=.75,XH=1,qH=.5,GH=.4,WH=.25,$H=.2,YH=.05,ZH=.02,KH=.01,tN=2e-4,rN=1e-4;function nN(e,t){return e.prefixSegment&&e.suffixSegment?t+YH+tN*e.prefixSegment.length+rN*e.suffixSegment.length:e.prefixSegment?t+ZH+tN*e.prefixSegment.length:e.suffixSegment?t+KH+rN*e.suffixSegment.length:t}function QH(e){const t=[];return e.forEach((n,i)=>{if(n.isRoot||!n.path)return;const a=VC(n.fullPath);let o=W1(a),l=0;for(;o.length>l+1&&o[l]?.value==="/";)l++;l>0&&(o=o.slice(l));let c=0,f=!1;const h=o.map((p,v)=>{if(p.value==="/")return HH;if(p.type===ll)return XH;let g;p.type===ud?g=qH:p.type===xp?(g=GH,c++):g=WH;for(let _=v+1;_<o.length;_++){const E=o[_];if(E.type===ll&&E.value!=="/")return f=!0,nN(p,g+$H)}return nN(p,g)});t.push({child:n,trimmed:a,parsed:o,index:i,scores:h,optionalParamCount:c,hasStaticAfter:f})}),t.sort((n,i)=>{const a=Math.min(n.scores.length,i.scores.length);for(let o=0;o<a;o++)if(n.scores[o]!==i.scores[o])return i.scores[o]-n.scores[o];if(n.scores.length!==i.scores.length){if(n.optionalParamCount!==i.optionalParamCount){if(n.hasStaticAfter===i.hasStaticAfter)return n.optionalParamCount-i.optionalParamCount;if(n.hasStaticAfter&&!i.hasStaticAfter)return-1;if(!n.hasStaticAfter&&i.hasStaticAfter)return 1}return i.scores.length-n.scores.length}for(let o=0;o<a;o++)if(n.parsed[o].value!==i.parsed[o].value)return n.parsed[o].value>i.parsed[o].value?1:-1;return n.index-i.index}).map((n,i)=>(n.child.rank=i,n.child))}function JH({routeTree:e,initRoute:t}){const r={},n={},i=o=>{o.forEach((l,c)=>{t?.(l,c);const f=r[l.id];if(fu(!f,`Duplicate routes found with id: ${String(l.id)}`),r[l.id]=l,!l.isRoot&&l.path){const p=Fc(l.fullPath);(!n[p]||l.fullPath.endsWith("/"))&&(n[p]=l)}const h=l.children;h?.length&&i(h)})};i([e]);const a=QH(Object.values(r));return{routesById:r,routesByPath:n,flatRoutes:a}}function dl(e){return!!e?.isNotFound}function eX(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const qy="tsr-scroll-restoration-v1_3",tX=(e,t)=>{let r;return(...n)=>{r||(r=setTimeout(()=>{e(...n),r=null},t))}};function rX(){const e=eX();if(!e)return null;const t=e.getItem(qy);let r=t?JSON.parse(t):{};return{state:r,set:n=>(r=ed(n,r)||r,e.setItem(qy,JSON.stringify(r)))}}const k_=rX(),f2=e=>e.state.__TSR_key||e.href;function nX(e){const t=[];let r;for(;r=e.parentNode;)t.push(`${e.tagName}:nth-child(${Array.prototype.indexOf.call(r.children,e)+1})`),e=r;return`${t.reverse().join(" > ")}`.toLowerCase()}let Gy=!1;function B5({storageKey:e,key:t,behavior:r,shouldScrollRestoration:n,scrollToTopSelectors:i,location:a}){let o;try{o=JSON.parse(sessionStorage.getItem(e)||"{}")}catch(f){console.error(f);return}const l=t||window.history.state?.__TSR_key,c=o[l];Gy=!0;e:{if(n&&c&&Object.keys(c).length>0){for(const p in c){const v=c[p];if(p==="window")window.scrollTo({top:v.scrollY,left:v.scrollX,behavior:r});else if(p){const g=document.querySelector(p);g&&(g.scrollLeft=v.scrollX,g.scrollTop=v.scrollY)}}break e}const f=(a??window.location).hash.split("#",2)[1];if(f){const p=window.history.state?.__hashScrollIntoViewOptions??!0;if(p){const v=document.getElementById(f);v&&v.scrollIntoView(p)}break e}const h={top:0,left:0,behavior:r};if(window.scrollTo(h),i)for(const p of i){if(p==="window")continue;const v=typeof p=="function"?p():document.querySelector(p);v&&v.scrollTo(h)}}Gy=!1}function iX(e,t){if(!k_&&!e.isServer||((e.options.scrollRestoration??!1)&&(e.isScrollRestoring=!0),e.isServer||e.isScrollRestorationSetup||!k_))return;e.isScrollRestorationSetup=!0,Gy=!1;const n=e.options.getScrollRestorationKey||f2;window.history.scrollRestoration="manual";const i=a=>{if(Gy||!e.isScrollRestoring)return;let o="";if(a.target===document||a.target===window)o="window";else{const c=a.target.getAttribute("data-scroll-restoration-id");c?o=`[data-scroll-restoration-id="${c}"]`:o=nX(a.target)}const l=n(e.state.location);k_.set(c=>{const f=c[l]||={},h=f[o]||={};if(o==="window")h.scrollX=window.scrollX||0,h.scrollY=window.scrollY||0;else if(o){const p=document.querySelector(o);p&&(h.scrollX=p.scrollLeft||0,h.scrollY=p.scrollTop||0)}return c})};typeof document<"u"&&document.addEventListener("scroll",tX(i,100),!0),e.subscribe("onRendered",a=>{const o=n(a.toLocation);if(!e.resetNextScroll){e.resetNextScroll=!0;return}typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation})||(B5({storageKey:qy,key:o,behavior:e.options.scrollRestorationBehavior,shouldScrollRestoration:e.isScrollRestoring,scrollToTopSelectors:e.options.scrollToTopSelectors,location:e.history.location}),e.isScrollRestoring&&k_.set(l=>(l[o]||={},l)))})}function aX(e){if(typeof document<"u"&&document.querySelector){const t=e.state.location.state.__hashScrollIntoViewOptions??!0;if(t&&e.state.location.hash!==""){const r=document.getElementById(e.state.location.hash);r&&r.scrollIntoView(t)}}}function oX(e,t=String){const r=new URLSearchParams;for(const n in e){const i=e[n];i!==void 0&&r.set(n,t(i))}return r.toString()}function zb(e){return e?e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e:""}function sX(e){const t=new URLSearchParams(e),r={};for(const[n,i]of t.entries()){const a=r[n];a==null?r[n]=zb(i):Array.isArray(a)?a.push(zb(i)):r[n]=[a,zb(i)]}return r}const lX=cX(JSON.parse),uX=fX(JSON.stringify,JSON.parse);function cX(e){return t=>{t[0]==="?"&&(t=t.substring(1));const r=sX(t);for(const n in r){const i=r[n];if(typeof i=="string")try{r[n]=e(i)}catch{}}return r}}function fX(e,t){const r=typeof t=="function";function n(i){if(typeof i=="object"&&i!==null)try{return e(i)}catch{}else if(r&&typeof i=="string")try{return t(i),e(i)}catch{}return i}return i=>{const a=oX(i,n);return a?`?${a}`:""}}const Lo="__root__";function dX(e){if(e.statusCode=e.statusCode||e.code||307,!e.reloadDocument&&typeof e.href=="string")try{new URL(e.href),e.reloadDocument=!0}catch{}const t=new Headers(e.headers);e.href&&t.get("Location")===null&&t.set("Location",e.href);const r=new Response(null,{status:e.statusCode,headers:t});if(r.options=e,e.throw)throw r;return r}function al(e){return e instanceof Response&&!!e.options}function hX(e){const t=new Map;let r,n;const i=a=>{a.next&&(a.prev?(a.prev.next=a.next,a.next.prev=a.prev,a.next=void 0,n&&(n.next=a,a.prev=n)):(a.next.prev=void 0,r=a.next,a.next=void 0,n&&(a.prev=n,n.next=a)),n=a)};return{get(a){const o=t.get(a);if(o)return i(o),o.value},set(a,o){if(t.size>=e&&r){const c=r;t.delete(c.key),c.next&&(r=c.next,c.next.prev=void 0),c===n&&(n=void 0)}const l=t.get(a);if(l)l.value=o,i(l);else{const c={key:a,value:o,prev:n};n&&(n.next=c),n=c,r||(r=c),t.set(a,c)}}}}const gy=e=>{if(!e.rendered)return e.rendered=!0,e.onReady?.()},$1=(e,t)=>!!(e.preload&&!e.router.state.matches.some(r=>r.id===t)),F5=(e,t)=>{const r=e.router.routesById[t.routeId??""]??e.router.routeTree;!r.options.notFoundComponent&&e.router.options?.defaultNotFoundComponent&&(r.options.notFoundComponent=e.router.options.defaultNotFoundComponent),fu(r.options.notFoundComponent);const n=e.matches.find(i=>i.routeId===r.id);fu(n,"Could not find match for route: "+r.id),e.updateMatch(n.id,i=>({...i,status:"notFound",error:t,isFetching:!1})),t.routerCode==="BEFORE_LOAD"&&r.parentRoute&&(t.routeId=r.parentRoute.id,F5(e,t))},wc=(e,t,r)=>{if(!(!al(r)&&!dl(r))){if(al(r)&&r.redirectHandled&&!r.options.reloadDocument)throw r;if(t){t._nonReactive.beforeLoadPromise?.resolve(),t._nonReactive.loaderPromise?.resolve(),t._nonReactive.beforeLoadPromise=void 0,t._nonReactive.loaderPromise=void 0;const n=al(r)?"redirected":"notFound";e.updateMatch(t.id,i=>({...i,status:n,isFetching:!1,error:r})),dl(r)&&!r.routeId&&(r.routeId=t.routeId),t._nonReactive.loadPromise?.resolve()}throw al(r)?(e.rendered=!0,r.options._fromLocation=e.location,r.redirectHandled=!0,r=e.router.resolveRedirect(r),r):(F5(e,r),r)}},U5=(e,t)=>{const r=e.router.getMatch(t);return!!(!e.router.isServer&&r._nonReactive.dehydrated||e.router.isServer&&r.ssr===!1)},pv=(e,t,r,n)=>{const{id:i,routeId:a}=e.matches[t],o=e.router.looseRoutesById[a];if(r instanceof Promise)throw r;r.routerCode=n,e.firstBadMatchIndex??=t,wc(e,e.router.getMatch(i),r);try{o.options.onError?.(r)}catch(l){r=l,wc(e,e.router.getMatch(i),r)}e.updateMatch(i,l=>(l._nonReactive.beforeLoadPromise?.resolve(),l._nonReactive.beforeLoadPromise=void 0,l._nonReactive.loadPromise?.resolve(),{...l,error:r,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},pX=(e,t,r,n)=>{const i=e.router.getMatch(t),a=e.matches[r-1]?.id,o=a?e.router.getMatch(a):void 0;if(e.router.isShell()){i.ssr=t===Lo;return}if(o?.ssr===!1){i.ssr=!1;return}const l=g=>g===!0&&o?.ssr==="data-only"?"data-only":g,c=e.router.options.defaultSsr??!0;if(n.options.ssr===void 0){i.ssr=l(c);return}if(typeof n.options.ssr!="function"){i.ssr=l(n.options.ssr);return}const{search:f,params:h}=i,p={search:j_(f,i.searchError),params:j_(h,i.paramsError),location:e.location,matches:e.matches.map(g=>({index:g.index,pathname:g.pathname,fullPath:g.fullPath,staticData:g.staticData,id:g.id,routeId:g.routeId,search:j_(g.search,g.searchError),params:j_(g.params,g.paramsError),ssr:g.ssr}))},v=n.options.ssr(p);if(Bc(v))return v.then(g=>{i.ssr=l(g??c)});i.ssr=l(v??c)},k5=(e,t,r,n)=>{if(n._nonReactive.pendingTimeout!==void 0)return;const i=r.options.pendingMs??e.router.options.defaultPendingMs;if(!!(e.onReady&&!e.router.isServer&&!$1(e,t)&&(r.options.loader||r.options.beforeLoad||V5(r))&&typeof i=="number"&&i!==1/0&&(r.options.pendingComponent??e.router.options?.defaultPendingComponent))){const o=setTimeout(()=>{gy(e)},i);n._nonReactive.pendingTimeout=o}},mX=(e,t,r)=>{const n=e.router.getMatch(t);if(!n._nonReactive.beforeLoadPromise&&!n._nonReactive.loaderPromise)return;k5(e,t,r,n);const i=()=>{const a=e.router.getMatch(t);a.preload&&(a.status==="redirected"||a.status==="notFound")&&wc(e,a,a.error)};return n._nonReactive.beforeLoadPromise?n._nonReactive.beforeLoadPromise.then(i):i()},vX=(e,t,r,n)=>{const i=e.router.getMatch(t),a=i._nonReactive.loadPromise;i._nonReactive.loadPromise=Ep(()=>{a?.resolve()});const{paramsError:o,searchError:l}=i;o&&pv(e,r,o,"PARSE_PARAMS"),l&&pv(e,r,l,"VALIDATE_SEARCH"),k5(e,t,n,i);const c=new AbortController,f=e.matches[r-1]?.id,v={...(f?e.router.getMatch(f):void 0)?.context??e.router.options.context??void 0,...i.__routeContext};let g=!1;const _=()=>{g||(g=!0,e.updateMatch(t,N=>({...N,isFetching:"beforeLoad",fetchCount:N.fetchCount+1,abortController:c,context:v})))},E=()=>{i._nonReactive.beforeLoadPromise?.resolve(),i._nonReactive.beforeLoadPromise=void 0,e.updateMatch(t,N=>({...N,isFetching:!1}))};if(!n.options.beforeLoad){dg(()=>{_(),E()});return}i._nonReactive.beforeLoadPromise=Ep();const{search:b,params:S,cause:T}=i,C=$1(e,t),M={search:b,abortController:c,params:S,preload:C,context:v,location:e.location,navigate:N=>e.router.navigate({...N,_fromLocation:e.location}),buildLocation:e.router.buildLocation,cause:C?"preload":T,matches:e.matches,...e.router.options.additionalContext},D=N=>{if(N===void 0){dg(()=>{_(),E()});return}(al(N)||dl(N))&&(_(),pv(e,r,N,"BEFORE_LOAD")),dg(()=>{_(),e.updateMatch(t,j=>({...j,__beforeLoadContext:N,context:{...j.context,...N}})),E()})};let I;try{if(I=n.options.beforeLoad(M),Bc(I))return _(),I.catch(N=>{pv(e,r,N,"BEFORE_LOAD")}).then(D)}catch(N){_(),pv(e,r,N,"BEFORE_LOAD")}D(I)},gX=(e,t)=>{const{id:r,routeId:n}=e.matches[t],i=e.router.looseRoutesById[n],a=()=>{if(e.router.isServer){const c=pX(e,r,t,i);if(Bc(c))return c.then(l)}return l()},o=()=>vX(e,r,t,i),l=()=>{if(U5(e,r))return;const c=mX(e,r,i);return Bc(c)?c.then(o):o()};return a()},hg=(e,t,r)=>{const n=e.router.getMatch(t);if(!n||!r.options.head&&!r.options.scripts&&!r.options.headers)return;const i={matches:e.matches,match:n,params:n.params,loaderData:n.loaderData};return Promise.all([r.options.head?.(i),r.options.scripts?.(i),r.options.headers?.(i)]).then(([a,o,l])=>{const c=a?.meta,f=a?.links,h=a?.scripts,p=a?.styles;return{meta:c,links:f,headScripts:h,headers:l,scripts:o,styles:p}})},j5=(e,t,r,n)=>{const i=e.matchPromises[r-1],{params:a,loaderDeps:o,abortController:l,context:c,cause:f}=e.router.getMatch(t),h=$1(e,t);return{params:a,deps:o,preload:!!h,parentMatchPromise:i,abortController:l,context:c,location:e.location,navigate:p=>e.router.navigate({...p,_fromLocation:e.location}),cause:h?"preload":f,route:n,...e.router.options.additionalContext}},iN=async(e,t,r,n)=>{try{const i=e.router.getMatch(t);try{(!e.router.isServer||i.ssr===!0)&&z5(n);const a=n.options.loader?.(j5(e,t,r,n)),o=n.options.loader&&Bc(a);if(!!(o||n._lazyPromise||n._componentsPromise||n.options.head||n.options.scripts||n.options.headers||i._nonReactive.minPendingPromise)&&e.updateMatch(t,p=>({...p,isFetching:"loader"})),n.options.loader){const p=o?await a:a;wc(e,e.router.getMatch(t),p),p!==void 0&&e.updateMatch(t,v=>({...v,loaderData:p}))}n._lazyPromise&&await n._lazyPromise;const c=hg(e,t,n),f=c?await c:void 0,h=i._nonReactive.minPendingPromise;h&&await h,n._componentsPromise&&await n._componentsPromise,e.updateMatch(t,p=>({...p,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),...f}))}catch(a){let o=a;const l=i._nonReactive.minPendingPromise;l&&await l,wc(e,e.router.getMatch(t),a);try{n.options.onError?.(a)}catch(h){o=h,wc(e,e.router.getMatch(t),h)}const c=hg(e,t,n),f=c?await c:void 0;e.updateMatch(t,h=>({...h,error:o,status:"error",isFetching:!1,...f}))}}catch(i){const a=e.router.getMatch(t);if(a){const o=hg(e,t,n);if(o){const l=await o;e.updateMatch(t,c=>({...c,...l}))}a._nonReactive.loaderPromise=void 0}wc(e,a,i)}},_X=async(e,t)=>{const{id:r,routeId:n}=e.matches[t];let i=!1,a=!1;const o=e.router.looseRoutesById[n];if(U5(e,r)){if(e.router.isServer){const f=hg(e,r,o);if(f){const h=await f;e.updateMatch(r,p=>({...p,...h}))}return e.router.getMatch(r)}}else{const f=e.router.getMatch(r);if(f._nonReactive.loaderPromise){if(f.status==="success"&&!e.sync&&!f.preload)return f;await f._nonReactive.loaderPromise;const h=e.router.getMatch(r);h.error&&wc(e,h,h.error)}else{const h=Date.now()-f.updatedAt,p=$1(e,r),v=p?o.options.preloadStaleTime??e.router.options.defaultPreloadStaleTime??3e4:o.options.staleTime??e.router.options.defaultStaleTime??0,g=o.options.shouldReload,_=typeof g=="function"?g(j5(e,r,t,o)):g,E=!!p&&!e.router.state.matches.some(C=>C.id===r),b=e.router.getMatch(r);b._nonReactive.loaderPromise=Ep(),E!==b.preload&&e.updateMatch(r,C=>({...C,preload:E}));const{status:S,invalid:T}=b;if(i=S==="success"&&(T||(_??h>v)),!(p&&o.options.preload===!1))if(i&&!e.sync)a=!0,(async()=>{try{await iN(e,r,t,o);const C=e.router.getMatch(r);C._nonReactive.loaderPromise?.resolve(),C._nonReactive.loadPromise?.resolve(),C._nonReactive.loaderPromise=void 0}catch(C){al(C)&&await e.router.navigate(C.options)}})();else if(S!=="success"||i&&e.sync)await iN(e,r,t,o);else{const C=hg(e,r,o);if(C){const M=await C;e.updateMatch(r,D=>({...D,...M}))}}}}const l=e.router.getMatch(r);a||(l._nonReactive.loaderPromise?.resolve(),l._nonReactive.loadPromise?.resolve()),clearTimeout(l._nonReactive.pendingTimeout),l._nonReactive.pendingTimeout=void 0,a||(l._nonReactive.loaderPromise=void 0),l._nonReactive.dehydrated=void 0;const c=a?l.isFetching:!1;return c!==l.isFetching||l.invalid!==!1?(e.updateMatch(r,f=>({...f,isFetching:c,invalid:!1})),e.router.getMatch(r)):l};async function aN(e){const t=Object.assign(e,{matchPromises:[]});!t.router.isServer&&t.router.state.matches.some(r=>r._forcePending)&&gy(t);try{for(let i=0;i<t.matches.length;i++){const a=gX(t,i);Bc(a)&&await a}const r=t.firstBadMatchIndex??t.matches.length;for(let i=0;i<r;i++)t.matchPromises.push(_X(t,i));await Promise.all(t.matchPromises);const n=gy(t);Bc(n)&&await n}catch(r){if(dl(r)&&!t.preload){const n=gy(t);throw Bc(n)&&await n,r}if(al(r))throw r}return t.matches}async function z5(e){if(!e._lazyLoaded&&e._lazyPromise===void 0&&(e.lazyFn?e._lazyPromise=e.lazyFn().then(t=>{const{id:r,...n}=t.options;Object.assign(e.options,n),e._lazyLoaded=!0,e._lazyPromise=void 0}):e._lazyLoaded=!0),!e._componentsLoaded&&e._componentsPromise===void 0){const t=()=>{const r=[];for(const n of H5){const i=e.options[n]?.preload;i&&r.push(i())}if(r.length)return Promise.all(r).then(()=>{e._componentsLoaded=!0,e._componentsPromise=void 0});e._componentsLoaded=!0,e._componentsPromise=void 0};e._componentsPromise=e._lazyPromise?e._lazyPromise.then(t):t()}return e._componentsPromise}function j_(e,t){return t?{status:"error",error:t}:{status:"success",value:e}}function V5(e){for(const t of H5)if(e.options[t]?.preload)return!0;return!1}const H5=["component","errorComponent","pendingComponent","notFoundComponent"];function yX(e){return{input:({url:t})=>{for(const r of e)t=X5(r,t);return t},output:({url:t})=>{for(let r=e.length-1;r>=0;r--)t=q5(e[r],t);return t}}}function EX(e){const t=u2(e.basepath),r=new RegExp(`^/${t}/`,e.caseSensitive?"":"i");return{input:({url:n})=>(n.pathname=n.pathname.replace(r,"/"),n),output:({url:n})=>(n.pathname=lu(["/",t,n.pathname]),n)}}function X5(e,t){const r=e?.input?.({url:t});if(r){if(typeof r=="string")return new URL(r);if(r instanceof URL)return r}return t}function q5(e,t){const r=e?.output?.({url:t});if(r){if(typeof r=="string")return new URL(r);if(r instanceof URL)return r}return t}function rd(e){const t=e.resolvedLocation,r=e.location,n=t?.pathname!==r.pathname,i=t?.href!==r.href,a=t?.hash!==r.hash;return{fromLocation:t,toLocation:r,pathChanged:n,hrefChanged:i,hashChanged:a}}class bX{constructor(t){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=r=>r(),this.update=r=>{if(r.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info."),this.options={...this.options,...r},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(n=>[encodeURIComponent(n),n])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=CH())),this.options.basepath){const n=EX({basepath:this.options.basepath});this.options.rewrite?this.rewrite=yX([n,this.options.rewrite]):this.rewrite=n}else this.rewrite=this.options.rewrite;this.origin=this.options.origin,this.origin||(this.isServer?this.origin="http://localhost":this.origin=window.origin),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new s2(SX(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(n=>!["redirected"].includes(n.status))}}}),iX(this)),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:r,routesByPath:n,flatRoutes:i}=JH({routeTree:this.routeTree,initRoute:(o,l)=>{o.init({originalIndex:l})}});this.routesById=r,this.routesByPath=n,this.flatRoutes=i;const a=this.options.notFoundRoute;a&&(a.init({originalIndex:99999999999}),this.routesById[a.id]=a)},this.subscribe=(r,n)=>{const i={eventType:r,fn:n};return this.subscribers.add(i),()=>{this.subscribers.delete(i)}},this.emit=r=>{this.subscribers.forEach(n=>{n.eventType===r.type&&n.fn(r)})},this.parseLocation=(r,n)=>{const i=({href:c,state:f})=>{const h=new URL(c,this.origin),p=X5(this.rewrite,h),v=this.options.parseSearch(p.search),g=this.options.stringifySearch(v);p.search=g;const _=p.href.replace(p.origin,""),{pathname:E,hash:b}=p;return{href:_,publicHref:c,url:p.href,pathname:E,searchStr:g,search:Io(n?.search,v),hash:b.split("#").reverse()[0]??"",state:Io(n?.state,f)}},a=i(r),{__tempLocation:o,__tempKey:l}=a.state;if(o&&(!l||l===this.tempLocationKey)){const c=i(o);return c.state.key=a.state.key,c.state.__TSR_key=a.state.__TSR_key,delete c.state.__tempLocation,{...c,maskedLocation:a}}return a},this.resolvePathWithBase=(r,n)=>PH({base:r,to:zC(n),trailingSlash:this.options.trailingSlash,parseCache:this.parsePathnameCache}),this.matchRoutes=(r,n,i)=>typeof r=="string"?this.matchRoutesInternal({pathname:r,search:n},i):this.matchRoutesInternal(r,n),this.parsePathnameCache=hX(1e3),this.getMatchedRoutes=(r,n)=>TX({pathname:r,routePathname:n,caseSensitive:this.options.caseSensitive,routesByPath:this.routesByPath,routesById:this.routesById,flatRoutes:this.flatRoutes,parseCache:this.parsePathnameCache}),this.cancelMatch=r=>{const n=this.getMatch(r);n&&(n.abortController.abort(),clearTimeout(n._nonReactive.pendingTimeout),n._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{this.state.pendingMatches?.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=r=>{const n=(a={})=>{const o=a._fromLocation||this.latestLocation,l=this.matchRoutes(o,{_buildLocation:!0}),c=l2(l);a.from;const f=a.unsafeRelative==="path"?o.pathname:a.from??c.fullPath,h=this.resolvePathWithBase(f,"."),p=c.search,v={...c.params},g=a.to?this.resolvePathWithBase(h,`${a.to}`):this.resolvePathWithBase(h,"."),_=a.params===!1||a.params===null?{}:(a.params??!0)===!0?v:Object.assign(v,ed(a.params,v)),E=U_({path:g,params:_,parseCache:this.parsePathnameCache}).interpolatedPath,b=this.matchRoutes(E,void 0,{_buildLocation:!0}).map(Q=>this.looseRoutesById[Q.routeId]);if(Object.keys(_).length>0)for(const Q of b){const X=Q.options.params?.stringify??Q.options.stringifyParams;X&&Object.assign(_,X(_))}const S=U_({path:g,params:_,leaveWildcards:!1,leaveParams:r.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath;let T=p;if(r._includeValidateSearch&&this.options.search?.strict){const Q={};b.forEach(X=>{if(X.options.validateSearch)try{Object.assign(Q,d2(X.options.validateSearch,{...Q,...T}))}catch{}}),T=Q}T=AX({search:T,dest:a,destRoutes:b,_includeValidateSearch:r._includeValidateSearch}),T=Io(p,T);const C=this.options.stringifySearch(T),M=a.hash===!0?o.hash:a.hash?ed(a.hash,o.hash):void 0,D=M?`#${M}`:"";let I=a.state===!0?o.state:a.state?ed(a.state,o.state):{};I=Io(o.state,I);const N=`${S}${C}${D}`,j=new URL(N,this.origin),re=q5(this.rewrite,j);return{publicHref:re.pathname+re.search+re.hash,href:N,url:re.href,pathname:S,search:T,searchStr:C,state:I,hash:M??"",unmaskOnReload:a.unmaskOnReload}},i=(a={},o)=>{const l=n(a);let c=o?n(o):void 0;if(!c){let f={};const h=this.options.routeMasks?.find(p=>{const v=c2(l.pathname,{to:p.from,caseSensitive:!1,fuzzy:!1},this.parsePathnameCache);return v?(f=v,!0):!1});if(h){const{from:p,...v}=h;o={from:r.from,...v,params:f},c=n(o)}}return c&&(l.maskedLocation=c),l};return r.mask?i(r,{from:r.from,...r.mask}):i(r)},this.commitLocation=({viewTransition:r,ignoreBlocker:n,...i})=>{const a=()=>{const c=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];c.forEach(h=>{i.state[h]=this.latestLocation.state[h]});const f=td(i.state,this.latestLocation.state);return c.forEach(h=>{delete i.state[h]}),f},o=Fc(this.latestLocation.href)===Fc(i.href),l=this.commitLocationPromise;if(this.commitLocationPromise=Ep(()=>{l?.resolve()}),o&&a())this.load();else{let{maskedLocation:c,hashScrollIntoView:f,...h}=i;c&&(h={...c,state:{...c.state,__tempKey:void 0,__tempLocation:{...h,search:h.searchStr,state:{...h.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(h.unmaskOnReload??this.options.unmaskOnReload??!1)&&(h.state.__tempKey=this.tempLocationKey)),h.state.__hashScrollIntoViewOptions=f??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=r,this.history[i.replace?"replace":"push"](h.publicHref,h.state,{ignoreBlocker:n})}return this.resetNextScroll=i.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:r,resetScroll:n,hashScrollIntoView:i,viewTransition:a,ignoreBlocker:o,href:l,...c}={})=>{if(l){const h=this.history.location.state.__TSR_index,p=Vy(l,{__TSR_index:r?h:h+1});c.to=p.pathname,c.search=this.options.parseSearch(p.search),c.hash=p.hash.slice(1)}const f=this.buildLocation({...c,_includeValidateSearch:!0});return this.commitLocation({...f,viewTransition:a,replace:r,resetScroll:n,hashScrollIntoView:i,ignoreBlocker:o})},this.navigate=({to:r,reloadDocument:n,href:i,...a})=>{if(!n&&i)try{new URL(`${i}`),n=!0}catch{}return n?(i||(i=this.buildLocation({to:r,...a}).href),a.replace?window.location.replace(i):window.location.href=i,Promise.resolve()):this.buildAndCommitLocation({...a,href:i,to:r,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const n=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0}),i=a=>{try{return encodeURI(decodeURI(a))}catch{return a}};if(u2(i(this.latestLocation.href))!==u2(i(n.href)))throw dX({href:n.href})}const r=this.matchRoutes(this.latestLocation);this.__store.setState(n=>({...n,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:r,cachedMatches:n.cachedMatches.filter(i=>!r.some(a=>a.id===i.id))}))},this.load=async r=>{let n,i,a;for(a=new Promise(o=>{this.startTransition(async()=>{try{this.beforeLoad();const l=this.latestLocation,c=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...rd({resolvedLocation:c,location:l})}),this.emit({type:"onBeforeLoad",...rd({resolvedLocation:c,location:l})}),await aN({router:this,sync:r?.sync,matches:this.state.pendingMatches,location:l,updateMatch:this.updateMatch,onReady:async()=>{this.startViewTransition(async()=>{let f,h,p;dg(()=>{this.__store.setState(v=>{const g=v.matches,_=v.pendingMatches||v.matches;return f=g.filter(E=>!_.some(b=>b.id===E.id)),h=_.filter(E=>!g.some(b=>b.id===E.id)),p=g.filter(E=>_.some(b=>b.id===E.id)),{...v,isLoading:!1,loadedAt:Date.now(),matches:_,pendingMatches:void 0,cachedMatches:[...v.cachedMatches,...f.filter(E=>E.status!=="error")]}}),this.clearExpiredCache()}),[[f,"onLeave"],[h,"onEnter"],[p,"onStay"]].forEach(([v,g])=>{v.forEach(_=>{this.looseRoutesById[_.routeId].options[g]?.(_)})})})}})}catch(l){al(l)?(n=l,this.isServer||this.navigate({...n.options,replace:!0,ignoreBlocker:!0})):dl(l)&&(i=l),this.__store.setState(c=>({...c,statusCode:n?n.status:i?404:c.matches.some(f=>f.status==="error")?500:200,redirect:n}))}this.latestLoadPromise===a&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),o()})}),this.latestLoadPromise=a,await a;this.latestLoadPromise&&a!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(o=>({...o,statusCode:404}))},this.startViewTransition=r=>{const n=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,n&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let i;if(typeof n=="object"&&this.isViewTransitionTypesSupported){const a=this.latestLocation,o=this.state.resolvedLocation,l=typeof n.types=="function"?n.types(rd({resolvedLocation:o,location:a})):n.types;i={update:r,types:l}}else i=r;document.startViewTransition(i)}else r()},this.updateMatch=(r,n)=>{const i=this.state.pendingMatches?.some(a=>a.id===r)?"pendingMatches":this.state.matches.some(a=>a.id===r)?"matches":this.state.cachedMatches.some(a=>a.id===r)?"cachedMatches":"";i&&this.__store.setState(a=>({...a,[i]:a[i]?.map(o=>o.id===r?n(o):o)}))},this.getMatch=r=>{const n=i=>i.id===r;return this.state.cachedMatches.find(n)??this.state.pendingMatches?.find(n)??this.state.matches.find(n)},this.invalidate=r=>{const n=i=>r?.filter?.(i)??!0?{...i,invalid:!0,...r?.forcePending||i.status==="error"?{status:"pending",error:void 0}:void 0}:i;return this.__store.setState(i=>({...i,matches:i.matches.map(n),cachedMatches:i.cachedMatches.map(n),pendingMatches:i.pendingMatches?.map(n)})),this.shouldViewTransition=!1,this.load({sync:r?.sync})},this.resolveRedirect=r=>(r.options.href||(r.options.href=this.buildLocation(r.options).href,r.headers.set("Location",r.options.href)),r.headers.get("Location")||r.headers.set("Location",r.options.href),r),this.clearCache=r=>{const n=r?.filter;n!==void 0?this.__store.setState(i=>({...i,cachedMatches:i.cachedMatches.filter(a=>!n(a))})):this.__store.setState(i=>({...i,cachedMatches:[]}))},this.clearExpiredCache=()=>{const r=n=>{const i=this.looseRoutesById[n.routeId];if(!i.options.loader)return!0;const a=(n.preload?i.options.preloadGcTime??this.options.defaultPreloadGcTime:i.options.gcTime??this.options.defaultGcTime)??300*1e3;return n.status==="error"?!0:Date.now()-n.updatedAt>=a};this.clearCache({filter:r})},this.loadRouteChunk=z5,this.preloadRoute=async r=>{const n=this.buildLocation(r);let i=this.matchRoutes(n,{throwOnError:!0,preload:!0,dest:r});const a=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(l=>l.id)),o=new Set([...a,...this.state.cachedMatches.map(l=>l.id)]);dg(()=>{i.forEach(l=>{o.has(l.id)||this.__store.setState(c=>({...c,cachedMatches:[...c.cachedMatches,l]}))})});try{return i=await aN({router:this,matches:i,location:n,preload:!0,updateMatch:(l,c)=>{a.has(l)?i=i.map(f=>f.id===l?c(f):f):this.updateMatch(l,c)}}),i}catch(l){if(al(l))return l.options.reloadDocument?void 0:await this.preloadRoute({...l.options,_fromLocation:n});dl(l)||console.error(l);return}},this.matchRoute=(r,n)=>{const i={...r,to:r.to?this.resolvePathWithBase(r.from||"",r.to):void 0,params:r.params||{},leaveParams:!0},a=this.buildLocation(i);if(n?.pending&&this.state.status!=="pending")return!1;const l=(n?.pending===void 0?!this.state.isLoading:n.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,c=c2(l.pathname,{...n,to:a.pathname},this.parsePathnameCache);return!c||r.params&&!td(c,r.params,{partial:!0})?!1:c&&(n?.includeSearch??!0)?td(l.search,a.search,{partial:!0})?c:!1:c},this.hasNotFoundMatch=()=>this.__store.state.matches.some(r=>r.status==="notFound"||r.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...t,caseSensitive:t.caseSensitive??!1,notFoundMode:t.notFoundMode??"fuzzy",stringifySearch:t.stringifySearch??uX,parseSearch:t.parseSearch??lX}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(t,r){const{foundRoute:n,matchedRoutes:i,routeParams:a}=this.getMatchedRoutes(t.pathname,r?.dest?.to);let o=!1;(n?n.path!=="/"&&a["**"]:Fc(t.pathname))&&(this.options.notFoundRoute?i.push(this.options.notFoundRoute):o=!0);const l=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let h=i.length-1;h>=0;h--){const p=i[h];if(p.children)return p.id}return Lo}})(),c=[],f=h=>h?.id?h.context??this.options.context??void 0:this.options.context??void 0;return i.forEach((h,p)=>{const v=c[p-1],[g,_,E]=(()=>{const R=v?.search??t.search,P=v?._strictSearch??void 0;try{const V=d2(h.options.validateSearch,{...R})??void 0;return[{...R,...V},{...P,...V},void 0]}catch(V){let le=V;if(V instanceof Wy||(le=new Wy(V.message,{cause:V})),r?.throwOnError)throw le;return[R,{},le]}})(),b=h.options.loaderDeps?.({search:g})??"",S=b?JSON.stringify(b):"",{interpolatedPath:T,usedParams:C}=U_({path:h.fullPath,params:a,decodeCharMap:this.pathParamsDecodeCharMap}),M=U_({path:h.id,params:a,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath+S,D=this.getMatch(M),I=this.state.matches.find(R=>R.routeId===h.id),N=D?._strictParams??C;let j;if(!D){const R=h.options.params?.parse??h.options.parseParams;if(R)try{Object.assign(N,R(N))}catch(P){if(j=new xX(P.message,{cause:P}),r?.throwOnError)throw j}}Object.assign(a,N);const re=I?"stay":"enter";let Q;if(D)Q={...D,cause:re,params:I?Io(I.params,a):a,_strictParams:N,search:Io(I?I.search:D.search,g),_strictSearch:_};else{const R=h.options.loader||h.options.beforeLoad||h.lazyFn||V5(h)?"pending":"success";Q={id:M,index:p,routeId:h.id,params:I?Io(I.params,a):a,_strictParams:N,pathname:T,updatedAt:Date.now(),search:I?Io(I.search,g):g,_strictSearch:_,searchError:void 0,status:R,isFetching:!1,error:void 0,paramsError:j,__routeContext:void 0,_nonReactive:{loadPromise:Ep()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:re,loaderDeps:I?Io(I.loaderDeps,b):b,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:h.options.staticData||{},fullPath:h.fullPath}}r?.preload||(Q.globalNotFound=l===h.id),Q.searchError=E;const X=f(v);Q.context={...X,...Q.__routeContext,...Q.__beforeLoadContext},c.push(Q)}),c.forEach((h,p)=>{const v=this.looseRoutesById[h.routeId];if(!this.getMatch(h.id)&&r?._buildLocation!==!0){const _=c[p-1],E=f(_);if(v.options.context){const b={deps:h.loaderDeps,params:h.params,context:E??{},location:t,navigate:S=>this.navigate({...S,_fromLocation:t}),buildLocation:this.buildLocation,cause:h.cause,abortController:h.abortController,preload:!!h.preload,matches:c};h.__routeContext=v.options.context(b)??void 0}h.context={...E,...h.__routeContext,...h.__beforeLoadContext}}}),c}}class Wy extends Error{}class xX extends Error{}function SX(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function d2(e,t){if(e==null)return{};if("~standard"in e){const r=e["~standard"].validate(t);if(r instanceof Promise)throw new Wy("Async validation not supported");if(r.issues)throw new Wy(JSON.stringify(r.issues,void 0,2),{cause:r});return r.value}return"parse"in e?e.parse(t):typeof e=="function"?e(t):{}}function TX({pathname:e,routePathname:t,caseSensitive:r,routesByPath:n,routesById:i,flatRoutes:a,parseCache:o}){let l={};const c=Fc(e),f=g=>c2(c,{to:g.fullPath,caseSensitive:g.options?.caseSensitive??r,fuzzy:!0},o);let h=t!==void 0?n[t]:void 0;if(h)l=f(h);else{let g;for(const _ of a){const E=f(_);if(E)if(_.path!=="/"&&E["**"])g||(g={foundRoute:_,routeParams:E});else{h=_,l=E;break}}!h&&g&&(h=g.foundRoute,l=g.routeParams)}let p=h||i[Lo];const v=[p];for(;p.parentRoute;)p=p.parentRoute,v.push(p);return v.reverse(),{matchedRoutes:v,routeParams:l,foundRoute:h}}function AX({search:e,dest:t,destRoutes:r,_includeValidateSearch:n}){const i=r.reduce((l,c)=>{const f=[];if("search"in c.options)c.options.search?.middlewares&&f.push(...c.options.search.middlewares);else if(c.options.preSearchFilters||c.options.postSearchFilters){const h=({search:p,next:v})=>{let g=p;"preSearchFilters"in c.options&&c.options.preSearchFilters&&(g=c.options.preSearchFilters.reduce((E,b)=>b(E),p));const _=v(g);return"postSearchFilters"in c.options&&c.options.postSearchFilters?c.options.postSearchFilters.reduce((E,b)=>b(E),_):_};f.push(h)}if(n&&c.options.validateSearch){const h=({search:p,next:v})=>{const g=v(p);try{return{...g,...d2(c.options.validateSearch,g)??void 0}}catch{return g}};f.push(h)}return l.concat(f)},[])??[],a=({search:l})=>t.search?t.search===!0?l:ed(t.search,l):{};i.push(a);const o=(l,c)=>{if(l>=i.length)return c;const f=i[l];return f({search:c,next:p=>o(l+1,p)})};return o(0,e)}const RX="Error preloading route! ☝️";class G5{constructor(t){if(this.init=r=>{this.originalIndex=r.originalIndex;const n=this.options,i=!n?.path&&!n?.id;this.parentRoute=this.options.getParentRoute?.(),i?this._path=Lo:this.parentRoute||fu(!1);let a=i?Lo:n?.path;a&&a!=="/"&&(a=VC(a));const o=n?.id||a;let l=i?Lo:lu([this.parentRoute.id===Lo?"":this.parentRoute.id,o]);a===Lo&&(a="/"),l!==Lo&&(l=lu(["/",l]));const c=l===Lo?"/":lu([this.parentRoute.fullPath,a]);this._path=a,this._id=l,this._fullPath=c,this._to=c},this.clone=r=>{this._path=r._path,this._id=r._id,this._fullPath=r._fullPath,this._to=r._to,this.options.getParentRoute=r.options.getParentRoute,this.children=r.children},this.addChildren=r=>this._addFileChildren(r),this._addFileChildren=r=>(Array.isArray(r)&&(this.children=r),typeof r=="object"&&r!==null&&(this.children=Object.values(r)),this),this._addFileTypes=()=>this,this.updateLoader=r=>(Object.assign(this.options,r),this),this.update=r=>(Object.assign(this.options,r),this),this.lazy=r=>(this.lazyFn=r,this),this.options=t||{},this.isRoot=!t?.getParentRoute,t?.id&&t?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class CX extends G5{constructor(t){super(t)}}function HC(e){const t=e.errorComponent??Y1;return A.jsx(OX,{getResetKey:e.getResetKey,onCatch:e.onCatch,children:({error:r,reset:n})=>r?U.createElement(t,{error:r,reset:n}):e.children})}class OX extends U.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(t){return{resetKey:t.getResetKey()}}static getDerivedStateFromError(t){return{error:t}}reset(){this.setState({error:null})}componentDidUpdate(t,r){r.error&&r.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(t,r){this.props.onCatch&&this.props.onCatch(t,r)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Y1({error:e}){const[t,r]=U.useState(!1);return A.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[A.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),A.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>r(n=>!n),children:t?"Hide Error":"Show Error"})]}),A.jsx("div",{style:{height:".25rem"}}),t?A.jsx("div",{children:A.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:e.message?A.jsx("code",{children:e.message}):null})}):null]})}function wX({children:e,fallback:t=null}){return NX()?A.jsx(cn.Fragment,{children:e}):A.jsx(cn.Fragment,{children:t})}function NX(){return cn.useSyncExternalStore(MX,()=>!0,()=>!1)}function MX(){return()=>{}}var Vb={exports:{}},Hb={},Xb={exports:{}},qb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oN;function IX(){if(oN)return qb;oN=1;var e=G1();function t(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,a=e.useLayoutEffect,o=e.useDebugValue;function l(p,v){var g=v(),_=n({inst:{value:g,getSnapshot:v}}),E=_[0].inst,b=_[1];return a(function(){E.value=g,E.getSnapshot=v,c(E)&&b({inst:E})},[p,g,v]),i(function(){return c(E)&&b({inst:E}),p(function(){c(E)&&b({inst:E})})},[p]),o(g),g}function c(p){var v=p.getSnapshot;p=p.value;try{var g=v();return!r(p,g)}catch{return!0}}function f(p,v){return v()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return qb.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,qb}var sN;function PX(){return sN||(sN=1,Xb.exports=IX()),Xb.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lN;function DX(){if(lN)return Hb;lN=1;var e=G1(),t=PX();function r(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,a=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return Hb.useSyncExternalStoreWithSelector=function(f,h,p,v,g){var _=a(null);if(_.current===null){var E={hasValue:!1,value:null};_.current=E}else E=_.current;_=l(function(){function S(I){if(!T){if(T=!0,C=I,I=v(I),g!==void 0&&E.hasValue){var N=E.value;if(g(N,I))return M=N}return M=I}if(N=M,n(C,I))return N;var j=v(I);return g!==void 0&&g(N,j)?(C=I,N):(C=I,M=j)}var T=!1,C,M,D=p===void 0?null:p;return[function(){return S(h())},D===null?void 0:function(){return S(D())}]},[h,p,v,g]);var b=i(f,_[0],_[1]);return o(function(){E.hasValue=!0,E.value=b},[b]),c(b),b},Hb}var uN;function LX(){return uN||(uN=1,Vb.exports=DX()),Vb.exports}var BX=LX();function FX(e,t=r=>r){return BX.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,UX)}function UX(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,i]of e)if(!t.has(n)||!Object.is(i,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();const r=cN(e);if(r.length!==cN(t).length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!Object.is(e[r[n]],t[r[n]]))return!1;return!0}function cN(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}const Gb=U.createContext(null);function W5(){return typeof document>"u"?Gb:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Gb,Gb)}function mo(e){const t=U.useContext(W5());return e?.warn,t}function Ga(e){const t=mo({warn:e?.router===void 0}),r=e?.router||t,n=U.useRef(void 0);return FX(r.__store,i=>{if(e?.select){if(e.structuralSharing??r.options.defaultStructuralSharing){const a=Io(n.current,e.select(i));return n.current=a,a}return e.select(i)}return i})}const Z1=U.createContext(void 0),kX=U.createContext(void 0);function hl(e){const t=U.useContext(e.from?kX:Z1);return Ga({select:n=>{const i=n.matches.find(a=>e.from?e.from===a.routeId:a.id===t);if(fu(!((e.shouldThrow??!0)&&!i),`Could not find ${e.from?`an active match from "${e.from}"`:"a nearest match!"}`),i!==void 0)return e.select?e.select(i):i},structuralSharing:e.structuralSharing})}function XC(e){return hl({from:e.from,strict:e.strict,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.loaderData):t.loaderData})}function qC(e){const{select:t,...r}=e;return hl({...r,select:n=>t?t(n.loaderDeps):n.loaderDeps})}function GC(e){return hl({from:e.from,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,strict:e.strict,select:t=>{const r=e.strict===!1?t.params:t._strictParams;return e.select?e.select(r):r}})}function WC(e){return hl({from:e.from,strict:e.strict,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.search):t.search})}function $C(e){const t=mo();return U.useCallback(r=>t.navigate({...r,from:r.from??e?.from}),[e?.from,t])}var qp=y5();const jX=Kr(qp),z_=typeof window<"u"?U.useLayoutEffect:U.useEffect;function Wb(e){const t=U.useRef({value:e,prev:null}),r=t.current.value;return e!==r&&(t.current={value:e,prev:r}),t.current.prev}function zX(e,t,r={},n={}){U.useEffect(()=>{if(!e.current||n.disabled||typeof IntersectionObserver!="function")return;const i=new IntersectionObserver(([a])=>{t(a)},r);return i.observe(e.current),()=>{i.disconnect()}},[t,r,n.disabled,e])}function VX(e){const t=U.useRef(null);return U.useImperativeHandle(e,()=>t.current,[]),t}function HX(e,t){const r=mo(),[n,i]=U.useState(!1),a=U.useRef(!1),o=VX(t),{activeProps:l,inactiveProps:c,activeOptions:f,to:h,preload:p,preloadDelay:v,hashScrollIntoView:g,replace:_,startTransition:E,resetScroll:b,viewTransition:S,children:T,target:C,disabled:M,style:D,className:I,onClick:N,onFocus:j,onMouseEnter:re,onMouseLeave:Q,onTouchStart:X,ignoreBlocker:R,params:P,search:V,hash:le,state:w,mask:z,reloadDocument:H,unsafeRelative:ee,from:oe,_fromLocation:ge,...ye}=e,Pe=Ga({select:k=>k.location.search,structuralSharing:!0}),tt=e.from,We=U.useMemo(()=>({...e,from:tt}),[r,Pe,tt,e._fromLocation,e.hash,e.to,e.search,e.params,e.state,e.mask,e.unsafeRelative]),Pt=U.useMemo(()=>r.buildLocation({...We}),[r,We]),$e=U.useMemo(()=>{if(M)return;let k=Pt.maskedLocation?Pt.maskedLocation.url:Pt.url,vt=!1;return r.origin&&(k.startsWith(r.origin)?k=k.replace(r.origin,"")||"/":vt=!0),{href:k,external:vt}},[M,Pt.maskedLocation,Pt.url,r.origin]),Tt=U.useMemo(()=>{if($e?.external)return $e.href;try{return new URL(h),h}catch{}},[h,$e]),je=e.reloadDocument||Tt?!1:p??r.options.defaultPreload,Ee=v??r.options.defaultPreloadDelay??0,st=Ga({select:k=>{if(Tt)return!1;if(f?.exact){if(!MH(k.location.pathname,Pt.pathname,r.basepath))return!1}else{const vt=Xy(k.location.pathname,r.basepath),pt=Xy(Pt.pathname,r.basepath);if(!(vt.startsWith(pt)&&(vt.length===pt.length||vt[pt.length]==="/")))return!1}return(f?.includeSearch??!0)&&!td(k.location.search,Pt.search,{partial:!f?.exact,ignoreUndefined:!f?.explicitUndefined})?!1:f?.includeHash?k.location.hash===Pt.hash:!0}}),Oe=U.useCallback(()=>{r.preloadRoute({...We}).catch(k=>{console.warn(k),console.warn(RX)})},[r,We]),$t=U.useCallback(k=>{k?.isIntersecting&&Oe()},[Oe]);zX(o,$t,$X,{disabled:!!M||je!=="viewport"}),U.useEffect(()=>{a.current||!M&&je==="render"&&(Oe(),a.current=!0)},[M,Oe,je]);const qt=k=>{const vt=k.currentTarget.target,pt=C!==void 0?C:vt;if(!M&&!YX(k)&&!k.defaultPrevented&&(!pt||pt==="_self")&&k.button===0){k.preventDefault(),qp.flushSync(()=>{i(!0)});const Ut=r.subscribe("onResolved",()=>{Ut(),i(!1)});r.navigate({...We,replace:_,resetScroll:b,hashScrollIntoView:g,startTransition:E,viewTransition:S,ignoreBlocker:R})}};if(Tt)return{...ye,ref:o,href:Tt,...T&&{children:T},...C&&{target:C},...M&&{disabled:M},...D&&{style:D},...I&&{className:I},...N&&{onClick:N},...j&&{onFocus:j},...re&&{onMouseEnter:re},...Q&&{onMouseLeave:Q},...X&&{onTouchStart:X}};const xt=k=>{M||je&&Oe()},Dt=xt,It=k=>{if(!(M||!je))if(!Ee)Oe();else{const vt=k.target;if(mv.has(vt))return;const pt=setTimeout(()=>{mv.delete(vt),Oe()},Ee);mv.set(vt,pt)}},er=k=>{if(M||!je||!Ee)return;const vt=k.target,pt=mv.get(vt);pt&&(clearTimeout(pt),mv.delete(vt))},kr=st?ed(l,{})??XX:$b,ue=st?$b:ed(c,{})??$b,xe=[I,kr.className,ue.className].filter(Boolean).join(" "),Ue=(D||kr.style||ue.style)&&{...D,...kr.style,...ue.style};return{...ye,...kr,...ue,href:$e?.href,ref:o,onClick:vv([N,qt]),onFocus:vv([j,xt]),onMouseEnter:vv([re,It]),onMouseLeave:vv([Q,er]),onTouchStart:vv([X,Dt]),disabled:!!M,target:C,...Ue&&{style:Ue},...xe&&{className:xe},...M&&qX,...st&&GX,...n&&WX}}const $b={},XX={className:"active"},qX={role:"link","aria-disabled":!0},GX={"data-status":"active","aria-current":"page"},WX={"data-transitioning":"transitioning"},mv=new WeakMap,$X={rootMargin:"100px"},vv=e=>t=>{for(const r of e)if(r){if(t.defaultPrevented)return;r(t)}},ko=U.forwardRef((e,t)=>{const{_asChild:r,...n}=e,{type:i,ref:a,...o}=HX(n,t),l=typeof n.children=="function"?n.children({isActive:o["data-status"]==="active"}):n.children;return r===void 0&&delete o.disabled,U.createElement(r||"a",{...o,ref:a},l)});function YX(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}class ZX extends G5{constructor(t){super(t),this.useMatch=r=>hl({select:r?.select,from:this.id,structuralSharing:r?.structuralSharing}),this.useRouteContext=r=>hl({...r,from:this.id,select:n=>r?.select?r.select(n.context):n.context}),this.useSearch=r=>WC({select:r?.select,structuralSharing:r?.structuralSharing,from:this.id}),this.useParams=r=>GC({select:r?.select,structuralSharing:r?.structuralSharing,from:this.id}),this.useLoaderDeps=r=>qC({...r,from:this.id}),this.useLoaderData=r=>XC({...r,from:this.id}),this.useNavigate=()=>$C({from:this.fullPath}),this.Link=cn.forwardRef((r,n)=>A.jsx(ko,{ref:n,from:this.fullPath,...r})),this.$$typeof=Symbol.for("react.memo")}}function Gp(e){return new ZX(e)}class KX extends CX{constructor(t){super(t),this.useMatch=r=>hl({select:r?.select,from:this.id,structuralSharing:r?.structuralSharing}),this.useRouteContext=r=>hl({...r,from:this.id,select:n=>r?.select?r.select(n.context):n.context}),this.useSearch=r=>WC({select:r?.select,structuralSharing:r?.structuralSharing,from:this.id}),this.useParams=r=>GC({select:r?.select,structuralSharing:r?.structuralSharing,from:this.id}),this.useLoaderDeps=r=>qC({...r,from:this.id}),this.useLoaderData=r=>XC({...r,from:this.id}),this.useNavigate=()=>$C({from:this.fullPath}),this.Link=cn.forwardRef((r,n)=>A.jsx(ko,{ref:n,from:this.fullPath,...r})),this.$$typeof=Symbol.for("react.memo")}}function QX(e){return new KX(e)}function fN(e){return typeof e=="object"?new dN(e,{silent:!0}).createRoute(e):new dN(e,{silent:!0}).createRoute}class dN{constructor(t,r){this.path=t,this.createRoute=n=>{this.silent;const i=Gp(n);return i.isRoot=!1,i},this.silent=r?.silent}}class hN{constructor(t){this.useMatch=r=>hl({select:r?.select,from:this.options.id,structuralSharing:r?.structuralSharing}),this.useRouteContext=r=>hl({from:this.options.id,select:n=>r?.select?r.select(n.context):n.context}),this.useSearch=r=>WC({select:r?.select,structuralSharing:r?.structuralSharing,from:this.options.id}),this.useParams=r=>GC({select:r?.select,structuralSharing:r?.structuralSharing,from:this.options.id}),this.useLoaderDeps=r=>qC({...r,from:this.options.id}),this.useLoaderData=r=>XC({...r,from:this.options.id}),this.useNavigate=()=>{const r=mo();return $C({from:r.routesById[this.options.id].fullPath})},this.options=t,this.$$typeof=Symbol.for("react.memo")}}function pN(e){return typeof e=="object"?new hN(e):t=>new hN({id:e,...t})}function JX(){const e=mo(),t=U.useRef({router:e,mounted:!1}),[r,n]=U.useState(!1),{hasPendingMatches:i,isLoading:a}=Ga({select:p=>({isLoading:p.isLoading,hasPendingMatches:p.matches.some(v=>v.status==="pending")}),structuralSharing:!0}),o=Wb(a),l=a||r||i,c=Wb(l),f=a||i,h=Wb(f);return e.startTransition=p=>{n(!0),U.startTransition(()=>{p(),n(!1)})},U.useEffect(()=>{const p=e.history.subscribe(e.load),v=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Fc(e.latestLocation.href)!==Fc(v.href)&&e.commitLocation({...v,replace:!0}),()=>{p()}},[e,e.history]),z_(()=>{if(typeof window<"u"&&e.ssr||t.current.router===e&&t.current.mounted)return;t.current={router:e,mounted:!0},(async()=>{try{await e.load()}catch(v){console.error(v)}})()},[e]),z_(()=>{o&&!a&&e.emit({type:"onLoad",...rd(e.state)})},[o,e,a]),z_(()=>{h&&!f&&e.emit({type:"onBeforeRouteMount",...rd(e.state)})},[f,h,e]),z_(()=>{c&&!l&&(e.emit({type:"onResolved",...rd(e.state)}),e.__store.setState(p=>({...p,status:"idle",resolvedLocation:p.location})),aX(e))},[l,c,e]),null}function eq(e){const t=Ga({select:r=>`not-found-${r.location.pathname}-${r.status}`});return A.jsx(HC,{getResetKey:()=>t,onCatch:(r,n)=>{if(dl(r))e.onCatch?.(r,n);else throw r},errorComponent:({error:r})=>{if(dl(r))return e.fallback?.(r);throw r},children:e.children})}function tq(){return A.jsx("p",{children:"Not Found"})}function Qh(e){return A.jsx(A.Fragment,{children:e.children})}function $5(e,t,r){return t.options.notFoundComponent?A.jsx(t.options.notFoundComponent,{data:r}):e.options.defaultNotFoundComponent?A.jsx(e.options.defaultNotFoundComponent,{data:r}):A.jsx(tq,{})}function rq({children:e}){const t=mo();return t.isServer?A.jsx("script",{nonce:t.options.ssr?.nonce,className:"$tsr",dangerouslySetInnerHTML:{__html:[e].filter(Boolean).join(`
`)+";$_TSR.c()"}}):null}function nq(){const e=mo();if(!e.isScrollRestoring||!e.isServer||typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation}))return null;const r=(e.options.getScrollRestorationKey||f2)(e.latestLocation),n=r!==f2(e.latestLocation)?r:void 0,i={storageKey:qy,shouldScrollRestoration:!0};return n&&(i.key=n),A.jsx(rq,{children:`(${B5.toString()})(${JSON.stringify(i)})`})}const Y5=U.memo(function({matchId:t}){const r=mo(),n=Ga({select:S=>{const T=S.matches.find(C=>C.id===t);return fu(T),{routeId:T.routeId,ssr:T.ssr,_displayPending:T._displayPending}},structuralSharing:!0}),i=r.routesById[n.routeId],a=i.options.pendingComponent??r.options.defaultPendingComponent,o=a?A.jsx(a,{}):null,l=i.options.errorComponent??r.options.defaultErrorComponent,c=i.options.onCatch??r.options.defaultOnCatch,f=i.isRoot?i.options.notFoundComponent??r.options.notFoundRoute?.options.component:i.options.notFoundComponent,h=n.ssr===!1||n.ssr==="data-only",p=(!i.isRoot||i.options.wrapInSuspense||h)&&(i.options.wrapInSuspense??a??(i.options.errorComponent?.preload||h))?U.Suspense:Qh,v=l?HC:Qh,g=f?eq:Qh,_=Ga({select:S=>S.loadedAt}),E=Ga({select:S=>{const T=S.matches.findIndex(C=>C.id===t);return S.matches[T-1]?.routeId}}),b=i.isRoot?i.options.shellComponent??Qh:Qh;return A.jsxs(b,{children:[A.jsx(Z1.Provider,{value:t,children:A.jsx(p,{fallback:o,children:A.jsx(v,{getResetKey:()=>_,errorComponent:l||Y1,onCatch:(S,T)=>{if(dl(S))throw S;c?.(S,T)},children:A.jsx(g,{fallback:S=>{if(!f||S.routeId&&S.routeId!==n.routeId||!S.routeId&&!i.isRoot)throw S;return U.createElement(f,S)},children:h||n._displayPending?A.jsx(wX,{fallback:o,children:A.jsx(mN,{matchId:t})}):A.jsx(mN,{matchId:t})})})})}),E===Lo&&r.options.scrollRestoration?A.jsxs(A.Fragment,{children:[A.jsx(iq,{}),A.jsx(nq,{})]}):null]})});function iq(){const e=mo(),t=U.useRef(void 0);return A.jsx("script",{suppressHydrationWarning:!0,ref:r=>{r&&(t.current===void 0||t.current.href!==e.latestLocation.href)&&(e.emit({type:"onRendered",...rd(e.state)}),t.current=e.latestLocation)}},e.latestLocation.state.__TSR_key)}const mN=U.memo(function({matchId:t}){const r=mo(),{match:n,key:i,routeId:a}=Ga({select:c=>{const f=c.matches.find(_=>_.id===t),h=f.routeId,v=(r.routesById[h].options.remountDeps??r.options.defaultRemountDeps)?.({routeId:h,loaderDeps:f.loaderDeps,params:f._strictParams,search:f._strictSearch});return{key:v?JSON.stringify(v):void 0,routeId:h,match:{id:f.id,status:f.status,error:f.error,_forcePending:f._forcePending,_displayPending:f._displayPending}}},structuralSharing:!0}),o=r.routesById[a],l=U.useMemo(()=>{const c=o.options.component??r.options.defaultComponent;return c?A.jsx(c,{},i):A.jsx(Z5,{})},[i,o.options.component,r.options.defaultComponent]);if(n._displayPending)throw r.getMatch(n.id)?._nonReactive.displayPendingPromise;if(n._forcePending)throw r.getMatch(n.id)?._nonReactive.minPendingPromise;if(n.status==="pending"){const c=o.options.pendingMinMs??r.options.defaultPendingMinMs;if(c){const f=r.getMatch(n.id);if(f&&!f._nonReactive.minPendingPromise&&!r.isServer){const h=Ep();f._nonReactive.minPendingPromise=h,setTimeout(()=>{h.resolve(),f._nonReactive.minPendingPromise=void 0},c)}}throw r.getMatch(n.id)?._nonReactive.loadPromise}if(n.status==="notFound")return fu(dl(n.error)),$5(r,o,n.error);if(n.status==="redirected")throw fu(al(n.error)),r.getMatch(n.id)?._nonReactive.loadPromise;if(n.status==="error"){if(r.isServer){const c=(o.options.errorComponent??r.options.defaultErrorComponent)||Y1;return A.jsx(c,{error:n.error,reset:void 0,info:{componentStack:""}})}throw n.error}return l}),Z5=U.memo(function(){const t=mo(),r=U.useContext(Z1),n=Ga({select:f=>f.matches.find(h=>h.id===r)?.routeId}),i=t.routesById[n],a=Ga({select:f=>{const p=f.matches.find(v=>v.id===r);return fu(p),p.globalNotFound}}),o=Ga({select:f=>{const h=f.matches,p=h.findIndex(v=>v.id===r);return h[p+1]?.id}}),l=t.options.defaultPendingComponent?A.jsx(t.options.defaultPendingComponent,{}):null;if(a)return $5(t,i,void 0);if(!o)return null;const c=A.jsx(Y5,{matchId:o});return r===Lo?A.jsx(U.Suspense,{fallback:l,children:c}):c});function aq(){const e=mo(),t=e.options.defaultPendingComponent?A.jsx(e.options.defaultPendingComponent,{}):null,r=e.isServer||typeof document<"u"&&e.ssr?Qh:U.Suspense,n=A.jsxs(r,{fallback:t,children:[!e.isServer&&A.jsx(JX,{}),A.jsx(oq,{})]});return e.options.InnerWrap?A.jsx(e.options.InnerWrap,{children:n}):n}function oq(){const e=mo(),t=Ga({select:i=>i.matches[0]?.id}),r=Ga({select:i=>i.loadedAt}),n=t?A.jsx(Y5,{matchId:t}):null;return A.jsx(Z1.Provider,{value:t,children:e.options.disableGlobalCatchBoundary?n:A.jsx(HC,{getResetKey:()=>r,errorComponent:Y1,onCatch:i=>{i.message||i.toString()},children:n})})}const sq=e=>new lq(e);class lq extends bX{constructor(t){super(t)}}typeof globalThis<"u"?(globalThis.createFileRoute=fN,globalThis.createLazyFileRoute=pN):typeof window<"u"&&(window.createFileRoute=fN,window.createLazyFileRoute=pN);function uq({router:e,children:t,...r}){Object.keys(r).length>0&&e.update({...e.options,...r,context:{...e.options.context,...r.context}});const n=W5(),i=A.jsx(n.Provider,{value:e,children:t});return e.options.Wrap?A.jsx(e.options.Wrap,{children:i}):i}function cq({router:e,...t}){return A.jsx(uq,{router:e,...t,children:A.jsx(aq,{})})}var Yb={exports:{}},gv={},Zb={exports:{}},Kb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vN;function fq(){return vN||(vN=1,(function(e){function t(w,z){var H=w.length;w.push(z);e:for(;0<H;){var ee=H-1>>>1,oe=w[ee];if(0<i(oe,z))w[ee]=z,w[H]=oe,H=ee;else break e}}function r(w){return w.length===0?null:w[0]}function n(w){if(w.length===0)return null;var z=w[0],H=w.pop();if(H!==z){w[0]=H;e:for(var ee=0,oe=w.length,ge=oe>>>1;ee<ge;){var ye=2*(ee+1)-1,Pe=w[ye],tt=ye+1,We=w[tt];if(0>i(Pe,H))tt<oe&&0>i(We,Pe)?(w[ee]=We,w[tt]=H,ee=tt):(w[ee]=Pe,w[ye]=H,ee=ye);else if(tt<oe&&0>i(We,H))w[ee]=We,w[tt]=H,ee=tt;else break e}}return z}function i(w,z){var H=w.sortIndex-z.sortIndex;return H!==0?H:w.id-z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],f=[],h=1,p=null,v=3,g=!1,_=!1,E=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function M(w){for(var z=r(f);z!==null;){if(z.callback===null)n(f);else if(z.startTime<=w)n(f),z.sortIndex=z.expirationTime,t(c,z);else break;z=r(f)}}function D(w){if(E=!1,M(w),!_)if(r(c)!==null)_=!0,I||(I=!0,R());else{var z=r(f);z!==null&&le(D,z.startTime-w)}}var I=!1,N=-1,j=5,re=-1;function Q(){return b?!0:!(e.unstable_now()-re<j)}function X(){if(b=!1,I){var w=e.unstable_now();re=w;var z=!0;try{e:{_=!1,E&&(E=!1,T(N),N=-1),g=!0;var H=v;try{t:{for(M(w),p=r(c);p!==null&&!(p.expirationTime>w&&Q());){var ee=p.callback;if(typeof ee=="function"){p.callback=null,v=p.priorityLevel;var oe=ee(p.expirationTime<=w);if(w=e.unstable_now(),typeof oe=="function"){p.callback=oe,M(w),z=!0;break t}p===r(c)&&n(c),M(w)}else n(c);p=r(c)}if(p!==null)z=!0;else{var ge=r(f);ge!==null&&le(D,ge.startTime-w),z=!1}}break e}finally{p=null,v=H,g=!1}z=void 0}}finally{z?R():I=!1}}}var R;if(typeof C=="function")R=function(){C(X)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,V=P.port2;P.port1.onmessage=X,R=function(){V.postMessage(null)}}else R=function(){S(X,0)};function le(w,z){N=S(function(){w(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(w){w.callback=null},e.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<w?Math.floor(1e3/w):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(w){switch(v){case 1:case 2:case 3:var z=3;break;default:z=v}var H=v;v=z;try{return w()}finally{v=H}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(w,z){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var H=v;v=w;try{return z()}finally{v=H}},e.unstable_scheduleCallback=function(w,z,H){var ee=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ee+H:ee):H=ee,w){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=H+oe,w={id:h++,callback:z,priorityLevel:w,startTime:H,expirationTime:oe,sortIndex:-1},H>ee?(w.sortIndex=H,t(f,w),r(c)===null&&w===r(f)&&(E?(T(N),N=-1):E=!0,le(D,H-ee))):(w.sortIndex=oe,t(c,w),_||g||(_=!0,I||(I=!0,R()))),w},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(w){var z=v;return function(){var H=v;v=z;try{return w.apply(this,arguments)}finally{v=H}}}})(Kb)),Kb}var gN;function dq(){return gN||(gN=1,Zb.exports=fq()),Zb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _N;function hq(){if(_N)return gv;_N=1;var e=dq(),t=G1(),r=y5();function n(s){var u="https://react.dev/errors/"+s;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var u=s,d=s;if(s.alternate)for(;u.return;)u=u.return;else{s=u;do u=s,(u.flags&4098)!==0&&(d=u.return),s=u.return;while(s)}return u.tag===3?d:null}function o(s){if(s.tag===13){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function l(s){if(a(s)!==s)throw Error(n(188))}function c(s){var u=s.alternate;if(!u){if(u=a(s),u===null)throw Error(n(188));return u!==s?null:s}for(var d=s,m=u;;){var y=d.return;if(y===null)break;var x=y.alternate;if(x===null){if(m=y.return,m!==null){d=m;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===d)return l(y),s;if(x===m)return l(y),u;x=x.sibling}throw Error(n(188))}if(d.return!==m.return)d=y,m=x;else{for(var B=!1,W=y.child;W;){if(W===d){B=!0,d=y,m=x;break}if(W===m){B=!0,m=y,d=x;break}W=W.sibling}if(!B){for(W=x.child;W;){if(W===d){B=!0,d=x,m=y;break}if(W===m){B=!0,m=x,d=y;break}W=W.sibling}if(!B)throw Error(n(189))}}if(d.alternate!==m)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?s:u}function f(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s;for(s=s.child;s!==null;){if(u=f(s),u!==null)return u;s=s.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function R(s){return s===null||typeof s!="object"?null:(s=X&&s[X]||s["@@iterator"],typeof s=="function"?s:null)}var P=Symbol.for("react.client.reference");function V(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===P?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case _:return"Fragment";case b:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case I:return"SuspenseList";case re:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case g:return"Portal";case C:return(s.displayName||"Context")+".Provider";case T:return(s._context.displayName||"Context")+".Consumer";case M:var u=s.render;return s=s.displayName,s||(s=u.displayName||u.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case N:return u=s.displayName||null,u!==null?u:V(s.type)||"Memo";case j:u=s._payload,s=s._init;try{return V(s(u))}catch{}}return null}var le=Array.isArray,w=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},ee=[],oe=-1;function ge(s){return{current:s}}function ye(s){0>oe||(s.current=ee[oe],ee[oe]=null,oe--)}function Pe(s,u){oe++,ee[oe]=s.current,s.current=u}var tt=ge(null),We=ge(null),Pt=ge(null),$e=ge(null);function Tt(s,u){switch(Pe(Pt,u),Pe(We,s),Pe(tt,null),u.nodeType){case 9:case 11:s=(s=u.documentElement)&&(s=s.namespaceURI)?fw(s):0;break;default:if(s=u.tagName,u=u.namespaceURI)u=fw(u),s=dw(u,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ye(tt),Pe(tt,s)}function je(){ye(tt),ye(We),ye(Pt)}function Ee(s){s.memoizedState!==null&&Pe($e,s);var u=tt.current,d=dw(u,s.type);u!==d&&(Pe(We,s),Pe(tt,d))}function st(s){We.current===s&&(ye(tt),ye(We)),$e.current===s&&(ye($e),lv._currentValue=H)}var Oe=Object.prototype.hasOwnProperty,$t=e.unstable_scheduleCallback,qt=e.unstable_cancelCallback,xt=e.unstable_shouldYield,Dt=e.unstable_requestPaint,It=e.unstable_now,er=e.unstable_getCurrentPriorityLevel,kr=e.unstable_ImmediatePriority,ue=e.unstable_UserBlockingPriority,xe=e.unstable_NormalPriority,Ue=e.unstable_LowPriority,k=e.unstable_IdlePriority,vt=e.log,pt=e.unstable_setDisableYieldValue,Ut=null,lr=null;function dr(s){if(typeof vt=="function"&&pt(s),lr&&typeof lr.setStrictMode=="function")try{lr.setStrictMode(Ut,s)}catch{}}var hr=Math.clz32?Math.clz32:fi,jn=Math.log,Sn=Math.LN2;function fi(s){return s>>>=0,s===0?32:31-(jn(s)/Sn|0)|0}var en=256,yn=4194304;function Ji(s){var u=s&42;if(u!==0)return u;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function pa(s,u,d){var m=s.pendingLanes;if(m===0)return 0;var y=0,x=s.suspendedLanes,B=s.pingedLanes;s=s.warmLanes;var W=m&134217727;return W!==0?(m=W&~x,m!==0?y=Ji(m):(B&=W,B!==0?y=Ji(B):d||(d=W&~s,d!==0&&(y=Ji(d))))):(W=m&~x,W!==0?y=Ji(W):B!==0?y=Ji(B):d||(d=m&~s,d!==0&&(y=Ji(d)))),y===0?0:u!==0&&u!==y&&(u&x)===0&&(x=y&-y,d=u&-u,x>=d||x===32&&(d&4194048)!==0)?u:y}function Ka(s,u){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&u)===0}function Go(s,u){switch(s){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wd(){var s=en;return en<<=1,(en&4194048)===0&&(en=256),s}function Nd(){var s=yn;return yn<<=1,(yn&62914560)===0&&(yn=4194304),s}function _l(s){for(var u=[],d=0;31>d;d++)u.push(s);return u}function Wo(s,u){s.pendingLanes|=u,u!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function rf(s,u,d,m,y,x){var B=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var W=s.entanglements,de=s.expirationTimes,Le=s.hiddenUpdates;for(d=B&~d;0<d;){var at=31-hr(d),mt=1<<at;W[at]=0,de[at]=-1;var ze=Le[at];if(ze!==null)for(Le[at]=null,at=0;at<ze.length;at++){var He=ze[at];He!==null&&(He.lane&=-536870913)}d&=~mt}m!==0&&Md(s,m,0),x!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=x&~(B&~u))}function Md(s,u,d){s.pendingLanes|=u,s.suspendedLanes&=~u;var m=31-hr(u);s.entangledLanes|=u,s.entanglements[m]=s.entanglements[m]|1073741824|d&4194090}function Pi(s,u){var d=s.entangledLanes|=u;for(s=s.entanglements;d;){var m=31-hr(d),y=1<<m;y&u|s[m]&u&&(s[m]|=u),d&=~y}}function nf(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Eu(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Id(){var s=z.p;return s!==0?s:(s=window.event,s===void 0?32:Mw(s.type))}function im(s,u){var d=z.p;try{return z.p=s,u()}finally{z.p=d}}var _o=Math.random().toString(36).slice(2),Yn="__reactFiber$"+_o,Di="__reactProps$"+_o,Ms="__reactContainer$"+_o,yl="__reactEvents$"+_o,bu="__reactListeners$"+_o,Tn="__reactHandles$"+_o,af="__reactResources$"+_o,El="__reactMarker$"+_o;function xu(s){delete s[Yn],delete s[Di],delete s[yl],delete s[bu],delete s[Tn]}function $o(s){var u=s[Yn];if(u)return u;for(var d=s.parentNode;d;){if(u=d[Ms]||d[Yn]){if(d=u.alternate,u.child!==null||d!==null&&d.child!==null)for(s=vw(s);s!==null;){if(d=s[Yn])return d;s=vw(s)}return u}s=d,d=s.parentNode}return null}function Yo(s){if(s=s[Yn]||s[Ms]){var u=s.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return s}return null}function Is(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s.stateNode;throw Error(n(33))}function yo(s){var u=s[af];return u||(u=s[af]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function mn(s){s[El]=!0}var Ps=new Set,Ds={};function Na(s,u){Eo(s,u),Eo(s+"Capture",u)}function Eo(s,u){for(Ds[s]=u,s=0;s<u.length;s++)Ps.add(u[s])}var am=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pd={},bl={};function ea(s){return Oe.call(bl,s)?!0:Oe.call(Pd,s)?!1:am.test(s)?bl[s]=!0:(Pd[s]=!0,!1)}function Qa(s,u,d){if(ea(u))if(d===null)s.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(u);return;case"boolean":var m=u.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(u);return}}s.setAttribute(u,""+d)}}function ma(s,u,d){if(d===null)s.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttribute(u,""+d)}}function ai(s,u,d,m){if(m===null)s.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(u,d,""+m)}}var Zo,va;function Li(s){if(Zo===void 0)try{throw Error()}catch(d){var u=d.stack.trim().match(/\n( *(at )?)/);Zo=u&&u[1]||"",va=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zo+s+va}var Su=!1;function Tu(s,u){if(!s||Su)return"";Su=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(u){var mt=function(){throw Error()};if(Object.defineProperty(mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(mt,[])}catch(He){var ze=He}Reflect.construct(s,[],mt)}else{try{mt.call()}catch(He){ze=He}s.call(mt.prototype)}}else{try{throw Error()}catch(He){ze=He}(mt=s())&&typeof mt.catch=="function"&&mt.catch(function(){})}}catch(He){if(He&&ze&&typeof He.stack=="string")return[He.stack,ze.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=m.DetermineComponentFrameRoot(),B=x[0],W=x[1];if(B&&W){var de=B.split(`
`),Le=W.split(`
`);for(y=m=0;m<de.length&&!de[m].includes("DetermineComponentFrameRoot");)m++;for(;y<Le.length&&!Le[y].includes("DetermineComponentFrameRoot");)y++;if(m===de.length||y===Le.length)for(m=de.length-1,y=Le.length-1;1<=m&&0<=y&&de[m]!==Le[y];)y--;for(;1<=m&&0<=y;m--,y--)if(de[m]!==Le[y]){if(m!==1||y!==1)do if(m--,y--,0>y||de[m]!==Le[y]){var at=`
`+de[m].replace(" at new "," at ");return s.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",s.displayName)),at}while(1<=m&&0<=y);break}}}finally{Su=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?Li(d):""}function Au(s){switch(s.tag){case 26:case 27:case 5:return Li(s.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 15:return Tu(s.type,!1);case 11:return Tu(s.type.render,!1);case 1:return Tu(s.type,!0);case 31:return Li("Activity");default:return""}}function ta(s){try{var u="";do u+=Au(s),s=s.return;while(s);return u}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function xi(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ko(s){var u=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Ru(s){var u=Ko(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,u),m=""+s[u];if(!s.hasOwnProperty(u)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,x=d.set;return Object.defineProperty(s,u,{configurable:!0,get:function(){return y.call(this)},set:function(B){m=""+B,x.call(this,B)}}),Object.defineProperty(s,u,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(B){m=""+B},stopTracking:function(){s._valueTracker=null,delete s[u]}}}}function Ls(s){s._valueTracker||(s._valueTracker=Ru(s))}function Cu(s){if(!s)return!1;var u=s._valueTracker;if(!u)return!0;var d=u.getValue(),m="";return s&&(m=Ko(s)?s.checked?"true":"false":s.value),s=m,s!==d?(u.setValue(s),!0):!1}function ga(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ma=/[\n"\\]/g;function Hi(s){return s.replace(Ma,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Bs(s,u,d,m,y,x,B,W){s.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?s.type=B:s.removeAttribute("type"),u!=null?B==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+xi(u)):s.value!==""+xi(u)&&(s.value=""+xi(u)):B!=="submit"&&B!=="reset"||s.removeAttribute("value"),u!=null?wu(s,B,xi(u)):d!=null?wu(s,B,xi(d)):m!=null&&s.removeAttribute("value"),y==null&&x!=null&&(s.defaultChecked=!!x),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?s.name=""+xi(W):s.removeAttribute("name")}function Ou(s,u,d,m,y,x,B,W){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.type=x),u!=null||d!=null){if(!(x!=="submit"&&x!=="reset"||u!=null))return;d=d!=null?""+xi(d):"",u=u!=null?""+xi(u):d,W||u===s.value||(s.value=u),s.defaultValue=u}m=m??y,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=W?s.checked:!!m,s.defaultChecked=!!m,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(s.name=B)}function wu(s,u,d){u==="number"&&ga(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function Fs(s,u,d,m){if(s=s.options,u){u={};for(var y=0;y<d.length;y++)u["$"+d[y]]=!0;for(d=0;d<s.length;d++)y=u.hasOwnProperty("$"+s[d].value),s[d].selected!==y&&(s[d].selected=y),y&&m&&(s[d].defaultSelected=!0)}else{for(d=""+xi(d),u=null,y=0;y<s.length;y++){if(s[y].value===d){s[y].selected=!0,m&&(s[y].defaultSelected=!0);return}u!==null||s[y].disabled||(u=s[y])}u!==null&&(u.selected=!0)}}function Dd(s,u,d){if(u!=null&&(u=""+xi(u),u!==s.value&&(s.value=u),d==null)){s.defaultValue!==u&&(s.defaultValue=u);return}s.defaultValue=d!=null?""+xi(d):""}function G(s,u,d,m){if(u==null){if(m!=null){if(d!=null)throw Error(n(92));if(le(m)){if(1<m.length)throw Error(n(93));m=m[0]}d=m}d==null&&(d=""),u=d}d=xi(u),s.defaultValue=d,m=s.textContent,m===d&&m!==""&&m!==null&&(s.value=m)}function K(s,u){if(u){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=u;return}}s.textContent=u}var pe=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ve(s,u,d){var m=u.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="":m?s.setProperty(u,d):typeof d!="number"||d===0||pe.has(u)?u==="float"?s.cssFloat=d:s[u]=(""+d).trim():s[u]=d+"px"}function Et(s,u,d){if(u!=null&&typeof u!="object")throw Error(n(62));if(s=s.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||u!=null&&u.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var y in u)m=u[y],u.hasOwnProperty(y)&&d[y]!==m&&Ve(s,y,m)}else for(var x in u)u.hasOwnProperty(x)&&Ve(s,x,u[x])}function kt(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ir=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ei=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zn(s){return ei.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Zn=null;function ra(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Nu=null,Mu=null;function f0(s){var u=Yo(s);if(u&&(s=u.stateNode)){var d=s[Di]||null;e:switch(s=u.stateNode,u.type){case"input":if(Bs(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),u=d.name,d.type==="radio"&&u!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Hi(""+u)+'"][type="radio"]'),u=0;u<d.length;u++){var m=d[u];if(m!==s&&m.form===s.form){var y=m[Di]||null;if(!y)throw Error(n(90));Bs(m,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(u=0;u<d.length;u++)m=d[u],m.form===s.form&&Cu(m)}break e;case"textarea":Dd(s,d.value,d.defaultValue);break e;case"select":u=d.value,u!=null&&Fs(s,!!d.multiple,u,!1)}}}var om=!1;function d0(s,u,d){if(om)return s(u,d);om=!0;try{var m=s(u);return m}finally{if(om=!1,(Nu!==null||Mu!==null)&&(p_(),Nu&&(u=Nu,s=Mu,Mu=Nu=null,f0(u),s)))for(u=0;u<s.length;u++)f0(s[u])}}function of(s,u){var d=s.stateNode;if(d===null)return null;var m=d[Di]||null;if(m===null)return null;d=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(n(231,u,typeof d));return d}var Qo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jo=!1;if(Qo)try{var sf={};Object.defineProperty(sf,"passive",{get:function(){Jo=!0}}),window.addEventListener("test",sf,sf),window.removeEventListener("test",sf,sf)}catch{Jo=!1}var Us=null,Iu=null,Pu=null;function sm(){if(Pu)return Pu;var s,u=Iu,d=u.length,m,y="value"in Us?Us.value:Us.textContent,x=y.length;for(s=0;s<d&&u[s]===y[s];s++);var B=d-s;for(m=1;m<=B&&u[d-m]===y[x-m];m++);return Pu=y.slice(s,1<m?1-m:void 0)}function lf(s){var u=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&u===13&&(s=13)):s=u,s===10&&(s=13),32<=s||s===13?s:0}function Ld(){return!0}function Bd(){return!1}function Bi(s){function u(d,m,y,x,B){this._reactName=d,this._targetInst=y,this.type=m,this.nativeEvent=x,this.target=B,this.currentTarget=null;for(var W in s)s.hasOwnProperty(W)&&(d=s[W],this[W]=d?d(x):x[W]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Ld:Bd,this.isPropagationStopped=Bd,this}return h(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ld)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ld)},persist:function(){},isPersistent:Ld}),u}var na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=Bi(na),Du=h({},na,{view:0,detail:0}),h0=Bi(Du),lm,um,uf,Fd=h({},Du,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dm,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==uf&&(uf&&s.type==="mousemove"?(lm=s.screenX-uf.screenX,um=s.screenY-uf.screenY):um=lm=0,uf=s),lm)},movementY:function(s){return"movementY"in s?s.movementY:um}}),p0=Bi(Fd),jE=h({},Fd,{dataTransfer:0}),zE=Bi(jE),Lu=h({},Du,{relatedTarget:0}),cm=Bi(Lu),VE=h({},na,{animationName:0,elapsedTime:0,pseudoElement:0}),cf=Bi(VE),HE=h({},na,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Bu=Bi(HE),m0=h({},na,{data:0}),Sl=Bi(m0),v0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XE(s){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(s):(s=fm[s])?!!u[s]:!1}function dm(){return XE}var qE=h({},Du,{key:function(s){if(s.key){var u=v0[s.key]||s.key;if(u!=="Unidentified")return u}return s.type==="keypress"?(s=lf(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Tl[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dm,charCode:function(s){return s.type==="keypress"?lf(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?lf(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),g0=Bi(qE),GE=h({},Fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_0=Bi(GE),y0=h({},Du,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dm}),On=Bi(y0),E0=h({},na,{propertyName:0,elapsedTime:0,pseudoElement:0}),WE=Bi(E0),es=h({},Fd,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),b0=Bi(es),Ud=h({},na,{newState:0,oldState:0}),Al=Bi(Ud),hm=[9,13,27,32],Fu=Qo&&"CompositionEvent"in window,ts=null;Qo&&"documentMode"in document&&(ts=document.documentMode);var kd=Qo&&"TextEvent"in window&&!ts,pm=Qo&&(!Fu||ts&&8<ts&&11>=ts),jd=" ",mm=!1;function x0(s,u){switch(s){case"keyup":return hm.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function S0(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Uu=!1;function $E(s,u){switch(s){case"compositionend":return S0(u);case"keypress":return u.which!==32?null:(mm=!0,jd);case"textInput":return s=u.data,s===jd&&mm?null:s;default:return null}}function vm(s,u){if(Uu)return s==="compositionend"||!Fu&&x0(s,u)?(s=sm(),Pu=Iu=Us=null,Uu=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return pm&&u.locale!=="ko"?null:u.data;default:return null}}var zd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vd(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u==="input"?!!zd[s.type]:u==="textarea"}function Hd(s,u,d,m){Nu?Mu?Mu.push(m):Mu=[m]:Nu=m,u=E_(u,"onChange"),0<u.length&&(d=new xl("onChange","change",null,d,m),s.push({event:d,listeners:u}))}var bo=null,Rl=null;function gm(s){ow(s,0)}function ku(s){var u=Is(s);if(Cu(u))return s}function Xd(s,u){if(s==="change")return u}var _m=!1;if(Qo){var qd;if(Qo){var Gd="oninput"in document;if(!Gd){var ym=document.createElement("div");ym.setAttribute("oninput","return;"),Gd=typeof ym.oninput=="function"}qd=Gd}else qd=!1;_m=qd&&(!document.documentMode||9<document.documentMode)}function Em(){bo&&(bo.detachEvent("onpropertychange",bm),Rl=bo=null)}function bm(s){if(s.propertyName==="value"&&ku(Rl)){var u=[];Hd(u,Rl,s,ra(s)),d0(gm,u)}}function T0(s,u,d){s==="focusin"?(Em(),bo=u,Rl=d,bo.attachEvent("onpropertychange",bm)):s==="focusout"&&Em()}function A0(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ku(Rl)}function ju(s,u){if(s==="click")return ku(u)}function xm(s,u){if(s==="input"||s==="change")return ku(u)}function Sm(s,u){return s===u&&(s!==0||1/s===1/u)||s!==s&&u!==u}var Si=typeof Object.is=="function"?Object.is:Sm;function ff(s,u){if(Si(s,u))return!0;if(typeof s!="object"||s===null||typeof u!="object"||u===null)return!1;var d=Object.keys(s),m=Object.keys(u);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var y=d[m];if(!Oe.call(u,y)||!Si(s[y],u[y]))return!1}return!0}function R0(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function C0(s,u){var d=R0(s);s=0;for(var m;d;){if(d.nodeType===3){if(m=s+d.textContent.length,s<=u&&m>=u)return{node:d,offset:u-s};s=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=R0(d)}}function Wd(s,u){return s&&u?s===u?!0:s&&s.nodeType===3?!1:u&&u.nodeType===3?Wd(s,u.parentNode):"contains"in s?s.contains(u):s.compareDocumentPosition?!!(s.compareDocumentPosition(u)&16):!1:!1}function O0(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var u=ga(s.document);u instanceof s.HTMLIFrameElement;){try{var d=typeof u.contentWindow.location.href=="string"}catch{d=!1}if(d)s=u.contentWindow;else break;u=ga(s.document)}return u}function Tm(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u&&(u==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||u==="textarea"||s.contentEditable==="true")}var YE=Qo&&"documentMode"in document&&11>=document.documentMode,ks=null,Am=null,Cl=null,$d=!1;function Rm(s,u,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;$d||ks==null||ks!==ga(m)||(m=ks,"selectionStart"in m&&Tm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Cl&&ff(Cl,m)||(Cl=m,m=E_(Am,"onSelect"),0<m.length&&(u=new xl("onSelect","select",null,u,d),s.push({event:u,listeners:m}),u.target=ks)))}function rs(s,u){var d={};return d[s.toLowerCase()]=u.toLowerCase(),d["Webkit"+s]="webkit"+u,d["Moz"+s]="moz"+u,d}var zu={animationend:rs("Animation","AnimationEnd"),animationiteration:rs("Animation","AnimationIteration"),animationstart:rs("Animation","AnimationStart"),transitionrun:rs("Transition","TransitionRun"),transitionstart:rs("Transition","TransitionStart"),transitioncancel:rs("Transition","TransitionCancel"),transitionend:rs("Transition","TransitionEnd")},Vu={},w0={};Qo&&(w0=document.createElement("div").style,"AnimationEvent"in window||(delete zu.animationend.animation,delete zu.animationiteration.animation,delete zu.animationstart.animation),"TransitionEvent"in window||delete zu.transitionend.transition);function Ol(s){if(Vu[s])return Vu[s];if(!zu[s])return s;var u=zu[s],d;for(d in u)if(u.hasOwnProperty(d)&&d in w0)return Vu[s]=u[d];return s}var N0=Ol("animationend"),M0=Ol("animationiteration"),I0=Ol("animationstart"),ZE=Ol("transitionrun"),KE=Ol("transitionstart"),P0=Ol("transitioncancel"),df=Ol("transitionend"),D0=new Map,Hu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hu.push("scrollEnd");function Vn(s,u){D0.set(s,u),Na(u,[s])}var wl=new WeakMap;function _a(s,u){if(typeof s=="object"&&s!==null){var d=wl.get(s);return d!==void 0?d:(u={value:s,source:u,stack:ta(u)},wl.set(s,u),u)}return{value:s,source:u,stack:ta(u)}}var ya=[],Nl=0,Yd=0;function hf(){for(var s=Nl,u=Yd=Nl=0;u<s;){var d=ya[u];ya[u++]=null;var m=ya[u];ya[u++]=null;var y=ya[u];ya[u++]=null;var x=ya[u];if(ya[u++]=null,m!==null&&y!==null){var B=m.pending;B===null?y.next=y:(y.next=B.next,B.next=y),m.pending=y}x!==0&&oi(d,y,x)}}function pf(s,u,d,m){ya[Nl++]=s,ya[Nl++]=u,ya[Nl++]=d,ya[Nl++]=m,Yd|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function Cm(s,u,d,m){return pf(s,u,d,m),mf(s)}function Ja(s,u){return pf(s,null,null,u),mf(s)}function oi(s,u,d){s.lanes|=d;var m=s.alternate;m!==null&&(m.lanes|=d);for(var y=!1,x=s.return;x!==null;)x.childLanes|=d,m=x.alternate,m!==null&&(m.childLanes|=d),x.tag===22&&(s=x.stateNode,s===null||s._visibility&1||(y=!0)),s=x,x=x.return;return s.tag===3?(x=s.stateNode,y&&u!==null&&(y=31-hr(d),s=x.hiddenUpdates,m=s[y],m===null?s[y]=[u]:m.push(u),u.lane=d|536870912),x):null}function mf(s){if(50<ev)throw ev=0,ub=null,Error(n(185));for(var u=s.return;u!==null;)s=u,u=s.return;return s.tag===3?s.stateNode:null}var Ml={};function Il(s,u,d,m){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ia(s,u,d,m){return new Il(s,u,d,m)}function Zd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ns(s,u){var d=s.alternate;return d===null?(d=ia(s.tag,u,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=u,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&65011712,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,u=s.dependencies,d.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function L0(s,u){s.flags&=65011714;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=u,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,u=d.dependencies,s.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),s}function Kd(s,u,d,m,y,x){var B=0;if(m=s,typeof s=="function")Zd(s)&&(B=1);else if(typeof s=="string")B=RV(s,d,tt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case re:return s=ia(31,d,u,y),s.elementType=re,s.lanes=x,s;case _:return Pl(d.children,y,x,u);case E:B=8,y|=24;break;case b:return s=ia(12,d,u,y|2),s.elementType=b,s.lanes=x,s;case D:return s=ia(13,d,u,y),s.elementType=D,s.lanes=x,s;case I:return s=ia(19,d,u,y),s.elementType=I,s.lanes=x,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case S:case C:B=10;break e;case T:B=9;break e;case M:B=11;break e;case N:B=14;break e;case j:B=16,m=null;break e}B=29,d=Error(n(130,s===null?"null":typeof s,"")),m=null}return u=ia(B,d,u,y),u.elementType=s,u.type=m,u.lanes=x,u}function Pl(s,u,d,m){return s=ia(7,s,m,u),s.lanes=d,s}function vf(s,u,d){return s=ia(6,s,null,u),s.lanes=d,s}function Qd(s,u,d){return u=ia(4,s.children!==null?s.children:[],s.key,u),u.lanes=d,u.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},u}var Xu=[],Dl=0,gf=null,Jd=0,Xi=[],Ia=0,aa=null,Pa=1,xo="";function js(s,u){Xu[Dl++]=Jd,Xu[Dl++]=gf,gf=s,Jd=u}function Om(s,u,d){Xi[Ia++]=Pa,Xi[Ia++]=xo,Xi[Ia++]=aa,aa=s;var m=Pa;s=xo;var y=32-hr(m)-1;m&=~(1<<y),d+=1;var x=32-hr(u)+y;if(30<x){var B=y-y%5;x=(m&(1<<B)-1).toString(32),m>>=B,y-=B,Pa=1<<32-hr(u)+y|d<<y|m,xo=x+s}else Pa=1<<x|d<<y|m,xo=s}function eh(s){s.return!==null&&(js(s,1),Om(s,1,0))}function th(s){for(;s===gf;)gf=Xu[--Dl],Xu[Dl]=null,Jd=Xu[--Dl],Xu[Dl]=null;for(;s===aa;)aa=Xi[--Ia],Xi[Ia]=null,xo=Xi[--Ia],Xi[Ia]=null,Pa=Xi[--Ia],Xi[Ia]=null}var Fi=null,wn=null,Qr=!1,zs=null,ti=!1,rh=Error(n(519));function Ll(s){var u=Error(n(418,""));throw qu(_a(u,s)),rh}function So(s){var u=s.stateNode,d=s.type,m=s.memoizedProps;switch(u[Yn]=s,u[Di]=m,d){case"dialog":$r("cancel",u),$r("close",u);break;case"iframe":case"object":case"embed":$r("load",u);break;case"video":case"audio":for(d=0;d<rv.length;d++)$r(rv[d],u);break;case"source":$r("error",u);break;case"img":case"image":case"link":$r("error",u),$r("load",u);break;case"details":$r("toggle",u);break;case"input":$r("invalid",u),Ou(u,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Ls(u);break;case"select":$r("invalid",u);break;case"textarea":$r("invalid",u),G(u,m.value,m.defaultValue,m.children),Ls(u)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||u.textContent===""+d||m.suppressHydrationWarning===!0||cw(u.textContent,d)?(m.popover!=null&&($r("beforetoggle",u),$r("toggle",u)),m.onScroll!=null&&$r("scroll",u),m.onScrollEnd!=null&&$r("scrollend",u),m.onClick!=null&&(u.onclick=b_),u=!0):u=!1,u||Ll(s)}function nh(s){for(Fi=s.return;Fi;)switch(Fi.tag){case 5:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:Fi=Fi.return}}function eo(s){if(s!==Fi)return!1;if(!Qr)return nh(s),Qr=!0,!1;var u=s.tag,d;if((d=u!==3&&u!==27)&&((d=u===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||Ab(s.type,s.memoizedProps)),d=!d),d&&wn&&Ll(s),nh(s),u===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,u=0;s;){if(s.nodeType===8)if(d=s.data,d==="/$"){if(u===0){wn=hs(s.nextSibling);break e}u--}else d!=="$"&&d!=="$!"&&d!=="$?"||u++;s=s.nextSibling}wn=null}}else u===27?(u=wn,fc(s.type)?(s=wb,wb=null,wn=s):wn=u):wn=Fi?hs(s.stateNode.nextSibling):null;return!0}function Vs(){wn=Fi=null,Qr=!1}function wm(){var s=zs;return s!==null&&(Ba===null?Ba=s:Ba.push.apply(Ba,s),zs=null),s}function qu(s){zs===null?zs=[s]:zs.push(s)}var ih=ge(null),Hs=null,To=null;function Xs(s,u,d){Pe(ih,u._currentValue),u._currentValue=d}function is(s){s._currentValue=ih.current,ye(ih)}function Nm(s,u,d){for(;s!==null;){var m=s.alternate;if((s.childLanes&u)!==u?(s.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),s===d)break;s=s.return}}function Mm(s,u,d,m){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var x=y.dependencies;if(x!==null){var B=y.child;x=x.firstContext;e:for(;x!==null;){var W=x;x=y;for(var de=0;de<u.length;de++)if(W.context===u[de]){x.lanes|=d,W=x.alternate,W!==null&&(W.lanes|=d),Nm(x.return,d,s),m||(B=null);break e}x=W.next}}else if(y.tag===18){if(B=y.return,B===null)throw Error(n(341));B.lanes|=d,x=B.alternate,x!==null&&(x.lanes|=d),Nm(B,d,s),B=null}else B=y.child;if(B!==null)B.return=y;else for(B=y;B!==null;){if(B===s){B=null;break}if(y=B.sibling,y!==null){y.return=B.return,B=y;break}B=B.return}y=B}}function _f(s,u,d,m){s=null;for(var y=u,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var B=y.alternate;if(B===null)throw Error(n(387));if(B=B.memoizedProps,B!==null){var W=y.type;Si(y.pendingProps.value,B.value)||(s!==null?s.push(W):s=[W])}}else if(y===$e.current){if(B=y.alternate,B===null)throw Error(n(387));B.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(lv):s=[lv])}y=y.return}s!==null&&Mm(u,s,d,m),u.flags|=262144}function ah(s){for(s=s.firstContext;s!==null;){if(!Si(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Bl(s){Hs=s,To=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ti(s){return B0(Hs,s)}function yf(s,u){return Hs===null&&Bl(s),B0(s,u)}function B0(s,u){var d=u._currentValue;if(u={context:u,memoizedValue:d,next:null},To===null){if(s===null)throw Error(n(308));To=u,s.dependencies={lanes:0,firstContext:u},s.flags|=524288}else To=To.next=u;return d}var QE=typeof AbortController<"u"?AbortController:function(){var s=[],u=this.signal={aborted:!1,addEventListener:function(d,m){s.push(m)}};this.abort=function(){u.aborted=!0,s.forEach(function(d){return d()})}},Im=e.unstable_scheduleCallback,oh=e.unstable_NormalPriority,si={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pm(){return{controller:new QE,data:new Map,refCount:0}}function Ef(s){s.refCount--,s.refCount===0&&Im(oh,function(){s.controller.abort()})}var bf=null,Dm=0,Fl=0,Gu=null;function JE(s,u){if(bf===null){var d=bf=[];Dm=0,Fl=vb(),Gu={status:"pending",value:void 0,then:function(m){d.push(m)}}}return Dm++,u.then(F0,F0),u}function F0(){if(--Dm===0&&bf!==null){Gu!==null&&(Gu.status="fulfilled");var s=bf;bf=null,Fl=0,Gu=null;for(var u=0;u<s.length;u++)(0,s[u])()}}function eb(s,u){var d=[],m={status:"pending",value:null,reason:null,then:function(y){d.push(y)}};return s.then(function(){m.status="fulfilled",m.value=u;for(var y=0;y<d.length;y++)(0,d[y])(u)},function(y){for(m.status="rejected",m.reason=y,y=0;y<d.length;y++)(0,d[y])(void 0)}),m}var U0=w.S;w.S=function(s,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&JE(s,u),U0!==null&&U0(s,u)};var Da=ge(null);function Lm(){var s=Da.current;return s!==null?s:yr.pooledCache}function sh(s,u){u===null?Pe(Da,Da.current):Pe(Da,u.pool)}function Bm(){var s=Lm();return s===null?null:{parent:si._currentValue,pool:s}}var Ul=Error(n(460)),k0=Error(n(474)),xf=Error(n(542)),Fm={then:function(){}};function j0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function lh(){}function z0(s,u,d){switch(d=s[d],d===void 0?s.push(u):d!==u&&(u.then(lh,lh),u=d),u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,V0(s),s;default:if(typeof u.status=="string")u.then(lh,lh);else{if(s=yr,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=u,s.status="pending",s.then(function(m){if(u.status==="pending"){var y=u;y.status="fulfilled",y.value=m}},function(m){if(u.status==="pending"){var y=u;y.status="rejected",y.reason=m}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,V0(s),s}throw Sf=u,Ul}}var Sf=null;function Wu(){if(Sf===null)throw Error(n(459));var s=Sf;return Sf=null,s}function V0(s){if(s===Ul||s===xf)throw Error(n(483))}var to=!1;function Um(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qs(s,u){s=s.updateQueue,u.updateQueue===s&&(u.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ea(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Gs(s,u,d){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Gt&2)!==0){var y=m.pending;return y===null?u.next=u:(u.next=y.next,y.next=u),m.pending=u,u=mf(s),oi(s,null,d),u}return pf(s,m,u,d),mf(s)}function Ao(s,u,d){if(u=u.updateQueue,u!==null&&(u=u.shared,(d&4194048)!==0)){var m=u.lanes;m&=s.pendingLanes,d|=m,u.lanes=d,Pi(s,d)}}function uh(s,u){var d=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var y=null,x=null;if(d=d.firstBaseUpdate,d!==null){do{var B={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};x===null?y=x=B:x=x.next=B,d=d.next}while(d!==null);x===null?y=x=u:x=x.next=u}else y=x=u;d={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:m.shared,callbacks:m.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=u:s.next=u,d.lastBaseUpdate=u}var Ws=!1;function kl(){if(Ws){var s=Gu;if(s!==null)throw s}}function $u(s,u,d,m){Ws=!1;var y=s.updateQueue;to=!1;var x=y.firstBaseUpdate,B=y.lastBaseUpdate,W=y.shared.pending;if(W!==null){y.shared.pending=null;var de=W,Le=de.next;de.next=null,B===null?x=Le:B.next=Le,B=de;var at=s.alternate;at!==null&&(at=at.updateQueue,W=at.lastBaseUpdate,W!==B&&(W===null?at.firstBaseUpdate=Le:W.next=Le,at.lastBaseUpdate=de))}if(x!==null){var mt=y.baseState;B=0,at=Le=de=null,W=x;do{var ze=W.lane&-536870913,He=ze!==W.lane;if(He?(Hr&ze)===ze:(m&ze)===ze){ze!==0&&ze===Fl&&(Ws=!0),at!==null&&(at=at.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var Sr=s,vr=W;ze=u;var gn=d;switch(vr.tag){case 1:if(Sr=vr.payload,typeof Sr=="function"){mt=Sr.call(gn,mt,ze);break e}mt=Sr;break e;case 3:Sr.flags=Sr.flags&-65537|128;case 0:if(Sr=vr.payload,ze=typeof Sr=="function"?Sr.call(gn,mt,ze):Sr,ze==null)break e;mt=h({},mt,ze);break e;case 2:to=!0}}ze=W.callback,ze!==null&&(s.flags|=64,He&&(s.flags|=8192),He=y.callbacks,He===null?y.callbacks=[ze]:He.push(ze))}else He={lane:ze,tag:W.tag,payload:W.payload,callback:W.callback,next:null},at===null?(Le=at=He,de=mt):at=at.next=He,B|=ze;if(W=W.next,W===null){if(W=y.shared.pending,W===null)break;He=W,W=He.next,He.next=null,y.lastBaseUpdate=He,y.shared.pending=null}}while(!0);at===null&&(de=mt),y.baseState=de,y.firstBaseUpdate=Le,y.lastBaseUpdate=at,x===null&&(y.shared.lanes=0),sc|=B,s.lanes=B,s.memoizedState=mt}}function km(s,u){if(typeof s!="function")throw Error(n(191,s));s.call(u)}function jm(s,u){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)km(d[s],u)}var jl=ge(null),Yu=ge(0);function zm(s,u){s=$l,Pe(Yu,s),Pe(jl,u),$l=s|u.baseLanes}function ch(){Pe(Yu,$l),Pe(jl,jl.current)}function fh(){$l=Yu.current,ye(jl),ye(Yu)}var Ro=0,Mr=null,ln=null,Kn=null,Tf=!1,zl=!1,as=!1,Af=0,Zu=0,$s=null,Vm=0;function Hn(){throw Error(n(321))}function Rf(s,u){if(u===null)return!1;for(var d=0;d<u.length&&d<s.length;d++)if(!Si(s[d],u[d]))return!1;return!0}function dh(s,u,d,m,y,x){return Ro=x,Mr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,w.H=s===null||s.memoizedState===null?n_:fs,as=!1,x=d(m,y),as=!1,zl&&(x=hh(u,d,m,y)),Hm(s),x}function Hm(s){w.H=Sh;var u=ln!==null&&ln.next!==null;if(Ro=0,Kn=ln=Mr=null,Tf=!1,Zu=0,$s=null,u)throw Error(n(300));s===null||li||(s=s.dependencies,s!==null&&ah(s)&&(li=!0))}function hh(s,u,d,m){Mr=s;var y=0;do{if(zl&&($s=null),Zu=0,zl=!1,25<=y)throw Error(n(301));if(y+=1,Kn=ln=null,s.updateQueue!=null){var x=s.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}w.H=i_,x=u(d,m)}while(zl);return x}function H0(){var s=w.H,u=s.useState()[0];return u=typeof u.then=="function"?ba(u):u,s=s.useState()[0],(ln!==null?ln.memoizedState:null)!==s&&(Mr.flags|=1024),u}function ph(){var s=Af!==0;return Af=0,s}function Cf(s,u,d){u.updateQueue=s.updateQueue,u.flags&=-2053,s.lanes&=~d}function Of(s){if(Tf){for(s=s.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}Tf=!1}Ro=0,Kn=ln=Mr=null,zl=!1,Zu=Af=0,$s=null}function di(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?Mr.memoizedState=Kn=s:Kn=Kn.next=s,Kn}function Qn(){if(ln===null){var s=Mr.alternate;s=s!==null?s.memoizedState:null}else s=ln.next;var u=Kn===null?Mr.memoizedState:Kn.next;if(u!==null)Kn=u,ln=s;else{if(s===null)throw Mr.alternate===null?Error(n(467)):Error(n(310));ln=s,s={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},Kn===null?Mr.memoizedState=Kn=s:Kn=Kn.next=s}return Kn}function Ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ba(s){var u=Zu;return Zu+=1,$s===null&&($s=[]),s=z0($s,s,u),u=Mr,(Kn===null?u.memoizedState:Kn.next)===null&&(u=u.alternate,w.H=u===null||u.memoizedState===null?n_:fs),s}function Ys(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ba(s);if(s.$$typeof===C)return Ti(s)}throw Error(n(438,String(s)))}function os(s){var u=null,d=Mr.updateQueue;if(d!==null&&(u=d.memoCache),u==null){var m=Mr.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(u={data:m.data.map(function(y){return y.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),d===null&&(d=Ku(),Mr.updateQueue=d),d.memoCache=u,d=u.data[u.index],d===void 0)for(d=u.data[u.index]=Array(s),m=0;m<s;m++)d[m]=Q;return u.index++,d}function xa(s,u){return typeof u=="function"?u(s):u}function Zs(s){var u=Qn();return ss(u,ln,s)}function ss(s,u,d){var m=s.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=d;var y=s.baseQueue,x=m.pending;if(x!==null){if(y!==null){var B=y.next;y.next=x.next,x.next=B}u.baseQueue=y=x,m.pending=null}if(x=s.baseState,y===null)s.memoizedState=x;else{u=y.next;var W=B=null,de=null,Le=u,at=!1;do{var mt=Le.lane&-536870913;if(mt!==Le.lane?(Hr&mt)===mt:(Ro&mt)===mt){var ze=Le.revertLane;if(ze===0)de!==null&&(de=de.next={lane:0,revertLane:0,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),mt===Fl&&(at=!0);else if((Ro&ze)===ze){Le=Le.next,ze===Fl&&(at=!0);continue}else mt={lane:0,revertLane:Le.revertLane,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},de===null?(W=de=mt,B=x):de=de.next=mt,Mr.lanes|=ze,sc|=ze;mt=Le.action,as&&d(x,mt),x=Le.hasEagerState?Le.eagerState:d(x,mt)}else ze={lane:mt,revertLane:Le.revertLane,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},de===null?(W=de=ze,B=x):de=de.next=ze,Mr.lanes|=mt,sc|=mt;Le=Le.next}while(Le!==null&&Le!==u);if(de===null?B=x:de.next=W,!Si(x,s.memoizedState)&&(li=!0,at&&(d=Gu,d!==null)))throw d;s.memoizedState=x,s.baseState=B,s.baseQueue=de,m.lastRenderedState=x}return y===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function ls(s){var u=Qn(),d=u.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var m=d.dispatch,y=d.pending,x=u.memoizedState;if(y!==null){d.pending=null;var B=y=y.next;do x=s(x,B.action),B=B.next;while(B!==y);Si(x,u.memoizedState)||(li=!0),u.memoizedState=x,u.baseQueue===null&&(u.baseState=x),d.lastRenderedState=x}return[x,m]}function Ks(s,u,d){var m=Mr,y=Qn(),x=Qr;if(x){if(d===void 0)throw Error(n(407));d=d()}else d=u();var B=!Si((ln||y).memoizedState,d);B&&(y.memoizedState=d,li=!0),y=y.queue;var W=Qu.bind(null,m,y,s);if(Mf(2048,8,W,[s]),y.getSnapshot!==u||B||Kn!==null&&Kn.memoizedState.tag&1){if(m.flags|=2048,Ju(9,_h(),Nf.bind(null,m,y,d,u),null),yr===null)throw Error(n(349));x||(Ro&124)!==0||wf(m,u,d)}return d}function wf(s,u,d){s.flags|=16384,s={getSnapshot:u,value:d},u=Mr.updateQueue,u===null?(u=Ku(),Mr.updateQueue=u,u.stores=[s]):(d=u.stores,d===null?u.stores=[s]:d.push(s))}function Nf(s,u,d,m){u.value=d,u.getSnapshot=m,mh(u)&&vh(s)}function Qu(s,u,d){return d(function(){mh(u)&&vh(s)})}function mh(s){var u=s.getSnapshot;s=s.value;try{var d=u();return!Si(s,d)}catch{return!0}}function vh(s){var u=Ja(s,2);u!==null&&oo(u,s,2)}function Qs(s){var u=di();if(typeof s=="function"){var d=s;if(s=d(),as){dr(!0);try{d()}finally{dr(!1)}}}return u.memoizedState=u.baseState=s,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:s},u}function Vl(s,u,d,m){return s.baseState=d,ss(s,ln,typeof m=="function"?m:xa)}function tb(s,u,d,m,y){if(jf(s))throw Error(n(485));if(s=u.action,s!==null){var x={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){x.listeners.push(B)}};w.T!==null?d(!0):x.isTransition=!1,m(x),d=u.pending,d===null?(x.next=u.pending=x,X0(u,x)):(x.next=d.next,u.pending=d.next=x)}}function X0(s,u){var d=u.action,m=u.payload,y=s.state;if(u.isTransition){var x=w.T,B={};w.T=B;try{var W=d(y,m),de=w.S;de!==null&&de(B,W),Xm(s,u,W)}catch(Le){gh(s,u,Le)}finally{w.T=x}}else try{x=d(y,m),Xm(s,u,x)}catch(Le){gh(s,u,Le)}}function Xm(s,u,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){qm(s,u,m)},function(m){return gh(s,u,m)}):qm(s,u,d)}function qm(s,u,d){u.status="fulfilled",u.value=d,q0(u),s.state=d,u=s.pending,u!==null&&(d=u.next,d===u?s.pending=null:(d=d.next,u.next=d,X0(s,d)))}function gh(s,u,d){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do u.status="rejected",u.reason=d,q0(u),u=u.next;while(u!==m)}s.action=null}function q0(s){s=s.listeners;for(var u=0;u<s.length;u++)(0,s[u])()}function Hl(s,u){return u}function G0(s,u){if(Qr){var d=yr.formState;if(d!==null){e:{var m=Mr;if(Qr){if(wn){t:{for(var y=wn,x=ti;y.nodeType!==8;){if(!x){y=null;break t}if(y=hs(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){wn=hs(y.nextSibling),m=y.data==="F!";break e}}Ll(m)}m=!1}m&&(u=d[0])}}return d=di(),d.memoizedState=d.baseState=u,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:u},d.queue=m,d=Wm.bind(null,Mr,m),m.dispatch=d,m=Qs(!1),x=cs.bind(null,Mr,!1,m.queue),m=di(),y={state:u,dispatch:null,action:s,pending:null},m.queue=y,d=tb.bind(null,Mr,y,x,d),y.dispatch=d,m.memoizedState=s,[u,d,!1]}function W0(s){var u=Qn();return $0(u,ln,s)}function $0(s,u,d){if(u=ss(s,u,Hl)[0],s=Zs(xa)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var m=ba(u)}catch(B){throw B===Ul?xf:B}else m=u;u=Qn();var y=u.queue,x=y.dispatch;return d!==u.memoizedState&&(Mr.flags|=2048,Ju(9,_h(),Y0.bind(null,y,d),null)),[m,x,s]}function Y0(s,u){s.action=u}function Z0(s){var u=Qn(),d=ln;if(d!==null)return $0(u,d,s);Qn(),u=u.memoizedState,d=Qn();var m=d.queue.dispatch;return d.memoizedState=s,[u,m,!1]}function Ju(s,u,d,m){return s={tag:s,create:d,deps:m,inst:u,next:null},u=Mr.updateQueue,u===null&&(u=Ku(),Mr.updateQueue=u),d=u.lastEffect,d===null?u.lastEffect=s.next=s:(m=d.next,d.next=s,s.next=m,u.lastEffect=s),s}function _h(){return{destroy:void 0,resource:void 0}}function K0(){return Qn().memoizedState}function yh(s,u,d,m){var y=di();m=m===void 0?null:m,Mr.flags|=s,y.memoizedState=Ju(1|u,_h(),d,m)}function Mf(s,u,d,m){var y=Qn();m=m===void 0?null:m;var x=y.memoizedState.inst;ln!==null&&m!==null&&Rf(m,ln.memoizedState.deps)?y.memoizedState=Ju(u,x,d,m):(Mr.flags|=s,y.memoizedState=Ju(1|u,x,d,m))}function Q0(s,u){yh(8390656,8,s,u)}function J0(s,u){Mf(2048,8,s,u)}function e_(s,u){return Mf(4,2,s,u)}function t_(s,u){return Mf(4,4,s,u)}function Eh(s,u){if(typeof u=="function"){s=s();var d=u(s);return function(){typeof d=="function"?d():u(null)}}if(u!=null)return s=s(),u.current=s,function(){u.current=null}}function If(s,u,d){d=d!=null?d.concat([s]):null,Mf(4,4,Eh.bind(null,u,s),d)}function ec(){}function Pf(s,u){var d=Qn();u=u===void 0?null:u;var m=d.memoizedState;return u!==null&&Rf(u,m[1])?m[0]:(d.memoizedState=[s,u],s)}function bh(s,u){var d=Qn();u=u===void 0?null:u;var m=d.memoizedState;if(u!==null&&Rf(u,m[1]))return m[0];if(m=s(),as){dr(!0);try{s()}finally{dr(!1)}}return d.memoizedState=[m,u],m}function tc(s,u,d){return d===void 0||(Ro&1073741824)!==0?s.memoizedState=u:(s.memoizedState=d,s=FO(),Mr.lanes|=s,sc|=s,d)}function Df(s,u,d,m){return Si(d,u)?d:jl.current!==null?(s=tc(s,d,m),Si(s,u)||(li=!0),s):(Ro&42)===0?(li=!0,s.memoizedState=d):(s=FO(),Mr.lanes|=s,sc|=s,u)}function Lf(s,u,d,m,y){var x=z.p;z.p=x!==0&&8>x?x:8;var B=w.T,W={};w.T=W,cs(s,!1,u,d);try{var de=y(),Le=w.S;if(Le!==null&&Le(W,de),de!==null&&typeof de=="object"&&typeof de.then=="function"){var at=eb(de,m);us(s,u,at,ao(s))}else us(s,u,m,ao(s))}catch(mt){us(s,u,{then:function(){},status:"rejected",reason:mt},ao())}finally{z.p=x,w.T=B}}function Gm(){}function rc(s,u,d,m){if(s.tag!==5)throw Error(n(476));var y=Bf(s).queue;Lf(s,y,u,H,d===null?Gm:function(){return Ff(s),d(m)})}function Bf(s){var u=s.memoizedState;if(u!==null)return u;u={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:H},next:null};var d={};return u.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:d},next:null},s.memoizedState=u,s=s.alternate,s!==null&&(s.memoizedState=u),u}function Ff(s){var u=Bf(s).next.queue;us(s,u,{},ao())}function Xl(){return Ti(lv)}function nc(){return Qn().memoizedState}function ic(){return Qn().memoizedState}function Uf(s){for(var u=s.return;u!==null;){switch(u.tag){case 24:case 3:var d=ao();s=Ea(d);var m=Gs(u,s,d);m!==null&&(oo(m,u,d),Ao(m,u,d)),u={cache:Pm()},s.payload=u;return}u=u.return}}function kf(s,u,d){var m=ao();d={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},jf(s)?xh(u,d):(d=Cm(s,u,d,m),d!==null&&(oo(d,s,m),r_(d,u,m)))}function Wm(s,u,d){var m=ao();us(s,u,d,m)}function us(s,u,d,m){var y={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(jf(s))xh(u,y);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=u.lastRenderedReducer,x!==null))try{var B=u.lastRenderedState,W=x(B,d);if(y.hasEagerState=!0,y.eagerState=W,Si(W,B))return pf(s,u,y,0),yr===null&&hf(),!1}catch{}finally{}if(d=Cm(s,u,y,m),d!==null)return oo(d,s,m),r_(d,u,m),!0}return!1}function cs(s,u,d,m){if(m={lane:2,revertLane:vb(),action:m,hasEagerState:!1,eagerState:null,next:null},jf(s)){if(u)throw Error(n(479))}else u=Cm(s,d,m,2),u!==null&&oo(u,s,2)}function jf(s){var u=s.alternate;return s===Mr||u!==null&&u===Mr}function xh(s,u){zl=Tf=!0;var d=s.pending;d===null?u.next=u:(u.next=d.next,d.next=u),s.pending=u}function r_(s,u,d){if((d&4194048)!==0){var m=u.lanes;m&=s.pendingLanes,d|=m,u.lanes=d,Pi(s,d)}}var Sh={readContext:Ti,use:Ys,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useLayoutEffect:Hn,useInsertionEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useSyncExternalStore:Hn,useId:Hn,useHostTransitionStatus:Hn,useFormState:Hn,useActionState:Hn,useOptimistic:Hn,useMemoCache:Hn,useCacheRefresh:Hn},n_={readContext:Ti,use:Ys,useCallback:function(s,u){return di().memoizedState=[s,u===void 0?null:u],s},useContext:Ti,useEffect:Q0,useImperativeHandle:function(s,u,d){d=d!=null?d.concat([s]):null,yh(4194308,4,Eh.bind(null,u,s),d)},useLayoutEffect:function(s,u){return yh(4194308,4,s,u)},useInsertionEffect:function(s,u){yh(4,2,s,u)},useMemo:function(s,u){var d=di();u=u===void 0?null:u;var m=s();if(as){dr(!0);try{s()}finally{dr(!1)}}return d.memoizedState=[m,u],m},useReducer:function(s,u,d){var m=di();if(d!==void 0){var y=d(u);if(as){dr(!0);try{d(u)}finally{dr(!1)}}}else y=u;return m.memoizedState=m.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},m.queue=s,s=s.dispatch=kf.bind(null,Mr,s),[m.memoizedState,s]},useRef:function(s){var u=di();return s={current:s},u.memoizedState=s},useState:function(s){s=Qs(s);var u=s.queue,d=Wm.bind(null,Mr,u);return u.dispatch=d,[s.memoizedState,d]},useDebugValue:ec,useDeferredValue:function(s,u){var d=di();return tc(d,s,u)},useTransition:function(){var s=Qs(!1);return s=Lf.bind(null,Mr,s.queue,!0,!1),di().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,u,d){var m=Mr,y=di();if(Qr){if(d===void 0)throw Error(n(407));d=d()}else{if(d=u(),yr===null)throw Error(n(349));(Hr&124)!==0||wf(m,u,d)}y.memoizedState=d;var x={value:d,getSnapshot:u};return y.queue=x,Q0(Qu.bind(null,m,x,s),[s]),m.flags|=2048,Ju(9,_h(),Nf.bind(null,m,x,d,u),null),d},useId:function(){var s=di(),u=yr.identifierPrefix;if(Qr){var d=xo,m=Pa;d=(m&~(1<<32-hr(m)-1)).toString(32)+d,u="«"+u+"R"+d,d=Af++,0<d&&(u+="H"+d.toString(32)),u+="»"}else d=Vm++,u="«"+u+"r"+d.toString(32)+"»";return s.memoizedState=u},useHostTransitionStatus:Xl,useFormState:G0,useActionState:G0,useOptimistic:function(s){var u=di();u.memoizedState=u.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=d,u=cs.bind(null,Mr,!0,d),d.dispatch=u,[s,u]},useMemoCache:os,useCacheRefresh:function(){return di().memoizedState=Uf.bind(null,Mr)}},fs={readContext:Ti,use:Ys,useCallback:Pf,useContext:Ti,useEffect:J0,useImperativeHandle:If,useInsertionEffect:e_,useLayoutEffect:t_,useMemo:bh,useReducer:Zs,useRef:K0,useState:function(){return Zs(xa)},useDebugValue:ec,useDeferredValue:function(s,u){var d=Qn();return Df(d,ln.memoizedState,s,u)},useTransition:function(){var s=Zs(xa)[0],u=Qn().memoizedState;return[typeof s=="boolean"?s:ba(s),u]},useSyncExternalStore:Ks,useId:nc,useHostTransitionStatus:Xl,useFormState:W0,useActionState:W0,useOptimistic:function(s,u){var d=Qn();return Vl(d,ln,s,u)},useMemoCache:os,useCacheRefresh:ic},i_={readContext:Ti,use:Ys,useCallback:Pf,useContext:Ti,useEffect:J0,useImperativeHandle:If,useInsertionEffect:e_,useLayoutEffect:t_,useMemo:bh,useReducer:ls,useRef:K0,useState:function(){return ls(xa)},useDebugValue:ec,useDeferredValue:function(s,u){var d=Qn();return ln===null?tc(d,s,u):Df(d,ln.memoizedState,s,u)},useTransition:function(){var s=ls(xa)[0],u=Qn().memoizedState;return[typeof s=="boolean"?s:ba(s),u]},useSyncExternalStore:Ks,useId:nc,useHostTransitionStatus:Xl,useFormState:Z0,useActionState:Z0,useOptimistic:function(s,u){var d=Qn();return ln!==null?Vl(d,ln,s,u):(d.baseState=s,[s,d.queue.dispatch])},useMemoCache:os,useCacheRefresh:ic},ql=null,ac=0;function Th(s){var u=ac;return ac+=1,ql===null&&(ql=[]),z0(ql,s,u)}function oc(s,u){u=u.props.ref,s.ref=u!==void 0?u:null}function Ah(s,u){throw u.$$typeof===p?Error(n(525)):(s=Object.prototype.toString.call(u),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":s)))}function ro(s){var u=s._init;return u(s._payload)}function $m(s){function u(Ae,_e){if(s){var Ie=Ae.deletions;Ie===null?(Ae.deletions=[_e],Ae.flags|=16):Ie.push(_e)}}function d(Ae,_e){if(!s)return null;for(;_e!==null;)u(Ae,_e),_e=_e.sibling;return null}function m(Ae){for(var _e=new Map;Ae!==null;)Ae.key!==null?_e.set(Ae.key,Ae):_e.set(Ae.index,Ae),Ae=Ae.sibling;return _e}function y(Ae,_e){return Ae=ns(Ae,_e),Ae.index=0,Ae.sibling=null,Ae}function x(Ae,_e,Ie){return Ae.index=Ie,s?(Ie=Ae.alternate,Ie!==null?(Ie=Ie.index,Ie<_e?(Ae.flags|=67108866,_e):Ie):(Ae.flags|=67108866,_e)):(Ae.flags|=1048576,_e)}function B(Ae){return s&&Ae.alternate===null&&(Ae.flags|=67108866),Ae}function W(Ae,_e,Ie,lt){return _e===null||_e.tag!==6?(_e=vf(Ie,Ae.mode,lt),_e.return=Ae,_e):(_e=y(_e,Ie),_e.return=Ae,_e)}function de(Ae,_e,Ie,lt){var Qt=Ie.type;return Qt===_?at(Ae,_e,Ie.props.children,lt,Ie.key):_e!==null&&(_e.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===j&&ro(Qt)===_e.type)?(_e=y(_e,Ie.props),oc(_e,Ie),_e.return=Ae,_e):(_e=Kd(Ie.type,Ie.key,Ie.props,null,Ae.mode,lt),oc(_e,Ie),_e.return=Ae,_e)}function Le(Ae,_e,Ie,lt){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Ie.containerInfo||_e.stateNode.implementation!==Ie.implementation?(_e=Qd(Ie,Ae.mode,lt),_e.return=Ae,_e):(_e=y(_e,Ie.children||[]),_e.return=Ae,_e)}function at(Ae,_e,Ie,lt,Qt){return _e===null||_e.tag!==7?(_e=Pl(Ie,Ae.mode,lt,Qt),_e.return=Ae,_e):(_e=y(_e,Ie),_e.return=Ae,_e)}function mt(Ae,_e,Ie){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return _e=vf(""+_e,Ae.mode,Ie),_e.return=Ae,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case v:return Ie=Kd(_e.type,_e.key,_e.props,null,Ae.mode,Ie),oc(Ie,_e),Ie.return=Ae,Ie;case g:return _e=Qd(_e,Ae.mode,Ie),_e.return=Ae,_e;case j:var lt=_e._init;return _e=lt(_e._payload),mt(Ae,_e,Ie)}if(le(_e)||R(_e))return _e=Pl(_e,Ae.mode,Ie,null),_e.return=Ae,_e;if(typeof _e.then=="function")return mt(Ae,Th(_e),Ie);if(_e.$$typeof===C)return mt(Ae,yf(Ae,_e),Ie);Ah(Ae,_e)}return null}function ze(Ae,_e,Ie,lt){var Qt=_e!==null?_e.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Qt!==null?null:W(Ae,_e,""+Ie,lt);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case v:return Ie.key===Qt?de(Ae,_e,Ie,lt):null;case g:return Ie.key===Qt?Le(Ae,_e,Ie,lt):null;case j:return Qt=Ie._init,Ie=Qt(Ie._payload),ze(Ae,_e,Ie,lt)}if(le(Ie)||R(Ie))return Qt!==null?null:at(Ae,_e,Ie,lt,null);if(typeof Ie.then=="function")return ze(Ae,_e,Th(Ie),lt);if(Ie.$$typeof===C)return ze(Ae,_e,yf(Ae,Ie),lt);Ah(Ae,Ie)}return null}function He(Ae,_e,Ie,lt,Qt){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Ae=Ae.get(Ie)||null,W(_e,Ae,""+lt,Qt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case v:return Ae=Ae.get(lt.key===null?Ie:lt.key)||null,de(_e,Ae,lt,Qt);case g:return Ae=Ae.get(lt.key===null?Ie:lt.key)||null,Le(_e,Ae,lt,Qt);case j:var Xr=lt._init;return lt=Xr(lt._payload),He(Ae,_e,Ie,lt,Qt)}if(le(lt)||R(lt))return Ae=Ae.get(Ie)||null,at(_e,Ae,lt,Qt,null);if(typeof lt.then=="function")return He(Ae,_e,Ie,Th(lt),Qt);if(lt.$$typeof===C)return He(Ae,_e,Ie,yf(_e,lt),Qt);Ah(_e,lt)}return null}function Sr(Ae,_e,Ie,lt){for(var Qt=null,Xr=null,sr=_e,_r=_e=0,ji=null;sr!==null&&_r<Ie.length;_r++){sr.index>_r?(ji=sr,sr=null):ji=sr.sibling;var an=ze(Ae,sr,Ie[_r],lt);if(an===null){sr===null&&(sr=ji);break}s&&sr&&an.alternate===null&&u(Ae,sr),_e=x(an,_e,_r),Xr===null?Qt=an:Xr.sibling=an,Xr=an,sr=ji}if(_r===Ie.length)return d(Ae,sr),Qr&&js(Ae,_r),Qt;if(sr===null){for(;_r<Ie.length;_r++)sr=mt(Ae,Ie[_r],lt),sr!==null&&(_e=x(sr,_e,_r),Xr===null?Qt=sr:Xr.sibling=sr,Xr=sr);return Qr&&js(Ae,_r),Qt}for(sr=m(sr);_r<Ie.length;_r++)ji=He(sr,Ae,_r,Ie[_r],lt),ji!==null&&(s&&ji.alternate!==null&&sr.delete(ji.key===null?_r:ji.key),_e=x(ji,_e,_r),Xr===null?Qt=ji:Xr.sibling=ji,Xr=ji);return s&&sr.forEach(function(vc){return u(Ae,vc)}),Qr&&js(Ae,_r),Qt}function vr(Ae,_e,Ie,lt){if(Ie==null)throw Error(n(151));for(var Qt=null,Xr=null,sr=_e,_r=_e=0,ji=null,an=Ie.next();sr!==null&&!an.done;_r++,an=Ie.next()){sr.index>_r?(ji=sr,sr=null):ji=sr.sibling;var vc=ze(Ae,sr,an.value,lt);if(vc===null){sr===null&&(sr=ji);break}s&&sr&&vc.alternate===null&&u(Ae,sr),_e=x(vc,_e,_r),Xr===null?Qt=vc:Xr.sibling=vc,Xr=vc,sr=ji}if(an.done)return d(Ae,sr),Qr&&js(Ae,_r),Qt;if(sr===null){for(;!an.done;_r++,an=Ie.next())an=mt(Ae,an.value,lt),an!==null&&(_e=x(an,_e,_r),Xr===null?Qt=an:Xr.sibling=an,Xr=an);return Qr&&js(Ae,_r),Qt}for(sr=m(sr);!an.done;_r++,an=Ie.next())an=He(sr,Ae,_r,an.value,lt),an!==null&&(s&&an.alternate!==null&&sr.delete(an.key===null?_r:an.key),_e=x(an,_e,_r),Xr===null?Qt=an:Xr.sibling=an,Xr=an);return s&&sr.forEach(function(UV){return u(Ae,UV)}),Qr&&js(Ae,_r),Qt}function gn(Ae,_e,Ie,lt){if(typeof Ie=="object"&&Ie!==null&&Ie.type===_&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case v:e:{for(var Qt=Ie.key;_e!==null;){if(_e.key===Qt){if(Qt=Ie.type,Qt===_){if(_e.tag===7){d(Ae,_e.sibling),lt=y(_e,Ie.props.children),lt.return=Ae,Ae=lt;break e}}else if(_e.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===j&&ro(Qt)===_e.type){d(Ae,_e.sibling),lt=y(_e,Ie.props),oc(lt,Ie),lt.return=Ae,Ae=lt;break e}d(Ae,_e);break}else u(Ae,_e);_e=_e.sibling}Ie.type===_?(lt=Pl(Ie.props.children,Ae.mode,lt,Ie.key),lt.return=Ae,Ae=lt):(lt=Kd(Ie.type,Ie.key,Ie.props,null,Ae.mode,lt),oc(lt,Ie),lt.return=Ae,Ae=lt)}return B(Ae);case g:e:{for(Qt=Ie.key;_e!==null;){if(_e.key===Qt)if(_e.tag===4&&_e.stateNode.containerInfo===Ie.containerInfo&&_e.stateNode.implementation===Ie.implementation){d(Ae,_e.sibling),lt=y(_e,Ie.children||[]),lt.return=Ae,Ae=lt;break e}else{d(Ae,_e);break}else u(Ae,_e);_e=_e.sibling}lt=Qd(Ie,Ae.mode,lt),lt.return=Ae,Ae=lt}return B(Ae);case j:return Qt=Ie._init,Ie=Qt(Ie._payload),gn(Ae,_e,Ie,lt)}if(le(Ie))return Sr(Ae,_e,Ie,lt);if(R(Ie)){if(Qt=R(Ie),typeof Qt!="function")throw Error(n(150));return Ie=Qt.call(Ie),vr(Ae,_e,Ie,lt)}if(typeof Ie.then=="function")return gn(Ae,_e,Th(Ie),lt);if(Ie.$$typeof===C)return gn(Ae,_e,yf(Ae,Ie),lt);Ah(Ae,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint"?(Ie=""+Ie,_e!==null&&_e.tag===6?(d(Ae,_e.sibling),lt=y(_e,Ie),lt.return=Ae,Ae=lt):(d(Ae,_e),lt=vf(Ie,Ae.mode,lt),lt.return=Ae,Ae=lt),B(Ae)):d(Ae,_e)}return function(Ae,_e,Ie,lt){try{ac=0;var Qt=gn(Ae,_e,Ie,lt);return ql=null,Qt}catch(sr){if(sr===Ul||sr===xf)throw sr;var Xr=ia(29,sr,null,Ae.mode);return Xr.lanes=lt,Xr.return=Ae,Xr}finally{}}}var no=$m(!0),ds=$m(!1),Sa=ge(null),La=null;function io(s){var u=s.alternate;Pe(Pr,Pr.current&1),Pe(Sa,s),La===null&&(u===null||jl.current!==null||u.memoizedState!==null)&&(La=s)}function Ym(s){if(s.tag===22){if(Pe(Pr,Pr.current),Pe(Sa,s),La===null){var u=s.alternate;u!==null&&u.memoizedState!==null&&(La=s)}}else ri()}function ri(){Pe(Pr,Pr.current),Pe(Sa,Sa.current)}function Ui(s){ye(Sa),La===s&&(La=null),ye(Pr)}var Pr=ge(0);function Ai(s){for(var u=s;u!==null;){if(u.tag===13){var d=u.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||Ob(d)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function Rh(s,u,d,m){u=s.memoizedState,d=d(m,u),d=d==null?u:h({},u,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Zm={enqueueSetState:function(s,u,d){s=s._reactInternals;var m=ao(),y=Ea(m);y.payload=u,d!=null&&(y.callback=d),u=Gs(s,y,m),u!==null&&(oo(u,s,m),Ao(u,s,m))},enqueueReplaceState:function(s,u,d){s=s._reactInternals;var m=ao(),y=Ea(m);y.tag=1,y.payload=u,d!=null&&(y.callback=d),u=Gs(s,y,m),u!==null&&(oo(u,s,m),Ao(u,s,m))},enqueueForceUpdate:function(s,u){s=s._reactInternals;var d=ao(),m=Ea(d);m.tag=2,u!=null&&(m.callback=u),u=Gs(s,m,d),u!==null&&(oo(u,s,d),Ao(u,s,d))}};function a_(s,u,d,m,y,x,B){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,x,B):u.prototype&&u.prototype.isPureReactComponent?!ff(d,m)||!ff(y,x):!0}function o_(s,u,d,m){s=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(d,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(d,m),u.state!==s&&Zm.enqueueReplaceState(u,u.state,null)}function Gl(s,u){var d=u;if("ref"in u){d={};for(var m in u)m!=="ref"&&(d[m]=u[m])}if(s=s.defaultProps){d===u&&(d=h({},d));for(var y in s)d[y]===void 0&&(d[y]=s[y])}return d}var zf=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function s_(s){zf(s)}function l_(s){console.error(s)}function u_(s){zf(s)}function Ch(s,u){try{var d=s.onUncaughtError;d(u.value,{componentStack:u.stack})}catch(m){setTimeout(function(){throw m})}}function c_(s,u,d){try{var m=s.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Oh(s,u,d){return d=Ea(d),d.tag=3,d.payload={element:null},d.callback=function(){Ch(s,u)},d}function Km(s){return s=Ea(s),s.tag=3,s}function Qm(s,u,d,m){var y=d.type.getDerivedStateFromError;if(typeof y=="function"){var x=m.value;s.payload=function(){return y(x)},s.callback=function(){c_(u,d,m)}}var B=d.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(s.callback=function(){c_(u,d,m),typeof y!="function"&&(lc===null?lc=new Set([this]):lc.add(this));var W=m.stack;this.componentDidCatch(m.value,{componentStack:W!==null?W:""})})}function rb(s,u,d,m,y){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(u=d.alternate,u!==null&&_f(u,d,y,!0),d=Sa.current,d!==null){switch(d.tag){case 13:return La===null?fb():d.alternate===null&&ni===0&&(ni=3),d.flags&=-257,d.flags|=65536,d.lanes=y,m===Fm?d.flags|=16384:(u=d.updateQueue,u===null?d.updateQueue=new Set([m]):u.add(m),hb(s,m,y)),!1;case 22:return d.flags|=65536,m===Fm?d.flags|=16384:(u=d.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=u):(d=u.retryQueue,d===null?u.retryQueue=new Set([m]):d.add(m)),hb(s,m,y)),!1}throw Error(n(435,d.tag))}return hb(s,m,y),fb(),!1}if(Qr)return u=Sa.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=y,m!==rh&&(s=Error(n(422),{cause:m}),qu(_a(s,d)))):(m!==rh&&(u=Error(n(423),{cause:m}),qu(_a(u,d))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,m=_a(m,d),y=Oh(s.stateNode,m,y),uh(s,y),ni!==4&&(ni=2)),!1;var x=Error(n(520),{cause:m});if(x=_a(x,d),Jm===null?Jm=[x]:Jm.push(x),ni!==4&&(ni=2),u===null)return!0;m=_a(m,d),d=u;do{switch(d.tag){case 3:return d.flags|=65536,s=y&-y,d.lanes|=s,s=Oh(d.stateNode,m,s),uh(d,s),!1;case 1:if(u=d.type,x=d.stateNode,(d.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(lc===null||!lc.has(x))))return d.flags|=65536,y&=-y,d.lanes|=y,y=Km(y),Qm(y,s,d,m),uh(d,y),!1}d=d.return}while(d!==null);return!1}var f_=Error(n(461)),li=!1;function Ri(s,u,d,m){u.child=s===null?ds(u,null,d,m):no(u,s.child,d,m)}function O(s,u,d,m,y){d=d.render;var x=u.ref;if("ref"in m){var B={};for(var W in m)W!=="ref"&&(B[W]=m[W])}else B=m;return Bl(u),m=dh(s,u,d,B,x,y),W=ph(),s!==null&&!li?(Cf(s,u,y),Ct(s,u,y)):(Qr&&W&&eh(u),u.flags|=1,Ri(s,u,m,y),u.child)}function $(s,u,d,m,y){if(s===null){var x=d.type;return typeof x=="function"&&!Zd(x)&&x.defaultProps===void 0&&d.compare===null?(u.tag=15,u.type=x,ae(s,u,x,m,y)):(s=Kd(d.type,null,m,u,u.mode,y),s.ref=u.ref,s.return=u,u.child=s)}if(x=s.child,!ft(s,y)){var B=x.memoizedProps;if(d=d.compare,d=d!==null?d:ff,d(B,m)&&s.ref===u.ref)return Ct(s,u,y)}return u.flags|=1,s=ns(x,m),s.ref=u.ref,s.return=u,u.child=s}function ae(s,u,d,m,y){if(s!==null){var x=s.memoizedProps;if(ff(x,m)&&s.ref===u.ref)if(li=!1,u.pendingProps=m=x,ft(s,y))(s.flags&131072)!==0&&(li=!0);else return u.lanes=s.lanes,Ct(s,u,y)}return ke(s,u,d,m,y)}function Ce(s,u,d){var m=u.pendingProps,y=m.children,x=s!==null?s.memoizedState:null;if(m.mode==="hidden"){if((u.flags&128)!==0){if(m=x!==null?x.baseLanes|d:d,s!==null){for(y=u.child=s.child,x=0;y!==null;)x=x|y.lanes|y.childLanes,y=y.sibling;u.childLanes=x&~m}else u.childLanes=0,u.child=null;return Ge(s,u,m,d)}if((d&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},s!==null&&sh(u,x!==null?x.cachePool:null),x!==null?zm(u,x):ch(),Ym(u);else return u.lanes=u.childLanes=536870912,Ge(s,u,x!==null?x.baseLanes|d:d,d)}else x!==null?(sh(u,x.cachePool),zm(u,x),ri(),u.memoizedState=null):(s!==null&&sh(u,null),ch(),ri());return Ri(s,u,y,d),u.child}function Ge(s,u,d,m){var y=Lm();return y=y===null?null:{parent:si._currentValue,pool:y},u.memoizedState={baseLanes:d,cachePool:y},s!==null&&sh(u,null),ch(),Ym(u),s!==null&&_f(s,u,m,!0),null}function Ne(s,u){var d=u.ref;if(d===null)s!==null&&s.ref!==null&&(u.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(n(284));(s===null||s.ref!==d)&&(u.flags|=4194816)}}function ke(s,u,d,m,y){return Bl(u),d=dh(s,u,d,m,void 0,y),m=ph(),s!==null&&!li?(Cf(s,u,y),Ct(s,u,y)):(Qr&&m&&eh(u),u.flags|=1,Ri(s,u,d,y),u.child)}function ut(s,u,d,m,y,x){return Bl(u),u.updateQueue=null,d=hh(u,m,d,y),Hm(s),m=ph(),s!==null&&!li?(Cf(s,u,x),Ct(s,u,x)):(Qr&&m&&eh(u),u.flags|=1,Ri(s,u,d,x),u.child)}function dt(s,u,d,m,y){if(Bl(u),u.stateNode===null){var x=Ml,B=d.contextType;typeof B=="object"&&B!==null&&(x=Ti(B)),x=new d(m,x),u.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Zm,u.stateNode=x,x._reactInternals=u,x=u.stateNode,x.props=m,x.state=u.memoizedState,x.refs={},Um(u),B=d.contextType,x.context=typeof B=="object"&&B!==null?Ti(B):Ml,x.state=u.memoizedState,B=d.getDerivedStateFromProps,typeof B=="function"&&(Rh(u,d,B,m),x.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(B=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),B!==x.state&&Zm.enqueueReplaceState(x,x.state,null),$u(u,m,x,y),kl(),x.state=u.memoizedState),typeof x.componentDidMount=="function"&&(u.flags|=4194308),m=!0}else if(s===null){x=u.stateNode;var W=u.memoizedProps,de=Gl(d,W);x.props=de;var Le=x.context,at=d.contextType;B=Ml,typeof at=="object"&&at!==null&&(B=Ti(at));var mt=d.getDerivedStateFromProps;at=typeof mt=="function"||typeof x.getSnapshotBeforeUpdate=="function",W=u.pendingProps!==W,at||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(W||Le!==B)&&o_(u,x,m,B),to=!1;var ze=u.memoizedState;x.state=ze,$u(u,m,x,y),kl(),Le=u.memoizedState,W||ze!==Le||to?(typeof mt=="function"&&(Rh(u,d,mt,m),Le=u.memoizedState),(de=to||a_(u,d,de,m,ze,Le,B))?(at||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(u.flags|=4194308)):(typeof x.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=Le),x.props=m,x.state=Le,x.context=B,m=de):(typeof x.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{x=u.stateNode,qs(s,u),B=u.memoizedProps,at=Gl(d,B),x.props=at,mt=u.pendingProps,ze=x.context,Le=d.contextType,de=Ml,typeof Le=="object"&&Le!==null&&(de=Ti(Le)),W=d.getDerivedStateFromProps,(Le=typeof W=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(B!==mt||ze!==de)&&o_(u,x,m,de),to=!1,ze=u.memoizedState,x.state=ze,$u(u,m,x,y),kl();var He=u.memoizedState;B!==mt||ze!==He||to||s!==null&&s.dependencies!==null&&ah(s.dependencies)?(typeof W=="function"&&(Rh(u,d,W,m),He=u.memoizedState),(at=to||a_(u,d,at,m,ze,He,de)||s!==null&&s.dependencies!==null&&ah(s.dependencies))?(Le||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(m,He,de),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(m,He,de)),typeof x.componentDidUpdate=="function"&&(u.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof x.componentDidUpdate!="function"||B===s.memoizedProps&&ze===s.memoizedState||(u.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||B===s.memoizedProps&&ze===s.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=He),x.props=m,x.state=He,x.context=de,m=at):(typeof x.componentDidUpdate!="function"||B===s.memoizedProps&&ze===s.memoizedState||(u.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||B===s.memoizedProps&&ze===s.memoizedState||(u.flags|=1024),m=!1)}return x=m,Ne(s,u),m=(u.flags&128)!==0,x||m?(x=u.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:x.render(),u.flags|=1,s!==null&&m?(u.child=no(u,s.child,null,y),u.child=no(u,null,d,y)):Ri(s,u,d,y),u.memoizedState=x.state,s=u.child):s=Ct(s,u,y),s}function St(s,u,d,m){return Vs(),u.flags|=256,Ri(s,u,d,m),u.child}var ht={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gt(s){return{baseLanes:s,cachePool:Bm()}}function bt(s,u,d){return s=s!==null?s.childLanes&~d:0,u&&(s|=Co),s}function it(s,u,d){var m=u.pendingProps,y=!1,x=(u.flags&128)!==0,B;if((B=x)||(B=s!==null&&s.memoizedState===null?!1:(Pr.current&2)!==0),B&&(y=!0,u.flags&=-129),B=(u.flags&32)!==0,u.flags&=-33,s===null){if(Qr){if(y?io(u):ri(),Qr){var W=wn,de;if(de=W){e:{for(de=W,W=ti;de.nodeType!==8;){if(!W){W=null;break e}if(de=hs(de.nextSibling),de===null){W=null;break e}}W=de}W!==null?(u.memoizedState={dehydrated:W,treeContext:aa!==null?{id:Pa,overflow:xo}:null,retryLane:536870912,hydrationErrors:null},de=ia(18,null,null,0),de.stateNode=W,de.return=u,u.child=de,Fi=u,wn=null,de=!0):de=!1}de||Ll(u)}if(W=u.memoizedState,W!==null&&(W=W.dehydrated,W!==null))return Ob(W)?u.lanes=32:u.lanes=536870912,null;Ui(u)}return W=m.children,m=m.fallback,y?(ri(),y=u.mode,W=be({mode:"hidden",children:W},y),m=Pl(m,y,d,null),W.return=u,m.return=u,W.sibling=m,u.child=W,y=u.child,y.memoizedState=gt(d),y.childLanes=bt(s,B,d),u.memoizedState=ht,m):(io(u),_t(u,W))}if(de=s.memoizedState,de!==null&&(W=de.dehydrated,W!==null)){if(x)u.flags&256?(io(u),u.flags&=-257,u=De(s,u,d)):u.memoizedState!==null?(ri(),u.child=s.child,u.flags|=128,u=null):(ri(),y=m.fallback,W=u.mode,m=be({mode:"visible",children:m.children},W),y=Pl(y,W,d,null),y.flags|=2,m.return=u,y.return=u,m.sibling=y,u.child=m,no(u,s.child,null,d),m=u.child,m.memoizedState=gt(d),m.childLanes=bt(s,B,d),u.memoizedState=ht,u=y);else if(io(u),Ob(W)){if(B=W.nextSibling&&W.nextSibling.dataset,B)var Le=B.dgst;B=Le,m=Error(n(419)),m.stack="",m.digest=B,qu({value:m,source:null,stack:null}),u=De(s,u,d)}else if(li||_f(s,u,d,!1),B=(d&s.childLanes)!==0,li||B){if(B=yr,B!==null&&(m=d&-d,m=(m&42)!==0?1:nf(m),m=(m&(B.suspendedLanes|d))!==0?0:m,m!==0&&m!==de.retryLane))throw de.retryLane=m,Ja(s,m),oo(B,s,m),f_;W.data==="$?"||fb(),u=De(s,u,d)}else W.data==="$?"?(u.flags|=192,u.child=s.child,u=null):(s=de.treeContext,wn=hs(W.nextSibling),Fi=u,Qr=!0,zs=null,ti=!1,s!==null&&(Xi[Ia++]=Pa,Xi[Ia++]=xo,Xi[Ia++]=aa,Pa=s.id,xo=s.overflow,aa=u),u=_t(u,m.children),u.flags|=4096);return u}return y?(ri(),y=m.fallback,W=u.mode,de=s.child,Le=de.sibling,m=ns(de,{mode:"hidden",children:m.children}),m.subtreeFlags=de.subtreeFlags&65011712,Le!==null?y=ns(Le,y):(y=Pl(y,W,d,null),y.flags|=2),y.return=u,m.return=u,m.sibling=y,u.child=m,m=y,y=u.child,W=s.child.memoizedState,W===null?W=gt(d):(de=W.cachePool,de!==null?(Le=si._currentValue,de=de.parent!==Le?{parent:Le,pool:Le}:de):de=Bm(),W={baseLanes:W.baseLanes|d,cachePool:de}),y.memoizedState=W,y.childLanes=bt(s,B,d),u.memoizedState=ht,m):(io(u),d=s.child,s=d.sibling,d=ns(d,{mode:"visible",children:m.children}),d.return=u,d.sibling=null,s!==null&&(B=u.deletions,B===null?(u.deletions=[s],u.flags|=16):B.push(s)),u.child=d,u.memoizedState=null,d)}function _t(s,u){return u=be({mode:"visible",children:u},s.mode),u.return=s,s.child=u}function be(s,u){return s=ia(22,s,null,u),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function De(s,u,d){return no(u,s.child,null,d),s=_t(u,u.pendingProps.children),s.flags|=2,u.memoizedState=null,s}function ct(s,u,d){s.lanes|=u;var m=s.alternate;m!==null&&(m.lanes|=u),Nm(s.return,u,d)}function Rt(s,u,d,m,y){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:y}:(x.isBackwards=u,x.rendering=null,x.renderingStartTime=0,x.last=m,x.tail=d,x.tailMode=y)}function Je(s,u,d){var m=u.pendingProps,y=m.revealOrder,x=m.tail;if(Ri(s,u,m.children,d),m=Pr.current,(m&2)!==0)m=m&1|2,u.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=u.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&ct(s,d,u);else if(s.tag===19)ct(s,d,u);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break e;for(;s.sibling===null;){if(s.return===null||s.return===u)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}switch(Pe(Pr,m),y){case"forwards":for(d=u.child,y=null;d!==null;)s=d.alternate,s!==null&&Ai(s)===null&&(y=d),d=d.sibling;d=y,d===null?(y=u.child,u.child=null):(y=d.sibling,d.sibling=null),Rt(u,!1,y,d,x);break;case"backwards":for(d=null,y=u.child,u.child=null;y!==null;){if(s=y.alternate,s!==null&&Ai(s)===null){u.child=y;break}s=y.sibling,y.sibling=d,d=y,y=s}Rt(u,!0,d,null,x);break;case"together":Rt(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ct(s,u,d){if(s!==null&&(u.dependencies=s.dependencies),sc|=u.lanes,(d&u.childLanes)===0)if(s!==null){if(_f(s,u,d,!1),(d&u.childLanes)===0)return null}else return null;if(s!==null&&u.child!==s.child)throw Error(n(153));if(u.child!==null){for(s=u.child,d=ns(s,s.pendingProps),u.child=d,d.return=u;s.sibling!==null;)s=s.sibling,d=d.sibling=ns(s,s.pendingProps),d.return=u;d.sibling=null}return u.child}function ft(s,u){return(s.lanes&u)!==0?!0:(s=s.dependencies,!!(s!==null&&ah(s)))}function Ot(s,u,d){switch(u.tag){case 3:Tt(u,u.stateNode.containerInfo),Xs(u,si,s.memoizedState.cache),Vs();break;case 27:case 5:Ee(u);break;case 4:Tt(u,u.stateNode.containerInfo);break;case 10:Xs(u,u.type,u.memoizedProps.value);break;case 13:var m=u.memoizedState;if(m!==null)return m.dehydrated!==null?(io(u),u.flags|=128,null):(d&u.child.childLanes)!==0?it(s,u,d):(io(u),s=Ct(s,u,d),s!==null?s.sibling:null);io(u);break;case 19:var y=(s.flags&128)!==0;if(m=(d&u.childLanes)!==0,m||(_f(s,u,d,!1),m=(d&u.childLanes)!==0),y){if(m)return Je(s,u,d);u.flags|=128}if(y=u.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Pe(Pr,Pr.current),m)break;return null;case 22:case 23:return u.lanes=0,Ce(s,u,d);case 24:Xs(u,si,s.memoizedState.cache)}return Ct(s,u,d)}function rt(s,u,d){if(s!==null)if(s.memoizedProps!==u.pendingProps)li=!0;else{if(!ft(s,d)&&(u.flags&128)===0)return li=!1,Ot(s,u,d);li=(s.flags&131072)!==0}else li=!1,Qr&&(u.flags&1048576)!==0&&Om(u,Jd,u.index);switch(u.lanes=0,u.tag){case 16:e:{s=u.pendingProps;var m=u.elementType,y=m._init;if(m=y(m._payload),u.type=m,typeof m=="function")Zd(m)?(s=Gl(m,s),u.tag=1,u=dt(null,u,m,s,d)):(u.tag=0,u=ke(null,u,m,s,d));else{if(m!=null){if(y=m.$$typeof,y===M){u.tag=11,u=O(null,u,m,s,d);break e}else if(y===N){u.tag=14,u=$(null,u,m,s,d);break e}}throw u=V(m)||m,Error(n(306,u,""))}}return u;case 0:return ke(s,u,u.type,u.pendingProps,d);case 1:return m=u.type,y=Gl(m,u.pendingProps),dt(s,u,m,y,d);case 3:e:{if(Tt(u,u.stateNode.containerInfo),s===null)throw Error(n(387));m=u.pendingProps;var x=u.memoizedState;y=x.element,qs(s,u),$u(u,m,null,d);var B=u.memoizedState;if(m=B.cache,Xs(u,si,m),m!==x.cache&&Mm(u,[si],d,!0),kl(),m=B.element,x.isDehydrated)if(x={element:m,isDehydrated:!1,cache:B.cache},u.updateQueue.baseState=x,u.memoizedState=x,u.flags&256){u=St(s,u,m,d);break e}else if(m!==y){y=_a(Error(n(424)),u),qu(y),u=St(s,u,m,d);break e}else{switch(s=u.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(wn=hs(s.firstChild),Fi=u,Qr=!0,zs=null,ti=!0,d=ds(u,null,m,d),u.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Vs(),m===y){u=Ct(s,u,d);break e}Ri(s,u,m,d)}u=u.child}return u;case 26:return Ne(s,u),s===null?(d=Ew(u.type,null,u.pendingProps,null))?u.memoizedState=d:Qr||(d=u.type,s=u.pendingProps,m=x_(Pt.current).createElement(d),m[Yn]=u,m[Di]=s,Gi(m,d,s),mn(m),u.stateNode=m):u.memoizedState=Ew(u.type,s.memoizedProps,u.pendingProps,s.memoizedState),null;case 27:return Ee(u),s===null&&Qr&&(m=u.stateNode=gw(u.type,u.pendingProps,Pt.current),Fi=u,ti=!0,y=wn,fc(u.type)?(wb=y,wn=hs(m.firstChild)):wn=y),Ri(s,u,u.pendingProps.children,d),Ne(s,u),s===null&&(u.flags|=4194304),u.child;case 5:return s===null&&Qr&&((y=m=wn)&&(m=hV(m,u.type,u.pendingProps,ti),m!==null?(u.stateNode=m,Fi=u,wn=hs(m.firstChild),ti=!1,y=!0):y=!1),y||Ll(u)),Ee(u),y=u.type,x=u.pendingProps,B=s!==null?s.memoizedProps:null,m=x.children,Ab(y,x)?m=null:B!==null&&Ab(y,B)&&(u.flags|=32),u.memoizedState!==null&&(y=dh(s,u,H0,null,null,d),lv._currentValue=y),Ne(s,u),Ri(s,u,m,d),u.child;case 6:return s===null&&Qr&&((s=d=wn)&&(d=pV(d,u.pendingProps,ti),d!==null?(u.stateNode=d,Fi=u,wn=null,s=!0):s=!1),s||Ll(u)),null;case 13:return it(s,u,d);case 4:return Tt(u,u.stateNode.containerInfo),m=u.pendingProps,s===null?u.child=no(u,null,m,d):Ri(s,u,m,d),u.child;case 11:return O(s,u,u.type,u.pendingProps,d);case 7:return Ri(s,u,u.pendingProps,d),u.child;case 8:return Ri(s,u,u.pendingProps.children,d),u.child;case 12:return Ri(s,u,u.pendingProps.children,d),u.child;case 10:return m=u.pendingProps,Xs(u,u.type,m.value),Ri(s,u,m.children,d),u.child;case 9:return y=u.type._context,m=u.pendingProps.children,Bl(u),y=Ti(y),m=m(y),u.flags|=1,Ri(s,u,m,d),u.child;case 14:return $(s,u,u.type,u.pendingProps,d);case 15:return ae(s,u,u.type,u.pendingProps,d);case 19:return Je(s,u,d);case 31:return m=u.pendingProps,d=u.mode,m={mode:m.mode,children:m.children},s===null?(d=be(m,d),d.ref=u.ref,u.child=d,d.return=u,u=d):(d=ns(s.child,m),d.ref=u.ref,u.child=d,d.return=u,u=d),u;case 22:return Ce(s,u,d);case 24:return Bl(u),m=Ti(si),s===null?(y=Lm(),y===null&&(y=yr,x=Pm(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=d),y=x),u.memoizedState={parent:m,cache:y},Um(u),Xs(u,si,y)):((s.lanes&d)!==0&&(qs(s,u),$u(u,null,null,d),kl()),y=s.memoizedState,x=u.memoizedState,y.parent!==m?(y={parent:m,cache:m},u.memoizedState=y,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=y),Xs(u,si,m)):(m=x.cache,Xs(u,si,m),m!==y.cache&&Mm(u,[si],d,!0))),Ri(s,u,u.pendingProps.children,d),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function yt(s){s.flags|=4}function Ht(s,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Aw(u)){if(u=Sa.current,u!==null&&((Hr&4194048)===Hr?La!==null:(Hr&62914560)!==Hr&&(Hr&536870912)===0||u!==La))throw Sf=Fm,k0;s.flags|=8192}}function rr(s,u){u!==null&&(s.flags|=4),s.flags&16384&&(u=s.tag!==22?Nd():536870912,s.lanes|=u,wh|=u)}function At(s,u){if(!Qr)switch(s.tailMode){case"hidden":u=s.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?u||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Ye(s){var u=s.alternate!==null&&s.alternate.child===s.child,d=0,m=0;if(u)for(var y=s.child;y!==null;)d|=y.lanes|y.childLanes,m|=y.subtreeFlags&65011712,m|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)d|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=m,s.childLanes=d,u}function Ke(s,u,d){var m=u.pendingProps;switch(th(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(u),null;case 1:return Ye(u),null;case 3:return d=u.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),is(si),je(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(eo(u)?yt(u):s===null||s.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,wm())),Ye(u),null;case 26:return d=u.memoizedState,s===null?(yt(u),d!==null?(Ye(u),Ht(u,d)):(Ye(u),u.flags&=-16777217)):d?d!==s.memoizedState?(yt(u),Ye(u),Ht(u,d)):(Ye(u),u.flags&=-16777217):(s.memoizedProps!==m&&yt(u),Ye(u),u.flags&=-16777217),null;case 27:st(u),d=Pt.current;var y=u.type;if(s!==null&&u.stateNode!=null)s.memoizedProps!==m&&yt(u);else{if(!m){if(u.stateNode===null)throw Error(n(166));return Ye(u),null}s=tt.current,eo(u)?So(u):(s=gw(y,m,d),u.stateNode=s,yt(u))}return Ye(u),null;case 5:if(st(u),d=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==m&&yt(u);else{if(!m){if(u.stateNode===null)throw Error(n(166));return Ye(u),null}if(s=tt.current,eo(u))So(u);else{switch(y=x_(Pt.current),s){case 1:s=y.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:s=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":s=y.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":s=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof m.is=="string"?y.createElement("select",{is:m.is}):y.createElement("select"),m.multiple?s.multiple=!0:m.size&&(s.size=m.size);break;default:s=typeof m.is=="string"?y.createElement(d,{is:m.is}):y.createElement(d)}}s[Yn]=u,s[Di]=m;e:for(y=u.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===u)break e;for(;y.sibling===null;){if(y.return===null||y.return===u)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}u.stateNode=s;e:switch(Gi(s,d,m),d){case"button":case"input":case"select":case"textarea":s=!!m.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&yt(u)}}return Ye(u),u.flags&=-16777217,null;case 6:if(s&&u.stateNode!=null)s.memoizedProps!==m&&yt(u);else{if(typeof m!="string"&&u.stateNode===null)throw Error(n(166));if(s=Pt.current,eo(u)){if(s=u.stateNode,d=u.memoizedProps,m=null,y=Fi,y!==null)switch(y.tag){case 27:case 5:m=y.memoizedProps}s[Yn]=u,s=!!(s.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||cw(s.nodeValue,d)),s||Ll(u)}else s=x_(s).createTextNode(m),s[Yn]=u,u.stateNode=s}return Ye(u),null;case 13:if(m=u.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=eo(u),m!==null&&m.dehydrated!==null){if(s===null){if(!y)throw Error(n(318));if(y=u.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[Yn]=u}else Vs(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ye(u),y=!1}else y=wm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return u.flags&256?(Ui(u),u):(Ui(u),null)}if(Ui(u),(u.flags&128)!==0)return u.lanes=d,u;if(d=m!==null,s=s!==null&&s.memoizedState!==null,d){m=u.child,y=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(y=m.alternate.memoizedState.cachePool.pool);var x=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(x=m.memoizedState.cachePool.pool),x!==y&&(m.flags|=2048)}return d!==s&&d&&(u.child.flags|=8192),rr(u,u.updateQueue),Ye(u),null;case 4:return je(),s===null&&Eb(u.stateNode.containerInfo),Ye(u),null;case 10:return is(u.type),Ye(u),null;case 19:if(ye(Pr),y=u.memoizedState,y===null)return Ye(u),null;if(m=(u.flags&128)!==0,x=y.rendering,x===null)if(m)At(y,!1);else{if(ni!==0||s!==null&&(s.flags&128)!==0)for(s=u.child;s!==null;){if(x=Ai(s),x!==null){for(u.flags|=128,At(y,!1),s=x.updateQueue,u.updateQueue=s,rr(u,s),u.subtreeFlags=0,s=d,d=u.child;d!==null;)L0(d,s),d=d.sibling;return Pe(Pr,Pr.current&1|2),u.child}s=s.sibling}y.tail!==null&&It()>d_&&(u.flags|=128,m=!0,At(y,!1),u.lanes=4194304)}else{if(!m)if(s=Ai(x),s!==null){if(u.flags|=128,m=!0,s=s.updateQueue,u.updateQueue=s,rr(u,s),At(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!Qr)return Ye(u),null}else 2*It()-y.renderingStartTime>d_&&d!==536870912&&(u.flags|=128,m=!0,At(y,!1),u.lanes=4194304);y.isBackwards?(x.sibling=u.child,u.child=x):(s=y.last,s!==null?s.sibling=x:u.child=x,y.last=x)}return y.tail!==null?(u=y.tail,y.rendering=u,y.tail=u.sibling,y.renderingStartTime=It(),u.sibling=null,s=Pr.current,Pe(Pr,m?s&1|2:s&1),u):(Ye(u),null);case 22:case 23:return Ui(u),fh(),m=u.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(u.flags|=8192):m&&(u.flags|=8192),m?(d&536870912)!==0&&(u.flags&128)===0&&(Ye(u),u.subtreeFlags&6&&(u.flags|=8192)):Ye(u),d=u.updateQueue,d!==null&&rr(u,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==d&&(u.flags|=2048),s!==null&&ye(Da),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),u.memoizedState.cache!==d&&(u.flags|=2048),is(si),Ye(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function ar(s,u){switch(th(u),u.tag){case 1:return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 3:return is(si),je(),s=u.flags,(s&65536)!==0&&(s&128)===0?(u.flags=s&-65537|128,u):null;case 26:case 27:case 5:return st(u),null;case 13:if(Ui(u),s=u.memoizedState,s!==null&&s.dehydrated!==null){if(u.alternate===null)throw Error(n(340));Vs()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 19:return ye(Pr),null;case 4:return je(),null;case 10:return is(u.type),null;case 22:case 23:return Ui(u),fh(),s!==null&&ye(Da),s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 24:return is(si),null;case 25:return null;default:return null}}function Ar(s,u){switch(th(u),u.tag){case 3:is(si),je();break;case 26:case 27:case 5:st(u);break;case 4:je();break;case 13:Ui(u);break;case 19:ye(Pr);break;case 10:is(u.type);break;case 22:case 23:Ui(u),fh(),s!==null&&ye(Da);break;case 24:is(si)}}function Bt(s,u){try{var d=u.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var y=m.next;d=y;do{if((d.tag&s)===s){m=void 0;var x=d.create,B=d.inst;m=x(),B.destroy=m}d=d.next}while(d!==y)}}catch(W){En(u,u.return,W)}}function ur(s,u,d){try{var m=u.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var x=y.next;m=x;do{if((m.tag&s)===s){var B=m.inst,W=B.destroy;if(W!==void 0){B.destroy=void 0,y=u;var de=d,Le=W;try{Le()}catch(at){En(y,de,at)}}}m=m.next}while(m!==x)}}catch(at){En(u,u.return,at)}}function or(s){var u=s.updateQueue;if(u!==null){var d=s.stateNode;try{jm(u,d)}catch(m){En(s,s.return,m)}}}function mr(s,u,d){d.props=Gl(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(m){En(s,u,m)}}function Rr(s,u){try{var d=s.ref;if(d!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof d=="function"?s.refCleanup=d(m):d.current=m}}catch(y){En(s,u,y)}}function tn(s,u){var d=s.ref,m=s.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(y){En(s,u,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(y){En(s,u,y)}else d.current=null}function Jn(s){var u=s.type,d=s.memoizedProps,m=s.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(y){En(s,s.return,y)}}function br(s,u,d){try{var m=s.stateNode;lV(m,s.type,d,u),m[Di]=u}catch(y){En(s,s.return,y)}}function Xn(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&fc(s.type)||s.tag===4}function nn(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Xn(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&fc(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function An(s,u,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,u?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(s,u):(u=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,u.appendChild(s),d=d._reactRootContainer,d!=null||u.onclick!==null||(u.onclick=b_));else if(m!==4&&(m===27&&fc(s.type)&&(d=s.stateNode,u=null),s=s.child,s!==null))for(An(s,u,d),s=s.sibling;s!==null;)An(s,u,d),s=s.sibling}function Rn(s,u,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,u?d.insertBefore(s,u):d.appendChild(s);else if(m!==4&&(m===27&&fc(s.type)&&(d=s.stateNode),s=s.child,s!==null))for(Rn(s,u,d),s=s.sibling;s!==null;)Rn(s,u,d),s=s.sibling}function qn(s){var u=s.stateNode,d=s.memoizedProps;try{for(var m=s.type,y=u.attributes;y.length;)u.removeAttributeNode(y[0]);Gi(u,m,d),u[Yn]=s,u[Di]=d}catch(x){En(s,s.return,x)}}var dn=!1,jr=!1,Nn=!1,pr=typeof WeakSet=="function"?WeakSet:Set,Wr=null;function zr(s,u){if(s=s.containerInfo,Sb=O_,s=O0(s),Tm(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var y=m.anchorOffset,x=m.focusNode;m=m.focusOffset;try{d.nodeType,x.nodeType}catch{d=null;break e}var B=0,W=-1,de=-1,Le=0,at=0,mt=s,ze=null;t:for(;;){for(var He;mt!==d||y!==0&&mt.nodeType!==3||(W=B+y),mt!==x||m!==0&&mt.nodeType!==3||(de=B+m),mt.nodeType===3&&(B+=mt.nodeValue.length),(He=mt.firstChild)!==null;)ze=mt,mt=He;for(;;){if(mt===s)break t;if(ze===d&&++Le===y&&(W=B),ze===x&&++at===m&&(de=B),(He=mt.nextSibling)!==null)break;mt=ze,ze=mt.parentNode}mt=He}d=W===-1||de===-1?null:{start:W,end:de}}else d=null}d=d||{start:0,end:0}}else d=null;for(Tb={focusedElem:s,selectionRange:d},O_=!1,Wr=u;Wr!==null;)if(u=Wr,s=u.child,(u.subtreeFlags&1024)!==0&&s!==null)s.return=u,Wr=s;else for(;Wr!==null;){switch(u=Wr,x=u.alternate,s=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&x!==null){s=void 0,d=u,y=x.memoizedProps,x=x.memoizedState,m=d.stateNode;try{var Sr=Gl(d.type,y,d.elementType===d.type);s=m.getSnapshotBeforeUpdate(Sr,x),m.__reactInternalSnapshotBeforeUpdate=s}catch(vr){En(d,d.return,vr)}}break;case 3:if((s&1024)!==0){if(s=u.stateNode.containerInfo,d=s.nodeType,d===9)Cb(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Cb(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=u.sibling,s!==null){s.return=u.return,Wr=s;break}Wr=u.return}}function Yt(s,u,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:Se(s,d),m&4&&Bt(5,d);break;case 1:if(Se(s,d),m&4)if(s=d.stateNode,u===null)try{s.componentDidMount()}catch(B){En(d,d.return,B)}else{var y=Gl(d.type,u.memoizedProps);u=u.memoizedState;try{s.componentDidUpdate(y,u,s.__reactInternalSnapshotBeforeUpdate)}catch(B){En(d,d.return,B)}}m&64&&or(d),m&512&&Rr(d,d.return);break;case 3:if(Se(s,d),m&64&&(s=d.updateQueue,s!==null)){if(u=null,d.child!==null)switch(d.child.tag){case 27:case 5:u=d.child.stateNode;break;case 1:u=d.child.stateNode}try{jm(s,u)}catch(B){En(d,d.return,B)}}break;case 27:u===null&&m&4&&qn(d);case 26:case 5:Se(s,d),u===null&&m&4&&Jn(d),m&512&&Rr(d,d.return);break;case 12:Se(s,d);break;case 13:Se(s,d),m&4&&Me(s,d),m&64&&(s=d.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(d=Kz.bind(null,d),mV(s,d))));break;case 22:if(m=d.memoizedState!==null||dn,!m){u=u!==null&&u.memoizedState!==null||jr,y=dn;var x=jr;dn=m,(jr=u)&&!x?se(s,d,(d.subtreeFlags&8772)!==0):Se(s,d),dn=y,jr=x}break;case 30:break;default:Se(s,d)}}function xr(s){var u=s.alternate;u!==null&&(s.alternate=null,xr(u)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(u=s.stateNode,u!==null&&xu(u)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Zt=null,Vr=!1;function hi(s,u,d){for(d=d.child;d!==null;)te(s,u,d),d=d.sibling}function te(s,u,d){if(lr&&typeof lr.onCommitFiberUnmount=="function")try{lr.onCommitFiberUnmount(Ut,d)}catch{}switch(d.tag){case 26:jr||tn(d,u),hi(s,u,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:jr||tn(d,u);var m=Zt,y=Vr;fc(d.type)&&(Zt=d.stateNode,Vr=!1),hi(s,u,d),iv(d.stateNode),Zt=m,Vr=y;break;case 5:jr||tn(d,u);case 6:if(m=Zt,y=Vr,Zt=null,hi(s,u,d),Zt=m,Vr=y,Zt!==null)if(Vr)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(d.stateNode)}catch(x){En(d,u,x)}else try{Zt.removeChild(d.stateNode)}catch(x){En(d,u,x)}break;case 18:Zt!==null&&(Vr?(s=Zt,mw(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,d.stateNode),dv(s)):mw(Zt,d.stateNode));break;case 4:m=Zt,y=Vr,Zt=d.stateNode.containerInfo,Vr=!0,hi(s,u,d),Zt=m,Vr=y;break;case 0:case 11:case 14:case 15:jr||ur(2,d,u),jr||ur(4,d,u),hi(s,u,d);break;case 1:jr||(tn(d,u),m=d.stateNode,typeof m.componentWillUnmount=="function"&&mr(d,u,m)),hi(s,u,d);break;case 21:hi(s,u,d);break;case 22:jr=(m=jr)||d.memoizedState!==null,hi(s,u,d),jr=m;break;default:hi(s,u,d)}}function Me(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{dv(s)}catch(d){En(u,u.return,d)}}function Re(s){switch(s.tag){case 13:case 19:var u=s.stateNode;return u===null&&(u=s.stateNode=new pr),u;case 22:return s=s.stateNode,u=s._retryCache,u===null&&(u=s._retryCache=new pr),u;default:throw Error(n(435,s.tag))}}function Nt(s,u){var d=Re(s);u.forEach(function(m){var y=Qz.bind(null,s,m);d.has(m)||(d.add(m),m.then(y,y))})}function nr(s,u){var d=u.deletions;if(d!==null)for(var m=0;m<d.length;m++){var y=d[m],x=s,B=u,W=B;e:for(;W!==null;){switch(W.tag){case 27:if(fc(W.type)){Zt=W.stateNode,Vr=!1;break e}break;case 5:Zt=W.stateNode,Vr=!1;break e;case 3:case 4:Zt=W.stateNode.containerInfo,Vr=!0;break e}W=W.return}if(Zt===null)throw Error(n(160));te(x,B,y),Zt=null,Vr=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)q(u,s),u=u.sibling}var Dr=null;function q(s,u){var d=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:nr(u,s),Y(s),m&4&&(ur(3,s,s.return),Bt(3,s),ur(5,s,s.return));break;case 1:nr(u,s),Y(s),m&512&&(jr||d===null||tn(d,d.return)),m&64&&dn&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var y=Dr;if(nr(u,s),Y(s),m&512&&(jr||d===null||tn(d,d.return)),m&4){var x=d!==null?d.memoizedState:null;if(m=s.memoizedState,d===null)if(m===null)if(s.stateNode===null){e:{m=s.type,d=s.memoizedProps,y=y.ownerDocument||y;t:switch(m){case"title":x=y.getElementsByTagName("title")[0],(!x||x[El]||x[Yn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(m),y.head.insertBefore(x,y.querySelector("head > title"))),Gi(x,m,d),x[Yn]=s,mn(x),m=x;break e;case"link":var B=Sw("link","href",y).get(m+(d.href||""));if(B){for(var W=0;W<B.length;W++)if(x=B[W],x.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&x.getAttribute("rel")===(d.rel==null?null:d.rel)&&x.getAttribute("title")===(d.title==null?null:d.title)&&x.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){B.splice(W,1);break t}}x=y.createElement(m),Gi(x,m,d),y.head.appendChild(x);break;case"meta":if(B=Sw("meta","content",y).get(m+(d.content||""))){for(W=0;W<B.length;W++)if(x=B[W],x.getAttribute("content")===(d.content==null?null:""+d.content)&&x.getAttribute("name")===(d.name==null?null:d.name)&&x.getAttribute("property")===(d.property==null?null:d.property)&&x.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&x.getAttribute("charset")===(d.charSet==null?null:d.charSet)){B.splice(W,1);break t}}x=y.createElement(m),Gi(x,m,d),y.head.appendChild(x);break;default:throw Error(n(468,m))}x[Yn]=s,mn(x),m=x}s.stateNode=m}else Tw(y,s.type,s.stateNode);else s.stateNode=xw(y,m,s.memoizedProps);else x!==m?(x===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):x.count--,m===null?Tw(y,s.type,s.stateNode):xw(y,m,s.memoizedProps)):m===null&&s.stateNode!==null&&br(s,s.memoizedProps,d.memoizedProps)}break;case 27:nr(u,s),Y(s),m&512&&(jr||d===null||tn(d,d.return)),d!==null&&m&4&&br(s,s.memoizedProps,d.memoizedProps);break;case 5:if(nr(u,s),Y(s),m&512&&(jr||d===null||tn(d,d.return)),s.flags&32){y=s.stateNode;try{K(y,"")}catch(He){En(s,s.return,He)}}m&4&&s.stateNode!=null&&(y=s.memoizedProps,br(s,y,d!==null?d.memoizedProps:y)),m&1024&&(Nn=!0);break;case 6:if(nr(u,s),Y(s),m&4){if(s.stateNode===null)throw Error(n(162));m=s.memoizedProps,d=s.stateNode;try{d.nodeValue=m}catch(He){En(s,s.return,He)}}break;case 3:if(A_=null,y=Dr,Dr=S_(u.containerInfo),nr(u,s),Dr=y,Y(s),m&4&&d!==null&&d.memoizedState.isDehydrated)try{dv(u.containerInfo)}catch(He){En(s,s.return,He)}Nn&&(Nn=!1,ie(s));break;case 4:m=Dr,Dr=S_(s.stateNode.containerInfo),nr(u,s),Y(s),Dr=m;break;case 12:nr(u,s),Y(s);break;case 13:nr(u,s),Y(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(ob=It()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Nt(s,m)));break;case 22:y=s.memoizedState!==null;var de=d!==null&&d.memoizedState!==null,Le=dn,at=jr;if(dn=Le||y,jr=at||de,nr(u,s),jr=at,dn=Le,Y(s),m&8192)e:for(u=s.stateNode,u._visibility=y?u._visibility&-2:u._visibility|1,y&&(d===null||de||dn||jr||Te(s)),d=null,u=s;;){if(u.tag===5||u.tag===26){if(d===null){de=d=u;try{if(x=de.stateNode,y)B=x.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{W=de.stateNode;var mt=de.memoizedProps.style,ze=mt!=null&&mt.hasOwnProperty("display")?mt.display:null;W.style.display=ze==null||typeof ze=="boolean"?"":(""+ze).trim()}}catch(He){En(de,de.return,He)}}}else if(u.tag===6){if(d===null){de=u;try{de.stateNode.nodeValue=y?"":de.memoizedProps}catch(He){En(de,de.return,He)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===s)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break e;for(;u.sibling===null;){if(u.return===null||u.return===s)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}m&4&&(m=s.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,Nt(s,d))));break;case 19:nr(u,s),Y(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Nt(s,m)));break;case 30:break;case 21:break;default:nr(u,s),Y(s)}}function Y(s){var u=s.flags;if(u&2){try{for(var d,m=s.return;m!==null;){if(Xn(m)){d=m;break}m=m.return}if(d==null)throw Error(n(160));switch(d.tag){case 27:var y=d.stateNode,x=nn(s);Rn(s,x,y);break;case 5:var B=d.stateNode;d.flags&32&&(K(B,""),d.flags&=-33);var W=nn(s);Rn(s,W,B);break;case 3:case 4:var de=d.stateNode.containerInfo,Le=nn(s);An(s,Le,de);break;default:throw Error(n(161))}}catch(at){En(s,s.return,at)}s.flags&=-3}u&4096&&(s.flags&=-4097)}function ie(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var u=s;ie(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),s=s.sibling}}function Se(s,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Yt(s,u.alternate,u),u=u.sibling}function Te(s){for(s=s.child;s!==null;){var u=s;switch(u.tag){case 0:case 11:case 14:case 15:ur(4,u,u.return),Te(u);break;case 1:tn(u,u.return);var d=u.stateNode;typeof d.componentWillUnmount=="function"&&mr(u,u.return,d),Te(u);break;case 27:iv(u.stateNode);case 26:case 5:tn(u,u.return),Te(u);break;case 22:u.memoizedState===null&&Te(u);break;case 30:Te(u);break;default:Te(u)}s=s.sibling}}function se(s,u,d){for(d=d&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var m=u.alternate,y=s,x=u,B=x.flags;switch(x.tag){case 0:case 11:case 15:se(y,x,d),Bt(4,x);break;case 1:if(se(y,x,d),m=x,y=m.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Le){En(m,m.return,Le)}if(m=x,y=m.updateQueue,y!==null){var W=m.stateNode;try{var de=y.shared.hiddenCallbacks;if(de!==null)for(y.shared.hiddenCallbacks=null,y=0;y<de.length;y++)km(de[y],W)}catch(Le){En(m,m.return,Le)}}d&&B&64&&or(x),Rr(x,x.return);break;case 27:qn(x);case 26:case 5:se(y,x,d),d&&m===null&&B&4&&Jn(x),Rr(x,x.return);break;case 12:se(y,x,d);break;case 13:se(y,x,d),d&&B&4&&Me(y,x);break;case 22:x.memoizedState===null&&se(y,x,d),Rr(x,x.return);break;case 30:break;default:se(y,x,d)}u=u.sibling}}function he(s,u){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(s=u.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&Ef(d))}function me(s,u){s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&Ef(s))}function J(s,u,d,m){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)ce(s,u,d,m),u=u.sibling}function ce(s,u,d,m){var y=u.flags;switch(u.tag){case 0:case 11:case 15:J(s,u,d,m),y&2048&&Bt(9,u);break;case 1:J(s,u,d,m);break;case 3:J(s,u,d,m),y&2048&&(s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&Ef(s)));break;case 12:if(y&2048){J(s,u,d,m),s=u.stateNode;try{var x=u.memoizedProps,B=x.id,W=x.onPostCommit;typeof W=="function"&&W(B,u.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(de){En(u,u.return,de)}}else J(s,u,d,m);break;case 13:J(s,u,d,m);break;case 23:break;case 22:x=u.stateNode,B=u.alternate,u.memoizedState!==null?x._visibility&2?J(s,u,d,m):fe(s,u):x._visibility&2?J(s,u,d,m):(x._visibility|=2,Z(s,u,d,m,(u.subtreeFlags&10256)!==0)),y&2048&&he(B,u);break;case 24:J(s,u,d,m),y&2048&&me(u.alternate,u);break;default:J(s,u,d,m)}}function Z(s,u,d,m,y){for(y=y&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var x=s,B=u,W=d,de=m,Le=B.flags;switch(B.tag){case 0:case 11:case 15:Z(x,B,W,de,y),Bt(8,B);break;case 23:break;case 22:var at=B.stateNode;B.memoizedState!==null?at._visibility&2?Z(x,B,W,de,y):fe(x,B):(at._visibility|=2,Z(x,B,W,de,y)),y&&Le&2048&&he(B.alternate,B);break;case 24:Z(x,B,W,de,y),y&&Le&2048&&me(B.alternate,B);break;default:Z(x,B,W,de,y)}u=u.sibling}}function fe(s,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var d=s,m=u,y=m.flags;switch(m.tag){case 22:fe(d,m),y&2048&&he(m.alternate,m);break;case 24:fe(d,m),y&2048&&me(m.alternate,m);break;default:fe(d,m)}u=u.sibling}}var we=8192;function Fe(s){if(s.subtreeFlags&we)for(s=s.child;s!==null;)nt(s),s=s.sibling}function nt(s){switch(s.tag){case 26:Fe(s),s.flags&we&&s.memoizedState!==null&&OV(Dr,s.memoizedState,s.memoizedProps);break;case 5:Fe(s);break;case 3:case 4:var u=Dr;Dr=S_(s.stateNode.containerInfo),Fe(s),Dr=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=we,we=16777216,Fe(s),we=u):Fe(s));break;default:Fe(s)}}function Ze(s){var u=s.alternate;if(u!==null&&(s=u.child,s!==null)){u.child=null;do u=s.sibling,s.sibling=null,s=u;while(s!==null)}}function ot(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var m=u[d];Wr=m,Lt(m,s)}Ze(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)jt(s),s=s.sibling}function jt(s){switch(s.tag){case 0:case 11:case 15:ot(s),s.flags&2048&&ur(9,s,s.return);break;case 3:ot(s);break;case 12:ot(s);break;case 22:var u=s.stateNode;s.memoizedState!==null&&u._visibility&2&&(s.return===null||s.return.tag!==13)?(u._visibility&=-3,cr(s)):ot(s);break;default:ot(s)}}function cr(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var m=u[d];Wr=m,Lt(m,s)}Ze(s)}for(s=s.child;s!==null;){switch(u=s,u.tag){case 0:case 11:case 15:ur(8,u,u.return),cr(u);break;case 22:d=u.stateNode,d._visibility&2&&(d._visibility&=-3,cr(u));break;default:cr(u)}s=s.sibling}}function Lt(s,u){for(;Wr!==null;){var d=Wr;switch(d.tag){case 0:case 11:case 15:ur(8,d,u);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Ef(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,Wr=m;else e:for(d=s;Wr!==null;){m=Wr;var y=m.sibling,x=m.return;if(xr(m),m===d){Wr=null;break e}if(y!==null){y.return=x,Wr=y;break e}Wr=x}}}var Kt={getCacheForType:function(s){var u=Ti(si),d=u.data.get(s);return d===void 0&&(d=s(),u.data.set(s,d)),d}},fr=typeof WeakMap=="function"?WeakMap:Map,Gt=0,yr=null,Er=null,Hr=0,Lr=0,oa=null,ki=!1,Wl=!1,nb=!1,$l=0,ni=0,sc=0,Vf=0,ib=0,Co=0,wh=0,Jm=null,Ba=null,ab=!1,ob=0,d_=1/0,h_=null,lc=null,qi=0,uc=null,Nh=null,Mh=0,sb=0,lb=null,BO=null,ev=0,ub=null;function ao(){if((Gt&2)!==0&&Hr!==0)return Hr&-Hr;if(w.T!==null){var s=Fl;return s!==0?s:vb()}return Id()}function FO(){Co===0&&(Co=(Hr&536870912)===0||Qr?wd():536870912);var s=Sa.current;return s!==null&&(s.flags|=32),Co}function oo(s,u,d){(s===yr&&(Lr===2||Lr===9)||s.cancelPendingCommit!==null)&&(Ih(s,0),cc(s,Hr,Co,!1)),Wo(s,d),((Gt&2)===0||s!==yr)&&(s===yr&&((Gt&2)===0&&(Vf|=d),ni===4&&cc(s,Hr,Co,!1)),Js(s))}function UO(s,u,d){if((Gt&6)!==0)throw Error(n(327));var m=!d&&(u&124)===0&&(u&s.expiredLanes)===0||Ka(s,u),y=m?$z(s,u):db(s,u,!0),x=m;do{if(y===0){Wl&&!m&&cc(s,u,0,!1);break}else{if(d=s.current.alternate,x&&!Gz(d)){y=db(s,u,!1),x=!1;continue}if(y===2){if(x=u,s.errorRecoveryDisabledLanes&x)var B=0;else B=s.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){u=B;e:{var W=s;y=Jm;var de=W.current.memoizedState.isDehydrated;if(de&&(Ih(W,B).flags|=256),B=db(W,B,!1),B!==2){if(nb&&!de){W.errorRecoveryDisabledLanes|=x,Vf|=x,y=4;break e}x=Ba,Ba=y,x!==null&&(Ba===null?Ba=x:Ba.push.apply(Ba,x))}y=B}if(x=!1,y!==2)continue}}if(y===1){Ih(s,0),cc(s,u,0,!0);break}e:{switch(m=s,x=y,x){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:cc(m,u,Co,!ki);break e;case 2:Ba=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(y=ob+300-It(),10<y)){if(cc(m,u,Co,!ki),pa(m,0,!0)!==0)break e;m.timeoutHandle=hw(kO.bind(null,m,d,Ba,h_,ab,u,Co,Vf,wh,ki,x,2,-0,0),y);break e}kO(m,d,Ba,h_,ab,u,Co,Vf,wh,ki,x,0,-0,0)}}break}while(!0);Js(s)}function kO(s,u,d,m,y,x,B,W,de,Le,at,mt,ze,He){if(s.timeoutHandle=-1,mt=u.subtreeFlags,(mt&8192||(mt&16785408)===16785408)&&(sv={stylesheets:null,count:0,unsuspend:CV},nt(u),mt=wV(),mt!==null)){s.cancelPendingCommit=mt(GO.bind(null,s,u,x,d,m,y,B,W,de,at,1,ze,He)),cc(s,x,B,!Le);return}GO(s,u,x,d,m,y,B,W,de)}function Gz(s){for(var u=s;;){var d=u.tag;if((d===0||d===11||d===15)&&u.flags&16384&&(d=u.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var y=d[m],x=y.getSnapshot;y=y.value;try{if(!Si(x(),y))return!1}catch{return!1}}if(d=u.child,u.subtreeFlags&16384&&d!==null)d.return=u,u=d;else{if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function cc(s,u,d,m){u&=~ib,u&=~Vf,s.suspendedLanes|=u,s.pingedLanes&=~u,m&&(s.warmLanes|=u),m=s.expirationTimes;for(var y=u;0<y;){var x=31-hr(y),B=1<<x;m[x]=-1,y&=~B}d!==0&&Md(s,d,u)}function p_(){return(Gt&6)===0?(tv(0),!1):!0}function cb(){if(Er!==null){if(Lr===0)var s=Er.return;else s=Er,To=Hs=null,Of(s),ql=null,ac=0,s=Er;for(;s!==null;)Ar(s.alternate,s),s=s.return;Er=null}}function Ih(s,u){var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,cV(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),cb(),yr=s,Er=d=ns(s.current,null),Hr=u,Lr=0,oa=null,ki=!1,Wl=Ka(s,u),nb=!1,wh=Co=ib=Vf=sc=ni=0,Ba=Jm=null,ab=!1,(u&8)!==0&&(u|=u&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=u;0<m;){var y=31-hr(m),x=1<<y;u|=s[y],m&=~x}return $l=u,hf(),d}function jO(s,u){Mr=null,w.H=Sh,u===Ul||u===xf?(u=Wu(),Lr=3):u===k0?(u=Wu(),Lr=4):Lr=u===f_?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,oa=u,Er===null&&(ni=1,Ch(s,_a(u,s.current)))}function zO(){var s=w.H;return w.H=Sh,s===null?Sh:s}function VO(){var s=w.A;return w.A=Kt,s}function fb(){ni=4,ki||(Hr&4194048)!==Hr&&Sa.current!==null||(Wl=!0),(sc&134217727)===0&&(Vf&134217727)===0||yr===null||cc(yr,Hr,Co,!1)}function db(s,u,d){var m=Gt;Gt|=2;var y=zO(),x=VO();(yr!==s||Hr!==u)&&(h_=null,Ih(s,u)),u=!1;var B=ni;e:do try{if(Lr!==0&&Er!==null){var W=Er,de=oa;switch(Lr){case 8:cb(),B=6;break e;case 3:case 2:case 9:case 6:Sa.current===null&&(u=!0);var Le=Lr;if(Lr=0,oa=null,Ph(s,W,de,Le),d&&Wl){B=0;break e}break;default:Le=Lr,Lr=0,oa=null,Ph(s,W,de,Le)}}Wz(),B=ni;break}catch(at){jO(s,at)}while(!0);return u&&s.shellSuspendCounter++,To=Hs=null,Gt=m,w.H=y,w.A=x,Er===null&&(yr=null,Hr=0,hf()),B}function Wz(){for(;Er!==null;)HO(Er)}function $z(s,u){var d=Gt;Gt|=2;var m=zO(),y=VO();yr!==s||Hr!==u?(h_=null,d_=It()+500,Ih(s,u)):Wl=Ka(s,u);e:do try{if(Lr!==0&&Er!==null){u=Er;var x=oa;t:switch(Lr){case 1:Lr=0,oa=null,Ph(s,u,x,1);break;case 2:case 9:if(j0(x)){Lr=0,oa=null,XO(u);break}u=function(){Lr!==2&&Lr!==9||yr!==s||(Lr=7),Js(s)},x.then(u,u);break e;case 3:Lr=7;break e;case 4:Lr=5;break e;case 7:j0(x)?(Lr=0,oa=null,XO(u)):(Lr=0,oa=null,Ph(s,u,x,7));break;case 5:var B=null;switch(Er.tag){case 26:B=Er.memoizedState;case 5:case 27:var W=Er;if(!B||Aw(B)){Lr=0,oa=null;var de=W.sibling;if(de!==null)Er=de;else{var Le=W.return;Le!==null?(Er=Le,m_(Le)):Er=null}break t}}Lr=0,oa=null,Ph(s,u,x,5);break;case 6:Lr=0,oa=null,Ph(s,u,x,6);break;case 8:cb(),ni=6;break e;default:throw Error(n(462))}}Yz();break}catch(at){jO(s,at)}while(!0);return To=Hs=null,w.H=m,w.A=y,Gt=d,Er!==null?0:(yr=null,Hr=0,hf(),ni)}function Yz(){for(;Er!==null&&!xt();)HO(Er)}function HO(s){var u=rt(s.alternate,s,$l);s.memoizedProps=s.pendingProps,u===null?m_(s):Er=u}function XO(s){var u=s,d=u.alternate;switch(u.tag){case 15:case 0:u=ut(d,u,u.pendingProps,u.type,void 0,Hr);break;case 11:u=ut(d,u,u.pendingProps,u.type.render,u.ref,Hr);break;case 5:Of(u);default:Ar(d,u),u=Er=L0(u,$l),u=rt(d,u,$l)}s.memoizedProps=s.pendingProps,u===null?m_(s):Er=u}function Ph(s,u,d,m){To=Hs=null,Of(u),ql=null,ac=0;var y=u.return;try{if(rb(s,y,u,d,Hr)){ni=1,Ch(s,_a(d,s.current)),Er=null;return}}catch(x){if(y!==null)throw Er=y,x;ni=1,Ch(s,_a(d,s.current)),Er=null;return}u.flags&32768?(Qr||m===1?s=!0:Wl||(Hr&536870912)!==0?s=!1:(ki=s=!0,(m===2||m===9||m===3||m===6)&&(m=Sa.current,m!==null&&m.tag===13&&(m.flags|=16384))),qO(u,s)):m_(u)}function m_(s){var u=s;do{if((u.flags&32768)!==0){qO(u,ki);return}s=u.return;var d=Ke(u.alternate,u,$l);if(d!==null){Er=d;return}if(u=u.sibling,u!==null){Er=u;return}Er=u=s}while(u!==null);ni===0&&(ni=5)}function qO(s,u){do{var d=ar(s.alternate,s);if(d!==null){d.flags&=32767,Er=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!u&&(s=s.sibling,s!==null)){Er=s;return}Er=s=d}while(s!==null);ni=6,Er=null}function GO(s,u,d,m,y,x,B,W,de){s.cancelPendingCommit=null;do v_();while(qi!==0);if((Gt&6)!==0)throw Error(n(327));if(u!==null){if(u===s.current)throw Error(n(177));if(x=u.lanes|u.childLanes,x|=Yd,rf(s,d,x,B,W,de),s===yr&&(Er=yr=null,Hr=0),Nh=u,uc=s,Mh=d,sb=x,lb=y,BO=m,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Jz(xe,function(){return KO(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||m){m=w.T,w.T=null,y=z.p,z.p=2,B=Gt,Gt|=4;try{zr(s,u,d)}finally{Gt=B,z.p=y,w.T=m}}qi=1,WO(),$O(),YO()}}function WO(){if(qi===1){qi=0;var s=uc,u=Nh,d=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||d){d=w.T,w.T=null;var m=z.p;z.p=2;var y=Gt;Gt|=4;try{q(u,s);var x=Tb,B=O0(s.containerInfo),W=x.focusedElem,de=x.selectionRange;if(B!==W&&W&&W.ownerDocument&&Wd(W.ownerDocument.documentElement,W)){if(de!==null&&Tm(W)){var Le=de.start,at=de.end;if(at===void 0&&(at=Le),"selectionStart"in W)W.selectionStart=Le,W.selectionEnd=Math.min(at,W.value.length);else{var mt=W.ownerDocument||document,ze=mt&&mt.defaultView||window;if(ze.getSelection){var He=ze.getSelection(),Sr=W.textContent.length,vr=Math.min(de.start,Sr),gn=de.end===void 0?vr:Math.min(de.end,Sr);!He.extend&&vr>gn&&(B=gn,gn=vr,vr=B);var Ae=C0(W,vr),_e=C0(W,gn);if(Ae&&_e&&(He.rangeCount!==1||He.anchorNode!==Ae.node||He.anchorOffset!==Ae.offset||He.focusNode!==_e.node||He.focusOffset!==_e.offset)){var Ie=mt.createRange();Ie.setStart(Ae.node,Ae.offset),He.removeAllRanges(),vr>gn?(He.addRange(Ie),He.extend(_e.node,_e.offset)):(Ie.setEnd(_e.node,_e.offset),He.addRange(Ie))}}}}for(mt=[],He=W;He=He.parentNode;)He.nodeType===1&&mt.push({element:He,left:He.scrollLeft,top:He.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<mt.length;W++){var lt=mt[W];lt.element.scrollLeft=lt.left,lt.element.scrollTop=lt.top}}O_=!!Sb,Tb=Sb=null}finally{Gt=y,z.p=m,w.T=d}}s.current=u,qi=2}}function $O(){if(qi===2){qi=0;var s=uc,u=Nh,d=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||d){d=w.T,w.T=null;var m=z.p;z.p=2;var y=Gt;Gt|=4;try{Yt(s,u.alternate,u)}finally{Gt=y,z.p=m,w.T=d}}qi=3}}function YO(){if(qi===4||qi===3){qi=0,Dt();var s=uc,u=Nh,d=Mh,m=BO;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?qi=5:(qi=0,Nh=uc=null,ZO(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(lc=null),Eu(d),u=u.stateNode,lr&&typeof lr.onCommitFiberRoot=="function")try{lr.onCommitFiberRoot(Ut,u,void 0,(u.current.flags&128)===128)}catch{}if(m!==null){u=w.T,y=z.p,z.p=2,w.T=null;try{for(var x=s.onRecoverableError,B=0;B<m.length;B++){var W=m[B];x(W.value,{componentStack:W.stack})}}finally{w.T=u,z.p=y}}(Mh&3)!==0&&v_(),Js(s),y=s.pendingLanes,(d&4194090)!==0&&(y&42)!==0?s===ub?ev++:(ev=0,ub=s):ev=0,tv(0)}}function ZO(s,u){(s.pooledCacheLanes&=u)===0&&(u=s.pooledCache,u!=null&&(s.pooledCache=null,Ef(u)))}function v_(s){return WO(),$O(),YO(),KO()}function KO(){if(qi!==5)return!1;var s=uc,u=sb;sb=0;var d=Eu(Mh),m=w.T,y=z.p;try{z.p=32>d?32:d,w.T=null,d=lb,lb=null;var x=uc,B=Mh;if(qi=0,Nh=uc=null,Mh=0,(Gt&6)!==0)throw Error(n(331));var W=Gt;if(Gt|=4,jt(x.current),ce(x,x.current,B,d),Gt=W,tv(0,!1),lr&&typeof lr.onPostCommitFiberRoot=="function")try{lr.onPostCommitFiberRoot(Ut,x)}catch{}return!0}finally{z.p=y,w.T=m,ZO(s,u)}}function QO(s,u,d){u=_a(d,u),u=Oh(s.stateNode,u,2),s=Gs(s,u,2),s!==null&&(Wo(s,2),Js(s))}function En(s,u,d){if(s.tag===3)QO(s,s,d);else for(;u!==null;){if(u.tag===3){QO(u,s,d);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(lc===null||!lc.has(m))){s=_a(d,s),d=Km(2),m=Gs(u,d,2),m!==null&&(Qm(d,m,u,s),Wo(m,2),Js(m));break}}u=u.return}}function hb(s,u,d){var m=s.pingCache;if(m===null){m=s.pingCache=new fr;var y=new Set;m.set(u,y)}else y=m.get(u),y===void 0&&(y=new Set,m.set(u,y));y.has(d)||(nb=!0,y.add(d),s=Zz.bind(null,s,u,d),u.then(s,s))}function Zz(s,u,d){var m=s.pingCache;m!==null&&m.delete(u),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,yr===s&&(Hr&d)===d&&(ni===4||ni===3&&(Hr&62914560)===Hr&&300>It()-ob?(Gt&2)===0&&Ih(s,0):ib|=d,wh===Hr&&(wh=0)),Js(s)}function JO(s,u){u===0&&(u=Nd()),s=Ja(s,u),s!==null&&(Wo(s,u),Js(s))}function Kz(s){var u=s.memoizedState,d=0;u!==null&&(d=u.retryLane),JO(s,d)}function Qz(s,u){var d=0;switch(s.tag){case 13:var m=s.stateNode,y=s.memoizedState;y!==null&&(d=y.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(u),JO(s,d)}function Jz(s,u){return $t(s,u)}var g_=null,Dh=null,pb=!1,__=!1,mb=!1,Hf=0;function Js(s){s!==Dh&&s.next===null&&(Dh===null?g_=Dh=s:Dh=Dh.next=s),__=!0,pb||(pb=!0,tV())}function tv(s,u){if(!mb&&__){mb=!0;do for(var d=!1,m=g_;m!==null;){if(s!==0){var y=m.pendingLanes;if(y===0)var x=0;else{var B=m.suspendedLanes,W=m.pingedLanes;x=(1<<31-hr(42|s)+1)-1,x&=y&~(B&~W),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(d=!0,nw(m,x))}else x=Hr,x=pa(m,m===yr?x:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(x&3)===0||Ka(m,x)||(d=!0,nw(m,x));m=m.next}while(d);mb=!1}}function eV(){ew()}function ew(){__=pb=!1;var s=0;Hf!==0&&(uV()&&(s=Hf),Hf=0);for(var u=It(),d=null,m=g_;m!==null;){var y=m.next,x=tw(m,u);x===0?(m.next=null,d===null?g_=y:d.next=y,y===null&&(Dh=d)):(d=m,(s!==0||(x&3)!==0)&&(__=!0)),m=y}tv(s)}function tw(s,u){for(var d=s.suspendedLanes,m=s.pingedLanes,y=s.expirationTimes,x=s.pendingLanes&-62914561;0<x;){var B=31-hr(x),W=1<<B,de=y[B];de===-1?((W&d)===0||(W&m)!==0)&&(y[B]=Go(W,u)):de<=u&&(s.expiredLanes|=W),x&=~W}if(u=yr,d=Hr,d=pa(s,s===u?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,d===0||s===u&&(Lr===2||Lr===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&qt(m),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||Ka(s,d)){if(u=d&-d,u===s.callbackPriority)return u;switch(m!==null&&qt(m),Eu(d)){case 2:case 8:d=ue;break;case 32:d=xe;break;case 268435456:d=k;break;default:d=xe}return m=rw.bind(null,s),d=$t(d,m),s.callbackPriority=u,s.callbackNode=d,u}return m!==null&&m!==null&&qt(m),s.callbackPriority=2,s.callbackNode=null,2}function rw(s,u){if(qi!==0&&qi!==5)return s.callbackNode=null,s.callbackPriority=0,null;var d=s.callbackNode;if(v_()&&s.callbackNode!==d)return null;var m=Hr;return m=pa(s,s===yr?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(UO(s,m,u),tw(s,It()),s.callbackNode!=null&&s.callbackNode===d?rw.bind(null,s):null)}function nw(s,u){if(v_())return null;UO(s,u,!0)}function tV(){fV(function(){(Gt&6)!==0?$t(kr,eV):ew()})}function vb(){return Hf===0&&(Hf=wd()),Hf}function iw(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:zn(""+s)}function aw(s,u){var d=u.ownerDocument.createElement("input");return d.name=u.name,d.value=u.value,s.id&&d.setAttribute("form",s.id),u.parentNode.insertBefore(d,u),s=new FormData(s),d.parentNode.removeChild(d),s}function rV(s,u,d,m,y){if(u==="submit"&&d&&d.stateNode===y){var x=iw((y[Di]||null).action),B=m.submitter;B&&(u=(u=B[Di]||null)?iw(u.formAction):B.getAttribute("formAction"),u!==null&&(x=u,B=null));var W=new xl("action","action",null,m,y);s.push({event:W,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Hf!==0){var de=B?aw(y,B):new FormData(y);rc(d,{pending:!0,data:de,method:y.method,action:x},null,de)}}else typeof x=="function"&&(W.preventDefault(),de=B?aw(y,B):new FormData(y),rc(d,{pending:!0,data:de,method:y.method,action:x},x,de))},currentTarget:y}]})}}for(var gb=0;gb<Hu.length;gb++){var _b=Hu[gb],nV=_b.toLowerCase(),iV=_b[0].toUpperCase()+_b.slice(1);Vn(nV,"on"+iV)}Vn(N0,"onAnimationEnd"),Vn(M0,"onAnimationIteration"),Vn(I0,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(ZE,"onTransitionRun"),Vn(KE,"onTransitionStart"),Vn(P0,"onTransitionCancel"),Vn(df,"onTransitionEnd"),Eo("onMouseEnter",["mouseout","mouseover"]),Eo("onMouseLeave",["mouseout","mouseover"]),Eo("onPointerEnter",["pointerout","pointerover"]),Eo("onPointerLeave",["pointerout","pointerover"]),Na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Na("onBeforeInput",["compositionend","keypress","textInput","paste"]),Na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aV=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rv));function ow(s,u){u=(u&4)!==0;for(var d=0;d<s.length;d++){var m=s[d],y=m.event;m=m.listeners;e:{var x=void 0;if(u)for(var B=m.length-1;0<=B;B--){var W=m[B],de=W.instance,Le=W.currentTarget;if(W=W.listener,de!==x&&y.isPropagationStopped())break e;x=W,y.currentTarget=Le;try{x(y)}catch(at){zf(at)}y.currentTarget=null,x=de}else for(B=0;B<m.length;B++){if(W=m[B],de=W.instance,Le=W.currentTarget,W=W.listener,de!==x&&y.isPropagationStopped())break e;x=W,y.currentTarget=Le;try{x(y)}catch(at){zf(at)}y.currentTarget=null,x=de}}}}function $r(s,u){var d=u[yl];d===void 0&&(d=u[yl]=new Set);var m=s+"__bubble";d.has(m)||(sw(u,s,2,!1),d.add(m))}function yb(s,u,d){var m=0;u&&(m|=4),sw(d,s,m,u)}var y_="_reactListening"+Math.random().toString(36).slice(2);function Eb(s){if(!s[y_]){s[y_]=!0,Ps.forEach(function(d){d!=="selectionchange"&&(aV.has(d)||yb(d,!1,s),yb(d,!0,s))});var u=s.nodeType===9?s:s.ownerDocument;u===null||u[y_]||(u[y_]=!0,yb("selectionchange",!1,u))}}function sw(s,u,d,m){switch(Mw(u)){case 2:var y=IV;break;case 8:y=PV;break;default:y=Db}d=y.bind(null,u,d,s),y=void 0,!Jo||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(y=!0),m?y!==void 0?s.addEventListener(u,d,{capture:!0,passive:y}):s.addEventListener(u,d,!0):y!==void 0?s.addEventListener(u,d,{passive:y}):s.addEventListener(u,d,!1)}function bb(s,u,d,m,y){var x=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var B=m.tag;if(B===3||B===4){var W=m.stateNode.containerInfo;if(W===y)break;if(B===4)for(B=m.return;B!==null;){var de=B.tag;if((de===3||de===4)&&B.stateNode.containerInfo===y)return;B=B.return}for(;W!==null;){if(B=$o(W),B===null)return;if(de=B.tag,de===5||de===6||de===26||de===27){m=x=B;continue e}W=W.parentNode}}m=m.return}d0(function(){var Le=x,at=ra(d),mt=[];e:{var ze=D0.get(s);if(ze!==void 0){var He=xl,Sr=s;switch(s){case"keypress":if(lf(d)===0)break e;case"keydown":case"keyup":He=g0;break;case"focusin":Sr="focus",He=cm;break;case"focusout":Sr="blur",He=cm;break;case"beforeblur":case"afterblur":He=cm;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=p0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=zE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=On;break;case N0:case M0:case I0:He=cf;break;case df:He=WE;break;case"scroll":case"scrollend":He=h0;break;case"wheel":He=b0;break;case"copy":case"cut":case"paste":He=Bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=_0;break;case"toggle":case"beforetoggle":He=Al}var vr=(u&4)!==0,gn=!vr&&(s==="scroll"||s==="scrollend"),Ae=vr?ze!==null?ze+"Capture":null:ze;vr=[];for(var _e=Le,Ie;_e!==null;){var lt=_e;if(Ie=lt.stateNode,lt=lt.tag,lt!==5&&lt!==26&&lt!==27||Ie===null||Ae===null||(lt=of(_e,Ae),lt!=null&&vr.push(nv(_e,lt,Ie))),gn)break;_e=_e.return}0<vr.length&&(ze=new He(ze,Sr,null,d,at),mt.push({event:ze,listeners:vr}))}}if((u&7)===0){e:{if(ze=s==="mouseover"||s==="pointerover",He=s==="mouseout"||s==="pointerout",ze&&d!==Zn&&(Sr=d.relatedTarget||d.fromElement)&&($o(Sr)||Sr[Ms]))break e;if((He||ze)&&(ze=at.window===at?at:(ze=at.ownerDocument)?ze.defaultView||ze.parentWindow:window,He?(Sr=d.relatedTarget||d.toElement,He=Le,Sr=Sr?$o(Sr):null,Sr!==null&&(gn=a(Sr),vr=Sr.tag,Sr!==gn||vr!==5&&vr!==27&&vr!==6)&&(Sr=null)):(He=null,Sr=Le),He!==Sr)){if(vr=p0,lt="onMouseLeave",Ae="onMouseEnter",_e="mouse",(s==="pointerout"||s==="pointerover")&&(vr=_0,lt="onPointerLeave",Ae="onPointerEnter",_e="pointer"),gn=He==null?ze:Is(He),Ie=Sr==null?ze:Is(Sr),ze=new vr(lt,_e+"leave",He,d,at),ze.target=gn,ze.relatedTarget=Ie,lt=null,$o(at)===Le&&(vr=new vr(Ae,_e+"enter",Sr,d,at),vr.target=Ie,vr.relatedTarget=gn,lt=vr),gn=lt,He&&Sr)t:{for(vr=He,Ae=Sr,_e=0,Ie=vr;Ie;Ie=Lh(Ie))_e++;for(Ie=0,lt=Ae;lt;lt=Lh(lt))Ie++;for(;0<_e-Ie;)vr=Lh(vr),_e--;for(;0<Ie-_e;)Ae=Lh(Ae),Ie--;for(;_e--;){if(vr===Ae||Ae!==null&&vr===Ae.alternate)break t;vr=Lh(vr),Ae=Lh(Ae)}vr=null}else vr=null;He!==null&&lw(mt,ze,He,vr,!1),Sr!==null&&gn!==null&&lw(mt,gn,Sr,vr,!0)}}e:{if(ze=Le?Is(Le):window,He=ze.nodeName&&ze.nodeName.toLowerCase(),He==="select"||He==="input"&&ze.type==="file")var Qt=Xd;else if(Vd(ze))if(_m)Qt=xm;else{Qt=A0;var Xr=T0}else He=ze.nodeName,!He||He.toLowerCase()!=="input"||ze.type!=="checkbox"&&ze.type!=="radio"?Le&&kt(Le.elementType)&&(Qt=Xd):Qt=ju;if(Qt&&(Qt=Qt(s,Le))){Hd(mt,Qt,d,at);break e}Xr&&Xr(s,ze,Le),s==="focusout"&&Le&&ze.type==="number"&&Le.memoizedProps.value!=null&&wu(ze,"number",ze.value)}switch(Xr=Le?Is(Le):window,s){case"focusin":(Vd(Xr)||Xr.contentEditable==="true")&&(ks=Xr,Am=Le,Cl=null);break;case"focusout":Cl=Am=ks=null;break;case"mousedown":$d=!0;break;case"contextmenu":case"mouseup":case"dragend":$d=!1,Rm(mt,d,at);break;case"selectionchange":if(YE)break;case"keydown":case"keyup":Rm(mt,d,at)}var sr;if(Fu)e:{switch(s){case"compositionstart":var _r="onCompositionStart";break e;case"compositionend":_r="onCompositionEnd";break e;case"compositionupdate":_r="onCompositionUpdate";break e}_r=void 0}else Uu?x0(s,d)&&(_r="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(_r="onCompositionStart");_r&&(pm&&d.locale!=="ko"&&(Uu||_r!=="onCompositionStart"?_r==="onCompositionEnd"&&Uu&&(sr=sm()):(Us=at,Iu="value"in Us?Us.value:Us.textContent,Uu=!0)),Xr=E_(Le,_r),0<Xr.length&&(_r=new Sl(_r,s,null,d,at),mt.push({event:_r,listeners:Xr}),sr?_r.data=sr:(sr=S0(d),sr!==null&&(_r.data=sr)))),(sr=kd?$E(s,d):vm(s,d))&&(_r=E_(Le,"onBeforeInput"),0<_r.length&&(Xr=new Sl("onBeforeInput","beforeinput",null,d,at),mt.push({event:Xr,listeners:_r}),Xr.data=sr)),rV(mt,s,Le,d,at)}ow(mt,u)})}function nv(s,u,d){return{instance:s,listener:u,currentTarget:d}}function E_(s,u){for(var d=u+"Capture",m=[];s!==null;){var y=s,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=of(s,d),y!=null&&m.unshift(nv(s,y,x)),y=of(s,u),y!=null&&m.push(nv(s,y,x))),s.tag===3)return m;s=s.return}return[]}function Lh(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function lw(s,u,d,m,y){for(var x=u._reactName,B=[];d!==null&&d!==m;){var W=d,de=W.alternate,Le=W.stateNode;if(W=W.tag,de!==null&&de===m)break;W!==5&&W!==26&&W!==27||Le===null||(de=Le,y?(Le=of(d,x),Le!=null&&B.unshift(nv(d,Le,de))):y||(Le=of(d,x),Le!=null&&B.push(nv(d,Le,de)))),d=d.return}B.length!==0&&s.push({event:u,listeners:B})}var oV=/\r\n?/g,sV=/\u0000|\uFFFD/g;function uw(s){return(typeof s=="string"?s:""+s).replace(oV,`
`).replace(sV,"")}function cw(s,u){return u=uw(u),uw(s)===u}function b_(){}function vn(s,u,d,m,y,x){switch(d){case"children":typeof m=="string"?u==="body"||u==="textarea"&&m===""||K(s,m):(typeof m=="number"||typeof m=="bigint")&&u!=="body"&&K(s,""+m);break;case"className":ma(s,"class",m);break;case"tabIndex":ma(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":ma(s,d,m);break;case"style":Et(s,m,x);break;case"data":if(u!=="object"){ma(s,"data",m);break}case"src":case"href":if(m===""&&(u!=="a"||d!=="href")){s.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(d);break}m=zn(""+m),s.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(d==="formAction"?(u!=="input"&&vn(s,u,"name",y.name,y,null),vn(s,u,"formEncType",y.formEncType,y,null),vn(s,u,"formMethod",y.formMethod,y,null),vn(s,u,"formTarget",y.formTarget,y,null)):(vn(s,u,"encType",y.encType,y,null),vn(s,u,"method",y.method,y,null),vn(s,u,"target",y.target,y,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(d);break}m=zn(""+m),s.setAttribute(d,m);break;case"onClick":m!=null&&(s.onclick=b_);break;case"onScroll":m!=null&&$r("scroll",s);break;case"onScrollEnd":m!=null&&$r("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(d=m.__html,d!=null){if(y.children!=null)throw Error(n(60));s.innerHTML=d}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}d=zn(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,""+m):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":m===!0?s.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,m):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(d,m):s.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(d):s.setAttribute(d,m);break;case"popover":$r("beforetoggle",s),$r("toggle",s),Qa(s,"popover",m);break;case"xlinkActuate":ai(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ai(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ai(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ai(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ai(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ai(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ai(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ai(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ai(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Qa(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Ir.get(d)||d,Qa(s,d,m))}}function xb(s,u,d,m,y,x){switch(d){case"style":Et(s,m,x);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(d=m.__html,d!=null){if(y.children!=null)throw Error(n(60));s.innerHTML=d}}break;case"children":typeof m=="string"?K(s,m):(typeof m=="number"||typeof m=="bigint")&&K(s,""+m);break;case"onScroll":m!=null&&$r("scroll",s);break;case"onScrollEnd":m!=null&&$r("scrollend",s);break;case"onClick":m!=null&&(s.onclick=b_);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ds.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(y=d.endsWith("Capture"),u=d.slice(2,y?d.length-7:void 0),x=s[Di]||null,x=x!=null?x[d]:null,typeof x=="function"&&s.removeEventListener(u,x,y),typeof m=="function")){typeof x!="function"&&x!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(u,m,y);break e}d in s?s[d]=m:m===!0?s.setAttribute(d,""):Qa(s,d,m)}}}function Gi(s,u,d){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$r("error",s),$r("load",s);var m=!1,y=!1,x;for(x in d)if(d.hasOwnProperty(x)){var B=d[x];if(B!=null)switch(x){case"src":m=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:vn(s,u,x,B,d,null)}}y&&vn(s,u,"srcSet",d.srcSet,d,null),m&&vn(s,u,"src",d.src,d,null);return;case"input":$r("invalid",s);var W=x=B=y=null,de=null,Le=null;for(m in d)if(d.hasOwnProperty(m)){var at=d[m];if(at!=null)switch(m){case"name":y=at;break;case"type":B=at;break;case"checked":de=at;break;case"defaultChecked":Le=at;break;case"value":x=at;break;case"defaultValue":W=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(137,u));break;default:vn(s,u,m,at,d,null)}}Ou(s,x,W,de,Le,B,y,!1),Ls(s);return;case"select":$r("invalid",s),m=B=x=null;for(y in d)if(d.hasOwnProperty(y)&&(W=d[y],W!=null))switch(y){case"value":x=W;break;case"defaultValue":B=W;break;case"multiple":m=W;default:vn(s,u,y,W,d,null)}u=x,d=B,s.multiple=!!m,u!=null?Fs(s,!!m,u,!1):d!=null&&Fs(s,!!m,d,!0);return;case"textarea":$r("invalid",s),x=y=m=null;for(B in d)if(d.hasOwnProperty(B)&&(W=d[B],W!=null))switch(B){case"value":m=W;break;case"defaultValue":y=W;break;case"children":x=W;break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(91));break;default:vn(s,u,B,W,d,null)}G(s,m,y,x),Ls(s);return;case"option":for(de in d)if(d.hasOwnProperty(de)&&(m=d[de],m!=null))switch(de){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:vn(s,u,de,m,d,null)}return;case"dialog":$r("beforetoggle",s),$r("toggle",s),$r("cancel",s),$r("close",s);break;case"iframe":case"object":$r("load",s);break;case"video":case"audio":for(m=0;m<rv.length;m++)$r(rv[m],s);break;case"image":$r("error",s),$r("load",s);break;case"details":$r("toggle",s);break;case"embed":case"source":case"link":$r("error",s),$r("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Le in d)if(d.hasOwnProperty(Le)&&(m=d[Le],m!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:vn(s,u,Le,m,d,null)}return;default:if(kt(u)){for(at in d)d.hasOwnProperty(at)&&(m=d[at],m!==void 0&&xb(s,u,at,m,d,void 0));return}}for(W in d)d.hasOwnProperty(W)&&(m=d[W],m!=null&&vn(s,u,W,m,d,null))}function lV(s,u,d,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,B=null,W=null,de=null,Le=null,at=null;for(He in d){var mt=d[He];if(d.hasOwnProperty(He)&&mt!=null)switch(He){case"checked":break;case"value":break;case"defaultValue":de=mt;default:m.hasOwnProperty(He)||vn(s,u,He,null,m,mt)}}for(var ze in m){var He=m[ze];if(mt=d[ze],m.hasOwnProperty(ze)&&(He!=null||mt!=null))switch(ze){case"type":x=He;break;case"name":y=He;break;case"checked":Le=He;break;case"defaultChecked":at=He;break;case"value":B=He;break;case"defaultValue":W=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(n(137,u));break;default:He!==mt&&vn(s,u,ze,He,m,mt)}}Bs(s,B,W,de,Le,at,x,y);return;case"select":He=B=W=ze=null;for(x in d)if(de=d[x],d.hasOwnProperty(x)&&de!=null)switch(x){case"value":break;case"multiple":He=de;default:m.hasOwnProperty(x)||vn(s,u,x,null,m,de)}for(y in m)if(x=m[y],de=d[y],m.hasOwnProperty(y)&&(x!=null||de!=null))switch(y){case"value":ze=x;break;case"defaultValue":W=x;break;case"multiple":B=x;default:x!==de&&vn(s,u,y,x,m,de)}u=W,d=B,m=He,ze!=null?Fs(s,!!d,ze,!1):!!m!=!!d&&(u!=null?Fs(s,!!d,u,!0):Fs(s,!!d,d?[]:"",!1));return;case"textarea":He=ze=null;for(W in d)if(y=d[W],d.hasOwnProperty(W)&&y!=null&&!m.hasOwnProperty(W))switch(W){case"value":break;case"children":break;default:vn(s,u,W,null,m,y)}for(B in m)if(y=m[B],x=d[B],m.hasOwnProperty(B)&&(y!=null||x!=null))switch(B){case"value":ze=y;break;case"defaultValue":He=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(n(91));break;default:y!==x&&vn(s,u,B,y,m,x)}Dd(s,ze,He);return;case"option":for(var Sr in d)if(ze=d[Sr],d.hasOwnProperty(Sr)&&ze!=null&&!m.hasOwnProperty(Sr))switch(Sr){case"selected":s.selected=!1;break;default:vn(s,u,Sr,null,m,ze)}for(de in m)if(ze=m[de],He=d[de],m.hasOwnProperty(de)&&ze!==He&&(ze!=null||He!=null))switch(de){case"selected":s.selected=ze&&typeof ze!="function"&&typeof ze!="symbol";break;default:vn(s,u,de,ze,m,He)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vr in d)ze=d[vr],d.hasOwnProperty(vr)&&ze!=null&&!m.hasOwnProperty(vr)&&vn(s,u,vr,null,m,ze);for(Le in m)if(ze=m[Le],He=d[Le],m.hasOwnProperty(Le)&&ze!==He&&(ze!=null||He!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(n(137,u));break;default:vn(s,u,Le,ze,m,He)}return;default:if(kt(u)){for(var gn in d)ze=d[gn],d.hasOwnProperty(gn)&&ze!==void 0&&!m.hasOwnProperty(gn)&&xb(s,u,gn,void 0,m,ze);for(at in m)ze=m[at],He=d[at],!m.hasOwnProperty(at)||ze===He||ze===void 0&&He===void 0||xb(s,u,at,ze,m,He);return}}for(var Ae in d)ze=d[Ae],d.hasOwnProperty(Ae)&&ze!=null&&!m.hasOwnProperty(Ae)&&vn(s,u,Ae,null,m,ze);for(mt in m)ze=m[mt],He=d[mt],!m.hasOwnProperty(mt)||ze===He||ze==null&&He==null||vn(s,u,mt,ze,m,He)}var Sb=null,Tb=null;function x_(s){return s.nodeType===9?s:s.ownerDocument}function fw(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dw(s,u){if(s===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&u==="foreignObject"?0:s}function Ab(s,u){return s==="textarea"||s==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Rb=null;function uV(){var s=window.event;return s&&s.type==="popstate"?s===Rb?!1:(Rb=s,!0):(Rb=null,!1)}var hw=typeof setTimeout=="function"?setTimeout:void 0,cV=typeof clearTimeout=="function"?clearTimeout:void 0,pw=typeof Promise=="function"?Promise:void 0,fV=typeof queueMicrotask=="function"?queueMicrotask:typeof pw<"u"?function(s){return pw.resolve(null).then(s).catch(dV)}:hw;function dV(s){setTimeout(function(){throw s})}function fc(s){return s==="head"}function mw(s,u){var d=u,m=0,y=0;do{var x=d.nextSibling;if(s.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(0<m&&8>m){d=m;var B=s.ownerDocument;if(d&1&&iv(B.documentElement),d&2&&iv(B.body),d&4)for(d=B.head,iv(d),B=d.firstChild;B;){var W=B.nextSibling,de=B.nodeName;B[El]||de==="SCRIPT"||de==="STYLE"||de==="LINK"&&B.rel.toLowerCase()==="stylesheet"||d.removeChild(B),B=W}}if(y===0){s.removeChild(x),dv(u);return}y--}else d==="$"||d==="$?"||d==="$!"?y++:m=d.charCodeAt(0)-48;else m=0;d=x}while(d);dv(u)}function Cb(s){var u=s.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var d=u;switch(u=u.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Cb(d),xu(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function hV(s,u,d,m){for(;s.nodeType===1;){var y=d;if(s.nodeName.toLowerCase()!==u.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[El])switch(u){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(x=s.getAttribute("rel"),x==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(x!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(x=s.getAttribute("src"),(x!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(u==="input"&&s.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===x)return s}else return s;if(s=hs(s.nextSibling),s===null)break}return null}function pV(s,u,d){if(u==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=hs(s.nextSibling),s===null))return null;return s}function Ob(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function mV(s,u){var d=s.ownerDocument;if(s.data!=="$?"||d.readyState==="complete")u();else{var m=function(){u(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function hs(s){for(;s!=null;s=s.nextSibling){var u=s.nodeType;if(u===1||u===3)break;if(u===8){if(u=s.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return s}var wb=null;function vw(s){s=s.previousSibling;for(var u=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(u===0)return s;u--}else d==="/$"&&u++}s=s.previousSibling}return null}function gw(s,u,d){switch(u=x_(d),s){case"html":if(s=u.documentElement,!s)throw Error(n(452));return s;case"head":if(s=u.head,!s)throw Error(n(453));return s;case"body":if(s=u.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function iv(s){for(var u=s.attributes;u.length;)s.removeAttributeNode(u[0]);xu(s)}var Oo=new Map,_w=new Set;function S_(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Yl=z.d;z.d={f:vV,r:gV,D:_V,C:yV,L:EV,m:bV,X:SV,S:xV,M:TV};function vV(){var s=Yl.f(),u=p_();return s||u}function gV(s){var u=Yo(s);u!==null&&u.tag===5&&u.type==="form"?Ff(u):Yl.r(s)}var Bh=typeof document>"u"?null:document;function yw(s,u,d){var m=Bh;if(m&&typeof u=="string"&&u){var y=Hi(u);y='link[rel="'+s+'"][href="'+y+'"]',typeof d=="string"&&(y+='[crossorigin="'+d+'"]'),_w.has(y)||(_w.add(y),s={rel:s,crossOrigin:d,href:u},m.querySelector(y)===null&&(u=m.createElement("link"),Gi(u,"link",s),mn(u),m.head.appendChild(u)))}}function _V(s){Yl.D(s),yw("dns-prefetch",s,null)}function yV(s,u){Yl.C(s,u),yw("preconnect",s,u)}function EV(s,u,d){Yl.L(s,u,d);var m=Bh;if(m&&s&&u){var y='link[rel="preload"][as="'+Hi(u)+'"]';u==="image"&&d&&d.imageSrcSet?(y+='[imagesrcset="'+Hi(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(y+='[imagesizes="'+Hi(d.imageSizes)+'"]')):y+='[href="'+Hi(s)+'"]';var x=y;switch(u){case"style":x=Fh(s);break;case"script":x=Uh(s)}Oo.has(x)||(s=h({rel:"preload",href:u==="image"&&d&&d.imageSrcSet?void 0:s,as:u},d),Oo.set(x,s),m.querySelector(y)!==null||u==="style"&&m.querySelector(av(x))||u==="script"&&m.querySelector(ov(x))||(u=m.createElement("link"),Gi(u,"link",s),mn(u),m.head.appendChild(u)))}}function bV(s,u){Yl.m(s,u);var d=Bh;if(d&&s){var m=u&&typeof u.as=="string"?u.as:"script",y='link[rel="modulepreload"][as="'+Hi(m)+'"][href="'+Hi(s)+'"]',x=y;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Uh(s)}if(!Oo.has(x)&&(s=h({rel:"modulepreload",href:s},u),Oo.set(x,s),d.querySelector(y)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(ov(x)))return}m=d.createElement("link"),Gi(m,"link",s),mn(m),d.head.appendChild(m)}}}function xV(s,u,d){Yl.S(s,u,d);var m=Bh;if(m&&s){var y=yo(m).hoistableStyles,x=Fh(s);u=u||"default";var B=y.get(x);if(!B){var W={loading:0,preload:null};if(B=m.querySelector(av(x)))W.loading=5;else{s=h({rel:"stylesheet",href:s,"data-precedence":u},d),(d=Oo.get(x))&&Nb(s,d);var de=B=m.createElement("link");mn(de),Gi(de,"link",s),de._p=new Promise(function(Le,at){de.onload=Le,de.onerror=at}),de.addEventListener("load",function(){W.loading|=1}),de.addEventListener("error",function(){W.loading|=2}),W.loading|=4,T_(B,u,m)}B={type:"stylesheet",instance:B,count:1,state:W},y.set(x,B)}}}function SV(s,u){Yl.X(s,u);var d=Bh;if(d&&s){var m=yo(d).hoistableScripts,y=Uh(s),x=m.get(y);x||(x=d.querySelector(ov(y)),x||(s=h({src:s,async:!0},u),(u=Oo.get(y))&&Mb(s,u),x=d.createElement("script"),mn(x),Gi(x,"link",s),d.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},m.set(y,x))}}function TV(s,u){Yl.M(s,u);var d=Bh;if(d&&s){var m=yo(d).hoistableScripts,y=Uh(s),x=m.get(y);x||(x=d.querySelector(ov(y)),x||(s=h({src:s,async:!0,type:"module"},u),(u=Oo.get(y))&&Mb(s,u),x=d.createElement("script"),mn(x),Gi(x,"link",s),d.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},m.set(y,x))}}function Ew(s,u,d,m){var y=(y=Pt.current)?S_(y):null;if(!y)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(u=Fh(d.href),d=yo(y).hoistableStyles,m=d.get(u),m||(m={type:"style",instance:null,count:0,state:null},d.set(u,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=Fh(d.href);var x=yo(y).hoistableStyles,B=x.get(s);if(B||(y=y.ownerDocument||y,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(s,B),(x=y.querySelector(av(s)))&&!x._p&&(B.instance=x,B.state.loading=5),Oo.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Oo.set(s,d),x||AV(y,s,d,B.state))),u&&m===null)throw Error(n(528,""));return B}if(u&&m!==null)throw Error(n(529,""));return null;case"script":return u=d.async,d=d.src,typeof d=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Uh(d),d=yo(y).hoistableScripts,m=d.get(u),m||(m={type:"script",instance:null,count:0,state:null},d.set(u,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function Fh(s){return'href="'+Hi(s)+'"'}function av(s){return'link[rel="stylesheet"]['+s+"]"}function bw(s){return h({},s,{"data-precedence":s.precedence,precedence:null})}function AV(s,u,d,m){s.querySelector('link[rel="preload"][as="style"]['+u+"]")?m.loading=1:(u=s.createElement("link"),m.preload=u,u.addEventListener("load",function(){return m.loading|=1}),u.addEventListener("error",function(){return m.loading|=2}),Gi(u,"link",d),mn(u),s.head.appendChild(u))}function Uh(s){return'[src="'+Hi(s)+'"]'}function ov(s){return"script[async]"+s}function xw(s,u,d){if(u.count++,u.instance===null)switch(u.type){case"style":var m=s.querySelector('style[data-href~="'+Hi(d.href)+'"]');if(m)return u.instance=m,mn(m),m;var y=h({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),mn(m),Gi(m,"style",y),T_(m,d.precedence,s),u.instance=m;case"stylesheet":y=Fh(d.href);var x=s.querySelector(av(y));if(x)return u.state.loading|=4,u.instance=x,mn(x),x;m=bw(d),(y=Oo.get(y))&&Nb(m,y),x=(s.ownerDocument||s).createElement("link"),mn(x);var B=x;return B._p=new Promise(function(W,de){B.onload=W,B.onerror=de}),Gi(x,"link",m),u.state.loading|=4,T_(x,d.precedence,s),u.instance=x;case"script":return x=Uh(d.src),(y=s.querySelector(ov(x)))?(u.instance=y,mn(y),y):(m=d,(y=Oo.get(x))&&(m=h({},d),Mb(m,y)),s=s.ownerDocument||s,y=s.createElement("script"),mn(y),Gi(y,"link",m),s.head.appendChild(y),u.instance=y);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(m=u.instance,u.state.loading|=4,T_(m,d.precedence,s));return u.instance}function T_(s,u,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=m.length?m[m.length-1]:null,x=y,B=0;B<m.length;B++){var W=m[B];if(W.dataset.precedence===u)x=W;else if(x!==y)break}x?x.parentNode.insertBefore(s,x.nextSibling):(u=d.nodeType===9?d.head:d,u.insertBefore(s,u.firstChild))}function Nb(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.title==null&&(s.title=u.title)}function Mb(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.integrity==null&&(s.integrity=u.integrity)}var A_=null;function Sw(s,u,d){if(A_===null){var m=new Map,y=A_=new Map;y.set(d,m)}else y=A_,m=y.get(d),m||(m=new Map,y.set(d,m));if(m.has(s))return m;for(m.set(s,null),d=d.getElementsByTagName(s),y=0;y<d.length;y++){var x=d[y];if(!(x[El]||x[Yn]||s==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var B=x.getAttribute(u)||"";B=s+B;var W=m.get(B);W?W.push(x):m.set(B,[x])}}return m}function Tw(s,u,d){s=s.ownerDocument||s,s.head.insertBefore(d,u==="title"?s.querySelector("head > title"):null)}function RV(s,u,d){if(d===1||u.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return s=u.disabled,typeof u.precedence=="string"&&s==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function Aw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var sv=null;function CV(){}function OV(s,u,d){if(sv===null)throw Error(n(475));var m=sv;if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=Fh(d.href),x=s.querySelector(av(y));if(x){s=x._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(m.count++,m=R_.bind(m),s.then(m,m)),u.state.loading|=4,u.instance=x,mn(x);return}x=s.ownerDocument||s,d=bw(d),(y=Oo.get(y))&&Nb(d,y),x=x.createElement("link"),mn(x);var B=x;B._p=new Promise(function(W,de){B.onload=W,B.onerror=de}),Gi(x,"link",d),u.instance=x}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(u,s),(s=u.state.preload)&&(u.state.loading&3)===0&&(m.count++,u=R_.bind(m),s.addEventListener("load",u),s.addEventListener("error",u))}}function wV(){if(sv===null)throw Error(n(475));var s=sv;return s.stylesheets&&s.count===0&&Ib(s,s.stylesheets),0<s.count?function(u){var d=setTimeout(function(){if(s.stylesheets&&Ib(s,s.stylesheets),s.unsuspend){var m=s.unsuspend;s.unsuspend=null,m()}},6e4);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(d)}}:null}function R_(){if(this.count--,this.count===0){if(this.stylesheets)Ib(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var C_=null;function Ib(s,u){s.stylesheets=null,s.unsuspend!==null&&(s.count++,C_=new Map,u.forEach(NV,s),C_=null,R_.call(s))}function NV(s,u){if(!(u.state.loading&4)){var d=C_.get(s);if(d)var m=d.get(null);else{d=new Map,C_.set(s,d);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var B=y[x];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(d.set(B.dataset.precedence,B),m=B)}m&&d.set(null,m)}y=u.instance,B=y.getAttribute("data-precedence"),x=d.get(B)||m,x===m&&d.set(null,y),d.set(B,y),this.count++,m=R_.bind(this),y.addEventListener("load",m),y.addEventListener("error",m),x?x.parentNode.insertBefore(y,x.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),u.state.loading|=4}}var lv={$$typeof:C,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function MV(s,u,d,m,y,x,B,W){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_l(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_l(0),this.hiddenUpdates=_l(null),this.identifierPrefix=m,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function Rw(s,u,d,m,y,x,B,W,de,Le,at,mt){return s=new MV(s,u,d,B,W,de,Le,mt),u=1,x===!0&&(u|=24),x=ia(3,null,null,u),s.current=x,x.stateNode=s,u=Pm(),u.refCount++,s.pooledCache=u,u.refCount++,x.memoizedState={element:m,isDehydrated:d,cache:u},Um(x),s}function Cw(s){return s?(s=Ml,s):Ml}function Ow(s,u,d,m,y,x){y=Cw(y),m.context===null?m.context=y:m.pendingContext=y,m=Ea(u),m.payload={element:d},x=x===void 0?null:x,x!==null&&(m.callback=x),d=Gs(s,m,u),d!==null&&(oo(d,s,u),Ao(d,s,u))}function ww(s,u){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<u?d:u}}function Pb(s,u){ww(s,u),(s=s.alternate)&&ww(s,u)}function Nw(s){if(s.tag===13){var u=Ja(s,67108864);u!==null&&oo(u,s,67108864),Pb(s,67108864)}}var O_=!0;function IV(s,u,d,m){var y=w.T;w.T=null;var x=z.p;try{z.p=2,Db(s,u,d,m)}finally{z.p=x,w.T=y}}function PV(s,u,d,m){var y=w.T;w.T=null;var x=z.p;try{z.p=8,Db(s,u,d,m)}finally{z.p=x,w.T=y}}function Db(s,u,d,m){if(O_){var y=Lb(m);if(y===null)bb(s,u,m,w_,d),Iw(s,m);else if(LV(y,s,u,d,m))m.stopPropagation();else if(Iw(s,m),u&4&&-1<DV.indexOf(s)){for(;y!==null;){var x=Yo(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var B=Ji(x.pendingLanes);if(B!==0){var W=x;for(W.pendingLanes|=2,W.entangledLanes|=2;B;){var de=1<<31-hr(B);W.entanglements[1]|=de,B&=~de}Js(x),(Gt&6)===0&&(d_=It()+500,tv(0))}}break;case 13:W=Ja(x,2),W!==null&&oo(W,x,2),p_(),Pb(x,2)}if(x=Lb(m),x===null&&bb(s,u,m,w_,d),x===y)break;y=x}y!==null&&m.stopPropagation()}else bb(s,u,m,null,d)}}function Lb(s){return s=ra(s),Bb(s)}var w_=null;function Bb(s){if(w_=null,s=$o(s),s!==null){var u=a(s);if(u===null)s=null;else{var d=u.tag;if(d===13){if(s=o(u),s!==null)return s;s=null}else if(d===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;s=null}else u!==s&&(s=null)}}return w_=s,null}function Mw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(er()){case kr:return 2;case ue:return 8;case xe:case Ue:return 32;case k:return 268435456;default:return 32}default:return 32}}var Fb=!1,dc=null,hc=null,pc=null,uv=new Map,cv=new Map,mc=[],DV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Iw(s,u){switch(s){case"focusin":case"focusout":dc=null;break;case"dragenter":case"dragleave":hc=null;break;case"mouseover":case"mouseout":pc=null;break;case"pointerover":case"pointerout":uv.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":cv.delete(u.pointerId)}}function fv(s,u,d,m,y,x){return s===null||s.nativeEvent!==x?(s={blockedOn:u,domEventName:d,eventSystemFlags:m,nativeEvent:x,targetContainers:[y]},u!==null&&(u=Yo(u),u!==null&&Nw(u)),s):(s.eventSystemFlags|=m,u=s.targetContainers,y!==null&&u.indexOf(y)===-1&&u.push(y),s)}function LV(s,u,d,m,y){switch(u){case"focusin":return dc=fv(dc,s,u,d,m,y),!0;case"dragenter":return hc=fv(hc,s,u,d,m,y),!0;case"mouseover":return pc=fv(pc,s,u,d,m,y),!0;case"pointerover":var x=y.pointerId;return uv.set(x,fv(uv.get(x)||null,s,u,d,m,y)),!0;case"gotpointercapture":return x=y.pointerId,cv.set(x,fv(cv.get(x)||null,s,u,d,m,y)),!0}return!1}function Pw(s){var u=$o(s.target);if(u!==null){var d=a(u);if(d!==null){if(u=d.tag,u===13){if(u=o(d),u!==null){s.blockedOn=u,im(s.priority,function(){if(d.tag===13){var m=ao();m=nf(m);var y=Ja(d,m);y!==null&&oo(y,d,m),Pb(d,m)}});return}}else if(u===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function N_(s){if(s.blockedOn!==null)return!1;for(var u=s.targetContainers;0<u.length;){var d=Lb(s.nativeEvent);if(d===null){d=s.nativeEvent;var m=new d.constructor(d.type,d);Zn=m,d.target.dispatchEvent(m),Zn=null}else return u=Yo(d),u!==null&&Nw(u),s.blockedOn=d,!1;u.shift()}return!0}function Dw(s,u,d){N_(s)&&d.delete(u)}function BV(){Fb=!1,dc!==null&&N_(dc)&&(dc=null),hc!==null&&N_(hc)&&(hc=null),pc!==null&&N_(pc)&&(pc=null),uv.forEach(Dw),cv.forEach(Dw)}function M_(s,u){s.blockedOn===u&&(s.blockedOn=null,Fb||(Fb=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,BV)))}var I_=null;function Lw(s){I_!==s&&(I_=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){I_===s&&(I_=null);for(var u=0;u<s.length;u+=3){var d=s[u],m=s[u+1],y=s[u+2];if(typeof m!="function"){if(Bb(m||d)===null)continue;break}var x=Yo(d);x!==null&&(s.splice(u,3),u-=3,rc(x,{pending:!0,data:y,method:d.method,action:m},m,y))}}))}function dv(s){function u(de){return M_(de,s)}dc!==null&&M_(dc,s),hc!==null&&M_(hc,s),pc!==null&&M_(pc,s),uv.forEach(u),cv.forEach(u);for(var d=0;d<mc.length;d++){var m=mc[d];m.blockedOn===s&&(m.blockedOn=null)}for(;0<mc.length&&(d=mc[0],d.blockedOn===null);)Pw(d),d.blockedOn===null&&mc.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var y=d[m],x=d[m+1],B=y[Di]||null;if(typeof x=="function")B||Lw(d);else if(B){var W=null;if(x&&x.hasAttribute("formAction")){if(y=x,B=x[Di]||null)W=B.formAction;else if(Bb(y)!==null)continue}else W=B.action;typeof W=="function"?d[m+1]=W:(d.splice(m,3),m-=3),Lw(d)}}}function Ub(s){this._internalRoot=s}P_.prototype.render=Ub.prototype.render=function(s){var u=this._internalRoot;if(u===null)throw Error(n(409));var d=u.current,m=ao();Ow(d,m,s,u,null,null)},P_.prototype.unmount=Ub.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var u=s.containerInfo;Ow(s.current,2,null,s,null,null),p_(),u[Ms]=null}};function P_(s){this._internalRoot=s}P_.prototype.unstable_scheduleHydration=function(s){if(s){var u=Id();s={blockedOn:null,target:s,priority:u};for(var d=0;d<mc.length&&u!==0&&u<mc[d].priority;d++);mc.splice(d,0,s),d===0&&Pw(s)}};var Bw=t.version;if(Bw!=="19.1.1")throw Error(n(527,Bw,"19.1.1"));z.findDOMNode=function(s){var u=s._reactInternals;if(u===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=c(u),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var FV={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:w,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var D_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!D_.isDisabled&&D_.supportsFiber)try{Ut=D_.inject(FV),lr=D_}catch{}}return gv.createRoot=function(s,u){if(!i(s))throw Error(n(299));var d=!1,m="",y=s_,x=l_,B=u_,W=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(x=u.onCaughtError),u.onRecoverableError!==void 0&&(B=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(W=u.unstable_transitionCallbacks)),u=Rw(s,1,!1,null,null,d,m,y,x,B,W,null),s[Ms]=u.current,Eb(s),new Ub(u)},gv.hydrateRoot=function(s,u,d){if(!i(s))throw Error(n(299));var m=!1,y="",x=s_,B=l_,W=u_,de=null,Le=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(x=d.onUncaughtError),d.onCaughtError!==void 0&&(B=d.onCaughtError),d.onRecoverableError!==void 0&&(W=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(de=d.unstable_transitionCallbacks),d.formState!==void 0&&(Le=d.formState)),u=Rw(s,1,!0,u,d??null,m,y,x,B,W,de,Le),u.context=Cw(null),d=u.current,m=ao(),m=nf(m),y=Ea(m),y.callback=null,Gs(d,y,m),d=m,u.current.lanes=d,Wo(u,d),Js(u),s[Ms]=u.current,Eb(s),new P_(u)},gv.version="19.1.1",gv}var yN;function pq(){if(yN)return Yb.exports;yN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Yb.exports=hq(),Yb.exports}var mq=pq();let vq={data:""},gq=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||vq,_q=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,yq=/\/\*[^]*?\*\/|  +/g,EN=/\n+/g,Ac=(e,t)=>{let r="",n="",i="";for(let a in e){let o=e[a];a[0]=="@"?a[1]=="i"?r=a+" "+o+";":n+=a[1]=="f"?Ac(o,a):a+"{"+Ac(o,a[1]=="k"?"":t)+"}":typeof o=="object"?n+=Ac(o,t?t.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Ac.p?Ac.p(a,o):a+":"+o+";")}return r+(t&&i?t+"{"+i+"}":i)+n},Zl={},K5=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+K5(e[r]);return t}return e},Eq=(e,t,r,n,i)=>{let a=K5(e),o=Zl[a]||(Zl[a]=(c=>{let f=0,h=11;for(;f<c.length;)h=101*h+c.charCodeAt(f++)>>>0;return"go"+h})(a));if(!Zl[o]){let c=a!==e?e:(f=>{let h,p,v=[{}];for(;h=_q.exec(f.replace(yq,""));)h[4]?v.shift():h[3]?(p=h[3].replace(EN," ").trim(),v.unshift(v[0][p]=v[0][p]||{})):v[0][h[1]]=h[2].replace(EN," ").trim();return v[0]})(e);Zl[o]=Ac(i?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&Zl.g?Zl.g:null;return r&&(Zl.g=Zl[o]),((c,f,h,p)=>{p?f.data=f.data.replace(p,c):f.data.indexOf(c)===-1&&(f.data=h?c+f.data:f.data+c)})(Zl[o],t,n,l),o},bq=(e,t,r)=>e.reduce((n,i,a)=>{let o=t[a];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Ac(l,""):l===!1?"":l}return n+i+(o??"")},"");function K1(e){let t=this||{},r=e.call?e(t.p):e;return Eq(r.unshift?r.raw?bq(r,[].slice.call(arguments,1),t.p):r.reduce((n,i)=>Object.assign(n,i&&i.call?i(t.p):i),{}):r,gq(t.target),t.g,t.o,t.k)}let Q5,h2,p2;K1.bind({g:1});let du=K1.bind({k:1});function xq(e,t,r,n){Ac.p=t,Q5=e,h2=r,p2=n}function Kc(e,t){let r=this||{};return function(){let n=arguments;function i(a,o){let l=Object.assign({},a),c=l.className||i.className;r.p=Object.assign({theme:h2&&h2()},l),r.o=/ *go\d+/.test(c),l.className=K1.apply(r,n)+(c?" "+c:"");let f=e;return e[0]&&(f=l.as||e,delete l.as),p2&&f[0]&&p2(l),Q5(f,l)}return i}}var Sq=e=>typeof e=="function",$y=(e,t)=>Sq(e)?e(t):e,Tq=(()=>{let e=0;return()=>(++e).toString()})(),J5=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Aq=20,YC="default",eU=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return eU(e,{type:e.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},_y=[],tU={toasts:[],pausedAt:void 0,settings:{toastLimit:Aq}},ol={},rU=(e,t=YC)=>{ol[t]=eU(ol[t]||tU,e),_y.forEach(([r,n])=>{r===t&&n(ol[t])})},nU=e=>Object.keys(ol).forEach(t=>rU(e,t)),Rq=e=>Object.keys(ol).find(t=>ol[t].toasts.some(r=>r.id===e)),Q1=(e=YC)=>t=>{rU(t,e)},Cq={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Oq=(e={},t=YC)=>{let[r,n]=U.useState(ol[t]||tU),i=U.useRef(ol[t]);U.useEffect(()=>(i.current!==ol[t]&&n(ol[t]),_y.push([t,n]),()=>{let o=_y.findIndex(([l])=>l===t);o>-1&&_y.splice(o,1)}),[t]);let a=r.toasts.map(o=>{var l,c,f;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||e?.removeDelay,duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||e?.duration||Cq[o.type],style:{...e.style,...(f=e[o.type])==null?void 0:f.style,...o.style}}});return{...r,toasts:a}},wq=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:r?.id||Tq()}),Gg=e=>(t,r)=>{let n=wq(t,e,r);return Q1(n.toasterId||Rq(n.id))({type:2,toast:n}),n.id},hn=(e,t)=>Gg("blank")(e,t);hn.error=Gg("error");hn.success=Gg("success");hn.loading=Gg("loading");hn.custom=Gg("custom");hn.dismiss=(e,t)=>{let r={type:3,toastId:e};t?Q1(t)(r):nU(r)};hn.dismissAll=e=>hn.dismiss(void 0,e);hn.remove=(e,t)=>{let r={type:4,toastId:e};t?Q1(t)(r):nU(r)};hn.removeAll=e=>hn.remove(void 0,e);hn.promise=(e,t,r)=>{let n=hn.loading(t.loading,{...r,...r?.loading});return typeof e=="function"&&(e=e()),e.then(i=>{let a=t.success?$y(t.success,i):void 0;return a?hn.success(a,{id:n,...r,...r?.success}):hn.dismiss(n),i}).catch(i=>{let a=t.error?$y(t.error,i):void 0;a?hn.error(a,{id:n,...r,...r?.error}):hn.dismiss(n)}),e};var Nq=1e3,Mq=(e,t="default")=>{let{toasts:r,pausedAt:n}=Oq(e,t),i=U.useRef(new Map).current,a=U.useCallback((p,v=Nq)=>{if(i.has(p))return;let g=setTimeout(()=>{i.delete(p),o({type:4,toastId:p})},v);i.set(p,g)},[]);U.useEffect(()=>{if(n)return;let p=Date.now(),v=r.map(g=>{if(g.duration===1/0)return;let _=(g.duration||0)+g.pauseDuration-(p-g.createdAt);if(_<0){g.visible&&hn.dismiss(g.id);return}return setTimeout(()=>hn.dismiss(g.id,t),_)});return()=>{v.forEach(g=>g&&clearTimeout(g))}},[r,n,t]);let o=U.useCallback(Q1(t),[t]),l=U.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=U.useCallback((p,v)=>{o({type:1,toast:{id:p,height:v}})},[o]),f=U.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),h=U.useCallback((p,v)=>{let{reverseOrder:g=!1,gutter:_=8,defaultPosition:E}=v||{},b=r.filter(C=>(C.position||E)===(p.position||E)&&C.height),S=b.findIndex(C=>C.id===p.id),T=b.filter((C,M)=>M<S&&C.visible).length;return b.filter(C=>C.visible).slice(...g?[T+1]:[0,T]).reduce((C,M)=>C+(M.height||0)+_,0)},[r]);return U.useEffect(()=>{r.forEach(p=>{if(p.dismissed)a(p.id,p.removeDelay);else{let v=i.get(p.id);v&&(clearTimeout(v),i.delete(p.id))}})},[r,a]),{toasts:r,handlers:{updateHeight:c,startPause:l,endPause:f,calculateOffset:h}}},Iq=du`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Pq=du`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Dq=du`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Lq=Kc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Iq} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Pq} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Dq} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Bq=du`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Fq=Kc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Bq} 1s linear infinite;
`,Uq=du`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,kq=du`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,jq=Kc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Uq} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${kq} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,zq=Kc("div")`
  position: absolute;
`,Vq=Kc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Hq=du`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Xq=Kc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Hq} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,qq=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?U.createElement(Xq,null,t):t:r==="blank"?null:U.createElement(Vq,null,U.createElement(Fq,{...n}),r!=="loading"&&U.createElement(zq,null,r==="error"?U.createElement(Lq,{...n}):U.createElement(jq,{...n})))},Gq=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Wq=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,$q="0%{opacity:0;} 100%{opacity:1;}",Yq="0%{opacity:1;} 100%{opacity:0;}",Zq=Kc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Kq=Kc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Qq=(e,t)=>{let r=e.includes("top")?1:-1,[n,i]=J5()?[$q,Yq]:[Gq(r),Wq(r)];return{animation:t?`${du(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${du(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Jq=U.memo(({toast:e,position:t,style:r,children:n})=>{let i=e.height?Qq(e.position||t||"top-center",e.visible):{opacity:0},a=U.createElement(qq,{toast:e}),o=U.createElement(Kq,{...e.ariaProps},$y(e.message,e));return U.createElement(Zq,{className:e.className,style:{...i,...r,...e.style}},typeof n=="function"?n({icon:a,message:o}):U.createElement(U.Fragment,null,a,o))});xq(U.createElement);var eG=({id:e,className:t,style:r,onHeightUpdate:n,children:i})=>{let a=U.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return U.createElement("div",{ref:a,className:t,style:r},i)},tG=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:J5()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...i}},rG=K1`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,V_=16,nG=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:i,toasterId:a,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:f}=Mq(r,a);return U.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:V_,left:V_,right:V_,bottom:V_,pointerEvents:"none",...o},className:l,onMouseEnter:f.startPause,onMouseLeave:f.endPause},c.map(h=>{let p=h.position||t,v=f.calculateOffset(h,{reverseOrder:e,gutter:n,defaultPosition:t}),g=tG(p,v);return U.createElement(eG,{id:h.id,key:h.id,onHeightUpdate:f.updateHeight,className:h.visible?rG:"",style:g},h.type==="custom"?$y(h.message,h):i?i(h):U.createElement(Jq,{toast:h,position:p}))}))};const iG=U.createContext(void 0),aG=({children:e})=>{const[t,r]=U.useState(""),[n,i]=U.useState(!1),a=()=>{r(""),i(!1)},o=U.useMemo(()=>({searchQuery:t,setSearchQuery:r,isSearching:n,setIsSearching:i,clearSearch:a}),[t,n]);return A.jsx(iG.Provider,{value:o,children:e})},oG=new cH({defaultOptions:{queries:{staleTime:300*1e3,gcTime:600*1e3,retry:2,retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!1,refetchOnReconnect:!0},mutations:{retry:1}}});function sG(){return A.jsx("div",{className:"min-h-screen bg-background text-foreground",children:A.jsx("main",{className:"py-0 px-0",children:A.jsx(Z5,{})})})}var bN={exports:{}},_v={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xN;function lG(){if(xN)return _v;xN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:e,type:n,key:o,ref:i!==void 0?i:null,props:a}}return _v.Fragment=t,_v.jsx=r,_v.jsxs=r,_v}var SN;function uG(){return SN||(SN=1,bN.exports=lG()),bN.exports}var Be=uG();function TN(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function iU(...e){return t=>{let r=!1;const n=e.map(i=>{const a=TN(i,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():TN(e[i],null)}}}}function Fn(...e){return U.useCallback(iU(...e),e)}function Sp(e){const t=fG(e),r=U.forwardRef((n,i)=>{const{children:a,...o}=n,l=U.Children.toArray(a),c=l.find(hG);if(c){const f=c.props.children,h=l.map(p=>p===c?U.Children.count(f)>1?U.Children.only(null):U.isValidElement(f)?f.props.children:null:p);return Be.jsx(t,{...o,ref:i,children:U.isValidElement(f)?U.cloneElement(f,void 0,h):null})}return Be.jsx(t,{...o,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}var cG=Sp("Slot");function fG(e){const t=U.forwardRef((r,n)=>{const{children:i,...a}=r;if(U.isValidElement(i)){const o=mG(i),l=pG(a,i.props);return i.type!==U.Fragment&&(l.ref=n?iU(n,o):o),U.cloneElement(i,l)}return U.Children.count(i)>1?U.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var dG=Symbol("radix.slottable");function hG(e){return U.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===dG}function pG(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function mG(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function aU(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=aU(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function oU(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=aU(e))&&(n&&(n+=" "),n+=t);return n}const AN=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,RN=oU,ZC=(e,t)=>r=>{var n;if(t?.variants==null)return RN(e,r?.class,r?.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(f=>{const h=r?.[f],p=a?.[f];if(h===null)return null;const v=AN(h)||AN(p);return i[f][v]}),l=r&&Object.entries(r).reduce((f,h)=>{let[p,v]=h;return v===void 0||(f[p]=v),f},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((f,h)=>{let{class:p,className:v,...g}=h;return Object.entries(g).every(_=>{let[E,b]=_;return Array.isArray(b)?b.includes({...a,...l}[E]):{...a,...l}[E]===b})?[...f,p,v]:f},[]);return RN(e,o,c,r?.class,r?.className)},KC="-",vG=e=>{const t=_G(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:i=>{const a=i.split(KC);return a[0]===""&&a.length!==1&&a.shift(),sU(a,t)||gG(i)},getConflictingClassGroupIds:(i,a)=>{const o=r[i]||[];return a&&n[i]?[...o,...n[i]]:o}}},sU=(e,t)=>{if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?sU(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(KC);return t.validators.find(({validator:o})=>o(a))?.classGroupId},CN=/^\[(.+)\]$/,gG=e=>{if(CN.test(e)){const t=CN.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},_G=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return EG(Object.entries(e.classGroups),r).forEach(([i,a])=>{m2(a,n,i,t)}),n},m2=(e,t,r,n)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:ON(t,i);a.classGroupId=r;return}if(typeof i=="function"){if(yG(i)){m2(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([a,o])=>{m2(o,ON(t,a),r,n)})})},ON=(e,t)=>{let r=e;return t.split(KC).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},yG=e=>e.isThemeGetter,EG=(e,t)=>t?e.map(([r,n])=>{const i=n.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[r,i]}):e,bG=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const i=(a,o)=>{r.set(a,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return i(a,o),o},set(a,o){r.has(a)?r.set(a,o):i(a,o)}}},lU="!",xG=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,i=t[0],a=t.length,o=l=>{const c=[];let f=0,h=0,p;for(let b=0;b<l.length;b++){let S=l[b];if(f===0){if(S===i&&(n||l.slice(b,b+a)===t)){c.push(l.slice(h,b)),h=b+a;continue}if(S==="/"){p=b;continue}}S==="["?f++:S==="]"&&f--}const v=c.length===0?l:l.substring(h),g=v.startsWith(lU),_=g?v.substring(1):v,E=p&&p>h?p-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:_,maybePostfixModifierPosition:E}};return r?l=>r({className:l,parseClassName:o}):o},SG=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},TG=e=>({cache:bG(e.cacheSize),parseClassName:xG(e),...vG(e)}),AG=/\s+/,RG=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,a=[],o=e.trim().split(AG);let l="";for(let c=o.length-1;c>=0;c-=1){const f=o[c],{modifiers:h,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:g}=r(f);let _=!!g,E=n(_?v.substring(0,g):v);if(!E){if(!_){l=f+(l.length>0?" "+l:l);continue}if(E=n(v),!E){l=f+(l.length>0?" "+l:l);continue}_=!1}const b=SG(h).join(":"),S=p?b+lU:b,T=S+E;if(a.includes(T))continue;a.push(T);const C=i(E,_);for(let M=0;M<C.length;++M){const D=C[M];a.push(S+D)}l=f+(l.length>0?" "+l:l)}return l};function CG(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=uU(t))&&(n&&(n+=" "),n+=r);return n}const uU=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=uU(e[n]))&&(r&&(r+=" "),r+=t);return r};function OG(e,...t){let r,n,i,a=o;function o(c){const f=t.reduce((h,p)=>p(h),e());return r=TG(f),n=r.cache.get,i=r.cache.set,a=l,l(c)}function l(c){const f=n(c);if(f)return f;const h=RG(c,r);return i(c,h),h}return function(){return a(CG.apply(null,arguments))}}const Mn=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},cU=/^\[(?:([a-z-]+):)?(.+)\]$/i,wG=/^\d+\/\d+$/,NG=new Set(["px","full","screen"]),MG=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,IG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,PG=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,DG=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,LG=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kl=e=>cp(e)||NG.has(e)||wG.test(e),gc=e=>Wp(e,"length",HG),cp=e=>!!e&&!Number.isNaN(Number(e)),Qb=e=>Wp(e,"number",cp),yv=e=>!!e&&Number.isInteger(Number(e)),BG=e=>e.endsWith("%")&&cp(e.slice(0,-1)),Ur=e=>cU.test(e),_c=e=>MG.test(e),FG=new Set(["length","size","percentage"]),UG=e=>Wp(e,FG,fU),kG=e=>Wp(e,"position",fU),jG=new Set(["image","url"]),zG=e=>Wp(e,jG,qG),VG=e=>Wp(e,"",XG),Ev=()=>!0,Wp=(e,t,r)=>{const n=cU.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},HG=e=>IG.test(e)&&!PG.test(e),fU=()=>!1,XG=e=>DG.test(e),qG=e=>LG.test(e),GG=()=>{const e=Mn("colors"),t=Mn("spacing"),r=Mn("blur"),n=Mn("brightness"),i=Mn("borderColor"),a=Mn("borderRadius"),o=Mn("borderSpacing"),l=Mn("borderWidth"),c=Mn("contrast"),f=Mn("grayscale"),h=Mn("hueRotate"),p=Mn("invert"),v=Mn("gap"),g=Mn("gradientColorStops"),_=Mn("gradientColorStopPositions"),E=Mn("inset"),b=Mn("margin"),S=Mn("opacity"),T=Mn("padding"),C=Mn("saturate"),M=Mn("scale"),D=Mn("sepia"),I=Mn("skew"),N=Mn("space"),j=Mn("translate"),re=()=>["auto","contain","none"],Q=()=>["auto","hidden","clip","visible","scroll"],X=()=>["auto",Ur,t],R=()=>[Ur,t],P=()=>["",Kl,gc],V=()=>["auto",cp,Ur],le=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],w=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>["start","end","center","between","around","evenly","stretch"],ee=()=>["","0",Ur],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ge=()=>[cp,Ur];return{cacheSize:500,separator:":",theme:{colors:[Ev],spacing:[Kl,gc],blur:["none","",_c,Ur],brightness:ge(),borderColor:[e],borderRadius:["none","","full",_c,Ur],borderSpacing:R(),borderWidth:P(),contrast:ge(),grayscale:ee(),hueRotate:ge(),invert:ee(),gap:R(),gradientColorStops:[e],gradientColorStopPositions:[BG,gc],inset:X(),margin:X(),opacity:ge(),padding:R(),saturate:ge(),scale:ge(),sepia:ee(),skew:ge(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",Ur]}],container:["container"],columns:[{columns:[_c]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...le(),Ur]}],overflow:[{overflow:Q()}],"overflow-x":[{"overflow-x":Q()}],"overflow-y":[{"overflow-y":Q()}],overscroll:[{overscroll:re()}],"overscroll-x":[{"overscroll-x":re()}],"overscroll-y":[{"overscroll-y":re()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",yv,Ur]}],basis:[{basis:X()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ur]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",yv,Ur]}],"grid-cols":[{"grid-cols":[Ev]}],"col-start-end":[{col:["auto",{span:["full",yv,Ur]},Ur]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[Ev]}],"row-start-end":[{row:["auto",{span:[yv,Ur]},Ur]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ur]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ur]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...H()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...H(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...H(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ur,t]}],"min-w":[{"min-w":[Ur,t,"min","max","fit"]}],"max-w":[{"max-w":[Ur,t,"none","full","min","max","fit","prose",{screen:[_c]},_c]}],h:[{h:[Ur,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ur,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ur,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ur,t,"auto","min","max","fit"]}],"font-size":[{text:["base",_c,gc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Qb]}],"font-family":[{font:[Ev]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ur]}],"line-clamp":[{"line-clamp":["none",cp,Qb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Kl,Ur]}],"list-image":[{"list-image":["none",Ur]}],"list-style-type":[{list:["none","disc","decimal",Ur]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...w(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Kl,gc]}],"underline-offset":[{"underline-offset":["auto",Kl,Ur]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ur]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ur]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...le(),kG]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",UG]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},zG]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...w(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:w()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...w()]}],"outline-offset":[{"outline-offset":[Kl,Ur]}],"outline-w":[{outline:[Kl,gc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[Kl,gc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",_c,VG]}],"shadow-color":[{shadow:[Ev]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",_c,Ur]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[C]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ur]}],duration:[{duration:ge()}],ease:[{ease:["linear","in","out","in-out",Ur]}],delay:[{delay:ge()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ur]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[yv,Ur]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ur]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ur]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ur]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Kl,gc,Qb]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},WG=OG(GG);function Tr(...e){return WG(oU(e))}const $G=ZC("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),$n=U.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},a)=>{const o=n?cG:"button";return Be.jsx(o,{className:Tr($G({variant:t,size:r,className:e})),ref:a,...i})});$n.displayName="Button";const gi=U.forwardRef(({className:e,type:t,...r},n)=>Be.jsx("input",{type:t,className:Tr("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));gi.displayName="Input";const xs=U.forwardRef(({className:e,...t},r)=>Be.jsx("div",{ref:r,className:Tr("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));xs.displayName="Card";const YG=U.forwardRef(({className:e,...t},r)=>Be.jsx("div",{ref:r,className:Tr("flex flex-col space-y-1.5 p-6",e),...t}));YG.displayName="CardHeader";const ZG=U.forwardRef(({className:e,...t},r)=>Be.jsx("div",{ref:r,className:Tr("text-2xl font-semibold leading-none tracking-tight",e),...t}));ZG.displayName="CardTitle";const KG=U.forwardRef(({className:e,...t},r)=>Be.jsx("div",{ref:r,className:Tr("text-sm text-muted-foreground",e),...t}));KG.displayName="CardDescription";const QG=U.forwardRef(({className:e,...t},r)=>Be.jsx("div",{ref:r,className:Tr("p-6 pt-0",e),...t}));QG.displayName="CardContent";const JG=U.forwardRef(({className:e,...t},r)=>Be.jsx("div",{ref:r,className:Tr("flex items-center p-6 pt-0",e),...t}));JG.displayName="CardFooter";var eW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Yr=eW.reduce((e,t)=>{const r=Sp(`Primitive.${t}`),n=U.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Be.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function tW(e,t){e&&qp.flushSync(()=>e.dispatchEvent(t))}var rW="Label",dU=U.forwardRef((e,t)=>Be.jsx(Yr.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));dU.displayName=rW;var hU=dU;const nW=ZC("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Oi=U.forwardRef(({className:e,...t},r)=>Be.jsx(hU,{ref:r,className:Tr(nW(),e),...t}));Oi.displayName=hU.displayName;const iW=ZC("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function v2({className:e,variant:t,...r}){return Be.jsx("div",{className:Tr(iW({variant:t}),e),...r})}function aW(e,t){const r=U.createContext(t),n=a=>{const{children:o,...l}=a,c=U.useMemo(()=>l,Object.values(l));return Be.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function i(a){const o=U.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[n,i]}function Td(e,t=[]){let r=[];function n(a,o){const l=U.createContext(o),c=r.length;r=[...r,o];const f=p=>{const{scope:v,children:g,..._}=p,E=v?.[e]?.[c]||l,b=U.useMemo(()=>_,Object.values(_));return Be.jsx(E.Provider,{value:b,children:g})};f.displayName=a+"Provider";function h(p,v){const g=v?.[e]?.[c]||l,_=U.useContext(g);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[f,h]}const i=()=>{const a=r.map(o=>U.createContext(o));return function(o){const l=o?.[e]||a;return U.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return i.scopeName=e,[n,oW(i,...t)]}function oW(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(i){const a=n.reduce((o,{useScope:l,scopeName:c})=>{const f=l(i)[`__scope${c}`];return{...o,...f}},{});return U.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function Hc(e){const t=U.useRef(e);return U.useEffect(()=>{t.current=e}),U.useMemo(()=>(...r)=>t.current?.(...r),[])}var Ii=globalThis?.document?U.useLayoutEffect:()=>{},wN={exports:{}},Jb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NN;function sW(){if(NN)return Jb;NN=1;var e=cn;function t(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,a=e.useLayoutEffect,o=e.useDebugValue;function l(p,v){var g=v(),_=n({inst:{value:g,getSnapshot:v}}),E=_[0].inst,b=_[1];return a(function(){E.value=g,E.getSnapshot=v,c(E)&&b({inst:E})},[p,g,v]),i(function(){return c(E)&&b({inst:E}),p(function(){c(E)&&b({inst:E})})},[p]),o(g),g}function c(p){var v=p.getSnapshot;p=p.value;try{var g=v();return!r(p,g)}catch{return!0}}function f(p,v){return v()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return Jb.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,Jb}var MN;function lW(){return MN||(MN=1,wN.exports=sW()),wN.exports}var uW=lW();function cW(){return uW.useSyncExternalStore(fW,()=>!0,()=>!1)}function fW(){return()=>{}}var QC="Avatar",[dW]=Td(QC),[hW,pU]=dW(QC),mU=U.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[i,a]=U.useState("idle");return Be.jsx(hW,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:Be.jsx(Yr.span,{...n,ref:t})})});mU.displayName=QC;var vU="AvatarImage",gU=U.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:i=()=>{},...a}=e,o=pU(vU,r),l=pW(n,a),c=Hc(f=>{i(f),o.onImageLoadingStatusChange(f)});return Ii(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?Be.jsx(Yr.img,{...a,ref:t,src:n}):null});gU.displayName=vU;var _U="AvatarFallback",yU=U.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...i}=e,a=pU(_U,r),[o,l]=U.useState(n===void 0);return U.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&a.imageLoadingStatus!=="loaded"?Be.jsx(Yr.span,{...i,ref:t}):null});yU.displayName=_U;function IN(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function pW(e,{referrerPolicy:t,crossOrigin:r}){const n=cW(),i=U.useRef(null),a=n?(i.current||(i.current=new window.Image),i.current):null,[o,l]=U.useState(()=>IN(a,e));return Ii(()=>{l(IN(a,e))},[a,e]),Ii(()=>{const c=p=>()=>{l(p)};if(!a)return;const f=c("loaded"),h=c("error");return a.addEventListener("load",f),a.addEventListener("error",h),t&&(a.referrerPolicy=t),typeof r=="string"&&(a.crossOrigin=r),()=>{a.removeEventListener("load",f),a.removeEventListener("error",h)}},[a,r,t]),o}var EU=mU,bU=gU,xU=yU;const mW=U.forwardRef(({className:e,...t},r)=>Be.jsx(EU,{ref:r,className:Tr("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));mW.displayName=EU.displayName;const vW=U.forwardRef(({className:e,...t},r)=>Be.jsx(bU,{ref:r,className:Tr("aspect-square h-full w-full",e),...t}));vW.displayName=bU.displayName;const gW=U.forwardRef(({className:e,...t},r)=>Be.jsx(xU,{ref:r,className:Tr("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));gW.displayName=xU.displayName;function _n(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),r===!1||!n.defaultPrevented)return t?.(n)}}var _W=w5[" useId ".trim().toString()]||(()=>{}),yW=0;function pg(e){const[t,r]=U.useState(_W());return Ii(()=>{r(n=>n??String(yW++))},[e]),t?`radix-${t}`:""}var EW=w5[" useInsertionEffect ".trim().toString()]||Ii;function JC({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[i,a,o]=bW({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:i;{const h=U.useRef(e!==void 0);U.useEffect(()=>{const p=h.current;p!==l&&console.warn(`${n} is changing from ${p?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,n])}const f=U.useCallback(h=>{if(l){const p=xW(h)?h(e):h;p!==e&&o.current?.(p)}else a(h)},[l,e,a,o]);return[c,f]}function bW({defaultProp:e,onChange:t}){const[r,n]=U.useState(e),i=U.useRef(r),a=U.useRef(t);return EW(()=>{a.current=t},[t]),U.useEffect(()=>{i.current!==r&&(a.current?.(r),i.current=r)},[r,i]),[r,n,a]}function xW(e){return typeof e=="function"}function SW(e,t=globalThis?.document){const r=Hc(e);U.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var TW="DismissableLayer",g2="dismissableLayer.update",AW="dismissableLayer.pointerDownOutside",RW="dismissableLayer.focusOutside",PN,SU=U.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),e3=U.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,f=U.useContext(SU),[h,p]=U.useState(null),v=h?.ownerDocument??globalThis?.document,[,g]=U.useState({}),_=Fn(t,N=>p(N)),E=Array.from(f.layers),[b]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),S=E.indexOf(b),T=h?E.indexOf(h):-1,C=f.layersWithOutsidePointerEventsDisabled.size>0,M=T>=S,D=wW(N=>{const j=N.target,re=[...f.branches].some(Q=>Q.contains(j));!M||re||(i?.(N),o?.(N),N.defaultPrevented||l?.())},v),I=NW(N=>{const j=N.target;[...f.branches].some(re=>re.contains(j))||(a?.(N),o?.(N),N.defaultPrevented||l?.())},v);return SW(N=>{T===f.layers.size-1&&(n?.(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},v),U.useEffect(()=>{if(h)return r&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(PN=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(h)),f.layers.add(h),DN(),()=>{r&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=PN)}},[h,v,r,f]),U.useEffect(()=>()=>{h&&(f.layers.delete(h),f.layersWithOutsidePointerEventsDisabled.delete(h),DN())},[h,f]),U.useEffect(()=>{const N=()=>g({});return document.addEventListener(g2,N),()=>document.removeEventListener(g2,N)},[]),Be.jsx(Yr.div,{...c,ref:_,style:{pointerEvents:C?M?"auto":"none":void 0,...e.style},onFocusCapture:_n(e.onFocusCapture,I.onFocusCapture),onBlurCapture:_n(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:_n(e.onPointerDownCapture,D.onPointerDownCapture)})});e3.displayName=TW;var CW="DismissableLayerBranch",OW=U.forwardRef((e,t)=>{const r=U.useContext(SU),n=U.useRef(null),i=Fn(t,n);return U.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),Be.jsx(Yr.div,{...e,ref:i})});OW.displayName=CW;function wW(e,t=globalThis?.document){const r=Hc(e),n=U.useRef(!1),i=U.useRef(()=>{});return U.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){TU(AW,r,f,{discrete:!0})};const f={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function NW(e,t=globalThis?.document){const r=Hc(e),n=U.useRef(!1);return U.useEffect(()=>{const i=a=>{a.target&&!n.current&&TU(RW,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function DN(){const e=new CustomEvent(g2);document.dispatchEvent(e)}function TU(e,t,r,{discrete:n}){const i=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?tW(i,a):i.dispatchEvent(a)}var ex="focusScope.autoFocusOnMount",tx="focusScope.autoFocusOnUnmount",LN={bubbles:!1,cancelable:!0},MW="FocusScope",t3=U.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,c]=U.useState(null),f=Hc(i),h=Hc(a),p=U.useRef(null),v=Fn(t,E=>c(E)),g=U.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;U.useEffect(()=>{if(n){let E=function(C){if(g.paused||!l)return;const M=C.target;l.contains(M)?p.current=M:xc(p.current,{select:!0})},b=function(C){if(g.paused||!l)return;const M=C.relatedTarget;M!==null&&(l.contains(M)||xc(p.current,{select:!0}))},S=function(C){if(document.activeElement===document.body)for(const M of C)M.removedNodes.length>0&&xc(l)};document.addEventListener("focusin",E),document.addEventListener("focusout",b);const T=new MutationObserver(S);return l&&T.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",b),T.disconnect()}}},[n,l,g.paused]),U.useEffect(()=>{if(l){FN.add(g);const E=document.activeElement;if(!l.contains(E)){const b=new CustomEvent(ex,LN);l.addEventListener(ex,f),l.dispatchEvent(b),b.defaultPrevented||(IW(FW(AU(l)),{select:!0}),document.activeElement===E&&xc(l))}return()=>{l.removeEventListener(ex,f),setTimeout(()=>{const b=new CustomEvent(tx,LN);l.addEventListener(tx,h),l.dispatchEvent(b),b.defaultPrevented||xc(E??document.body,{select:!0}),l.removeEventListener(tx,h),FN.remove(g)},0)}}},[l,f,h,g]);const _=U.useCallback(E=>{if(!r&&!n||g.paused)return;const b=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,S=document.activeElement;if(b&&S){const T=E.currentTarget,[C,M]=PW(T);C&&M?!E.shiftKey&&S===M?(E.preventDefault(),r&&xc(C,{select:!0})):E.shiftKey&&S===C&&(E.preventDefault(),r&&xc(M,{select:!0})):S===T&&E.preventDefault()}},[r,n,g.paused]);return Be.jsx(Yr.div,{tabIndex:-1,...o,ref:v,onKeyDown:_})});t3.displayName=MW;function IW(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(xc(n,{select:t}),document.activeElement!==r)return}function PW(e){const t=AU(e),r=BN(t,e),n=BN(t.reverse(),e);return[r,n]}function AU(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function BN(e,t){for(const r of e)if(!DW(r,{upTo:t}))return r}function DW(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function LW(e){return e instanceof HTMLInputElement&&"select"in e}function xc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&LW(e)&&t&&e.select()}}var FN=BW();function BW(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=UN(e,t),e.unshift(t)},remove(t){e=UN(e,t),e[0]?.resume()}}}function UN(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function FW(e){return e.filter(t=>t.tagName!=="A")}var UW="Portal",r3=U.forwardRef((e,t)=>{const{container:r,...n}=e,[i,a]=U.useState(!1);Ii(()=>a(!0),[]);const o=r||i&&globalThis?.document?.body;return o?jX.createPortal(Be.jsx(Yr.div,{...n,ref:t}),o):null});r3.displayName=UW;function kW(e,t){return U.useReducer((r,n)=>t[r][n]??r,e)}var Wg=e=>{const{present:t,children:r}=e,n=jW(t),i=typeof r=="function"?r({present:n.isPresent}):U.Children.only(r),a=Fn(n.ref,zW(i));return typeof r=="function"||n.isPresent?U.cloneElement(i,{ref:a}):null};Wg.displayName="Presence";function jW(e){const[t,r]=U.useState(),n=U.useRef(null),i=U.useRef(e),a=U.useRef("none"),o=e?"mounted":"unmounted",[l,c]=kW(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return U.useEffect(()=>{const f=H_(n.current);a.current=l==="mounted"?f:"none"},[l]),Ii(()=>{const f=n.current,h=i.current;if(h!==e){const p=a.current,v=H_(f);e?c("MOUNT"):v==="none"||f?.display==="none"?c("UNMOUNT"):c(h&&p!==v?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),Ii(()=>{if(t){let f;const h=t.ownerDocument.defaultView??window,p=g=>{const _=H_(n.current).includes(CSS.escape(g.animationName));if(g.target===t&&_&&(c("ANIMATION_END"),!i.current)){const E=t.style.animationFillMode;t.style.animationFillMode="forwards",f=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=E)})}},v=g=>{g.target===t&&(a.current=H_(n.current))};return t.addEventListener("animationstart",v),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{h.clearTimeout(f),t.removeEventListener("animationstart",v),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:U.useCallback(f=>{n.current=f?getComputedStyle(f):null,r(f)},[])}}function H_(e){return e?.animationName||"none"}function zW(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var rx=0;function RU(){U.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??kN()),document.body.insertAdjacentElement("beforeend",e[1]??kN()),rx++,()=>{rx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),rx--}},[])}function kN(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var nl=function(){return nl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},nl.apply(this,arguments)};function CU(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function VW(e,t,r){for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var yy="right-scroll-bar-position",Ey="width-before-scroll-bar",HW="with-scroll-bars-hidden",XW="--removed-body-scroll-bar-size";function nx(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function qW(e,t){var r=U.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=t,r.facade}var GW=typeof window<"u"?U.useLayoutEffect:U.useEffect,jN=new WeakMap;function WW(e,t){var r=qW(null,function(n){return e.forEach(function(i){return nx(i,n)})});return GW(function(){var n=jN.get(r);if(n){var i=new Set(n),a=new Set(e),o=r.current;i.forEach(function(l){a.has(l)||nx(l,null)}),a.forEach(function(l){i.has(l)||nx(l,o)})}jN.set(r,e)},[e]),r}function $W(e){return e}function YW(e,t){t===void 0&&(t=$W);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var o=t(a,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(a),o=r}var c=function(){var h=o;o=[],h.forEach(a)},f=function(){return Promise.resolve().then(c)};f(),r={push:function(h){o.push(h),f()},filter:function(h){return o=o.filter(h),r}}}};return i}function ZW(e){e===void 0&&(e={});var t=YW(null);return t.options=nl({async:!0,ssr:!1},e),t}var OU=function(e){var t=e.sideCar,r=CU(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return U.createElement(n,nl({},r))};OU.isSideCarExport=!0;function KW(e,t){return e.useMedium(t),OU}var wU=ZW(),ix=function(){},J1=U.forwardRef(function(e,t){var r=U.useRef(null),n=U.useState({onScrollCapture:ix,onWheelCapture:ix,onTouchMoveCapture:ix}),i=n[0],a=n[1],o=e.forwardProps,l=e.children,c=e.className,f=e.removeScrollBar,h=e.enabled,p=e.shards,v=e.sideCar,g=e.noRelative,_=e.noIsolation,E=e.inert,b=e.allowPinchZoom,S=e.as,T=S===void 0?"div":S,C=e.gapMode,M=CU(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=v,I=WW([r,t]),N=nl(nl({},M),i);return U.createElement(U.Fragment,null,h&&U.createElement(D,{sideCar:wU,removeScrollBar:f,shards:p,noRelative:g,noIsolation:_,inert:E,setCallbacks:a,allowPinchZoom:!!b,lockRef:r,gapMode:C}),o?U.cloneElement(U.Children.only(l),nl(nl({},N),{ref:I})):U.createElement(T,nl({},N,{className:c,ref:I}),l))});J1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};J1.classNames={fullWidth:Ey,zeroRight:yy};var QW=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function JW(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=QW();return t&&e.setAttribute("nonce",t),e}function e$(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function t$(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var r$=function(){var e=0,t=null;return{add:function(r){e==0&&(t=JW())&&(e$(t,r),t$(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},n$=function(){var e=r$();return function(t,r){U.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},NU=function(){var e=n$(),t=function(r){var n=r.styles,i=r.dynamic;return e(n,i),null};return t},i$={left:0,top:0,right:0,gap:0},ax=function(e){return parseInt(e||"",10)||0},a$=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[ax(r),ax(n),ax(i)]},o$=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return i$;var t=a$(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},s$=NU(),fp="data-scroll-locked",l$=function(e,t,r,n){var i=e.left,a=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(HW,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(fp,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(yy,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Ey,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(yy," .").concat(yy,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Ey," .").concat(Ey,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(fp,`] {
    `).concat(XW,": ").concat(l,`px;
  }
`)},zN=function(){var e=parseInt(document.body.getAttribute(fp)||"0",10);return isFinite(e)?e:0},u$=function(){U.useEffect(function(){return document.body.setAttribute(fp,(zN()+1).toString()),function(){var e=zN()-1;e<=0?document.body.removeAttribute(fp):document.body.setAttribute(fp,e.toString())}},[])},c$=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=n===void 0?"margin":n;u$();var a=U.useMemo(function(){return o$(i)},[i]);return U.createElement(s$,{styles:l$(a,!t,i,r?"":"!important")})},_2=!1;if(typeof window<"u")try{var X_=Object.defineProperty({},"passive",{get:function(){return _2=!0,!0}});window.addEventListener("test",X_,X_),window.removeEventListener("test",X_,X_)}catch{_2=!1}var kh=_2?{passive:!1}:!1,f$=function(e){return e.tagName==="TEXTAREA"},MU=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!f$(e)&&r[t]==="visible")},d$=function(e){return MU(e,"overflowY")},h$=function(e){return MU(e,"overflowX")},VN=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=IU(e,n);if(i){var a=PU(e,n),o=a[1],l=a[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},p$=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},m$=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},IU=function(e,t){return e==="v"?d$(t):h$(t)},PU=function(e,t){return e==="v"?p$(t):m$(t)},v$=function(e,t){return e==="h"&&t==="rtl"?-1:1},g$=function(e,t,r,n,i){var a=v$(e,window.getComputedStyle(t).direction),o=a*n,l=r.target,c=t.contains(l),f=!1,h=o>0,p=0,v=0;do{if(!l)break;var g=PU(e,l),_=g[0],E=g[1],b=g[2],S=E-b-a*_;(_||S)&&IU(e,l)&&(p+=S,v+=_);var T=l.parentNode;l=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(h&&Math.abs(p)<1||!h&&Math.abs(v)<1)&&(f=!0),f},q_=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},HN=function(e){return[e.deltaX,e.deltaY]},XN=function(e){return e&&"current"in e?e.current:e},_$=function(e,t){return e[0]===t[0]&&e[1]===t[1]},y$=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},E$=0,jh=[];function b$(e){var t=U.useRef([]),r=U.useRef([0,0]),n=U.useRef(),i=U.useState(E$++)[0],a=U.useState(NU)[0],o=U.useRef(e);U.useEffect(function(){o.current=e},[e]),U.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var E=VW([e.lockRef.current],(e.shards||[]).map(XN)).filter(Boolean);return E.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),E.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=U.useCallback(function(E,b){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!o.current.allowPinchZoom;var S=q_(E),T=r.current,C="deltaX"in E?E.deltaX:T[0]-S[0],M="deltaY"in E?E.deltaY:T[1]-S[1],D,I=E.target,N=Math.abs(C)>Math.abs(M)?"h":"v";if("touches"in E&&N==="h"&&I.type==="range")return!1;var j=VN(N,I);if(!j)return!0;if(j?D=N:(D=N==="v"?"h":"v",j=VN(N,I)),!j)return!1;if(!n.current&&"changedTouches"in E&&(C||M)&&(n.current=D),!D)return!0;var re=n.current||D;return g$(re,b,E,re==="h"?C:M)},[]),c=U.useCallback(function(E){var b=E;if(!(!jh.length||jh[jh.length-1]!==a)){var S="deltaY"in b?HN(b):q_(b),T=t.current.filter(function(D){return D.name===b.type&&(D.target===b.target||b.target===D.shadowParent)&&_$(D.delta,S)})[0];if(T&&T.should){b.cancelable&&b.preventDefault();return}if(!T){var C=(o.current.shards||[]).map(XN).filter(Boolean).filter(function(D){return D.contains(b.target)}),M=C.length>0?l(b,C[0]):!o.current.noIsolation;M&&b.cancelable&&b.preventDefault()}}},[]),f=U.useCallback(function(E,b,S,T){var C={name:E,delta:b,target:S,should:T,shadowParent:x$(S)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(M){return M!==C})},1)},[]),h=U.useCallback(function(E){r.current=q_(E),n.current=void 0},[]),p=U.useCallback(function(E){f(E.type,HN(E),E.target,l(E,e.lockRef.current))},[]),v=U.useCallback(function(E){f(E.type,q_(E),E.target,l(E,e.lockRef.current))},[]);U.useEffect(function(){return jh.push(a),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:v}),document.addEventListener("wheel",c,kh),document.addEventListener("touchmove",c,kh),document.addEventListener("touchstart",h,kh),function(){jh=jh.filter(function(E){return E!==a}),document.removeEventListener("wheel",c,kh),document.removeEventListener("touchmove",c,kh),document.removeEventListener("touchstart",h,kh)}},[]);var g=e.removeScrollBar,_=e.inert;return U.createElement(U.Fragment,null,_?U.createElement(a,{styles:y$(i)}):null,g?U.createElement(c$,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function x$(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const S$=KW(wU,b$);var n3=U.forwardRef(function(e,t){return U.createElement(J1,nl({},e,{ref:t,sideCar:S$}))});n3.classNames=J1.classNames;var T$=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},zh=new WeakMap,G_=new WeakMap,W_={},ox=0,DU=function(e){return e&&(e.host||DU(e.parentNode))},A$=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=DU(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},R$=function(e,t,r,n){var i=A$(t,Array.isArray(e)?e:[e]);W_[r]||(W_[r]=new WeakMap);var a=W_[r],o=[],l=new Set,c=new Set(i),f=function(p){!p||l.has(p)||(l.add(p),f(p.parentNode))};i.forEach(f);var h=function(p){!p||c.has(p)||Array.prototype.forEach.call(p.children,function(v){if(l.has(v))h(v);else try{var g=v.getAttribute(n),_=g!==null&&g!=="false",E=(zh.get(v)||0)+1,b=(a.get(v)||0)+1;zh.set(v,E),a.set(v,b),o.push(v),E===1&&_&&G_.set(v,!0),b===1&&v.setAttribute(r,"true"),_||v.setAttribute(n,"true")}catch(S){console.error("aria-hidden: cannot operate on ",v,S)}})};return h(t),l.clear(),ox++,function(){o.forEach(function(p){var v=zh.get(p)-1,g=a.get(p)-1;zh.set(p,v),a.set(p,g),v||(G_.has(p)||p.removeAttribute(n),G_.delete(p)),g||p.removeAttribute(r)}),ox--,ox||(zh=new WeakMap,zh=new WeakMap,G_=new WeakMap,W_={})}},LU=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=T$(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),R$(n,i,r,"aria-hidden")):function(){return null}},eE="Dialog",[BU]=Td(eE),[C$,Rs]=BU(eE),FU=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=U.useRef(null),c=U.useRef(null),[f,h]=JC({prop:n,defaultProp:i??!1,onChange:a,caller:eE});return Be.jsx(C$,{scope:t,triggerRef:l,contentRef:c,contentId:pg(),titleId:pg(),descriptionId:pg(),open:f,onOpenChange:h,onOpenToggle:U.useCallback(()=>h(p=>!p),[h]),modal:o,children:r})};FU.displayName=eE;var UU="DialogTrigger",O$=U.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Rs(UU,r),a=Fn(t,i.triggerRef);return Be.jsx(Yr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":o3(i.open),...n,ref:a,onClick:_n(e.onClick,i.onOpenToggle)})});O$.displayName=UU;var i3="DialogPortal",[w$,kU]=BU(i3,{forceMount:void 0}),jU=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:i}=e,a=Rs(i3,t);return Be.jsx(w$,{scope:t,forceMount:r,children:U.Children.map(n,o=>Be.jsx(Wg,{present:r||a.open,children:Be.jsx(r3,{asChild:!0,container:i,children:o})}))})};jU.displayName=i3;var Yy="DialogOverlay",zU=U.forwardRef((e,t)=>{const r=kU(Yy,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,a=Rs(Yy,e.__scopeDialog);return a.modal?Be.jsx(Wg,{present:n||a.open,children:Be.jsx(M$,{...i,ref:t})}):null});zU.displayName=Yy;var N$=Sp("DialogOverlay.RemoveScroll"),M$=U.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Rs(Yy,r);return Be.jsx(n3,{as:N$,allowPinchZoom:!0,shards:[i.contentRef],children:Be.jsx(Yr.div,{"data-state":o3(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),cd="DialogContent",VU=U.forwardRef((e,t)=>{const r=kU(cd,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,a=Rs(cd,e.__scopeDialog);return Be.jsx(Wg,{present:n||a.open,children:a.modal?Be.jsx(I$,{...i,ref:t}):Be.jsx(P$,{...i,ref:t})})});VU.displayName=cd;var I$=U.forwardRef((e,t)=>{const r=Rs(cd,e.__scopeDialog),n=U.useRef(null),i=Fn(t,r.contentRef,n);return U.useEffect(()=>{const a=n.current;if(a)return LU(a)},[]),Be.jsx(HU,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_n(e.onCloseAutoFocus,a=>{a.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:_n(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:_n(e.onFocusOutside,a=>a.preventDefault())})}),P$=U.forwardRef((e,t)=>{const r=Rs(cd,e.__scopeDialog),n=U.useRef(!1),i=U.useRef(!1);return Be.jsx(HU,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(n.current||r.triggerRef.current?.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;r.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),HU=U.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,l=Rs(cd,r),c=U.useRef(null),f=Fn(t,c);return RU(),Be.jsxs(Be.Fragment,{children:[Be.jsx(t3,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:Be.jsx(e3,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":o3(l.open),...o,ref:f,onDismiss:()=>l.onOpenChange(!1)})}),Be.jsxs(Be.Fragment,{children:[Be.jsx(D$,{titleId:l.titleId}),Be.jsx(B$,{contentRef:c,descriptionId:l.descriptionId})]})]})}),a3="DialogTitle",XU=U.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Rs(a3,r);return Be.jsx(Yr.h2,{id:i.titleId,...n,ref:t})});XU.displayName=a3;var qU="DialogDescription",GU=U.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Rs(qU,r);return Be.jsx(Yr.p,{id:i.descriptionId,...n,ref:t})});GU.displayName=qU;var WU="DialogClose",$U=U.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Rs(WU,r);return Be.jsx(Yr.button,{type:"button",...n,ref:t,onClick:_n(e.onClick,()=>i.onOpenChange(!1))})});$U.displayName=WU;function o3(e){return e?"open":"closed"}var YU="DialogTitleWarning",[UEe,ZU]=aW(YU,{contentName:cd,titleName:a3,docsSlug:"dialog"}),D$=({titleId:e})=>{const t=ZU(YU),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return U.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},L$="DialogDescriptionWarning",B$=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ZU(L$).contentName}}.`;return U.useEffect(()=>{const n=e.current?.getAttribute("aria-describedby");t&&n&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},F$=FU,U$=jU,KU=zU,QU=VU,JU=XU,e8=GU,k$=$U;/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),z$=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),qN=e=>{const t=z$(e);return t.charAt(0).toUpperCase()+t.slice(1)},t8=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),V$=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var H$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$=U.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:o,...l},c)=>U.createElement("svg",{ref:c,...H$,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:t8("lucide",i),...!a&&!V$(l)&&{"aria-hidden":"true"},...l},[...o.map(([f,h])=>U.createElement(f,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=(e,t)=>{const r=U.forwardRef(({className:n,...i},a)=>U.createElement(X$,{ref:a,iconNode:t,className:t8(`lucide-${j$(qN(e))}`,`lucide-${e}`,n),...i}));return r.displayName=qN(e),r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],r8=tE("check",q$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],n8=tE("chevron-down",G$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],$$=tE("chevron-up",W$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Z$=tE("x",Y$),i8=F$,K$=U$,a8=U.forwardRef(({className:e,...t},r)=>Be.jsx(KU,{ref:r,className:Tr("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));a8.displayName=KU.displayName;const s3=U.forwardRef(({className:e,children:t,...r},n)=>Be.jsxs(K$,{children:[Be.jsx(a8,{}),Be.jsxs(QU,{ref:n,className:Tr("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,Be.jsxs(k$,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[Be.jsx(Z$,{className:"h-4 w-4"}),Be.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));s3.displayName=QU.displayName;const l3=({className:e,...t})=>Be.jsx("div",{className:Tr("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});l3.displayName="DialogHeader";const u3=U.forwardRef(({className:e,...t},r)=>Be.jsx(JU,{ref:r,className:Tr("text-lg font-semibold leading-none tracking-tight",e),...t}));u3.displayName=JU.displayName;const Q$=U.forwardRef(({className:e,...t},r)=>Be.jsx(e8,{ref:r,className:Tr("text-sm text-muted-foreground",e),...t}));Q$.displayName=e8.displayName;function GN(e,[t,r]){return Math.min(r,Math.max(t,e))}function J$(e){const t=e+"CollectionProvider",[r,n]=Td(t),[i,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=E=>{const{scope:b,children:S}=E,T=cn.useRef(null),C=cn.useRef(new Map).current;return Be.jsx(i,{scope:b,itemMap:C,collectionRef:T,children:S})};o.displayName=t;const l=e+"CollectionSlot",c=Sp(l),f=cn.forwardRef((E,b)=>{const{scope:S,children:T}=E,C=a(l,S),M=Fn(b,C.collectionRef);return Be.jsx(c,{ref:M,children:T})});f.displayName=l;const h=e+"CollectionItemSlot",p="data-radix-collection-item",v=Sp(h),g=cn.forwardRef((E,b)=>{const{scope:S,children:T,...C}=E,M=cn.useRef(null),D=Fn(b,M),I=a(h,S);return cn.useEffect(()=>(I.itemMap.set(M,{ref:M,...C}),()=>void I.itemMap.delete(M))),Be.jsx(v,{[p]:"",ref:D,children:T})});g.displayName=h;function _(E){const b=a(e+"CollectionConsumer",E);return cn.useCallback(()=>{const S=b.collectionRef.current;if(!S)return[];const T=Array.from(S.querySelectorAll(`[${p}]`));return Array.from(b.itemMap.values()).sort((C,M)=>T.indexOf(C.ref.current)-T.indexOf(M.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:f,ItemSlot:g},_,n]}U.createContext(void 0);const eY=["top","right","bottom","left"],Xc=Math.min,lo=Math.max,Zy=Math.round,$_=Math.floor,ul=e=>({x:e,y:e}),tY={left:"right",right:"left",bottom:"top",top:"bottom"},rY={start:"end",end:"start"};function y2(e,t,r){return lo(e,Xc(t,r))}function hu(e,t){return typeof e=="function"?e(t):e}function pu(e){return e.split("-")[0]}function $p(e){return e.split("-")[1]}function c3(e){return e==="x"?"y":"x"}function f3(e){return e==="y"?"height":"width"}const nY=new Set(["top","bottom"]);function sl(e){return nY.has(pu(e))?"y":"x"}function d3(e){return c3(sl(e))}function iY(e,t,r){r===void 0&&(r=!1);const n=$p(e),i=d3(e),a=f3(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=Ky(o)),[o,Ky(o)]}function aY(e){const t=Ky(e);return[E2(e),t,E2(t)]}function E2(e){return e.replace(/start|end/g,t=>rY[t])}const WN=["left","right"],$N=["right","left"],oY=["top","bottom"],sY=["bottom","top"];function lY(e,t,r){switch(e){case"top":case"bottom":return r?t?$N:WN:t?WN:$N;case"left":case"right":return t?oY:sY;default:return[]}}function uY(e,t,r,n){const i=$p(e);let a=lY(pu(e),r==="start",n);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(E2)))),a}function Ky(e){return e.replace(/left|right|bottom|top/g,t=>tY[t])}function cY(e){return{top:0,right:0,bottom:0,left:0,...e}}function o8(e){return typeof e!="number"?cY(e):{top:e,right:e,bottom:e,left:e}}function Qy(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function YN(e,t,r){let{reference:n,floating:i}=e;const a=sl(t),o=d3(t),l=f3(o),c=pu(t),f=a==="y",h=n.x+n.width/2-i.width/2,p=n.y+n.height/2-i.height/2,v=n[l]/2-i[l]/2;let g;switch(c){case"top":g={x:h,y:n.y-i.height};break;case"bottom":g={x:h,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:p};break;case"left":g={x:n.x-i.width,y:p};break;default:g={x:n.x,y:n.y}}switch($p(t)){case"start":g[o]-=v*(r&&f?-1:1);break;case"end":g[o]+=v*(r&&f?-1:1);break}return g}const fY=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:o}=r,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let f=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:p}=YN(f,n,c),v=n,g={},_=0;for(let E=0;E<l.length;E++){const{name:b,fn:S}=l[E],{x:T,y:C,data:M,reset:D}=await S({x:h,y:p,initialPlacement:n,placement:v,strategy:i,middlewareData:g,rects:f,platform:o,elements:{reference:e,floating:t}});h=T??h,p=C??p,g={...g,[b]:{...g[b],...M}},D&&_<=50&&(_++,typeof D=="object"&&(D.placement&&(v=D.placement),D.rects&&(f=D.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):D.rects),{x:h,y:p}=YN(f,v,c)),E=-1)}return{x:h,y:p,placement:v,strategy:i,middlewareData:g}};async function Tg(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:f="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:v=!1,padding:g=0}=hu(t,e),_=o8(g),E=l[v?p==="floating"?"reference":"floating":p],b=Qy(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(E)))==null||r?E:E.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:f,rootBoundary:h,strategy:c})),S=p==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),C=await(a.isElement==null?void 0:a.isElement(T))?await(a.getScale==null?void 0:a.getScale(T))||{x:1,y:1}:{x:1,y:1},M=Qy(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:S,offsetParent:T,strategy:c}):S);return{top:(b.top-M.top+_.top)/C.y,bottom:(M.bottom-b.bottom+_.bottom)/C.y,left:(b.left-M.left+_.left)/C.x,right:(M.right-b.right+_.right)/C.x}}const dY=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:f,padding:h=0}=hu(e,t)||{};if(f==null)return{};const p=o8(h),v={x:r,y:n},g=d3(i),_=f3(g),E=await o.getDimensions(f),b=g==="y",S=b?"top":"left",T=b?"bottom":"right",C=b?"clientHeight":"clientWidth",M=a.reference[_]+a.reference[g]-v[g]-a.floating[_],D=v[g]-a.reference[g],I=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let N=I?I[C]:0;(!N||!await(o.isElement==null?void 0:o.isElement(I)))&&(N=l.floating[C]||a.floating[_]);const j=M/2-D/2,re=N/2-E[_]/2-1,Q=Xc(p[S],re),X=Xc(p[T],re),R=Q,P=N-E[_]-X,V=N/2-E[_]/2+j,le=y2(R,V,P),w=!c.arrow&&$p(i)!=null&&V!==le&&a.reference[_]/2-(V<R?Q:X)-E[_]/2<0,z=w?V<R?V-R:V-P:0;return{[g]:v[g]+z,data:{[g]:le,centerOffset:V-le-z,...w&&{alignmentOffset:z}},reset:w}}}),hY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:f}=t,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:E=!0,...b}=hu(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const S=pu(i),T=sl(l),C=pu(l)===l,M=await(c.isRTL==null?void 0:c.isRTL(f.floating)),D=v||(C||!E?[Ky(l)]:aY(l)),I=_!=="none";!v&&I&&D.push(...uY(l,E,_,M));const N=[l,...D],j=await Tg(t,b),re=[];let Q=((n=a.flip)==null?void 0:n.overflows)||[];if(h&&re.push(j[S]),p){const V=iY(i,o,M);re.push(j[V[0]],j[V[1]])}if(Q=[...Q,{placement:i,overflows:re}],!re.every(V=>V<=0)){var X,R;const V=(((X=a.flip)==null?void 0:X.index)||0)+1,le=N[V];if(le&&(!(p==="alignment"&&T!==sl(le))||Q.every(z=>sl(z.placement)===T?z.overflows[0]>0:!0)))return{data:{index:V,overflows:Q},reset:{placement:le}};let w=(R=Q.filter(z=>z.overflows[0]<=0).sort((z,H)=>z.overflows[1]-H.overflows[1])[0])==null?void 0:R.placement;if(!w)switch(g){case"bestFit":{var P;const z=(P=Q.filter(H=>{if(I){const ee=sl(H.placement);return ee===T||ee==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(ee=>ee>0).reduce((ee,oe)=>ee+oe,0)]).sort((H,ee)=>H[1]-ee[1])[0])==null?void 0:P[0];z&&(w=z);break}case"initialPlacement":w=l;break}if(i!==w)return{reset:{placement:w}}}return{}}}};function ZN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function KN(e){return eY.some(t=>e[t]>=0)}const pY=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...i}=hu(e,t);switch(n){case"referenceHidden":{const a=await Tg(t,{...i,elementContext:"reference"}),o=ZN(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:KN(o)}}}case"escaped":{const a=await Tg(t,{...i,altBoundary:!0}),o=ZN(a,r.floating);return{data:{escapedOffsets:o,escaped:KN(o)}}}default:return{}}}}},s8=new Set(["left","top"]);async function mY(e,t){const{placement:r,platform:n,elements:i}=e,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=pu(r),l=$p(r),c=sl(r)==="y",f=s8.has(o)?-1:1,h=a&&c?-1:1,p=hu(t,e);let{mainAxis:v,crossAxis:g,alignmentAxis:_}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof _=="number"&&(g=l==="end"?_*-1:_),c?{x:g*h,y:v*f}:{x:v*f,y:g*h}}const vY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:a,placement:o,middlewareData:l}=t,c=await mY(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},gY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:S,y:T}=b;return{x:S,y:T}}},...c}=hu(e,t),f={x:r,y:n},h=await Tg(t,c),p=sl(pu(i)),v=c3(p);let g=f[v],_=f[p];if(a){const b=v==="y"?"top":"left",S=v==="y"?"bottom":"right",T=g+h[b],C=g-h[S];g=y2(T,g,C)}if(o){const b=p==="y"?"top":"left",S=p==="y"?"bottom":"right",T=_+h[b],C=_-h[S];_=y2(T,_,C)}const E=l.fn({...t,[v]:g,[p]:_});return{...E,data:{x:E.x-r,y:E.y-n,enabled:{[v]:a,[p]:o}}}}}},_Y=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:f=!0}=hu(e,t),h={x:r,y:n},p=sl(i),v=c3(p);let g=h[v],_=h[p];const E=hu(l,t),b=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(c){const C=v==="y"?"height":"width",M=a.reference[v]-a.floating[C]+b.mainAxis,D=a.reference[v]+a.reference[C]-b.mainAxis;g<M?g=M:g>D&&(g=D)}if(f){var S,T;const C=v==="y"?"width":"height",M=s8.has(pu(i)),D=a.reference[p]-a.floating[C]+(M&&((S=o.offset)==null?void 0:S[p])||0)+(M?0:b.crossAxis),I=a.reference[p]+a.reference[C]+(M?0:((T=o.offset)==null?void 0:T[p])||0)-(M?b.crossAxis:0);_<D?_=D:_>I&&(_=I)}return{[v]:g,[p]:_}}}},yY=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:i,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...f}=hu(e,t),h=await Tg(t,f),p=pu(i),v=$p(i),g=sl(i)==="y",{width:_,height:E}=a.floating;let b,S;p==="top"||p==="bottom"?(b=p,S=v===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(S=p,b=v==="end"?"top":"bottom");const T=E-h.top-h.bottom,C=_-h.left-h.right,M=Xc(E-h[b],T),D=Xc(_-h[S],C),I=!t.middlewareData.shift;let N=M,j=D;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(j=C),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(N=T),I&&!v){const Q=lo(h.left,0),X=lo(h.right,0),R=lo(h.top,0),P=lo(h.bottom,0);g?j=_-2*(Q!==0||X!==0?Q+X:lo(h.left,h.right)):N=E-2*(R!==0||P!==0?R+P:lo(h.top,h.bottom))}await c({...t,availableWidth:j,availableHeight:N});const re=await o.getDimensions(l.floating);return _!==re.width||E!==re.height?{reset:{rects:!0}}:{}}}};function rE(){return typeof window<"u"}function Yp(e){return l8(e)?(e.nodeName||"").toLowerCase():"#document"}function ho(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function vl(e){var t;return(t=(l8(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function l8(e){return rE()?e instanceof Node||e instanceof ho(e).Node:!1}function Ts(e){return rE()?e instanceof Element||e instanceof ho(e).Element:!1}function pl(e){return rE()?e instanceof HTMLElement||e instanceof ho(e).HTMLElement:!1}function QN(e){return!rE()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ho(e).ShadowRoot}const EY=new Set(["inline","contents"]);function $g(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=As(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!EY.has(i)}const bY=new Set(["table","td","th"]);function xY(e){return bY.has(Yp(e))}const SY=[":popover-open",":modal"];function nE(e){return SY.some(t=>{try{return e.matches(t)}catch{return!1}})}const TY=["transform","translate","scale","rotate","perspective"],AY=["transform","translate","scale","rotate","perspective","filter"],RY=["paint","layout","strict","content"];function h3(e){const t=p3(),r=Ts(e)?As(e):e;return TY.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||AY.some(n=>(r.willChange||"").includes(n))||RY.some(n=>(r.contain||"").includes(n))}function CY(e){let t=qc(e);for(;pl(t)&&!Tp(t);){if(h3(t))return t;if(nE(t))return null;t=qc(t)}return null}function p3(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const OY=new Set(["html","body","#document"]);function Tp(e){return OY.has(Yp(e))}function As(e){return ho(e).getComputedStyle(e)}function iE(e){return Ts(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function qc(e){if(Yp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||QN(e)&&e.host||vl(e);return QN(t)?t.host:t}function u8(e){const t=qc(e);return Tp(t)?e.ownerDocument?e.ownerDocument.body:e.body:pl(t)&&$g(t)?t:u8(t)}function Ag(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=u8(e),a=i===((n=e.ownerDocument)==null?void 0:n.body),o=ho(i);if(a){const l=b2(o);return t.concat(o,o.visualViewport||[],$g(i)?i:[],l&&r?Ag(l):[])}return t.concat(i,Ag(i,[],r))}function b2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function c8(e){const t=As(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=pl(e),a=i?e.offsetWidth:r,o=i?e.offsetHeight:n,l=Zy(r)!==a||Zy(n)!==o;return l&&(r=a,n=o),{width:r,height:n,$:l}}function m3(e){return Ts(e)?e:e.contextElement}function dp(e){const t=m3(e);if(!pl(t))return ul(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:a}=c8(t);let o=(a?Zy(r.width):r.width)/n,l=(a?Zy(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const wY=ul(0);function f8(e){const t=ho(e);return!p3()||!t.visualViewport?wY:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function NY(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ho(e)?!1:t}function fd(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),a=m3(e);let o=ul(1);t&&(n?Ts(n)&&(o=dp(n)):o=dp(e));const l=NY(a,r,n)?f8(a):ul(0);let c=(i.left+l.x)/o.x,f=(i.top+l.y)/o.y,h=i.width/o.x,p=i.height/o.y;if(a){const v=ho(a),g=n&&Ts(n)?ho(n):n;let _=v,E=b2(_);for(;E&&n&&g!==_;){const b=dp(E),S=E.getBoundingClientRect(),T=As(E),C=S.left+(E.clientLeft+parseFloat(T.paddingLeft))*b.x,M=S.top+(E.clientTop+parseFloat(T.paddingTop))*b.y;c*=b.x,f*=b.y,h*=b.x,p*=b.y,c+=C,f+=M,_=ho(E),E=b2(_)}}return Qy({width:h,height:p,x:c,y:f})}function aE(e,t){const r=iE(e).scrollLeft;return t?t.left+r:fd(vl(e)).left+r}function d8(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-aE(e,r),i=r.top+t.scrollTop;return{x:n,y:i}}function MY(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const a=i==="fixed",o=vl(n),l=t?nE(t.floating):!1;if(n===o||l&&a)return r;let c={scrollLeft:0,scrollTop:0},f=ul(1);const h=ul(0),p=pl(n);if((p||!p&&!a)&&((Yp(n)!=="body"||$g(o))&&(c=iE(n)),pl(n))){const g=fd(n);f=dp(n),h.x=g.x+n.clientLeft,h.y=g.y+n.clientTop}const v=o&&!p&&!a?d8(o,c):ul(0);return{width:r.width*f.x,height:r.height*f.y,x:r.x*f.x-c.scrollLeft*f.x+h.x+v.x,y:r.y*f.y-c.scrollTop*f.y+h.y+v.y}}function IY(e){return Array.from(e.getClientRects())}function PY(e){const t=vl(e),r=iE(e),n=e.ownerDocument.body,i=lo(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=lo(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+aE(e);const l=-r.scrollTop;return As(n).direction==="rtl"&&(o+=lo(t.clientWidth,n.clientWidth)-i),{width:i,height:a,x:o,y:l}}const JN=25;function DY(e,t){const r=ho(e),n=vl(e),i=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const h=p3();(!h||h&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}const f=aE(n);if(f<=0){const h=n.ownerDocument,p=h.body,v=getComputedStyle(p),g=h.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,_=Math.abs(n.clientWidth-p.clientWidth-g);_<=JN&&(a-=_)}else f<=JN&&(a+=f);return{width:a,height:o,x:l,y:c}}const LY=new Set(["absolute","fixed"]);function BY(e,t){const r=fd(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,a=pl(e)?dp(e):ul(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=i*a.x,f=n*a.y;return{width:o,height:l,x:c,y:f}}function eM(e,t,r){let n;if(t==="viewport")n=DY(e,r);else if(t==="document")n=PY(vl(e));else if(Ts(t))n=BY(t,r);else{const i=f8(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Qy(n)}function h8(e,t){const r=qc(e);return r===t||!Ts(r)||Tp(r)?!1:As(r).position==="fixed"||h8(r,t)}function FY(e,t){const r=t.get(e);if(r)return r;let n=Ag(e,[],!1).filter(l=>Ts(l)&&Yp(l)!=="body"),i=null;const a=As(e).position==="fixed";let o=a?qc(e):e;for(;Ts(o)&&!Tp(o);){const l=As(o),c=h3(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&i&&LY.has(i.position)||$g(o)&&!c&&h8(e,o))?n=n.filter(f=>f!==o):i=l,o=qc(o)}return t.set(e,n),n}function UY(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const a=[...r==="clippingAncestors"?nE(t)?[]:FY(t,this._c):[].concat(r),n],o=a[0],l=a.reduce((c,f)=>{const h=eM(t,f,i);return c.top=lo(h.top,c.top),c.right=Xc(h.right,c.right),c.bottom=Xc(h.bottom,c.bottom),c.left=lo(h.left,c.left),c},eM(t,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function kY(e){const{width:t,height:r}=c8(e);return{width:t,height:r}}function jY(e,t,r){const n=pl(t),i=vl(t),a=r==="fixed",o=fd(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=ul(0);function f(){c.x=aE(i)}if(n||!n&&!a)if((Yp(t)!=="body"||$g(i))&&(l=iE(t)),n){const g=fd(t,!0,a,t);c.x=g.x+t.clientLeft,c.y=g.y+t.clientTop}else i&&f();a&&!n&&i&&f();const h=i&&!n&&!a?d8(i,l):ul(0),p=o.left+l.scrollLeft-c.x-h.x,v=o.top+l.scrollTop-c.y-h.y;return{x:p,y:v,width:o.width,height:o.height}}function sx(e){return As(e).position==="static"}function tM(e,t){if(!pl(e)||As(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return vl(e)===r&&(r=r.ownerDocument.body),r}function p8(e,t){const r=ho(e);if(nE(e))return r;if(!pl(e)){let i=qc(e);for(;i&&!Tp(i);){if(Ts(i)&&!sx(i))return i;i=qc(i)}return r}let n=tM(e,t);for(;n&&xY(n)&&sx(n);)n=tM(n,t);return n&&Tp(n)&&sx(n)&&!h3(n)?r:n||CY(e)||r}const zY=async function(e){const t=this.getOffsetParent||p8,r=this.getDimensions,n=await r(e.floating);return{reference:jY(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function VY(e){return As(e).direction==="rtl"}const HY={convertOffsetParentRelativeRectToViewportRelativeRect:MY,getDocumentElement:vl,getClippingRect:UY,getOffsetParent:p8,getElementRects:zY,getClientRects:IY,getDimensions:kY,getScale:dp,isElement:Ts,isRTL:VY};function m8(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function XY(e,t){let r=null,n;const i=vl(e);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const f=e.getBoundingClientRect(),{left:h,top:p,width:v,height:g}=f;if(l||t(),!v||!g)return;const _=$_(p),E=$_(i.clientWidth-(h+v)),b=$_(i.clientHeight-(p+g)),S=$_(h),T={rootMargin:-_+"px "+-E+"px "+-b+"px "+-S+"px",threshold:lo(0,Xc(1,c))||1};let C=!0;function M(D){const I=D[0].intersectionRatio;if(I!==c){if(!C)return o();I?o(!1,I):n=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!m8(f,e.getBoundingClientRect())&&o(),C=!1}try{r=new IntersectionObserver(M,{...T,root:i.ownerDocument})}catch{r=new IntersectionObserver(M,T)}r.observe(e)}return o(!0),a}function qY(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,f=m3(e),h=i||a?[...f?Ag(f):[],...Ag(t)]:[];h.forEach(S=>{i&&S.addEventListener("scroll",r,{passive:!0}),a&&S.addEventListener("resize",r)});const p=f&&l?XY(f,r):null;let v=-1,g=null;o&&(g=new ResizeObserver(S=>{let[T]=S;T&&T.target===f&&g&&(g.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var C;(C=g)==null||C.observe(t)})),r()}),f&&!c&&g.observe(f),g.observe(t));let _,E=c?fd(e):null;c&&b();function b(){const S=fd(e);E&&!m8(E,S)&&r(),E=S,_=requestAnimationFrame(b)}return r(),()=>{var S;h.forEach(T=>{i&&T.removeEventListener("scroll",r),a&&T.removeEventListener("resize",r)}),p?.(),(S=g)==null||S.disconnect(),g=null,c&&cancelAnimationFrame(_)}}const GY=vY,WY=gY,$Y=hY,YY=yY,ZY=pY,rM=dY,KY=_Y,QY=(e,t,r)=>{const n=new Map,i={platform:HY,...r},a={...i.platform,_c:n};return fY(e,t,{...i,platform:a})};var JY=typeof document<"u",eZ=function(){},by=JY?U.useLayoutEffect:eZ;function Jy(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Jy(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const a=i[n];if(!(a==="_owner"&&e.$$typeof)&&!Jy(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function v8(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function nM(e,t){const r=v8(e);return Math.round(t*r)/r}function lx(e){const t=U.useRef(e);return by(()=>{t.current=e}),t}function tZ(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:f}=e,[h,p]=U.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[v,g]=U.useState(n);Jy(v,n)||g(n);const[_,E]=U.useState(null),[b,S]=U.useState(null),T=U.useCallback(H=>{H!==I.current&&(I.current=H,E(H))},[]),C=U.useCallback(H=>{H!==N.current&&(N.current=H,S(H))},[]),M=a||_,D=o||b,I=U.useRef(null),N=U.useRef(null),j=U.useRef(h),re=c!=null,Q=lx(c),X=lx(i),R=lx(f),P=U.useCallback(()=>{if(!I.current||!N.current)return;const H={placement:t,strategy:r,middleware:v};X.current&&(H.platform=X.current),QY(I.current,N.current,H).then(ee=>{const oe={...ee,isPositioned:R.current!==!1};V.current&&!Jy(j.current,oe)&&(j.current=oe,qp.flushSync(()=>{p(oe)}))})},[v,t,r,X,R]);by(()=>{f===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,p(H=>({...H,isPositioned:!1})))},[f]);const V=U.useRef(!1);by(()=>(V.current=!0,()=>{V.current=!1}),[]),by(()=>{if(M&&(I.current=M),D&&(N.current=D),M&&D){if(Q.current)return Q.current(M,D,P);P()}},[M,D,P,Q,re]);const le=U.useMemo(()=>({reference:I,floating:N,setReference:T,setFloating:C}),[T,C]),w=U.useMemo(()=>({reference:M,floating:D}),[M,D]),z=U.useMemo(()=>{const H={position:r,left:0,top:0};if(!w.floating)return H;const ee=nM(w.floating,h.x),oe=nM(w.floating,h.y);return l?{...H,transform:"translate("+ee+"px, "+oe+"px)",...v8(w.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:ee,top:oe}},[r,l,w.floating,h.x,h.y]);return U.useMemo(()=>({...h,update:P,refs:le,elements:w,floatingStyles:z}),[h,P,le,w,z])}const rZ=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?rM({element:n.current,padding:i}).fn(r):{}:n?rM({element:n,padding:i}).fn(r):{}}}},nZ=(e,t)=>({...GY(e),options:[e,t]}),iZ=(e,t)=>({...WY(e),options:[e,t]}),aZ=(e,t)=>({...KY(e),options:[e,t]}),oZ=(e,t)=>({...$Y(e),options:[e,t]}),sZ=(e,t)=>({...YY(e),options:[e,t]}),lZ=(e,t)=>({...ZY(e),options:[e,t]}),uZ=(e,t)=>({...rZ(e),options:[e,t]});var cZ="Arrow",g8=U.forwardRef((e,t)=>{const{children:r,width:n=10,height:i=5,...a}=e;return Be.jsx(Yr.svg,{...a,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:Be.jsx("polygon",{points:"0,0 30,0 15,10"})})});g8.displayName=cZ;var fZ=g8;function v3(e){const[t,r]=U.useState(void 0);return Ii(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,f=Array.isArray(c)?c[0]:c;o=f.inlineSize,l=f.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var _8="Popper",[y8,E8]=Td(_8),[kEe,b8]=y8(_8),x8="PopperAnchor",S8=U.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,a=b8(x8,r),o=U.useRef(null),l=Fn(t,o),c=U.useRef(null);return U.useEffect(()=>{const f=c.current;c.current=n?.current||o.current,f!==c.current&&a.onAnchorChange(c.current)}),n?null:Be.jsx(Yr.div,{...i,ref:l})});S8.displayName=x8;var g3="PopperContent",[dZ,hZ]=y8(g3),T8=U.forwardRef((e,t)=>{const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:f=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:v=!1,updatePositionStrategy:g="optimized",onPlaced:_,...E}=e,b=b8(g3,r),[S,T]=U.useState(null),C=Fn(t,$e=>T($e)),[M,D]=U.useState(null),I=v3(M),N=I?.width??0,j=I?.height??0,re=n+(a!=="center"?"-"+a:""),Q=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},X=Array.isArray(f)?f:[f],R=X.length>0,P={padding:Q,boundary:X.filter(mZ),altBoundary:R},{refs:V,floatingStyles:le,placement:w,isPositioned:z,middlewareData:H}=tZ({strategy:"fixed",placement:re,whileElementsMounted:(...$e)=>qY(...$e,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[nZ({mainAxis:i+j,alignmentAxis:o}),c&&iZ({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?aZ():void 0,...P}),c&&oZ({...P}),sZ({...P,apply:({elements:$e,rects:Tt,availableWidth:je,availableHeight:Ee})=>{const{width:st,height:Oe}=Tt.reference,$t=$e.floating.style;$t.setProperty("--radix-popper-available-width",`${je}px`),$t.setProperty("--radix-popper-available-height",`${Ee}px`),$t.setProperty("--radix-popper-anchor-width",`${st}px`),$t.setProperty("--radix-popper-anchor-height",`${Oe}px`)}}),M&&uZ({element:M,padding:l}),vZ({arrowWidth:N,arrowHeight:j}),v&&lZ({strategy:"referenceHidden",...P})]}),[ee,oe]=C8(w),ge=Hc(_);Ii(()=>{z&&ge?.()},[z,ge]);const ye=H.arrow?.x,Pe=H.arrow?.y,tt=H.arrow?.centerOffset!==0,[We,Pt]=U.useState();return Ii(()=>{S&&Pt(window.getComputedStyle(S).zIndex)},[S]),Be.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...le,transform:z?le.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:We,"--radix-popper-transform-origin":[H.transformOrigin?.x,H.transformOrigin?.y].join(" "),...H.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:Be.jsx(dZ,{scope:r,placedSide:ee,onArrowChange:D,arrowX:ye,arrowY:Pe,shouldHideArrow:tt,children:Be.jsx(Yr.div,{"data-side":ee,"data-align":oe,...E,ref:C,style:{...E.style,animation:z?void 0:"none"}})})})});T8.displayName=g3;var A8="PopperArrow",pZ={top:"bottom",right:"left",bottom:"top",left:"right"},R8=U.forwardRef(function(e,t){const{__scopePopper:r,...n}=e,i=hZ(A8,r),a=pZ[i.placedSide];return Be.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:Be.jsx(fZ,{...n,ref:t,style:{...n.style,display:"block"}})})});R8.displayName=A8;function mZ(e){return e!==null}var vZ=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:i}=t,a=i.arrow?.centerOffset!==0,o=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[c,f]=C8(r),h={start:"0%",center:"50%",end:"100%"}[f],p=(i.arrow?.x??0)+o/2,v=(i.arrow?.y??0)+l/2;let g="",_="";return c==="bottom"?(g=a?h:`${p}px`,_=`${-l}px`):c==="top"?(g=a?h:`${p}px`,_=`${n.floating.height+l}px`):c==="right"?(g=`${-l}px`,_=a?h:`${v}px`):c==="left"&&(g=`${n.floating.width+l}px`,_=a?h:`${v}px`),{data:{x:g,y:_}}}});function C8(e){const[t,r="center"]=e.split("-");return[t,r]}var gZ=S8,_Z=T8,yZ=R8;function _3(e){const t=U.useRef({value:e,previous:e});return U.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var O8=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),EZ="VisuallyHidden",bZ=U.forwardRef((e,t)=>Be.jsx(Yr.span,{...e,ref:t,style:{...O8,...e.style}}));bZ.displayName=EZ;var xZ=[" ","Enter","ArrowUp","ArrowDown"],SZ=[" ","Enter"],oE="Select",[y3,sE,TZ]=J$(oE),[Zp]=Td(oE,[TZ,E8]),E3=E8(),[jEe,Qc]=Zp(oE),[zEe,AZ]=Zp(oE),w8="SelectTrigger",N8=U.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...i}=e,a=E3(r),o=Qc(w8,r),l=o.disabled||n,c=Fn(t,o.onTriggerChange),f=sE(r),h=U.useRef("touch"),[p,v,g]=Q8(E=>{const b=f().filter(C=>!C.disabled),S=b.find(C=>C.value===o.value),T=J8(b,E,S);T!==void 0&&o.onValueChange(T.value)}),_=E=>{l||(o.onOpenChange(!0),g()),E&&(o.triggerPointerDownPosRef.current={x:Math.round(E.pageX),y:Math.round(E.pageY)})};return Be.jsx(gZ,{asChild:!0,...a,children:Be.jsx(Yr.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":K8(o.value)?"":void 0,...i,ref:c,onClick:_n(i.onClick,E=>{E.currentTarget.focus(),h.current!=="mouse"&&_(E)}),onPointerDown:_n(i.onPointerDown,E=>{h.current=E.pointerType;const b=E.target;b.hasPointerCapture(E.pointerId)&&b.releasePointerCapture(E.pointerId),E.button===0&&E.ctrlKey===!1&&E.pointerType==="mouse"&&(_(E),E.preventDefault())}),onKeyDown:_n(i.onKeyDown,E=>{const b=p.current!=="";!(E.ctrlKey||E.altKey||E.metaKey)&&E.key.length===1&&v(E.key),!(b&&E.key===" ")&&xZ.includes(E.key)&&(_(),E.preventDefault())})})})});N8.displayName=w8;var M8="SelectValue",RZ=U.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,children:a,placeholder:o="",...l}=e,c=Qc(M8,r),{onValueNodeHasChildrenChange:f}=c,h=a!==void 0,p=Fn(t,c.onValueNodeChange);return Ii(()=>{f(h)},[f,h]),Be.jsx(Yr.span,{...l,ref:p,style:{pointerEvents:"none"},children:K8(c.value)?Be.jsx(Be.Fragment,{children:o}):a})});RZ.displayName=M8;var CZ="SelectIcon",I8=U.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...i}=e;return Be.jsx(Yr.span,{"aria-hidden":!0,...i,ref:t,children:n||"▼"})});I8.displayName=CZ;var OZ="SelectPortal",P8=e=>Be.jsx(r3,{asChild:!0,...e});P8.displayName=OZ;var dd="SelectContent",D8=U.forwardRef((e,t)=>{const r=Qc(dd,e.__scopeSelect),[n,i]=U.useState();if(Ii(()=>{i(new DocumentFragment)},[]),!r.open){const a=n;return a?qp.createPortal(Be.jsx(L8,{scope:e.__scopeSelect,children:Be.jsx(y3.Slot,{scope:e.__scopeSelect,children:Be.jsx("div",{children:e.children})})}),a):null}return Be.jsx(B8,{...e,ref:t})});D8.displayName=dd;var ps=10,[L8,Jc]=Zp(dd),wZ="SelectContentImpl",NZ=Sp("SelectContent.RemoveScroll"),B8=U.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:f,alignOffset:h,arrowPadding:p,collisionBoundary:v,collisionPadding:g,sticky:_,hideWhenDetached:E,avoidCollisions:b,...S}=e,T=Qc(dd,r),[C,M]=U.useState(null),[D,I]=U.useState(null),N=Fn(t,$e=>M($e)),[j,re]=U.useState(null),[Q,X]=U.useState(null),R=sE(r),[P,V]=U.useState(!1),le=U.useRef(!1);U.useEffect(()=>{if(C)return LU(C)},[C]),RU();const w=U.useCallback($e=>{const[Tt,...je]=R().map(Oe=>Oe.ref.current),[Ee]=je.slice(-1),st=document.activeElement;for(const Oe of $e)if(Oe===st||(Oe?.scrollIntoView({block:"nearest"}),Oe===Tt&&D&&(D.scrollTop=0),Oe===Ee&&D&&(D.scrollTop=D.scrollHeight),Oe?.focus(),document.activeElement!==st))return},[R,D]),z=U.useCallback(()=>w([j,C]),[w,j,C]);U.useEffect(()=>{P&&z()},[P,z]);const{onOpenChange:H,triggerPointerDownPosRef:ee}=T;U.useEffect(()=>{if(C){let $e={x:0,y:0};const Tt=Ee=>{$e={x:Math.abs(Math.round(Ee.pageX)-(ee.current?.x??0)),y:Math.abs(Math.round(Ee.pageY)-(ee.current?.y??0))}},je=Ee=>{$e.x<=10&&$e.y<=10?Ee.preventDefault():C.contains(Ee.target)||H(!1),document.removeEventListener("pointermove",Tt),ee.current=null};return ee.current!==null&&(document.addEventListener("pointermove",Tt),document.addEventListener("pointerup",je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Tt),document.removeEventListener("pointerup",je,{capture:!0})}}},[C,H,ee]),U.useEffect(()=>{const $e=()=>H(!1);return window.addEventListener("blur",$e),window.addEventListener("resize",$e),()=>{window.removeEventListener("blur",$e),window.removeEventListener("resize",$e)}},[H]);const[oe,ge]=Q8($e=>{const Tt=R().filter(st=>!st.disabled),je=Tt.find(st=>st.ref.current===document.activeElement),Ee=J8(Tt,$e,je);Ee&&setTimeout(()=>Ee.ref.current.focus())}),ye=U.useCallback(($e,Tt,je)=>{const Ee=!le.current&&!je;(T.value!==void 0&&T.value===Tt||Ee)&&(re($e),Ee&&(le.current=!0))},[T.value]),Pe=U.useCallback(()=>C?.focus(),[C]),tt=U.useCallback(($e,Tt,je)=>{const Ee=!le.current&&!je;(T.value!==void 0&&T.value===Tt||Ee)&&X($e)},[T.value]),We=n==="popper"?x2:F8,Pt=We===x2?{side:l,sideOffset:c,align:f,alignOffset:h,arrowPadding:p,collisionBoundary:v,collisionPadding:g,sticky:_,hideWhenDetached:E,avoidCollisions:b}:{};return Be.jsx(L8,{scope:r,content:C,viewport:D,onViewportChange:I,itemRefCallback:ye,selectedItem:j,onItemLeave:Pe,itemTextRefCallback:tt,focusSelectedItem:z,selectedItemText:Q,position:n,isPositioned:P,searchRef:oe,children:Be.jsx(n3,{as:NZ,allowPinchZoom:!0,children:Be.jsx(t3,{asChild:!0,trapped:T.open,onMountAutoFocus:$e=>{$e.preventDefault()},onUnmountAutoFocus:_n(i,$e=>{T.trigger?.focus({preventScroll:!0}),$e.preventDefault()}),children:Be.jsx(e3,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:$e=>$e.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:Be.jsx(We,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:$e=>$e.preventDefault(),...S,...Pt,onPlaced:()=>V(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:_n(S.onKeyDown,$e=>{const Tt=$e.ctrlKey||$e.altKey||$e.metaKey;if($e.key==="Tab"&&$e.preventDefault(),!Tt&&$e.key.length===1&&ge($e.key),["ArrowUp","ArrowDown","Home","End"].includes($e.key)){let je=R().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);if(["ArrowUp","End"].includes($e.key)&&(je=je.slice().reverse()),["ArrowUp","ArrowDown"].includes($e.key)){const Ee=$e.target,st=je.indexOf(Ee);je=je.slice(st+1)}setTimeout(()=>w(je)),$e.preventDefault()}})})})})})})});B8.displayName=wZ;var MZ="SelectItemAlignedPosition",F8=U.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...i}=e,a=Qc(dd,r),o=Jc(dd,r),[l,c]=U.useState(null),[f,h]=U.useState(null),p=Fn(t,N=>h(N)),v=sE(r),g=U.useRef(!1),_=U.useRef(!0),{viewport:E,selectedItem:b,selectedItemText:S,focusSelectedItem:T}=o,C=U.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&f&&E&&b&&S){const N=a.trigger.getBoundingClientRect(),j=f.getBoundingClientRect(),re=a.valueNode.getBoundingClientRect(),Q=S.getBoundingClientRect();if(a.dir!=="rtl"){const Ee=Q.left-j.left,st=re.left-Ee,Oe=N.left-st,$t=N.width+Oe,qt=Math.max($t,j.width),xt=window.innerWidth-ps,Dt=GN(st,[ps,Math.max(ps,xt-qt)]);l.style.minWidth=$t+"px",l.style.left=Dt+"px"}else{const Ee=j.right-Q.right,st=window.innerWidth-re.right-Ee,Oe=window.innerWidth-N.right-st,$t=N.width+Oe,qt=Math.max($t,j.width),xt=window.innerWidth-ps,Dt=GN(st,[ps,Math.max(ps,xt-qt)]);l.style.minWidth=$t+"px",l.style.right=Dt+"px"}const X=v(),R=window.innerHeight-ps*2,P=E.scrollHeight,V=window.getComputedStyle(f),le=parseInt(V.borderTopWidth,10),w=parseInt(V.paddingTop,10),z=parseInt(V.borderBottomWidth,10),H=parseInt(V.paddingBottom,10),ee=le+w+P+H+z,oe=Math.min(b.offsetHeight*5,ee),ge=window.getComputedStyle(E),ye=parseInt(ge.paddingTop,10),Pe=parseInt(ge.paddingBottom,10),tt=N.top+N.height/2-ps,We=R-tt,Pt=b.offsetHeight/2,$e=b.offsetTop+Pt,Tt=le+w+$e,je=ee-Tt;if(Tt<=tt){const Ee=X.length>0&&b===X[X.length-1].ref.current;l.style.bottom="0px";const st=f.clientHeight-E.offsetTop-E.offsetHeight,Oe=Math.max(We,Pt+(Ee?Pe:0)+st+z),$t=Tt+Oe;l.style.height=$t+"px"}else{const Ee=X.length>0&&b===X[0].ref.current;l.style.top="0px";const st=Math.max(tt,le+E.offsetTop+(Ee?ye:0)+Pt)+je;l.style.height=st+"px",E.scrollTop=Tt-tt+E.offsetTop}l.style.margin=`${ps}px 0`,l.style.minHeight=oe+"px",l.style.maxHeight=R+"px",n?.(),requestAnimationFrame(()=>g.current=!0)}},[v,a.trigger,a.valueNode,l,f,E,b,S,a.dir,n]);Ii(()=>C(),[C]);const[M,D]=U.useState();Ii(()=>{f&&D(window.getComputedStyle(f).zIndex)},[f]);const I=U.useCallback(N=>{N&&_.current===!0&&(C(),T?.(),_.current=!1)},[C,T]);return Be.jsx(PZ,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:I,children:Be.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:Be.jsx(Yr.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});F8.displayName=MZ;var IZ="SelectPopperPosition",x2=U.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=ps,...a}=e,o=E3(r);return Be.jsx(_Z,{...o,...a,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});x2.displayName=IZ;var[PZ,b3]=Zp(dd,{}),S2="SelectViewport",U8=U.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...i}=e,a=Jc(S2,r),o=b3(S2,r),l=Fn(t,a.onViewportChange),c=U.useRef(0);return Be.jsxs(Be.Fragment,{children:[Be.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),Be.jsx(y3.Slot,{scope:r,children:Be.jsx(Yr.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:_n(i.onScroll,f=>{const h=f.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:v}=o;if(v?.current&&p){const g=Math.abs(c.current-h.scrollTop);if(g>0){const _=window.innerHeight-ps*2,E=parseFloat(p.style.minHeight),b=parseFloat(p.style.height),S=Math.max(E,b);if(S<_){const T=S+g,C=Math.min(_,T),M=T-C;p.style.height=C+"px",p.style.bottom==="0px"&&(h.scrollTop=M>0?M:0,p.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});U8.displayName=S2;var k8="SelectGroup",[DZ,LZ]=Zp(k8),BZ=U.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=pg();return Be.jsx(DZ,{scope:r,id:i,children:Be.jsx(Yr.div,{role:"group","aria-labelledby":i,...n,ref:t})})});BZ.displayName=k8;var j8="SelectLabel",z8=U.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=LZ(j8,r);return Be.jsx(Yr.div,{id:i.id,...n,ref:t})});z8.displayName=j8;var e1="SelectItem",[FZ,V8]=Zp(e1),H8=U.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:a,...o}=e,l=Qc(e1,r),c=Jc(e1,r),f=l.value===n,[h,p]=U.useState(a??""),[v,g]=U.useState(!1),_=Fn(t,T=>c.itemRefCallback?.(T,n,i)),E=pg(),b=U.useRef("touch"),S=()=>{i||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return Be.jsx(FZ,{scope:r,value:n,disabled:i,textId:E,isSelected:f,onItemTextChange:U.useCallback(T=>{p(C=>C||(T?.textContent??"").trim())},[]),children:Be.jsx(y3.ItemSlot,{scope:r,value:n,disabled:i,textValue:h,children:Be.jsx(Yr.div,{role:"option","aria-labelledby":E,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:_,onFocus:_n(o.onFocus,()=>g(!0)),onBlur:_n(o.onBlur,()=>g(!1)),onClick:_n(o.onClick,()=>{b.current!=="mouse"&&S()}),onPointerUp:_n(o.onPointerUp,()=>{b.current==="mouse"&&S()}),onPointerDown:_n(o.onPointerDown,T=>{b.current=T.pointerType}),onPointerMove:_n(o.onPointerMove,T=>{b.current=T.pointerType,i?c.onItemLeave?.():b.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:_n(o.onPointerLeave,T=>{T.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:_n(o.onKeyDown,T=>{c.searchRef?.current!==""&&T.key===" "||(SZ.includes(T.key)&&S(),T.key===" "&&T.preventDefault())})})})})});H8.displayName=e1;var Zv="SelectItemText",X8=U.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,...a}=e,o=Qc(Zv,r),l=Jc(Zv,r),c=V8(Zv,r),f=AZ(Zv,r),[h,p]=U.useState(null),v=Fn(t,S=>p(S),c.onItemTextChange,S=>l.itemTextRefCallback?.(S,c.value,c.disabled)),g=h?.textContent,_=U.useMemo(()=>Be.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:E,onNativeOptionRemove:b}=f;return Ii(()=>(E(_),()=>b(_)),[E,b,_]),Be.jsxs(Be.Fragment,{children:[Be.jsx(Yr.span,{id:c.textId,...a,ref:v}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?qp.createPortal(a.children,o.valueNode):null]})});X8.displayName=Zv;var q8="SelectItemIndicator",G8=U.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return V8(q8,r).isSelected?Be.jsx(Yr.span,{"aria-hidden":!0,...n,ref:t}):null});G8.displayName=q8;var T2="SelectScrollUpButton",W8=U.forwardRef((e,t)=>{const r=Jc(T2,e.__scopeSelect),n=b3(T2,e.__scopeSelect),[i,a]=U.useState(!1),o=Fn(t,n.onScrollButtonChange);return Ii(()=>{if(r.viewport&&r.isPositioned){let l=function(){const f=c.scrollTop>0;a(f)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?Be.jsx(Y8,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});W8.displayName=T2;var A2="SelectScrollDownButton",$8=U.forwardRef((e,t)=>{const r=Jc(A2,e.__scopeSelect),n=b3(A2,e.__scopeSelect),[i,a]=U.useState(!1),o=Fn(t,n.onScrollButtonChange);return Ii(()=>{if(r.viewport&&r.isPositioned){let l=function(){const f=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<f;a(h)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?Be.jsx(Y8,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});$8.displayName=A2;var Y8=U.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=e,a=Jc("SelectScrollButton",r),o=U.useRef(null),l=sE(r),c=U.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return U.useEffect(()=>()=>c(),[c]),Ii(()=>{l().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),Be.jsx(Yr.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:_n(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:_n(i.onPointerMove,()=>{a.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:_n(i.onPointerLeave,()=>{c()})})}),UZ="SelectSeparator",Z8=U.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return Be.jsx(Yr.div,{"aria-hidden":!0,...n,ref:t})});Z8.displayName=UZ;var R2="SelectArrow",kZ=U.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=E3(r),a=Qc(R2,r),o=Jc(R2,r);return a.open&&o.position==="popper"?Be.jsx(yZ,{...i,...n,ref:t}):null});kZ.displayName=R2;var jZ="SelectBubbleInput",zZ=U.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const i=U.useRef(null),a=Fn(n,i),o=_3(t);return U.useEffect(()=>{const l=i.current;if(!l)return;const c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&f){const h=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(h)}},[o,t]),Be.jsx(Yr.select,{...r,style:{...O8,...r.style},ref:a,defaultValue:t})});zZ.displayName=jZ;function K8(e){return e===""||e===void 0}function Q8(e){const t=Hc(e),r=U.useRef(""),n=U.useRef(0),i=U.useCallback(o=>{const l=r.current+o;t(l),(function c(f){r.current=f,window.clearTimeout(n.current),f!==""&&(n.current=window.setTimeout(()=>c(""),1e3))})(l)},[t]),a=U.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return U.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,a]}function J8(e,t,r){const n=t.length>1&&Array.from(t).every(l=>l===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let a=VZ(e,Math.max(i,0));n.length===1&&(a=a.filter(l=>l!==r));const o=a.find(l=>l.textValue.toLowerCase().startsWith(n.toLowerCase()));return o!==r?o:void 0}function VZ(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var e7=N8,HZ=I8,XZ=P8,t7=D8,qZ=U8,r7=z8,n7=H8,GZ=X8,WZ=G8,i7=W8,a7=$8,o7=Z8;const $Z=U.forwardRef(({className:e,children:t,...r},n)=>Be.jsxs(e7,{ref:n,className:Tr("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,Be.jsx(HZ,{asChild:!0,children:Be.jsx(n8,{className:"h-4 w-4 opacity-50"})})]}));$Z.displayName=e7.displayName;const s7=U.forwardRef(({className:e,...t},r)=>Be.jsx(i7,{ref:r,className:Tr("flex cursor-default items-center justify-center py-1",e),...t,children:Be.jsx($$,{className:"h-4 w-4"})}));s7.displayName=i7.displayName;const l7=U.forwardRef(({className:e,...t},r)=>Be.jsx(a7,{ref:r,className:Tr("flex cursor-default items-center justify-center py-1",e),...t,children:Be.jsx(n8,{className:"h-4 w-4"})}));l7.displayName=a7.displayName;const YZ=U.forwardRef(({className:e,children:t,position:r="popper",...n},i)=>Be.jsx(XZ,{children:Be.jsxs(t7,{ref:i,className:Tr("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[Be.jsx(s7,{}),Be.jsx(qZ,{className:Tr("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),Be.jsx(l7,{})]})}));YZ.displayName=t7.displayName;const ZZ=U.forwardRef(({className:e,...t},r)=>Be.jsx(r7,{ref:r,className:Tr("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));ZZ.displayName=r7.displayName;const KZ=U.forwardRef(({className:e,children:t,...r},n)=>Be.jsxs(n7,{ref:n,className:Tr("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[Be.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Be.jsx(WZ,{children:Be.jsx(r8,{className:"h-4 w-4"})})}),Be.jsx(GZ,{children:t})]}));KZ.displayName=n7.displayName;const QZ=U.forwardRef(({className:e,...t},r)=>Be.jsx(o7,{ref:r,className:Tr("-mx-1 my-1 h-px bg-muted",e),...t}));QZ.displayName=o7.displayName;var lE="Checkbox",[JZ]=Td(lE),[eK,x3]=JZ(lE);function tK(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:i,disabled:a,form:o,name:l,onCheckedChange:c,required:f,value:h="on",internal_do_not_use_render:p}=e,[v,g]=JC({prop:r,defaultProp:i??!1,onChange:c,caller:lE}),[_,E]=U.useState(null),[b,S]=U.useState(null),T=U.useRef(!1),C=_?!!o||!!_.closest("form"):!0,M={checked:v,disabled:a,setChecked:g,control:_,setControl:E,name:l,form:o,value:h,hasConsumerStoppedPropagationRef:T,required:f,defaultChecked:Uc(i)?!1:i,isFormControl:C,bubbleInput:b,setBubbleInput:S};return Be.jsx(eK,{scope:t,...M,children:rK(p)?p(M):n})}var u7="CheckboxTrigger",c7=U.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},i)=>{const{control:a,value:o,disabled:l,checked:c,required:f,setControl:h,setChecked:p,hasConsumerStoppedPropagationRef:v,isFormControl:g,bubbleInput:_}=x3(u7,e),E=Fn(i,h),b=U.useRef(c);return U.useEffect(()=>{const S=a?.form;if(S){const T=()=>p(b.current);return S.addEventListener("reset",T),()=>S.removeEventListener("reset",T)}},[a,p]),Be.jsx(Yr.button,{type:"button",role:"checkbox","aria-checked":Uc(c)?"mixed":c,"aria-required":f,"data-state":m7(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:E,onKeyDown:_n(t,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:_n(r,S=>{p(T=>Uc(T)?!0:!T),_&&g&&(v.current=S.isPropagationStopped(),v.current||S.stopPropagation())})})});c7.displayName=u7;var S3=U.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:i,defaultChecked:a,required:o,disabled:l,value:c,onCheckedChange:f,form:h,...p}=e;return Be.jsx(tK,{__scopeCheckbox:r,checked:i,defaultChecked:a,disabled:l,required:o,onCheckedChange:f,name:n,form:h,value:c,internal_do_not_use_render:({isFormControl:v})=>Be.jsxs(Be.Fragment,{children:[Be.jsx(c7,{...p,ref:t,__scopeCheckbox:r}),v&&Be.jsx(p7,{__scopeCheckbox:r})]})})});S3.displayName=lE;var f7="CheckboxIndicator",d7=U.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...i}=e,a=x3(f7,r);return Be.jsx(Wg,{present:n||Uc(a.checked)||a.checked===!0,children:Be.jsx(Yr.span,{"data-state":m7(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});d7.displayName=f7;var h7="CheckboxBubbleInput",p7=U.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:o,required:l,disabled:c,name:f,value:h,form:p,bubbleInput:v,setBubbleInput:g}=x3(h7,e),_=Fn(r,g),E=_3(a),b=v3(n);U.useEffect(()=>{const T=v;if(!T)return;const C=window.HTMLInputElement.prototype,M=Object.getOwnPropertyDescriptor(C,"checked").set,D=!i.current;if(E!==a&&M){const I=new Event("click",{bubbles:D});T.indeterminate=Uc(a),M.call(T,Uc(a)?!1:a),T.dispatchEvent(I)}},[v,E,a,i]);const S=U.useRef(Uc(a)?!1:a);return Be.jsx(Yr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??S.current,required:l,disabled:c,name:f,value:h,form:p,...t,tabIndex:-1,ref:_,style:{...t.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});p7.displayName=h7;function rK(e){return typeof e=="function"}function Uc(e){return e==="indeterminate"}function m7(e){return Uc(e)?"indeterminate":e?"checked":"unchecked"}const nK=U.forwardRef(({className:e,...t},r)=>Be.jsx(S3,{ref:r,className:Tr("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:Be.jsx(d7,{className:Tr("flex items-center justify-center text-current"),children:Be.jsx(r8,{className:"h-4 w-4"})})}));nK.displayName=S3.displayName;var uE="Switch",[iK]=Td(uE),[aK,oK]=iK(uE),v7=U.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:f,form:h,...p}=e,[v,g]=U.useState(null),_=Fn(t,C=>g(C)),E=U.useRef(!1),b=v?h||!!v.closest("form"):!0,[S,T]=JC({prop:i,defaultProp:a??!1,onChange:f,caller:uE});return Be.jsxs(aK,{scope:r,checked:S,disabled:l,children:[Be.jsx(Yr.button,{type:"button",role:"switch","aria-checked":S,"aria-required":o,"data-state":E7(S),"data-disabled":l?"":void 0,disabled:l,value:c,...p,ref:_,onClick:_n(e.onClick,C=>{T(M=>!M),b&&(E.current=C.isPropagationStopped(),E.current||C.stopPropagation())})}),b&&Be.jsx(y7,{control:v,bubbles:!E.current,name:n,value:c,checked:S,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});v7.displayName=uE;var g7="SwitchThumb",_7=U.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,i=oK(g7,r);return Be.jsx(Yr.span,{"data-state":E7(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})});_7.displayName=g7;var sK="SwitchBubbleInput",y7=U.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...i},a)=>{const o=U.useRef(null),l=Fn(o,a),c=_3(r),f=v3(t);return U.useEffect(()=>{const h=o.current;if(!h)return;const p=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==r&&v){const g=new Event("click",{bubbles:n});v.call(h,r),h.dispatchEvent(g)}},[c,r,n]),Be.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:l,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});y7.displayName=sK;function E7(e){return e?"checked":"unchecked"}var b7=v7,lK=_7;const uK=U.forwardRef(({className:e,...t},r)=>Be.jsx(b7,{className:Tr("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:Be.jsx(lK,{className:Tr("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));uK.displayName=b7.displayName;const T3=U.forwardRef(({className:e,...t},r)=>Be.jsx("textarea",{className:Tr("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));T3.displayName="Textarea";var cK="Separator",iM="horizontal",fK=["horizontal","vertical"],x7=U.forwardRef((e,t)=>{const{decorative:r,orientation:n=iM,...i}=e,a=dK(n)?n:iM,o=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return Be.jsx(Yr.div,{"data-orientation":a,...o,...i,ref:t})});x7.displayName=cK;function dK(e){return fK.includes(e)}var S7=x7;const hK=U.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},i)=>Be.jsx(S7,{ref:i,decorative:r,orientation:t,className:Tr("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));hK.displayName=S7.displayName;function T7(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=T7(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function pK(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=T7(e))&&(n&&(n+=" "),n+=t);return n}const aM=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,oM=pK,vo=(e,t)=>r=>{var n;if(t?.variants==null)return oM(e,r?.class,r?.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(f=>{const h=r?.[f],p=a?.[f];if(h===null)return null;const v=aM(h)||aM(p);return i[f][v]}),l=r&&Object.entries(r).reduce((f,h)=>{let[p,v]=h;return v===void 0||(f[p]=v),f},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((f,h)=>{let{class:p,className:v,...g}=h;return Object.entries(g).every(_=>{let[E,b]=_;return Array.isArray(b)?b.includes({...a,...l}[E]):{...a,...l}[E]===b})?[...f,p,v]:f},[]);return oM(e,o,c,r?.class,r?.className)},mK=vo("relative overflow-hidden bg-card border border-border rounded-lg shadow-md transition-all duration-300 hover:shadow-xl hover:-translate-y-1 hover:border-ring",{variants:{size:{sm:"p-4",default:"p-6",lg:"p-8"},variant:{default:"",primary:"before:absolute before:top-0 before:left-0 before:right-0 before:h-0.5 before:bg-gradient-to-r before:from-[var(--primary)] before:to-[var(--primary)]/80 before:opacity-0 before:transition-opacity before:duration-300 hover:before:opacity-100",success:"before:absolute before:top-0 before:left-0 before:right-0 before:h-0.5 before:bg-gradient-to-r before:from-[var(--success)] before:to-[var(--success)]/80 before:opacity-0 before:transition-opacity before:duration-300 hover:before:opacity-100",warning:"before:absolute before:top-0 before:left-0 before:right-0 before:h-0.5 before:bg-gradient-to-r before:from-[var(--warning)] before:to-[var(--warning)]/80 before:opacity-0 before:transition-opacity before:duration-300 hover:before:opacity-100",danger:"before:absolute before:top-0 before:left-0 before:right-0 before:h-0.5 before:bg-gradient-to-r before:from-[var(--destructive)] before:to-[var(--destructive)]/80 before:opacity-0 before:transition-opacity before:duration-300 hover:before:opacity-100"},highlighted:{true:"after:absolute after:top-0 after:right-0 after:w-1 after:h-full after:bg-[var(--primary)] after:transition-opacity after:duration-300 after:opacity-100",false:"after:absolute after:top-0 after:right-0 after:w-1 after:h-full after:bg-[var(--primary)] after:transition-opacity after:duration-300 after:opacity-0"}},defaultVariants:{size:"default",variant:"default",highlighted:!1}}),vK=vo("text-center transition-all duration-300 hover:scale-[1.02]",{variants:{variant:{primary:"bg-gradient-to-br from-[var(--primary)]/5 to-[var(--primary)]/10 border-2 border-transparent hover:border-[var(--primary)]/20",success:"bg-gradient-to-br from-[var(--success)]/5 to-[var(--success)]/10 border-2 border-transparent hover:border-[var(--success)]/20",warning:"bg-gradient-to-br from-[var(--warning)]/5 to-[var(--warning)]/10 border-2 border-transparent hover:border-[var(--warning)]/20",danger:"bg-gradient-to-br from-[var(--destructive)]/5 to-[var(--destructive)]/10 border-2 border-transparent hover:border-[var(--destructive)]/20"},size:{sm:"p-4",default:"p-6",lg:"p-8"}},defaultVariants:{variant:"primary",size:"default"}}),gK=vo("font-mono font-black leading-none tracking-tight mb-3",{variants:{size:{sm:"text-2xl",default:"text-4xl lg:text-5xl",lg:"text-5xl lg:text-6xl"},variant:{primary:"bg-gradient-to-r from-[var(--primary)] to-[var(--primary)]/80 bg-clip-text text-transparent",success:"text-[var(--success)]",warning:"text-[var(--warning)]",danger:"text-[var(--destructive)]",neutral:"text-foreground"}},defaultVariants:{size:"default",variant:"primary"}}),_K=vo("inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold border transition-all duration-200",{variants:{trend:{up:"bg-[var(--success)]/10 text-[var(--success)] border-[var(--success)]/20 hover:bg-[var(--success)]/20",down:"bg-[var(--destructive)]/10 text-[var(--destructive)] border-[var(--destructive)]/20 hover:bg-[var(--destructive)]/20",neutral:"bg-[var(--warning)]/10 text-[var(--warning)] border-[var(--warning)]/20 hover:bg-[var(--warning)]/20"}},defaultVariants:{trend:"neutral"}}),yK=vo("inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium",{variants:{sentiment:{"very-positive":"bg-emerald-50 text-emerald-700 border border-emerald-200",positive:"bg-green-50 text-green-700 border border-green-200",neutral:"bg-amber-50 text-amber-700 border border-amber-200",negative:"bg-red-50 text-red-700 border border-red-200","very-negative":"bg-rose-50 text-rose-700 border border-rose-200"}},defaultVariants:{sentiment:"neutral"}}),EK=vo("w-full bg-muted rounded-full overflow-hidden",{variants:{size:{sm:"h-1.5",default:"h-2",lg:"h-3"}},defaultVariants:{size:"default"}}),bK=vo("h-full transition-all duration-1000 ease-out rounded-full",{variants:{intensity:{"very-positive":"bg-gradient-to-r from-[var(--sentiment-very-positive)] to-[var(--sentiment-very-positive)]/90",positive:"bg-gradient-to-r from-[var(--sentiment-positive)] to-[var(--sentiment-positive)]/90",neutral:"bg-gradient-to-r from-[var(--sentiment-neutral)] to-[var(--sentiment-neutral)]/90",negative:"bg-gradient-to-r from-[var(--sentiment-negative)] to-[var(--sentiment-negative)]/90","very-negative":"bg-gradient-to-r from-[var(--sentiment-very-negative)] to-[var(--sentiment-very-negative)]/90"}},defaultVariants:{intensity:"neutral"}}),xK=vo("inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold uppercase tracking-wide",{variants:{status:{online:"bg-[var(--success)] text-[var(--success-foreground)]",offline:"bg-[var(--destructive)] text-[var(--destructive-foreground)]",warning:"bg-[var(--warning)] text-[var(--warning-foreground)]"}},defaultVariants:{status:"online"}}),SK=vo("inline-block w-2 h-2 rounded-full mr-2 relative",{variants:{status:{online:"bg-[var(--success)] shadow-[0_0_0_2px] shadow-[var(--success)]/20",offline:"bg-[var(--destructive)] shadow-[0_0_0_2px] shadow-[var(--destructive)]/20",warning:"bg-[var(--warning)] shadow-[0_0_0_2px] shadow-[var(--warning)]/20"},pulse:{true:"animate-pulse",false:""}},defaultVariants:{status:"online",pulse:!1}}),TK=vo("relative p-4 bg-muted/30 rounded-lg overflow-hidden",{variants:{size:{sm:"h-64",default:"h-80",lg:"h-96"},pattern:{true:"before:absolute before:inset-0 before:bg-[linear-gradient(45deg,transparent_49%,rgb(var(--border))_49%,rgb(var(--border))_51%,transparent_51%)] before:bg-[length:20px_20px] before:opacity-[0.03] before:pointer-events-none",false:""}},defaultVariants:{size:"default",pattern:!0}}),AK=vo("inline-block px-3 py-1.5 m-1 rounded-full text-sm font-medium border cursor-pointer transition-all duration-300 relative overflow-hidden",{variants:{variant:{primary:"bg-gradient-to-r from-primary to-primary/80 text-primary-foreground border-primary/20 hover:-translate-y-0.5 hover:shadow-lg hover:border-ring",secondary:"bg-gradient-to-r from-secondary to-secondary/80 text-secondary-foreground border-secondary/20 hover:-translate-y-0.5 hover:shadow-lg hover:border-ring"},shine:{true:"before:absolute before:top-0 before:-left-full before:w-full before:h-full before:bg-gradient-to-r before:from-transparent before:via-white/30 before:to-transparent before:transition-all before:duration-500 hover:before:left-full",false:""}},defaultVariants:{variant:"primary",shine:!0}}),RK=vo("w-full bg-muted rounded-full overflow-hidden",{variants:{size:{sm:"h-2",default:"h-3",lg:"h-4"}},defaultVariants:{size:"default"}}),CK=vo("h-full bg-gradient-to-r from-primary to-primary/80 transition-all duration-1000 ease-out relative",{variants:{shine:{true:"after:absolute after:inset-0 after:bg-[linear-gradient(45deg,transparent_33%,rgba(255,255,255,0.3)_33%,rgba(255,255,255,0.3)_66%,transparent_66%)] after:bg-[length:20px_20px] after:animate-progress-shine",false:""},variant:{primary:"bg-gradient-to-r from-[var(--primary)] to-[var(--primary)]/80",success:"bg-gradient-to-r from-[var(--success)] to-[var(--success)]/80",warning:"bg-gradient-to-r from-[var(--warning)] to-[var(--warning)]/80",danger:"bg-gradient-to-r from-[var(--destructive)] to-[var(--destructive)]/80"}},defaultVariants:{shine:!0,variant:"primary"}}),Gn=U.forwardRef(({className:e,size:t,variant:r,highlighted:n,children:i,...a},o)=>A.jsx("div",{ref:o,className:Tr(mK({size:t,variant:r,highlighted:n}),e),...a,children:i}));Gn.displayName="DashboardCard";const co=U.forwardRef(({className:e,variant:t,size:r,children:n,...i},a)=>A.jsx("div",{ref:a,className:Tr(vK({variant:t,size:r}),e),...i,children:n}));co.displayName="MetricCard";const Yi=U.forwardRef(({className:e,size:t,variant:r,children:n,...i},a)=>A.jsx("div",{ref:a,className:Tr(gK({size:t,variant:r}),e),...i,children:n}));Yi.displayName="MetricValue";const ca=U.forwardRef(({className:e,children:t,...r},n)=>A.jsx("div",{ref:n,className:Tr("text-muted-foreground text-sm font-medium",e),...r,children:t}));ca.displayName="MetricLabel";const Zi=U.forwardRef(({className:e,trend:t,value:r,icon:n,children:i,...a},o)=>A.jsxs("span",{ref:o,className:Tr(_K({trend:t}),e),...a,children:[n,r&&A.jsx("span",{children:r}),i]}));Zi.displayName="TrendIndicator";const Jh=U.forwardRef(({className:e,sentiment:t,children:r,...n},i)=>A.jsx("span",{ref:i,className:Tr(yK({sentiment:t}),e),...n,children:r}));Jh.displayName="SentimentBadge";const ep=U.forwardRef(({className:e,size:t,value:r,intensity:n="neutral",...i},a)=>{const o=Math.max(0,Math.min(100,r*100));return A.jsx("div",{ref:a,className:Tr(EK({size:t}),e),...i,children:A.jsx("div",{className:Tr(bK({intensity:n})),style:{width:`${o}%`}})})});ep.displayName="IntensityBar";const hd=U.forwardRef(({className:e,status:t,children:r,...n},i)=>A.jsxs("span",{ref:i,className:Tr(xK({status:t}),e),...n,children:[A.jsx("span",{className:"w-1.5 h-1.5 bg-current rounded-full animate-live-pulse"}),r||"LIVE"]}));hd.displayName="LiveIndicator";const ru=U.forwardRef(({className:e,status:t,pulse:r,...n},i)=>A.jsx("span",{ref:i,className:Tr(SK({status:t,pulse:r}),e),...n}));ru.displayName="StatusDot";const A3=U.forwardRef(({className:e,size:t,pattern:r,title:n,subtitle:i,action:a,children:o,...l},c)=>A.jsxs("div",{ref:c,className:Tr(TK({size:t,pattern:r}),e),...l,children:[(n||i||a)&&A.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-border",children:[A.jsxs("div",{children:[n&&A.jsx("h3",{className:"text-lg font-semibold text-foreground",children:n}),i&&A.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:i})]}),a&&A.jsx("div",{children:a})]}),A.jsx("div",{className:"relative z-10",children:o})]}));A3.displayName="ChartContainer";const Fa=U.forwardRef(({className:e,variant:t,shine:r,children:n,...i},a)=>A.jsx("span",{ref:a,className:Tr(AK({variant:t,shine:r}),e),...i,children:n}));Fa.displayName="WordcloudTag";const ou=U.forwardRef(({className:e,size:t,value:r,variant:n="primary",shine:i=!0,...a},o)=>{const l=Math.max(0,Math.min(100,r));return A.jsx("div",{ref:o,className:Tr(RK({size:t}),e),...a,children:A.jsx("div",{className:Tr(CK({variant:n,shine:i})),style:{width:`${l}%`}})})});ou.displayName="ProgressBar";const R3=U.forwardRef(({className:e,children:t,...r},n)=>A.jsx("div",{ref:n,className:Tr("flex flex-wrap gap-2 p-4 items-center justify-center",e),...r,children:t}));R3.displayName="WordcloudContainer";function OK({title:e,description:t,icon:r,color:n="primary",metrics:i}){return A.jsx(Gn,{variant:n,className:"group hover:shadow-2xl hover:-translate-y-2 transition-all duration-300",children:A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[r&&A.jsx("div",{className:"text-2xl group-hover:scale-110 transition-transform duration-300",children:r}),A.jsx("h3",{className:"text-xl font-bold text-foreground group-hover:text-primary transition-colors",children:e})]}),A.jsx("p",{className:"text-muted-foreground leading-relaxed text-sm",children:t}),i&&A.jsx("div",{className:"pt-3 border-t border-border/50",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx(Yi,{variant:n==="default"?"primary":n,size:"sm",className:"text-2xl",children:i.value}),A.jsx("p",{className:"text-xs text-muted-foreground",children:i.label})]}),A.jsx("div",{className:"text-right",children:A.jsx(Zi,{trend:"up",value:"实时",icon:A.jsx("span",{className:"animate-pulse",children:"●"}),className:"text-xs"})})]})}),A.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:A.jsx("div",{className:"w-2 h-2 rounded-full bg-primary animate-ping"})})]})})}const wK=[{title:"实时数据监控",description:"7×24小时全网数据采集，支持微博、新闻、论坛等多平台监控",icon:"📊",color:"primary",metrics:{value:"2.8K+",label:"日均监控数据"}},{title:"情感分析引擎",description:"基于深度学习的情感分析算法，准确识别正面、负面、中性情感",icon:"🧠",color:"success",metrics:{value:"94.2%",label:"分析准确率"}},{title:"地理位置分析",description:"结合地理位置信息，提供区域性舆情分布和热点地图可视化",icon:"🌍",color:"warning",metrics:{value:"350+",label:"覆盖城市"}},{title:"智能预警系统",description:"多维度风险评估模型，及时发现和预警潜在舆情风险",icon:"🚨",color:"danger",metrics:{value:"99.8%",label:"系统可用性"}},{title:"热点话题追踪",description:"智能识别热门话题和关键词，实时跟踪话题传播趋势",icon:"🔥",color:"default",metrics:{value:"24/7",label:"实时追踪"}},{title:"数据可视化",description:"丰富的图表和大屏展示，直观呈现监控数据和分析结果",icon:"📈",color:"primary",metrics:{value:"15+",label:"可视化图表"}}];function NK(){return A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"text-center",children:[A.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"核心功能"}),A.jsx("p",{className:"text-lg text-muted-foreground",children:"专业的舆情监控解决方案，助您掌握舆论先机"})]}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:wK.map(e=>A.jsx(OK,{title:e.title,description:e.description,icon:e.icon,color:e.color,metrics:e.metrics},e.title))})]})}function MK(){return A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-secondary/5 rounded-2xl"}),A.jsxs("div",{className:"relative text-center py-16 px-8",children:[A.jsxs("div",{className:"mb-6",children:[A.jsx("h1",{className:"text-5xl md:text-6xl font-black bg-gradient-to-r from-primary via-primary/80 to-secondary bg-clip-text text-transparent mb-4",children:"舆情分析监控系统"}),A.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[A.jsx(ru,{status:"online",pulse:!0}),A.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"系统运行正常"})]})]}),A.jsxs("div",{className:"max-w-2xl mx-auto space-y-4",children:[A.jsx("p",{className:"text-xl md:text-2xl text-foreground/90 font-medium",children:"🔍 实时监控 · 📊 智能分析 · 🚨 预警响应"}),A.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"基于人工智能的舆情监控平台，提供全网数据采集、情感分析、热点追踪、 地理分析等核心功能，助力企业和机构掌握舆论动态。"})]}),A.jsx("div",{className:"mt-8 flex justify-center",children:A.jsx(hd,{status:"online",className:"text-base",children:"实时监控中 · 数据同步正常"})}),A.jsxs("div",{className:"mt-8 flex justify-center space-x-8 text-4xl opacity-20",children:[A.jsx("span",{children:"📈"}),A.jsx("span",{children:"🌐"}),A.jsx("span",{children:"⚡"}),A.jsx("span",{children:"🎯"})]})]})]})}const ux=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,Ki=(e,t,r=1)=>parseFloat((Math.random()*(t-e)+e).toFixed(r)),C3=()=>{const e=ux(2500,3200),t=ux(Math.floor(e*.5),Math.floor(e*.7)),r=ux(Math.floor(e*.1),Math.floor(e*.2)),n=e-t-r;return{totalData:e,positiveCount:t,neutralCount:n,negativeCount:r,trends:{total:`+${Ki(8,15)}%`,positive:`+${Ki(5,12)}%`,neutral:`±${Ki(1,5)}%`,negative:`-${Ki(3,8)}%`}}},O3=()=>({dataCollection:Ki(95,99,1),sentimentAnalysis:Ki(85,95,1),realTimePush:Ki(90,98,1),backupService:Ki(0,15,1)}),A7=()=>{const e=Ki(.8,.9,2),t=Ki(.6,.75,2),r=Ki(.4,.55,2),n=Ki(.2,.35,2),i=Ki(.08,.18,2);return{veryPositive:e,positive:t,neutral:r,negative:n,veryNegative:i}},IK=()=>[{text:"人工智能",category:"technology",baseWeight:.9},{text:"科技创新",category:"technology",baseWeight:.85},{text:"数字化转型",category:"technology",baseWeight:.8},{text:"智能制造",category:"technology",baseWeight:.75},{text:"云计算",category:"technology",baseWeight:.7},{text:"大数据",category:"technology",baseWeight:.65},{text:"区块链",category:"technology",baseWeight:.6},{text:"5G技术",category:"technology",baseWeight:.55},{text:"物联网",category:"technology",baseWeight:.5},{text:"机器学习",category:"technology",baseWeight:.45},{text:"深度学习",category:"technology",baseWeight:.4},{text:"量子计算",category:"technology",baseWeight:.35},{text:"网络安全",category:"technology",baseWeight:.3},{text:"新能源汽车",category:"technology",baseWeight:.25},{text:"绿色发展",category:"society",baseWeight:.2}].map(t=>({...t,weight:t.baseWeight+Ki(-.1,.1,2)})),PK=()=>({dataGrowthRate:`+${Ki(12,18,1)}%`,serviceAvailability:`${Ki(90,99,1)}%`,avgResponseTime:`${Ki(2,3.5,1)}s`,trendIcons:{growth:"📈",availability:"✅",response:"⏱"}}),mg={metrics:C3(),systemStatus:O3(),sentimentIntensity:A7(),hotTopics:IK(),performance:PK()};function DK(){const[e,t]=U.useState(mg.metrics),[r,n]=U.useState(!1);U.useEffect(()=>{const a=setInterval(()=>{n(!0),setTimeout(()=>{t(C3()),n(!1)},800)},15e3);return()=>clearInterval(a)},[]);const i=["人工智能","数字化转型","新能源汽车","元宇宙","智能制造","碳中和","区块链","5G应用"];return A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"text-center",children:[A.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[A.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"实时数据概览"}),A.jsx(hd,{status:r?"warning":"online",children:r?"更新中":"实时"})]}),A.jsx("p",{className:"text-lg text-muted-foreground",children:"全网监控数据实时更新，掌握舆情动态第一手资料"})]}),A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[A.jsx(Gn,{variant:"primary",className:"transition-all duration-500 hover:scale-[1.02]",children:A.jsxs(co,{variant:"primary",children:[A.jsx(ca,{children:"总监控数据"}),A.jsx(Yi,{variant:"primary",children:e.totalData.toLocaleString()}),A.jsx(Zi,{trend:"up",value:e.trends.total,icon:A.jsx("span",{children:"📊"})})]})}),A.jsx(Gn,{variant:"success",className:"transition-all duration-500 hover:scale-[1.02]",children:A.jsxs(co,{variant:"success",children:[A.jsx(ca,{children:"正面情感"}),A.jsx(Yi,{variant:"success",children:e.positiveCount.toLocaleString()}),A.jsx(Zi,{trend:"up",value:e.trends.positive,icon:A.jsx("span",{children:"😊"})})]})}),A.jsx(Gn,{variant:"warning",className:"transition-all duration-500 hover:scale-[1.02]",children:A.jsxs(co,{variant:"warning",children:[A.jsx(ca,{children:"中性情感"}),A.jsx(Yi,{variant:"warning",children:e.neutralCount.toLocaleString()}),A.jsx(Zi,{trend:"neutral",value:e.trends.neutral,icon:A.jsx("span",{children:"😐"})})]})}),A.jsx(Gn,{variant:"danger",className:"transition-all duration-500 hover:scale-[1.02]",children:A.jsxs(co,{variant:"danger",children:[A.jsx(ca,{children:"负面情感"}),A.jsx(Yi,{variant:"danger",children:e.negativeCount.toLocaleString()}),A.jsx(Zi,{trend:"down",value:e.trends.negative,icon:A.jsx("span",{children:"😔"})})]})})]}),A.jsx(Gn,{size:"lg",className:"bg-gradient-to-br from-background to-muted/20",children:A.jsx(A3,{title:"当前热点话题",subtitle:"基于全网数据分析 · 每小时更新",children:A.jsx(R3,{children:i.map((a,o)=>A.jsx(Fa,{variant:o%2===0?"primary":"secondary",shine:!0,className:"animate-pulse hover:animate-none",style:{animationDelay:`${o*.2}s`,animationDuration:"2s"},children:a},a))})})}),A.jsxs("div",{className:"text-center",children:[A.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"💡 以上数据每15秒自动更新，展示系统实时监控能力"}),A.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 rounded-full",children:[A.jsx("span",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"}),A.jsx("span",{className:"text-sm font-medium text-primary",children:"数据源：全网平台实时采集"})]})]})]})}function LK(){const[e,t]=U.useState(mg.systemStatus),[r,n]=U.useState(new Date);U.useEffect(()=>{const l=setInterval(()=>{t(O3()),n(new Date)},12e3);return()=>clearInterval(l)},[]);const i=l=>l>=95?"online":l>=80?"warning":"offline",a=l=>l>=95?"success":l>=80?"warning":"danger",o=[{name:"数据采集服务",value:e.dataCollection,description:"多平台数据实时抓取",icon:"📡"},{name:"情感分析引擎",value:e.sentimentAnalysis,description:"AI智能情感识别",icon:"🧠"},{name:"实时推送服务",value:e.realTimePush,description:"预警信息即时通知",icon:"📨"},{name:"备份存储系统",value:e.backupService,description:"数据安全保障",icon:"💾"}];return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"text-2xl font-bold text-foreground mb-2",children:"系统运行状态"}),A.jsx("p",{className:"text-muted-foreground",children:"各核心服务运行监控"})]}),A.jsxs("div",{className:"text-right",children:[A.jsx(hd,{status:"online",className:"mb-2",children:"系统正常运行"}),A.jsxs("p",{className:"text-xs text-muted-foreground",children:["最后更新: ",r.toLocaleTimeString()]})]})]}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(l=>A.jsx(Gn,{size:"sm",className:"hover:shadow-lg transition-all duration-300",children:A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:"text-lg",children:l.icon}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-semibold text-sm text-foreground",children:l.name}),A.jsx("p",{className:"text-xs text-muted-foreground",children:l.description})]})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(ru,{status:i(l.value),pulse:!0}),A.jsxs("span",{className:"text-sm font-mono font-bold",children:[l.value,"%"]})]})]}),A.jsx(ou,{value:l.value,variant:a(l.value),size:"sm",shine:l.value>0})]})},l.name))}),A.jsx(Gn,{className:"bg-gradient-to-r from-primary/5 to-secondary/5",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"w-12 h-12 rounded-full bg-success/20 flex items-center justify-center",children:A.jsx("span",{className:"text-2xl",children:"✅"})}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-foreground",children:"系统整体健康度"}),A.jsx("p",{className:"text-sm text-muted-foreground",children:"所有核心服务运行稳定，数据处理正常"})]})]}),A.jsxs("div",{className:"text-right",children:[A.jsxs("div",{className:"text-3xl font-black text-success mb-1",children:[Math.round((e.dataCollection+e.sentimentAnalysis+e.realTimePush+e.backupService)/4),"%"]}),A.jsx("p",{className:"text-xs text-muted-foreground",children:"综合评分"})]})]})})]})}function BK(){return A.jsx("div",{className:"min-h-screen bg-background",children:A.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 space-y-16",children:[A.jsx(MK,{}),A.jsx(DK,{}),A.jsx(NK,{}),A.jsx(LK,{}),A.jsxs("div",{className:"text-center space-y-8",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"开始使用"}),A.jsx("p",{className:"text-lg text-muted-foreground",children:"选择合适的视图，开始您的舆情监控之旅"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto",children:[A.jsxs(ko,{to:"/dashboard-view",className:"group relative overflow-hidden bg-gradient-to-br from-primary to-primary/80 text-primary-foreground rounded-2xl p-8 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300",children:[A.jsx("div",{className:"absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity"}),A.jsxs("div",{className:"relative space-y-3",children:[A.jsx("div",{className:"text-4xl",children:"📊"}),A.jsx("h3",{className:"text-xl font-bold",children:"舆情分析大屏"}),A.jsx("p",{className:"text-primary-foreground/80",children:"完整的数据可视化界面，实时监控和分析"}),A.jsx("div",{className:"flex items-center justify-center text-sm font-medium",children:"立即进入 →"})]})]}),A.jsxs(ko,{to:"/dashboard",className:"group relative overflow-hidden bg-gradient-to-br from-secondary to-secondary/80 text-secondary-foreground rounded-2xl p-8 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300",children:[A.jsx("div",{className:"absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity"}),A.jsxs("div",{className:"relative space-y-3",children:[A.jsx("div",{className:"text-4xl",children:"🗺️"}),A.jsx("h3",{className:"text-xl font-bold",children:"地图监控视图"}),A.jsx("p",{className:"text-secondary-foreground/80",children:"地理位置结合数据分析，区域舆情监控"}),A.jsx("div",{className:"flex items-center justify-center text-sm font-medium",children:"查看地图 →"})]})]}),A.jsxs(ko,{to:"/sentiment-intensity",className:"group relative overflow-hidden bg-gradient-to-br from-warning to-warning/80 text-warning-foreground rounded-2xl p-8 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300",children:[A.jsx("div",{className:"absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity"}),A.jsxs("div",{className:"relative space-y-3",children:[A.jsx("div",{className:"text-4xl",children:"⚙️"}),A.jsx("h3",{className:"text-xl font-bold",children:"情感强度管理"}),A.jsx("p",{className:"text-warning-foreground/80",children:"配置和管理情感分析参数设置"}),A.jsx("div",{className:"flex items-center justify-center text-sm font-medium",children:"进入设置 →"})]})]}),A.jsxs(ko,{to:"/sentiment-event",className:"group relative overflow-hidden bg-gradient-to-br from-success to-success/80 text-success-foreground rounded-2xl p-8 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300",children:[A.jsx("div",{className:"absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity"}),A.jsxs("div",{className:"relative space-y-3",children:[A.jsx("div",{className:"text-4xl",children:"📝"}),A.jsx("h3",{className:"text-xl font-bold",children:"舆情事件管理"}),A.jsx("p",{className:"text-success-foreground/80",children:"管理舆情事件数据，创建、编辑和分析"}),A.jsx("div",{className:"flex items-center justify-center text-sm font-medium",children:"事件管理 →"})]})]})]})]})]})})}var R7={},C7={},sM=e=>C7[e],go=(e,t)=>{C7[e]=t},FK=e=>R7[e],Kp=(e,t)=>{R7[e]=t},lM={},cx={},fx=34,bv=10,dx=13;function O7(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+'] || ""'}).join(",")+"}")}function UK(e,t){var r=O7(e);return function(n,i){return t(r(n),i,e)}}function uM(e){var t=Object.create(null),r=[];return e.forEach(function(n){for(var i in n)i in t||r.push(t[i]=i)}),r}function Ua(e,t){var r=e+"",n=r.length;return n<t?new Array(t-n+1).join(0)+r:r}function kK(e){return e<0?"-"+Ua(-e,6):e>9999?"+"+Ua(e,6):Ua(e,4)}function jK(e){var t=e.getUTCHours(),r=e.getUTCMinutes(),n=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":kK(e.getUTCFullYear())+"-"+Ua(e.getUTCMonth()+1,2)+"-"+Ua(e.getUTCDate(),2)+(i?"T"+Ua(t,2)+":"+Ua(r,2)+":"+Ua(n,2)+"."+Ua(i,3)+"Z":n?"T"+Ua(t,2)+":"+Ua(r,2)+":"+Ua(n,2)+"Z":r||t?"T"+Ua(t,2)+":"+Ua(r,2)+"Z":"")}function zK(e){var t=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function n(p,v){var g,_,E=i(p,function(b,S){if(g)return g(b,S-1);_=b,g=v?UK(b,v):O7(b)});return E.columns=_||[],E}function i(p,v){var g=[],_=p.length,E=0,b=0,S,T=_<=0,C=!1;p.charCodeAt(_-1)===bv&&--_,p.charCodeAt(_-1)===dx&&--_;function M(){if(T)return cx;if(C)return C=!1,lM;var I,N=E,j;if(p.charCodeAt(N)===fx){for(;E++<_&&p.charCodeAt(E)!==fx||p.charCodeAt(++E)===fx;);return(I=E)>=_?T=!0:(j=p.charCodeAt(E++))===bv?C=!0:j===dx&&(C=!0,p.charCodeAt(E)===bv&&++E),p.slice(N+1,I-1).replace(/""/g,'"')}for(;E<_;){if((j=p.charCodeAt(I=E++))===bv)C=!0;else if(j===dx)C=!0,p.charCodeAt(E)===bv&&++E;else if(j!==r)continue;return p.slice(N,I)}return T=!0,p.slice(N,_)}for(;(S=M())!==cx;){for(var D=[];S!==lM&&S!==cx;)D.push(S),S=M();v&&(D=v(D,b++))==null||g.push(D)}return g}function a(p,v){return p.map(function(g){return v.map(function(_){return h(g[_])}).join(e)})}function o(p,v){return v==null&&(v=uM(p)),[v.map(h).join(e)].concat(a(p,v)).join(`
`)}function l(p,v){return v==null&&(v=uM(p)),a(p,v).join(`
`)}function c(p){return p.map(f).join(`
`)}function f(p){return p.map(h).join(e)}function h(p){return p==null?"":p instanceof Date?jK(p):t.test(p+="")?'"'+p.replace(/"/g,'""')+'"':p}return{parse:n,parseRows:i,format:o,formatBody:l,formatRows:c,formatRow:f,formatValue:h}}var VK=zK(","),HK=VK.parse;function Rg(e,t,r){r===void 0&&(r={});var n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function w3(e,t,r){r===void 0&&(r={});for(var n=0,i=e;n<i.length;n++){var a=i[n];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<a[a.length-1].length;o++)if(a[a.length-1][o]!==a[0][o])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return Rg(l,t,r)}function XK(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:e};return Rg(n,t,r)}function qK(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function GK(e,t,r){r===void 0&&(r={});var n={type:"MultiPolygon",coordinates:e};return Rg(n,t,r)}function w7(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function cM(e){return e.type==="Feature"?e.geometry:e}function N7(e,t,r){if(e!==null)for(var n,i,a,o,l,c,f,h=0,p=0,v,g=e.type,_=g==="FeatureCollection",E=g==="Feature",b=_?e.features.length:1,S=0;S<b;S++){f=_?e.features[S].geometry:E?e.geometry:e,v=f?f.type==="GeometryCollection":!1,l=v?f.geometries.length:1;for(var T=0;T<l;T++){var C=0,M=0;if(o=v?f.geometries[T]:f,o!==null){c=o.coordinates;var D=o.type;switch(h=0,D){case null:break;case"Point":if(t(c,p,S,C,M)===!1)return!1;p++,C++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(t(c[n],p,S,C,M)===!1)return!1;p++,D==="MultiPoint"&&C++}D==="LineString"&&C++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(i=0;i<c[n].length-h;i++){if(t(c[n][i],p,S,C,M)===!1)return!1;p++}D==="MultiLineString"&&C++,D==="Polygon"&&M++}D==="Polygon"&&C++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for(M=0,i=0;i<c[n].length;i++){for(a=0;a<c[n][i].length-h;a++){if(t(c[n][i][a],p,S,C,M)===!1)return!1;p++}M++}C++}break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(N7(o.geometries[n],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function WK(e,t){var r,n,i,a,o,l,c,f,h,p,v=0,g=e.type==="FeatureCollection",_=e.type==="Feature",E=g?e.features.length:1;for(r=0;r<E;r++){for(l=g?e.features[r].geometry:_?e.geometry:e,f=g?e.features[r].properties:_?e.properties:{},h=g?e.features[r].bbox:_?e.bbox:void 0,p=g?e.features[r].id:_?e.id:void 0,c=l?l.type==="GeometryCollection":!1,o=c?l.geometries.length:1,i=0;i<o;i++){if(a=c?l.geometries[i]:l,a===null){if(t(null,v,f,h,p)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,v,f,h,p)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<a.geometries.length;n++)if(t(a.geometries[n],v,f,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function M7(e,t){WK(e,function(r,n,i,a,o){var l=r===null?null:r.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return t(Rg(r,i,{bbox:a,id:o}),n,0)===!1?!1:void 0}var c;switch(l){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon";break}for(var f=0;f<r.coordinates.length;f++){var h=r.coordinates[f],p={type:c,coordinates:h};if(t(Rg(p,i),n,f)===!1)return!1}})}var xy={REGISTERED_PROTOCOLS:{}},$K=Object.defineProperty,YK=Object.defineProperties,ZK=Object.getOwnPropertyDescriptors,fM=Object.getOwnPropertySymbols,KK=Object.prototype.hasOwnProperty,QK=Object.prototype.propertyIsEnumerable,dM=(e,t,r)=>t in e?$K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,N3=(e,t)=>{for(var r in t||(t={}))KK.call(t,r)&&dM(e,r,t[r]);if(fM)for(var r of fM(t))QK.call(t,r)&&dM(e,r,t[r]);return e},M3=(e,t)=>YK(e,ZK(t)),I3=e=>xy.REGISTERED_PROTOCOLS[e.substring(0,e.indexOf("://"))],JK=class extends Error{constructor(e,t,r,n){super(`AJAXError: ${t} (${e}): ${r}`),this.status=e,this.statusText=t,this.url=r,this.body=n}};function I7(e,t){const r=new XMLHttpRequest,n=Array.isArray(e.url)?e.url[0]:e.url;r.open(e.method||"GET",n,!0),e.type==="arrayBuffer"&&(r.responseType="arraybuffer");for(const i in e.headers)e.headers.hasOwnProperty(i)&&r.setRequestHeader(i,e.headers[i]);return e.type==="json"&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials=e.credentials==="include",r.onerror=()=>{t(new Error(r.statusText))},r.onload=()=>{if((r.status>=200&&r.status<300||r.status===0)&&r.response!==null){let i=r.response;if(e.type==="json")try{i=JSON.parse(r.response)}catch(a){return t(a)}t(null,i,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"),r)}else{const i=new Blob([r.response],{type:r.getResponseHeader("Content-Type")});t(new JK(r.status,r.statusText,n.toString(),i))}},r.cancel=r.abort,r.send(e.body),r}function eQ(e){return new Promise((t,r)=>{I7(e,(n,i,a,o,l)=>{n?r({err:n,data:null,xhr:l}):t({err:null,data:i,cacheControl:a,expires:o,xhr:l})})})}function P3(e,t){return I7(e,t)}var tQ=(e,t)=>(I3(e.url)||P3)(M3(N3({},e),{type:"json"}),t),D3=(e,t)=>(I3(e.url)||P3)(M3(N3({},e),{type:"arrayBuffer"}),t),rQ=(e,t)=>P3(M3(N3({},e),{method:"GET"}),t),hM="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function P7(e,t){const r=new window.Image,n=window.URL||window.webkitURL;r.crossOrigin="anonymous",r.onload=()=>{t(null,r),n.revokeObjectURL(r.src),r.onload=null,window.requestAnimationFrame(()=>{r.src=hM})},r.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const i=new Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?n.createObjectURL(i):hM}function D7(e,t){const r=new Blob([new Uint8Array(e)],{type:"image/png"});createImageBitmap(r).then(n=>{t(null,n)}).catch(n=>{t(new Error(`Could not load image because of ${n.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}var C2=(e,t,r)=>{const n=(i,a)=>{if(i)t(i);else if(a){const o=typeof createImageBitmap=="function",l=r?r(a):a;o?D7(l,t):P7(l,t)}};return e.type==="json"?tQ(e,n):D3(e,n)},nQ=(e,t)=>{typeof createImageBitmap=="function"?D7(e,t):P7(e,t)},L7=(e=>(e.CENTER="center",e.TOP="top",e["TOP-LEFT"]="top-left",e["TOP-RIGHT"]="top-right",e.BOTTOM="bottom",e["BOTTOM-LEFT"]="bottom-left",e["BOTTOM-RIGHT"]="bottom-right",e.LEFT="left",e.RIGHT="right",e))(L7||{}),O2={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function iQ(e,t,r){const n=e.classList;for(const i in O2)O2.hasOwnProperty(i)&&n.remove(`l7-${r}-anchor-${i}`);n.add(`l7-${r}-anchor-${t}`)}function L3(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function B7(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Yg(){}var Cg=.7,t1=1/Cg,hp="\\s*([+-]?\\d+)\\s*",Og="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",cl="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",aQ=/^#([0-9a-f]{3,8})$/,oQ=new RegExp("^rgb\\("+[hp,hp,hp]+"\\)$"),sQ=new RegExp("^rgb\\("+[cl,cl,cl]+"\\)$"),lQ=new RegExp("^rgba\\("+[hp,hp,hp,Og]+"\\)$"),uQ=new RegExp("^rgba\\("+[cl,cl,cl,Og]+"\\)$"),cQ=new RegExp("^hsl\\("+[Og,cl,cl]+"\\)$"),fQ=new RegExp("^hsla\\("+[Og,cl,cl,Og]+"\\)$"),pM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};L3(Yg,Ap,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:mM,formatHex:mM,formatHsl:dQ,formatRgb:vM,toString:vM});function mM(){return this.rgb().formatHex()}function dQ(){return F7(this).formatHsl()}function vM(){return this.rgb().formatRgb()}function Ap(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=aQ.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?gM(t):r===3?new fo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Y_(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Y_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=oQ.exec(e))?new fo(t[1],t[2],t[3],1):(t=sQ.exec(e))?new fo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lQ.exec(e))?Y_(t[1],t[2],t[3],t[4]):(t=uQ.exec(e))?Y_(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cQ.exec(e))?EM(t[1],t[2]/100,t[3]/100,1):(t=fQ.exec(e))?EM(t[1],t[2]/100,t[3]/100,t[4]):pM.hasOwnProperty(e)?gM(pM[e]):e==="transparent"?new fo(NaN,NaN,NaN,0):null}function gM(e){return new fo(e>>16&255,e>>8&255,e&255,1)}function Y_(e,t,r,n){return n<=0&&(e=t=r=NaN),new fo(e,t,r,n)}function hQ(e){return e instanceof Yg||(e=Ap(e)),e?(e=e.rgb(),new fo(e.r,e.g,e.b,e.opacity)):new fo}function r1(e,t,r,n){return arguments.length===1?hQ(e):new fo(e,t,r,n??1)}function fo(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}L3(fo,r1,B7(Yg,{brighter:function(e){return e=e==null?t1:Math.pow(t1,e),new fo(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Cg:Math.pow(Cg,e),new fo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_M,formatHex:_M,formatRgb:yM,toString:yM}));function _M(){return"#"+hx(this.r)+hx(this.g)+hx(this.b)}function yM(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function hx(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function EM(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new il(e,t,r,n)}function F7(e){if(e instanceof il)return new il(e.h,e.s,e.l,e.opacity);if(e instanceof Yg||(e=Ap(e)),!e)return new il;if(e instanceof il)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),o=NaN,l=a-i,c=(a+i)/2;return l?(t===a?o=(r-n)/l+(r<n)*6:r===a?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?a+i:2-a-i,o*=60):l=c>0&&c<1?0:o,new il(o,l,c,e.opacity)}function pQ(e,t,r,n){return arguments.length===1?F7(e):new il(e,t,r,n??1)}function il(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}L3(il,pQ,B7(Yg,{brighter:function(e){return e=e==null?t1:Math.pow(t1,e),new il(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Cg:Math.pow(Cg,e),new il(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new fo(px(e>=240?e-240:e+120,i,n),px(e,i,n),px(e<120?e+240:e-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function px(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}function pn(e){const t=Ap(e),r=[0,0,0,0];return t!=null&&(r[0]=t.r/255,r[1]=t.g/255,r[2]=t.b/255,r[3]=t.opacity),r}function nd(e){const t=e&&e[0],r=e&&e[1],n=e&&e[2];return t+r*256+n*65536-1}function Rp(e){return[e+1&255,e+1>>8&255,e+1>>8>>8&255]}function mQ(e){let t=window.document.createElement("canvas"),r=t.getContext("2d");t.width=256,t.height=1;let n=null;const i=r.createLinearGradient(0,0,256,1),a=e.positions[0],o=e.positions[e.positions.length-1];for(let l=0;l<e.colors.length;++l){const c=(e.positions[l]-a)/(o-a);i.addColorStop(c,e.colors[l])}return r.fillStyle=i,r.fillRect(0,0,256,1),n=new Uint8ClampedArray(r.getImageData(0,0,256,1).data),t=null,r=null,{data:n,width:256,height:1}}function vQ(e,t){let r=window.document.createElement("canvas"),n=r.getContext("2d");r.width=256,r.height=1;const i=n.createLinearGradient(0,0,256,1),a=t[1]-t[0];for(let c=0;c<e.colors.length;++c){const f=Math.max((e.positions[c]-t[0])/a,0);i.addColorStop(f,e.colors[c])}n.fillStyle=i,n.fillRect(0,0,256,1);const o=n.getImageData(0,0,256,1).data,l=B3(n,o);return r=null,n=null,l}function gQ(e){let t=window.document.createElement("canvas"),r=t.getContext("2d");t.width=256,t.height=1;const n=r.createImageData(256,1);return n.data.fill(0),e.positions.forEach((i,a)=>{const o=pn(e.colors[a]);n.data[i*4+0]=o[0]*255,n.data[i*4+1]=o[1]*255,n.data[i*4+2]=o[2]*255,n.data[i*4+3]=o[3]*255}),t=null,r=null,n}function _Q(e){let t=window.document.createElement("canvas"),r=t.getContext("2d");r.globalAlpha=1,t.width=256,t.height=1;const n=256/e.colors.length;for(let o=0;o<e.colors.length;o++)r.beginPath(),r.lineWidth=2,r.strokeStyle=e.colors[o],r.moveTo(o*n,0),r.lineTo((o+1)*n,0),r.stroke();const i=r.getImageData(0,0,256,1).data,a=B3(r,i);return t=null,r=null,a}function yQ(e,t){let r=window.document.createElement("canvas"),n=r.getContext("2d");n.globalAlpha=1,r.width=256,r.height=1;const i=t[1]-t[0];e.positions.length-e.colors.length!==1&&console.warn("positions 的数字个数应当比 colors 的样式多一个,poisitions 的首尾值一般为数据的最大最新值");for(let l=0;l<e.colors.length;l++)n.beginPath(),n.lineWidth=2,n.strokeStyle=e.colors[l],n.moveTo((e.positions[l]-t[0])/i*255,0),n.lineTo((e.positions[l+1]-t[0])/i*255,0),n.stroke();const a=n.getImageData(0,0,256,1).data,o=B3(n,a);return r=null,n=null,o}function B3(e,t){const r=e.createImageData(256,1);for(let n=0;n<r.data.length;n+=4)r.data[n+0]=t[n+0],r.data[n+1]=t[n+1],r.data[n+2]=t[n+2],r.data[n+3]=t[n+3];return r}function F3(e){switch(e?.type){case"cat":return[0,255];default:return[0,1]}}var mx,bM;function EQ(){if(bM)return mx;bM=1;function e(t,r,n){return t===t&&(n!==void 0&&(t=t<=n?t:n),r!==void 0&&(t=t>=r?t:r)),t}return mx=e,mx}var vx,xM;function bQ(){if(xM)return vx;xM=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return vx=t,vx}var gx,SM;function xQ(){if(SM)return gx;SM=1;var e=bQ(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return gx=r,gx}var _x,TM;function Vo(){if(TM)return _x;TM=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return _x=e,_x}var yx,AM;function U7(){if(AM)return yx;AM=1;var e=typeof L_=="object"&&L_&&L_.Object===Object&&L_;return yx=e,yx}var Ex,RM;function Cs(){if(RM)return Ex;RM=1;var e=U7(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Ex=r,Ex}var bx,CM;function Zg(){if(CM)return bx;CM=1;var e=Cs(),t=e.Symbol;return bx=t,bx}var xx,OM;function SQ(){if(OM)return xx;OM=1;var e=Zg(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function a(o){var l=r.call(o,i),c=o[i];try{o[i]=void 0;var f=!0}catch{}var h=n.call(o);return f&&(l?o[i]=c:delete o[i]),h}return xx=a,xx}var Sx,wM;function TQ(){if(wM)return Sx;wM=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return Sx=r,Sx}var Tx,NM;function vu(){if(NM)return Tx;NM=1;var e=Zg(),t=SQ(),r=TQ(),n="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?i:n:a&&a in Object(l)?t(l):r(l)}return Tx=o,Tx}var Ax,MM;function Ho(){if(MM)return Ax;MM=1;function e(t){return t!=null&&typeof t=="object"}return Ax=e,Ax}var Rx,IM;function cE(){if(IM)return Rx;IM=1;var e=vu(),t=Ho(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return Rx=n,Rx}var Cx,PM;function k7(){if(PM)return Cx;PM=1;var e=xQ(),t=Vo(),r=cE(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(f){if(typeof f=="number")return f;if(r(f))return n;if(t(f)){var h=typeof f.valueOf=="function"?f.valueOf():f;f=t(h)?h+"":h}if(typeof f!="string")return f===0?f:+f;f=e(f);var p=a.test(f);return p||o.test(f)?l(f.slice(2),p?2:8):i.test(f)?n:+f}return Cx=c,Cx}var Ox,DM;function AQ(){if(DM)return Ox;DM=1;var e=EQ(),t=k7();function r(n,i,a){return a===void 0&&(a=i,i=void 0),a!==void 0&&(a=t(a),a=a===a?a:0),i!==void 0&&(i=t(i),i=i===i?i:0),e(t(n),i,a)}return Ox=r,Ox}var RQ=AQ();const CQ=Kr(RQ);var Nx,LM;function OQ(){if(LM)return Nx;LM=1;function e(){this.__data__=[],this.size=0}return Nx=e,Nx}var Mx,BM;function Kg(){if(BM)return Mx;BM=1;function e(t,r){return t===r||t!==t&&r!==r}return Mx=e,Mx}var Ix,FM;function fE(){if(FM)return Ix;FM=1;var e=Kg();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return Ix=t,Ix}var Px,UM;function wQ(){if(UM)return Px;UM=1;var e=fE(),t=Array.prototype,r=t.splice;function n(i){var a=this.__data__,o=e(a,i);if(o<0)return!1;var l=a.length-1;return o==l?a.pop():r.call(a,o,1),--this.size,!0}return Px=n,Px}var Dx,kM;function NQ(){if(kM)return Dx;kM=1;var e=fE();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return Dx=t,Dx}var Lx,jM;function MQ(){if(jM)return Lx;jM=1;var e=fE();function t(r){return e(this.__data__,r)>-1}return Lx=t,Lx}var Bx,zM;function IQ(){if(zM)return Bx;zM=1;var e=fE();function t(r,n){var i=this.__data__,a=e(i,r);return a<0?(++this.size,i.push([r,n])):i[a][1]=n,this}return Bx=t,Bx}var Fx,VM;function dE(){if(VM)return Fx;VM=1;var e=OQ(),t=wQ(),r=NQ(),n=MQ(),i=IQ();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var f=o[l];this.set(f[0],f[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,Fx=a,Fx}var Ux,HM;function PQ(){if(HM)return Ux;HM=1;var e=dE();function t(){this.__data__=new e,this.size=0}return Ux=t,Ux}var kx,XM;function DQ(){if(XM)return kx;XM=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return kx=e,kx}var jx,qM;function LQ(){if(qM)return jx;qM=1;function e(t){return this.__data__.get(t)}return jx=e,jx}var zx,GM;function BQ(){if(GM)return zx;GM=1;function e(t){return this.__data__.has(t)}return zx=e,zx}var Vx,WM;function hE(){if(WM)return Vx;WM=1;var e=vu(),t=Vo(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==n||c==i||c==r||c==a}return Vx=o,Vx}var Hx,$M;function FQ(){if($M)return Hx;$M=1;var e=Cs(),t=e["__core-js_shared__"];return Hx=t,Hx}var Xx,YM;function UQ(){if(YM)return Xx;YM=1;var e=FQ(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return Xx=r,Xx}var qx,ZM;function j7(){if(ZM)return qx;ZM=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return qx=r,qx}var Gx,KM;function kQ(){if(KM)return Gx;KM=1;var e=hE(),t=UQ(),r=Vo(),n=j7(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,f=l.hasOwnProperty,h=RegExp("^"+c.call(f).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(v){if(!r(v)||t(v))return!1;var g=e(v)?h:a;return g.test(n(v))}return Gx=p,Gx}var Wx,QM;function jQ(){if(QM)return Wx;QM=1;function e(t,r){return t?.[r]}return Wx=e,Wx}var $x,JM;function Ad(){if(JM)return $x;JM=1;var e=kQ(),t=jQ();function r(n,i){var a=t(n,i);return e(a)?a:void 0}return $x=r,$x}var Yx,eI;function U3(){if(eI)return Yx;eI=1;var e=Ad(),t=Cs(),r=e(t,"Map");return Yx=r,Yx}var Zx,tI;function pE(){if(tI)return Zx;tI=1;var e=Ad(),t=e(Object,"create");return Zx=t,Zx}var Kx,rI;function zQ(){if(rI)return Kx;rI=1;var e=pE();function t(){this.__data__=e?e(null):{},this.size=0}return Kx=t,Kx}var Qx,nI;function VQ(){if(nI)return Qx;nI=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return Qx=e,Qx}var Jx,iI;function HQ(){if(iI)return Jx;iI=1;var e=pE(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(a){var o=this.__data__;if(e){var l=o[a];return l===t?void 0:l}return n.call(o,a)?o[a]:void 0}return Jx=i,Jx}var eS,aI;function XQ(){if(aI)return eS;aI=1;var e=pE(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var a=this.__data__;return e?a[i]!==void 0:r.call(a,i)}return eS=n,eS}var tS,oI;function qQ(){if(oI)return tS;oI=1;var e=pE(),t="__lodash_hash_undefined__";function r(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=e&&i===void 0?t:i,this}return tS=r,tS}var rS,sI;function GQ(){if(sI)return rS;sI=1;var e=zQ(),t=VQ(),r=HQ(),n=XQ(),i=qQ();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var f=o[l];this.set(f[0],f[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,rS=a,rS}var nS,lI;function WQ(){if(lI)return nS;lI=1;var e=GQ(),t=dE(),r=U3();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return nS=n,nS}var iS,uI;function $Q(){if(uI)return iS;uI=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return iS=e,iS}var aS,cI;function mE(){if(cI)return aS;cI=1;var e=$Q();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return aS=t,aS}var oS,fI;function YQ(){if(fI)return oS;fI=1;var e=mE();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return oS=t,oS}var sS,dI;function ZQ(){if(dI)return sS;dI=1;var e=mE();function t(r){return e(this,r).get(r)}return sS=t,sS}var lS,hI;function KQ(){if(hI)return lS;hI=1;var e=mE();function t(r){return e(this,r).has(r)}return lS=t,lS}var uS,pI;function QQ(){if(pI)return uS;pI=1;var e=mE();function t(r,n){var i=e(this,r),a=i.size;return i.set(r,n),this.size+=i.size==a?0:1,this}return uS=t,uS}var cS,mI;function k3(){if(mI)return cS;mI=1;var e=WQ(),t=YQ(),r=ZQ(),n=KQ(),i=QQ();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var f=o[l];this.set(f[0],f[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,cS=a,cS}var fS,vI;function JQ(){if(vI)return fS;vI=1;var e=dE(),t=U3(),r=k3(),n=200;function i(a,o){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<n-1)return c.push([a,o]),this.size=++l.size,this;l=this.__data__=new r(c)}return l.set(a,o),this.size=l.size,this}return fS=i,fS}var dS,gI;function j3(){if(gI)return dS;gI=1;var e=dE(),t=PQ(),r=DQ(),n=LQ(),i=BQ(),a=JQ();function o(l){var c=this.__data__=new e(l);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=i,o.prototype.set=a,dS=o,dS}var hS,_I;function eJ(){if(_I)return hS;_I=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return hS=e,hS}var pS,yI;function z7(){if(yI)return pS;yI=1;var e=Ad(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return pS=t,pS}var mS,EI;function z3(){if(EI)return mS;EI=1;var e=z7();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return mS=t,mS}var vS,bI;function V7(){if(bI)return vS;bI=1;var e=z3(),t=Kg(),r=Object.prototype,n=r.hasOwnProperty;function i(a,o,l){var c=a[o];(!(n.call(a,o)&&t(c,l))||l===void 0&&!(o in a))&&e(a,o,l)}return vS=i,vS}var gS,xI;function Qg(){if(xI)return gS;xI=1;var e=V7(),t=z3();function r(n,i,a,o){var l=!a;a||(a={});for(var c=-1,f=i.length;++c<f;){var h=i[c],p=o?o(a[h],n[h],h,a,n):void 0;p===void 0&&(p=n[h]),l?t(a,h,p):e(a,h,p)}return a}return gS=r,gS}var _S,SI;function tJ(){if(SI)return _S;SI=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return _S=e,_S}var yS,TI;function rJ(){if(TI)return yS;TI=1;var e=vu(),t=Ho(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return yS=n,yS}var ES,AI;function H7(){if(AI)return ES;AI=1;var e=rJ(),t=Ho(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,a=e((function(){return arguments})())?e:function(o){return t(o)&&n.call(o,"callee")&&!i.call(o,"callee")};return ES=a,ES}var bS,RI;function gu(){if(RI)return bS;RI=1;var e=Array.isArray;return bS=e,bS}var Kv={exports:{}},xS,CI;function nJ(){if(CI)return xS;CI=1;function e(){return!1}return xS=e,xS}Kv.exports;var OI;function vE(){return OI||(OI=1,(function(e,t){var r=Cs(),n=nJ(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,f=c||n;e.exports=f})(Kv,Kv.exports)),Kv.exports}var SS,wI;function X7(){if(wI)return SS;wI=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var a=typeof n;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return SS=r,SS}var TS,NI;function q7(){if(NI)return TS;NI=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return TS=t,TS}var AS,MI;function iJ(){if(MI)return AS;MI=1;var e=vu(),t=q7(),r=Ho(),n="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",f="[object Map]",h="[object Number]",p="[object Object]",v="[object RegExp]",g="[object Set]",_="[object String]",E="[object WeakMap]",b="[object ArrayBuffer]",S="[object DataView]",T="[object Float32Array]",C="[object Float64Array]",M="[object Int8Array]",D="[object Int16Array]",I="[object Int32Array]",N="[object Uint8Array]",j="[object Uint8ClampedArray]",re="[object Uint16Array]",Q="[object Uint32Array]",X={};X[T]=X[C]=X[M]=X[D]=X[I]=X[N]=X[j]=X[re]=X[Q]=!0,X[n]=X[i]=X[b]=X[a]=X[S]=X[o]=X[l]=X[c]=X[f]=X[h]=X[p]=X[v]=X[g]=X[_]=X[E]=!1;function R(P){return r(P)&&t(P.length)&&!!X[e(P)]}return AS=R,AS}var RS,II;function gE(){if(II)return RS;II=1;function e(t){return function(r){return t(r)}}return RS=e,RS}var Qv={exports:{}};Qv.exports;var PI;function V3(){return PI||(PI=1,(function(e,t){var r=U7(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,o=a&&r.process,l=(function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Qv,Qv.exports)),Qv.exports}var CS,DI;function _E(){if(DI)return CS;DI=1;var e=iJ(),t=gE(),r=V3(),n=r&&r.isTypedArray,i=n?t(n):e;return CS=i,CS}var OS,LI;function G7(){if(LI)return OS;LI=1;var e=tJ(),t=H7(),r=gu(),n=vE(),i=X7(),a=_E(),o=Object.prototype,l=o.hasOwnProperty;function c(f,h){var p=r(f),v=!p&&t(f),g=!p&&!v&&n(f),_=!p&&!v&&!g&&a(f),E=p||v||g||_,b=E?e(f.length,String):[],S=b.length;for(var T in f)(h||l.call(f,T))&&!(E&&(T=="length"||g&&(T=="offset"||T=="parent")||_&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||i(T,S)))&&b.push(T);return b}return OS=c,OS}var wS,BI;function H3(){if(BI)return wS;BI=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return wS=t,wS}var NS,FI;function W7(){if(FI)return NS;FI=1;function e(t,r){return function(n){return t(r(n))}}return NS=e,NS}var MS,UI;function aJ(){if(UI)return MS;UI=1;var e=W7(),t=e(Object.keys,Object);return MS=t,MS}var IS,kI;function oJ(){if(kI)return IS;kI=1;var e=H3(),t=aJ(),r=Object.prototype,n=r.hasOwnProperty;function i(a){if(!e(a))return t(a);var o=[];for(var l in Object(a))n.call(a,l)&&l!="constructor"&&o.push(l);return o}return IS=i,IS}var PS,jI;function yE(){if(jI)return PS;jI=1;var e=hE(),t=q7();function r(n){return n!=null&&t(n.length)&&!e(n)}return PS=r,PS}var DS,zI;function X3(){if(zI)return DS;zI=1;var e=G7(),t=oJ(),r=yE();function n(i){return r(i)?e(i):t(i)}return DS=n,DS}var LS,VI;function sJ(){if(VI)return LS;VI=1;var e=Qg(),t=X3();function r(n,i){return n&&e(i,t(i),n)}return LS=r,LS}var BS,HI;function lJ(){if(HI)return BS;HI=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return BS=e,BS}var FS,XI;function uJ(){if(XI)return FS;XI=1;var e=Vo(),t=H3(),r=lJ(),n=Object.prototype,i=n.hasOwnProperty;function a(o){if(!e(o))return r(o);var l=t(o),c=[];for(var f in o)f=="constructor"&&(l||!i.call(o,f))||c.push(f);return c}return FS=a,FS}var US,qI;function Jg(){if(qI)return US;qI=1;var e=G7(),t=uJ(),r=yE();function n(i){return r(i)?e(i,!0):t(i)}return US=n,US}var kS,GI;function cJ(){if(GI)return kS;GI=1;var e=Qg(),t=Jg();function r(n,i){return n&&e(i,t(i),n)}return kS=r,kS}var Jv={exports:{}};Jv.exports;var WI;function $7(){return WI||(WI=1,(function(e,t){var r=Cs(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,o=a?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(f,h){if(h)return f.slice();var p=f.length,v=l?l(p):new f.constructor(p);return f.copy(v),v}e.exports=c})(Jv,Jv.exports)),Jv.exports}var jS,$I;function q3(){if($I)return jS;$I=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return jS=e,jS}var zS,YI;function fJ(){if(YI)return zS;YI=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,a=0,o=[];++n<i;){var l=t[n];r(l,n,t)&&(o[a++]=l)}return o}return zS=e,zS}var VS,ZI;function Y7(){if(ZI)return VS;ZI=1;function e(){return[]}return VS=e,VS}var HS,KI;function G3(){if(KI)return HS;KI=1;var e=fJ(),t=Y7(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(l){return n.call(o,l)}))}:t;return HS=a,HS}var XS,QI;function dJ(){if(QI)return XS;QI=1;var e=Qg(),t=G3();function r(n,i){return e(n,t(n),i)}return XS=r,XS}var qS,JI;function Z7(){if(JI)return qS;JI=1;function e(t,r){for(var n=-1,i=r.length,a=t.length;++n<i;)t[a+n]=r[n];return t}return qS=e,qS}var GS,e4;function W3(){if(e4)return GS;e4=1;var e=W7(),t=e(Object.getPrototypeOf,Object);return GS=t,GS}var WS,t4;function K7(){if(t4)return WS;t4=1;var e=Z7(),t=W3(),r=G3(),n=Y7(),i=Object.getOwnPropertySymbols,a=i?function(o){for(var l=[];o;)e(l,r(o)),o=t(o);return l}:n;return WS=a,WS}var $S,r4;function hJ(){if(r4)return $S;r4=1;var e=Qg(),t=K7();function r(n,i){return e(n,t(n),i)}return $S=r,$S}var YS,n4;function Q7(){if(n4)return YS;n4=1;var e=Z7(),t=gu();function r(n,i,a){var o=i(n);return t(n)?o:e(o,a(n))}return YS=r,YS}var ZS,i4;function J7(){if(i4)return ZS;i4=1;var e=Q7(),t=G3(),r=X3();function n(i){return e(i,r,t)}return ZS=n,ZS}var KS,a4;function pJ(){if(a4)return KS;a4=1;var e=Q7(),t=K7(),r=Jg();function n(i){return e(i,r,t)}return KS=n,KS}var QS,o4;function mJ(){if(o4)return QS;o4=1;var e=Ad(),t=Cs(),r=e(t,"DataView");return QS=r,QS}var JS,s4;function vJ(){if(s4)return JS;s4=1;var e=Ad(),t=Cs(),r=e(t,"Promise");return JS=r,JS}var eT,l4;function ek(){if(l4)return eT;l4=1;var e=Ad(),t=Cs(),r=e(t,"Set");return eT=r,eT}var tT,u4;function gJ(){if(u4)return tT;u4=1;var e=Ad(),t=Cs(),r=e(t,"WeakMap");return tT=r,tT}var rT,c4;function EE(){if(c4)return rT;c4=1;var e=mJ(),t=U3(),r=vJ(),n=ek(),i=gJ(),a=vu(),o=j7(),l="[object Map]",c="[object Object]",f="[object Promise]",h="[object Set]",p="[object WeakMap]",v="[object DataView]",g=o(e),_=o(t),E=o(r),b=o(n),S=o(i),T=a;return(e&&T(new e(new ArrayBuffer(1)))!=v||t&&T(new t)!=l||r&&T(r.resolve())!=f||n&&T(new n)!=h||i&&T(new i)!=p)&&(T=function(C){var M=a(C),D=M==c?C.constructor:void 0,I=D?o(D):"";if(I)switch(I){case g:return v;case _:return l;case E:return f;case b:return h;case S:return p}return M}),rT=T,rT}var nT,f4;function _J(){if(f4)return nT;f4=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,a=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(a.index=n.index,a.input=n.input),a}return nT=r,nT}var iT,d4;function tk(){if(d4)return iT;d4=1;var e=Cs(),t=e.Uint8Array;return iT=t,iT}var aT,h4;function $3(){if(h4)return aT;h4=1;var e=tk();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return aT=t,aT}var oT,p4;function yJ(){if(p4)return oT;p4=1;var e=$3();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return oT=t,oT}var sT,m4;function EJ(){if(m4)return sT;m4=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return sT=t,sT}var lT,v4;function bJ(){if(v4)return lT;v4=1;var e=Zg(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return lT=n,lT}var uT,g4;function rk(){if(g4)return uT;g4=1;var e=$3();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return uT=t,uT}var cT,_4;function xJ(){if(_4)return cT;_4=1;var e=$3(),t=yJ(),r=EJ(),n=bJ(),i=rk(),a="[object Boolean]",o="[object Date]",l="[object Map]",c="[object Number]",f="[object RegExp]",h="[object Set]",p="[object String]",v="[object Symbol]",g="[object ArrayBuffer]",_="[object DataView]",E="[object Float32Array]",b="[object Float64Array]",S="[object Int8Array]",T="[object Int16Array]",C="[object Int32Array]",M="[object Uint8Array]",D="[object Uint8ClampedArray]",I="[object Uint16Array]",N="[object Uint32Array]";function j(re,Q,X){var R=re.constructor;switch(Q){case g:return e(re);case a:case o:return new R(+re);case _:return t(re,X);case E:case b:case S:case T:case C:case M:case D:case I:case N:return i(re,X);case l:return new R;case c:case p:return new R(re);case f:return r(re);case h:return new R;case v:return n(re)}}return cT=j,cT}var fT,y4;function SJ(){if(y4)return fT;y4=1;var e=Vo(),t=Object.create,r=(function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var a=new n;return n.prototype=void 0,a}})();return fT=r,fT}var dT,E4;function nk(){if(E4)return dT;E4=1;var e=SJ(),t=W3(),r=H3();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return dT=n,dT}var hT,b4;function TJ(){if(b4)return hT;b4=1;var e=EE(),t=Ho(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return hT=n,hT}var pT,x4;function AJ(){if(x4)return pT;x4=1;var e=TJ(),t=gE(),r=V3(),n=r&&r.isMap,i=n?t(n):e;return pT=i,pT}var mT,S4;function RJ(){if(S4)return mT;S4=1;var e=EE(),t=Ho(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return mT=n,mT}var vT,T4;function CJ(){if(T4)return vT;T4=1;var e=RJ(),t=gE(),r=V3(),n=r&&r.isSet,i=n?t(n):e;return vT=i,vT}var gT,A4;function OJ(){if(A4)return gT;A4=1;var e=j3(),t=eJ(),r=V7(),n=sJ(),i=cJ(),a=$7(),o=q3(),l=dJ(),c=hJ(),f=J7(),h=pJ(),p=EE(),v=_J(),g=xJ(),_=nk(),E=gu(),b=vE(),S=AJ(),T=Vo(),C=CJ(),M=X3(),D=Jg(),I=1,N=2,j=4,re="[object Arguments]",Q="[object Array]",X="[object Boolean]",R="[object Date]",P="[object Error]",V="[object Function]",le="[object GeneratorFunction]",w="[object Map]",z="[object Number]",H="[object Object]",ee="[object RegExp]",oe="[object Set]",ge="[object String]",ye="[object Symbol]",Pe="[object WeakMap]",tt="[object ArrayBuffer]",We="[object DataView]",Pt="[object Float32Array]",$e="[object Float64Array]",Tt="[object Int8Array]",je="[object Int16Array]",Ee="[object Int32Array]",st="[object Uint8Array]",Oe="[object Uint8ClampedArray]",$t="[object Uint16Array]",qt="[object Uint32Array]",xt={};xt[re]=xt[Q]=xt[tt]=xt[We]=xt[X]=xt[R]=xt[Pt]=xt[$e]=xt[Tt]=xt[je]=xt[Ee]=xt[w]=xt[z]=xt[H]=xt[ee]=xt[oe]=xt[ge]=xt[ye]=xt[st]=xt[Oe]=xt[$t]=xt[qt]=!0,xt[P]=xt[V]=xt[Pe]=!1;function Dt(It,er,kr,ue,xe,Ue){var k,vt=er&I,pt=er&N,Ut=er&j;if(kr&&(k=xe?kr(It,ue,xe,Ue):kr(It)),k!==void 0)return k;if(!T(It))return It;var lr=E(It);if(lr){if(k=v(It),!vt)return o(It,k)}else{var dr=p(It),hr=dr==V||dr==le;if(b(It))return a(It,vt);if(dr==H||dr==re||hr&&!xe){if(k=pt||hr?{}:_(It),!vt)return pt?c(It,i(k,It)):l(It,n(k,It))}else{if(!xt[dr])return xe?It:{};k=g(It,dr,vt)}}Ue||(Ue=new e);var jn=Ue.get(It);if(jn)return jn;Ue.set(It,k),C(It)?It.forEach(function(en){k.add(Dt(en,er,kr,en,It,Ue))}):S(It)&&It.forEach(function(en,yn){k.set(yn,Dt(en,er,kr,yn,It,Ue))});var Sn=Ut?pt?h:f:pt?D:M,fi=lr?void 0:Sn(It);return t(fi||It,function(en,yn){fi&&(yn=en,en=It[yn]),r(k,yn,Dt(en,er,kr,yn,It,Ue))}),k}return gT=Dt,gT}var _T,R4;function wJ(){if(R4)return _T;R4=1;var e=OJ(),t=1,r=4;function n(i){return e(i,t|r)}return _T=n,_T}var NJ=wJ();const MJ=Kr(NJ);var yT,C4;function IJ(){if(C4)return yT;C4=1;var e=Cs(),t=function(){return e.Date.now()};return yT=t,yT}var ET,O4;function ik(){if(O4)return ET;O4=1;var e=Vo(),t=IJ(),r=k7(),n="Expected a function",i=Math.max,a=Math.min;function o(l,c,f){var h,p,v,g,_,E,b=0,S=!1,T=!1,C=!0;if(typeof l!="function")throw new TypeError(n);c=r(c)||0,e(f)&&(S=!!f.leading,T="maxWait"in f,v=T?i(r(f.maxWait)||0,c):v,C="trailing"in f?!!f.trailing:C);function M(P){var V=h,le=p;return h=p=void 0,b=P,g=l.apply(le,V),g}function D(P){return b=P,_=setTimeout(j,c),S?M(P):g}function I(P){var V=P-E,le=P-b,w=c-V;return T?a(w,v-le):w}function N(P){var V=P-E,le=P-b;return E===void 0||V>=c||V<0||T&&le>=v}function j(){var P=t();if(N(P))return re(P);_=setTimeout(j,I(P))}function re(P){return _=void 0,C&&h?M(P):(h=p=void 0,g)}function Q(){_!==void 0&&clearTimeout(_),b=0,h=E=p=_=void 0}function X(){return _===void 0?g:re(t())}function R(){var P=t(),V=N(P);if(h=arguments,p=this,E=P,V){if(_===void 0)return D(E);if(T)return clearTimeout(_),_=setTimeout(j,c),M(E)}return _===void 0&&(_=setTimeout(j,c)),g}return R.cancel=Q,R.flush=X,R}return ET=o,ET}var PJ=ik();const DJ=Kr(PJ);var bT,w4;function LJ(){if(w4)return bT;w4=1;var e=gu(),t=cE(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,o){if(e(a))return!1;var l=typeof a;return l=="number"||l=="symbol"||l=="boolean"||a==null||t(a)?!0:n.test(a)||!r.test(a)||o!=null&&a in Object(o)}return bT=i,bT}var xT,N4;function BJ(){if(N4)return xT;N4=1;var e=k3(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var o=arguments,l=i?i.apply(this,o):o[0],c=a.cache;if(c.has(l))return c.get(l);var f=n.apply(this,o);return a.cache=c.set(l,f)||c,f};return a.cache=new(r.Cache||e),a}return r.Cache=e,xT=r,xT}var ST,M4;function FJ(){if(M4)return ST;M4=1;var e=BJ(),t=500;function r(n){var i=e(n,function(o){return a.size===t&&a.clear(),o}),a=i.cache;return i}return ST=r,ST}var TT,I4;function UJ(){if(I4)return TT;I4=1;var e=FJ(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(o,l,c,f){a.push(c?f.replace(r,"$1"):l||o)}),a});return TT=n,TT}var AT,P4;function ak(){if(P4)return AT;P4=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,a=Array(i);++n<i;)a[n]=r(t[n],n,t);return a}return AT=e,AT}var RT,D4;function kJ(){if(D4)return RT;D4=1;var e=Zg(),t=ak(),r=gu(),n=cE(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(n(l))return a?a.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return RT=o,RT}var CT,L4;function Qp(){if(L4)return CT;L4=1;var e=kJ();function t(r){return r==null?"":e(r)}return CT=t,CT}var OT,B4;function jJ(){if(B4)return OT;B4=1;var e=gu(),t=LJ(),r=UJ(),n=Qp();function i(a,o){return e(a)?a:t(a,o)?[a]:r(n(a))}return OT=i,OT}var wT,F4;function zJ(){if(F4)return wT;F4=1;var e=cE();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return wT=t,wT}var NT,U4;function VJ(){if(U4)return NT;U4=1;var e=jJ(),t=zJ();function r(n,i){i=e(i,n);for(var a=0,o=i.length;n!=null&&a<o;)n=n[t(i[a++])];return a&&a==o?n:void 0}return NT=r,NT}var MT,k4;function HJ(){if(k4)return MT;k4=1;var e=VJ();function t(r,n,i){var a=r==null?void 0:e(r,n);return a===void 0?i:a}return MT=t,MT}var XJ=HJ();const qJ=Kr(XJ);var IT,j4;function GJ(){if(j4)return IT;j4=1;var e=vu(),t=Ho(),r="[object Boolean]";function n(i){return i===!0||i===!1||t(i)&&e(i)==r}return IT=n,IT}var WJ=GJ();const $J=Kr(WJ);var PT,z4;function YJ(){if(z4)return PT;z4=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return PT=t,PT}var DT,V4;function ZJ(){if(V4)return DT;V4=1;function e(t){return this.__data__.has(t)}return DT=e,DT}var LT,H4;function ok(){if(H4)return LT;H4=1;var e=k3(),t=YJ(),r=ZJ();function n(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new e;++a<o;)this.add(i[a])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,LT=n,LT}var BT,X4;function KJ(){if(X4)return BT;X4=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return BT=e,BT}var FT,q4;function sk(){if(q4)return FT;q4=1;function e(t,r){return t.has(r)}return FT=e,FT}var UT,G4;function lk(){if(G4)return UT;G4=1;var e=ok(),t=KJ(),r=sk(),n=1,i=2;function a(o,l,c,f,h,p){var v=c&n,g=o.length,_=l.length;if(g!=_&&!(v&&_>g))return!1;var E=p.get(o),b=p.get(l);if(E&&b)return E==l&&b==o;var S=-1,T=!0,C=c&i?new e:void 0;for(p.set(o,l),p.set(l,o);++S<g;){var M=o[S],D=l[S];if(f)var I=v?f(D,M,S,l,o,p):f(M,D,S,o,l,p);if(I!==void 0){if(I)continue;T=!1;break}if(C){if(!t(l,function(N,j){if(!r(C,j)&&(M===N||h(M,N,c,f,p)))return C.push(j)})){T=!1;break}}else if(!(M===D||h(M,D,c,f,p))){T=!1;break}}return p.delete(o),p.delete(l),T}return UT=a,UT}var kT,W4;function QJ(){if(W4)return kT;W4=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,a){n[++r]=[a,i]}),n}return kT=e,kT}var jT,$4;function Y3(){if($4)return jT;$4=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return jT=e,jT}var zT,Y4;function JJ(){if(Y4)return zT;Y4=1;var e=Zg(),t=tk(),r=Kg(),n=lk(),i=QJ(),a=Y3(),o=1,l=2,c="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Map]",v="[object Number]",g="[object RegExp]",_="[object Set]",E="[object String]",b="[object Symbol]",S="[object ArrayBuffer]",T="[object DataView]",C=e?e.prototype:void 0,M=C?C.valueOf:void 0;function D(I,N,j,re,Q,X,R){switch(j){case T:if(I.byteLength!=N.byteLength||I.byteOffset!=N.byteOffset)return!1;I=I.buffer,N=N.buffer;case S:return!(I.byteLength!=N.byteLength||!X(new t(I),new t(N)));case c:case f:case v:return r(+I,+N);case h:return I.name==N.name&&I.message==N.message;case g:case E:return I==N+"";case p:var P=i;case _:var V=re&o;if(P||(P=a),I.size!=N.size&&!V)return!1;var le=R.get(I);if(le)return le==N;re|=l,R.set(I,N);var w=n(P(I),P(N),re,Q,X,R);return R.delete(I),w;case b:if(M)return M.call(I)==M.call(N)}return!1}return zT=D,zT}var VT,Z4;function eee(){if(Z4)return VT;Z4=1;var e=J7(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(a,o,l,c,f,h){var p=l&t,v=e(a),g=v.length,_=e(o),E=_.length;if(g!=E&&!p)return!1;for(var b=g;b--;){var S=v[b];if(!(p?S in o:n.call(o,S)))return!1}var T=h.get(a),C=h.get(o);if(T&&C)return T==o&&C==a;var M=!0;h.set(a,o),h.set(o,a);for(var D=p;++b<g;){S=v[b];var I=a[S],N=o[S];if(c)var j=p?c(N,I,S,o,a,h):c(I,N,S,a,o,h);if(!(j===void 0?I===N||f(I,N,l,c,h):j)){M=!1;break}D||(D=S=="constructor")}if(M&&!D){var re=a.constructor,Q=o.constructor;re!=Q&&"constructor"in a&&"constructor"in o&&!(typeof re=="function"&&re instanceof re&&typeof Q=="function"&&Q instanceof Q)&&(M=!1)}return h.delete(a),h.delete(o),M}return VT=i,VT}var HT,K4;function tee(){if(K4)return HT;K4=1;var e=j3(),t=lk(),r=JJ(),n=eee(),i=EE(),a=gu(),o=vE(),l=_E(),c=1,f="[object Arguments]",h="[object Array]",p="[object Object]",v=Object.prototype,g=v.hasOwnProperty;function _(E,b,S,T,C,M){var D=a(E),I=a(b),N=D?h:i(E),j=I?h:i(b);N=N==f?p:N,j=j==f?p:j;var re=N==p,Q=j==p,X=N==j;if(X&&o(E)){if(!o(b))return!1;D=!0,re=!1}if(X&&!re)return M||(M=new e),D||l(E)?t(E,b,S,T,C,M):r(E,b,N,S,T,C,M);if(!(S&c)){var R=re&&g.call(E,"__wrapped__"),P=Q&&g.call(b,"__wrapped__");if(R||P){var V=R?E.value():E,le=P?b.value():b;return M||(M=new e),C(V,le,S,T,M)}}return X?(M||(M=new e),n(E,b,S,T,C,M)):!1}return HT=_,HT}var XT,Q4;function ree(){if(Q4)return XT;Q4=1;var e=tee(),t=Ho();function r(n,i,a,o,l){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,a,o,r,l)}return XT=r,XT}var qT,J4;function nee(){if(J4)return qT;J4=1;var e=ree();function t(r,n){return e(r,n)}return qT=t,qT}var iee=nee();const aee=Kr(iee);var GT,eP;function oee(){if(eP)return GT;eP=1;function e(t){return t==null}return GT=e,GT}var see=oee();const lee=Kr(see);var WT,tP;function uee(){if(tP)return WT;tP=1;var e=vu(),t=Ho(),r="[object Number]";function n(i){return typeof i=="number"||t(i)&&e(i)==r}return WT=n,WT}var cee=uee();const fee=Kr(cee);var $T,rP;function uk(){if(rP)return $T;rP=1;var e=vu(),t=W3(),r=Ho(),n="[object Object]",i=Function.prototype,a=Object.prototype,o=i.toString,l=a.hasOwnProperty,c=o.call(Object);function f(h){if(!r(h)||e(h)!=n)return!1;var p=t(h);if(p===null)return!0;var v=l.call(p,"constructor")&&p.constructor;return typeof v=="function"&&v instanceof v&&o.call(v)==c}return $T=f,$T}var dee=uk();const hee=Kr(dee);var YT,nP;function pee(){if(nP)return YT;nP=1;var e=vu(),t=gu(),r=Ho(),n="[object String]";function i(a){return typeof a=="string"||!t(a)&&r(a)&&e(a)==n}return YT=i,YT}var mee=pee();const vee=Kr(mee);var gee=_E();const _ee=Kr(gee);var ZT,iP;function ck(){if(iP)return ZT;iP=1;var e=z3(),t=Kg();function r(n,i,a){(a!==void 0&&!t(n[i],a)||a===void 0&&!(i in n))&&e(n,i,a)}return ZT=r,ZT}var KT,aP;function yee(){if(aP)return KT;aP=1;function e(t){return function(r,n,i){for(var a=-1,o=Object(r),l=i(r),c=l.length;c--;){var f=l[t?c:++a];if(n(o[f],f,o)===!1)break}return r}}return KT=e,KT}var QT,oP;function Eee(){if(oP)return QT;oP=1;var e=yee(),t=e();return QT=t,QT}var JT,sP;function bee(){if(sP)return JT;sP=1;var e=yE(),t=Ho();function r(n){return t(n)&&e(n)}return JT=r,JT}var eA,lP;function fk(){if(lP)return eA;lP=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return eA=e,eA}var tA,uP;function xee(){if(uP)return tA;uP=1;var e=Qg(),t=Jg();function r(n){return e(n,t(n))}return tA=r,tA}var rA,cP;function See(){if(cP)return rA;cP=1;var e=ck(),t=$7(),r=rk(),n=q3(),i=nk(),a=H7(),o=gu(),l=bee(),c=vE(),f=hE(),h=Vo(),p=uk(),v=_E(),g=fk(),_=xee();function E(b,S,T,C,M,D,I){var N=g(b,T),j=g(S,T),re=I.get(j);if(re){e(b,T,re);return}var Q=D?D(N,j,T+"",b,S,I):void 0,X=Q===void 0;if(X){var R=o(j),P=!R&&c(j),V=!R&&!P&&v(j);Q=j,R||P||V?o(N)?Q=N:l(N)?Q=n(N):P?(X=!1,Q=t(j,!0)):V?(X=!1,Q=r(j,!0)):Q=[]:p(j)||a(j)?(Q=N,a(N)?Q=_(N):(!h(N)||f(N))&&(Q=i(j))):X=!1}X&&(I.set(j,Q),M(Q,j,C,D,I),I.delete(j)),e(b,T,Q)}return rA=E,rA}var nA,fP;function dk(){if(fP)return nA;fP=1;var e=j3(),t=ck(),r=Eee(),n=See(),i=Vo(),a=Jg(),o=fk();function l(c,f,h,p,v){c!==f&&r(f,function(g,_){if(v||(v=new e),i(g))n(c,f,_,h,l,p,v);else{var E=p?p(o(c,_),g,_+"",c,f,v):void 0;E===void 0&&(E=g),t(c,_,E)}},a)}return nA=l,nA}var iA,dP;function hk(){if(dP)return iA;dP=1;function e(t){return t}return iA=e,iA}var aA,hP;function Tee(){if(hP)return aA;hP=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return aA=e,aA}var oA,pP;function Aee(){if(pP)return oA;pP=1;var e=Tee(),t=Math.max;function r(n,i,a){return i=t(i===void 0?n.length-1:i,0),function(){for(var o=arguments,l=-1,c=t(o.length-i,0),f=Array(c);++l<c;)f[l]=o[i+l];l=-1;for(var h=Array(i+1);++l<i;)h[l]=o[l];return h[i]=a(f),e(n,this,h)}}return oA=r,oA}var sA,mP;function Ree(){if(mP)return sA;mP=1;function e(t){return function(){return t}}return sA=e,sA}var lA,vP;function Cee(){if(vP)return lA;vP=1;var e=Ree(),t=z7(),r=hk(),n=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:r;return lA=n,lA}var uA,gP;function Oee(){if(gP)return uA;gP=1;var e=800,t=16,r=Date.now;function n(i){var a=0,o=0;return function(){var l=r(),c=t-(l-o);if(o=l,c>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return uA=n,uA}var cA,_P;function wee(){if(_P)return cA;_P=1;var e=Cee(),t=Oee(),r=t(e);return cA=r,cA}var fA,yP;function pk(){if(yP)return fA;yP=1;var e=hk(),t=Aee(),r=wee();function n(i,a){return r(t(i,a,e),i+"")}return fA=n,fA}var dA,EP;function Nee(){if(EP)return dA;EP=1;var e=Kg(),t=yE(),r=X7(),n=Vo();function i(a,o,l){if(!n(l))return!1;var c=typeof o;return(c=="number"?t(l)&&r(o,l.length):c=="string"&&o in l)?e(l[o],a):!1}return dA=i,dA}var hA,bP;function mk(){if(bP)return hA;bP=1;var e=pk(),t=Nee();function r(n){return e(function(i,a){var o=-1,l=a.length,c=l>1?a[l-1]:void 0,f=l>2?a[2]:void 0;for(c=n.length>3&&typeof c=="function"?(l--,c):void 0,f&&t(a[0],a[1],f)&&(c=l<3?void 0:c,l=1),i=Object(i);++o<l;){var h=a[o];h&&n(i,h,o,c)}return i})}return hA=r,hA}var pA,xP;function Mee(){if(xP)return pA;xP=1;var e=dk(),t=mk(),r=t(function(n,i,a){e(n,i,a)});return pA=r,pA}var Iee=Mee();const Pee=Kr(Iee);var mA,SP;function Dee(){if(SP)return mA;SP=1;var e=dk(),t=mk(),r=t(function(n,i,a,o){e(n,i,a,o)});return mA=r,mA}var Lee=Dee();const Bee=Kr(Lee);var vA,TP;function Fee(){if(TP)return vA;TP=1;function e(t,r,n,i){for(var a=t.length,o=n+(i?1:-1);i?o--:++o<a;)if(r(t[o],o,t))return o;return-1}return vA=e,vA}var gA,AP;function Uee(){if(AP)return gA;AP=1;function e(t){return t!==t}return gA=e,gA}var _A,RP;function kee(){if(RP)return _A;RP=1;function e(t,r,n){for(var i=n-1,a=t.length;++i<a;)if(t[i]===r)return i;return-1}return _A=e,_A}var yA,CP;function vk(){if(CP)return yA;CP=1;var e=Fee(),t=Uee(),r=kee();function n(i,a,o){return a===a?r(i,a,o):e(i,t,o)}return yA=n,yA}var EA,OP;function jee(){if(OP)return EA;OP=1;function e(t,r,n,i){for(var a=n-1,o=t.length;++a<o;)if(i(t[a],r))return a;return-1}return EA=e,EA}var bA,wP;function zee(){if(wP)return bA;wP=1;var e=ak(),t=vk(),r=jee(),n=gE(),i=q3(),a=Array.prototype,o=a.splice;function l(c,f,h,p){var v=p?r:t,g=-1,_=f.length,E=c;for(c===f&&(f=i(f)),h&&(E=e(c,n(h)));++g<_;)for(var b=0,S=f[g],T=h?h(S):S;(b=v(E,T,b,p))>-1;)E!==c&&o.call(E,b,1),o.call(c,b,1);return c}return bA=l,bA}var xA,NP;function Vee(){if(NP)return xA;NP=1;var e=zee();function t(r,n){return r&&r.length&&n&&n.length?e(r,n):r}return xA=t,xA}var SA,MP;function Hee(){if(MP)return SA;MP=1;var e=pk(),t=Vee(),r=e(t);return SA=r,SA}var Xee=Hee();const qee=Kr(Xee);var TA,IP;function Gee(){if(IP)return TA;IP=1;var e=ik(),t=Vo(),r="Expected a function";function n(i,a,o){var l=!0,c=!0;if(typeof i!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),e(i,a,{leading:l,maxWait:a,trailing:c})}return TA=n,TA}var Wee=Gee();const $ee=Kr(Wee);var AA,PP;function Yee(){if(PP)return AA;PP=1;var e=vk();function t(r,n){var i=r==null?0:r.length;return!!i&&e(r,n,0)>-1}return AA=t,AA}var RA,DP;function Zee(){if(DP)return RA;DP=1;function e(t,r,n){for(var i=-1,a=t==null?0:t.length;++i<a;)if(n(r,t[i]))return!0;return!1}return RA=e,RA}var CA,LP;function Kee(){if(LP)return CA;LP=1;function e(){}return CA=e,CA}var OA,BP;function Qee(){if(BP)return OA;BP=1;var e=ek(),t=Kee(),r=Y3(),n=1/0,i=e&&1/r(new e([,-0]))[1]==n?function(a){return new e(a)}:t;return OA=i,OA}var wA,FP;function Jee(){if(FP)return wA;FP=1;var e=ok(),t=Yee(),r=Zee(),n=sk(),i=Qee(),a=Y3(),o=200;function l(c,f,h){var p=-1,v=t,g=c.length,_=!0,E=[],b=E;if(h)_=!1,v=r;else if(g>=o){var S=f?null:i(c);if(S)return a(S);_=!1,v=n,b=new e}else b=f?[]:E;e:for(;++p<g;){var T=c[p],C=f?f(T):T;if(T=h||T!==0?T:0,_&&C===C){for(var M=b.length;M--;)if(b[M]===C)continue e;f&&b.push(C),E.push(T)}else v(b,C,h)||(b!==E&&b.push(C),E.push(T))}return E}return wA=l,wA}var NA,UP;function ete(){if(UP)return NA;UP=1;var e=Jee();function t(r){return r&&r.length?e(r):[]}return NA=t,NA}var tte=ete();const rte=Kr(tte);var MA,kP;function nte(){if(kP)return MA;kP=1;function e(t,r,n){var i=-1,a=t.length;r<0&&(r=-r>a?0:a+r),n=n>a?a:n,n<0&&(n+=a),a=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(a);++i<a;)o[i]=t[i+r];return o}return MA=e,MA}var IA,jP;function ite(){if(jP)return IA;jP=1;var e=nte();function t(r,n,i){var a=r.length;return i=i===void 0?a:i,!n&&i>=a?r:e(r,n,i)}return IA=t,IA}var PA,zP;function gk(){if(zP)return PA;zP=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,a="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+i+a+"]");function c(f){return l.test(f)}return PA=c,PA}var DA,VP;function ate(){if(VP)return DA;VP=1;function e(t){return t.split("")}return DA=e,DA}var LA,HP;function ote(){if(HP)return LA;HP=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,a="\\ufe0e\\ufe0f",o="["+e+"]",l="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",f="(?:"+l+"|"+c+")",h="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",_=f+"?",E="["+a+"]?",b="(?:"+g+"(?:"+[h,p,v].join("|")+")"+E+_+")*",S=E+_+b,T="(?:"+[h+l+"?",l,p,v,o].join("|")+")",C=RegExp(c+"(?="+c+")|"+T+S,"g");function M(D){return D.match(C)||[]}return LA=M,LA}var BA,XP;function ste(){if(XP)return BA;XP=1;var e=ate(),t=gk(),r=ote();function n(i){return t(i)?r(i):e(i)}return BA=n,BA}var FA,qP;function lte(){if(qP)return FA;qP=1;var e=ite(),t=gk(),r=ste(),n=Qp();function i(a){return function(o){o=n(o);var l=t(o)?r(o):void 0,c=l?l[0]:o.charAt(0),f=l?e(l,1).join(""):o.slice(1);return c[a]()+f}}return FA=i,FA}var UA,GP;function _k(){if(GP)return UA;GP=1;var e=lte(),t=e("toUpperCase");return UA=t,UA}var ute=_k();const cte=Kr(ute);var fte=hE();const dte=Kr(fte);var hte=Vo();const pte=Kr(hte);var kA,WP;function mte(){if(WP)return kA;WP=1;function e(t){return t===void 0}return kA=e,kA}var vte=mte();const gte=Kr(vte);var jA,$P;function _te(){if($P)return jA;$P=1;var e=Qp(),t=_k();function r(n){return t(e(n).toLowerCase())}return jA=r,jA}var zA,YP;function yte(){if(YP)return zA;YP=1;function e(t,r,n,i){var a=-1,o=t==null?0:t.length;for(i&&o&&(n=t[++a]);++a<o;)n=r(n,t[a],a,t);return n}return zA=e,zA}var VA,ZP;function Ete(){if(ZP)return VA;ZP=1;function e(t){return function(r){return t?.[r]}}return VA=e,VA}var HA,KP;function bte(){if(KP)return HA;KP=1;var e=Ete(),t={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},r=e(t);return HA=r,HA}var XA,QP;function xte(){if(QP)return XA;QP=1;var e=bte(),t=Qp(),r=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,n="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",o=n+i+a,l="["+o+"]",c=RegExp(l,"g");function f(h){return h=t(h),h&&h.replace(r,e).replace(c,"")}return XA=f,XA}var qA,JP;function Ste(){if(JP)return qA;JP=1;var e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function t(r){return r.match(e)||[]}return qA=t,qA}var GA,eD;function Tte(){if(eD)return GA;eD=1;var e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function t(r){return e.test(r)}return GA=t,GA}var WA,tD;function Ate(){if(tD)return WA;tD=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,a="\\u2700-\\u27bf",o="a-z\\xdf-\\xf6\\xf8-\\xff",l="\\xac\\xb1\\xd7\\xf7",c="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",f="\\u2000-\\u206f",h=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",p="A-Z\\xc0-\\xd6\\xd8-\\xde",v="\\ufe0e\\ufe0f",g=l+c+f+h,_="['’]",E="["+g+"]",b="["+i+"]",S="\\d+",T="["+a+"]",C="["+o+"]",M="[^"+e+g+S+a+o+p+"]",D="\\ud83c[\\udffb-\\udfff]",I="(?:"+b+"|"+D+")",N="[^"+e+"]",j="(?:\\ud83c[\\udde6-\\uddff]){2}",re="[\\ud800-\\udbff][\\udc00-\\udfff]",Q="["+p+"]",X="\\u200d",R="(?:"+C+"|"+M+")",P="(?:"+Q+"|"+M+")",V="(?:"+_+"(?:d|ll|m|re|s|t|ve))?",le="(?:"+_+"(?:D|LL|M|RE|S|T|VE))?",w=I+"?",z="["+v+"]?",H="(?:"+X+"(?:"+[N,j,re].join("|")+")"+z+w+")*",ee="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",oe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ge=z+w+H,ye="(?:"+[T,j,re].join("|")+")"+ge,Pe=RegExp([Q+"?"+C+"+"+V+"(?="+[E,Q,"$"].join("|")+")",P+"+"+le+"(?="+[E,Q+R,"$"].join("|")+")",Q+"?"+R+"+"+V,Q+"+"+le,oe,ee,S,ye].join("|"),"g");function tt(We){return We.match(Pe)||[]}return WA=tt,WA}var $A,rD;function Rte(){if(rD)return $A;rD=1;var e=Ste(),t=Tte(),r=Qp(),n=Ate();function i(a,o,l){return a=r(a),o=l?void 0:o,o===void 0?t(a)?n(a):e(a):a.match(o)||[]}return $A=i,$A}var YA,nD;function Cte(){if(nD)return YA;nD=1;var e=yte(),t=xte(),r=Rte(),n="['’]",i=RegExp(n,"g");function a(o){return function(l){return e(r(t(l).replace(i,"")),o,"")}}return YA=a,YA}var ZA,iD;function Ote(){if(iD)return ZA;iD=1;var e=_te(),t=Cte(),r=t(function(n,i,a){return i=i.toLowerCase(),n+(a?e(i):i)});return ZA=r,ZA}var wte=Ote();const Nte=Kr(wte);var KA,aD;function Mte(){if(aD)return KA;aD=1;var e=Qp(),t=0;function r(n){var i=++t;return e(n)+i}return KA=r,KA}var Ite=Mte();const Pte=Kr(Ite);var Un={isNil:lee,merge:Pee,throttle:$ee,isString:vee,debounce:DJ,pull:qee,isTypedArray:_ee,isPlainObject:hee,isNumber:fee,isBoolean:$J,isEqual:aee,cloneDeep:MJ,uniq:rte,clamp:CQ,upperFirst:cte,get:qJ,mergeWith:Bee,isFunction:dte,isObject:pte,isUndefined:gte,camelCase:Nte,uniqueId:Pte},{pull:VEe}=Un;function Dte(e){let t=e;return typeof e=="string"&&(t=window.document.getElementById(e)),t}function yk(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Ek(e){return yk(e).split(/\s+/)}function Lte(e){var t;const r=(t=document?.documentElement)==null?void 0:t.style;if(!r)return e[0];for(const n in e)if(e[n]&&e[n]in r)return e[n];return e[0]}function ui(e,t,r){const n=window.document.createElement(e);return t&&(n.className=t||""),r&&r.appendChild(n),n}function nu(e){const t=e.parentNode;t&&t.removeChild(e)}function id(e,t){if(e.classList!==void 0){const r=Ek(t);for(let n=0,i=r.length;n<i;n++)e.classList.add(r[n])}else if(!Bte(e,t)){const r=Z3(e);bk(e,(r?r+" ":"")+t)}}function n1(e,t){e.classList!==void 0?Ek(t).forEach(n=>{e.classList.remove(n)}):bk(e,yk((" "+Z3(e)+" ").replace(" "+t+" "," ")))}function Bte(e,t){if(e.classList!==void 0)return e.classList.contains(t);const r=Z3(e);return r.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(r)}function bk(e,t){e instanceof HTMLElement?e.className=t:e.className.baseVal=t}function Z3(e){return e instanceof SVGElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}var Fte=Lte(["transform","WebkitTransform"]);function Ute(e,t){e.style[Fte]=t}function kte(){var e;const t=window.document.querySelector('meta[name="viewport"]');if(!t)return 1;const n=((e=t.content)==null?void 0:e.split(",")).find(i=>{const[a]=i.split("=");return a==="initial-scale"});return n?n.split("=")[1]*1:1}var ja=kte()<1?1:window.devicePixelRatio;function xk(e,t){e.setAttribute("style",`${e.style.cssText}${t}`)}function jte(e){return Object.entries(e).map(([t,r])=>`${t}: ${r}`).join(";")}function zte(e,t){return{left:e.left-t.left,top:e.top-t.top,right:t.left+t.width-e.left-e.width,bottom:t.top+t.height-e.top-e.height}}function K3(e){e.innerHTML=""}function Vte(e){e.setAttribute("draggable","false")}function $f(e,t){if(typeof t=="string"){const r=document.createElement("div");for(r.innerHTML=t;r.firstChild;)e.append(r.firstChild)}else Array.isArray(t)?e.append(...t):e.append(t)}function Hte(e,t){var r;const n=Array.isArray(t)?t:[t];let i=e;for(;i instanceof Element&&i!==window.document.body;){if(n.find(a=>i?.matches(a)))return i;i=(r=i?.parentElement)!=null?r:null}}function Xte(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap}var w2=navigator?.userAgent;w2.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);w2.indexOf("Android")>-1||w2.indexOf("Adr")>-1;function N2(e){var t=[1/0,1/0,-1/0,-1/0];return N7(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}N2.default=N2;function QA(e){return typeof e=="number"}function Ei(e){return e-Math.fround(e)}var oD=2*Math.PI*6378137/2;function qte(e,t){const[r,n,i,a]=t;return e.lng>r&&e.lng<=i&&e.lat>n&&e.lat<=a}function Gte(e){const t=[1/0,1/0,-1/0,-1/0];return e.forEach(r=>{const{coordinates:n}=r;Sk(t,n)}),t}function Sk(e,t){return Array.isArray(t[0])?t.forEach(r=>{Sk(e,r)}):(e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])),e}function Sy(e,t=!0,r={enable:!0,decimal:1}){e=Yte(e,t);const n=e[0],i=e[1];let a=n*oD/180,o=Math.log(Math.tan((90+i)*Math.PI/360))/(Math.PI/180);return o=o*oD/180,r.enable&&(a=Number(a.toFixed(r.decimal)),o=Number(o.toFixed(r.decimal))),e.length===3?[a,o,e[2]]:[a,o]}function Wte(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function $te(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Yte(e,t){if(t===!1)return e;const r=Wte(e[0]);let n=$te(e[1]);return n>85&&(n=85),n<-85&&(n=-85),e.length===3?[r,n,e[2]]:[r,n]}function Fo(e){const t=85.0511287798,r=Math.max(Math.min(t,e[1]),-t),n=256<<20;let i=Math.PI/180,a=e[0]*i,o=r*i;o=Math.log(Math.tan(Math.PI/4+o/2));const l=.5/Math.PI,c=.5,f=-.5/Math.PI;return i=.5,a=n*(l*a+c),o=n*(f*o+i),[Math.floor(a),Math.floor(o)]}function JA(e,t){const r=85.0511287798,n=Math.PI/180,i=6378137;return t=Math.max(Math.min(r,t),-r),e*=n,t*=n,t=Math.log(Math.tan(Math.PI/4+t/2)),[e*i,t*i]}function Q3(e,t){const r=Math.abs(e[1][1]-e[0][1])*t,n=Math.abs(e[1][0]-e[0][0])*t;return[[e[0][0]-n,e[0][1]-r],[e[1][0]+n,e[1][1]+r]]}function Tk(e,t){return e[0][0]<=t[0][0]&&e[0][1]<=t[0][1]&&e[1][0]>=t[1][0]&&e[1][1]>=t[1][1]}function i1(e){return[[e[0],e[1]],[e[2],e[3]]]}function Zte(e){const t=Kte(e,[0,0]);return[e[0]/t,e[1]/t]}function Kte(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function pd(e){if(QA(e[0]))return e;if(QA(e[0][0]))throw new Error("当前数据不支持标注");if(QA(e[0][0][0])){const t=e;let r=0,n=0,i=0;return t.forEach(a=>{a.forEach(o=>{r+=o[0],n+=o[1],i++})}),[r/i,n/i,0]}else throw new Error("当前数据不支持标注")}function Qte(e){let t=e[0],r=e[1],n=e[0],i=e[1],a=0,o=0,l=0;for(let c=0;c<e.length;c+=2){const f=e[c],h=e[c+1];f&&h&&(t=Math.max(f,t),r=Math.max(h,r),n=Math.min(f,n),i=Math.min(h,i),a+=f,o+=h,l++)}return{center:[a/l,o/l],radius:Math.sqrt(Math.pow(t-n,2)+Math.pow(r-i,2))/2}}function Jte(e){return N2(qK([XK(e)]))}function ere(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}var tre=class{constructor(e=50,t){this.limit=e,this.destroy=t||this.defaultDestroy,this.order=[],this.clear()}clear(){this.order.forEach(e=>{this.delete(e)}),this.cache={},this.order=[]}get(e){const t=this.cache[e];return t&&(this.deleteOrder(e),this.appendOrder(e)),t}set(e,t){this.cache[e]?(this.delete(e),this.cache[e]=t,this.appendOrder(e)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[e]=t,this.appendOrder(e))}delete(e){const t=this.cache[e];t&&(this.deleteCache(e),this.deleteOrder(e),this.destroy(t,e))}deleteCache(e){delete this.cache[e]}deleteOrder(e){const t=this.order.findIndex(r=>r===e);t>=0&&this.order.splice(t,1)}appendOrder(e){this.order.push(e)}defaultDestroy(e,t){return null}};function rre(e){if(e.length===0)throw new Error("max requires at least one data point");let t=e[0];for(let r=1;r<e.length;r++)e[r]>t&&(t=e[r]);return t*1}function nre(e){if(e.length===0)throw new Error("min requires at least one data point");let t=e[0];for(let r=1;r<e.length;r++)e[r]<t&&(t=e[r]);return t*1}function Ak(e){if(e.length===0)return 0;let t=e[0]*1;for(let r=1;r<e.length;r++)t+=e[r]*1;return t}function ire(e){if(e.length===0)throw new Error("mean requires at least one data point");return Ak(e)/e.length}function are(e){if(e.length===0)throw new Error("mean requires at least one data point");if(e.length<3)return e[0];e.sort();let t=e[0],r=NaN,n=0,i=1;for(let a=1;a<e.length+1;a++)e[a]!==t?(i>n&&(n=i,r=t),i=1,t=e[a]):i++;return r*1}var Rk={min:nre,max:rre,mean:ire,sum:Ak,mode:are};function Ck(e,t){return e.map(r=>r[t])}function ore(e,t){t===void 0&&(t={});var r=Number(e[0]),n=Number(e[1]),i=Number(e[2]),a=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var o=[r,n],l=[r,a],c=[i,a],f=[i,n];return w3([[o,f,c,l,o]],t.properties,{bbox:e,id:t.id})}var eR={exports:{}},sD;function sre(){return sD||(sD=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,f,h){this.fn=c,this.context=f,this.once=h||!1}function a(c,f,h,p,v){if(typeof h!="function")throw new TypeError("The listener must be a function");var g=new i(h,p||c,v),_=r?r+f:f;return c._events[_]?c._events[_].fn?c._events[_]=[c._events[_],g]:c._events[_].push(g):(c._events[_]=g,c._eventsCount++),c}function o(c,f){--c._eventsCount===0?c._events=new n:delete c._events[f]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var f=[],h,p;if(this._eventsCount===0)return f;for(p in h=this._events)t.call(h,p)&&f.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},l.prototype.listeners=function(f){var h=r?r+f:f,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var v=0,g=p.length,_=new Array(g);v<g;v++)_[v]=p[v].fn;return _},l.prototype.listenerCount=function(f){var h=r?r+f:f,p=this._events[h];return p?p.fn?1:p.length:0},l.prototype.emit=function(f,h,p,v,g,_){var E=r?r+f:f;if(!this._events[E])return!1;var b=this._events[E],S=arguments.length,T,C;if(b.fn){switch(b.once&&this.removeListener(f,b.fn,void 0,!0),S){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,h),!0;case 3:return b.fn.call(b.context,h,p),!0;case 4:return b.fn.call(b.context,h,p,v),!0;case 5:return b.fn.call(b.context,h,p,v,g),!0;case 6:return b.fn.call(b.context,h,p,v,g,_),!0}for(C=1,T=new Array(S-1);C<S;C++)T[C-1]=arguments[C];b.fn.apply(b.context,T)}else{var M=b.length,D;for(C=0;C<M;C++)switch(b[C].once&&this.removeListener(f,b[C].fn,void 0,!0),S){case 1:b[C].fn.call(b[C].context);break;case 2:b[C].fn.call(b[C].context,h);break;case 3:b[C].fn.call(b[C].context,h,p);break;case 4:b[C].fn.call(b[C].context,h,p,v);break;default:if(!T)for(D=1,T=new Array(S-1);D<S;D++)T[D-1]=arguments[D];b[C].fn.apply(b[C].context,T)}}return!0},l.prototype.on=function(f,h,p){return a(this,f,h,p,!1)},l.prototype.once=function(f,h,p){return a(this,f,h,p,!0)},l.prototype.removeListener=function(f,h,p,v){var g=r?r+f:f;if(!this._events[g])return this;if(!h)return o(this,g),this;var _=this._events[g];if(_.fn)_.fn===h&&(!v||_.once)&&(!p||_.context===p)&&o(this,g);else{for(var E=0,b=[],S=_.length;E<S;E++)(_[E].fn!==h||v&&!_[E].once||p&&_[E].context!==p)&&b.push(_[E]);b.length?this._events[g]=b.length===1?b[0]:b:o(this,g)}return this},l.prototype.removeAllListeners=function(f){var h;return f?(h=r?r+f:f,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(eR)),eR.exports}var Za=sre();const J3=Kr(Za);var vg=(e=>(e.Realtime="realtime",e.Overlap="overlap",e.Replace="replace",e))(vg||{}),No=(e=>(e.Loading="Loading",e.Loaded="Loaded",e.Failure="Failure",e.Cancelled="Cancelled",e))(No||{}),Ok=0,lD=1,bE=2;function lre(e){e.forEach(t=>{t.isCurrent&&(t.isVisible=t.isLoaded)})}function ure(e){e.forEach(t=>{t.properties.state=Ok}),e.forEach(t=>{t.isCurrent&&!wk(t)&&eO(t)}),e.forEach(t=>{t.isVisible=!!(t.properties.state&bE)})}function cre(e){e.forEach(r=>{r.properties.state=Ok}),e.forEach(r=>{r.isCurrent&&wk(r)}),e.slice().sort((r,n)=>r.z-n.z).forEach(r=>{r.isVisible=!!(r.properties.state&bE),r.children.length&&(r.isVisible||r.properties.state&lD)?r.children.forEach(n=>{n.properties.state=lD}):r.isCurrent&&eO(r)})}function wk(e){for(;e;){if(e.isLoaded)return e.properties.state|=bE,!0;e=e.parent}return!1}function eO(e){e.children.forEach(t=>{t.isLoaded?t.properties.state|=bE:eO(t)})}var Nk=[-1/0,-1/0,1/0,1/0],fre=.2,dre=5,hre={[vg.Realtime]:lre,[vg.Overlap]:ure,[vg.Replace]:cre},pre=()=>{};function M2(e,t,r){const n=Math.floor((e+180)/360*Math.pow(2,r)),i=Math.floor((1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*Math.pow(2,r));return[n,i]}function uD(e,t,r){const n=e/Math.pow(2,r)*360-180,i=Math.PI-2*Math.PI*t/Math.pow(2,r),a=180/Math.PI*Math.atan(.5*(Math.exp(i)-Math.exp(-i)));return[n,a]}var Mk=(e,t,r)=>{const[n,i]=uD(e,t,r),[a,o]=uD(e+1,t+1,r);return[n,o,a,i]};function mre({zoom:e,latLonBounds:t,maxZoom:r=1/0,minZoom:n=0,zoomOffset:i=0,extent:a=Nk}){let o=Math.ceil(e)+i;if(Number.isFinite(n)&&o<n)return[];Number.isFinite(r)&&o>r&&(o=r);const[l,c,f,h]=t,p=[Math.max(l,a[0]),Math.max(c,a[1]),Math.min(f,a[2]),Math.min(h,a[3])],v=[],[g,_]=M2(p[0],p[1],o),[E,b]=M2(p[2],p[3],o);for(let M=g;M<=E;M++)for(let D=b;D<=_;D++)v.push({x:M,y:D,z:o});const S=(E+g)/2,T=(_+b)/2,C=(M,D)=>Math.abs(M-S)+Math.abs(D-T);return v.sort((M,D)=>C(M.x,M.y)-C(D.x,D.y)),v}var vre=(e,t,r,n=!0)=>{const i=Math.pow(2,r),a=i-1,o=i;let l=e;const c=t;return n&&(l<0?l=l+o:l>a&&(l=l%o)),{warpX:l,warpY:c}},gre=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{l(r.next(c))}catch(f){i(f)}},o=c=>{try{l(r.throw(c))}catch(f){i(f)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);l((r=r.apply(e,t)).next())}),_re=class extends Za.EventEmitter{constructor(e){super(),this.tileSize=256,this.isVisible=!1,this.isCurrent=!1,this.isVisibleChange=!1,this.loadedLayers=0,this.isLayerLoaded=!1,this.isLoad=!1,this.isChildLoad=!1,this.parent=null,this.children=[],this.data=null,this.properties={},this.loadDataId=0;const{x:t,y:r,z:n,tileSize:i,warp:a=!0}=e;this.x=t,this.y=r,this.z=n,this.warp=a||!0,this.tileSize=i}get isLoading(){return this.loadStatus===No.Loading}get isLoaded(){return this.loadStatus===No.Loaded}get isFailure(){return this.loadStatus===No.Failure}setTileLayerLoaded(){this.isLayerLoaded=!0}get isCancelled(){return this.loadStatus===No.Cancelled}get isDone(){return[No.Loaded,No.Cancelled,No.Failure].includes(this.loadStatus)}get bounds(){return Mk(this.x,this.y,this.z)}get bboxPolygon(){const[e,t,r,n]=this.bounds,i=[(r-e)/2,(n-t)/2];return ore(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:i,meta:`
      ${this.key}
      `}})}get key(){return`${this.x}_${this.y}_${this.z}`}layerLoad(){this.loadedLayers++,this.emit("layerLoaded")}loadData(e){return gre(this,arguments,function*({getData:t,onLoad:r,onError:n}){this.loadDataId++;const i=this.loadDataId;this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=No.Loading;let a=null,o;try{const{x:l,y:c,z:f,bounds:h,tileSize:p,warp:v}=this,{warpX:g,warpY:_}=vre(l,c,f,v),{signal:E}=this.abortController;a=yield t({x:g,y:_,z:f,bounds:h,tileSize:p,signal:E,warp:v},this)}catch(l){o=l}if(i===this.loadDataId&&!(this.isCancelled&&!a)){if(o||!a){this.loadStatus=No.Failure,n(o,this);return}this.loadStatus=No.Loaded,this.data=a,r(this)}})}reloadData(e){this.isLoading&&this.abortLoad(),this.loadData(e)}abortLoad(){this.isLoaded||this.isCancelled||(this.loadStatus=No.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}},yre=(e,t)=>{const r=i1(e),n=Q3(r,t),i=360*3-180,a=85.0511287798065;return[Math.max(n[0][0],-i),Math.max(n[0][1],-a),Math.min(n[1][0],i),Math.min(n[1][1],a)]},Ere=(e,t)=>{const r=i1(e),n=i1(t);return Tk(r,n)},bre=Object.defineProperty,xre=Object.defineProperties,Sre=Object.getOwnPropertyDescriptors,cD=Object.getOwnPropertySymbols,Tre=Object.prototype.hasOwnProperty,Are=Object.prototype.propertyIsEnumerable,fD=(e,t,r)=>t in e?bre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dD=(e,t)=>{for(var r in t||(t={}))Tre.call(t,r)&&fD(e,r,t[r]);if(cD)for(var r of cD(t))Are.call(t,r)&&fD(e,r,t[r]);return e},Rre=(e,t)=>xre(e,Sre(t)),{throttle:Cre}=Un,Ore=class extends J3{constructor(e){super(),this.currentTiles=[],this.cacheTiles=new Map,this.throttleUpdate=Cre((t,r)=>{this.update(t,r)},16),this.onTileLoad=t=>{this.emit("tile-loaded",t),this.updateTileVisible(),this.loadFinished()},this.onTileError=(t,r)=>{this.emit("tile-error",{error:t,tile:r}),this.updateTileVisible(),this.loadFinished()},this.onTileUnload=t=>{this.emit("tile-unload",t),this.loadFinished()},this.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:Nk,getTileData:pre,warp:!0,updateStrategy:vg.Replace},this.updateOptions(e)}get isLoaded(){return this.currentTiles.every(e=>e.isDone)}get tiles(){return Array.from(this.cacheTiles.values()).sort((t,r)=>t.z-r.z)}updateOptions(e){const t=e.minZoom===void 0?this.options.minZoom:Math.ceil(e.minZoom),r=e.maxZoom===void 0?this.options.maxZoom:Math.floor(e.maxZoom);this.options=Rre(dD(dD({},this.options),e),{minZoom:t,maxZoom:r})}update(e,t){const r=Math.max(0,Math.ceil(e));if(this.lastViewStates&&this.lastViewStates.zoom===r&&Ere(this.lastViewStates.latLonBoundsBuffer,t))return;const n=yre(t,fre);this.lastViewStates={zoom:r,latLonBounds:t,latLonBoundsBuffer:n},this.currentZoom=r;let i=!1;const a=this.getTileIndices(r,n).filter(o=>this.options.warp||o.x>=0&&o.x<Math.pow(2,r));this.emit("tiles-load-start"),this.currentTiles=a.map(({x:o,y:l,z:c})=>{let f=this.getTile(o,l,c);return f?((f?.isFailure||f?.isCancelled)&&f.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),f):(f=this.createTile(o,l,c),i=!0,f)}),i&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}reloadAll(){for(const[e,t]of this.cacheTiles){if(!this.currentTiles.includes(t)){this.cacheTiles.delete(e),this.onTileUnload(t);return}this.onTileUnload(t),t.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}reloadTileById(e,t,r){const n=this.cacheTiles.get(`${t},${r},${e}`);n&&(this.onTileUnload(n),n.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}reloadTileByLnglat(e,t,r){const n=this.getTileByLngLat(e,t,r);n&&this.reloadTileById(n.z,n.x,n.y)}reloadTileByExtent(e,t){this.getTileIndices(t,e).forEach(n=>{this.reloadTileById(n.z,n.x,n.y)})}pruneRequests(){const e=[];for(const t of this.cacheTiles.values())t.isLoading&&!t.isCurrent&&!t.isVisible&&e.push(t);for(;e.length>0;)e.shift().abortLoad()}getTileByLngLat(e,t,r){const{zoomOffset:n}=this.options,i=Math.ceil(r)+n,a=M2(e,t,i);return this.tiles.filter(l=>l.key===`${a[0]}_${a[1]}_${i}`)[0]}getTileExtent(e,t){return this.getTileIndices(t,e)}getTileByZXY(e,t,r){return this.tiles.filter(i=>i.key===`${t}_${r}_${e}`)[0]}clear(){for(const e of this.cacheTiles.values())e.isLoading?e.abortLoad():this.onTileUnload(e);this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}destroy(){this.clear(),this.removeAllListeners()}updateTileVisible(){const e=this.options.updateStrategy,t=new Map;for(const i of this.cacheTiles.values())t.set(i.key,i.isVisible),i.isCurrent=!1,i.isVisible=!1;for(const i of this.currentTiles)i.isCurrent=!0,i.isVisible=!0;const r=Array.from(this.cacheTiles.values());typeof e=="function"?e(r):hre[e](r);let n=!1;Array.from(this.cacheTiles.values()).forEach(i=>{i.isVisible!==t.get(i.key)?(i.isVisibleChange=!0,n=!0):i.isVisibleChange=!1}),n&&this.emit("tile-update")}getTileIndices(e,t){const{tileSize:r,extent:n,zoomOffset:i}=this.options,a=Math.floor(this.options.maxZoom),o=Math.ceil(this.options.minZoom);return mre({maxZoom:a,minZoom:o,zoomOffset:i,zoom:e,latLonBounds:t,extent:n})}getTileId(e,t,r){return`${e},${t},${r}`}loadFinished(){const e=!this.currentTiles.some(t=>!t.isDone);return e&&this.emit("tiles-load-finished"),e}getTile(e,t,r){const n=this.getTileId(e,t,r);return this.cacheTiles.get(n)}createTile(e,t,r){const n=this.getTileId(e,t,r),i=new _re({x:e,y:t,z:r,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(n,i),i.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),i}resizeCacheTiles(){const e=dre*this.currentTiles.length;if(this.cacheTiles.size>e){for(const[r,n]of this.cacheTiles)if(!n.isVisible&&!this.currentTiles.includes(n)&&(this.cacheTiles.delete(r),this.onTileUnload(n)),this.cacheTiles.size<=e)break}this.rebuildTileTree()}rebuildTileTree(){for(const e of this.cacheTiles.values())e.parent=null,e.children.length=0;for(const e of this.cacheTiles.values()){const t=this.getNearestAncestor(e.x,e.y,e.z);e.parent=t,t?.children&&t.children.push(e)}}getNearestAncestor(e,t,r){for(;r>this.options.minZoom;){e=Math.floor(e/2),t=Math.floor(t/2),r=r-1;const n=this.getTile(e,t,r);if(n)return n}return null}};function Ik(e){const t=[];let r=/\{([a-z])-([a-z])\}/.exec(e);if(r){const n=r[1].charCodeAt(0),i=r[2].charCodeAt(0);let a;for(a=n;a<=i;++a)t.push(e.replace(r[0],String.fromCharCode(a)));return t}if(r=/\{(\d+)-(\d+)\}/.exec(e),r){const n=parseInt(r[2],10);for(let i=parseInt(r[1],10);i<=n;i++)t.push(e.replace(r[0],i.toString()));return t}return t.push(e),t}function pp(e,t){if(!e||!e.length)throw new Error("url is not allowed to be empty");const{x:r,y:n,z:i}=t,a=Ik(e),o=Math.abs(r+n)%a.length;return(I3(a[o])?`${a[o]}/{z}/{x}/{y}`:a[o]).replace(/\{x\}/g,r.toString()).replace(/\{y\}/g,n.toString()).replace(/\{z\}/g,i.toString()).replace(/\{bbox\}/g,Mk(r,n,i).join(",")).replace(/\{-y\}/g,(Math.pow(2,i)-n-1).toString())}function wre(e,t){const{x:r,y:n,z:i,layer:a,version:o="1.0.0",style:l="default",format:c,service:f="WMTS",tileMatrixset:h}=t,p=Ik(e),v=Math.abs(r+n)%p.length;return`${p[v]}&SERVICE=${f}&REQUEST=GetTile&VERSION=${o}&LAYER=${a}&STYLE=${l}&TILEMATRIXSET=${h}&FORMAT=${c}&TILECOL=${r}&TILEROW=${n}&TILEMATRIX=${i}`}function xv(e,t){return e??t}var tR,hD;function Nre(){if(hD)return tR;hD=1,tR=e;function e(n,i){var a=n&&n.type,o;if(a==="FeatureCollection")for(o=0;o<n.features.length;o++)e(n.features[o],i);else if(a==="GeometryCollection")for(o=0;o<n.geometries.length;o++)e(n.geometries[o],i);else if(a==="Feature")e(n.geometry,i);else if(a==="Polygon")t(n.coordinates,i);else if(a==="MultiPolygon")for(o=0;o<n.coordinates.length;o++)t(n.coordinates[o],i);return n}function t(n,i){if(n.length!==0){r(n[0],i);for(var a=1;a<n.length;a++)r(n[a],!i)}}function r(n,i){for(var a=0,o=0,l=0,c=n.length,f=c-1;l<c;f=l++){var h=(n[l][0]-n[f][0])*(n[f][1]+n[l][1]),p=a+h;o+=Math.abs(a)>=Math.abs(h)?a-p+h:h-p+a,a=p}a+o>=0!=!!i&&n.reverse()}return tR}var Mre=Nre();const Ire=Kr(Mre);function Pre(e,t){return e.map(r=>r[t]*1)}function Pk(e){return Array.isArray(e)?e.length===0||typeof e[0]=="number":!1}function I2(e){const t=Object.isFrozen(e)?Un.cloneDeep(e):e;return Ire(t,!0),t}function Jp(e,t){return e||[[t[0],t[3]],[t[2],t[3]],[t[2],t[1]],[t[0],t[1]]]}var Dre=Object.defineProperty,Lre=Object.defineProperties,Bre=Object.getOwnPropertyDescriptors,pD=Object.getOwnPropertySymbols,Fre=Object.prototype.hasOwnProperty,Ure=Object.prototype.propertyIsEnumerable,mD=(e,t,r)=>t in e?Dre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vD=(e,t)=>{for(var r in t||(t={}))Fre.call(t,r)&&mD(e,r,t[r]);if(pD)for(var r of pD(t))Ure.call(t,r)&&mD(e,r,t[r]);return e},gD=(e,t)=>Lre(e,Bre(t));function Dk(e,t){const{x:r,y:n,x1:i,y1:a,coordinates:o,geometry:l}=t,c=[];if(!Array.isArray(e))return{dataArray:[]};if(l)return e.filter(f=>f[l]&&f[l].type&&f[l].coordinates&&f[l].coordinates.length>0).forEach((f,h)=>{const p=I2(f[l]);M7(p,v=>{const g=w7(v),_=gD(vD({},f),{_id:h,coordinates:g});c.push(_)})}),{dataArray:c};for(let f=0;f<e.length;f++){const h=e[f];let p=[];if(o){let g="Polygon";Array.isArray(o[0])||(g="Point"),Array.isArray(o[0])&&!Array.isArray(o[0][0])&&(g="LineString"),p=I2({type:g,coordinates:h[o]}).coordinates}else if(r&&n&&i&&a){const g=[parseFloat(h[r]),parseFloat(h[n])],_=[parseFloat(h[i]),parseFloat(h[a])];p=[g,_]}else r&&n&&(p=[parseFloat(h[r]),parseFloat(h[n])]);const v=gD(vD({},h),{_id:f,coordinates:p});c.push(v)}return{dataArray:c}}function kre(e,t){const r=HK(e);return Dk(r,t)}var jre=Object.defineProperty,zre=Object.defineProperties,Vre=Object.getOwnPropertyDescriptors,_D=Object.getOwnPropertySymbols,Hre=Object.prototype.hasOwnProperty,Xre=Object.prototype.propertyIsEnumerable,yD=(e,t,r)=>t in e?jre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qre=(e,t)=>{for(var r in t||(t={}))Hre.call(t,r)&&yD(e,r,t[r]);if(_D)for(var r of _D(t))Xre.call(t,r)&&yD(e,r,t[r]);return e},Gre=(e,t)=>zre(e,Vre(t));function Wre(e){const t=e.toString();let r=5381,n=t.length;for(;n;)r=r*33^t.charCodeAt(--n);return r>>>0}function $re(e,t){return t===void 0?null:isNaN(e.properties[t]*1)?e.properties&&e.properties[t]?Wre(e.properties[t]+"")%1000019:null:e.properties[t]*1}function Yre(e,t){const r=[],n={};return e.features?(e.features=e.features.filter(i=>{const a=i.geometry;return i!=null&&a&&a.type&&a.coordinates&&a.coordinates.length>0}),e=I2(e),e.features.length===0?{dataArray:[],featureKeys:n}:(M7(e,(i,a)=>{let o=$re(i,t?.featureId);o===null&&(o=a);const l=o,c=w7(i),f=Gre(qre({},i.properties),{coordinates:c,_id:l});r.push(f)}),{dataArray:r,featureKeys:n})):(e.features=[],{dataArray:[]})}function P2(e,t,r,n){for(var i=n,a=r-t>>1,o=r-t,l,c=e[t],f=e[t+1],h=e[r],p=e[r+1],v=t+3;v<r;v+=3){var g=Zre(e[v],e[v+1],c,f,h,p);if(g>i)l=v,i=g;else if(g===i){var _=Math.abs(v-a);_<o&&(l=v,o=_)}}i>n&&(l-t>3&&P2(e,t,l,n),e[l+2]=i,r-l>3&&P2(e,l,r,n))}function Zre(e,t,r,n,i,a){var o=i-r,l=a-n;if(o!==0||l!==0){var c=((e-r)*o+(t-n)*l)/(o*o+l*l);c>1?(r=i,n=a):c>0&&(r+=o*c,n+=l*c)}return o=e-r,l=t-n,o*o+l*l}function wg(e,t,r,n){var i={id:typeof e>"u"?null:e,type:t,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Kre(i),i}function Kre(e){var t=e.geometry,r=e.type;if(r==="Point"||r==="MultiPoint"||r==="LineString")rR(e,t);else if(r==="Polygon"||r==="MultiLineString")for(var n=0;n<t.length;n++)rR(e,t[n]);else if(r==="MultiPolygon")for(n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)rR(e,t[n][i])}function rR(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function Qre(e,t){var r=[];if(e.type==="FeatureCollection")for(var n=0;n<e.features.length;n++)Ty(r,e.features[n],t,n);else e.type==="Feature"?Ty(r,e,t):Ty(r,{geometry:e},t);return r}function Ty(e,t,r,n){if(t.geometry){var i=t.geometry.coordinates,a=t.geometry.type,o=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),l=[],c=t.id;if(r.promoteId?c=t.properties[r.promoteId]:r.generateId&&(c=n||0),a==="Point")ED(i,l);else if(a==="MultiPoint")for(var f=0;f<i.length;f++)ED(i[f],l);else if(a==="LineString")D2(i,l,o,!1);else if(a==="MultiLineString")if(r.lineMetrics){for(f=0;f<i.length;f++)l=[],D2(i[f],l,o,!1),e.push(wg(c,"LineString",l,t.properties));return}else nR(i,l,o,!1);else if(a==="Polygon")nR(i,l,o,!0);else if(a==="MultiPolygon")for(f=0;f<i.length;f++){var h=[];nR(i[f],h,o,!0),l.push(h)}else if(a==="GeometryCollection"){for(f=0;f<t.geometry.geometries.length;f++)Ty(e,{id:c,geometry:t.geometry.geometries[f],properties:t.properties},r,n);return}else throw new Error("Input data is not a valid GeoJSON object.");e.push(wg(c,a,l,t.properties))}}function ED(e,t){t.push(Lk(e[0])),t.push(Bk(e[1])),t.push(0)}function D2(e,t,r,n){for(var i,a,o=0,l=0;l<e.length;l++){var c=Lk(e[l][0]),f=Bk(e[l][1]);t.push(c),t.push(f),t.push(0),l>0&&(n?o+=(i*f-c*a)/2:o+=Math.sqrt(Math.pow(c-i,2)+Math.pow(f-a,2))),i=c,a=f}var h=t.length-3;t[2]=1,P2(t,0,h,r),t[h+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function nR(e,t,r,n){for(var i=0;i<e.length;i++){var a=[];D2(e[i],a,r,n),t.push(a)}}function Lk(e){return e/360+.5}function Bk(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function tu(e,t,r,n,i,a,o,l){if(r/=t,n/=t,a>=r&&o<n)return e;if(o<r||a>=n)return null;for(var c=[],f=0;f<e.length;f++){var h=e[f],p=h.geometry,v=h.type,g=i===0?h.minX:h.minY,_=i===0?h.maxX:h.maxY;if(g>=r&&_<n){c.push(h);continue}else if(_<r||g>=n)continue;var E=[];if(v==="Point"||v==="MultiPoint")Jre(p,E,r,n,i);else if(v==="LineString")Fk(p,E,r,n,i,!1,l.lineMetrics);else if(v==="MultiLineString")iR(p,E,r,n,i,!1);else if(v==="Polygon")iR(p,E,r,n,i,!0);else if(v==="MultiPolygon")for(var b=0;b<p.length;b++){var S=[];iR(p[b],S,r,n,i,!0),S.length&&E.push(S)}if(E.length){if(l.lineMetrics&&v==="LineString"){for(b=0;b<E.length;b++)c.push(wg(h.id,v,E[b],h.tags));continue}(v==="LineString"||v==="MultiLineString")&&(E.length===1?(v="LineString",E=E[0]):v="MultiLineString"),(v==="Point"||v==="MultiPoint")&&(v=E.length===3?"Point":"MultiPoint"),c.push(wg(h.id,v,E,h.tags))}}return c.length?c:null}function Jre(e,t,r,n,i){for(var a=0;a<e.length;a+=3){var o=e[a+i];o>=r&&o<=n&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function Fk(e,t,r,n,i,a,o){for(var l=bD(e),c=i===0?ene:tne,f=e.start,h,p,v=0;v<e.length-3;v+=3){var g=e[v],_=e[v+1],E=e[v+2],b=e[v+3],S=e[v+4],T=i===0?g:_,C=i===0?b:S,M=!1;o&&(h=Math.sqrt(Math.pow(g-b,2)+Math.pow(_-S,2))),T<r?C>r&&(p=c(l,g,_,b,S,r),o&&(l.start=f+h*p)):T>n?C<n&&(p=c(l,g,_,b,S,n),o&&(l.start=f+h*p)):aR(l,g,_,E),C<r&&T>=r&&(p=c(l,g,_,b,S,r),M=!0),C>n&&T<=n&&(p=c(l,g,_,b,S,n),M=!0),!a&&M&&(o&&(l.end=f+h*p),t.push(l),l=bD(e)),o&&(f+=h)}var D=e.length-3;g=e[D],_=e[D+1],E=e[D+2],T=i===0?g:_,T>=r&&T<=n&&aR(l,g,_,E),D=l.length-3,a&&D>=3&&(l[D]!==l[0]||l[D+1]!==l[1])&&aR(l,l[0],l[1],l[2]),l.length&&t.push(l)}function bD(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function iR(e,t,r,n,i,a){for(var o=0;o<e.length;o++)Fk(e[o],t,r,n,i,a,!1)}function aR(e,t,r,n){e.push(t),e.push(r),e.push(n)}function ene(e,t,r,n,i,a){var o=(a-t)/(n-t);return e.push(a),e.push(r+(i-r)*o),e.push(1),o}function tne(e,t,r,n,i,a){var o=(a-r)/(i-r);return e.push(t+(n-t)*o),e.push(a),e.push(1),o}function rne(e,t){var r=t.buffer/t.extent,n=e,i=tu(e,1,-1-r,r,0,-1,2,t),a=tu(e,1,1-r,2+r,0,-1,2,t);return(i||a)&&(n=tu(e,1,-r,1+r,0,-1,2,t)||[],i&&(n=xD(i,1).concat(n)),a&&(n=n.concat(xD(a,-1)))),n}function xD(e,t){for(var r=[],n=0;n<e.length;n++){var i=e[n],a=i.type,o;if(a==="Point"||a==="MultiPoint"||a==="LineString")o=oR(i.geometry,t);else if(a==="MultiLineString"||a==="Polygon"){o=[];for(var l=0;l<i.geometry.length;l++)o.push(oR(i.geometry[l],t))}else if(a==="MultiPolygon")for(o=[],l=0;l<i.geometry.length;l++){for(var c=[],f=0;f<i.geometry[l].length;f++)c.push(oR(i.geometry[l][f],t));o.push(c)}r.push(wg(i.id,a,o,i.tags))}return r}function oR(e,t){var r=[];r.size=e.size,e.start!==void 0&&(r.start=e.start,r.end=e.end);for(var n=0;n<e.length;n+=3)r.push(e[n]+t,e[n+1],e[n+2]);return r}function SD(e,t){if(e.transformed)return e;var r=1<<e.z,n=e.x,i=e.y,a,o,l;for(a=0;a<e.features.length;a++){var c=e.features[a],f=c.geometry,h=c.type;if(c.geometry=[],h===1)for(o=0;o<f.length;o+=2)c.geometry.push(TD(f[o],f[o+1],t,r,n,i));else for(o=0;o<f.length;o++){var p=[];for(l=0;l<f[o].length;l+=2)p.push(TD(f[o][l],f[o][l+1],t,r,n,i));c.geometry.push(p)}}return e.transformed=!0,e}function TD(e,t,r,n,i,a){return[Math.round(r*(e*n-i)),Math.round(r*(t*n-a))]}function nne(e,t,r,n,i){for(var a=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},l=0;l<e.length;l++){o.numFeatures++,ine(o,e[l],a,i);var c=e[l].minX,f=e[l].minY,h=e[l].maxX,p=e[l].maxY;c<o.minX&&(o.minX=c),f<o.minY&&(o.minY=f),h>o.maxX&&(o.maxX=h),p>o.maxY&&(o.maxY=p)}return o}function ine(e,t,r,n){var i=t.geometry,a=t.type,o=[];if(a==="Point"||a==="MultiPoint")for(var l=0;l<i.length;l+=3)o.push(i[l]),o.push(i[l+1]),e.numPoints++,e.numSimplified++;else if(a==="LineString")sR(o,i,e,r,!1,!1);else if(a==="MultiLineString"||a==="Polygon")for(l=0;l<i.length;l++)sR(o,i[l],e,r,a==="Polygon",l===0);else if(a==="MultiPolygon")for(var c=0;c<i.length;c++){var f=i[c];for(l=0;l<f.length;l++)sR(o,f[l],e,r,!0,l===0)}if(o.length){var h=t.tags||null;if(a==="LineString"&&n.lineMetrics){h={};for(var p in t.tags)h[p]=t.tags[p];h.mapbox_clip_start=i.start/i.size,h.mapbox_clip_end=i.end/i.size}var v={geometry:o,type:a==="Polygon"||a==="MultiPolygon"?3:a==="LineString"||a==="MultiLineString"?2:1,tags:h};t.id!==null&&(v.id=t.id),e.features.push(v)}}function sR(e,t,r,n,i,a){var o=n*n;if(n>0&&t.size<(i?o:n)){r.numPoints+=t.length/3;return}for(var l=[],c=0;c<t.length;c+=3)(n===0||t[c+2]>o)&&(r.numSimplified++,l.push(t[c]),l.push(t[c+1])),r.numPoints++;i&&ane(l,a),e.push(l)}function ane(e,t){for(var r=0,n=0,i=e.length,a=i-2;n<i;a=n,n+=2)r+=(e[n]-e[a])*(e[n+1]+e[a+1]);if(r>0===t)for(n=0,i=e.length;n<i/2;n+=2){var o=e[n],l=e[n+1];e[n]=e[i-2-n],e[n+1]=e[i-1-n],e[i-2-n]=o,e[i-1-n]=l}}function one(e,t){return new xE(e,t)}function xE(e,t){t=this.options=sne(Object.create(this.options),t);var r=t.debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=Qre(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),n=rne(n,t),n.length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}xE.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};xE.prototype.splitTile=function(e,t,r,n,i,a,o){for(var l=[e,t,r,n],c=this.options,f=c.debug;l.length;){n=l.pop(),r=l.pop(),t=l.pop(),e=l.pop();var h=1<<t,p=L2(t,r,n),v=this.tiles[p];if(!v&&(f>1&&console.time("creation"),v=this.tiles[p]=nne(e,t,r,n,c),this.tileCoords.push({z:t,x:r,y:n}),f)){f>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,v.numFeatures,v.numPoints,v.numSimplified),console.timeEnd("creation"));var g="z"+t;this.stats[g]=(this.stats[g]||0)+1,this.total++}if(v.source=e,i){if(t===c.maxZoom||t===i)continue;var _=1<<i-t;if(r!==Math.floor(a/_)||n!==Math.floor(o/_))continue}else if(t===c.indexMaxZoom||v.numPoints<=c.indexMaxPoints)continue;if(v.source=null,e.length!==0){f>1&&console.time("clipping");var E=.5*c.buffer/c.extent,b=.5-E,S=.5+E,T=1+E,C,M,D,I,N,j;C=M=D=I=null,N=tu(e,h,r-E,r+S,0,v.minX,v.maxX,c),j=tu(e,h,r+b,r+T,0,v.minX,v.maxX,c),e=null,N&&(C=tu(N,h,n-E,n+S,1,v.minY,v.maxY,c),M=tu(N,h,n+b,n+T,1,v.minY,v.maxY,c),N=null),j&&(D=tu(j,h,n-E,n+S,1,v.minY,v.maxY,c),I=tu(j,h,n+b,n+T,1,v.minY,v.maxY,c),j=null),f>1&&console.timeEnd("clipping"),l.push(C||[],t+1,r*2,n*2),l.push(M||[],t+1,r*2,n*2+1),l.push(D||[],t+1,r*2+1,n*2),l.push(I||[],t+1,r*2+1,n*2+1)}}};xE.prototype.getTile=function(e,t,r){var n=this.options,i=n.extent,a=n.debug;if(e<0||e>24)return null;var o=1<<e;t=(t%o+o)%o;var l=L2(e,t,r);if(this.tiles[l])return SD(this.tiles[l],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var c=e,f=t,h=r,p;!p&&c>0;)c--,f=Math.floor(f/2),h=Math.floor(h/2),p=this.tiles[L2(c,f,h)];return!p||!p.source?null:(a>1&&console.log("found parent tile z%d-%d-%d",c,f,h),a>1&&console.time("drilling down"),this.splitTile(p.source,c,f,h,e,t,r),a>1&&console.timeEnd("drilling down"),this.tiles[l]?SD(this.tiles[l],i):null)};function L2(e,t,r){return((1<<e)*r+t)*32+e}function sne(e,t){for(var r in t)e[r]=t[r];return e}var eg=class{constructor(t,r,n,i){this.vectorLayerCache={},this.x=r,this.y=n,this.z=i,this.vectorTile=t}getTileData(t){return!t||!this.vectorTile.layers[t]?[]:this.vectorLayerCache[t]?this.vectorLayerCache[t]:this.vectorTile.layers[t].features}getFeatureById(){throw new Error("Method not implemented.")}},lne=Object.defineProperty,une=Object.defineProperties,cne=Object.getOwnPropertyDescriptors,AD=Object.getOwnPropertySymbols,fne=Object.prototype.hasOwnProperty,dne=Object.prototype.propertyIsEnumerable,RD=(e,t,r)=>t in e?lne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,a1=(e,t)=>{for(var r in t||(t={}))fne.call(t,r)&&RD(e,r,t[r]);if(AD)for(var r of AD(t))dne.call(t,r)&&RD(e,r,t[r]);return e},hne=(e,t)=>une(e,cne(t)),pne=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{l(r.next(c))}catch(f){i(f)}},o=c=>{try{l(r.throw(c))}catch(f){i(f)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);l((r=r.apply(e,t)).next())}),mne={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function vne(e){let t=0;for(let r=0,n=e.length,i=n-1,a,o;r<n;i=r++)a=e[r],o=e[i],t+=(o.x-a.x)*(a.y+o.y);return t}function gne(e){const t=e.length;if(t<=1)return[e];const r=[];let n,i;for(let a=0;a<t;a++){const o=vne(e[a]);o!==0&&(i===void 0&&(i=o<0),i===o<0?(n&&r.push(n),n=[e[a]]):n.push(e[a]))}return n&&r.push(n),r}var _ne=["Unknown","Point","LineString","Polygon"];function yne(e,t,r,n,i){let a=i.geometry;const o=i.type,l=i.tags,c=i.id,f=e*Math.pow(2,n),h=e*t,p=e*r;let v=_ne[o],g,_;function E(S){for(let T=0;T<S.length;T++){const C=S[T];if(C[3])break;const M=180-(C[1]+p)*360/f,D=(C[0]+h)*360/f-180,I=360/Math.PI*Math.atan(Math.exp(M*Math.PI/180))-90;S[T]=[D,I,0,1]}}switch(o){case 1:const S=[];for(g=0;g<a.length;g++)S[g]=a[g][0];a=S,E(a);break;case 2:for(g=0;g<a.length;g++)E(a[g]);break;case 3:for(a=gne(a),g=0;g<a.length;g++)for(_=0;_<a[g].length;_++)E(a[g][_]);break}return a.length===1?a=a[0]:v="Multi"+v,{type:"Feature",geometry:{type:v,coordinates:a},properties:l,id:c,relativeOrigin:[0,0],coord:""}}var Ene=(e,t,r,n)=>pne(void 0,null,function*(){return new Promise(i=>{const a=t.getTile(e.z,e.x,e.y),l={layers:{defaultLayer:{features:a?a.features.map(f=>yne(n,r.x,r.y,r.z,f)):[]}}},c=new eg(l,e.x,e.y,e.z);i(c)})});function bne(e){const t={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return e===void 0||typeof e.geojsonvtOptions>"u"?t:a1(a1({},t),e.geojsonvtOptions)}function xne(e,t){const r=bne(t),n=r.extent||4096,i=one(e,r),a=(l,c)=>Ene(c,i,l,n),o=hne(a1(a1({},mne),t),{getTileData:a});return{data:e,dataArray:[],tilesetOptions:o,isTile:!0}}var Sne=Object.defineProperty,Tne=Object.defineProperties,Ane=Object.getOwnPropertyDescriptors,CD=Object.getOwnPropertySymbols,Rne=Object.prototype.hasOwnProperty,Cne=Object.prototype.propertyIsEnumerable,OD=(e,t,r)=>t in e?Sne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wD=(e,t)=>{for(var r in t||(t={}))Rne.call(t,r)&&OD(e,r,t[r]);if(CD)for(var r of CD(t))Cne.call(t,r)&&OD(e,r,t[r]);return e},ND=(e,t)=>Tne(e,Ane(t));function Uk(e,t){const{extent:r=[121.168,30.2828,121.384,30.4219],coordinates:n,requestParameters:i={}}=t,a=new Promise(c=>{e instanceof HTMLImageElement||Xte(e)?c([e]):One(e,i,f=>{c(f)})}),o=Jp(n,r);return{originData:e,images:a,_id:1,dataArray:[{_id:0,coordinates:o}]}}function One(e,t,r){const n=[];if(typeof e=="string")C2(ND(wD({},t),{url:e}),(i,a)=>{a&&(n.push(a),r(n))});else{const i=e.length;let a=0;e.forEach(o=>{C2(ND(wD({},t),{url:o}),(l,c)=>{a++,c&&n.push(c),a===i&&r(n)})})}return Uk}var wne=Object.defineProperty,Nne=Object.defineProperties,Mne=Object.getOwnPropertyDescriptors,MD=Object.getOwnPropertySymbols,Ine=Object.prototype.hasOwnProperty,Pne=Object.prototype.propertyIsEnumerable,ID=(e,t,r)=>t in e?wne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,kk=(e,t)=>{for(var r in t||(t={}))Ine.call(t,r)&&ID(e,r,t[r]);if(MD)for(var r of MD(t))Pne.call(t,r)&&ID(e,r,t[r]);return e},jk=(e,t)=>Nne(e,Mne(t)),Dne=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{l(r.next(c))}catch(f){i(f)}},o=c=>{try{l(r.throw(c))}catch(f){i(f)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);l((r=r.apply(e,t)).next())}),Lne=(e,t,r,n)=>Dne(void 0,null,function*(){const i={x:t.x,y:t.y,z:t.z},a=pp(e,i);return new Promise(o=>{n?n(i,(l,c)=>{if(l||!c){const f={layers:{defaultLayer:{features:[]}}},h=new eg(f,t.x,t.y,t.z);o(h)}else{const f={layers:{defaultLayer:{features:c.features}}},h=new eg(f,t.x,t.y,t.z);o(h)}}):rQ(jk(kk({},r),{url:a}),(l,c)=>{if(l||!c){const f={layers:{defaultLayer:{features:[]}}},h=new eg(f,t.x,t.y,t.z);o(h)}else{const h={layers:{defaultLayer:{features:JSON.parse(c)}}},p=new eg(h,t.x,t.y,t.z);o(p)}})})});function Bne(e,t){const r=(i,a)=>Lne(e,a,t?.requestParameters,t.getCustomData),n=jk(kk({},t),{getTileData:r});return{dataArray:[],tilesetOptions:n,isTile:!0}}var Sv={},lR,PD;function Fne(){if(PD)return lR;PD=1,lR=e;function e(t,r){this.x=t,this.y=r}return e.prototype={clone:function(){return new e(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,r){return this.clone()._rotateAround(t,r)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var r=t.x-this.x,n=t.y-this.y;return r*r+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,r){return Math.atan2(this.x*r-this.y*t,this.x*t+this.y*r)},_matMult:function(t){var r=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=r,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var r=Math.cos(t),n=Math.sin(t),i=r*this.x-n*this.y,a=n*this.x+r*this.y;return this.x=i,this.y=a,this},_rotateAround:function(t,r){var n=Math.cos(t),i=Math.sin(t),a=r.x+n*(this.x-r.x)-i*(this.y-r.y),o=r.y+i*(this.x-r.x)+n*(this.y-r.y);return this.x=a,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},e.convert=function(t){return t instanceof e?t:Array.isArray(t)?new e(t[0],t[1]):t},lR}var uR,DD;function zk(){if(DD)return uR;DD=1;var e=Fne();uR=t;function t(o,l,c,f,h){this.properties={},this.extent=c,this.type=0,this._pbf=o,this._geometry=-1,this._keys=f,this._values=h,o.readFields(r,this,l)}function r(o,l,c){o==1?l.id=c.readVarint():o==2?n(c,l):o==3?l.type=c.readVarint():o==4&&(l._geometry=c.pos)}function n(o,l){for(var c=o.readVarint()+o.pos;o.pos<c;){var f=l._keys[o.readVarint()],h=l._values[o.readVarint()];l.properties[f]=h}}t.types=["Unknown","Point","LineString","Polygon"],t.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var l=o.readVarint()+o.pos,c=1,f=0,h=0,p=0,v=[],g;o.pos<l;){if(f<=0){var _=o.readVarint();c=_&7,f=_>>3}if(f--,c===1||c===2)h+=o.readSVarint(),p+=o.readSVarint(),c===1&&(g&&v.push(g),g=[]),g.push(new e(h,p));else if(c===7)g&&g.push(g[0].clone());else throw new Error("unknown command "+c)}return g&&v.push(g),v},t.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var l=o.readVarint()+o.pos,c=1,f=0,h=0,p=0,v=1/0,g=-1/0,_=1/0,E=-1/0;o.pos<l;){if(f<=0){var b=o.readVarint();c=b&7,f=b>>3}if(f--,c===1||c===2)h+=o.readSVarint(),p+=o.readSVarint(),h<v&&(v=h),h>g&&(g=h),p<_&&(_=p),p>E&&(E=p);else if(c!==7)throw new Error("unknown command "+c)}return[v,_,g,E]},t.prototype.toGeoJSON=function(o,l,c){var f=this.extent*Math.pow(2,c),h=this.extent*o,p=this.extent*l,v=this.loadGeometry(),g=t.types[this.type],_,E;function b(C){for(var M=0;M<C.length;M++){var D=C[M],I=180-(D.y+p)*360/f;C[M]=[(D.x+h)*360/f-180,360/Math.PI*Math.atan(Math.exp(I*Math.PI/180))-90]}}switch(this.type){case 1:var S=[];for(_=0;_<v.length;_++)S[_]=v[_][0];v=S,b(v);break;case 2:for(_=0;_<v.length;_++)b(v[_]);break;case 3:for(v=i(v),_=0;_<v.length;_++)for(E=0;E<v[_].length;E++)b(v[_][E]);break}v.length===1?v=v[0]:g="Multi"+g;var T={type:"Feature",geometry:{type:g,coordinates:v},properties:this.properties};return"id"in this&&(T.id=this.id),T};function i(o){var l=o.length;if(l<=1)return[o];for(var c=[],f,h,p=0;p<l;p++){var v=a(o[p]);v!==0&&(h===void 0&&(h=v<0),h===v<0?(f&&c.push(f),f=[o[p]]):f.push(o[p]))}return f&&c.push(f),c}function a(o){for(var l=0,c=0,f=o.length,h=f-1,p,v;c<f;h=c++)p=o[c],v=o[h],l+=(v.x-p.x)*(p.y+v.y);return l}return uR}var cR,LD;function Vk(){if(LD)return cR;LD=1;var e=zk();cR=t;function t(i,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(r,this,a),this.length=this._features.length}function r(i,a,o){i===15?a.version=o.readVarint():i===1?a.name=o.readString():i===5?a.extent=o.readVarint():i===2?a._features.push(o.pos):i===3?a._keys.push(o.readString()):i===4&&a._values.push(n(o))}function n(i){for(var a=null,o=i.readVarint()+i.pos;i.pos<o;){var l=i.readVarint()>>3;a=l===1?i.readString():l===2?i.readFloat():l===3?i.readDouble():l===4?i.readVarint64():l===5?i.readVarint():l===6?i.readSVarint():l===7?i.readBoolean():null}return a}return t.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var a=this._pbf.readVarint()+this._pbf.pos;return new e(this._pbf,a,this.extent,this._keys,this._values)},cR}var fR,BD;function Une(){if(BD)return fR;BD=1;var e=Vk();fR=t;function t(n,i){this.layers=n.readFields(r,{},i)}function r(n,i,a){if(n===3){var o=new e(a,a.readVarint()+a.pos);o.length&&(i[o.name]=o)}}return fR}var FD;function kne(){return FD||(FD=1,Sv.VectorTile=Une(),Sv.VectorTileFeature=zk(),Sv.VectorTileLayer=Vk()),Sv}var jne=kne(),Z_={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var UD;function zne(){return UD||(UD=1,Z_.read=function(e,t,r,n,i){var a,o,l=i*8-n-1,c=(1<<l)-1,f=c>>1,h=-7,p=r?i-1:0,v=r?-1:1,g=e[t+p];for(p+=v,a=g&(1<<-h)-1,g>>=-h,h+=l;h>0;a=a*256+e[t+p],p+=v,h-=8);for(o=a&(1<<-h)-1,a>>=-h,h+=n;h>0;o=o*256+e[t+p],p+=v,h-=8);if(a===0)a=1-f;else{if(a===c)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,n),a=a-f}return(g?-1:1)*o*Math.pow(2,a-n)},Z_.write=function(e,t,r,n,i,a){var o,l,c,f=a*8-i-1,h=(1<<f)-1,p=h>>1,v=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:a-1,_=n?1:-1,E=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+p>=1?t+=v/c:t+=v*Math.pow(2,1-p),t*c>=2&&(o++,c/=2),o+p>=h?(l=0,o=h):o+p>=1?(l=(t*c-1)*Math.pow(2,i),o=o+p):(l=t*Math.pow(2,p-1)*Math.pow(2,i),o=0));i>=8;e[r+g]=l&255,g+=_,l/=256,i-=8);for(o=o<<i|l,f+=i;f>0;e[r+g]=o&255,g+=_,o/=256,f-=8);e[r+g-_]|=E*128}),Z_}var dR,kD;function Vne(){if(kD)return dR;kD=1,dR=t;var e=zne();function t(R){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(R)?R:new Uint8Array(R||0),this.pos=0,this.type=0,this.length=this.buf.length}t.Varint=0,t.Fixed64=1,t.Bytes=2,t.Fixed32=5;var r=65536*65536,n=1/r,i=12,a=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");t.prototype={destroy:function(){this.buf=null},readFields:function(R,P,V){for(V=V||this.length;this.pos<V;){var le=this.readVarint(),w=le>>3,z=this.pos;this.type=le&7,R(w,P,this),this.pos===z&&this.skip(le)}return P},readMessage:function(R,P){return this.readFields(R,P,this.readVarint()+this.pos)},readFixed32:function(){var R=I(this.buf,this.pos);return this.pos+=4,R},readSFixed32:function(){var R=j(this.buf,this.pos);return this.pos+=4,R},readFixed64:function(){var R=I(this.buf,this.pos)+I(this.buf,this.pos+4)*r;return this.pos+=8,R},readSFixed64:function(){var R=I(this.buf,this.pos)+j(this.buf,this.pos+4)*r;return this.pos+=8,R},readFloat:function(){var R=e.read(this.buf,this.pos,!0,23,4);return this.pos+=4,R},readDouble:function(){var R=e.read(this.buf,this.pos,!0,52,8);return this.pos+=8,R},readVarint:function(R){var P=this.buf,V,le;return le=P[this.pos++],V=le&127,le<128||(le=P[this.pos++],V|=(le&127)<<7,le<128)||(le=P[this.pos++],V|=(le&127)<<14,le<128)||(le=P[this.pos++],V|=(le&127)<<21,le<128)?V:(le=P[this.pos],V|=(le&15)<<28,o(V,R,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var R=this.readVarint();return R%2===1?(R+1)/-2:R/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var R=this.readVarint()+this.pos,P=this.pos;return this.pos=R,R-P>=i&&a?Q(this.buf,P,R):re(this.buf,P,R)},readBytes:function(){var R=this.readVarint()+this.pos,P=this.buf.subarray(this.pos,R);return this.pos=R,P},readPackedVarint:function(R,P){if(this.type!==t.Bytes)return R.push(this.readVarint(P));var V=l(this);for(R=R||[];this.pos<V;)R.push(this.readVarint(P));return R},readPackedSVarint:function(R){if(this.type!==t.Bytes)return R.push(this.readSVarint());var P=l(this);for(R=R||[];this.pos<P;)R.push(this.readSVarint());return R},readPackedBoolean:function(R){if(this.type!==t.Bytes)return R.push(this.readBoolean());var P=l(this);for(R=R||[];this.pos<P;)R.push(this.readBoolean());return R},readPackedFloat:function(R){if(this.type!==t.Bytes)return R.push(this.readFloat());var P=l(this);for(R=R||[];this.pos<P;)R.push(this.readFloat());return R},readPackedDouble:function(R){if(this.type!==t.Bytes)return R.push(this.readDouble());var P=l(this);for(R=R||[];this.pos<P;)R.push(this.readDouble());return R},readPackedFixed32:function(R){if(this.type!==t.Bytes)return R.push(this.readFixed32());var P=l(this);for(R=R||[];this.pos<P;)R.push(this.readFixed32());return R},readPackedSFixed32:function(R){if(this.type!==t.Bytes)return R.push(this.readSFixed32());var P=l(this);for(R=R||[];this.pos<P;)R.push(this.readSFixed32());return R},readPackedFixed64:function(R){if(this.type!==t.Bytes)return R.push(this.readFixed64());var P=l(this);for(R=R||[];this.pos<P;)R.push(this.readFixed64());return R},readPackedSFixed64:function(R){if(this.type!==t.Bytes)return R.push(this.readSFixed64());var P=l(this);for(R=R||[];this.pos<P;)R.push(this.readSFixed64());return R},skip:function(R){var P=R&7;if(P===t.Varint)for(;this.buf[this.pos++]>127;);else if(P===t.Bytes)this.pos=this.readVarint()+this.pos;else if(P===t.Fixed32)this.pos+=4;else if(P===t.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+P)},writeTag:function(R,P){this.writeVarint(R<<3|P)},realloc:function(R){for(var P=this.length||16;P<this.pos+R;)P*=2;if(P!==this.length){var V=new Uint8Array(P);V.set(this.buf),this.buf=V,this.length=P}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(R){this.realloc(4),N(this.buf,R,this.pos),this.pos+=4},writeSFixed32:function(R){this.realloc(4),N(this.buf,R,this.pos),this.pos+=4},writeFixed64:function(R){this.realloc(8),N(this.buf,R&-1,this.pos),N(this.buf,Math.floor(R*n),this.pos+4),this.pos+=8},writeSFixed64:function(R){this.realloc(8),N(this.buf,R&-1,this.pos),N(this.buf,Math.floor(R*n),this.pos+4),this.pos+=8},writeVarint:function(R){if(R=+R||0,R>268435455||R<0){f(R,this);return}this.realloc(4),this.buf[this.pos++]=R&127|(R>127?128:0),!(R<=127)&&(this.buf[this.pos++]=(R>>>=7)&127|(R>127?128:0),!(R<=127)&&(this.buf[this.pos++]=(R>>>=7)&127|(R>127?128:0),!(R<=127)&&(this.buf[this.pos++]=R>>>7&127)))},writeSVarint:function(R){this.writeVarint(R<0?-R*2-1:R*2)},writeBoolean:function(R){this.writeVarint(!!R)},writeString:function(R){R=String(R),this.realloc(R.length*4),this.pos++;var P=this.pos;this.pos=X(this.buf,R,this.pos);var V=this.pos-P;V>=128&&v(P,V,this),this.pos=P-1,this.writeVarint(V),this.pos+=V},writeFloat:function(R){this.realloc(4),e.write(this.buf,R,this.pos,!0,23,4),this.pos+=4},writeDouble:function(R){this.realloc(8),e.write(this.buf,R,this.pos,!0,52,8),this.pos+=8},writeBytes:function(R){var P=R.length;this.writeVarint(P),this.realloc(P);for(var V=0;V<P;V++)this.buf[this.pos++]=R[V]},writeRawMessage:function(R,P){this.pos++;var V=this.pos;R(P,this);var le=this.pos-V;le>=128&&v(V,le,this),this.pos=V-1,this.writeVarint(le),this.pos+=le},writeMessage:function(R,P,V){this.writeTag(R,t.Bytes),this.writeRawMessage(P,V)},writePackedVarint:function(R,P){P.length&&this.writeMessage(R,g,P)},writePackedSVarint:function(R,P){P.length&&this.writeMessage(R,_,P)},writePackedBoolean:function(R,P){P.length&&this.writeMessage(R,S,P)},writePackedFloat:function(R,P){P.length&&this.writeMessage(R,E,P)},writePackedDouble:function(R,P){P.length&&this.writeMessage(R,b,P)},writePackedFixed32:function(R,P){P.length&&this.writeMessage(R,T,P)},writePackedSFixed32:function(R,P){P.length&&this.writeMessage(R,C,P)},writePackedFixed64:function(R,P){P.length&&this.writeMessage(R,M,P)},writePackedSFixed64:function(R,P){P.length&&this.writeMessage(R,D,P)},writeBytesField:function(R,P){this.writeTag(R,t.Bytes),this.writeBytes(P)},writeFixed32Field:function(R,P){this.writeTag(R,t.Fixed32),this.writeFixed32(P)},writeSFixed32Field:function(R,P){this.writeTag(R,t.Fixed32),this.writeSFixed32(P)},writeFixed64Field:function(R,P){this.writeTag(R,t.Fixed64),this.writeFixed64(P)},writeSFixed64Field:function(R,P){this.writeTag(R,t.Fixed64),this.writeSFixed64(P)},writeVarintField:function(R,P){this.writeTag(R,t.Varint),this.writeVarint(P)},writeSVarintField:function(R,P){this.writeTag(R,t.Varint),this.writeSVarint(P)},writeStringField:function(R,P){this.writeTag(R,t.Bytes),this.writeString(P)},writeFloatField:function(R,P){this.writeTag(R,t.Fixed32),this.writeFloat(P)},writeDoubleField:function(R,P){this.writeTag(R,t.Fixed64),this.writeDouble(P)},writeBooleanField:function(R,P){this.writeVarintField(R,!!P)}};function o(R,P,V){var le=V.buf,w,z;if(z=le[V.pos++],w=(z&112)>>4,z<128||(z=le[V.pos++],w|=(z&127)<<3,z<128)||(z=le[V.pos++],w|=(z&127)<<10,z<128)||(z=le[V.pos++],w|=(z&127)<<17,z<128)||(z=le[V.pos++],w|=(z&127)<<24,z<128)||(z=le[V.pos++],w|=(z&1)<<31,z<128))return c(R,w,P);throw new Error("Expected varint not more than 10 bytes")}function l(R){return R.type===t.Bytes?R.readVarint()+R.pos:R.pos+1}function c(R,P,V){return V?P*4294967296+(R>>>0):(P>>>0)*4294967296+(R>>>0)}function f(R,P){var V,le;if(R>=0?(V=R%4294967296|0,le=R/4294967296|0):(V=~(-R%4294967296),le=~(-R/4294967296),V^4294967295?V=V+1|0:(V=0,le=le+1|0)),R>=18446744073709552e3||R<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");P.realloc(10),h(V,le,P),p(le,P)}function h(R,P,V){V.buf[V.pos++]=R&127|128,R>>>=7,V.buf[V.pos++]=R&127|128,R>>>=7,V.buf[V.pos++]=R&127|128,R>>>=7,V.buf[V.pos++]=R&127|128,R>>>=7,V.buf[V.pos]=R&127}function p(R,P){var V=(R&7)<<4;P.buf[P.pos++]|=V|((R>>>=3)?128:0),R&&(P.buf[P.pos++]=R&127|((R>>>=7)?128:0),R&&(P.buf[P.pos++]=R&127|((R>>>=7)?128:0),R&&(P.buf[P.pos++]=R&127|((R>>>=7)?128:0),R&&(P.buf[P.pos++]=R&127|((R>>>=7)?128:0),R&&(P.buf[P.pos++]=R&127)))))}function v(R,P,V){var le=P<=16383?1:P<=2097151?2:P<=268435455?3:Math.floor(Math.log(P)/(Math.LN2*7));V.realloc(le);for(var w=V.pos-1;w>=R;w--)V.buf[w+le]=V.buf[w]}function g(R,P){for(var V=0;V<R.length;V++)P.writeVarint(R[V])}function _(R,P){for(var V=0;V<R.length;V++)P.writeSVarint(R[V])}function E(R,P){for(var V=0;V<R.length;V++)P.writeFloat(R[V])}function b(R,P){for(var V=0;V<R.length;V++)P.writeDouble(R[V])}function S(R,P){for(var V=0;V<R.length;V++)P.writeBoolean(R[V])}function T(R,P){for(var V=0;V<R.length;V++)P.writeFixed32(R[V])}function C(R,P){for(var V=0;V<R.length;V++)P.writeSFixed32(R[V])}function M(R,P){for(var V=0;V<R.length;V++)P.writeFixed64(R[V])}function D(R,P){for(var V=0;V<R.length;V++)P.writeSFixed64(R[V])}function I(R,P){return(R[P]|R[P+1]<<8|R[P+2]<<16)+R[P+3]*16777216}function N(R,P,V){R[V]=P,R[V+1]=P>>>8,R[V+2]=P>>>16,R[V+3]=P>>>24}function j(R,P){return(R[P]|R[P+1]<<8|R[P+2]<<16)+(R[P+3]<<24)}function re(R,P,V){for(var le="",w=P;w<V;){var z=R[w],H=null,ee=z>239?4:z>223?3:z>191?2:1;if(w+ee>V)break;var oe,ge,ye;ee===1?z<128&&(H=z):ee===2?(oe=R[w+1],(oe&192)===128&&(H=(z&31)<<6|oe&63,H<=127&&(H=null))):ee===3?(oe=R[w+1],ge=R[w+2],(oe&192)===128&&(ge&192)===128&&(H=(z&15)<<12|(oe&63)<<6|ge&63,(H<=2047||H>=55296&&H<=57343)&&(H=null))):ee===4&&(oe=R[w+1],ge=R[w+2],ye=R[w+3],(oe&192)===128&&(ge&192)===128&&(ye&192)===128&&(H=(z&15)<<18|(oe&63)<<12|(ge&63)<<6|ye&63,(H<=65535||H>=1114112)&&(H=null))),H===null?(H=65533,ee=1):H>65535&&(H-=65536,le+=String.fromCharCode(H>>>10&1023|55296),H=56320|H&1023),le+=String.fromCharCode(H),w+=ee}return le}function Q(R,P,V){return a.decode(R.subarray(P,V))}function X(R,P,V){for(var le=0,w,z;le<P.length;le++){if(w=P.charCodeAt(le),w>55295&&w<57344)if(z)if(w<56320){R[V++]=239,R[V++]=191,R[V++]=189,z=w;continue}else w=z-55296<<10|w-56320|65536,z=null;else{w>56319||le+1===P.length?(R[V++]=239,R[V++]=191,R[V++]=189):z=w;continue}else z&&(R[V++]=239,R[V++]=191,R[V++]=189,z=null);w<128?R[V++]=w:(w<2048?R[V++]=w>>6|192:(w<65536?R[V++]=w>>12|224:(R[V++]=w>>18|240,R[V++]=w>>12&63|128),R[V++]=w>>6&63|128),R[V++]=w&63|128)}return V}return dR}var Hne=Vne();const Xne=Kr(Hne);var qne=Object.defineProperty,Gne=Object.defineProperties,Wne=Object.getOwnPropertyDescriptors,jD=Object.getOwnPropertySymbols,$ne=Object.prototype.hasOwnProperty,Yne=Object.prototype.propertyIsEnumerable,zD=(e,t,r)=>t in e?qne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,VD=(e,t)=>{for(var r in t||(t={}))$ne.call(t,r)&&zD(e,r,t[r]);if(jD)for(var r of jD(t))Yne.call(t,r)&&zD(e,r,t[r]);return e},Zne=(e,t)=>Gne(e,Wne(t)),HD=class{constructor(e,t,r,n){this.vectorLayerCache={},this.x=t,this.y=r,this.z=n,this.vectorTile=new jne.VectorTile(new Xne(e))}getTileData(e){if(!e||!this.vectorTile.layers[e])return[];if(this.vectorLayerCache[e])return this.vectorLayerCache[e];const t=this.vectorTile.layers[e];if(Array.isArray(t.features))return this.vectorLayerCache[e]=t.features,t.features;const r=[];for(let n=0;n<t.length;n++){const a=t.feature(n).toGeoJSON(this.x,this.y,this.z);r.push(Zne(VD({},a),{properties:VD({id:a.id},a.properties)}))}return this.vectorLayerCache[e]=r,r}getFeatureById(){throw new Error("Method not implemented.")}},Kne=Object.defineProperty,Qne=Object.defineProperties,Jne=Object.getOwnPropertyDescriptors,XD=Object.getOwnPropertySymbols,eie=Object.prototype.hasOwnProperty,tie=Object.prototype.propertyIsEnumerable,qD=(e,t,r)=>t in e?Kne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,B2=(e,t)=>{for(var r in t||(t={}))eie.call(t,r)&&qD(e,r,t[r]);if(XD)for(var r of XD(t))tie.call(t,r)&&qD(e,r,t[r]);return e},Hk=(e,t)=>Qne(e,Jne(t)),rie=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{l(r.next(c))}catch(f){i(f)}},o=c=>{try{l(r.throw(c))}catch(f){i(f)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);l((r=r.apply(e,t)).next())}),nie={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},iie=(e,t,r,n,i)=>rie(void 0,null,function*(){const a=pp(e,t);return new Promise(o=>{if(i)i({x:r.x,y:r.y,z:r.z},(l,c)=>{if(l||!c)o(void 0);else{const f=new HD(c,r.x,r.y,r.z);o(f)}});else{const l=D3(Hk(B2({},n),{url:a}),(c,f)=>{if(c||!f)o(void 0);else{const h=new HD(f,r.x,r.y,r.z);o(h)}});r.xhrCancel=()=>l.cancel()}})});function aie(e,t){const r=Array.isArray(e)?e[0]:e,n=(a,o)=>iie(r,a,o,t?.requestParameters,t?.getCustomData),i=Hk(B2(B2({},nie),t),{getTileData:n});return{data:r,dataArray:[],tilesetOptions:i,isTile:!0}}function oie(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"/":return t/r;case"%":return t%r;case"^":return Math.pow(t,r);case"abs":return Math.abs(t);case"floor":return Math.floor(t);case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"sin":return Math.sin(t);case"cos":return Math.cos(t);case"atan":return r===-1?Math.atan(t):Math.atan2(t,r);case"min":return Math.min(t,r);case"max":return Math.max(t,r);case"log10":return Math.log(t);case"log2":return Math.log2(t);default:return console.warn("Calculate symbol err! Return default 0"),0}}function gg(e,t){const{width:r,height:n}=t[0],i=t.map(c=>c.rasterData),a=r*n,o=[],l=JSON.stringify(e);for(let c=0;c<a;c++){const f=JSON.parse(l),h=Xk(f,i,c);if(typeof h=="number")o.push(h);else{const p=F2(f);o.push(p)}}return o}function Xk(e,t,r){if(e.length===2&&e[0]==="band"&&typeof e[1]=="number")try{return t[e[1]][r]}catch{return console.warn("Raster Data err!"),0}e.map((n,i)=>{if(Array.isArray(n)&&n.length>0)switch(n[0]){case"band":try{e[i]=t[n[1]][r]}catch{console.warn("Raster Data err!"),e[i]=0}break;default:Xk(n,t,r)}})}function sie(e){const[t,r=-1,n=-1]=e;return t===void 0?(console.warn("Express err!"),["+",0,0]):[t.replace(/\s+/g,""),r,n]}function F2(e){const t=sie(e),r=t[0];let n=t[1],i=t[2];return Array.isArray(n)&&(n=F2(e[1])),Array.isArray(i)&&(i=F2(e[2])),oie(r,n,i)}var lie={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:uie}};function uie(e,t){const r=e[0].rasterData,n=e[1].rasterData,i=e[2].rasterData,a=[],[o,l]=t?.countCut||[2,98],c=t?.RMinMax||mp(r,o,l),f=t?.GMinMax||mp(n,o,l),h=t?.BMinMax||mp(i,o,l);for(let p=0;p<r.length;p++)a.push(Math.max(0,r[p]-c[0])),a.push(Math.max(0,n[p]-f[0])),a.push(Math.max(0,i[p]-h[0]));return{rasterData:a,rMinMax:c,gMinMax:f,bMinMax:h}}function mp(e,t,r){const n=e.slice().sort((l,c)=>l-c),i=n.length,a=n[Math.ceil(i*t/100)],o=n[Math.ceil(i*r/100)];return[a,o]}var cie=Object.defineProperty,fie=Object.defineProperties,die=Object.getOwnPropertyDescriptors,GD=Object.getOwnPropertySymbols,hie=Object.prototype.hasOwnProperty,pie=Object.prototype.propertyIsEnumerable,WD=(e,t,r)=>t in e?cie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mie=(e,t)=>{for(var r in t||(t={}))hie.call(t,r)&&WD(e,r,t[r]);if(GD)for(var r of GD(t))pie.call(t,r)&&WD(e,r,t[r]);return e},vie=(e,t)=>fie(e,die(t)),qk=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{l(r.next(c))}catch(f){i(f)}},o=c=>{try{l(r.throw(c))}catch(f){i(f)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);l((r=r.apply(e,t)).next())});function tO(e,t,r){return qk(this,null,function*(){if(e.length===0)return{rasterData:[0],width:1,heigh:1};const n=yield Promise.all(e.map(({data:c,bands:f=[0]})=>t(c,f))),i=[];n.forEach(c=>{Array.isArray(c)?i.push(...c):i.push(c)});const{width:a,height:o}=i[0];let l;switch(typeof r){case"function":l=r(i);break;case"object":Array.isArray(r)?l={rasterData:gg(r,i)}:l=gie(r,i);break;default:l={rasterData:i[0].rasterData}}return vie(mie({},l),{width:a,height:o})})}function gie(e,t){const r=lie[e.type];if(r.type==="function")return r.method(t,e?.options);if(r.type==="operation")return e.type==="rgb"?_ie(r.expression,t):{rasterData:gg(r.expression,t)}}function _ie(e,t){e.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),e.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),e.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");const r=gg(e.r||["band",0],t),n=gg(e.g||["band",0],t),i=gg(e.b||["band",0],t);return[r,n,i]}function U2(e,t,r,n){return qk(this,null,function*(){const i=yield tO(e,t,r);n(null,{data:i})})}function yie(e,t){const{extent:r=[121.168,30.2828,121.384,30.4219],coordinates:n,width:i,height:a,min:o,max:l,format:c,operation:f}=t;let h,p,v;if(c===void 0||Pk(e))h=Array.from(e),p=i,v=a;else{const E=Array.isArray(e)?e:[e];h=tO(E,c,f)}const g=Jp(n,r);return{_id:1,dataArray:[{_id:1,data:h,width:p,height:v,min:o,max:l,coordinates:g}]}}function Cp(e){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function Eie(e,t){if(Cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gk(e){var t=Eie(e,"string");return Cp(t)=="symbol"?t:t+""}function F(e,t,r){return(t=Gk(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$D(Object(r),!0).forEach(function(n){F(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$D(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}let e0=(function(e){return e.Normal="normal",e.PostProcessing="post-processing",e})({}),L=(function(e){return e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e})({});const bie=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{camelCase:xie,isNil:Sie,upperFirst:Tie}=Un;class _u{constructor(){F(this,"shaderModuleService",void 0),F(this,"rendererService",void 0),F(this,"config",void 0),F(this,"quad",bie),F(this,"enabled",!0),F(this,"renderToScreen",!1),F(this,"model",void 0),F(this,"name",void 0),F(this,"optionsToUpdate",{})}getName(){return this.name}setName(t){this.name=t}getType(){return e0.PostProcessing}init(t,r){this.config=r,this.rendererService=t.getContainer().rendererService,this.shaderModuleService=t.getContainer().shaderModuleService;const{createAttribute:n,createBuffer:i,createModel:a}=this.rendererService,{vs:o,fs:l,uniforms:c}=this.setupShaders();this.model=a({vs:o,fs:l,attributes:{a_Position:n({buffer:i({data:[-4,-4,4,-4,0,4],type:L.FLOAT}),size:2})},uniforms:qe(qe({u_Texture:null},c),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}render(t,r){const n=t.multiPassRenderer.getPostProcessor(),{useFramebuffer:i,getViewportSize:a,clear:o}=this.rendererService,{width:l,height:c}=a();i(this.renderToScreen?null:n.getWriteFBO(),()=>{o({framebuffer:n.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});const f=qe({u_BloomFinal:0,u_Texture:n.getReadFBO(),u_ViewportSize:[l,c]},this.convertOptionsToUniforms(this.optionsToUpdate));r&&(f.u_BloomFinal=1,f.u_Texture2=r),this.model.draw({uniforms:f})})}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}setRenderToScreen(t){this.renderToScreen=t}updateOptions(t){this.optionsToUpdate=qe(qe({},this.optionsToUpdate),t)}setupShaders(){throw new Error("Method not implemented.")}convertOptionsToUniforms(t){const r={};return Object.keys(t).forEach(n=>{Sie(t[n])||(r[`u_${Tie(xie(n))}`]=t[n])}),r}}function Aie(e){let t=0;switch(e){case"vec2":case"ivec2":t=2;break;case"vec3":case"ivec3":t=3;break;case"vec4":case"ivec4":case"mat2":t=4;break;case"mat3":t=9;break;case"mat4":t=16;break}return t}const Wk=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function YD(e,t=!1){const r={};return e=e.replace(Wk,(n,i,a)=>{const o=a.split(":"),l=o[0].trim();let c="";switch(o.length>1&&(c=o[1].trim()),i){case"bool":c=c==="true";break;case"float":case"int":c=Number(c);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":c?c=c.replace("[","").replace("]","").split(",").reduce((f,h)=>(f.push(Number(h.trim())),f),[]):c=new Array(Aie(i)).fill(0);break}return r[l]=c,`${t?"uniform ":""}${i} ${l};
`}),{content:e,uniforms:r}}function hR(e){let{content:t,uniforms:r}=YD(e,!0);return t=t.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,(n,i,a)=>{a=a.trim().replace(/^.*$/gm,c=>`uniform ${c}`);const{content:o,uniforms:l}=YD(a);return Object.assign(r,l),`${i}{
${o}
};`}),{content:t,uniforms:r}}function ZD(e){const t={};return e.replace(Wk,(r,n,i)=>{const a=i.trim();return t[a]?"":(t[a]=!0,`uniform ${n} ${a};
`)})}const{clamp:XEe}=Un,Xf={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"};let o1=(function(e){return e.TOPRIGHT="topright",e.TOPLEFT="topleft",e.BOTTOMRIGHT="bottomright",e.BOTTOMLEFT="bottomleft",e.TOPCENTER="topcenter",e.BOTTOMCENTER="bottomcenter",e.LEFTCENTER="leftcenter",e.RIGHTCENTER="rightcenter",e.LEFTTOP="lefttop",e.RIGHTTOP="righttop",e.LEFTBOTTOM="leftbottom",e.RIGHTBOTTOM="rightbottom",e})({}),s1=(function(e){return e[e.LNGLAT=1]="LNGLAT",e[e.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",e[e.VECTOR_TILE=3]="VECTOR_TILE",e[e.IDENTITY=4]="IDENTITY",e[e.METER_OFFSET=5]="METER_OFFSET",e})({});const Vh={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter"};var Mi={LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"};let za=(function(e){return e.Hover="hover",e.Click="click",e.Select="select",e.Active="active",e.Drag="drag",e})({}),Sc=(function(e){return e.normal="normal",e.additive="additive",e.subtractive="subtractive",e.min="min",e.max="max",e.none="none",e})({}),Zf=(function(e){return e.MULTIPLE="MULTIPLE",e.SINGLE="SINGLE",e})({}),SE=(function(e){return e.AND="and",e.OR="or",e})({}),Qi=(function(e){return e.INIT="init",e.UPDATE="update",e})({}),un=(function(e){return e.LINEAR="linear",e.SEQUENTIAL="sequential",e.POWER="power",e.LOG="log",e.IDENTITY="identity",e.TIME="time",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.CAT="cat",e.DIVERGING="diverging",e.CUSTOM="threshold",e})({}),Hh=(function(e){return e.CONSTANT="constant",e.VARIABLE="variable",e})({}),Vt=(function(e){return e[e.Attribute=0]="Attribute",e[e.InstancedAttribute=1]="InstancedAttribute",e[e.Uniform=2]="Uniform",e})({});const KD=["mapload","mapchange","mapAfterFrameChange"];var K_={exports:{}},QD;function Rie(){if(QD)return K_.exports;QD=1,K_.exports=t,K_.exports.default=t;var e=1e20;function t(o,l,c,f,h,p){this.fontSize=o||24,this.buffer=l===void 0?3:l,this.cutoff=f||.25,this.fontFamily=h||"sans-serif",this.fontWeight=p||"normal",this.radius=c||8;var v=this.size=this.fontSize+this.buffer*2,g=v+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=v,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(g*g),this.gridInner=new Float64Array(g*g),this.f=new Float64Array(g),this.z=new Float64Array(g+1),this.v=new Uint16Array(g),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(v/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function r(o,l,c,f,h,p,v){p.fill(e,0,l*c),v.fill(0,0,l*c);for(var g=(l-f)/2,_=0;_<h;_++)for(var E=0;E<f;E++){var b=(_+g)*l+E+g,S=o.data[4*(_*f+E)+3]/255;if(S===1)p[b]=0,v[b]=e;else if(S===0)p[b]=e,v[b]=0;else{var T=Math.max(0,.5-S),C=Math.max(0,S-.5);p[b]=T*T,v[b]=C*C}}}function n(o,l,c,f,h,p,v){for(var g=0;g<l*c;g++){var _=Math.sqrt(f[g])-Math.sqrt(h[g]);o[g]=Math.round(255-255*(_/p+v))}}t.prototype._draw=function(o,l){var c=this.ctx.measureText(o),f=c.width,h=2*this.buffer,p,v,g,_,E,b,S,T;l&&this.useMetrics?(E=Math.floor(c.actualBoundingBoxAscent),T=this.buffer+Math.ceil(c.actualBoundingBoxAscent),b=this.buffer,S=this.buffer,v=Math.min(this.size,Math.ceil(c.actualBoundingBoxRight-c.actualBoundingBoxLeft)),_=Math.min(this.size-b,Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent)),p=v+h,g=_+h,this.ctx.textBaseline="alphabetic"):(p=v=this.size,g=_=this.size,E=19*this.fontSize/24,b=S=0,T=this.middle,this.ctx.textBaseline="middle");var C;v&&_&&(this.ctx.clearRect(S,b,v,_),this.ctx.fillText(o,this.buffer,T),C=this.ctx.getImageData(S,b,v,_));var M=new Uint8ClampedArray(p*g);return r(C,p,g,v,_,this.gridOuter,this.gridInner),i(this.gridOuter,p,g,this.f,this.v,this.z),i(this.gridInner,p,g,this.f,this.v,this.z),n(M,p,g,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:M,metrics:{width:v,height:_,sdfWidth:p,sdfHeight:g,top:E,left:0,advance:f}}},t.prototype.draw=function(o){return this._draw(o,!1).data},t.prototype.drawWithMetrics=function(o){return this._draw(o,!0)};function i(o,l,c,f,h,p){for(var v=0;v<l;v++)a(o,v,l,c,f,h,p);for(var g=0;g<c;g++)a(o,g*l,1,l,f,h,p)}function a(o,l,c,f,h,p,v){var g,_,E,b;for(p[0]=0,v[0]=-e,v[1]=e,g=0;g<f;g++)h[g]=o[l+g*c];for(g=1,_=0,E=0;g<f;g++){do b=p[_],E=(h[g]-h[b]+g*g-b*b)/(g-b)/2;while(E<=v[_]&&--_>-1);_++,p[_]=g,v[_]=E,v[_+1]=e}for(g=0,_=0;g<f;g++){for(;v[_+1]<g;)_++;b=p[_],o[l+g*c]=h[b]+(g-b)*(g-b)}}return K_.exports}var Cie=Rie();const Oie=Kr(Cie),Tv=30;function wie({characterSet:e,getFontWidth:t,fontHeight:r,buffer:n,maxCanvasWidth:i,mapping:a={},xOffset:o=0,yOffset:l=0}){let c=0,f=o;Array.from(e).forEach((p,v)=>{if(!a[p]){const g=t(p,v);f+Tv>i&&(f=0,c++),a[p]={x:f,y:l+c*Tv,width:Tv,height:Tv,advance:g},f+=Tv}});const h=r+n*2;return{mapping:a,xOffset:f,yOffset:l+c*h,canvasHeight:$k(l+(c+1)*h)}}function Nie(e,t,r){let n=0,i=0,a=0,o=[];const l={};for(const f of e)if(!l[f.id]){const{size:h}=f;n+h+t>r&&(JD(l,o,i),n=0,i=a+i+t,a=0,o=[]),o.push({icon:f,xOffset:n}),n=n+h+t,a=Math.max(a,h)}o.length>0&&JD(l,o,i);const c=$k(a+i+t);return{mapping:l,canvasHeight:c}}function JD(e,t,r){for(const n of t){const{icon:i,xOffset:a}=n;e[i.id]=qe(qe({},i),{},{x:a,y:r,image:i.image,width:i.width,height:i.height})}}function $k(e){return Math.pow(2,Math.ceil(Math.log2(e)))}const Mie=jie(),Iie="sans-serif",Pie="normal",Die=24,Lie=3,Bie=.25,Fie=8,eL=1024,Uie=1,tL=1,kie=3;function jie(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}function rL(e,t,r,n){e.font=`${n} ${r}px ${t}`,e.fillStyle="black",e.textBaseline="middle"}function nL(e,t){for(let r=0;r<e.length;r++)t.data[4*r+3]=e[r]}class zie extends Za.EventEmitter{constructor(...t){super(...t),F(this,"fontAtlas",void 0),F(this,"iconFontMap",void 0),F(this,"iconFontGlyphs",{}),F(this,"fontOptions",void 0),F(this,"key",void 0),F(this,"cache",new tre(kie))}get scale(){return tL}get canvas(){const t=this.cache.get(this.key);return t&&t.data}get mapping(){const t=this.cache.get(this.key);return t&&t.mapping||{}}getCanvasByKey(t){const r=this.cache.get(t);return r&&r.data}getMappingByKey(t){const r=this.cache.get(t);return r&&r.mapping||{}}init(){this.cache.clear(),this.fontOptions={fontFamily:Iie,fontWeight:Pie,characterSet:Mie,fontSize:Die,buffer:Lie,sdf:!0,cutoff:Bie,radius:Fie,iconfont:!1},this.key="",this.iconFontMap=new Map}addIconGlyphs(t){t.forEach(r=>{this.iconFontGlyphs[r.name]=r.unicode})}addIconFont(t,r){this.iconFontMap.set(t,r)}getIconFontKey(t){return this.iconFontMap.get(t)||t}getGlyph(t){return this.iconFontGlyphs[t]?String.fromCharCode(parseInt(this.iconFontGlyphs[t],16)):""}setFontOptions(t){this.fontOptions=qe(qe({},this.fontOptions),t),this.key=this.getKey();const r=this.getNewChars(this.key,this.fontOptions.characterSet),n=this.cache.get(this.key);if(n&&r.length===0)return;const i=this.generateFontAtlas(this.key,r,n);this.fontAtlas=i,this.cache.set(this.key,i)}addFontFace(t,r){const n=document.createElement("style");n.type="text/css",n.innerText=`
        @font-face{
            font-family: '${t}';
            src: url('${r}') format('woff2'),
            url('${r}') format('woff'),
            url('${r}') format('truetype');
        }`,n.onload=()=>{if(document.fonts)try{document.fonts.load(`24px ${t}`,"L7text"),document.fonts.ready.then(()=>{this.emit("fontloaded",{fontFamily:t})})}catch(i){console.warn("当前环境不支持 document.fonts !"),console.warn("当前环境不支持 iconfont !"),console.warn(i)}},document.getElementsByTagName("head")[0].appendChild(n)}destroy(){this.cache.clear(),this.iconFontMap.clear()}generateFontAtlas(t,r,n){const{fontFamily:i,fontWeight:a,fontSize:o,buffer:l,sdf:c,radius:f,cutoff:h,iconfont:p}=this.fontOptions;let v=n&&n.data;v||(v=window.document.createElement("canvas"),v.width=eL);const g=v.getContext("2d",{willReadFrequently:!0});rL(g,i,o,a);const{mapping:_,canvasHeight:E,xOffset:b,yOffset:S}=wie(qe({getFontWidth:C=>g.measureText(C).width,fontHeight:o*tL,buffer:l,characterSet:r,maxCanvasWidth:eL},n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset})),T=g.getImageData(0,0,v.width,v.height);if(v.height=E,g.putImageData(T,0,0),rL(g,i,o,a),c){const C=new Oie(o,l,f,h,i,a),M=g.getImageData(0,0,C.size,C.size);for(const D of r){if(p){const I=String.fromCharCode(parseInt(D.replace("&#x","").replace(";",""),16)),N=C.draw(I);nL(N,M)}else nL(C.draw(D),M);g.putImageData(M,_[D].x,_[D].y)}}else for(const C of r)g.fillText(C,_[C].x,_[C].y+o*Uie);return{xOffset:b,yOffset:S,mapping:_,data:v,width:v.width,height:v.height}}getKey(){const{fontFamily:t,fontWeight:r}=this.fontOptions;return`${t}_${r}`}getNewChars(t,r){const n=this.cache.get(t);if(!n)return r;const i=[],a=n.mapping,o=new Set(Object.keys(a));return new Set(r).forEach(c=>{o.has(c)||i.push(c)}),i}}function iL(e,t,r,n,i,a,o){try{var l=e[a](o),c=l.value}catch(f){return void r(f)}l.done?t(c):Promise.resolve(c).then(n,i)}function et(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(c){iL(a,n,i,o,l,"next",c)}function l(c){iL(a,n,i,o,l,"throw",c)}o(void 0)})}}const Vie=3,aL=1024,Av=64;class Hie extends Za.EventEmitter{constructor(...t){super(...t),F(this,"canvasHeight",128),F(this,"texture",void 0),F(this,"canvas",void 0),F(this,"iconData",void 0),F(this,"iconMap",void 0),F(this,"ctx",void 0),F(this,"loadingImageCount",0)}isLoading(){return this.loadingImageCount===0}init(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}addImage(t,r){var n=this;return et(function*(){let i=new Image;n.loadingImageCount++,n.hasImage(t)?console.warn("Image Id already exists"):n.iconData.push({id:t,size:Av}),n.updateIconMap(),i=yield n.loadImage(r);const a=n.iconData.find(o=>o.id===t);a&&(a.image=i,a.width=i.width,a.height=i.height),n.update()})()}addImageMini(t,r,n){const i=n.getSceneConfig().canvas;let a=i.createImage();if(this.loadingImageCount++,this.hasImage(t))throw new Error("Image Id already exists");this.iconData.push({id:t,size:Av}),this.updateIconMap(),this.loadImageMini(r,i).then(o=>{a=o;const l=this.iconData.find(c=>c.id===t);l&&(l.image=a,l.width=a.width,l.height=a.height),this.update()})}getTexture(){return this.texture}getIconMap(){return this.iconMap}getCanvas(){return this.canvas}hasImage(t){return this.iconMap.hasOwnProperty(t)}removeImage(t){this.hasImage(t)&&(this.iconData=this.iconData.filter(r=>r.id!==t),delete this.iconMap[t],this.update())}destroy(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}loadImage(t){return new Promise((r,n)=>{if(t instanceof HTMLImageElement){r(t);return}const i=new Image;i.crossOrigin="anonymous",i.onload=()=>{r(i)},i.onerror=()=>{n(new Error("Could not load image at "+t))},i.src=t instanceof File?URL.createObjectURL(t):t})}update(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}updateIconAtlas(){this.canvas.width=aL,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(t=>{const{x:r,y:n,image:i,width:a=64,height:o=64}=this.iconMap[t],c=Math.max(a,o)/Av,f=o/c,h=a/c;i&&this.ctx.drawImage(i,r+(Av-h)/2,n+(Av-f)/2,h,f)})}updateIconMap(){const{mapping:t,canvasHeight:r}=Nie(this.iconData,Vie,aL);this.iconMap=t,this.canvasHeight=r}loadImageMini(t,r){return new Promise((n,i)=>{const a=r.createImage();a.crossOrigin="anonymous",a.onload=()=>{n(a)},a.onerror=()=>{i(new Error("Could not load image at "+t))},a.src=t})}}var sa=1e-6,zo=typeof Float32Array<"u"?Float32Array:Array;function rO(){var e=new zo(16);return zo!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Xie(e,t,r,n,i,a,o,l,c,f,h,p,v,g,_,E){var b=new zo(16);return b[0]=e,b[1]=t,b[2]=r,b[3]=n,b[4]=i,b[5]=a,b[6]=o,b[7]=l,b[8]=c,b[9]=f,b[10]=h,b[11]=p,b[12]=v,b[13]=g,b[14]=_,b[15]=E,b}function Yk(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],l=t[5],c=t[6],f=t[7],h=t[8],p=t[9],v=t[10],g=t[11],_=t[12],E=t[13],b=t[14],S=t[15],T=r*l-n*o,C=r*c-i*o,M=r*f-a*o,D=n*c-i*l,I=n*f-a*l,N=i*f-a*c,j=h*E-p*_,re=h*b-v*_,Q=h*S-g*_,X=p*b-v*E,R=p*S-g*E,P=v*S-g*b,V=T*P-C*R+M*X+D*Q-I*re+N*j;return V?(V=1/V,e[0]=(l*P-c*R+f*X)*V,e[1]=(i*R-n*P-a*X)*V,e[2]=(E*N-b*I+S*D)*V,e[3]=(v*I-p*N-g*D)*V,e[4]=(c*Q-o*P-f*re)*V,e[5]=(r*P-i*Q+a*re)*V,e[6]=(b*M-_*N-S*C)*V,e[7]=(h*N-v*M+g*C)*V,e[8]=(o*R-l*Q+f*j)*V,e[9]=(n*Q-r*R-a*j)*V,e[10]=(_*I-E*M+S*T)*V,e[11]=(p*M-h*I-g*T)*V,e[12]=(l*re-o*X-c*j)*V,e[13]=(r*X-n*re+i*j)*V,e[14]=(E*C-_*D-b*T)*V,e[15]=(h*D-p*C+v*T)*V,e):null}function vp(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],l=t[4],c=t[5],f=t[6],h=t[7],p=t[8],v=t[9],g=t[10],_=t[11],E=t[12],b=t[13],S=t[14],T=t[15],C=r[0],M=r[1],D=r[2],I=r[3];return e[0]=C*n+M*l+D*p+I*E,e[1]=C*i+M*c+D*v+I*b,e[2]=C*a+M*f+D*g+I*S,e[3]=C*o+M*h+D*_+I*T,C=r[4],M=r[5],D=r[6],I=r[7],e[4]=C*n+M*l+D*p+I*E,e[5]=C*i+M*c+D*v+I*b,e[6]=C*a+M*f+D*g+I*S,e[7]=C*o+M*h+D*_+I*T,C=r[8],M=r[9],D=r[10],I=r[11],e[8]=C*n+M*l+D*p+I*E,e[9]=C*i+M*c+D*v+I*b,e[10]=C*a+M*f+D*g+I*S,e[11]=C*o+M*h+D*_+I*T,C=r[12],M=r[13],D=r[14],I=r[15],e[12]=C*n+M*l+D*p+I*E,e[13]=C*i+M*c+D*v+I*b,e[14]=C*a+M*f+D*g+I*S,e[15]=C*o+M*h+D*_+I*T,e}function l1(e,t,r){var n=r[0],i=r[1],a=r[2],o,l,c,f,h,p,v,g,_,E,b,S;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*a+t[12],e[13]=t[1]*n+t[5]*i+t[9]*a+t[13],e[14]=t[2]*n+t[6]*i+t[10]*a+t[14],e[15]=t[3]*n+t[7]*i+t[11]*a+t[15]):(o=t[0],l=t[1],c=t[2],f=t[3],h=t[4],p=t[5],v=t[6],g=t[7],_=t[8],E=t[9],b=t[10],S=t[11],e[0]=o,e[1]=l,e[2]=c,e[3]=f,e[4]=h,e[5]=p,e[6]=v,e[7]=g,e[8]=_,e[9]=E,e[10]=b,e[11]=S,e[12]=o*n+h*i+_*a+t[12],e[13]=l*n+p*i+E*a+t[13],e[14]=c*n+v*i+b*a+t[14],e[15]=f*n+g*i+S*a+t[15]),e}function u1(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function nO(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],o=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],v=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+f*n,e[5]=o*i+h*n,e[6]=l*i+p*n,e[7]=c*i+v*n,e[8]=f*i-a*n,e[9]=h*i-o*n,e[10]=p*i-l*n,e[11]=v*i-c*n,e}function Zk(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],l=t[2],c=t[3],f=t[8],h=t[9],p=t[10],v=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-f*n,e[1]=o*i-h*n,e[2]=l*i-p*n,e[3]=c*i-v*n,e[8]=a*n+f*i,e[9]=o*n+h*i,e[10]=l*n+p*i,e[11]=c*n+v*i,e}function Kk(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],l=t[2],c=t[3],f=t[4],h=t[5],p=t[6],v=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+f*n,e[1]=o*i+h*n,e[2]=l*i+p*n,e[3]=c*i+v*n,e[4]=f*i-a*n,e[5]=h*i-o*n,e[6]=p*i-l*n,e[7]=v*i-c*n,e}function qie(e,t,r,n,i){var a=1/Math.tan(t/2);if(e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0){var o=1/(n-i);e[10]=(i+n)*o,e[14]=2*i*n*o}else e[10]=-1,e[14]=-2*n;return e}var Gie=qie;function oL(e,t){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],l=e[5],c=e[6],f=e[7],h=e[8],p=e[9],v=e[10],g=e[11],_=e[12],E=e[13],b=e[14],S=e[15],T=t[0],C=t[1],M=t[2],D=t[3],I=t[4],N=t[5],j=t[6],re=t[7],Q=t[8],X=t[9],R=t[10],P=t[11],V=t[12],le=t[13],w=t[14],z=t[15];return Math.abs(r-T)<=sa*Math.max(1,Math.abs(r),Math.abs(T))&&Math.abs(n-C)<=sa*Math.max(1,Math.abs(n),Math.abs(C))&&Math.abs(i-M)<=sa*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(a-D)<=sa*Math.max(1,Math.abs(a),Math.abs(D))&&Math.abs(o-I)<=sa*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(l-N)<=sa*Math.max(1,Math.abs(l),Math.abs(N))&&Math.abs(c-j)<=sa*Math.max(1,Math.abs(c),Math.abs(j))&&Math.abs(f-re)<=sa*Math.max(1,Math.abs(f),Math.abs(re))&&Math.abs(h-Q)<=sa*Math.max(1,Math.abs(h),Math.abs(Q))&&Math.abs(p-X)<=sa*Math.max(1,Math.abs(p),Math.abs(X))&&Math.abs(v-R)<=sa*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(g-P)<=sa*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(_-V)<=sa*Math.max(1,Math.abs(_),Math.abs(V))&&Math.abs(E-le)<=sa*Math.max(1,Math.abs(E),Math.abs(le))&&Math.abs(b-w)<=sa*Math.max(1,Math.abs(b),Math.abs(w))&&Math.abs(S-z)<=sa*Math.max(1,Math.abs(S),Math.abs(z))}function tg(){var e=new zo(3);return zo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function vs(e,t,r){var n=new zo(3);return n[0]=e,n[1]=t,n[2]=r,n}function Wie(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function $ie(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function rg(e,t){var r=t[0],n=t[1],i=t[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function Yie(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Zie(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],l=r[1],c=r[2];return e[0]=i*c-a*l,e[1]=a*o-n*c,e[2]=n*l-i*o,e}function Q_(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return o=o||1,e[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/o,e[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,e[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,e}function sL(e,t){var r=e[0],n=e[1],i=e[2],a=t[0],o=t[1],l=t[2],c=Math.sqrt((r*r+n*n+i*i)*(a*a+o*o+l*l)),f=c&&Yie(e,t)/c;return Math.acos(Math.min(Math.max(f,-1),1))}var lL=Wie;(function(){var e=tg();return function(t,r,n,i,a,o){var l,c;for(r||(r=3),n||(n=0),i?c=Math.min(i*r+n,t.length):c=t.length,l=n;l<c;l+=r)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],a(e,e,o),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2];return t}})();function Qk(){var e=new zo(4);return zo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Kie(e,t,r,n){var i=new zo(4);return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}function Qie(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function iO(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,e}(function(){var e=Qk();return function(t,r,n,i,a,o){var l,c;for(r||(r=4),n||(n=0),i?c=Math.min(i*r+n,t.length):c=t.length,l=n;l<c;l+=r)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],e[3]=t[l+3],a(e,e,o),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2],t[l+3]=e[3];return t}})();function Ha(){var e=new zo(2);return zo!=Float32Array&&(e[0]=0,e[1]=0),e}function k2(e,t){var r=new zo(2);return r[0]=e,r[1]=t,r}function pR(e,t){return e[0]=t[0],e[1]=t[1],e}function Jie(e,t,r){return e[0]=t,e[1]=r,e}function Rc(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function j2(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function eae(e,t){return e[0]=-t[0],e[1]=-t[1],e}function c1(e,t){var r=t[0],n=t[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function z2(e,t){return e[0]*t[0]+e[1]*t[1]}function tae(e,t,r,n){var i=t[0],a=t[1];return e[0]=i+n*(r[0]-i),e[1]=a+n*(r[1]-a),e}var Jk=j2;(function(){var e=Ha();return function(t,r,n,i,a,o){var l,c;for(r||(r=2),n||(n=0),i?c=Math.min(i*r+n,t.length):c=t.length,l=n;l<c;l+=r)e[0]=t[l],e[1]=t[l+1],a(e,e,o),t[l]=e[0],t[l+1]=e[1];return t}})();class rae{constructor(){F(this,"viewport",void 0),F(this,"overridedViewProjectionMatrix",void 0),F(this,"viewMatrixInverse",void 0),F(this,"cameraPosition",void 0)}init(){}update(t){this.viewport=t,this.viewMatrixInverse=rO(),Yk(this.viewMatrixInverse,t.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}getProjectionMatrix(){return this.viewport.getProjectionMatrix()}getModelMatrix(){return this.viewport.getModelMatrix()}getViewMatrix(){return this.viewport.getViewMatrix()}getViewMatrixUncentered(){return this.viewport.getViewMatrixUncentered()}getViewProjectionMatrixUncentered(){return this.viewport.getViewProjectionMatrixUncentered()}getViewProjectionMatrix(){return this.overridedViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}getZoom(){return this.viewport.getZoom()}getZoomScale(){return this.viewport.getZoomScale()}getCenter(){const[t,r]=this.viewport.getCenter();return[t,r]}getFocalDistance(){return this.viewport.getFocalDistance()}getCameraPosition(){return this.cameraPosition}projectFlat(t,r){return this.viewport.projectFlat(t,r)}setViewProjectionMatrix(t){this.overridedViewProjectionMatrix=t}}const nae={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"};class iae{constructor(){F(this,"container",void 0),F(this,"controlCorners",void 0),F(this,"controlContainer",void 0),F(this,"scene",void 0),F(this,"mapsService",void 0),F(this,"controls",[]),F(this,"unAddControls",[])}init(t,r){this.container=t.container,this.scene=r,this.mapsService=r.mapService,this.initControlPos()}addControl(t,r){r.mapService.map?(t.addTo(this.scene),this.controls.push(t)):this.unAddControls.push(t)}getControlByName(t){return this.controls.find(r=>r.controlOption.name===t)}removeControl(t){const r=this.controls.indexOf(t);return r>-1&&this.controls.splice(r,1),t.remove(),this}addControls(){this.unAddControls.forEach(t=>{t.addTo(this.scene),this.controls.push(t)}),this.unAddControls=[]}destroy(){for(const t of this.controls)t.remove();this.controls=[],this.clearControlPos()}initControlPos(){const t=this.controlCorners={},r="l7-",n=this.controlContainer=ui("div",r+"control-container",this.container);function i(o=[]){const l=o.map(c=>r+c).join(" ");t[o.filter(c=>!["row","column"].includes(c)).join("")]=ui("div",l,n)}function a(o){return[...o.replace(/^(top|bottom|left|right|center)/,"$1-").split("-"),nae[o]]}Object.values(o1).forEach(o=>{i(a(o))}),this.checkCornerOverlap()}clearControlPos(){for(const t in this.controlCorners)this.controlCorners[t]&&nu(this.controlCorners[t]);this.controlContainer&&nu(this.controlContainer)}checkCornerOverlap(){const t=window.MutationObserver;if(t)for(const r of Object.keys(this.controlCorners)){const n=r.match(/^(top|bottom)(left|right)$/);if(n){const[,i,a]=n,o=this.controlCorners[`${i}${a}`];new t(([{target:c}])=>{o&&(o.style[i]=c.clientHeight+"px")}).observe(this.controlCorners[`${a}${i}`],{childList:!0,attributes:!0})}}}}class aae{constructor(){F(this,"container",void 0),F(this,"scene",void 0),F(this,"mapsService",void 0),F(this,"markers",[]),F(this,"markerLayers",[]),F(this,"unAddMarkers",[]),F(this,"unAddMarkerLayers",[])}addMarkerLayer(t){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(t),t.addTo(this.scene)):this.unAddMarkerLayers.push(t)}removeMarkerLayer(t){t.destroy(),this.markerLayers.indexOf(t);const r=this.markerLayers.indexOf(t);r>-1&&this.markerLayers.splice(r,1)}addMarker(t){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(t),t.addTo(this.scene)):this.unAddMarkers.push(t)}addMarkers(){this.unAddMarkers.forEach(t=>{t.addTo(this.scene),this.markers.push(t)}),this.unAddMarkers=[]}addMarkerLayers(){this.unAddMarkerLayers.forEach(t=>{this.markerLayers.push(t),t.addTo(this.scene)}),this.unAddMarkers=[]}removeMarker(t){t.remove(),this.markers.indexOf(t);const r=this.markers.indexOf(t);r>-1&&this.markers.splice(r,1)}removeAllMarkers(){this.destroy()}init(t){this.scene=t,this.mapsService=t.mapService}destroy(){this.markers.forEach(t=>{t.remove()}),this.markers=[],this.markerLayers.forEach(t=>{t.destroy()}),this.markerLayers=[]}removeMakerLayerMarker(t){t.destroy()}}class oae{constructor(){F(this,"scene",void 0),F(this,"mapsService",void 0),F(this,"popups",[]),F(this,"unAddPopups",[])}get isMarkerReady(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}removePopup(t){t!=null&&t.isOpen()&&t.remove();const r=this.popups.indexOf(t);r>-1&&this.popups.splice(r,1);const n=this.unAddPopups.indexOf(t);n>-1&&this.unAddPopups.splice(n,1)}destroy(){this.popups.forEach(t=>t.remove())}addPopup(t){t&&t.getOptions().autoClose&&[...this.popups,...this.unAddPopups].forEach(r=>{r.getOptions().autoClose&&this.removePopup(r)}),this.isMarkerReady?(t.addTo(this.scene),this.popups.push(t)):this.unAddPopups.push(t),t.on("close",()=>{this.removePopup(t)})}initPopup(){this.unAddPopups.length&&this.unAddPopups.forEach(t=>{this.addPopup(t),this.unAddPopups=[]})}init(t){this.scene=t,this.mapsService=t.mapService}}const sae={MapToken:"您正在使用 Demo 测试 Token, 生产环境务必自行注册 Token 确保服务稳定 高德地图申请地址 https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox地图申请地址 https://docs.mapbox.com/help/glossary/access-token/",SDK:"请确认引入了mapbox-gl api且在L7之前引入"},{merge:lae}=Un,uae={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},cae={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:SE.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0};class fae{constructor(){F(this,"sceneConfigCache",{}),F(this,"layerConfigCache",{}),F(this,"layerAttributeConfigCache",{})}getSceneConfig(t){return this.sceneConfigCache[t]}getSceneWarninfo(t){return sae[t]}setSceneConfig(t,r){this.sceneConfigCache[t]=qe(qe({},uae),r)}getLayerConfig(t){return this.layerConfigCache[t]}setLayerConfig(t,r,n){this.layerConfigCache[r]=qe({},lae({},this.sceneConfigCache[t],cae,n))}getAttributeConfig(t){return this.layerAttributeConfigCache[t]}setAttributeConfig(t,r){this.layerAttributeConfigCache[t]=qe(qe({},this.layerAttributeConfigCache[t]),r)}clean(){this.sceneConfigCache={},this.layerConfigCache={}}}const mR=Math.PI/180,dae=512,uL=4003e4;function cL({latitude:e=0,zoom:t=0,scale:r,highPrecision:n=!1,flipY:i=!1}){r=r!==void 0?r:Math.pow(2,t);const a={},o=dae*r,l=Math.cos(e*mR),c=o/360,f=c/l,h=o/uL/l;if(a.pixelsPerMeter=[h,-h,h],a.metersPerPixel=[1/h,-1/h,1/h],a.pixelsPerDegree=[c,-f,h],a.degreesPerPixel=[1/c,-1/f,1/h],n){const p=mR*Math.tan(e*mR)/l,v=c*p/2,g=o/uL*p,_=g/f*h;a.pixelsPerDegree2=[0,-v,g],a.pixelsPerMeter2=[_,0,_],i&&(a.pixelsPerDegree2[1]=-a.pixelsPerDegree2[1],a.pixelsPerMeter2[1]=-a.pixelsPerMeter2[1])}return i&&(a.pixelsPerMeter[1]=-a.pixelsPerMeter[1],a.metersPerPixel[1]=-a.metersPerPixel[1],a.pixelsPerDegree[1]=-a.pixelsPerDegree[1],a.degreesPerPixel[1]=-a.degreesPerPixel[1]),a}const hae=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];class pae{constructor(t){F(this,"needRefresh",!0),F(this,"coordinateSystem",void 0),F(this,"viewportCenter",void 0),F(this,"viewportCenterProjection",void 0),F(this,"pixelsPerDegree",void 0),F(this,"pixelsPerDegree2",void 0),F(this,"pixelsPerMeter",void 0),this.cameraService=t}refresh(t){const r=this.cameraService.getZoom(),n=t||this.cameraService.getCenter(),{pixelsPerMeter:i,pixelsPerDegree:a}=cL({latitude:n[1],zoom:r});this.viewportCenter=n,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=i,this.pixelsPerDegree=a,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===s1.LNGLAT?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===s1.LNGLAT_OFFSET&&this.calculateLnglatOffset(n,r),this.needRefresh=!1}getCoordinateSystem(){return this.coordinateSystem}setCoordinateSystem(t){this.coordinateSystem=t}getViewportCenter(){return this.viewportCenter}setViewportCenter(t){this.refresh(t)}getViewportCenterProjection(){return this.viewportCenterProjection}getPixelsPerDegree(){return this.pixelsPerDegree}getPixelsPerDegree2(){return this.pixelsPerDegree2}getPixelsPerMeter(){return this.pixelsPerMeter}calculateLnglatOffset(t,r,n,i){const{pixelsPerMeter:a,pixelsPerDegree:o,pixelsPerDegree2:l}=cL({latitude:t[1],zoom:r,scale:n,flipY:i,highPrecision:!0});let c=this.cameraService.getViewMatrix();const f=this.cameraService.getProjectionMatrix();let h=vp([],f,c);const p=this.cameraService.projectFlat([Math.fround(t[0]),Math.fround(t[1])],Math.pow(2,r));this.viewportCenterProjection=iO([],[p[0],p[1],0,1],h),c=this.cameraService.getViewMatrixUncentered()||c,h=vp([],f,c),h=vp([],h,hae),this.cameraService.setViewProjectionMatrix(h),this.pixelsPerMeter=a,this.pixelsPerDegree=o,this.pixelsPerDegree2=l}}class mae extends Za.EventEmitter{constructor(...t){super(...t),F(this,"renderMap",new Map),F(this,"enable",!1),F(this,"renderEnable",!1),F(this,"cacheLogs",{})}setEnable(t){this.enable=!!t}log(t,r){if(!this.enable)return;const n=t.split(".");let i=null;n.forEach((a,o)=>{i!==null?(i[a]||(i[a]={}),o!==n.length-1&&(i=i[a])):(this.cacheLogs[a]||(this.cacheLogs[a]={}),o!==n.length-1&&(i=this.cacheLogs[a])),o===n.length-1&&(i[a]=qe(qe({time:Date.now()},i[a]),r))})}getLog(t){switch(typeof t){case"string":return this.cacheLogs[t];case"object":return t.map(r=>this.cacheLogs[r]).filter(r=>r!==void 0);case"undefined":return this.cacheLogs}}removeLog(t){delete this.cacheLogs[t]}generateRenderUid(){return this.renderEnable?ere():""}renderDebug(t){this.renderEnable=t}renderStart(t){if(!this.renderEnable||!this.enable)return;const r=this.renderMap.get(t)||{};this.renderMap.set(t,qe(qe({},r),{},{renderUid:t,renderStart:Date.now()}))}renderEnd(t){if(!this.renderEnable||!this.enable)return;const r=this.renderMap.get(t);if(r){const n=r.renderStart,i=Date.now();this.emit("renderEnd",qe(qe({},r),{},{renderEnd:i,renderDuration:i-n})),this.renderMap.delete(t)}}destroy(){this.cacheLogs=null,this.renderMap.clear()}}var vR={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var fL;function vae(){return fL||(fL=1,(function(e){(function(t,r,n,i){var a=["","webkit","Moz","MS","ms","o"],o=r.createElement("div"),l="function",c=Math.round,f=Math.abs,h=Date.now;function p(G,K,pe){return setTimeout(C(G,pe),K)}function v(G,K,pe){return Array.isArray(G)?(g(G,pe[K],pe),!0):!1}function g(G,K,pe){var Ve;if(G)if(G.forEach)G.forEach(K,pe);else if(G.length!==i)for(Ve=0;Ve<G.length;)K.call(pe,G[Ve],Ve,G),Ve++;else for(Ve in G)G.hasOwnProperty(Ve)&&K.call(pe,G[Ve],Ve,G)}function _(G,K,pe){var Ve="DEPRECATED METHOD: "+K+`
`+pe+` AT 
`;return function(){var Et=new Error("get-stack-trace"),kt=Et&&Et.stack?Et.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Ir=t.console&&(t.console.warn||t.console.log);return Ir&&Ir.call(t.console,Ve,kt),G.apply(this,arguments)}}var E;typeof Object.assign!="function"?E=function(K){if(K===i||K===null)throw new TypeError("Cannot convert undefined or null to object");for(var pe=Object(K),Ve=1;Ve<arguments.length;Ve++){var Et=arguments[Ve];if(Et!==i&&Et!==null)for(var kt in Et)Et.hasOwnProperty(kt)&&(pe[kt]=Et[kt])}return pe}:E=Object.assign;var b=_(function(K,pe,Ve){for(var Et=Object.keys(pe),kt=0;kt<Et.length;)(!Ve||Ve&&K[Et[kt]]===i)&&(K[Et[kt]]=pe[Et[kt]]),kt++;return K},"extend","Use `assign`."),S=_(function(K,pe){return b(K,pe,!0)},"merge","Use `assign`.");function T(G,K,pe){var Ve=K.prototype,Et;Et=G.prototype=Object.create(Ve),Et.constructor=G,Et._super=Ve,pe&&E(Et,pe)}function C(G,K){return function(){return G.apply(K,arguments)}}function M(G,K){return typeof G==l?G.apply(K&&K[0]||i,K):G}function D(G,K){return G===i?K:G}function I(G,K,pe){g(Q(K),function(Ve){G.addEventListener(Ve,pe,!1)})}function N(G,K,pe){g(Q(K),function(Ve){G.removeEventListener(Ve,pe,!1)})}function j(G,K){for(;G;){if(G==K)return!0;G=G.parentNode}return!1}function re(G,K){return G.indexOf(K)>-1}function Q(G){return G.trim().split(/\s+/g)}function X(G,K,pe){if(G.indexOf&&!pe)return G.indexOf(K);for(var Ve=0;Ve<G.length;){if(pe&&G[Ve][pe]==K||!pe&&G[Ve]===K)return Ve;Ve++}return-1}function R(G){return Array.prototype.slice.call(G,0)}function P(G,K,pe){for(var Ve=[],Et=[],kt=0;kt<G.length;){var Ir=G[kt][K];X(Et,Ir)<0&&Ve.push(G[kt]),Et[kt]=Ir,kt++}return Ve=Ve.sort(function(zn,Zn){return zn[K]>Zn[K]}),Ve}function V(G,K){for(var pe,Ve,Et=K[0].toUpperCase()+K.slice(1),kt=0;kt<a.length;){if(pe=a[kt],Ve=pe?pe+Et:K,Ve in G)return Ve;kt++}return i}var le=1;function w(){return le++}function z(G){var K=G.ownerDocument||G;return K.defaultView||K.parentWindow||t}var H=/mobile|tablet|ip(ad|hone|od)|android/i,ee="ontouchstart"in t,oe=V(t,"PointerEvent")!==i,ge=ee&&H.test(navigator.userAgent),ye="touch",Pe="pen",tt="mouse",We="kinect",Pt=25,$e=1,Tt=2,je=4,Ee=8,st=1,Oe=2,$t=4,qt=8,xt=16,Dt=Oe|$t,It=qt|xt,er=Dt|It,kr=["x","y"],ue=["clientX","clientY"];function xe(G,K){var pe=this;this.manager=G,this.callback=K,this.element=G.element,this.target=G.options.inputTarget,this.domHandler=function(Ve){M(G.options.enable,[G])&&pe.handler(Ve)},this.init()}xe.prototype={handler:function(){},init:function(){this.evEl&&I(this.element,this.evEl,this.domHandler),this.evTarget&&I(this.target,this.evTarget,this.domHandler),this.evWin&&I(z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&N(this.element,this.evEl,this.domHandler),this.evTarget&&N(this.target,this.evTarget,this.domHandler),this.evWin&&N(z(this.element),this.evWin,this.domHandler)}};function Ue(G){var K,pe=G.options.inputClass;return pe?K=pe:oe?K=rf:ge?K=Yn:ee?K=bu:K=Go,new K(G,k)}function k(G,K,pe){var Ve=pe.pointers.length,Et=pe.changedPointers.length,kt=K&$e&&Ve-Et===0,Ir=K&(je|Ee)&&Ve-Et===0;pe.isFirst=!!kt,pe.isFinal=!!Ir,kt&&(G.session={}),pe.eventType=K,vt(G,pe),G.emit("hammer.input",pe),G.recognize(pe),G.session.prevInput=pe}function vt(G,K){var pe=G.session,Ve=K.pointers,Et=Ve.length;pe.firstInput||(pe.firstInput=lr(K)),Et>1&&!pe.firstMultiple?pe.firstMultiple=lr(K):Et===1&&(pe.firstMultiple=!1);var kt=pe.firstInput,Ir=pe.firstMultiple,ei=Ir?Ir.center:kt.center,zn=K.center=dr(Ve);K.timeStamp=h(),K.deltaTime=K.timeStamp-kt.timeStamp,K.angle=fi(ei,zn),K.distance=Sn(ei,zn),pt(pe,K),K.offsetDirection=jn(K.deltaX,K.deltaY);var Zn=hr(K.deltaTime,K.deltaX,K.deltaY);K.overallVelocityX=Zn.x,K.overallVelocityY=Zn.y,K.overallVelocity=f(Zn.x)>f(Zn.y)?Zn.x:Zn.y,K.scale=Ir?yn(Ir.pointers,Ve):1,K.rotation=Ir?en(Ir.pointers,Ve):0,K.maxPointers=pe.prevInput?K.pointers.length>pe.prevInput.maxPointers?K.pointers.length:pe.prevInput.maxPointers:K.pointers.length,Ut(pe,K);var ra=G.element;j(K.srcEvent.target,ra)&&(ra=K.srcEvent.target),K.target=ra}function pt(G,K){var pe=K.center,Ve=G.offsetDelta||{},Et=G.prevDelta||{},kt=G.prevInput||{};(K.eventType===$e||kt.eventType===je)&&(Et=G.prevDelta={x:kt.deltaX||0,y:kt.deltaY||0},Ve=G.offsetDelta={x:pe.x,y:pe.y}),K.deltaX=Et.x+(pe.x-Ve.x),K.deltaY=Et.y+(pe.y-Ve.y)}function Ut(G,K){var pe=G.lastInterval||K,Ve=K.timeStamp-pe.timeStamp,Et,kt,Ir,ei;if(K.eventType!=Ee&&(Ve>Pt||pe.velocity===i)){var zn=K.deltaX-pe.deltaX,Zn=K.deltaY-pe.deltaY,ra=hr(Ve,zn,Zn);kt=ra.x,Ir=ra.y,Et=f(ra.x)>f(ra.y)?ra.x:ra.y,ei=jn(zn,Zn),G.lastInterval=K}else Et=pe.velocity,kt=pe.velocityX,Ir=pe.velocityY,ei=pe.direction;K.velocity=Et,K.velocityX=kt,K.velocityY=Ir,K.direction=ei}function lr(G){for(var K=[],pe=0;pe<G.pointers.length;)K[pe]={clientX:c(G.pointers[pe].clientX),clientY:c(G.pointers[pe].clientY)},pe++;return{timeStamp:h(),pointers:K,center:dr(K),deltaX:G.deltaX,deltaY:G.deltaY}}function dr(G){var K=G.length;if(K===1)return{x:c(G[0].clientX),y:c(G[0].clientY)};for(var pe=0,Ve=0,Et=0;Et<K;)pe+=G[Et].clientX,Ve+=G[Et].clientY,Et++;return{x:c(pe/K),y:c(Ve/K)}}function hr(G,K,pe){return{x:K/G||0,y:pe/G||0}}function jn(G,K){return G===K?st:f(G)>=f(K)?G<0?Oe:$t:K<0?qt:xt}function Sn(G,K,pe){pe||(pe=kr);var Ve=K[pe[0]]-G[pe[0]],Et=K[pe[1]]-G[pe[1]];return Math.sqrt(Ve*Ve+Et*Et)}function fi(G,K,pe){pe||(pe=kr);var Ve=K[pe[0]]-G[pe[0]],Et=K[pe[1]]-G[pe[1]];return Math.atan2(Et,Ve)*180/Math.PI}function en(G,K){return fi(K[1],K[0],ue)+fi(G[1],G[0],ue)}function yn(G,K){return Sn(K[0],K[1],ue)/Sn(G[0],G[1],ue)}var Ji={mousedown:$e,mousemove:Tt,mouseup:je},pa="mousedown",Ka="mousemove mouseup";function Go(){this.evEl=pa,this.evWin=Ka,this.pressed=!1,xe.apply(this,arguments)}T(Go,xe,{handler:function(K){var pe=Ji[K.type];pe&$e&&K.button===0&&(this.pressed=!0),pe&Tt&&K.which!==1&&(pe=je),this.pressed&&(pe&je&&(this.pressed=!1),this.callback(this.manager,pe,{pointers:[K],changedPointers:[K],pointerType:tt,srcEvent:K}))}});var wd={pointerdown:$e,pointermove:Tt,pointerup:je,pointercancel:Ee,pointerout:Ee},Nd={2:ye,3:Pe,4:tt,5:We},_l="pointerdown",Wo="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(_l="MSPointerDown",Wo="MSPointerMove MSPointerUp MSPointerCancel");function rf(){this.evEl=_l,this.evWin=Wo,xe.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}T(rf,xe,{handler:function(K){var pe=this.store,Ve=!1,Et=K.type.toLowerCase().replace("ms",""),kt=wd[Et],Ir=Nd[K.pointerType]||K.pointerType,ei=Ir==ye,zn=X(pe,K.pointerId,"pointerId");kt&$e&&(K.button===0||ei)?zn<0&&(pe.push(K),zn=pe.length-1):kt&(je|Ee)&&(Ve=!0),!(zn<0)&&(pe[zn]=K,this.callback(this.manager,kt,{pointers:pe,changedPointers:[K],pointerType:Ir,srcEvent:K}),Ve&&pe.splice(zn,1))}});var Md={touchstart:$e,touchmove:Tt,touchend:je,touchcancel:Ee},Pi="touchstart",nf="touchstart touchmove touchend touchcancel";function Eu(){this.evTarget=Pi,this.evWin=nf,this.started=!1,xe.apply(this,arguments)}T(Eu,xe,{handler:function(K){var pe=Md[K.type];if(pe===$e&&(this.started=!0),!!this.started){var Ve=Id.call(this,K,pe);pe&(je|Ee)&&Ve[0].length-Ve[1].length===0&&(this.started=!1),this.callback(this.manager,pe,{pointers:Ve[0],changedPointers:Ve[1],pointerType:ye,srcEvent:K})}}});function Id(G,K){var pe=R(G.touches),Ve=R(G.changedTouches);return K&(je|Ee)&&(pe=P(pe.concat(Ve),"identifier")),[pe,Ve]}var im={touchstart:$e,touchmove:Tt,touchend:je,touchcancel:Ee},_o="touchstart touchmove touchend touchcancel";function Yn(){this.evTarget=_o,this.targetIds={},xe.apply(this,arguments)}T(Yn,xe,{handler:function(K){var pe=im[K.type],Ve=Di.call(this,K,pe);Ve&&this.callback(this.manager,pe,{pointers:Ve[0],changedPointers:Ve[1],pointerType:ye,srcEvent:K})}});function Di(G,K){var pe=R(G.touches),Ve=this.targetIds;if(K&($e|Tt)&&pe.length===1)return Ve[pe[0].identifier]=!0,[pe,pe];var Et,kt,Ir=R(G.changedTouches),ei=[],zn=this.target;if(kt=pe.filter(function(Zn){return j(Zn.target,zn)}),K===$e)for(Et=0;Et<kt.length;)Ve[kt[Et].identifier]=!0,Et++;for(Et=0;Et<Ir.length;)Ve[Ir[Et].identifier]&&ei.push(Ir[Et]),K&(je|Ee)&&delete Ve[Ir[Et].identifier],Et++;if(ei.length)return[P(kt.concat(ei),"identifier"),ei]}var Ms=2500,yl=25;function bu(){xe.apply(this,arguments);var G=C(this.handler,this);this.touch=new Yn(this.manager,G),this.mouse=new Go(this.manager,G),this.primaryTouch=null,this.lastTouches=[]}T(bu,xe,{handler:function(K,pe,Ve){var Et=Ve.pointerType==ye,kt=Ve.pointerType==tt;if(!(kt&&Ve.sourceCapabilities&&Ve.sourceCapabilities.firesTouchEvents)){if(Et)Tn.call(this,pe,Ve);else if(kt&&El.call(this,Ve))return;this.callback(K,pe,Ve)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Tn(G,K){G&$e?(this.primaryTouch=K.changedPointers[0].identifier,af.call(this,K)):G&(je|Ee)&&af.call(this,K)}function af(G){var K=G.changedPointers[0];if(K.identifier===this.primaryTouch){var pe={x:K.clientX,y:K.clientY};this.lastTouches.push(pe);var Ve=this.lastTouches,Et=function(){var kt=Ve.indexOf(pe);kt>-1&&Ve.splice(kt,1)};setTimeout(Et,Ms)}}function El(G){for(var K=G.srcEvent.clientX,pe=G.srcEvent.clientY,Ve=0;Ve<this.lastTouches.length;Ve++){var Et=this.lastTouches[Ve],kt=Math.abs(K-Et.x),Ir=Math.abs(pe-Et.y);if(kt<=yl&&Ir<=yl)return!0}return!1}var xu=V(o.style,"touchAction"),$o=xu!==i,Yo="compute",Is="auto",yo="manipulation",mn="none",Ps="pan-x",Ds="pan-y",Na=Pd();function Eo(G,K){this.manager=G,this.set(K)}Eo.prototype={set:function(G){G==Yo&&(G=this.compute()),$o&&this.manager.element.style&&Na[G]&&(this.manager.element.style[xu]=G),this.actions=G.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var G=[];return g(this.manager.recognizers,function(K){M(K.options.enable,[K])&&(G=G.concat(K.getTouchAction()))}),am(G.join(" "))},preventDefaults:function(G){var K=G.srcEvent,pe=G.offsetDirection;if(this.manager.session.prevented){K.preventDefault();return}var Ve=this.actions,Et=re(Ve,mn)&&!Na[mn],kt=re(Ve,Ds)&&!Na[Ds],Ir=re(Ve,Ps)&&!Na[Ps];if(Et){var ei=G.pointers.length===1,zn=G.distance<2,Zn=G.deltaTime<250;if(ei&&zn&&Zn)return}if(!(Ir&&kt)&&(Et||kt&&pe&Dt||Ir&&pe&It))return this.preventSrc(K)},preventSrc:function(G){this.manager.session.prevented=!0,G.preventDefault()}};function am(G){if(re(G,mn))return mn;var K=re(G,Ps),pe=re(G,Ds);return K&&pe?mn:K||pe?K?Ps:Ds:re(G,yo)?yo:Is}function Pd(){if(!$o)return!1;var G={},K=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(pe){G[pe]=K?t.CSS.supports("touch-action",pe):!0}),G}var bl=1,ea=2,Qa=4,ma=8,ai=ma,Zo=16,va=32;function Li(G){this.options=E({},this.defaults,G||{}),this.id=w(),this.manager=null,this.options.enable=D(this.options.enable,!0),this.state=bl,this.simultaneous={},this.requireFail=[]}Li.prototype={defaults:{},set:function(G){return E(this.options,G),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(G){if(v(G,"recognizeWith",this))return this;var K=this.simultaneous;return G=Au(G,this),K[G.id]||(K[G.id]=G,G.recognizeWith(this)),this},dropRecognizeWith:function(G){return v(G,"dropRecognizeWith",this)?this:(G=Au(G,this),delete this.simultaneous[G.id],this)},requireFailure:function(G){if(v(G,"requireFailure",this))return this;var K=this.requireFail;return G=Au(G,this),X(K,G)===-1&&(K.push(G),G.requireFailure(this)),this},dropRequireFailure:function(G){if(v(G,"dropRequireFailure",this))return this;G=Au(G,this);var K=X(this.requireFail,G);return K>-1&&this.requireFail.splice(K,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(G){return!!this.simultaneous[G.id]},emit:function(G){var K=this,pe=this.state;function Ve(Et){K.manager.emit(Et,G)}pe<ma&&Ve(K.options.event+Su(pe)),Ve(K.options.event),G.additionalEvent&&Ve(G.additionalEvent),pe>=ma&&Ve(K.options.event+Su(pe))},tryEmit:function(G){if(this.canEmit())return this.emit(G);this.state=va},canEmit:function(){for(var G=0;G<this.requireFail.length;){if(!(this.requireFail[G].state&(va|bl)))return!1;G++}return!0},recognize:function(G){var K=E({},G);if(!M(this.options.enable,[this,K])){this.reset(),this.state=va;return}this.state&(ai|Zo|va)&&(this.state=bl),this.state=this.process(K),this.state&(ea|Qa|ma|Zo)&&this.tryEmit(K)},process:function(G){},getTouchAction:function(){},reset:function(){}};function Su(G){return G&Zo?"cancel":G&ma?"end":G&Qa?"move":G&ea?"start":""}function Tu(G){return G==xt?"down":G==qt?"up":G==Oe?"left":G==$t?"right":""}function Au(G,K){var pe=K.manager;return pe?pe.get(G):G}function ta(){Li.apply(this,arguments)}T(ta,Li,{defaults:{pointers:1},attrTest:function(G){var K=this.options.pointers;return K===0||G.pointers.length===K},process:function(G){var K=this.state,pe=G.eventType,Ve=K&(ea|Qa),Et=this.attrTest(G);return Ve&&(pe&Ee||!Et)?K|Zo:Ve||Et?pe&je?K|ma:K&ea?K|Qa:ea:va}});function xi(){ta.apply(this,arguments),this.pX=null,this.pY=null}T(xi,ta,{defaults:{event:"pan",threshold:10,pointers:1,direction:er},getTouchAction:function(){var G=this.options.direction,K=[];return G&Dt&&K.push(Ds),G&It&&K.push(Ps),K},directionTest:function(G){var K=this.options,pe=!0,Ve=G.distance,Et=G.direction,kt=G.deltaX,Ir=G.deltaY;return Et&K.direction||(K.direction&Dt?(Et=kt===0?st:kt<0?Oe:$t,pe=kt!=this.pX,Ve=Math.abs(G.deltaX)):(Et=Ir===0?st:Ir<0?qt:xt,pe=Ir!=this.pY,Ve=Math.abs(G.deltaY))),G.direction=Et,pe&&Ve>K.threshold&&Et&K.direction},attrTest:function(G){return ta.prototype.attrTest.call(this,G)&&(this.state&ea||!(this.state&ea)&&this.directionTest(G))},emit:function(G){this.pX=G.deltaX,this.pY=G.deltaY;var K=Tu(G.direction);K&&(G.additionalEvent=this.options.event+K),this._super.emit.call(this,G)}});function Ko(){ta.apply(this,arguments)}T(Ko,ta,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[mn]},attrTest:function(G){return this._super.attrTest.call(this,G)&&(Math.abs(G.scale-1)>this.options.threshold||this.state&ea)},emit:function(G){if(G.scale!==1){var K=G.scale<1?"in":"out";G.additionalEvent=this.options.event+K}this._super.emit.call(this,G)}});function Ru(){Li.apply(this,arguments),this._timer=null,this._input=null}T(Ru,Li,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Is]},process:function(G){var K=this.options,pe=G.pointers.length===K.pointers,Ve=G.distance<K.threshold,Et=G.deltaTime>K.time;if(this._input=G,!Ve||!pe||G.eventType&(je|Ee)&&!Et)this.reset();else if(G.eventType&$e)this.reset(),this._timer=p(function(){this.state=ai,this.tryEmit()},K.time,this);else if(G.eventType&je)return ai;return va},reset:function(){clearTimeout(this._timer)},emit:function(G){this.state===ai&&(G&&G.eventType&je?this.manager.emit(this.options.event+"up",G):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}});function Ls(){ta.apply(this,arguments)}T(Ls,ta,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[mn]},attrTest:function(G){return this._super.attrTest.call(this,G)&&(Math.abs(G.rotation)>this.options.threshold||this.state&ea)}});function Cu(){ta.apply(this,arguments)}T(Cu,ta,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Dt|It,pointers:1},getTouchAction:function(){return xi.prototype.getTouchAction.call(this)},attrTest:function(G){var K=this.options.direction,pe;return K&(Dt|It)?pe=G.overallVelocity:K&Dt?pe=G.overallVelocityX:K&It&&(pe=G.overallVelocityY),this._super.attrTest.call(this,G)&&K&G.offsetDirection&&G.distance>this.options.threshold&&G.maxPointers==this.options.pointers&&f(pe)>this.options.velocity&&G.eventType&je},emit:function(G){var K=Tu(G.offsetDirection);K&&this.manager.emit(this.options.event+K,G),this.manager.emit(this.options.event,G)}});function ga(){Li.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}T(ga,Li,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[yo]},process:function(G){var K=this.options,pe=G.pointers.length===K.pointers,Ve=G.distance<K.threshold,Et=G.deltaTime<K.time;if(this.reset(),G.eventType&$e&&this.count===0)return this.failTimeout();if(Ve&&Et&&pe){if(G.eventType!=je)return this.failTimeout();var kt=this.pTime?G.timeStamp-this.pTime<K.interval:!0,Ir=!this.pCenter||Sn(this.pCenter,G.center)<K.posThreshold;this.pTime=G.timeStamp,this.pCenter=G.center,!Ir||!kt?this.count=1:this.count+=1,this._input=G;var ei=this.count%K.taps;if(ei===0)return this.hasRequireFailures()?(this._timer=p(function(){this.state=ai,this.tryEmit()},K.interval,this),ea):ai}return va},failTimeout:function(){return this._timer=p(function(){this.state=va},this.options.interval,this),va},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ai&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ma(G,K){return K=K||{},K.recognizers=D(K.recognizers,Ma.defaults.preset),new Ou(G,K)}Ma.VERSION="2.0.7",Ma.defaults={domEvents:!1,touchAction:Yo,enable:!0,inputTarget:null,inputClass:null,preset:[[Ls,{enable:!1}],[Ko,{enable:!1},["rotate"]],[Cu,{direction:Dt}],[xi,{direction:Dt},["swipe"]],[ga],[ga,{event:"doubletap",taps:2},["tap"]],[Ru]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Hi=1,Bs=2;function Ou(G,K){this.options=E({},Ma.defaults,K||{}),this.options.inputTarget=this.options.inputTarget||G,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=G,this.input=Ue(this),this.touchAction=new Eo(this,this.options.touchAction),wu(this,!0),g(this.options.recognizers,function(pe){var Ve=this.add(new pe[0](pe[1]));pe[2]&&Ve.recognizeWith(pe[2]),pe[3]&&Ve.requireFailure(pe[3])},this)}Ou.prototype={set:function(G){return E(this.options,G),G.touchAction&&this.touchAction.update(),G.inputTarget&&(this.input.destroy(),this.input.target=G.inputTarget,this.input.init()),this},stop:function(G){this.session.stopped=G?Bs:Hi},recognize:function(G){var K=this.session;if(!K.stopped){this.touchAction.preventDefaults(G);var pe,Ve=this.recognizers,Et=K.curRecognizer;(!Et||Et&&Et.state&ai)&&(Et=K.curRecognizer=null);for(var kt=0;kt<Ve.length;)pe=Ve[kt],K.stopped!==Bs&&(!Et||pe==Et||pe.canRecognizeWith(Et))?pe.recognize(G):pe.reset(),!Et&&pe.state&(ea|Qa|ma)&&(Et=K.curRecognizer=pe),kt++}},get:function(G){if(G instanceof Li)return G;for(var K=this.recognizers,pe=0;pe<K.length;pe++)if(K[pe].options.event==G)return K[pe];return null},add:function(G){if(v(G,"add",this))return this;var K=this.get(G.options.event);return K&&this.remove(K),this.recognizers.push(G),G.manager=this,this.touchAction.update(),G},remove:function(G){if(v(G,"remove",this))return this;if(G=this.get(G),G){var K=this.recognizers,pe=X(K,G);pe!==-1&&(K.splice(pe,1),this.touchAction.update())}return this},on:function(G,K){if(G!==i&&K!==i){var pe=this.handlers;return g(Q(G),function(Ve){pe[Ve]=pe[Ve]||[],pe[Ve].push(K)}),this}},off:function(G,K){if(G!==i){var pe=this.handlers;return g(Q(G),function(Ve){K?pe[Ve]&&pe[Ve].splice(X(pe[Ve],K),1):delete pe[Ve]}),this}},emit:function(G,K){this.options.domEvents&&Fs(G,K);var pe=this.handlers[G]&&this.handlers[G].slice();if(!(!pe||!pe.length)){K.type=G,K.preventDefault=function(){K.srcEvent.preventDefault()};for(var Ve=0;Ve<pe.length;)pe[Ve](K),Ve++}},destroy:function(){this.element&&wu(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function wu(G,K){var pe=G.element;if(pe.style){var Ve;g(G.options.cssProps,function(Et,kt){Ve=V(pe.style,kt),K?(G.oldCssProps[Ve]=pe.style[Ve],pe.style[Ve]=Et):pe.style[Ve]=G.oldCssProps[Ve]||""}),K||(G.oldCssProps={})}}function Fs(G,K){var pe=r.createEvent("Event");pe.initEvent(G,!0,!0),pe.gesture=K,K.target.dispatchEvent(pe)}E(Ma,{INPUT_START:$e,INPUT_MOVE:Tt,INPUT_END:je,INPUT_CANCEL:Ee,STATE_POSSIBLE:bl,STATE_BEGAN:ea,STATE_CHANGED:Qa,STATE_ENDED:ma,STATE_RECOGNIZED:ai,STATE_CANCELLED:Zo,STATE_FAILED:va,DIRECTION_NONE:st,DIRECTION_LEFT:Oe,DIRECTION_RIGHT:$t,DIRECTION_UP:qt,DIRECTION_DOWN:xt,DIRECTION_HORIZONTAL:Dt,DIRECTION_VERTICAL:It,DIRECTION_ALL:er,Manager:Ou,Input:xe,TouchAction:Eo,TouchInput:Yn,MouseInput:Go,PointerEventInput:rf,TouchMouseInput:bu,SingleTouchInput:Eu,Recognizer:Li,AttrRecognizer:ta,Tap:ga,Pan:xi,Swipe:Cu,Pinch:Ko,Rotate:Ls,Press:Ru,on:I,off:N,each:g,merge:S,extend:b,assign:E,inherit:T,bindFn:C,prefixed:V});var Dd=typeof t<"u"?t:typeof self<"u"?self:{};Dd.Hammer=Ma,e.exports?e.exports=Ma:t[n]=Ma})(window,document,"Hammer")})(vR)),vR.exports}var gae=vae();const Rv=Kr(gae),_ae={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"};class yae extends J3{get mapService(){return this.container.mapService}constructor(t){super(),F(this,"indragging",!1),F(this,"hammertime",void 0),F(this,"lastClickTime",0),F(this,"lastClickXY",[-1,-1]),F(this,"clickTimer",void 0),F(this,"$containter",void 0),F(this,"onDrag",r=>{const n=this.interactionEvent(r);n.type=_ae[n.type],n.type==="dragging"?this.indragging=!0:this.indragging=!1,this.emit(za.Drag,n)}),F(this,"onHammer",r=>{r.srcEvent.stopPropagation();const n=this.interactionEvent(r);this.emit(za.Hover,n)}),F(this,"onTouch",r=>{const n=r.touches[0];this.onHover({clientX:n.clientX,clientY:n.clientY,type:"touchstart"})}),F(this,"onTouchEnd",r=>{if(r.changedTouches.length>0){const n=r.changedTouches[0];this.onHover({clientX:n.clientX,clientY:n.clientY,type:"touchend"})}}),F(this,"onTouchMove",r=>{const n=r.changedTouches[0];this.onHover({clientX:n.clientX,clientY:n.clientY,type:"touchmove"})}),F(this,"onHover",r=>{const{clientX:n,clientY:i}=r;let a=n,o=i;const l=r.type,c=this.mapService.getMapContainer();if(c){const{top:h,left:p}=c.getBoundingClientRect();a=a-p-c.clientLeft,o=o-h-c.clientTop}const f=this.mapService.containerToLngLat([a,o]);if(l==="click"){this.isDoubleTap(a,o,f);return}if(l==="touch"){this.isDoubleTap(a,o,f);return}l!=="click"&&l!=="dblclick"&&this.emit(za.Hover,{x:a,y:o,lngLat:f,type:l,target:r})}),this.container=t}init(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}destroy(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(za.Hover)}triggerHover({x:t,y:r}){this.emit(za.Hover,{x:t,y:r})}triggerSelect(t){this.emit(za.Select,{featureId:t})}triggerActive(t){this.emit(za.Active,{featureId:t})}addEventListenerOnMap(){const t=this.mapService.getMapContainer();if(t){const r=new Rv.Manager(t);r.add(new Rv.Tap({event:"dblclick",taps:2})),r.add(new Rv.Tap({event:"click"})),r.add(new Rv.Pan({threshold:0,pointers:0})),r.add(new Rv.Press({})),r.on("dblclick click",this.onHammer),r.on("panstart panmove panend pancancel",this.onDrag),t.addEventListener("touchstart",this.onTouch),t.addEventListener("touchend",this.onTouchEnd),t.addEventListener("mousemove",this.onHover),t.addEventListener("touchmove",this.onTouchMove),t.addEventListener("mousedown",this.onHover,!0),t.addEventListener("mouseup",this.onHover),t.addEventListener("contextmenu",this.onHover),this.hammertime=r}}removeEventListenerOnMap(){const t=this.mapService.getMapContainer();t&&(t.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),t.removeEventListener("touchstart",this.onTouch),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("mousedown",this.onHover),t.removeEventListener("mouseup",this.onHover),t.removeEventListener("contextmenu",this.onHover))}interactionEvent(t){const{type:r,pointerType:n}=t;let i,a;n==="touch"?(a=Math.floor(t.pointers[0].clientY),i=Math.floor(t.pointers[0].clientX)):(a=Math.floor(t.srcEvent.y),i=Math.floor(t.srcEvent.x));const o=this.mapService.getMapContainer();if(o){const{top:c,left:f}=o.getBoundingClientRect();i-=f,a-=c}const l=this.mapService.containerToLngLat([i,a]);return{x:i,y:a,lngLat:l,type:r,target:t.srcEvent}}isDoubleTap(t,r,n){const i=new Date().getTime();let a="click";i-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-t)<10&&Math.abs(this.lastClickXY[1]-r)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),a="dblclick",this.emit(za.Hover,{x:t,y:r,lngLat:n,type:a})):(this.lastClickTime=i,this.lastClickXY=[t,r],this.clickTimer=setTimeout(()=>{a="click",this.emit(za.Hover,{x:t,y:r,lngLat:n,type:a})},400))}}let Eae=0;function bae(e){let t=e;if(typeof e=="string"&&(t=document.getElementById(e)),t){const r=document.createElement("div");return r.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,r.id=`l7-scene-${Eae++}`,r.classList.add("l7-scene"),t.appendChild(r),r}return null}function xae(e){var t;let r=!0;if((e==null||(t=e.target)===null||t===void 0?void 0:t.target)instanceof HTMLElement){var n;let a=e==null||(n=e.target)===null||n===void 0?void 0:n.target;for(;a;){var i;const o=Array.from(a.classList);if(o.includes("l7-marker")||o.includes("l7-popup")){r=!1;break}a=(i=a)===null||i===void 0?void 0:i.parentElement}}return r}let Ng=(function(e){return e[e.SAMPLED=0]="SAMPLED",e[e.RENDER_TARGET=1]="RENDER_TARGET",e})({});class Sae{constructor(t){var r=this;F(this,"pickedColors",void 0),F(this,"pickedTileLayers",[]),F(this,"pickingFBO",void 0),F(this,"width",0),F(this,"height",0),F(this,"alreadyInPicking",!1),F(this,"pickBufferScale",1),F(this,"pickFromPickingFBO",(function(){var n=et(function*(i,{x:a,y:o,lngLat:l,type:c,target:f}){var h;let p=!1;const{readPixels:v,readPixelsAsync:g,getViewportSize:_,queryVerdorInfo:E}=r.rendererService,{width:b,height:S}=_(),{enableHighlight:T,enableSelect:C}=i.getLayerConfig(),M=a*ja,D=o*ja;if(M>b-1*ja||M<0||D>S-1*ja||D<0)return!1;let I;if(E()==="WebGPU"?I=yield g({x:Math.floor(M/r.pickBufferScale),y:Math.floor((S-(o+1)*ja)/r.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:r.pickingFBO}):I=v({x:Math.floor(M/r.pickBufferScale),y:Math.floor((S-(o+1)*ja)/r.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:r.pickingFBO}),r.pickedColors=I,I[0]!==0||I[1]!==0||I[2]!==0){const j=nd(I),re=i.layerPickService.getFeatureById(j);j!==i.getCurrentPickId()&&c==="mousemove"&&(c="mouseenter");const Q={x:a,y:o,type:c,lngLat:l,featureId:j,feature:re,target:f};re&&(p=!0,i.setCurrentPickId(j),r.triggerHoverOnLayer(i,Q))}else{const j={x:a,y:o,lngLat:l,type:i.getCurrentPickId()!==null&&c==="mousemove"?"mouseout":"un"+c,featureId:null,target:f,feature:null};r.triggerHoverOnLayer(i,qe(qe({},j),{},{type:"unpick"})),r.triggerHoverOnLayer(i,j),i.setCurrentPickId(null)}if(T&&i.layerPickService.highlightPickedFeature(I),C&&c==="click"&&((h=I)===null||h===void 0?void 0:h.toString())!==[0,0,0,0].toString()){const j=nd(I);i.getCurrentSelectedId()===null||j!==i.getCurrentSelectedId()?(i.layerPickService.selectFeature(I),i.setCurrentSelectedId(j)):(i.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),i.setCurrentSelectedId(null))}return p});return function(i,a){return n.apply(this,arguments)}})()),this.container=t}get mapService(){return this.container.mapService}get rendererService(){return this.container.rendererService}get configService(){return this.container.globalConfigService}get interactionService(){return this.container.interactionService}get layerService(){return this.container.layerService}init(t){const{createTexture2D:r,createFramebuffer:n,getViewportSize:i}=this.rendererService;let{width:a,height:o}=i();this.pickBufferScale=this.configService.getSceneConfig(t).pickBufferScale||1,a=Math.round(a/this.pickBufferScale),o=Math.round(o/this.pickBufferScale);const l=r({width:a,height:o,usage:Ng.RENDER_TARGET,label:"Picking Texture"});this.pickingFBO=n({color:l,depth:!0,width:a,height:o}),this.interactionService.on(za.Hover,this.pickingAllLayer.bind(this))}boxPickLayer(t,r,n){var i=this;return et(function*(){const{useFramebufferAsync:a,clear:o}=i.rendererService;i.resizePickingFBO(),t.hooks.beforePickingEncode.call(),yield a(i.pickingFBO,et(function*(){o({framebuffer:i.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),t.renderModels({ispick:!0})})),t.hooks.afterPickingEncode.call();const l=yield i.pickBox(t,r);n(l)})()}pickBox(t,r){var n=this;return et(function*(){const[i,a,o,l]=r.map(S=>{const T=S<0?0:S;return Math.floor(T*ja/n.pickBufferScale)}),{readPixelsAsync:c,getViewportSize:f}=n.rendererService,{width:h,height:p}=f();if(i>(h-1)*ja/n.pickBufferScale||o<0||a>(p-1)*ja/n.pickBufferScale||l<0)return[];const v=Math.min(h/n.pickBufferScale,o)-i,g=Math.min(p/n.pickBufferScale,l)-a,_=yield c({x:i,y:Math.floor(p/n.pickBufferScale-(l+1)),width:v,height:g,data:new Uint8Array(v*g*4),framebuffer:n.pickingFBO}),E=[],b={};for(let S=0;S<_.length/4;S=S+1){const T=_.slice(S*4,S*4+4),C=nd(T);if(C!==-1&&!b[C]){const M=t.layerPickService.getFeatureById(C);E.push(qe(qe({},M),{},{pickedFeatureIdx:C})),b[C]=!0}}return E})()}handleCursor(t,r){const{cursor:n="",cursorEnabled:i}=t.getLayerConfig();if(i){const o=this.mapService.getType()==="amap"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),l=o?.style.getPropertyValue("cursor");r==="unmousemove"&&l!==""?o?.style.setProperty("cursor",""):r==="mousemove"&&o?.style.setProperty("cursor",n)}}destroy(){this.pickingFBO.destroy(),this.pickingFBO=null}pickingAllLayer(t){var r=this;return et(function*(){!r.layerService.needPick(t.type)||!r.isPickingAllLayer()||(r.alreadyInPicking=!0,yield r.pickingLayers(t),r.layerService.renderLayers(),r.alreadyInPicking=!1)})()}isPickingAllLayer(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}resizePickingFBO(){const{getViewportSize:t}=this.rendererService,{width:r,height:n}=t();(this.width!==r||this.height!==n)&&(this.pickingFBO.resize({width:Math.round(r/this.pickBufferScale),height:Math.round(n/this.pickBufferScale)}),this.width=r,this.height=n)}pickingLayers(t){var r=this;return et(function*(){const{clear:n,useFramebufferAsync:i}=r.rendererService;r.resizePickingFBO();const a=r.layerService.getRenderList();for(const o of a.filter(l=>l.needPick(t.type)).reverse()){yield i(r.pickingFBO,et(function*(){n({framebuffer:r.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),o.layerPickService.pickRender(t)}));const l=yield r.pickFromPickingFBO(o,t);if(r.layerService.pickedLayerId=l?+o.id:-1,l&&!o.getLayerConfig().enablePropagation)break}})()}triggerHoverOnLayer(t,r){xae(r)&&(this.handleCursor(t,r.type),t.emit(r.type,r))}}class Tae{constructor(t=!0){F(this,"autoStart",void 0),F(this,"startTime",0),F(this,"oldTime",0),F(this,"running",!1),F(this,"elapsedTime",0),this.autoStart=t}start(){this.startTime=(typeof performance>"u"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const r=(typeof performance>"u"?Date:performance).now();t=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=t}return t}}const{throttle:dL}=Un;class Aae extends Za.EventEmitter{get renderService(){return this.container.rendererService}get mapService(){return this.container.mapService}get debugService(){return this.container.debugService}constructor(t){super(),F(this,"pickedLayerId",-1),F(this,"clock",new Tae),F(this,"alreadyInRendering",!1),F(this,"layers",[]),F(this,"layerList",[]),F(this,"layerRenderID",void 0),F(this,"sceneInited",!1),F(this,"animateInstanceCount",0),F(this,"shaderPicking",!0),F(this,"enableRender",!0),F(this,"reRender",dL(()=>{this.renderLayers()},32)),F(this,"throttleRenderLayers",dL(()=>{this.renderLayers()},16)),this.container=t}needPick(t){return this.updateLayerRenderList(),this.layerList.some(r=>r.needPick(t))}add(t){this.layers.push(t),this.sceneInited&&t.init().then(()=>{this.renderLayers()})}addMask(t){this.sceneInited&&t.init().then(()=>{this.renderLayers()})}initLayers(){var t=this;return et(function*(){t.sceneInited=!0,t.layers.forEach((function(){var r=et(function*(n){n.startInit||(yield n.init(),t.updateLayerRenderList())});return function(n){return r.apply(this,arguments)}})())})()}getSceneInited(){return this.sceneInited}getRenderList(){return this.layerList}getLayers(){return this.layers}getLayer(t){return this.layers.find(r=>r.id===t)}getLayerByName(t){return this.layers.find(r=>r.name===t)}remove(t,r){var n=this;return et(function*(){if(r){r.layerChildren||(r.layerChildren=[]);const i=r.layerChildren.findIndex(a=>a.id===t.id);i>-1&&r.layerChildren.splice(i,1)}else{const i=n.layers.findIndex(a=>a.id===t.id);i>-1&&n.layers.splice(i,1)}t.destroy(),n.reRender(),n.emit("layerChange",n.layers)})()}removeAllLayers(){var t=this;return et(function*(){t.destroy(),t.reRender()})()}setEnableRender(t){this.enableRender=t}renderLayers(){var t=this;return et(function*(){if(t.alreadyInRendering||!t.enableRender)return;t.updateLayerRenderList();const r=t.debugService.generateRenderUid();t.debugService.renderStart(r),t.alreadyInRendering=!0,t.clear();for(const n of t.layerList)n.prerender();t.renderService.beginFrame();for(const n of t.layerList){const{enableMask:i}=n.getLayerConfig();n.masks.filter(a=>a.inited).length>0&&i&&t.renderMask(n.masks),n.getLayerConfig().enableMultiPassRenderer?yield n.renderMultiPass():n.render()}t.renderService.endFrame(),t.debugService.renderEnd(r),t.alreadyInRendering=!1})()}renderMask(t){let r=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});const n=t.length>1?Zf.MULTIPLE:Zf.SINGLE;for(const i of t)i.render({isStencil:!0,stencilType:n,stencilIndex:r++})}beforeRenderData(t){var r=this;return et(function*(){(yield t.hooks.beforeRenderData.promise())&&r.renderLayers()})()}renderTileLayerMask(t){let r=0;const{enableMask:n=!0}=t.getLayerConfig();let i=t.tileMask?1:0;const a=t.masks.filter(l=>l.inited);i=i+(n?a.length:1);const o=i>1?Zf.MULTIPLE:Zf.SINGLE;if((t.tileMask||a.length&&n)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),a.length&&n)for(const l of a)l.render({isStencil:!0,stencilType:o,stencilIndex:r++});t.tileMask&&t.tileMask.render({isStencil:!0,stencilType:o,stencilIndex:r++,stencilOperation:SE.OR})}renderTileLayer(t){var r=this;return et(function*(){r.renderTileLayerMask(t),t.getLayerConfig().enableMultiPassRenderer?yield t.renderMultiPass():yield t.render()})()}updateLayerRenderList(){this.layerList=[],this.layers.filter(t=>t.inited).filter(t=>t.isVisible()).sort((t,r)=>t.zIndex-r.zIndex).forEach(t=>{this.layerList.push(t)})}destroy(){this.layers.forEach(t=>{t.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}startAnimate(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}stopAnimate(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}getOESTextureFloat(){return this.renderService.extensionObject.OES_texture_float}enableShaderPick(){this.shaderPicking=!0}disableShaderPick(){this.shaderPicking=!1}getShaderPickStat(){return this.shaderPicking}clear(){const t=pn(this.mapService.bgColor);this.renderService.clear({color:t,depth:1,stencil:0,framebuffer:null})}runRender(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this))}stopRender(){window.cancelAnimationFrame(this.layerRenderID)}}function Rae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ml(e,t){if(e==null)return{};var r,n,i=Rae(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}const{isNil:Cae}=Un;class Oae{constructor(t){F(this,"name",void 0),F(this,"type",void 0),F(this,"scale",void 0),F(this,"descriptor",void 0),F(this,"featureBufferLayout",[]),F(this,"needRescale",!1),F(this,"needRemapping",!1),F(this,"needRegenerateVertices",!1),F(this,"featureRange",{startIndex:0,endIndex:1/0}),F(this,"vertexAttribute",void 0),F(this,"defaultCallback",r=>{if(r.length===0){var n;return((n=this.scale)===null||n===void 0?void 0:n.defaultValues)||[]}return r.map((i,a)=>{var o;return((o=this.scale)===null||o===void 0?void 0:o.scalers[a].func)(i)})}),this.setProps(t)}setProps(t){Object.assign(this,t)}mapping(t){var r;if((r=this.scale)!==null&&r!==void 0&&r.callback){var n;const i=(n=this.scale)===null||n===void 0?void 0:n.callback(...t);if(!Cae(i))return[i]}return this.defaultCallback(t)}resetDescriptor(){this.descriptor&&(this.descriptor.buffer.data=[])}}const wae=["buffer","update","name"],Nae=["buffer","update","name"],Mae={[L.FLOAT]:4,[L.UNSIGNED_BYTE]:1,[L.UNSIGNED_SHORT]:2};class Iae{constructor(t){F(this,"attributesAndIndices",void 0),F(this,"attributes",[]),F(this,"triangulation",void 0),F(this,"featureLayout",{sizePerElement:0,elements:[]}),this.rendererService=t}registerStyleAttribute(t){let r=this.getLayerStyleAttribute(t.name||"");return r?r.setProps(t):(r=new Oae(t),this.attributes.push(r)),r}unRegisterStyleAttribute(t){const r=this.attributes.findIndex(n=>n.name===t);r>-1&&this.attributes.splice(r,1)}updateScaleAttribute(t){this.attributes.forEach(r=>{var n;const i=r.name,a=(n=r.scale)===null||n===void 0?void 0:n.field;(t[i]||a&&t[a])&&(r.needRescale=!0,r.needRemapping=!0,r.needRegenerateVertices=!0)})}updateStyleAttribute(t,r,n){let i=this.getLayerStyleAttribute(t);i||(i=this.registerStyleAttribute(qe(qe({},r),{},{name:t})));const{scale:a}=r;a&&i&&(i.scale=a,i.needRescale=!0,i.needRemapping=!0,i.needRegenerateVertices=!0,n&&n.featureRange&&(i.featureRange=n.featureRange))}getLayerStyleAttributes(){return this.attributes}getLayerStyleAttribute(t){return this.attributes.find(r=>r.name===t)}getLayerAttributeScale(t){var r;const n=this.getLayerStyleAttribute(t),i=n==null||(r=n.scale)===null||r===void 0?void 0:r.scalers;return i&&i[0]?i[0].func:null}updateAttributeByFeatureRange(t,r,n=0,i,a){const o=this.attributes.find(l=>l.name===t);if(o&&o.descriptor){const{descriptor:l}=o,{update:c,buffer:f,size:h=0}=l,p=Mae[f.type||L.FLOAT];if(c){const{elements:v,sizePerElement:g}=this.featureLayout,_=v.slice(n,i);if(!_.length)return;const{offset:E}=_[0],b=E*h*p,S=_.map(({featureIdx:T,vertices:C,normals:M},D)=>{const I=C.length/g,N=[];for(let j=0;j<I;j++){const re=M?M.slice(j*3,j*3+3):[];N.push(...c(r[T],T,C.slice(j*g,j*g+g),D,re))}return N}).flat();o.vertexAttribute.updateBuffer({data:S,offset:b}),a?.emit(`legend:${t}`,a.getLegend(t))}}}createAttributesAndIndices(t,r,n,i){this.featureLayout={sizePerElement:0,elements:[]},r&&(this.triangulation=r);const a=this.attributes.map(E=>(E.resetDescriptor(),E.descriptor));let o=0,l=0;const c=[];let f=3;t.forEach((E,b)=>{const{indices:S,vertices:T,normals:C,size:M,indexes:D,count:I}=this.triangulation(E,n);typeof I=="number"&&(l+=I),S.forEach(j=>{c.push(j+o)}),f=M;const N=T.length/M;this.featureLayout.sizePerElement=f,this.featureLayout.elements.push({featureIdx:b,vertices:T,normals:C,offset:o}),o+=N;for(let j=0;j<N;j++){const re=C?.slice(j*3,j*3+3)||[],Q=T.slice(j*M,j*M+M);let X=0;D&&D[j]!==void 0&&(X=D[j]),a.forEach((R,P)=>{R&&R.update&&R.buffer.data.push(...R.update(E,b,Q,j,re,X))})}});const{createAttribute:h,createBuffer:p,createElements:v}=this.rendererService,g={};a.forEach((E,b)=>{if(E){const{buffer:S,update:T,name:C}=E,M=ml(E,wae),D=h(qe({buffer:p(S)},M));g[E.name||""]=D,this.attributes[b].vertexAttribute=D}});const _=v({data:c,type:L.UNSIGNED_INT,count:c.length});return this.attributesAndIndices={attributes:g,elements:_,count:l},Object.values(this.attributes).filter(E=>E.scale).forEach(E=>{const b=E.name;i?.emit(`legend:${b}`,i.getLegend(b))}),this.attributesAndIndices}createAttributes(t,r){this.featureLayout={sizePerElement:0,elements:[]},r&&(this.triangulation=r);const n=this.attributes.map(f=>(f.resetDescriptor(),f.descriptor));let i=0,a=3;t.forEach((f,h)=>{const{indices:p,vertices:v,normals:g,size:_,indexes:E}=this.triangulation(f);p.forEach(S=>{}),a=_;const b=v.length/_;this.featureLayout.sizePerElement=a,this.featureLayout.elements.push({featureIdx:h,vertices:v,normals:g,offset:i}),i+=b;for(let S=0;S<b;S++){const T=g?.slice(S*3,S*3+3)||[],C=v.slice(S*_,S*_+_);let M=0;E&&E[S]!==void 0&&(M=E[S]),n.forEach((D,I)=>{D&&D.update&&D.buffer.data.push(...D.update(f,h,C,S,T,M))})}});const{createAttribute:o,createBuffer:l}=this.rendererService,c={};return n.forEach((f,h)=>{if(f){const{buffer:p,update:v,name:g}=f,_=ml(f,Nae),E=o(qe({buffer:l(p)},_));c[f.name||""]=E,this.attributes[h].vertexAttribute=E}}),{attributes:c}}clearAllAttributes(){var t;this.attributes.forEach(r=>{r.vertexAttribute&&r.vertexAttribute.destroy()}),(t=this.attributesAndIndices)===null||t===void 0||t.elements.destroy(),this.attributes=[]}}function ej(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(h){try{f(n.next(h))}catch(p){o(p)}}function c(h){try{f(n.throw(h))}catch(p){o(p)}}function f(h){h.done?a(h.value):i(h.value).then(l,c)}f((n=n.apply(e,[])).next())})}function tj(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(f){return function(h){return c([f,h])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){r.label=f[1];break}if(f[0]===6&&r.label<a[1]){r.label=a[1],a=f;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(f);break}a[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(h){f=[6,h],i=0}finally{n=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function aO(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function oO(e,t,r){if(arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}function rj(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var V2={exports:{}},f1={exports:{}},Mg={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(n){return n&&typeof n.length=="number"&&n.length>=0&&n.length%1===0}e.exports=t.default})(Mg,Mg.exports);var Wa={},H2={exports:{}},X2={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(r){return function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];var a=n.pop();return r.call(this,n,a)}},e.exports=t.default})(X2,X2.exports);var ef={};Object.defineProperty(ef,"__esModule",{value:!0});ef.fallback=nj;ef.wrap=ij;var Pae=ef.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,Dae=ef.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,Lae=ef.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function nj(e){setTimeout(e,0)}function ij(e){return function(t){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];return e(function(){return t.apply(void 0,r)})}}var ng;Pae?ng=queueMicrotask:Dae?ng=setImmediate:Lae?ng=process.nextTick:ng=nj;ef.default=ij(ng);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r=X2.exports,n=l(r),i=ef,a=l(i),o=Wa;function l(p){return p&&p.__esModule?p:{default:p}}function c(p){return(0,o.isAsync)(p)?function(){for(var v=[],g=arguments.length;g--;)v[g]=arguments[g];var _=v.pop(),E=p.apply(this,v);return f(E,_)}:(0,n.default)(function(v,g){var _;try{_=p.apply(this,v)}catch(E){return g(E)}if(_&&typeof _.then=="function")return f(_,g);g(null,_)})}function f(p,v){return p.then(function(g){h(v,null,g)},function(g){h(v,g&&g.message?g:new Error(g))})}function h(p,v,g){try{p(v,g)}catch(_){(0,a.default)(function(E){throw E},_)}}e.exports=t.default})(H2,H2.exports);Object.defineProperty(Wa,"__esModule",{value:!0});Wa.isAsyncIterable=Wa.isAsyncGenerator=Wa.isAsync=void 0;var Bae=H2.exports,Fae=Uae(Bae);function Uae(e){return e&&e.__esModule?e:{default:e}}function aj(e){return e[Symbol.toStringTag]==="AsyncFunction"}function kae(e){return e[Symbol.toStringTag]==="AsyncGenerator"}function jae(e){return typeof e[Symbol.asyncIterator]=="function"}function zae(e){if(typeof e!="function")throw new Error("expected a function");return aj(e)?(0,Fae.default)(e):e}Wa.default=zae;Wa.isAsync=aj;Wa.isAsyncGenerator=kae;Wa.isAsyncIterable=jae;var md={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(n,i){if(i===void 0&&(i=n.length),!i)throw new Error("arity is undefined");function a(){for(var o=this,l=[],c=arguments.length;c--;)l[c]=arguments[c];return typeof l[i-1]=="function"?n.apply(this,l):new Promise(function(f,h){l[i-1]=function(p){for(var v=[],g=arguments.length-1;g-- >0;)v[g]=arguments[g+1];if(p)return h(p);f(v.length>1?v:v[0])},n.apply(o,l)})}return a}e.exports=t.default})(md,md.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Mg.exports,n=c(r),i=Wa,a=c(i),o=md.exports,l=c(o);function c(f){return f&&f.__esModule?f:{default:f}}t.default=(0,l.default)(function(f,h,p){var v=(0,n.default)(h)?[]:{};f(h,function(g,_,E){(0,a.default)(g)(function(b){for(var S,T=[],C=arguments.length-1;C-- >0;)T[C]=arguments[C+1];T.length<2&&(S=T,T=S[0]),v[_]=T,E(b)})},function(g){return p(g,v)})},3),e.exports=t.default})(f1,f1.exports);var q2={exports:{}},d1={exports:{}},G2={exports:{}},Ig={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(n){function i(){for(var a=[],o=arguments.length;o--;)a[o]=arguments[o];if(n!==null){var l=n;n=null,l.apply(this,a)}}return Object.assign(i,n),i}e.exports=t.default})(Ig,Ig.exports);var W2={exports:{}},$2={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(r){return r[Symbol.iterator]&&r[Symbol.iterator]()},e.exports=t.default})($2,$2.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;var r=Mg.exports,n=o(r),i=$2.exports,a=o(i);function o(p){return p&&p.__esModule?p:{default:p}}function l(p){var v=-1,g=p.length;return function(){return++v<g?{value:p[v],key:v}:null}}function c(p){var v=-1;return function(){var _=p.next();return _.done?null:(v++,{value:_.value,key:v})}}function f(p){var v=p?Object.keys(p):[],g=-1,_=v.length;return function E(){var b=v[++g];return b==="__proto__"?E():g<_?{value:p[b],key:b}:null}}function h(p){if((0,n.default)(p))return l(p);var v=(0,a.default)(p);return v?c(v):f(p)}e.exports=t.default})(W2,W2.exports);var Pg={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(n){return function(){for(var i=[],a=arguments.length;a--;)i[a]=arguments[a];if(n===null)throw new Error("Callback was already called.");var o=n;n=null,o.apply(this,i)}}e.exports=t.default})(Pg,Pg.exports);var Y2={exports:{}},Dg={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=r,e.exports=t.default})(Dg,Dg.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var r=Dg.exports,n=i(r);function i(o){return o&&o.__esModule?o:{default:o}}function a(o,l,c,f){var h=!1,p=!1,v=!1,g=0,_=0;function E(){g>=l||v||h||(v=!0,o.next().then(function(T){var C=T.value,M=T.done;if(!(p||h)){if(v=!1,M){h=!0,g<=0&&f(null);return}g++,c(C,_,b),_++,E()}}).catch(S))}function b(T,C){if(g-=1,!p){if(T)return S(T);if(T===!1){h=!0,p=!0;return}if(C===n.default||h&&g<=0)return h=!0,f(null);E()}}function S(T){p||(v=!1,h=!0,f(T))}E()}e.exports=t.default})(Y2,Y2.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Ig.exports,n=g(r),i=W2.exports,a=g(i),o=Pg.exports,l=g(o),c=Wa,f=Y2.exports,h=g(f),p=Dg.exports,v=g(p);function g(_){return _&&_.__esModule?_:{default:_}}t.default=function(_){return function(E,b,S){if(S=(0,n.default)(S),_<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!E)return S(null);if((0,c.isAsyncGenerator)(E))return(0,h.default)(E,_,b,S);if((0,c.isAsyncIterable)(E))return(0,h.default)(E[Symbol.asyncIterator](),_,b,S);var T=(0,a.default)(E),C=!1,M=!1,D=0,I=!1;function N(re,Q){if(!M)if(D-=1,re)C=!0,S(re);else if(re===!1)C=!0,M=!0;else{if(Q===v.default||C&&D<=0)return C=!0,S(null);I||j()}}function j(){for(I=!0;D<_&&!C;){var re=T();if(re===null){C=!0,D<=0&&S(null);return}D+=1,b(re.value,re.key,(0,l.default)(N))}I=!1}j()}},e.exports=t.default})(G2,G2.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=G2.exports,n=c(r),i=Wa,a=c(i),o=md.exports,l=c(o);function c(h){return h&&h.__esModule?h:{default:h}}function f(h,p,v,g){return(0,n.default)(p)(h,(0,a.default)(v),g)}t.default=(0,l.default)(f,4),e.exports=t.default})(d1,d1.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=d1.exports,n=o(r),i=md.exports,a=o(i);function o(c){return c&&c.__esModule?c:{default:c}}function l(c,f,h){return(0,n.default)(c,1,f,h)}t.default=(0,a.default)(l,3),e.exports=t.default})(q2,q2.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var r=f1.exports,n=o(r),i=q2.exports,a=o(i);function o(c){return c&&c.__esModule?c:{default:c}}function l(c,f){return(0,n.default)(a.default,c,f)}e.exports=t.default})(V2,V2.exports);var TE=rj(V2.exports),tl=(function(){function e(){this.args=[],this.tasks=[]}return e.prototype.call=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];return this.args=r,TE(this.tasks)},e.prototype.tap=function(t,r){var n=this;this.tasks.push(function(i){r.apply(void 0,oO([],aO(n.args),!1)),i(null,t)})},e})(),hL={exports:{}},Z2={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Mg.exports,n=b(r),i=Dg.exports,a=b(i),o=d1.exports,l=b(o),c=Ig.exports,f=b(c),h=Pg.exports,p=b(h),v=Wa,g=b(v),_=md.exports,E=b(_);function b(M){return M&&M.__esModule?M:{default:M}}function S(M,D,I){I=(0,f.default)(I);var N=0,j=0,re=M.length,Q=!1;re===0&&I(null);function X(R,P){R===!1&&(Q=!0),Q!==!0&&(R?I(R):(++j===re||P===a.default)&&I(null))}for(;N<re;N++)D(M[N],N,(0,p.default)(X))}function T(M,D,I){return(0,l.default)(M,1/0,D,I)}function C(M,D,I){var N=(0,n.default)(M)?S:T;return N(M,(0,g.default)(D),I)}t.default=(0,E.default)(C,3),e.exports=t.default})(Z2,Z2.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var r=Z2.exports,n=o(r),i=f1.exports,a=o(i);function o(c){return c&&c.__esModule?c:{default:c}}function l(c,f){return(0,a.default)(n.default,c,f)}e.exports=t.default})(hL,hL.exports);var K2={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Ig.exports,n=h(r),i=Pg.exports,a=h(i),o=Wa,l=h(o),c=md.exports,f=h(c);function h(v){return v&&v.__esModule?v:{default:v}}function p(v,g){if(g=(0,n.default)(g),!Array.isArray(v))return g(new Error("First argument to waterfall must be an array of functions"));if(!v.length)return g();var _=0;function E(S){var T=(0,l.default)(v[_++]);T.apply(void 0,S.concat([(0,a.default)(b)]))}function b(S){for(var T=[],C=arguments.length-1;C-- >0;)T[C]=arguments[C+1];if(S!==!1){if(S||_===v.length)return g.apply(void 0,[S].concat(T));E(T)}}E([])}t.default=(0,f.default)(p),e.exports=t.default})(K2,K2.exports);var Vae=rj(K2.exports),pL=(function(){function e(){this.tasks=[]}return e.prototype.call=function(){return TE(this.tasks)},e.prototype.tap=function(t,r){this.tasks.push(function(n){var i=r();n(i,t)})},e})(),Hae=(function(){function e(){this.args=[],this.tasks=[]}return e.prototype.promise=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];return this.args=r,TE(this.tasks)},e.prototype.tapPromise=function(t,r){var n=this;this.tasks.push(function(i){return ej(n,void 0,void 0,function(){return tj(this,function(a){switch(a.label){case 0:return[4,r.apply(void 0,oO([],aO(this.args),!1))];case 1:return a.sent(),i(null,t),[2]}})})})},e})(),Xae=(function(){function e(){this.args=[],this.tasks=[]}return e.prototype.promise=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];return this.args=r,TE(this.tasks)},e.prototype.tapPromise=function(t,r){var n=this;this.tasks.push(function(i){return ej(n,void 0,void 0,function(){var a;return tj(this,function(o){switch(o.label){case 0:return[4,r.apply(void 0,oO([],aO(this.args),!1))];case 1:return a=o.sent(),i(a,t),[2]}})})})},e})(),qae=(function(){function e(){this.tasks=[]}return e.prototype.promise=function(){return Vae(this.tasks)},e.prototype.tapPromise=function(t,r){this.tasks.length===0?this.tasks.push(function(n){r().then(function(i){n(null,i)})}):this.tasks.push(function(n,i){r(n).then(function(a){i(null,a)})})},e})(),gR={exports:{}},mL;function oj(){if(mL)return gR.exports;mL=1;var e=gR.exports={};return e.forEach=function(t,r){for(var n=0;n<t.length;n++){var i=r(t[n]);if(i)return i}},gR.exports}var _R,vL;function Gae(){return vL||(vL=1,_R=function(e){var t=e.stateHandler.getState;function r(o){var l=t(o);return l&&!!l.isDetectable}function n(o){t(o).isDetectable=!0}function i(o){return!!t(o).busy}function a(o,l){t(o).busy=!!l}return{isDetectable:r,markAsDetectable:n,isBusy:i,markBusy:a}}),_R}var yR,gL;function Wae(){return gL||(gL=1,yR=function(e){var t={};function r(o){var l=e.get(o);return l===void 0?[]:t[l]||[]}function n(o,l){var c=e.get(o);t[c]||(t[c]=[]),t[c].push(l)}function i(o,l){for(var c=r(o),f=0,h=c.length;f<h;++f)if(c[f]===l){c.splice(f,1);break}}function a(o){var l=r(o);l&&(l.length=0)}return{get:r,add:n,removeListener:i,removeAllListeners:a}}),yR}var ER,_L;function $ae(){return _L||(_L=1,ER=function(){var e=1;function t(){return e++}return{generate:t}}),ER}var bR,yL;function Yae(){return yL||(yL=1,bR=function(e){var t=e.idGenerator,r=e.stateHandler.getState;function n(a){var o=r(a);return o&&o.id!==void 0?o.id:null}function i(a){var o=r(a);if(!o)throw new Error("setId required the element to have a resize detection state.");var l=t.generate();return o.id=l,l}return{get:n,set:i}}),bR}var xR,EL;function Zae(){return EL||(EL=1,xR=function(e){function t(){}var r={log:t,warn:t,error:t};if(!e&&window.console){var n=function(i,a){i[a]=function(){var l=console[a];if(l.apply)l.apply(console,arguments);else for(var c=0;c<arguments.length;c++)l(arguments[c])}};n(r,"log"),n(r,"warn"),n(r,"error")}return r}),xR}var SR={exports:{}},bL;function sj(){if(bL)return SR.exports;bL=1;var e=SR.exports={};return e.isIE=function(t){function r(){var i=navigator.userAgent.toLowerCase();return i.indexOf("msie")!==-1||i.indexOf("trident")!==-1||i.indexOf(" edge/")!==-1}if(!r())return!1;if(!t)return!0;var n=(function(){var i,a=3,o=document.createElement("div"),l=o.getElementsByTagName("i");do o.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->";while(l[0]);return a>4?a:i})();return t===n},e.isLegacyOpera=function(){return!!window.opera},SR.exports}var TR={exports:{}},xL;function Kae(){if(xL)return TR.exports;xL=1;var e=TR.exports={};e.getOption=t;function t(r,n,i){var a=r[n];return a==null&&i!==void 0?i:a}return TR.exports}var AR,SL;function Qae(){if(SL)return AR;SL=1;var e=Kae();AR=function(n){n=n||{};var i=n.reporter,a=e.getOption(n,"async",!0),o=e.getOption(n,"auto",!0);o&&!a&&(i&&i.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),a=!0);var l=t(),c,f=!1;function h(b,S){!f&&o&&a&&l.size()===0&&g(),l.add(b,S)}function p(){for(f=!0;l.size();){var b=l;l=t(),b.process()}f=!1}function v(b){f||(b===void 0&&(b=a),c&&(_(c),c=null),b?g():p())}function g(){c=E(p)}function _(b){var S=clearTimeout;return S(b)}function E(b){var S=function(T){return setTimeout(T,0)};return S(b)}return{add:h,force:v}};function t(){var r={},n=0,i=0,a=0;function o(f,h){h||(h=f,f=0),f>i?i=f:f<a&&(a=f),r[f]||(r[f]=[]),r[f].push(h),n++}function l(){for(var f=a;f<=i;f++)for(var h=r[f],p=0;p<h.length;p++){var v=h[p];v()}}function c(){return n}return{add:o,process:l,size:c}}return AR}var RR,TL;function Jae(){if(TL)return RR;TL=1;var e="_erd";function t(i){return i[e]={},r(i)}function r(i){return i[e]}function n(i){delete i[e]}return RR={initState:t,getState:r,cleanState:n},RR}var CR,AL;function eoe(){if(AL)return CR;AL=1;var e=sj();return CR=function(t){t=t||{};var r=t.reporter,n=t.batchProcessor,i=t.stateHandler.getState;if(!r)throw new Error("Missing required dependency: reporter.");function a(h,p){function v(){p(h)}if(e.isIE(8))i(h).object={proxy:v},h.attachEvent("onresize",v);else{var g=c(h);if(!g)throw new Error("Element is not detectable by this strategy.");g.contentDocument.defaultView.addEventListener("resize",v)}}function o(h){var p=t.important?" !important; ":"; ";return(h.join(p)+p).trim()}function l(h,p,v){v||(v=p,p=h,h=null),h=h||{},h.debug;function g(_,E){var b=o(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),S=!1,T=window.getComputedStyle(_),C=_.offsetWidth,M=_.offsetHeight;i(_).startSize={width:C,height:M};function D(){function I(){if(T.position==="static"){_.style.setProperty("position","relative",h.important?"important":"");var re=function(Q,X,R,P){function V(w){return w.replace(/[^-\d\.]/g,"")}var le=R[P];le!=="auto"&&V(le)!=="0"&&(Q.warn("An element that is positioned static has style."+P+"="+le+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+P+" will be set to 0. Element: ",X),X.style.setProperty(P,"0",h.important?"important":""))};re(r,_,T,"top"),re(r,_,T,"right"),re(r,_,T,"bottom"),re(r,_,T,"left")}}function N(){S||I();function re(X,R){if(!X.contentDocument){var P=i(X);P.checkForObjectDocumentTimeoutId&&window.clearTimeout(P.checkForObjectDocumentTimeoutId),P.checkForObjectDocumentTimeoutId=setTimeout(function(){P.checkForObjectDocumentTimeoutId=0,re(X,R)},100);return}R(X.contentDocument)}var Q=this;re(Q,function(R){E(_)})}T.position!==""&&(I(),S=!0);var j=document.createElement("object");j.style.cssText=b,j.tabIndex=-1,j.type="text/html",j.setAttribute("aria-hidden","true"),j.onload=N,e.isIE()||(j.data="about:blank"),i(_)&&(_.appendChild(j),i(_).object=j,e.isIE()&&(j.data="about:blank"))}n?n.add(D):D()}e.isIE(8)?v(p):g(p,v)}function c(h){return i(h).object}function f(h){if(i(h)){var p=c(h);p&&(e.isIE(8)?h.detachEvent("onresize",p.proxy):h.removeChild(p),i(h).checkForObjectDocumentTimeoutId&&window.clearTimeout(i(h).checkForObjectDocumentTimeoutId),delete i(h).object)}}return{makeDetectable:l,addListener:a,uninstall:f}},CR}var OR,RL;function toe(){if(RL)return OR;RL=1;var e=oj().forEach;return OR=function(t){t=t||{};var r=t.reporter,n=t.batchProcessor,i=t.stateHandler.getState;t.stateHandler.hasState;var a=t.idHandler;if(!n)throw new Error("Missing required dependency: batchProcessor");if(!r)throw new Error("Missing required dependency: reporter.");var o=p(),l="erd_scroll_detection_scrollbar_style",c="erd_scroll_detection_container";function f(D){v(D,l,c)}f(window.document);function h(D){var I=t.important?" !important; ":"; ";return(D.join(I)+I).trim()}function p(){var D=500,I=500,N=document.createElement("div");N.style.cssText=h(["position: absolute","width: "+D*2+"px","height: "+I*2+"px","visibility: hidden","margin: 0","padding: 0"]);var j=document.createElement("div");j.style.cssText=h(["position: absolute","width: "+D+"px","height: "+I+"px","overflow: scroll","visibility: none","top: "+-D*3+"px","left: "+-I*3+"px","visibility: hidden","margin: 0","padding: 0"]),j.appendChild(N),document.body.insertBefore(j,document.body.firstChild);var re=D-j.clientWidth,Q=I-j.clientHeight;return document.body.removeChild(j),{width:re,height:Q}}function v(D,I,N){function j(R,P){P=P||function(le){D.head.appendChild(le)};var V=D.createElement("style");return V.innerHTML=R,V.id=I,P(V),V}if(!D.getElementById(I)){var re=N+"_animation",Q=N+"_animation_active",X=`/* Created by the element-resize-detector library. */
`;X+="."+N+" > div::-webkit-scrollbar { "+h(["display: none"])+` }

`,X+="."+Q+" { "+h(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+re,"animation-name: "+re])+` }
`,X+="@-webkit-keyframes "+re+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,X+="@keyframes "+re+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",j(X)}}function g(D){D.className+=" "+c+"_animation_active"}function _(D,I,N){if(D.addEventListener)D.addEventListener(I,N);else if(D.attachEvent)D.attachEvent("on"+I,N);else return r.error("[scroll] Don't know how to add event listeners.")}function E(D,I,N){if(D.removeEventListener)D.removeEventListener(I,N);else if(D.detachEvent)D.detachEvent("on"+I,N);else return r.error("[scroll] Don't know how to remove event listeners.")}function b(D){return i(D).container.childNodes[0].childNodes[0].childNodes[0]}function S(D){return i(D).container.childNodes[0].childNodes[0].childNodes[1]}function T(D,I){var N=i(D).listeners;if(!N.push)throw new Error("Cannot add listener to an element that is not detectable.");i(D).listeners.push(I)}function C(D,I,N){N||(N=I,I=D,D=null),D=D||{};function j(){if(D.debug){var Ee=Array.prototype.slice.call(arguments);if(Ee.unshift(a.get(I),"Scroll: "),r.log.apply)r.log.apply(null,Ee);else for(var st=0;st<Ee.length;st++)r.log(Ee[st])}}function re(Ee){function st(Oe){var $t=Oe.getRootNode&&Oe.getRootNode().contains(Oe);return Oe===Oe.ownerDocument.body||Oe.ownerDocument.body.contains(Oe)||$t}return!st(Ee)||window.getComputedStyle(Ee)===null}function Q(Ee){var st=i(Ee).container.childNodes[0],Oe=window.getComputedStyle(st);return!Oe.width||Oe.width.indexOf("px")===-1}function X(){var Ee=window.getComputedStyle(I),st={};return st.position=Ee.position,st.width=I.offsetWidth,st.height=I.offsetHeight,st.top=Ee.top,st.right=Ee.right,st.bottom=Ee.bottom,st.left=Ee.left,st.widthCSS=Ee.width,st.heightCSS=Ee.height,st}function R(){var Ee=X();i(I).startSize={width:Ee.width,height:Ee.height},j("Element start size",i(I).startSize)}function P(){i(I).listeners=[]}function V(){if(j("storeStyle invoked."),!i(I)){j("Aborting because element has been uninstalled");return}var Ee=X();i(I).style=Ee}function le(Ee,st,Oe){i(Ee).lastWidth=st,i(Ee).lastHeight=Oe}function w(Ee){return b(Ee).childNodes[0]}function z(){return 2*o.width+1}function H(){return 2*o.height+1}function ee(Ee){return Ee+10+z()}function oe(Ee){return Ee+10+H()}function ge(Ee){return Ee*2+z()}function ye(Ee){return Ee*2+H()}function Pe(Ee,st,Oe){var $t=b(Ee),qt=S(Ee),xt=ee(st),Dt=oe(Oe),It=ge(st),er=ye(Oe);$t.scrollLeft=xt,$t.scrollTop=Dt,qt.scrollLeft=It,qt.scrollTop=er}function tt(){var Ee=i(I).container;if(!Ee){Ee=document.createElement("div"),Ee.className=c,Ee.style.cssText=h(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),i(I).container=Ee,g(Ee),I.appendChild(Ee);var st=function(){i(I).onRendered&&i(I).onRendered()};_(Ee,"animationstart",st),i(I).onAnimationStart=st}return Ee}function We(){function Ee(){var hr=i(I).style;if(hr.position==="static"){I.style.setProperty("position","relative",D.important?"important":"");var jn=function(Sn,fi,en,yn){function Ji(Ka){return Ka.replace(/[^-\d\.]/g,"")}var pa=en[yn];pa!=="auto"&&Ji(pa)!=="0"&&(Sn.warn("An element that is positioned static has style."+yn+"="+pa+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+yn+" will be set to 0. Element: ",fi),fi.style[yn]=0)};jn(r,I,hr,"top"),jn(r,I,hr,"right"),jn(r,I,hr,"bottom"),jn(r,I,hr,"left")}}function st(hr,jn,Sn,fi){return hr=hr?hr+"px":"0",jn=jn?jn+"px":"0",Sn=Sn?Sn+"px":"0",fi=fi?fi+"px":"0",["left: "+hr,"top: "+jn,"right: "+fi,"bottom: "+Sn]}if(j("Injecting elements"),!i(I)){j("Aborting because element has been uninstalled");return}Ee();var Oe=i(I).container;Oe||(Oe=tt());var $t=o.width,qt=o.height,xt=h(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),Dt=h(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(st(-(1+$t),-(1+qt),-qt,-$t))),It=h(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),er=h(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),kr=h(["position: absolute","left: 0","top: 0"]),ue=h(["position: absolute","width: 200%","height: 200%"]),xe=document.createElement("div"),Ue=document.createElement("div"),k=document.createElement("div"),vt=document.createElement("div"),pt=document.createElement("div"),Ut=document.createElement("div");xe.dir="ltr",xe.style.cssText=xt,xe.className=c,Ue.className=c,Ue.style.cssText=Dt,k.style.cssText=It,vt.style.cssText=kr,pt.style.cssText=er,Ut.style.cssText=ue,k.appendChild(vt),pt.appendChild(Ut),Ue.appendChild(k),Ue.appendChild(pt),xe.appendChild(Ue),Oe.appendChild(xe);function lr(){var hr=i(I);hr&&hr.onExpand?hr.onExpand():j("Aborting expand scroll handler: element has been uninstalled")}function dr(){var hr=i(I);hr&&hr.onShrink?hr.onShrink():j("Aborting shrink scroll handler: element has been uninstalled")}_(k,"scroll",lr),_(pt,"scroll",dr),i(I).onExpandScroll=lr,i(I).onShrinkScroll=dr}function Pt(){function Ee(It,er,kr){var ue=w(It),xe=ee(er),Ue=oe(kr);ue.style.setProperty("width",xe+"px",D.important?"important":""),ue.style.setProperty("height",Ue+"px",D.important?"important":"")}function st(It){var er=I.offsetWidth,kr=I.offsetHeight,ue=er!==i(I).lastWidth||kr!==i(I).lastHeight;j("Storing current size",er,kr),le(I,er,kr),n.add(0,function(){if(ue){if(!i(I)){j("Aborting because element has been uninstalled");return}if(!Oe()){j("Aborting because element container has not been initialized");return}if(D.debug){var Ue=I.offsetWidth,k=I.offsetHeight;(Ue!==er||k!==kr)&&r.warn(a.get(I),"Scroll: Size changed before updating detector elements.")}Ee(I,er,kr)}}),n.add(1,function(){if(!i(I)){j("Aborting because element has been uninstalled");return}if(!Oe()){j("Aborting because element container has not been initialized");return}Pe(I,er,kr)}),ue&&It&&n.add(2,function(){if(!i(I)){j("Aborting because element has been uninstalled");return}if(!Oe()){j("Aborting because element container has not been initialized");return}It()})}function Oe(){return!!i(I).container}function $t(){function It(){return i(I).lastNotifiedWidth===void 0}j("notifyListenersIfNeeded invoked");var er=i(I);if(It()&&er.lastWidth===er.startSize.width&&er.lastHeight===er.startSize.height)return j("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(er.lastWidth===er.lastNotifiedWidth&&er.lastHeight===er.lastNotifiedHeight)return j("Not notifying: Size already notified");j("Current size not notified, notifying..."),er.lastNotifiedWidth=er.lastWidth,er.lastNotifiedHeight=er.lastHeight,e(i(I).listeners,function(kr){kr(I)})}function qt(){if(j("startanimation triggered."),Q(I)){j("Ignoring since element is still unrendered...");return}j("Element rendered.");var It=b(I),er=S(I);(It.scrollLeft===0||It.scrollTop===0||er.scrollLeft===0||er.scrollTop===0)&&(j("Scrollbars out of sync. Updating detector elements..."),st($t))}function xt(){if(j("Scroll detected."),Q(I)){j("Scroll event fired while unrendered. Ignoring...");return}st($t)}if(j("registerListenersAndPositionElements invoked."),!i(I)){j("Aborting because element has been uninstalled");return}i(I).onRendered=qt,i(I).onExpand=xt,i(I).onShrink=xt;var Dt=i(I).style;Ee(I,Dt.width,Dt.height)}function $e(){if(j("finalizeDomMutation invoked."),!i(I)){j("Aborting because element has been uninstalled");return}var Ee=i(I).style;le(I,Ee.width,Ee.height),Pe(I,Ee.width,Ee.height)}function Tt(){N(I)}function je(){j("Installing..."),P(),R(),n.add(0,V),n.add(1,We),n.add(2,Pt),n.add(3,$e),n.add(4,Tt)}j("Making detectable..."),re(I)?(j("Element is detached"),tt(),j("Waiting until element is attached..."),i(I).onRendered=function(){j("Element is now attached"),je()}):je()}function M(D){var I=i(D);I&&(I.onExpandScroll&&E(b(D),"scroll",I.onExpandScroll),I.onShrinkScroll&&E(S(D),"scroll",I.onShrinkScroll),I.onAnimationStart&&E(I.container,"animationstart",I.onAnimationStart),I.container&&D.removeChild(I.container))}return{makeDetectable:C,addListener:T,uninstall:M,initDocument:f}},OR}var wR,CL;function roe(){if(CL)return wR;CL=1;var e=oj().forEach,t=Gae(),r=Wae(),n=$ae(),i=Yae(),a=Zae(),o=sj(),l=Qae(),c=Jae(),f=eoe(),h=toe();function p(E){return Array.isArray(E)||E.length!==void 0}function v(E){if(Array.isArray(E))return E;var b=[];return e(E,function(S){b.push(S)}),b}function g(E){return E&&E.nodeType===1}wR=function(E){E=E||{};var b;if(E.idHandler)b={get:function(z){return E.idHandler.get(z,!0)},set:E.idHandler.set};else{var S=n(),T=i({idGenerator:S,stateHandler:c});b=T}var C=E.reporter;if(!C){var M=C===!1;C=a(M)}var D=_(E,"batchProcessor",l({reporter:C})),I={};I.callOnAdd=!!_(E,"callOnAdd",!0),I.debug=!!_(E,"debug",!1);var N=r(b),j=t({stateHandler:c}),re,Q=_(E,"strategy","object"),X=_(E,"important",!1),R={reporter:C,batchProcessor:D,stateHandler:c,idHandler:b,important:X};if(Q==="scroll"&&(o.isLegacyOpera()?(C.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),Q="object"):o.isIE(9)&&(C.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),Q="object")),Q==="scroll")re=h(R);else if(Q==="object")re=f(R);else throw new Error("Invalid strategy name: "+Q);var P={};function V(z,H,ee){function oe(Pt){var $e=N.get(Pt);e($e,function(je){je(Pt)})}function ge(Pt,$e,Tt){N.add($e,Tt),Pt&&Tt($e)}if(ee||(ee=H,H=z,z={}),!H)throw new Error("At least one element required.");if(!ee)throw new Error("Listener required.");if(g(H))H=[H];else if(p(H))H=v(H);else return C.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var ye=0,Pe=_(z,"callOnAdd",I.callOnAdd),tt=_(z,"onReady",function(){}),We=_(z,"debug",I.debug);e(H,function($e){c.getState($e)||(c.initState($e),b.set($e));var Tt=b.get($e);if(We&&C.log("Attaching listener to element",Tt,$e),!j.isDetectable($e)){if(We&&C.log(Tt,"Not detectable."),j.isBusy($e)){We&&C.log(Tt,"System busy making it detectable"),ge(Pe,$e,ee),P[Tt]=P[Tt]||[],P[Tt].push(function(){ye++,ye===H.length&&tt()});return}return We&&C.log(Tt,"Making detectable..."),j.markBusy($e,!0),re.makeDetectable({debug:We,important:X},$e,function(Ee){if(We&&C.log(Tt,"onElementDetectable"),c.getState(Ee)){j.markAsDetectable(Ee),j.markBusy(Ee,!1),re.addListener(Ee,oe),ge(Pe,Ee,ee);var st=c.getState(Ee);if(st&&st.startSize){var Oe=Ee.offsetWidth,$t=Ee.offsetHeight;(st.startSize.width!==Oe||st.startSize.height!==$t)&&oe(Ee)}P[Tt]&&e(P[Tt],function(qt){qt()})}else We&&C.log(Tt,"Element uninstalled before being detectable.");delete P[Tt],ye++,ye===H.length&&tt()})}We&&C.log(Tt,"Already detecable, adding listener."),ge(Pe,$e,ee),ye++}),ye===H.length&&tt()}function le(z){if(!z)return C.error("At least one element is required.");if(g(z))z=[z];else if(p(z))z=v(z);else return C.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");e(z,function(H){N.removeAllListeners(H),re.uninstall(H),c.cleanState(H)})}function w(z){re.initDocument&&re.initDocument(z)}return{listenTo:V,removeListener:N.removeListener,removeAllListeners:N.removeAllListeners,uninstall:le,initDocument:w}};function _(E,b,S){var T=E[b];return T==null&&S!==void 0?S:T}return wR}var noe=roe();const ioe=Kr(noe);let aoe=class extends Za.EventEmitter{get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get controlService(){return this.container.controlService}get configService(){return this.container.globalConfigService}get map(){return this.container.mapService}get coordinateSystemService(){return this.container.coordinateSystemService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get cameraService(){return this.container.cameraService}get interactionService(){return this.container.interactionService}get pickingService(){return this.container.pickingService}get shaderModuleService(){return this.container.shaderModuleService}get markerService(){return this.container.markerService}get popupService(){return this.container.popupService}constructor(t){super(),F(this,"destroyed",!1),F(this,"loaded",!1),F(this,"id",void 0),F(this,"inited",!1),F(this,"rendering",!1),F(this,"$container",void 0),F(this,"canvas",void 0),F(this,"markerContainer",void 0),F(this,"resizeDetector",void 0),F(this,"hooks",void 0),F(this,"handleWindowResized",()=>{this.emit("resize"),this.$container&&(this.initContainer(),this.coordinateSystemService.needRefresh=!0,this.render())}),F(this,"handleMapCameraChanged",r=>{this.cameraService.update(r),this.render()}),this.container=t,this.hooks={init:new Hae},this.id=t.id}init(t){var r=this;this.configService.setSceneConfig(this.id,t),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",()=>this.render()),this.fontService.init(),this.hooks.init.tapPromise("initMap",et(function*(){r.debugService.log("map.mapInitStart",{type:r.map.version}),yield new Promise(n=>{r.map.onCameraChanged(i=>{r.cameraService.init(),r.cameraService.update(i),n()}),r.map.init()}),r.map.onCameraChanged(r.handleMapCameraChanged),r.map.addMarkerContainer(),r.markerService.addMarkers(),r.markerService.addMarkerLayers(),r.popupService.initPopup(),r.interactionService.init(),r.interactionService.on(za.Drag,r.addSceneEvent.bind(r))})),this.hooks.init.tapPromise("initRenderer",et(function*(){var n;const i=((n=r.map)===null||n===void 0?void 0:n.getOverlayContainer())||void 0;if(i?r.$container=i:r.$container=bae(r.configService.getSceneConfig(r.id).id||""),r.$container){const{canvas:o}=t;if(r.canvas=o||ui("canvas","",r.$container),r.setCanvas(),yield r.rendererService.init(r.canvas,r.configService.getSceneConfig(r.id),t.gl),r.registerContextLost(),r.initContainer(),r.resizeDetector=ioe({strategy:"scroll"}),r.resizeDetector.listenTo(r.$container,r.handleWindowResized),window.matchMedia){var a;(a=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||a===void 0||a.addListener(r.handleWindowResized.bind("screen"))}}else console.error("容器 id 不存在");r.pickingService.init(r.id)})),this.render()}registerContextLost(){const t=this.rendererService.getCanvas();t&&t.addEventListener("webglcontextlost",()=>this.emit("webglcontextlost"))}addLayer(t){this.layerService.sceneService=this,this.layerService.add(t)}addMask(t){this.layerService.sceneService=this,this.layerService.addMask(t)}render(){var t=this;return et(function*(){t.rendering||t.destroyed||(t.rendering=!0,t.inited?(yield t.layerService.initLayers(),yield t.layerService.renderLayers()):(yield t.hooks.init.promise(),t.destroyed&&t.destroy(),yield t.layerService.initLayers(),t.layerService.renderLayers(),t.controlService.addControls(),t.loaded=!0,t.emit("loaded"),t.inited=!0),t.rendering=!1)})()}addFontFace(t,r){this.fontService.addFontFace(t,r)}getSceneContainer(){return this.$container}exportPng(t){var r=this;return et(function*(){var n;const i=(n=r.$container)===null||n===void 0?void 0:n.getElementsByTagName("canvas")[0];return yield r.render(),t==="jpg"?i?.toDataURL("image/jpeg"):i?.toDataURL("image/png")})()}getSceneConfig(){return this.configService.getSceneConfig(this.id)}getPointSizeRange(){return this.rendererService.getPointSizeRange()}addMarkerContainer(){const t=this.$container.parentElement;t!==null&&(this.markerContainer=ui("div","l7-marker-container",t))}getMarkerContainer(){return this.markerContainer}destroy(){var t;if(!this.inited){this.destroyed=!0;return}this.resizeDetector.removeListener(this.$container,this.handleWindowResized),this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(()=>{var r;(r=this.$container)===null||r===void 0||r.removeChild(this.canvas),this.canvas=null,this.rendererService.destroy()}),(t=this.$container)===null||t===void 0||(t=t.parentNode)===null||t===void 0||t.removeChild(this.$container),this.emit("destroy")}initContainer(){var t,r;const n=ja,i=((t=this.$container)===null||t===void 0?void 0:t.clientWidth)||400,a=((r=this.$container)===null||r===void 0?void 0:r.clientHeight)||300,o=this.canvas;o&&(o.width=i*n,o.height=a*n),this.rendererService.viewport({x:0,y:0,width:n*i,height:n*a})}setCanvas(){var t,r;const n=ja,i=((t=this.$container)===null||t===void 0?void 0:t.clientWidth)||400,a=((r=this.$container)===null||r===void 0?void 0:r.clientHeight)||300,o=this.canvas;o.width=i*n,o.height=a*n,o.style.width="100%",o.style.height="100%"}addSceneEvent(t){this.emit(t.type,t)}};const{uniq:ooe}=Un,OL="#define PI 3.14159265359",soe=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,loe=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,uoe=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}


vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  return weight;
}
`,coe=`
in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  float activeType = v_PickingResult.a;
  if(activeType > 0.0) {
    vec4 highLightColor =  activeType > 1.5 ? u_SelectColor : u_HighlightColor;
    highLightColor = highLightColor * COLOR_SCALE;
    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));
    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  }
  else {
    return color;
  }

  
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // 过滤多余的 shader 计算
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // 暂时去除 直接取消计算在选中时拖拽地图会有问题
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // 过滤多余的 shader 计算
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // 暂时去除 直接取消计算在选中时拖拽地图会有问题
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,foe=`layout(location = ATTRIBUTE_LOCATION_PICKING_COLOR) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

// 判断当前点是否已经被 select 选中
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  if(u_PickingStage == PICKING_HIGHLIGHT) {
    if(isVertexPicked(pickingColor)) {
       v_PickingResult = vec4(pickingColor.rgb * COLOR_SCALE,HIGHLIGHT);
       return;
    }
    if(isVertexSelected(pickingColor)) {
     v_PickingResult = vec4(u_CurrentSelectedId.rgb * COLOR_SCALE,SELECT);
      return;
    }

  } else {
      v_PickingResult= vec4(pickingColor.rgb * COLOR_SCALE,NORMAL);
      return;
  }

  // // v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && (isVertexPicked(pickingColor) || isVertexPicked(u_CurrentSelectedId)));

  // // Stores the picking color so that the fragment shader can render it during picking
  // v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,wL=`layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_activeMix;
};`,doe=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // 经纬度 => 平面坐标
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // 平面坐标 => 经纬度
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,NL=`#define TILE_SIZE (512.0)
#define PI (3.1415926536)
#define WORLD_SCALE (TILE_SIZE / (PI * 2.0))
#define EARTH_CIRCUMFERENCE (40.03e6)

#define COORDINATE_SYSTEM_LNGLAT (1.0) // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET (2.0) // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE (3.0)
#define COORDINATE_SYSTEM_IDENTITY (4.0)
#define COORDINATE_SYSTEM_METER_OFFSET (5.0)

#pragma include "scene_uniforms"

const vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(radians(x) + PI, PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5)));
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}

// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1.0, 1.0);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
      u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01 ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}

vec4 project_position(vec4 position, vec2 position64xyLow) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(
      vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w)
    );
  }
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
    u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01
  ) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  return position;
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_XY_LOW);
}

vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

// 适配纹理贴图的等像素大小
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance;
  }

  return pixel * 2.0 * u_FocalDistance;
}

// 在不论什么底图下需要统一处理的时候使用
float project_float_pixel(float pixel) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox 坐标系下，为了和 Web 墨卡托坐标系统一，zoom 默认减1
    return pixel * pow(2.0, 19.0 - u_Zoom) * u_FocalDistance;
  }

  return pixel * u_FocalDistance;
}

// Project meter into the unit of pixel which used in the camera world space
float project_float_meter(float meter) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Since the zoom level uniform is updated by mapservice and it's alread been subtracted by 1
    // Not sure if we are supposed to do that again
    return meter;
  } else {
    return project_float_pixel(meter);
  }

  // TODO: change the following code to make adaptations for amap
  // return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;

}

float project_pixel(float pixel) {
  return pixel * u_FocalDistance;
}

vec2 project_pixel(vec2 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec3 project_pixel(vec3 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}

bool isEqual(float a, float b) {
  return a < b + 0.001 && a > b - 0.001;
}

`,hoe=`vec2 rotate_matrix(vec2 v, float a) {
    float b = a / 180.0 * 3.1415926535897932384626433832795;
    float s = sin(b);
    float c = cos(b);
    mat2 m = mat2(c, s, -s, c);
    return m * v;
}`,ML=`layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  float u_FocalDistance;
};
`,poe=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,IL=/precision\s+(high|low|medium)p\s+float/,PL=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,moe=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,voe=/void\s+main\s*\([^)]*\)\s*\{\n?/;class goe{constructor(){F(this,"moduleCache",{}),F(this,"rawContentCache",{})}registerBuiltinModules(){this.destroy(),this.registerModule("common",{vs:OL,fs:OL}),this.registerModule("decode",{vs:loe,fs:""}),this.registerModule("scene_uniforms",{vs:ML,fs:ML}),this.registerModule("picking_uniforms",{vs:wL,fs:wL}),this.registerModule("projection",{vs:NL,fs:NL}),this.registerModule("project",{vs:doe,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:poe}),this.registerModule("lighting",{vs:uoe,fs:""}),this.registerModule("light",{vs:soe,fs:""}),this.registerModule("picking",{vs:foe,fs:coe}),this.registerModule("rotation_2d",{vs:hoe,fs:""})}registerModule(t,r){r.vs=r.vs.replace(/\r\n/g,`
`),r.fs=r.fs.replace(/\r\n/g,`
`);const{vs:n,fs:i,uniforms:a,defines:o,inject:l}=r,{content:c,uniforms:f}=hR(n),{content:h,uniforms:p}=hR(i);this.rawContentCache[t]={fs:h,defines:o,inject:l,uniforms:qe(qe(qe({},f),p),a),vs:c}}getModule(t){let r=this.rawContentCache[t].vs,n=this.rawContentCache[t].fs;const{defines:i={},inject:a={}}=this.rawContentCache[t];let o={};a["vs:#decl"]&&(r=a["vs:#decl"]+r,o=hR(a["vs:#decl"]).uniforms),a["vs:#main-start"]&&(r=r.replace(voe,E=>E+a["vs:#main-start"])),a["fs:#decl"]&&(n=a["fs:#decl"]+n),r=_oe(i)+r;const{content:c,includeList:f}=this.processModule(r,[],"vs"),{content:h,includeList:p}=this.processModule(n,[],"fs"),v=ooe(f.concat(p).concat(t)).reduce((E,b)=>qe(qe({},E),this.rawContentCache[b].uniforms),qe({},o)),g=(IL.test(h)?"":PL)+c,_=(IL.test(h)?"":PL)+h;return this.moduleCache[t]={vs:g.trim(),fs:_.trim(),uniforms:v},this.moduleCache[t]}destroy(){this.moduleCache={},this.rawContentCache={}}processModule(t,r,n){return{content:t.replace(moe,(a,o)=>{const c=o.split(" ")[0].replace(/"/g,"");if(r.indexOf(c)>-1)return"";const f=this.rawContentCache[c][n];r.push(c);const{content:h}=this.processModule(f,r,n);return h}),includeList:r}}}function _oe(e){return Object.keys(e).reduce((r,n)=>r+`#define ${n.toUpperCase()} ${e[n]}
`,`
`)}class sO{constructor(){F(this,"shaderModuleService",void 0),F(this,"rendererService",void 0),F(this,"cameraService",void 0),F(this,"mapService",void 0),F(this,"interactionService",void 0),F(this,"layerService",void 0),F(this,"config",void 0)}getName(){return""}getType(){return e0.Normal}init(t,r){this.config=r,this.rendererService=t.getContainer().rendererService,this.cameraService=t.getContainer().cameraService,this.mapService=t.getContainer().mapService,this.interactionService=t.getContainer().interactionService,this.layerService=t.getContainer().layerService,this.shaderModuleService=t.getContainer().shaderModuleService}render(t){}}class yoe extends sO{getName(){return"clear"}init(t,r){super.init(t,r)}render(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}class Eoe{constructor(t){F(this,"passes",[]),F(this,"layer",void 0),F(this,"renderFlag",void 0),F(this,"width",0),F(this,"height",0),this.postProcessor=t}setLayer(t){this.layer=t}setRenderFlag(t){this.renderFlag=t}getRenderFlag(){return this.renderFlag}getPostProcessor(){return this.postProcessor}render(){var t=this;return et(function*(){for(const r of t.passes)yield r.render(t.layer);yield t.postProcessor.render(t.layer)})()}resize(t,r){(this.width!==t||this.height!==r)&&(this.postProcessor.resize(t,r),this.width=t,this.height=r)}add(t,r){t.getType()===e0.PostProcessing?this.postProcessor.add(t,this.layer,r):(t.init(this.layer,r),this.passes.push(t))}insert(t,r,n){t.init(this.layer,r),this.passes.splice(n,0,t)}destroy(){this.passes.length=0}}class boe extends sO{constructor(...t){var r;super(...t),r=this,F(this,"pickingFBO",void 0),F(this,"layer",void 0),F(this,"width",0),F(this,"height",0),F(this,"alreadyInRendering",!1),F(this,"pickFromPickingFBO",({x:n,y:i,lngLat:a,type:o})=>{if(!this.layer.isVisible()||!this.layer.needPick(o))return;const{getViewportSize:l,readPixelsAsync:c,useFramebuffer:f}=this.rendererService,{width:h,height:p}=l(),{enableHighlight:v,enableSelect:g}=this.layer.getLayerConfig(),_=n*ja,E=i*ja;if(_>h||_<0||E>p||E<0)return;let b;f(this.pickingFBO,et(function*(){var S;if(b=yield c({x:Math.round(_),y:Math.round(p-(i+1)*ja),width:1,height:1,data:new Uint8Array(4),framebuffer:r.pickingFBO}),b[0]!==0||b[1]!==0||b[2]!==0){const T=nd(b),C=r.layer.getSource().getFeatureById(T),M={x:n,y:i,type:o,lngLat:a,featureId:T,feature:C};C&&(r.layer.setCurrentPickId(T),r.triggerHoverOnLayer(M))}else{const T={x:n,y:i,lngLat:a,type:r.layer.getCurrentPickId()===null?"un"+o:"mouseout",featureId:null,feature:null};r.triggerHoverOnLayer(qe(qe({},T),{},{type:"unpick"})),r.triggerHoverOnLayer(T),r.layer.setCurrentPickId(null)}v&&r.highlightPickedFeature(b),g&&o==="click"&&((S=b)===null||S===void 0?void 0:S.toString())!==[0,0,0,0].toString()&&r.selectFeature(b)}))})}getType(){return e0.Normal}getName(){return"pixelPicking"}init(t,r){super.init(t,r),this.layer=t;const{createTexture2D:n,createFramebuffer:i,getViewportSize:a}=this.rendererService,{width:o,height:l}=a(),c=n({width:o,height:l,wrapS:L.CLAMP_TO_EDGE,wrapT:L.CLAMP_TO_EDGE,label:"Picking Texture"});this.pickingFBO=i({color:c}),this.interactionService.on(za.Hover,this.pickFromPickingFBO),this.interactionService.on(za.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(za.Active,this.highlightFeatureHandle.bind(this))}render(t){if(this.alreadyInRendering)return;const{getViewportSize:r,useFramebuffer:n,clear:i}=this.rendererService,{width:a,height:o}=r();this.alreadyInRendering=!0,(this.width!==a||this.height!==o)&&(this.pickingFBO.resize({width:a,height:o}),this.width=a,this.height=o),n(this.pickingFBO,()=>{i({framebuffer:this.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});const l=this.layer.multiPassRenderer.getRenderFlag();this.layer.multiPassRenderer.setRenderFlag(!1),t.hooks.beforePickingEncode.call(),t.render(),t.hooks.afterPickingEncode.call(),this.layer.multiPassRenderer.setRenderFlag(l),this.alreadyInRendering=!1})}triggerHoverOnLayer(t){this.layer.emit(t.type,t)}highlightPickedFeature(t){const[r,n,i]=t;this.layer.hooks.beforeHighlight.call([r,n,i]),this.layerService.renderLayers()}selectFeature(t){const[r,n,i]=t;this.layer.hooks.beforeSelect.call([r,n,i]),this.layerService.renderLayers()}selectFeatureHandle({featureId:t}){const r=Rp(t);this.selectFeature(new Uint8Array(r))}highlightFeatureHandle({featureId:t}){const r=Rp(t);this.highlightPickedFeature(new Uint8Array(r))}}class xoe{constructor(t){F(this,"passes",[]),F(this,"readFBO",void 0),F(this,"writeFBO",void 0),this.rendererService=t,this.init()}getReadFBO(){return this.readFBO}getWriteFBO(){return this.writeFBO}getCurrentFBOTex(){const{getViewportSize:t,createTexture2D:r}=this.rendererService,{width:n,height:i}=t();return r({x:0,y:0,width:n,height:i,copy:!0})}getReadFBOTex(){var t=this;const{useFramebuffer:r}=this.rendererService;return new Promise(n=>{r(this.readFBO,et(function*(){n(t.getCurrentFBOTex())}))})}renderBloomPass(t,r){var n=this;return et(function*(){const i=yield n.getReadFBOTex();let a=0;for(;a<4;)yield r.render(t,i),n.swap(),a++})()}render(t){var r=this;return et(function*(){for(let n=0;n<r.passes.length;n++){const i=r.passes[n];i.setRenderToScreen(r.isLastEnabledPass(n)),i.getName()==="bloom"?yield r.renderBloomPass(t,i):(yield i.render(t),n!==r.passes.length-1&&r.swap())}})()}resize(t,r){this.readFBO.resize({width:t,height:r}),this.writeFBO.resize({width:t,height:r})}add(t,r,n){t.init(r,n),this.passes.push(t)}insert(t,r,n,i){t.init(n,i),this.passes.splice(r,0,t)}getPostProcessingPassByName(t){return this.passes.find(r=>r.getName()===t)}init(){const{createFramebuffer:t,createTexture2D:r}=this.rendererService;this.readFBO=t({color:r({width:1,height:1,wrapS:L.CLAMP_TO_EDGE,wrapT:L.CLAMP_TO_EDGE,usage:Ng.RENDER_TARGET})}),this.writeFBO=t({color:r({width:1,height:1,wrapS:L.CLAMP_TO_EDGE,wrapT:L.CLAMP_TO_EDGE,usage:Ng.RENDER_TARGET})})}isLastEnabledPass(t){for(let r=t+1;r<this.passes.length;r++)if(this.passes[r].isEnabled())return!1;return!0}swap(){const t=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=t}}class Soe extends sO{getType(){return e0.Normal}getName(){return"render"}init(t,r){super.init(t,r)}render(t){const{useFramebuffer:r,clear:n}=this.rendererService,i=t.multiPassRenderer.getPostProcessor().getReadFBO();r(i,()=>{n({color:[0,0,0,0],depth:1,stencil:0,framebuffer:i}),t.multiPassRenderer.setRenderFlag(!1),t.models.forEach(a=>{a.draw({uniforms:t.layerModel.getUninforms()})}),t.multiPassRenderer.setRenderFlag(!0)})}}const Toe=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,Aoe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:NR}=Un;class Roe extends _u{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:Aoe,fs:Toe});const{vs:t,fs:r,uniforms:n}=this.shaderModuleService.getModule("blur-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:t,fs:r,uniforms:qe(qe({},n),{},{u_ViewportSize:[i,a]})}}convertOptionsToUniforms(t){const r={};return NR(t.bloomRadius)||(r.u_radius=t.bloomRadius),NR(t.bloomIntensity)||(r.u_intensity=t.bloomIntensity),NR(t.bloomBaseRadio)||(r.u_baseRadio=t.bloomBaseRadio),r}}const Coe=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Ooe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:woe}=Un;class Noe extends _u{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:Ooe,fs:Coe});const{vs:t,fs:r,uniforms:n}=this.shaderModuleService.getModule("blur-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:t,fs:r,uniforms:qe(qe({},n),{},{u_ViewportSize:[i,a]})}}convertOptionsToUniforms(t){const r={};return woe(t.blurRadius)||(r.u_BlurDir=[t.blurRadius,0]),r}}const Moe=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Ioe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:Poe}=Un;class Doe extends _u{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:Ioe,fs:Moe});const{vs:t,fs:r,uniforms:n}=this.shaderModuleService.getModule("blur-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:t,fs:r,uniforms:qe(qe({},n),{},{u_ViewportSize:[i,a]})}}convertOptionsToUniforms(t){const r={};return Poe(t.blurRadius)||(r.u_BlurDir=[0,t.blurRadius]),r}}const Loe=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,Boe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Foe extends _u{setupShaders(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:Boe,fs:Loe});const{vs:t,fs:r,uniforms:n}=this.shaderModuleService.getModule("colorhalftone-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:t,fs:r,uniforms:qe(qe({},n),{},{u_ViewportSize:[i,a]})}}}const Uoe=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,koe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class joe extends _u{setupShaders(){return this.shaderModuleService.registerModule("copy-pass",{vs:koe,fs:Uoe}),this.shaderModuleService.getModule("copy-pass")}}const zoe=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Voe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Hoe extends _u{setupShaders(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:Voe,fs:zoe});const{vs:t,fs:r,uniforms:n}=this.shaderModuleService.getModule("hexagonalpixelate-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:t,fs:r,uniforms:qe(qe({},n),{},{u_ViewportSize:[i,a]})}}}const Xoe=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,qoe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Goe extends _u{setupShaders(){this.shaderModuleService.registerModule("ink-pass",{vs:qoe,fs:Xoe});const{vs:t,fs:r,uniforms:n}=this.shaderModuleService.getModule("ink-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:t,fs:r,uniforms:qe(qe({},n),{},{u_ViewportSize:[i,a]})}}}const Woe=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,$oe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Yoe extends _u{setupShaders(){return this.shaderModuleService.registerModule("noise-pass",{vs:$oe,fs:Woe}),this.shaderModuleService.getModule("noise-pass")}}const Zoe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Koe=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`;class Qoe extends _u{setupShaders(){return this.shaderModuleService.registerModule("sepia-pass",{vs:Zoe,fs:Koe}),this.shaderModuleService.getModule("sepia-pass")}}const lj=new fae;let Joe=0;function ese(){const e=new goe,t=new mae,r=new rae,n=new pae(r),i=new zie,a=new Hie,o=new aae,l=new oae,c=new iae,f={id:`${Joe++}`,globalConfigService:lj,shaderModuleService:e,debugService:t,cameraService:r,coordinateSystemService:n,fontService:i,iconService:a,markerService:o,popupService:l,controlService:c,customRenderService:{}},h=new Aae(f);f.layerService=h;const p=new aoe(f);f.sceneService=p;const v=new yae(f);f.interactionService=v;const g=new Sae(f);f.pickingService=g;const _={clear:new yoe,pixelPicking:new boe,render:new Soe};f.normalPassFactory=b=>_[b];const E={copy:new joe,bloom:new Roe,blurH:new Noe,blurV:new Doe,noise:new Yoe,sepia:new Qoe,colorHalftone:new Foe,hexagonalPixelate:new Hoe,ink:new Goe};return f.postProcessingPass=E,f.postProcessingPassFactory=b=>E[b],f}function _g(e){const t=qe({},e);return t.postProcessor=new xoe(t.rendererService),t.multiPassRenderer=new Eoe(t.postProcessor),t.styleAttributeService=new Iae(t.rendererService),t}const J_=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"];let $i=(function(e){return e.IMAGE="image",e.CUSTOMIMAGE="customImage",e.ARRAYBUFFER="arraybuffer",e.RGB="rgb",e.TERRAINRGB="terrainRGB",e.CUSTOMRGB="customRGB",e.CUSTOMARRAYBUFFER="customArrayBuffer",e.CUSTOMTERRAINRGB="customTerrainRGB",e})({});var uj=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{l(r.next(c))}catch(f){i(f)}},o=c=>{try{l(r.throw(c))}catch(f){i(f)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);l((r=r.apply(e,t)).next())}),tse=(e,t,r,n)=>uj(void 0,null,function*(){return new Promise((i,a)=>{t({x:e.x,y:e.y,z:e.z},(o,l)=>{if(o||l.length===0){a(o);return}l&&U2([{data:l,bands:[0]}],r,n,(c,f)=>{c?a(c):f&&i(f)})})})}),rse=(e,t)=>uj(void 0,null,function*(){return new Promise((r,n)=>{t({x:e.x,y:e.y,z:e.z},(i,a)=>{if(i||!a){n(i);return}a instanceof ArrayBuffer?nQ(a,(o,l)=>{o&&n(o),r(l)}):a instanceof HTMLImageElement?r(a):n(i)})})});function nse(e,t){return Array.isArray(e)?typeof e[0]=="string"?e.map(r=>pp(r,t)):e.map(r=>({url:pp(r.url,t),bands:r.bands||[0]})):pp(e,t)}function ise(e){return typeof e=="string"?[{url:e,bands:[0]}]:typeof e[0]=="string"?e.map(t=>({url:t,bands:[0]})):e}function DL(e,t){e.xhrCancel=()=>{t.map(r=>{r.abort()})}}var ase=Object.defineProperty,ose=Object.defineProperties,sse=Object.getOwnPropertyDescriptors,LL=Object.getOwnPropertySymbols,lse=Object.prototype.hasOwnProperty,use=Object.prototype.propertyIsEnumerable,BL=(e,t,r)=>t in e?ase(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,FL=(e,t)=>{for(var r in t||(t={}))lse.call(t,r)&&BL(e,r,t[r]);if(LL)for(var r of LL(t))use.call(t,r)&&BL(e,r,t[r]);return e},UL=(e,t)=>ose(e,sse(t)),cj=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{l(r.next(c))}catch(f){i(f)}},o=c=>{try{l(r.throw(c))}catch(f){i(f)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);l((r=r.apply(e,t)).next())}),cse=(e,t,r,n,i)=>cj(void 0,null,function*(){const a=ise(t.url);if(a.length>1){const{rasterFiles:o,xhrList:l,errList:c}=yield fse(a,t);if(DL(e,l),c.length>0){r(c,null);return}U2(o,n,i,r)}else{const o=D3(t,(l,c)=>{if(l)r(l);else if(c){const f=[{data:c,bands:a[0].bands}];U2(f,n,i,r)}});DL(e,[o])}});function fse(e,t){return cj(this,null,function*(){const r=[],n=[],i=[];for(let a=0;a<e.length;a++){const o=e[a],l=UL(FL({},t),{url:o.url}),c=o.bands,{err:f,data:h,xhr:p}=yield eQ(UL(FL({},l),{type:"arrayBuffer"}));f&&i.push(f),n.push(p),r.push({data:h,bands:c})}return{rasterFiles:r,xhrList:n,errList:i}})}var dse=Object.defineProperty,hse=Object.defineProperties,pse=Object.getOwnPropertyDescriptors,kL=Object.getOwnPropertySymbols,mse=Object.prototype.hasOwnProperty,vse=Object.prototype.propertyIsEnumerable,jL=(e,t,r)=>t in e?dse(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ay=(e,t)=>{for(var r in t||(t={}))mse.call(t,r)&&jL(e,r,t[r]);if(kL)for(var r of kL(t))vse.call(t,r)&&jL(e,r,t[r]);return e},fj=(e,t)=>hse(e,pse(t)),dj=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{l(r.next(c))}catch(f){i(f)}},o=c=>{try{l(r.throw(c))}catch(f){i(f)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);l((r=r.apply(e,t)).next())}),gse=(e,t,r,n)=>dj(void 0,null,function*(){const{format:i=hj,operation:a,requestParameters:o={}}=n,l=fj(Ay({},o),{url:nse(e,t)});return new Promise((c,f)=>{cse(r,l,(h,p)=>{h?f(h):p&&c(p)},i,a)})}),zL=(e,t,r,n)=>dj(void 0,null,function*(){let i;const a=Array.isArray(e)?e[0]:e;return n.wmtsOptions?i=(n?.getURLFromTemplate||wre)(a,Ay(Ay({},t),n.wmtsOptions)):i=(n?.getURLFromTemplate||pp)(a,t),new Promise((o,l)=>{var c;const f=C2(fj(Ay({},n?.requestParameters),{url:i,type:((c=n?.requestParameters)==null?void 0:c.type)||"arrayBuffer"}),(h,p)=>{h?l(h):p&&o(p)},n.transformResponse);r.xhrCancel=()=>f.cancel()})}),hj=()=>({rasterData:new Uint8Array([0]),width:1,height:1}),_se=Object.defineProperty,yse=Object.defineProperties,Ese=Object.getOwnPropertyDescriptors,VL=Object.getOwnPropertySymbols,bse=Object.prototype.hasOwnProperty,xse=Object.prototype.propertyIsEnumerable,HL=(e,t,r)=>t in e?_se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,XL=(e,t)=>{for(var r in t||(t={}))bse.call(t,r)&&HL(e,r,t[r]);if(VL)for(var r of VL(t))xse.call(t,r)&&HL(e,r,t[r]);return e},Sse=(e,t)=>yse(e,Ese(t)),Tse={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0};$i.ARRAYBUFFER,$i.RGB;function Ase(e){return!!(Array.isArray(e)&&e.length===0||!Array.isArray(e)&&typeof e!="string")}function Rse(e,t={}){if(Ase(e))throw new Error("tile server url is error");const{extent:r=[1/0,1/0,-1/0,-1/0],coordinates:n}=t;let i=t?.dataType||$i.IMAGE;i===$i.RGB&&(i=$i.ARRAYBUFFER);const a=(c,f)=>{switch(i){case $i.IMAGE:return zL(e,c,f,t);case $i.CUSTOMIMAGE:case $i.CUSTOMTERRAINRGB:return rse(f,t?.getCustomData);case $i.ARRAYBUFFER:return gse(e,c,f,t);case $i.CUSTOMARRAYBUFFER:case $i.CUSTOMRGB:return tse(f,t?.getCustomData,t?.format||hj,t?.operation);default:return zL(e,c,f,t)}},o=Sse(XL(XL({},Tse),t),{getTileData:a}),l=Jp(n,r);return{data:e,dataArray:[{_id:1,coordinates:l}],tilesetOptions:o,isTile:!0}}var Cse=Object.defineProperty,Ose=Object.defineProperties,wse=Object.getOwnPropertyDescriptors,h1=Object.getOwnPropertySymbols,pj=Object.prototype.hasOwnProperty,mj=Object.prototype.propertyIsEnumerable,qL=(e,t,r)=>t in e?Cse(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Nse=(e,t)=>{for(var r in t||(t={}))pj.call(t,r)&&qL(e,r,t[r]);if(h1)for(var r of h1(t))mj.call(t,r)&&qL(e,r,t[r]);return e},Mse=(e,t)=>Ose(e,wse(t)),Ise=(e,t)=>{var r={};for(var n in e)pj.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&h1)for(var n of h1(e))t.indexOf(n)<0&&mj.call(e,n)&&(r[n]=e[n]);return r};function Pse(e,t){const r=t,{extent:n=[121.168,30.2828,121.384,30.4219],coordinates:i,width:a,height:o}=r,l=Ise(r,["extent","coordinates","width","height"]);e.length<2&&console.warn("RGB解析需要2个波段的数据");const[c,f]=l.bands||[0,1],h=[e[c],e[f]],p=[];for(let _=0;_<h[0].length;_++)p.push((h[1][_]-h[0][_])/(h[1][_]+h[0][_]));const v=Jp(i,n);return{_id:1,dataArray:[Mse(Nse({_id:1,data:p,width:a,height:o},l),{coordinates:v})]}}var Dse=Object.defineProperty,Lse=Object.defineProperties,Bse=Object.getOwnPropertyDescriptors,p1=Object.getOwnPropertySymbols,vj=Object.prototype.hasOwnProperty,gj=Object.prototype.propertyIsEnumerable,GL=(e,t,r)=>t in e?Dse(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Fse=(e,t)=>{for(var r in t||(t={}))vj.call(t,r)&&GL(e,r,t[r]);if(p1)for(var r of p1(t))gj.call(t,r)&&GL(e,r,t[r]);return e},Use=(e,t)=>Lse(e,Bse(t)),kse=(e,t)=>{var r={};for(var n in e)vj.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&p1)for(var n of p1(e))t.indexOf(n)<0&&gj.call(e,n)&&(r[n]=e[n]);return r};function jse(e,t){const r=t,{extent:n,coordinates:i,width:a,height:o}=r,l=kse(r,["extent","coordinates","width","height"]);e.length<3&&console.warn("RGB解析需要三个波段的数据");const[c,f,h]=l.bands||[0,1,2],p=[e[c],e[f],e[h]],v=[],[g,_]=l?.countCut||[2,98],E=l?.RMinMax||mp(p[0],g,_),b=l?.GMinMax||mp(p[1],g,_),S=l?.BMinMax||mp(p[2],g,_);for(let M=0;M<p[0].length;M++)v.push(Math.max(0,p[0][M]-E[0])),v.push(Math.max(0,p[1][M]-b[0])),v.push(Math.max(0,p[2][M]-S[0]));const T=Jp(i,n);return{_id:1,dataArray:[Use(Fse({_id:1,data:v,width:a,height:o,rMinMax:E,gMinMax:b,bMinMax:S},l),{coordinates:T})]}}var zse=Object.defineProperty,Vse=Object.defineProperties,Hse=Object.getOwnPropertyDescriptors,m1=Object.getOwnPropertySymbols,_j=Object.prototype.hasOwnProperty,yj=Object.prototype.propertyIsEnumerable,WL=(e,t,r)=>t in e?zse(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Xse=(e,t)=>{for(var r in t||(t={}))_j.call(t,r)&&WL(e,r,t[r]);if(m1)for(var r of m1(t))yj.call(t,r)&&WL(e,r,t[r]);return e},qse=(e,t)=>Vse(e,Hse(t)),Gse=(e,t)=>{var r={};for(var n in e)_j.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&m1)for(var n of m1(e))t.indexOf(n)<0&&yj.call(e,n)&&(r[n]=e[n]);return r};function Wse(e,t){const r=t,{extent:n,coordinates:i,min:a,max:o,width:l,height:c,format:f,operation:h}=r,p=Gse(r,["extent","coordinates","min","max","width","height","format","operation"]);let v;if(f===void 0||Pk(e))v=Array.from(e);else{const E=Array.isArray(e)?e:[e];v=tO(E,f,h)}const g=Jp(i,n);return{_id:1,dataArray:[qse(Xse({_id:1,data:v,width:l,height:c},p),{min:a,max:o,coordinates:g})]}}var $se=Object.defineProperty,Yse=Object.defineProperties,Zse=Object.getOwnPropertyDescriptors,$L=Object.getOwnPropertySymbols,Kse=Object.prototype.hasOwnProperty,Qse=Object.prototype.propertyIsEnumerable,YL=(e,t,r)=>t in e?$se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ZL=(e,t)=>{for(var r in t||(t={}))Kse.call(t,r)&&YL(e,r,t[r]);if($L)for(var r of $L(t))Qse.call(t,r)&&YL(e,r,t[r]);return e},Jse=(e,t)=>Yse(e,Zse(t)),ele=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{l(r.next(c))}catch(f){i(f)}},o=c=>{try{l(r.throw(c))}catch(f){i(f)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);l((r=r.apply(e,t)).next())}),tle={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},rle=e=>ele(void 0,null,function*(){return new Promise(t=>{const[r,n,i,a]=e.bounds,o={layers:{testTile:{features:[{type:"Feature",properties:{key:e.x+"/"+e.y+"/"+e.z,x:(r+i)/2,y:(n+a)/2},geometry:{type:"LineString",coordinates:[[i,a],[i,n],[r,n],[r,n]]}}]}}};t(o)})});function nle(e,t){const r=i=>rle(i),n=Jse(ZL(ZL({},tle),t),{getTileData:r});return{data:e,dataArray:[],tilesetOptions:n,isTile:!0}}var Ry={exports:{}},ile=Ry.exports,KL;function ale(){return KL||(KL=1,(function(e,t){(function(r,n){e.exports=n()})(ile,(function(){function r(Q,X,R,P,V,le){if(!(V-P<=R)){var w=P+V>>1;n(Q,X,w,P,V,le%2),r(Q,X,R,P,w-1,le+1),r(Q,X,R,w+1,V,le+1)}}function n(Q,X,R,P,V,le){for(;V>P;){if(V-P>600){var w=V-P+1,z=R-P+1,H=Math.log(w),ee=.5*Math.exp(2*H/3),oe=.5*Math.sqrt(H*ee*(w-ee)/w)*(z-w/2<0?-1:1),ge=Math.max(P,Math.floor(R-z*ee/w+oe)),ye=Math.min(V,Math.floor(R+(w-z)*ee/w+oe));n(Q,X,R,ge,ye,le)}var Pe=X[2*R+le],tt=P,We=V;for(i(Q,X,P,R),X[2*V+le]>Pe&&i(Q,X,P,V);tt<We;){for(i(Q,X,tt,We),tt++,We--;X[2*tt+le]<Pe;)tt++;for(;X[2*We+le]>Pe;)We--}X[2*P+le]===Pe?i(Q,X,P,We):(We++,i(Q,X,We,V)),We<=R&&(P=We+1),R<=We&&(V=We-1)}}function i(Q,X,R,P){a(Q,R,P),a(X,2*R,2*P),a(X,2*R+1,2*P+1)}function a(Q,X,R){var P=Q[X];Q[X]=Q[R],Q[R]=P}function o(Q,X,R,P,V,le,w){for(var z=[0,Q.length-1,0],H=[],ee,oe;z.length;){var ge=z.pop(),ye=z.pop(),Pe=z.pop();if(ye-Pe<=w){for(var tt=Pe;tt<=ye;tt++)ee=X[2*tt],oe=X[2*tt+1],ee>=R&&ee<=V&&oe>=P&&oe<=le&&H.push(Q[tt]);continue}var We=Math.floor((Pe+ye)/2);ee=X[2*We],oe=X[2*We+1],ee>=R&&ee<=V&&oe>=P&&oe<=le&&H.push(Q[We]);var Pt=(ge+1)%2;(ge===0?R<=ee:P<=oe)&&(z.push(Pe),z.push(We-1),z.push(Pt)),(ge===0?V>=ee:le>=oe)&&(z.push(We+1),z.push(ye),z.push(Pt))}return H}function l(Q,X,R,P,V,le){for(var w=[0,Q.length-1,0],z=[],H=V*V;w.length;){var ee=w.pop(),oe=w.pop(),ge=w.pop();if(oe-ge<=le){for(var ye=ge;ye<=oe;ye++)c(X[2*ye],X[2*ye+1],R,P)<=H&&z.push(Q[ye]);continue}var Pe=Math.floor((ge+oe)/2),tt=X[2*Pe],We=X[2*Pe+1];c(tt,We,R,P)<=H&&z.push(Q[Pe]);var Pt=(ee+1)%2;(ee===0?R-V<=tt:P-V<=We)&&(w.push(ge),w.push(Pe-1),w.push(Pt)),(ee===0?R+V>=tt:P+V>=We)&&(w.push(Pe+1),w.push(oe),w.push(Pt))}return z}function c(Q,X,R,P){var V=Q-R,le=X-P;return V*V+le*le}var f=function(Q){return Q[0]},h=function(Q){return Q[1]},p=function(X,R,P,V,le){R===void 0&&(R=f),P===void 0&&(P=h),V===void 0&&(V=64),le===void 0&&(le=Float64Array),this.nodeSize=V,this.points=X;for(var w=X.length<65536?Uint16Array:Uint32Array,z=this.ids=new w(X.length),H=this.coords=new le(X.length*2),ee=0;ee<X.length;ee++)z[ee]=ee,H[2*ee]=R(X[ee]),H[2*ee+1]=P(X[ee]);r(z,H,V,0,z.length-1,0)};p.prototype.range=function(X,R,P,V){return o(this.ids,this.coords,X,R,P,V,this.nodeSize)},p.prototype.within=function(X,R,P){return l(this.ids,this.coords,X,R,P,this.nodeSize)};var v={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Q){return Q}},g=Math.fround||(function(Q){return(function(X){return Q[0]=+X,Q[0]})})(new Float32Array(1)),_=function(X){this.options=N(Object.create(v),X),this.trees=new Array(this.options.maxZoom+1)};_.prototype.load=function(X){var R=this.options,P=R.log,V=R.minZoom,le=R.maxZoom,w=R.nodeSize;P&&console.time("total time");var z="prepare "+X.length+" points";P&&console.time(z),this.points=X;for(var H=[],ee=0;ee<X.length;ee++)X[ee].geometry&&H.push(b(X[ee],ee));this.trees[le+1]=new p(H,j,re,w,Float32Array),P&&console.timeEnd(z);for(var oe=le;oe>=V;oe--){var ge=+Date.now();H=this._cluster(H,oe),this.trees[oe]=new p(H,j,re,w,Float32Array),P&&console.log("z%d: %d clusters in %dms",oe,H.length,+Date.now()-ge)}return P&&console.timeEnd("total time"),this},_.prototype.getClusters=function(X,R){var P=((X[0]+180)%360+360)%360-180,V=Math.max(-90,Math.min(90,X[1])),le=X[2]===180?180:((X[2]+180)%360+360)%360-180,w=Math.max(-90,Math.min(90,X[3]));if(X[2]-X[0]>=360)P=-180,le=180;else if(P>le){var z=this.getClusters([P,V,180,w],R),H=this.getClusters([-180,V,le,w],R);return z.concat(H)}for(var ee=this.trees[this._limitZoom(R)],oe=ee.range(C(P),M(w),C(le),M(V)),ge=[],ye=0,Pe=oe;ye<Pe.length;ye+=1){var tt=Pe[ye],We=ee.points[tt];ge.push(We.numPoints?S(We):this.points[We.index])}return ge},_.prototype.getChildren=function(X){var R=this._getOriginId(X),P=this._getOriginZoom(X),V="No cluster with the specified id.",le=this.trees[P];if(!le)throw new Error(V);var w=le.points[R];if(!w)throw new Error(V);for(var z=this.options.radius/(this.options.extent*Math.pow(2,P-1)),H=le.within(w.x,w.y,z),ee=[],oe=0,ge=H;oe<ge.length;oe+=1){var ye=ge[oe],Pe=le.points[ye];Pe.parentId===X&&ee.push(Pe.numPoints?S(Pe):this.points[Pe.index])}if(ee.length===0)throw new Error(V);return ee},_.prototype.getLeaves=function(X,R,P){R=R||10,P=P||0;var V=[];return this._appendLeaves(V,X,R,P,0),V},_.prototype.getTile=function(X,R,P){var V=this.trees[this._limitZoom(X)],le=Math.pow(2,X),w=this.options,z=w.extent,H=w.radius,ee=H/z,oe=(P-ee)/le,ge=(P+1+ee)/le,ye={features:[]};return this._addTileFeatures(V.range((R-ee)/le,oe,(R+1+ee)/le,ge),V.points,R,P,le,ye),R===0&&this._addTileFeatures(V.range(1-ee/le,oe,1,ge),V.points,le,P,le,ye),R===le-1&&this._addTileFeatures(V.range(0,oe,ee/le,ge),V.points,-1,P,le,ye),ye.features.length?ye:null},_.prototype.getClusterExpansionZoom=function(X){for(var R=this._getOriginZoom(X)-1;R<=this.options.maxZoom;){var P=this.getChildren(X);if(R++,P.length!==1)break;X=P[0].properties.cluster_id}return R},_.prototype._appendLeaves=function(X,R,P,V,le){for(var w=this.getChildren(R),z=0,H=w;z<H.length;z+=1){var ee=H[z],oe=ee.properties;if(oe&&oe.cluster?le+oe.point_count<=V?le+=oe.point_count:le=this._appendLeaves(X,oe.cluster_id,P,V,le):le<V?le++:X.push(ee),X.length===P)break}return le},_.prototype._addTileFeatures=function(X,R,P,V,le,w){for(var z=0,H=X;z<H.length;z+=1){var ee=H[z],oe=R[ee],ge=oe.numPoints,ye=void 0,Pe=void 0,tt=void 0;if(ge)ye=T(oe),Pe=oe.x,tt=oe.y;else{var We=this.points[oe.index];ye=We.properties,Pe=C(We.geometry.coordinates[0]),tt=M(We.geometry.coordinates[1])}var Pt={type:1,geometry:[[Math.round(this.options.extent*(Pe*le-P)),Math.round(this.options.extent*(tt*le-V))]],tags:ye},$e=void 0;ge?$e=oe.id:this.options.generateId?$e=oe.index:this.points[oe.index].id&&($e=this.points[oe.index].id),$e!==void 0&&(Pt.id=$e),w.features.push(Pt)}},_.prototype._limitZoom=function(X){return Math.max(this.options.minZoom,Math.min(Math.floor(+X),this.options.maxZoom+1))},_.prototype._cluster=function(X,R){for(var P=[],V=this.options,le=V.radius,w=V.extent,z=V.reduce,H=V.minPoints,ee=le/(w*Math.pow(2,R)),oe=0;oe<X.length;oe++){var ge=X[oe];if(!(ge.zoom<=R)){ge.zoom=R;for(var ye=this.trees[R+1],Pe=ye.within(ge.x,ge.y,ee),tt=ge.numPoints||1,We=tt,Pt=0,$e=Pe;Pt<$e.length;Pt+=1){var Tt=$e[Pt],je=ye.points[Tt];je.zoom>R&&(We+=je.numPoints||1)}if(We>tt&&We>=H){for(var Ee=ge.x*tt,st=ge.y*tt,Oe=z&&tt>1?this._map(ge,!0):null,$t=(oe<<5)+(R+1)+this.points.length,qt=0,xt=Pe;qt<xt.length;qt+=1){var Dt=xt[qt],It=ye.points[Dt];if(!(It.zoom<=R)){It.zoom=R;var er=It.numPoints||1;Ee+=It.x*er,st+=It.y*er,It.parentId=$t,z&&(Oe||(Oe=this._map(ge,!0)),z(Oe,this._map(It)))}}ge.parentId=$t,P.push(E(Ee/We,st/We,$t,We,Oe))}else if(P.push(ge),We>1)for(var kr=0,ue=Pe;kr<ue.length;kr+=1){var xe=ue[kr],Ue=ye.points[xe];Ue.zoom<=R||(Ue.zoom=R,P.push(Ue))}}}return P},_.prototype._getOriginId=function(X){return X-this.points.length>>5},_.prototype._getOriginZoom=function(X){return(X-this.points.length)%32},_.prototype._map=function(X,R){if(X.numPoints)return R?N({},X.properties):X.properties;var P=this.points[X.index].properties,V=this.options.map(P);return R&&V===P?N({},V):V};function E(Q,X,R,P,V){return{x:g(Q),y:g(X),zoom:1/0,id:R,parentId:-1,numPoints:P,properties:V}}function b(Q,X){var R=Q.geometry.coordinates,P=R[0],V=R[1];return{x:g(C(P)),y:g(M(V)),zoom:1/0,index:X,parentId:-1}}function S(Q){return{type:"Feature",id:Q.id,properties:T(Q),geometry:{type:"Point",coordinates:[D(Q.x),I(Q.y)]}}}function T(Q){var X=Q.numPoints,R=X>=1e4?Math.round(X/1e3)+"k":X>=1e3?Math.round(X/100)/10+"k":X;return N(N({},Q.properties),{cluster:!0,cluster_id:Q.id,point_count:X,point_count_abbreviated:R})}function C(Q){return Q/360+.5}function M(Q){var X=Math.sin(Q*Math.PI/180),R=.5-.25*Math.log((1+X)/(1-X))/Math.PI;return R<0?0:R>1?1:R}function D(Q){return(Q-.5)*360}function I(Q){var X=(180-Q*360)*Math.PI/180;return 360*Math.atan(Math.exp(X))/Math.PI-90}function N(Q,X){for(var R in X)Q[R]=X[R];return Q}function j(Q){return Q.x}function re(Q){return Q.y}return _}))})(Ry)),Ry.exports}var ole=ale();const sle=Kr(ole);var lle=Object.defineProperty,QL=Object.getOwnPropertySymbols,ule=Object.prototype.hasOwnProperty,cle=Object.prototype.propertyIsEnumerable,JL=(e,t,r)=>t in e?lle(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ej=(e,t)=>{for(var r in t||(t={}))ule.call(t,r)&&JL(e,r,t[r]);if(QL)for(var r of QL(t))cle.call(t,r)&&JL(e,r,t[r]);return e};function bj(e,t){const{radius:r=40,maxZoom:n=18,minZoom:i=0,zoom:a=2}=t;if(e.pointIndex){const c=e.pointIndex.getClusters(e.extent,Math.floor(a));return e.dataArray=fle(c),e}const o=new sle({radius:r,minZoom:i,maxZoom:n}),l={features:[]};return l.features=e.dataArray.map(c=>({type:"Feature",geometry:{type:"Point",coordinates:c.coordinates},properties:Ej({},c)})),o.load(l.features),o}function fle(e){return e.map((t,r)=>Ej({coordinates:t.geometry.coordinates,_id:r+1},t.properties))}function dle(e){if(e.length===0)throw new Error("max requires at least one data point");let t=e[0];for(let r=1;r<e.length;r++)e[r]>t&&(t=e[r]);return t}function hle(e){if(e.length===0)throw new Error("min requires at least one data point");let t=e[0];for(let r=1;r<e.length;r++)e[r]<t&&(t=e[r]);return t}function xj(e){if(e.length===0)return 0;let t=e[0],r=0,n;for(let i=1;i<e.length;i++)n=t+e[i]*1,Math.abs(t)>=Math.abs(e[i])?r+=t-n+e[i]:r+=e[i]-n+t,t=n;return t+r*1}function ple(e){if(e.length===0)throw new Error("mean requires at least one data point");return xj(e)/e.length}var mle={min:hle,max:dle,mean:ple,sum:xj},vle=Object.defineProperty,eB=Object.getOwnPropertySymbols,gle=Object.prototype.hasOwnProperty,_le=Object.prototype.propertyIsEnumerable,tB=(e,t,r)=>t in e?vle(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Cv=(e,t)=>{for(var r in t||(t={}))gle.call(t,r)&&tB(e,r,t[r]);if(eB)for(var r of eB(t))_le.call(t,r)&&tB(e,r,t[r]);return e},rB=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{l(r.next(c))}catch(f){i(f)}},o=c=>{try{l(r.throw(c))}catch(f){i(f)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);l((r=r.apply(e,t)).next())}),{cloneDeep:yle,isFunction:nB,isString:Ele,mergeWith:ble}=Un;function xle(e,t){if(Array.isArray(t))return t}var Sle=class extends Za.EventEmitter{constructor(e,t){super(),this.type="source",this.isTile=!1,this.inited=!1,this.hooks={init:new tl},this.parser={type:"geojson"},this.transforms=[],this.cluster=!1,this.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},this.invalidExtent=!1,this.dataArrayChanged=!1,this.cfg={autoRender:!0},this.originData=e,this.initCfg(t),this.init().then(()=>{this.inited=!0,this.emit("update",{type:"inited"})})}getSourceCfg(){return this.cfg}getClusters(e){return this.clusterIndex.getClusters(this.caculClusterExtent(2),e)}getClustersLeaves(e){return this.clusterIndex.getLeaves(e,1/0)}getParserType(){return this.parser.type}updateClusterData(e){const{method:t="sum",field:r}=this.clusterOptions;let n=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(e));this.clusterOptions.zoom=e,n.forEach(i=>{i.id||(i.properties.point_count=1)}),(r||nB(t))&&(n=n.map(i=>{const a=i.id;if(a){const l=this.clusterIndex.getLeaves(a,1/0).map(f=>f.properties);let c;if(Ele(t)&&r){const f=Pre(l,r);c=mle[t](f)}nB(t)&&(c=t(l)),i.properties.stat=c}else i.properties.point_count=1;return i})),this.data=sM("geojson")({type:"FeatureCollection",features:n}),this.executeTrans()}getFeatureById(e){const{type:t="geojson",geometry:r}=this.parser;if(t==="geojson"&&!this.cluster){const n=e<this.originData.features.length?this.originData.features[e]:"null",i=yle(n);if(i?.properties&&(this.transforms.length!==0||this.dataArrayChanged)){const a=this.data.dataArray.find(o=>o._id===e);i.properties=a}return i}else return t==="json"&&r?this.data.dataArray.find(n=>n._id===e):e<this.data.dataArray.length?this.data.dataArray[e]:"null"}updateFeaturePropertiesById(e,t){this.data.dataArray=this.data.dataArray.map(r=>r._id===e?Cv(Cv({},r),t):r),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}getFeatureId(e,t){const r=this.data.dataArray.find(n=>n[e]===t);return r?._id}setData(e,t){this.originData=e,this.dataArrayChanged=!1,this.initCfg(t),this.init().then(()=>{this.emit("update",{type:"update"})})}reloadAllTile(){var e;(e=this.tileset)==null||e.reloadAll()}reloadTilebyId(e,t,r){var n;(n=this.tileset)==null||n.reloadTileById(e,t,r)}reloadTileByLnglat(e,t,r){var n;(n=this.tileset)==null||n.reloadTileByLnglat(e,t,r)}getTileExtent(e,t){var r;return(r=this.tileset)==null?void 0:r.getTileExtent(e,t)}getTileByZXY(e,t,r){var n;return(n=this.tileset)==null?void 0:n.getTileByZXY(e,t,r)}reloadTileByExtent(e,t){var r;(r=this.tileset)==null||r.reloadTileByExtent(e,t)}destroy(){var e;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(e=this.tileset)==null||e.destroy()}processData(){return rB(this,null,function*(){return new Promise((e,t)=>{try{this.excuteParser(),this.initCluster(),this.executeTrans(),e({})}catch(r){t(r)}})})}initCfg(e){this.cfg=ble(this.cfg,e,xle);const t=this.cfg;t&&(t.parser&&(this.parser=t.parser),t.transforms&&(this.transforms=t.transforms),this.cluster=t.cluster||!1,t.clusterOptions&&(this.cluster=!0,this.clusterOptions=Cv(Cv({},this.clusterOptions),t.clusterOptions)))}init(){return rB(this,null,function*(){this.inited=!1,yield this.processData(),this.inited=!0})}excuteParser(){const e=this.parser,t=e.type||"geojson",r=sM(t);this.data=r(this.originData,e),this.tileset=this.initTileset(),!e.cancelExtent&&(this.extent=Gte(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}setCenter(e){this.center=[(e[0]+e[2])/2,(e[1]+e[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}initTileset(){const{tilesetOptions:e}=this.data;return e?(this.isTile=!0,this.tileset?(this.tileset.updateOptions(e),this.tileset):new Ore(Cv({},e))):void 0}executeTrans(){this.transforms.forEach(t=>{const{type:r}=t,n=FK(r)(this.data,t);Object.assign(this.data,n)})}initCluster(){if(!this.cluster)return;const e=this.clusterOptions||{};this.clusterIndex=bj(this.data,e)}caculClusterExtent(e){let t=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(t=Q3(i1(this.extent),e)),t[0].concat(t[1])}};function Tle(e,t){const{callback:r}=t;return r&&(e.dataArray=e.dataArray.filter(r)),e}var lO=6378e3;function Ale(e,t){const r=e.dataArray,{size:n=10}=t,i=n/(2*Math.PI*lO)*(256<<20)/2,{gridHash:a,gridOffset:o}=Rle(r,n),l=Nle(a,o,t);return{yOffset:i,xOffset:i,radius:i,type:"grid",dataArray:l}}function Rle(e,t){let r=1/0,n=-1/0,i;for(const c of e)i=c.coordinates[1],Number.isFinite(i)&&(r=i<r?i:r,n=i>n?i:n);const a=(r+n)/2,o=Cle(t,a);if(o.xOffset<=0||o.yOffset<=0)return{gridHash:{},gridOffset:o};const l={};for(const c of e){const f=c.coordinates[1],h=c.coordinates[0];if(Number.isFinite(f)&&Number.isFinite(h)){const p=Math.floor((f+90)/o.yOffset),v=Math.floor((h+180)/o.xOffset),g=`${p}-${v}`;l[g]=l[g]||{count:0,points:[]},l[g].count+=1,l[g].points.push(c)}}return{gridHash:l,gridOffset:o}}function Cle(e,t){const r=Ole(e),n=wle(t,e);return{yOffset:r,xOffset:n}}function Ole(e){return e/lO*(180/Math.PI)}function wle(e,t){return t/lO*(180/Math.PI)/Math.cos(e*Math.PI/180)}function Nle(e,t,r){return Object.keys(e).reduce((n,i,a)=>{const o=i.split("-"),l=parseInt(o[0],10),c=parseInt(o[1],10),f={};if(r.field&&r.method){const h=Ck(e[i].points,r.field);f[r.method]=Rk[r.method](h)}return Object.assign(f,{_id:a,coordinates:Fo([-180+t.xOffset*(c+.5),-90+t.yOffset*(l+.5)]),rawData:e[i].points,count:e[i].count}),n.push(f),n},[])}var tp=Math.PI/3,Mle=[0,tp,2*tp,3*tp,4*tp,5*tp];function Ile(e){return e[0]}function Ple(e){return e[1]}function Dle(){var e=0,t=0,r=1,n=1,i=Ile,a=Ple,o,l,c;function f(p){var v={},g=[],_,E=p.length;for(_=0;_<E;++_)if(!(isNaN(S=+i.call(null,b=p[_],_,p))||isNaN(T=+a.call(null,b,_,p)))){var b,S,T,C=Math.round(T=T/c),M=Math.round(S=S/l-(C&1)/2),D=T-C;if(Math.abs(D)*3>1){var I=S-M,N=M+(S<M?-1:1)/2,j=C+(T<C?-1:1),re=S-N,Q=T-j;I*I+D*D>re*re+Q*Q&&(M=N+(C&1?1:-1)/2,C=j)}var X=M+"-"+C,R=v[X];R?R.push(b):(g.push(R=v[X]=[b]),R.x=(M+(C&1)/2)*l,R.y=C*c)}return g}function h(p){var v=0,g=0;return Mle.map(function(_){var E=Math.sin(_)*p,b=-Math.cos(_)*p,S=E-v,T=b-g;return v=E,g=b,[S,T]})}return f.hexagon=function(p){return"m"+h(p==null?o:+p).join("l")+"z"},f.centers=function(){for(var p=[],v=Math.round(t/c),g=Math.round(e/l),_=v*c;_<n+o;_+=c,++v)for(var E=g*l+(v&1)*l/2;E<r+l/2;E+=l)p.push([E,_]);return p},f.mesh=function(){var p=h(o).slice(0,4).join("l");return f.centers().map(function(v){return"M"+v+"m"+p}).join("")},f.x=function(p){return arguments.length?(i=p,f):i},f.y=function(p){return arguments.length?(a=p,f):a},f.radius=function(p){return arguments.length?(o=+p,l=o*2*Math.sin(tp),c=o*1.5,f):o},f.size=function(p){return arguments.length?(e=t=0,r=+p[0],n=+p[1],f):[r-e,n-t]},f.extent=function(p){return arguments.length?(e=+p[0][0],t=+p[0][1],r=+p[1][0],n=+p[1][1],f):[[e,t],[r,n]]},f.radius(1)}var Lle=Object.defineProperty,Ble=Object.defineProperties,Fle=Object.getOwnPropertyDescriptors,iB=Object.getOwnPropertySymbols,Ule=Object.prototype.hasOwnProperty,kle=Object.prototype.propertyIsEnumerable,aB=(e,t,r)=>t in e?Lle(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,jle=(e,t)=>{for(var r in t||(t={}))Ule.call(t,r)&&aB(e,r,t[r]);if(iB)for(var r of iB(t))kle.call(t,r)&&aB(e,r,t[r]);return e},zle=(e,t)=>Ble(e,Fle(t)),Vle=6378e3;function Hle(e,t){const r=e.dataArray,{size:n=10,method:i="sum"}=t,a=n/(2*Math.PI*Vle)*(256<<20)/2,o=r.map(h=>{const[p,v]=Fo(h.coordinates);return zle(jle({},h),{coordinates:[p,v]})});return{dataArray:Dle().radius(a).x(h=>h.coordinates[0]).y(h=>h.coordinates[1])(o).map((h,p)=>{if(t.field&&i){const v=Ck(h,t.field);h[i]=Rk[i](v)}return{[t.method]:h[i],count:h.length,rawData:h,coordinates:[h.x,h.y],_id:p}}),radius:a,xOffset:a,yOffset:a,type:"hexagon"}}var Xle=Object.defineProperty,oB=Object.getOwnPropertySymbols,qle=Object.prototype.hasOwnProperty,Gle=Object.prototype.propertyIsEnumerable,sB=(e,t,r)=>t in e?Xle(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lB=(e,t)=>{for(var r in t||(t={}))qle.call(t,r)&&sB(e,r,t[r]);if(oB)for(var r of oB(t))Gle.call(t,r)&&sB(e,r,t[r]);return e};function Wle(e,t){const{sourceField:r,targetField:n,data:i}=t,a={};return i.forEach(o=>{a[o[r]]=o}),e.dataArray=e.dataArray.map(o=>{const l=o[n];return lB(lB({},o),a[l])}),e}function $le(e,t){const{callback:r}=t;return r&&(e.dataArray=e.dataArray.map(r)),e}var Yle=Object.defineProperty,Zle=Object.defineProperties,Kle=Object.getOwnPropertyDescriptors,uB=Object.getOwnPropertySymbols,Qle=Object.prototype.hasOwnProperty,Jle=Object.prototype.propertyIsEnumerable,cB=(e,t,r)=>t in e?Yle(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,eue=(e,t)=>{for(var r in t||(t={}))Qle.call(t,r)&&cB(e,r,t[r]);if(uB)for(var r of uB(t))Jle.call(t,r)&&cB(e,r,t[r]);return e},tue=(e,t)=>Zle(e,Kle(t));function rue(e){let t=1/0,r=-1/0,n=1/0,i=-1/0;e.forEach(l=>{const c=l.coordinates;if(!c)return;const f=h=>{if(typeof h[0]=="number"&&typeof h[1]=="number"){const[p,v]=h;t=Math.min(t,p),r=Math.max(r,p),n=Math.min(n,v),i=Math.max(i,v)}else Array.isArray(h[0])&&h.forEach(f)};f(c)});const a=(t+r)/2,o=(n+i)/2;return[a,o]}function nue(e,t){const[r,n]=t;return e.map(i=>{if(!i.coordinates)return i;const a=o=>{if(typeof o[0]=="number"&&typeof o[1]=="number"){const l=Number((o[0]-r).toPrecision(15)),c=Number((o[1]-n).toPrecision(15));return[l,c,...o.slice(2)||[]]}else if(Array.isArray(o[0]))return o.map(a);return o};return tue(eue({},i),{coordinates:a(i.coordinates)})})}function iue(e,t={}){const{enableRelativeCoordinates:r=!1,relativeOrigin:n}=t;if(!r)return{dataArray:e,relativeOrigin:[0,0],originalExtent:[0,0,0,0]};let i=1/0,a=-1/0,o=1/0,l=-1/0;e.forEach(p=>{const v=p.coordinates;if(!v)return;const g=_=>{if(typeof _[0]=="number"&&typeof _[1]=="number"){const[E,b]=_;i=Math.min(i,E),a=Math.max(a,E),o=Math.min(o,b),l=Math.max(l,b)}else Array.isArray(_[0])&&_.forEach(g)};g(v)});const c=[i,o,a,l],f=n||rue(e);return{dataArray:nue(e,f),relativeOrigin:f,originalExtent:c}}go("rasterTile",Rse);go("mvt",aie);go("geojsonvt",xne);go("testTile",nle);go("geojson",Yre);go("jsonTile",Bne);go("image",Uk);go("csv",kre);go("json",Dk);go("raster",yie);go("rasterRgb",Wse);go("rgb",jse);go("ndi",Pse);Kp("cluster",bj);Kp("filter",Tle);Kp("join",Wle);Kp("map",$le);Kp("grid",Ale);Kp("hexagon",Hle);var aue=Sle;const{merge:GEe}=Un;window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',(function(e){try{let f=function(){l||(l=!0,a())},h=function(){try{o.documentElement.doScroll("left")}catch{return void setTimeout(h,50)}f()};var r=(r=document.getElementsByTagName("script"))[r.length-1],t=r.getAttribute("data-injectcss"),r=r.getAttribute("data-disable-injectsvg");if(!r){var n,i,a,o,l,c=function(p,v){v.parentNode.insertBefore(p,v)};if(t&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(p){console&&console.log(p)}}n=function(){var p,v=document.createElement("div");v.innerHTML=e._iconfont_svg_string_3580659,(v=v.getElementsByTagName("svg")[0])&&(v.setAttribute("aria-hidden","true"),v.style.position="absolute",v.style.width=0,v.style.height=0,v.style.overflow="hidden",v=v,(p=document.body).firstChild?c(v,p.firstChild):p.appendChild(v))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(n,0):(i=function(){document.removeEventListener("DOMContentLoaded",i,!1),n()},document.addEventListener("DOMContentLoaded",i,!1)):document.attachEvent&&(a=n,o=e.document,l=!1,h(),o.onreadystatechange=function(){o.readyState=="complete"&&(o.onreadystatechange=null,f())})}}catch{}})(window);class Lg extends J3{constructor(t){super(),F(this,"controlOption",void 0),F(this,"container",void 0),F(this,"isShow",void 0),F(this,"sceneContainer",void 0),F(this,"scene",void 0),F(this,"mapsService",void 0),F(this,"renderService",void 0),F(this,"layerService",void 0),F(this,"controlService",void 0),F(this,"configService",void 0),Lg.controlCount++,this.controlOption=qe(qe({},this.getDefault(t)),t||{})}getOptions(){return this.controlOption}setOptions(t){const r=this.getDefault(t);Object.entries(t).forEach(([n,i])=>{i===void 0&&(t[n]=r[n])}),"position"in t&&this.setPosition(t.position),"className"in t&&this.setClassName(t.className),"style"in t&&this.setStyle(t.style),this.controlOption=qe(qe({},this.controlOption),t)}addTo(t){this.mapsService=t.mapService,this.renderService=t.rendererService,this.layerService=t.layerService,this.controlService=t.controlService,this.configService=t.globalConfigService,this.scene=t.sceneService,this.sceneContainer=t,this.isShow=!0,this.container=this.onAdd(),id(this.container,"l7-control");const{className:r,style:n}=this.controlOption;return r&&this.setClassName(r),n&&this.setStyle(n),this.insertContainer(),this.emit("add",this),this}remove(){if(!this.mapsService)return this;nu(this.container),this.onRemove(),this.emit("remove",this)}onAdd(){return ui("div")}onRemove(){}show(){const t=this.container;n1(t,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}hide(){const t=this.container;id(t,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}getDefault(t){return{position:o1.TOPRIGHT,name:`${Lg.controlCount}`}}getContainer(){return this.container}getIsShow(){return this.isShow}_refocusOnMap(t){if(this.mapsService&&t&&t.screenX>0&&t.screenY>0){const r=this.mapsService.getContainer();r!==null&&r.focus()}}setPosition(t=o1.TOPLEFT){const r=this.controlService;return r&&r.removeControl(this),this.controlOption.position=t,r&&r.addControl(this,this.sceneContainer),this}setClassName(t){const r=this.container,{className:n}=this.controlOption;n&&n1(r,n),t&&id(r,t)}setStyle(t){const r=this.container;t?r.setAttribute("style",t):r.removeAttribute("style")}insertContainer(){const t=this.controlOption.position,r=this.container;if(t instanceof Element)t.appendChild(r);else{const n=this.controlService.controlCorners[t];["bottomleft","bottomright","righttop","rightbottom"].includes(t)?n.insertBefore(r,n.firstChild):n.appendChild(r)}}checkUpdateOption(t,r){return r.some(n=>n in t)}}F(Lg,"controlCount",0);class v1 extends Za.EventEmitter{get buttonRect(){return this.button.getBoundingClientRect()}constructor(t,r){super(),F(this,"popperDOM",void 0),F(this,"contentDOM",void 0),F(this,"button",void 0),F(this,"option",void 0),F(this,"isShow",!1),F(this,"content",void 0),F(this,"timeout",null),F(this,"show",()=>this.isShow||!this.contentDOM.innerHTML?this:(this.resetPopperPosition(),n1(this.popperDOM,"l7-popper-hide"),this.isShow=!0,this.option.unique&&v1.conflictPopperList.forEach(n=>{n!==this&&n.isShow&&n.hide()}),this.emit("show"),window.addEventListener("pointerdown",this.onPopperUnClick),this)),F(this,"hide",()=>this.isShow?(id(this.popperDOM,"l7-popper-hide"),this.isShow=!1,this.emit("hide"),window.removeEventListener("pointerdown",this.onPopperUnClick),this):this),F(this,"setHideTimeout",()=>{this.timeout||(this.timeout=window.setTimeout(()=>{this.isShow&&(this.hide(),this.timeout=null)},300))}),F(this,"clearHideTimeout",()=>{this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)}),F(this,"onBtnClick",()=>{this.isShow?this.hide():this.show()}),F(this,"onPopperUnClick",n=>{Hte(n.target,[".l7-button-control",".l7-popper-content"])||this.hide()}),F(this,"onBtnMouseLeave",()=>{this.setHideTimeout()}),F(this,"onBtnMouseMove",()=>{this.clearHideTimeout(),!this.isShow&&this.show()}),this.button=t,this.option=r,this.init(),r.unique&&v1.conflictPopperList.push(this)}getPopperDOM(){return this.popperDOM}getIsShow(){return this.isShow}getContent(){return this.content}setContent(t){typeof t=="string"?this.contentDOM.innerHTML=t:t instanceof HTMLElement&&(K3(this.contentDOM),this.contentDOM.appendChild(t)),this.content=t}init(){const{trigger:t}=this.option;this.popperDOM=this.createPopper(),t==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}destroy(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),nu(this.popperDOM)}resetPopperPosition(){const t={},{container:r,offset:n=[0,0],placement:i}=this.option,[a,o]=n,l=this.button.getBoundingClientRect(),c=r.getBoundingClientRect(),{left:f,right:h,top:p,bottom:v}=zte(l,c);let g=!1,_=!1;/^(left|right)/.test(i)?(i.includes("left")?t.right=`${l.width+h}px`:i.includes("right")&&(t.left=`${l.width+f}px`),i.includes("start")?t.top=`${p}px`:i.includes("end")?t.bottom=`${v}px`:(t.top=`${p+l.height/2}px`,_=!0,t.transform=`translate(${a}px, calc(${o}px - 50%))`)):/^(top|bottom)/.test(i)&&(i.includes("top")?t.bottom=`${l.height+v}px`:i.includes("bottom")&&(t.top=`${l.height+p}px`),i.includes("start")?t.left=`${f}px`:i.includes("end")?t.right=`${h}px`:(t.left=`${f+l.width/2}px`,g=!0,t.transform=`translate(calc(${a}px - 50%), ${o}px)`)),t.transform=`translate(calc(${a}px - ${g?"50%":"0%"}), calc(${o}px - ${_?"50%":"0%"})`;const E=i.split("-");E.length&&id(this.popperDOM,E.map(b=>`l7-popper-${b}`).join(" ")),xk(this.popperDOM,jte(t))}createPopper(){const{container:t,className:r="",content:n}=this.option,i=ui("div",`l7-popper l7-popper-hide ${r}`),a=ui("div","l7-popper-content"),o=ui("div","l7-popper-arrow");return i.appendChild(a),i.appendChild(o),t.appendChild(i),this.popperDOM=i,this.contentDOM=a,n&&this.setContent(n),i}}F(v1,"conflictPopperList",[]);const oue=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.classList.add("l7-iconfont"),t.setAttribute("aria-hidden","true");const r=document.createElementNS("http://www.w3.org/2000/svg","use");return r.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${e}`),t.appendChild(r),t},fB=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],uu=(()=>{if(typeof document>"u")return!1;const e=fB[0],t={};for(const r of fB)if(r?.[1]in document){for(const[i,a]of r.entries())t[e[i]]=a;return t}return!1})(),dB={change:uu.fullscreenchange,error:uu.fullscreenerror};let Po={request(e=document.documentElement,t){return new Promise((r,n)=>{const i=()=>{Po.off("change",i),r()};Po.on("change",i);const a=e[uu.requestFullscreen](t);a instanceof Promise&&a.then(i).catch(n)})},exit(){return new Promise((e,t)=>{if(!Po.isFullscreen){e();return}const r=()=>{Po.off("change",r),e()};Po.on("change",r);const n=document[uu.exitFullscreen]();n instanceof Promise&&n.then(r).catch(t)})},toggle(e,t){return Po.isFullscreen?Po.exit():Po.request(e,t)},onchange(e){Po.on("change",e)},onerror(e){Po.on("error",e)},on(e,t){const r=dB[e];r&&document.addEventListener(r,t,!1)},off(e,t){const r=dB[e];r&&document.removeEventListener(r,t,!1)},raw:uu};Object.defineProperties(Po,{isFullscreen:{get:()=>!!document[uu.fullscreenElement]},element:{enumerable:!0,get:()=>{var e;return(e=document[uu.fullscreenElement])!==null&&e!==void 0?e:void 0}},isEnabled:{enumerable:!0,get:()=>!!document[uu.fullscreenEnabled]}});uu||(Po={isEnabled:!1});class sue extends Lg{getDefault(){return{position:o1.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}onAdd(){const t=ui("div","l7-control-logo");return this.setLogoContent(t),t}onRemove(){return null}setOptions(t){super.setOptions(t),this.checkUpdateOption(t,["img","href"])&&(K3(this.container),this.setLogoContent(this.container))}setLogoContent(t){const{href:r,img:n}=this.controlOption,i=ui("img");if(i.setAttribute("src",n),i.setAttribute("aria-label","AntV logo"),Vte(i),r){const a=ui("a","l7-control-logo-link");a.target="_blank",a.href=r,a.rel="noopener nofollow",a.setAttribute("rel","noopener nofollow"),a.appendChild(i),t.appendChild(a)}else t.appendChild(i)}}class lue{constructor(){F(this,"mapService",void 0),F(this,"fontService",void 0)}apply(t,{styleAttributeService:r,mapService:n,fontService:i}){var a=this;this.mapService=n,this.fontService=i,t.hooks.init.tapPromise("DataMappingPlugin",et(function*(){t.log(Mi.MappingStart,Qi.INIT),a.generateMaping(t,{styleAttributeService:r}),t.log(Mi.MappingEnd,Qi.INIT)})),t.hooks.beforeRenderData.tapPromise("DataMappingPlugin",(function(){var o=et(function*(l){if(!l)return l;t.dataState.dataMappingNeedUpdate=!1,t.log(Mi.MappingStart,Qi.UPDATE);const c=a.generateMaping(t,{styleAttributeService:r});return t.log(Mi.MappingEnd,Qi.UPDATE),c});return function(l){return o.apply(this,arguments)}})()),t.hooks.beforeRender.tap("DataMappingPlugin",()=>{const o=t.getSource();if(t.layerModelNeedUpdate||!o||!o.inited)return;const l=r.getLayerStyleAttributes()||[],c=r.getLayerStyleAttribute("filter"),{dataArray:f}=o.data;if(Array.isArray(f)&&f.length===0)return;const h=l.filter(v=>v.needRemapping);let p=f;if(c!=null&&c.needRemapping&&c!==null&&c!==void 0&&c.scale&&(p=f.filter(v=>this.applyAttributeMapping(c,v)[0])),h.length){const v=this.mapping(t,h,p,t.getEncodedData());t.setEncodedData(v)}})}generateMaping(t,{styleAttributeService:r}){const n=r.getLayerStyleAttributes()||[],i=r.getLayerStyleAttribute("filter"),{dataArray:a}=t.getSource().data;let o=a;i!=null&&i.scale&&(o=a.filter(c=>this.applyAttributeMapping(i,c)[0])),o=t.processData(o);const l=this.mapping(t,n,o,void 0);return t.setEncodedData(l),t.emit("dataUpdate",null),!0}mapping(t,r,n,i){const a=r.filter(l=>l.scale!==void 0).filter(l=>l.name!=="filter"),o=n.map((l,c)=>{const f=i?i[c]:{},h=qe({id:l._id,coordinates:l.coordinates},f);return a.forEach(p=>{let v=this.applyAttributeMapping(p,l);(p.name==="color"||p.name==="stroke")&&(v=v.map(g=>pn(g))),h[p.name]=Array.isArray(v)&&v.length===1?v[0]:v,p.name==="shape"&&(h.shape=this.fontService.getIconFontKey(h[p.name]))}),h});return r.forEach(l=>{l.needRemapping=!1}),this.adjustData2SimpleCoordinates(o),o}adjustData2SimpleCoordinates(t){t.length>0&&this.mapService.version==="SIMPLE"&&t.map(r=>{r.simpleCoordinate||(r.coordinates=this.unProjectCoordinates(r.coordinates),r.simpleCoordinate=!0)})}unProjectCoordinates(t){if(typeof t[0]=="number")return this.mapService.simpleMapCoord.unproject(t);if(t[0]&&t[0][0]instanceof Array){const r=[];return t.map(n=>{const i=[];n.map(a=>{i.push(this.mapService.simpleMapCoord.unproject(a))}),r.push(i)}),r}else{const r=[];return t.map(n=>{r.push(this.mapService.simpleMapCoord.unproject(n))}),r}}applyAttributeMapping(t,r){var n;if(!t.scale)return[];const i=(t==null||(n=t.scale)===null||n===void 0?void 0:n.scalers)||[],a=[];return i.forEach(({field:l})=>{var c;(r.hasOwnProperty(l)||((c=t.scale)===null||c===void 0?void 0:c.type)==="variable")&&a.push(r[l])}),t.mapping?t.mapping(a):[]}getArrowPoints(t,r){const n=[r[0]-t[0],r[1]-t[1]],i=Zte(n);return[t[0]+i[0]*1e-4,t[1]+i[1]*1e-4]}}class uue{constructor(){F(this,"mapService",void 0)}apply(t){var r=this;this.mapService=t.getContainer().mapService,t.hooks.init.tapPromise("DataSourcePlugin",et(function*(){t.log(Mi.SourceInitStart,Qi.INIT);let n=t.getSource();if(!n){const{data:i,options:a}=t.sourceOption||t.defaultSourceConfig;n=new aue(i,a),t.setSource(n)}n.inited?(r.updateClusterData(t),t.log(Mi.SourceInitEnd,Qi.INIT)):yield new Promise(i=>{n.on("update",a=>{a.type==="inited"&&(r.updateClusterData(t),t.log(Mi.SourceInitEnd,Qi.INIT)),i(null)})})})),t.hooks.beforeRenderData.tapPromise("DataSourcePlugin",et(function*(){const n=r.updateClusterData(t),i=t.dataState.dataSourceNeedUpdate;return t.dataState.dataSourceNeedUpdate=!1,n||i}))}updateClusterData(t){if(t.isTileLayer||t.tileLayer||!t.getSource())return!1;const r=t.getSource(),n=r.cluster,{zoom:i=0}=r.clusterOptions,a=this.mapService.getZoom()-1,o=t.dataState.dataSourceNeedUpdate;return n&&o&&r.updateClusterData(Math.floor(a)),n&&Math.abs(t.clusterZoom-a)>=1?(i!==Math.floor(a)&&r.updateClusterData(Math.floor(a)),t.clusterZoom=a,!0):!1}}function hB(e,t){let r,n;for(const i of e)i!=null&&(r===void 0?i>=i&&(r=n=i):(r>i&&(r=i),n<i&&(n=i)));return[r,n]}function cue(e,t,r,n,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*r+(1+3*e+3*a-3*o)*n+o*i)/6}function fue(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),i=e[n],a=e[n+1],o=n>0?e[n-1]:2*i-a,l=n<t-1?e[n+2]:2*a-i;return cue((r-n/t)*t,o,i,a,l)}}function uO(e){return function(){return e}}function due(e,t){return function(r){return e+r*t}}function hue(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function pue(e){return(e=+e)==1?Sj:function(t,r){return r-t?hue(t,r,e):uO(isNaN(t)?r:t)}}function Sj(e,t){var r=t-e;return r?due(e,r):uO(isNaN(e)?t:e)}const pB=(function e(t){var r=pue(t);function n(i,a){var o=r((i=r1(i)).r,(a=r1(a)).r),l=r(i.g,a.g),c=r(i.b,a.b),f=Sj(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=c(h),i.opacity=f(h),i+""}}return n.gamma=e,n})(1);function mue(e){return function(t){var r=t.length,n=new Array(r),i=new Array(r),a=new Array(r),o,l;for(o=0;o<r;++o)l=r1(t[o]),n[o]=l.r||0,i[o]=l.g||0,a[o]=l.b||0;return n=e(n),i=e(i),a=e(a),l.opacity=1,function(c){return l.r=n(c),l.g=i(c),l.b=a(c),l+""}}}var vue=mue(fue);function gue(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=e[i]*(1-a)+t[i]*a;return n}}function _ue(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function yue(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)i[o]=cO(e[o],t[o]);for(;o<r;++o)a[o]=t[o];return function(l){for(o=0;o<n;++o)a[o]=i[o](l);return a}}function Eue(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function g1(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function bue(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=cO(e[i],t[i]):n[i]=t[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var Q2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,MR=new RegExp(Q2.source,"g");function xue(e){return function(){return e}}function Sue(e){return function(t){return e(t)+""}}function Tue(e,t){var r=Q2.lastIndex=MR.lastIndex=0,n,i,a,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=Q2.exec(e))&&(i=MR.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),l[o]?l[o]+=a:l[++o]=a),(n=n[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:g1(n,i)})),r=MR.lastIndex;return r<t.length&&(a=t.slice(r),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?Sue(c[0].x):xue(t):(t=c.length,function(f){for(var h=0,p;h<t;++h)l[(p=c[h]).i]=p.x(f);return l.join("")})}function cO(e,t){var r=typeof t,n;return t==null||r==="boolean"?uO(t):(r==="number"?g1:r==="string"?(n=Ap(t))?(t=n,pB):Tue:t instanceof Ap?pB:t instanceof Date?Eue:_ue(t)?gue:Array.isArray(t)?yue:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?bue:g1)(e,t)}function Aue(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function fO(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Tj(e){return e.length===1&&(e=Rue(e)),{left:function(t,r,n,i){for(n==null&&(n=0),i==null&&(i=t.length);n<i;){var a=n+i>>>1;e(t[a],r)<0?n=a+1:i=a}return n},right:function(t,r,n,i){for(n==null&&(n=0),i==null&&(i=t.length);n<i;){var a=n+i>>>1;e(t[a],r)>0?i=a:n=a+1}return n}}}function Rue(e){return function(t,r){return fO(e(t),r)}}var Cue=Tj(fO),AE=Cue.right;function Oue(e){return e===null?NaN:+e}var J2=Math.sqrt(50),eC=Math.sqrt(10),tC=Math.sqrt(2);function Aj(e,t,r){var n,i=-1,a,o,l;if(t=+t,e=+e,r=+r,e===t&&r>0)return[e];if((n=t<e)&&(a=e,e=t,t=a),(l=Cy(e,t,r))===0||!isFinite(l))return[];if(l>0)for(e=Math.ceil(e/l),t=Math.floor(t/l),o=new Array(a=Math.ceil(t-e+1));++i<a;)o[i]=(e+i)*l;else for(e=Math.floor(e*l),t=Math.ceil(t*l),o=new Array(a=Math.ceil(e-t+1));++i<a;)o[i]=(e-i)/l;return n&&o.reverse(),o}function Cy(e,t,r){var n=(t-e)/Math.max(0,r),i=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,i);return i>=0?(a>=J2?10:a>=eC?5:a>=tC?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=J2?10:a>=eC?5:a>=tC?2:1)}function rC(e,t,r){var n=Math.abs(t-e)/Math.max(0,r),i=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),a=n/i;return a>=J2?i*=10:a>=eC?i*=5:a>=tC&&(i*=2),t<e?-i:i}function wue(e,t,r){if(r==null&&(r=Oue),!!(n=e.length)){if((t=+t)<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),o=+r(e[a],a,e),l=+r(e[a+1],a+1,e);return o+(l-o)*(i-a)}}function tf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Rj(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e);break}return this}var Mo="$";function _1(){}_1.prototype=y1.prototype={constructor:_1,has:function(e){return Mo+e in this},get:function(e){return this[Mo+e]},set:function(e,t){return this[Mo+e]=t,this},remove:function(e){var t=Mo+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===Mo&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===Mo&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===Mo&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===Mo&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===Mo&&++e;return e},empty:function(){for(var e in this)if(e[0]===Mo)return!1;return!0},each:function(e){for(var t in this)t[0]===Mo&&e(this[t],t.slice(1),this)}};function y1(e,t){var r=new _1;if(e instanceof _1)e.each(function(l,c){r.set(c,l)});else if(Array.isArray(e)){var n=-1,i=e.length,a;if(t==null)for(;++n<i;)r.set(n,e[n]);else for(;++n<i;)r.set(t(a=e[n],n,e),a)}else if(e)for(var o in e)r.set(o,e[o]);return r}function mB(){}var qf=y1.prototype;mB.prototype={constructor:mB,has:qf.has,add:function(e){return e+="",this[Mo+e]=e,this},remove:qf.remove,clear:qf.clear,values:qf.keys,size:qf.size,empty:qf.empty,each:qf.each};var Cj=Array.prototype,Oj=Cj.map,vd=Cj.slice,vB={name:"implicit"};function E1(){var e=y1(),t=[],r=[],n=vB;function i(a){var o=a+"",l=e.get(o);if(!l){if(n!==vB)return n;e.set(o,l=t.push(a))}return r[(l-1)%r.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=y1();for(var o=-1,l=a.length,c,f;++o<l;)e.has(f=(c=a[o])+"")||e.set(f,t.push(c));return i},i.range=function(a){return arguments.length?(r=vd.call(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return E1(t,r).unknown(n)},tf.apply(i,arguments),i}function Nue(e){return function(){return e}}function Mue(e){return+e}var gB=[0,1];function da(e){return e}function nC(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Nue(isNaN(t)?NaN:.5)}function _B(e){var t=e[0],r=e[e.length-1],n;return t>r&&(n=t,t=r,r=n),function(i){return Math.max(t,Math.min(r,i))}}function Iue(e,t,r){var n=e[0],i=e[1],a=t[0],o=t[1];return i<n?(n=nC(i,n),a=r(o,a)):(n=nC(n,i),a=r(a,o)),function(l){return a(n(l))}}function Pue(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)i[o]=nC(e[o],e[o+1]),a[o]=r(t[o],t[o+1]);return function(l){var c=AE(e,l,1,n)-1;return a[c](i[c](l))}}function RE(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function dO(){var e=gB,t=gB,r=cO,n,i,a,o=da,l,c,f;function h(){return l=Math.min(e.length,t.length)>2?Pue:Iue,c=f=null,p}function p(v){return isNaN(v=+v)?a:(c||(c=l(e.map(n),t,r)))(n(o(v)))}return p.invert=function(v){return o(i((f||(f=l(t,e.map(n),g1)))(v)))},p.domain=function(v){return arguments.length?(e=Oj.call(v,Mue),o===da||(o=_B(e)),h()):e.slice()},p.range=function(v){return arguments.length?(t=vd.call(v),h()):t.slice()},p.rangeRound=function(v){return t=vd.call(v),r=Aue,h()},p.clamp=function(v){return arguments.length?(o=v?_B(e):da,p):o!==da},p.interpolate=function(v){return arguments.length?(r=v,h()):r},p.unknown=function(v){return arguments.length?(a=v,p):a},function(v,g){return n=v,i=g,h()}}function wj(e,t){return dO()(e,t)}function Due(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function b1(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Op(e){return e=b1(Math.abs(e)),e?e[1]:NaN}function Lue(e,t){return function(r,n){for(var i=r.length,a=[],o=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),a.push(r.substring(i-=l,i+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function Bue(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Fue=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function x1(e){if(!(t=Fue.exec(e)))throw new Error("invalid format: "+e);var t;return new hO({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}x1.prototype=hO.prototype;function hO(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}hO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Uue(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var Nj;function kue(e,t){var r=b1(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(Nj=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+b1(e,Math.max(0,t+a-1))[0]}function yB(e,t){var r=b1(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const EB={"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:Due,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return yB(e*100,t)},r:yB,s:kue,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function bB(e){return e}var xB=Array.prototype.map,SB=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function jue(e){var t=e.grouping===void 0||e.thousands===void 0?bB:Lue(xB.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal+"",a=e.numerals===void 0?bB:Bue(xB.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function f(p){p=x1(p);var v=p.fill,g=p.align,_=p.sign,E=p.symbol,b=p.zero,S=p.width,T=p.comma,C=p.precision,M=p.trim,D=p.type;D==="n"?(T=!0,D="g"):EB[D]||(C===void 0&&(C=12),M=!0,D="g"),(b||v==="0"&&g==="=")&&(b=!0,v="0",g="=");var I=E==="$"?r:E==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",N=E==="$"?n:/[%p]/.test(D)?o:"",j=EB[D],re=/[defgprs%]/.test(D);C=C===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function Q(X){var R=I,P=N,V,le,w;if(D==="c")P=j(X)+P,X="";else{X=+X;var z=X<0||1/X<0;if(X=isNaN(X)?c:j(Math.abs(X),C),M&&(X=Uue(X)),z&&+X==0&&_!=="+"&&(z=!1),R=(z?_==="("?_:l:_==="-"||_==="("?"":_)+R,P=(D==="s"?SB[8+Nj/3]:"")+P+(z&&_==="("?")":""),re){for(V=-1,le=X.length;++V<le;)if(w=X.charCodeAt(V),48>w||w>57){P=(w===46?i+X.slice(V+1):X.slice(V))+P,X=X.slice(0,V);break}}}T&&!b&&(X=t(X,1/0));var H=R.length+X.length+P.length,ee=H<S?new Array(S-H+1).join(v):"";switch(T&&b&&(X=t(ee+X,ee.length?S-P.length:1/0),ee=""),g){case"<":X=R+X+P+ee;break;case"=":X=R+ee+X+P;break;case"^":X=ee.slice(0,H=ee.length>>1)+R+X+P+ee.slice(H);break;default:X=ee+R+X+P;break}return a(X)}return Q.toString=function(){return p+""},Q}function h(p,v){var g=f((p=x1(p),p.type="f",p)),_=Math.max(-8,Math.min(8,Math.floor(Op(v)/3)))*3,E=Math.pow(10,-_),b=SB[8+_/3];return function(S){return g(E*S)+b}}return{format:f,formatPrefix:h}}var ey,pO,Mj;zue({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function zue(e){return ey=jue(e),pO=ey.format,Mj=ey.formatPrefix,ey}function Vue(e){return Math.max(0,-Op(Math.abs(e)))}function Hue(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Op(t)/3)))*3-Op(Math.abs(e)))}function Xue(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Op(t)-Op(e))+1}function que(e,t,r,n){var i=rC(e,t,r),a;switch(n=x1(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=Hue(i,o))&&(n.precision=a),Mj(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=Xue(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=Vue(i))&&(n.precision=a-(n.type==="%")*2);break}}return pO(n)}function t0(e){var t=e.domain;return e.ticks=function(r){var n=t();return Aj(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return que(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,a=n.length-1,o=n[i],l=n[a],c;return l<o&&(c=o,o=l,l=c,c=i,i=a,a=c),c=Cy(o,l,r),c>0?(o=Math.floor(o/c)*c,l=Math.ceil(l/c)*c,c=Cy(o,l,r)):c<0&&(o=Math.ceil(o*c)/c,l=Math.floor(l*c)/c,c=Cy(o,l,r)),c>0?(n[i]=Math.floor(o/c)*c,n[a]=Math.ceil(l/c)*c,t(n)):c<0&&(n[i]=Math.ceil(o*c)/c,n[a]=Math.floor(l*c)/c,t(n)),e},e}function Ij(){var e=wj(da,da);return e.copy=function(){return RE(e,Ij())},tf.apply(e,arguments),t0(e)}function Pj(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],a=e[n],o;return a<i&&(o=r,r=n,n=o,o=i,i=a,a=o),e[r]=t.floor(i),e[n]=t.ceil(a),e}function TB(e){return Math.log(e)}function AB(e){return Math.exp(e)}function Gue(e){return-Math.log(-e)}function Wue(e){return-Math.exp(-e)}function $ue(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Yue(e){return e===10?$ue:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function Zue(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function RB(e){return function(t){return-e(-t)}}function Kue(e){var t=e(TB,AB),r=t.domain,n=10,i,a;function o(){return i=Zue(n),a=Yue(n),r()[0]<0?(i=RB(i),a=RB(a),e(Gue,Wue)):e(TB,AB),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=function(l){var c=r(),f=c[0],h=c[c.length-1],p;(p=h<f)&&(v=f,f=h,h=v);var v=i(f),g=i(h),_,E,b,S=l==null?10:+l,T=[];if(!(n%1)&&g-v<S){if(v=Math.round(v)-1,g=Math.round(g)+1,f>0){for(;v<g;++v)for(E=1,_=a(v);E<n;++E)if(b=_*E,!(b<f)){if(b>h)break;T.push(b)}}else for(;v<g;++v)for(E=n-1,_=a(v);E>=1;--E)if(b=_*E,!(b<f)){if(b>h)break;T.push(b)}}else T=Aj(v,g,Math.min(g-v,S)).map(a);return p?T.reverse():T},t.tickFormat=function(l,c){if(c==null&&(c=n===10?".0e":","),typeof c!="function"&&(c=pO(c)),l===1/0)return c;l==null&&(l=10);var f=Math.max(1,n*l/t.ticks().length);return function(h){var p=h/a(Math.round(i(h)));return p*n<n-.5&&(p*=n),p<=f?c(h):""}},t.nice=function(){return r(Pj(r(),{floor:function(l){return a(Math.floor(i(l)))},ceil:function(l){return a(Math.ceil(i(l)))}}))},t}function Dj(){var e=Kue(dO()).domain([1,10]);return e.copy=function(){return RE(e,Dj()).base(e.base())},tf.apply(e,arguments),e}function CB(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Que(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Jue(e){return e<0?-e*e:e*e}function ece(e){var t=e(da,da),r=1;function n(){return r===1?e(da,da):r===.5?e(Que,Jue):e(CB(r),CB(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},t0(t)}function Lj(){var e=ece(dO());return e.copy=function(){return RE(e,Lj()).exponent(e.exponent())},tf.apply(e,arguments),e}function Bj(){var e=[],t=[],r=[],n;function i(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=wue(e,o/l);return a}function a(o){return isNaN(o=+o)?n:t[AE(r,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(var l=0,c=o.length,f;l<c;++l)f=o[l],f!=null&&!isNaN(f=+f)&&e.push(f);return e.sort(fO),i()},a.range=function(o){return arguments.length?(t=vd.call(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return Bj().domain(e).range(t).unknown(n)},tf.apply(a,arguments)}function Fj(){var e=0,t=1,r=1,n=[.5],i=[0,1],a;function o(c){return c<=c?i[AE(n,c,0,r)]:a}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?(e=+c[0],t=+c[1],l()):[e,t]},o.range=function(c){return arguments.length?(r=(i=vd.call(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var f=i.indexOf(c);return f<0?[NaN,NaN]:f<1?[e,n[0]]:f>=r?[n[r-1],t]:[n[f-1],n[f]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Fj().domain([e,t]).range(i).unknown(a)},tf.apply(t0(o),arguments)}function Uj(){var e=[.5],t=[0,1],r,n=1;function i(a){return a<=a?t[AE(e,a,0,n)]:r}return i.domain=function(a){return arguments.length?(e=vd.call(a),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=vd.call(a),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Uj().domain(e).range(t).unknown(r)},tf.apply(i,arguments)}var IR=new Date,PR=new Date;function wa(e,t,r,n){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=function(a){return e(a=new Date(+a)),a},i.ceil=function(a){return e(a=new Date(a-1)),t(a,1),e(a),a},i.round=function(a){var o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=function(a,o){return t(a=new Date(+a),o==null?1:Math.floor(o)),a},i.range=function(a,o,l){var c=[],f;if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;do c.push(f=new Date(+a)),t(a,l),e(a);while(f<a&&a<o);return c},i.filter=function(a){return wa(function(o){if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},function(o,l){if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););})},r&&(i.count=function(a,o){return IR.setTime(+a),PR.setTime(+o),e(IR),e(PR),Math.floor(r(IR,PR))},i.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?function(o){return n(o)%a===0}:function(o){return i.count(0,o)%a===0}):i}),i}var S1=wa(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});S1.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?wa(function(t){t.setTime(Math.floor(t/e)*e)},function(t,r){t.setTime(+t+r*e)},function(t,r){return(r-t)/e}):S1};S1.range;var T1=1e3,Bg=6e4,OB=36e5,kj=864e5,jj=6048e5,zj=wa(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*T1)},function(e,t){return(t-e)/T1},function(e){return e.getUTCSeconds()});zj.range;var Vj=wa(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*T1)},function(e,t){e.setTime(+e+t*Bg)},function(e,t){return(t-e)/Bg},function(e){return e.getMinutes()});Vj.range;var Hj=wa(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*T1-e.getMinutes()*Bg)},function(e,t){e.setTime(+e+t*OB)},function(e,t){return(t-e)/OB},function(e){return e.getHours()});Hj.range;var CE=wa(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bg)/kj},function(e){return e.getDate()-1});CE.range;function Rd(e){return wa(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,r){t.setDate(t.getDate()+r*7)},function(t,r){return(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Bg)/jj})}var mO=Rd(0),A1=Rd(1),tce=Rd(2),rce=Rd(3),wp=Rd(4),nce=Rd(5),ice=Rd(6);mO.range;A1.range;tce.range;rce.range;wp.range;nce.range;ice.range;var Xj=wa(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});Xj.range;var Gc=wa(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});Gc.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:wa(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,r){t.setFullYear(t.getFullYear()+r*e)})};Gc.range;var vO=wa(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/kj},function(e){return e.getUTCDate()-1});vO.range;function Cd(e){return wa(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCDate(t.getUTCDate()+r*7)},function(t,r){return(r-t)/jj})}var qj=Cd(0),R1=Cd(1),ace=Cd(2),oce=Cd(3),Np=Cd(4),sce=Cd(5),lce=Cd(6);qj.range;R1.range;ace.range;oce.range;Np.range;sce.range;lce.range;var gd=wa(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});gd.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:wa(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r*e)})};gd.range;function DR(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function LR(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ov(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function uce(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,f=wv(i),h=Nv(i),p=wv(a),v=Nv(a),g=wv(o),_=Nv(o),E=wv(l),b=Nv(l),S=wv(c),T=Nv(c),C={a:z,A:H,b:ee,B:oe,c:null,d:DB,e:DB,f:Ice,g:Vce,G:Xce,H:wce,I:Nce,j:Mce,L:Gj,m:Pce,M:Dce,p:ge,q:ye,Q:FB,s:UB,S:Lce,u:Bce,U:Fce,V:Uce,w:kce,W:jce,x:null,X:null,y:zce,Y:Hce,Z:qce,"%":BB},M={a:Pe,A:tt,b:We,B:Pt,c:null,d:LB,e:LB,f:Yce,g:afe,G:sfe,H:Gce,I:Wce,j:$ce,L:$j,m:Zce,M:Kce,p:$e,q:Tt,Q:FB,s:UB,S:Qce,u:Jce,U:efe,V:tfe,w:rfe,W:nfe,x:null,X:null,y:ife,Y:ofe,Z:lfe,"%":BB},D={a:Q,A:X,b:R,B:P,c:V,d:IB,e:IB,f:Ace,g:MB,G:NB,H:PB,I:PB,j:bce,L:Tce,m:Ece,M:xce,p:re,q:yce,Q:Cce,s:Oce,S:Sce,u:pce,U:mce,V:vce,w:hce,W:gce,x:le,X:w,y:MB,Y:NB,Z:_ce,"%":Rce};C.x=I(r,C),C.X=I(n,C),C.c=I(t,C),M.x=I(r,M),M.X=I(n,M),M.c=I(t,M);function I(je,Ee){return function(st){var Oe=[],$t=-1,qt=0,xt=je.length,Dt,It,er;for(st instanceof Date||(st=new Date(+st));++$t<xt;)je.charCodeAt($t)===37&&(Oe.push(je.slice(qt,$t)),(It=wB[Dt=je.charAt(++$t)])!=null?Dt=je.charAt(++$t):It=Dt==="e"?" ":"0",(er=Ee[Dt])&&(Dt=er(st,It)),Oe.push(Dt),qt=$t+1);return Oe.push(je.slice(qt,$t)),Oe.join("")}}function N(je,Ee){return function(st){var Oe=Ov(1900,void 0,1),$t=j(Oe,je,st+="",0),qt,xt;if($t!=st.length)return null;if("Q"in Oe)return new Date(Oe.Q);if("s"in Oe)return new Date(Oe.s*1e3+("L"in Oe?Oe.L:0));if(Ee&&!("Z"in Oe)&&(Oe.Z=0),"p"in Oe&&(Oe.H=Oe.H%12+Oe.p*12),Oe.m===void 0&&(Oe.m="q"in Oe?Oe.q:0),"V"in Oe){if(Oe.V<1||Oe.V>53)return null;"w"in Oe||(Oe.w=1),"Z"in Oe?(qt=LR(Ov(Oe.y,0,1)),xt=qt.getUTCDay(),qt=xt>4||xt===0?R1.ceil(qt):R1(qt),qt=vO.offset(qt,(Oe.V-1)*7),Oe.y=qt.getUTCFullYear(),Oe.m=qt.getUTCMonth(),Oe.d=qt.getUTCDate()+(Oe.w+6)%7):(qt=DR(Ov(Oe.y,0,1)),xt=qt.getDay(),qt=xt>4||xt===0?A1.ceil(qt):A1(qt),qt=CE.offset(qt,(Oe.V-1)*7),Oe.y=qt.getFullYear(),Oe.m=qt.getMonth(),Oe.d=qt.getDate()+(Oe.w+6)%7)}else("W"in Oe||"U"in Oe)&&("w"in Oe||(Oe.w="u"in Oe?Oe.u%7:"W"in Oe?1:0),xt="Z"in Oe?LR(Ov(Oe.y,0,1)).getUTCDay():DR(Ov(Oe.y,0,1)).getDay(),Oe.m=0,Oe.d="W"in Oe?(Oe.w+6)%7+Oe.W*7-(xt+5)%7:Oe.w+Oe.U*7-(xt+6)%7);return"Z"in Oe?(Oe.H+=Oe.Z/100|0,Oe.M+=Oe.Z%100,LR(Oe)):DR(Oe)}}function j(je,Ee,st,Oe){for(var $t=0,qt=Ee.length,xt=st.length,Dt,It;$t<qt;){if(Oe>=xt)return-1;if(Dt=Ee.charCodeAt($t++),Dt===37){if(Dt=Ee.charAt($t++),It=D[Dt in wB?Ee.charAt($t++):Dt],!It||(Oe=It(je,st,Oe))<0)return-1}else if(Dt!=st.charCodeAt(Oe++))return-1}return Oe}function re(je,Ee,st){var Oe=f.exec(Ee.slice(st));return Oe?(je.p=h[Oe[0].toLowerCase()],st+Oe[0].length):-1}function Q(je,Ee,st){var Oe=g.exec(Ee.slice(st));return Oe?(je.w=_[Oe[0].toLowerCase()],st+Oe[0].length):-1}function X(je,Ee,st){var Oe=p.exec(Ee.slice(st));return Oe?(je.w=v[Oe[0].toLowerCase()],st+Oe[0].length):-1}function R(je,Ee,st){var Oe=S.exec(Ee.slice(st));return Oe?(je.m=T[Oe[0].toLowerCase()],st+Oe[0].length):-1}function P(je,Ee,st){var Oe=E.exec(Ee.slice(st));return Oe?(je.m=b[Oe[0].toLowerCase()],st+Oe[0].length):-1}function V(je,Ee,st){return j(je,t,Ee,st)}function le(je,Ee,st){return j(je,r,Ee,st)}function w(je,Ee,st){return j(je,n,Ee,st)}function z(je){return o[je.getDay()]}function H(je){return a[je.getDay()]}function ee(je){return c[je.getMonth()]}function oe(je){return l[je.getMonth()]}function ge(je){return i[+(je.getHours()>=12)]}function ye(je){return 1+~~(je.getMonth()/3)}function Pe(je){return o[je.getUTCDay()]}function tt(je){return a[je.getUTCDay()]}function We(je){return c[je.getUTCMonth()]}function Pt(je){return l[je.getUTCMonth()]}function $e(je){return i[+(je.getUTCHours()>=12)]}function Tt(je){return 1+~~(je.getUTCMonth()/3)}return{format:function(je){var Ee=I(je+="",C);return Ee.toString=function(){return je},Ee},parse:function(je){var Ee=N(je+="",!1);return Ee.toString=function(){return je},Ee},utcFormat:function(je){var Ee=I(je+="",M);return Ee.toString=function(){return je},Ee},utcParse:function(je){var Ee=N(je+="",!0);return Ee.toString=function(){return je},Ee}}}var wB={"-":"",_:" ",0:"0"},Vi=/^\s*\d+/,cce=/^%/,fce=/[\\^$*+?|[\]().{}]/g;function sn(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function dce(e){return e.replace(fce,"\\$&")}function wv(e){return new RegExp("^(?:"+e.map(dce).join("|")+")","i")}function Nv(e){for(var t={},r=-1,n=e.length;++r<n;)t[e[r].toLowerCase()]=r;return t}function hce(e,t,r){var n=Vi.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function pce(e,t,r){var n=Vi.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function mce(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function vce(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function gce(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function NB(e,t,r){var n=Vi.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function MB(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function _ce(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function yce(e,t,r){var n=Vi.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Ece(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function IB(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function bce(e,t,r){var n=Vi.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function PB(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function xce(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Sce(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Tce(e,t,r){var n=Vi.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Ace(e,t,r){var n=Vi.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Rce(e,t,r){var n=cce.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Cce(e,t,r){var n=Vi.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Oce(e,t,r){var n=Vi.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function DB(e,t){return sn(e.getDate(),t,2)}function wce(e,t){return sn(e.getHours(),t,2)}function Nce(e,t){return sn(e.getHours()%12||12,t,2)}function Mce(e,t){return sn(1+CE.count(Gc(e),e),t,3)}function Gj(e,t){return sn(e.getMilliseconds(),t,3)}function Ice(e,t){return Gj(e,t)+"000"}function Pce(e,t){return sn(e.getMonth()+1,t,2)}function Dce(e,t){return sn(e.getMinutes(),t,2)}function Lce(e,t){return sn(e.getSeconds(),t,2)}function Bce(e){var t=e.getDay();return t===0?7:t}function Fce(e,t){return sn(mO.count(Gc(e)-1,e),t,2)}function Wj(e){var t=e.getDay();return t>=4||t===0?wp(e):wp.ceil(e)}function Uce(e,t){return e=Wj(e),sn(wp.count(Gc(e),e)+(Gc(e).getDay()===4),t,2)}function kce(e){return e.getDay()}function jce(e,t){return sn(A1.count(Gc(e)-1,e),t,2)}function zce(e,t){return sn(e.getFullYear()%100,t,2)}function Vce(e,t){return e=Wj(e),sn(e.getFullYear()%100,t,2)}function Hce(e,t){return sn(e.getFullYear()%1e4,t,4)}function Xce(e,t){var r=e.getDay();return e=r>=4||r===0?wp(e):wp.ceil(e),sn(e.getFullYear()%1e4,t,4)}function qce(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+sn(t/60|0,"0",2)+sn(t%60,"0",2)}function LB(e,t){return sn(e.getUTCDate(),t,2)}function Gce(e,t){return sn(e.getUTCHours(),t,2)}function Wce(e,t){return sn(e.getUTCHours()%12||12,t,2)}function $ce(e,t){return sn(1+vO.count(gd(e),e),t,3)}function $j(e,t){return sn(e.getUTCMilliseconds(),t,3)}function Yce(e,t){return $j(e,t)+"000"}function Zce(e,t){return sn(e.getUTCMonth()+1,t,2)}function Kce(e,t){return sn(e.getUTCMinutes(),t,2)}function Qce(e,t){return sn(e.getUTCSeconds(),t,2)}function Jce(e){var t=e.getUTCDay();return t===0?7:t}function efe(e,t){return sn(qj.count(gd(e)-1,e),t,2)}function Yj(e){var t=e.getUTCDay();return t>=4||t===0?Np(e):Np.ceil(e)}function tfe(e,t){return e=Yj(e),sn(Np.count(gd(e),e)+(gd(e).getUTCDay()===4),t,2)}function rfe(e){return e.getUTCDay()}function nfe(e,t){return sn(R1.count(gd(e)-1,e),t,2)}function ife(e,t){return sn(e.getUTCFullYear()%100,t,2)}function afe(e,t){return e=Yj(e),sn(e.getUTCFullYear()%100,t,2)}function ofe(e,t){return sn(e.getUTCFullYear()%1e4,t,4)}function sfe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Np(e):Np.ceil(e),sn(e.getUTCFullYear()%1e4,t,4)}function lfe(){return"+0000"}function BB(){return"%"}function FB(e){return+e}function UB(e){return Math.floor(+e/1e3)}var Xh,Zj;ufe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ufe(e){return Xh=uce(e),Zj=Xh.format,Xh.parse,Xh.utcFormat,Xh.utcParse,Xh}var ig=1e3,ag=ig*60,og=ag*60,Fg=og*24,cfe=Fg*7,kB=Fg*30,BR=Fg*365;function ffe(e){return new Date(e)}function dfe(e){return e instanceof Date?+e:+new Date(+e)}function Kj(e,t,r,n,i,a,o,l,c){var f=wj(da,da),h=f.invert,p=f.domain,v=c(".%L"),g=c(":%S"),_=c("%I:%M"),E=c("%I %p"),b=c("%a %d"),S=c("%b %d"),T=c("%B"),C=c("%Y"),M=[[o,1,ig],[o,5,5*ig],[o,15,15*ig],[o,30,30*ig],[a,1,ag],[a,5,5*ag],[a,15,15*ag],[a,30,30*ag],[i,1,og],[i,3,3*og],[i,6,6*og],[i,12,12*og],[n,1,Fg],[n,2,2*Fg],[r,1,cfe],[t,1,kB],[t,3,3*kB],[e,1,BR]];function D(N){return(o(N)<N?v:a(N)<N?g:i(N)<N?_:n(N)<N?E:t(N)<N?r(N)<N?b:S:e(N)<N?T:C)(N)}function I(N,j,re,Q){if(N==null&&(N=10),typeof N=="number"){var X=Math.abs(re-j)/N,R=Tj(function(P){return P[2]}).right(M,X);R===M.length?(Q=rC(j/BR,re/BR,N),N=e):R?(R=M[X/M[R-1][2]<M[R][2]/X?R-1:R],Q=R[1],N=R[0]):(Q=Math.max(rC(j,re,N),1),N=l)}return Q==null?N:N.every(Q)}return f.invert=function(N){return new Date(h(N))},f.domain=function(N){return arguments.length?p(Oj.call(N,dfe)):p().map(ffe)},f.ticks=function(N,j){var re=p(),Q=re[0],X=re[re.length-1],R=X<Q,P;return R&&(P=Q,Q=X,X=P),P=I(N,Q,X,j),P=P?P.range(Q,X+1):[],R?P.reverse():P},f.tickFormat=function(N,j){return j==null?D:c(j)},f.nice=function(N,j){var re=p();return(N=I(N,re[0],re[re.length-1],j))?p(Pj(re,N)):f},f.copy=function(){return RE(f,Kj(e,t,r,n,i,a,o,l,c))},f}function hfe(){return tf.apply(Kj(Gc,Xj,mO,CE,Hj,Vj,zj,S1,Zj).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function pfe(){var e=0,t=1,r,n,i,a,o=da,l=!1,c;function f(h){return isNaN(h=+h)?c:o(i===0?.5:(h=(a(h)-r)*i,l?Math.max(0,Math.min(1,h)):h))}return f.domain=function(h){return arguments.length?(r=a(e=+h[0]),n=a(t=+h[1]),i=r===n?0:1/(n-r),f):[e,t]},f.clamp=function(h){return arguments.length?(l=!!h,f):l},f.interpolator=function(h){return arguments.length?(o=h,f):o},f.unknown=function(h){return arguments.length?(c=h,f):c},function(h){return a=h,r=h(e),n=h(t),i=r===n?0:1/(n-r),f}}function Qj(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Jj(){var e=t0(pfe()(da));return e.copy=function(){return Qj(e,Jj())},Rj.apply(e,arguments)}function mfe(){var e=0,t=.5,r=1,n,i,a,o,l,c=da,f,h=!1,p;function v(g){return isNaN(g=+g)?p:(g=.5+((g=+f(g))-i)*(g<i?o:l),c(h?Math.max(0,Math.min(1,g)):g))}return v.domain=function(g){return arguments.length?(n=f(e=+g[0]),i=f(t=+g[1]),a=f(r=+g[2]),o=n===i?0:.5/(i-n),l=i===a?0:.5/(a-i),v):[e,t,r]},v.clamp=function(g){return arguments.length?(h=!!g,v):h},v.interpolator=function(g){return arguments.length?(c=g,v):c},v.unknown=function(g){return arguments.length?(p=g,v):p},function(g){return f=g,n=g(e),i=g(t),a=g(r),o=n===i?0:.5/(i-n),l=i===a?0:.5/(a-i),v}}function e9(){var e=t0(mfe()(da));return e.copy=function(){return Qj(e,e9())},Rj.apply(e,arguments)}function t9(e){let t,r=[];function n(i){return i??t}return n.invert=n,n.domain=n.range=i=>i?(r=i,i):r,n.unknown=i=>i?(t=i,i):t,n.copy=()=>t9().unknown(t),n}const{isNil:FR,isString:vfe,uniq:gfe}=Un,_fe=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,yfe={[un.LINEAR]:Ij,[un.POWER]:Lj,[un.LOG]:Dj,[un.IDENTITY]:t9,[un.SEQUENTIAL]:Jj,[un.TIME]:hfe,[un.QUANTILE]:Bj,[un.QUANTIZE]:Fj,[un.THRESHOLD]:Uj,[un.CAT]:E1,[un.DIVERGING]:e9};class Efe{constructor(){F(this,"scaleOptions",{})}apply(t,{styleAttributeService:r}){var n=this;t.hooks.init.tapPromise("FeatureScalePlugin",et(function*(){var i;t.log(Mi.ScaleInitStart,Qi.INIT),n.scaleOptions=t.getScaleOptions();const a=r.getLayerStyleAttributes(),o=(i=t.getSource())===null||i===void 0?void 0:i.data.dataArray;Array.isArray(o)&&o.length===0||(n.caculateScalesForAttributes(a||[],o),t.log(Mi.ScaleInitEnd,Qi.INIT))})),t.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",(function(){var i=et(function*(a){if(!a)return a;t.log(Mi.ScaleInitStart,Qi.UPDATE),n.scaleOptions=t.getScaleOptions();const o=r.getLayerStyleAttributes(),l=t.getSource().data.dataArray;return Array.isArray(l)&&l.length===0||(n.caculateScalesForAttributes(o||[],l),t.log(Mi.ScaleInitEnd,Qi.UPDATE),t.layerModelNeedUpdate=!0),!0});return function(a){return i.apply(this,arguments)}})()),t.hooks.beforeRender.tap("FeatureScalePlugin",()=>{if(t.layerModelNeedUpdate)return;this.scaleOptions=t.getScaleOptions();const i=r.getLayerStyleAttributes(),a=t.getSource().data.dataArray;if(!(Array.isArray(a)&&a.length===0)&&i){const o=i.filter(l=>l.needRescale);o.length&&this.caculateScalesForAttributes(o,a)}})}isNumber(t){return!isNaN(parseFloat(t))&&isFinite(t)}caculateScalesForAttributes(t,r){t.forEach(n=>{if(n.scale){const i=n.scale,a=n.scale.field;i.names=this.parseFields(FR(a)?[]:a);const o=[];i.names.forEach(l=>{var c;o.push(this.createScale(l,n.name,(c=n.scale)===null||c===void 0?void 0:c.values,r))}),o.some(l=>l.type===Hh.VARIABLE)?(i.type=Hh.VARIABLE,o.forEach(l=>{if(!i.callback&&i.values!=="text"){var c;switch((c=l.option)===null||c===void 0?void 0:c.type){case un.LOG:case un.LINEAR:case un.POWER:if(i.values&&i.values.length>2){const h=l.scale.ticks(i.values.length);l.scale.domain(h)}i.values?l.scale.range(i.values):l.scale.range(l.option.domain);break;case un.QUANTILE:case un.QUANTIZE:case un.THRESHOLD:l.scale.range(i.values);break;case un.IDENTITY:break;case un.CAT:i.values?l.scale.range(i.values):l.scale.range(l.option.domain);break;case un.DIVERGING:case un.SEQUENTIAL:l.scale.interpolator(vue(i.values));break}}if(i.values==="text"){var f;l.scale.range((f=l.option)===null||f===void 0?void 0:f.domain)}})):(i.type=Hh.CONSTANT,i.defaultValues=o.map((l,c)=>l.scale(i.names[c]))),i.scalers=o.map(l=>({field:l.field,func:l.scale,option:l.option})),n.needRescale=!1}})}parseFields(t){return Array.isArray(t)?t:vfe(t)?t.split("*"):[t]}createScale(t,r,n,i){var a,o;const l=this.scaleOptions[r]&&((a=this.scaleOptions[r])===null||a===void 0?void 0:a.field)===t?this.scaleOptions[r]:this.scaleOptions[t],c={field:t,scale:void 0,type:Hh.VARIABLE,option:l};if(!i||!i.length)return l&&l.type?c.scale=this.createDefaultScale(l):(c.scale=E1([t]),c.type=Hh.CONSTANT),c;const f=(o=i.find(h=>!FR(h[t])))===null||o===void 0?void 0:o[t];if(this.isNumber(t)||FR(f)&&!l)c.scale=E1([t]),c.type=Hh.CONSTANT;else{let h=l&&l.type||this.getDefaultType(f);n==="text"&&(h=un.CAT),n===void 0&&(h=un.IDENTITY);const p=this.createScaleConfig(h,t,l,i);c.scale=this.createDefaultScale(p),c.option=p}return c}getDefaultType(t){let r=un.LINEAR;return typeof t=="string"&&(r=_fe.test(t)?un.TIME:un.CAT),r}createScaleConfig(t,r,n,i){const a=qe(qe({},n),{},{type:t});if(a!=null&&a.domain)return a;let o=[];if(t===un.QUANTILE){const l=new Map;i?.forEach(c=>{l.set(c._id,c[r])}),o=Array.from(l.values())}else o=i?.map(l=>l[r])||[];if(t===un.CAT||t===un.IDENTITY)a.domain=gfe(o);else if(t===un.QUANTILE)a.domain=o;else if(t===un.DIVERGING){const l=hB(o),c=n?.neutral!==void 0?n?.neutral:(l[0]+l[1])/2;a.domain=[l[0],c,l[1]]}else a.domain=hB(o);return a}createDefaultScale({type:t,domain:r,unknown:n,clamp:i,nice:a}){const o=yfe[t]();return r&&o.domain&&o.domain(r),n&&o.unknown(n),i!==void 0&&o.clamp&&o.clamp(i),a!==void 0&&o.nice&&o.nice(a),o}}class bfe{apply(t){t.hooks.beforeRender.tap("LayerAnimateStylePlugin",()=>{t.animateStatus&&t.models.forEach(n=>{n.addUniforms(qe({},t.layerModel.getAnimateUniforms()))})})}}let xfe=class{apply(t){t.hooks.afterInit.tap("LayerMaskPlugin",()=>{const{maskLayers:r,enableMask:n}=t.getLayerConfig();!t.tileLayer&&r&&r.length>0&&t.updateLayerConfig({mask:n})})}};class Sfe{build(t){return et(function*(){t.prepareBuildModel(),yield t.buildModels()})()}initLayerModel(t){var r=this;return et(function*(){yield r.build(t),t.styleNeedUpdate=!1})()}prepareLayerModel(t){var r=this;return et(function*(){yield r.build(t),t.styleNeedUpdate=!1})()}apply(t){var r=this;t.hooks.init.tapPromise("LayerModelPlugin",et(function*(){if(t.getSource().isTile){t.prepareBuildModel();return}t.log(Mi.BuildModelStart,Qi.INIT),yield r.initLayerModel(t),t.log(Mi.BuildModelEnd,Qi.INIT)})),t.hooks.beforeRenderData.tapPromise("LayerModelPlugin",(function(){var n=et(function*(i){return!i||t.getSource().isTile?!1:(t.log(Mi.BuildModelStart,Qi.UPDATE),yield r.prepareLayerModel(t),t.log(Mi.BuildModelEnd,Qi.UPDATE),!0)});return function(i){return n.apply(this,arguments)}})())}}class Tfe{apply(t){t.hooks.afterInit.tap("LayerStylePlugin",()=>{const{autoFit:r,fitBoundsOptions:n}=t.getLayerConfig();r&&t.fitBounds(n),t.styleNeedUpdate=!1})}}const Afe=["type"],jB={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},Rfe={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},Cfe={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},Ofe={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function wfe(e){const t={u_DirectionalLights:new Array(3).fill(qe({},Cfe)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(qe({},Ofe)),u_NumOfSpotLights:0};return(!e||!e.length)&&(e=[Rfe]),e.forEach(r=>{let{type:n="directional"}=r,i=ml(r,Afe);const a=jB[n].lights,o=jB[n].num,l=t[o];t[a][l]=qe(qe({},t[a][l]),i),t[o]++}),t}class Nfe{apply(t){t.hooks.beforeRender.tap("LightingPlugin",()=>{const{enableLighting:r}=t.getLayerConfig();r&&t.models.forEach(n=>n.addUniforms(qe({},wfe())))})}}function r9(e){return e.map(t=>(typeof t=="string"&&(t=[t,{}]),t))}function n9(e,t,r,n){const i=e.multiPassRenderer;return i.add(n("render")),r9(t).forEach(a=>{const[o,l]=a;i.add(r(o),l)}),i.add(r("copy")),i}class Mfe{constructor(){F(this,"enabled",void 0)}apply(t,{rendererService:r,postProcessingPassFactory:n,normalPassFactory:i}){t.hooks.init.tapPromise("MultiPassRendererPlugin",()=>{const{enableMultiPassRenderer:a,passes:o=[]}=t.getLayerConfig();this.enabled=!!a&&t.getLayerConfig().enableMultiPassRenderer!==!1,this.enabled&&(t.multiPassRenderer=n9(t,o,n,i),t.multiPassRenderer.setRenderFlag(!0))}),t.hooks.beforeRender.tap("MultiPassRendererPlugin",()=>{if(this.enabled){const{width:a,height:o}=r.getViewportSize();t.multiPassRenderer.resize(a,o)}})}}const Nc={POSITION:0,POSITION_64LOW:1,COLOR:2,PICKING_COLOR:3,STROKE:4,OPACITY:5,OFFSETS:6,ROTATION:7,MAX:8};function Ife(e){switch(e){case"rotation":return{name:"Rotation",type:Vt.Attribute,descriptor:{name:"a_Rotation",shaderLocation:Nc.ROTATION,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{rotation:r=0}=t;return Array.isArray(r)?[r[0]]:[r]}}};case"stroke":return{name:"stroke",type:Vt.Attribute,descriptor:{name:"a_Stroke",shaderLocation:Nc.STROKE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:4,update:t=>{const{stroke:r=[1,1,1,1]}=t;return r}}};case"opacity":return{name:"opacity",type:Vt.Attribute,descriptor:{name:"a_Opacity",shaderLocation:Nc.OPACITY,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{opacity:r=1}=t;return[r]}}};case"offsets":return{name:"offsets",type:Vt.Attribute,descriptor:{name:"a_Offsets",shaderLocation:Nc.OFFSETS,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:2,update:t=>{const{offsets:r}=t;return r}}};default:return}}const{isNumber:Pfe}=Un,qh={ENCODE:1,HIGHLIGHT:2};class Dfe{constructor(){F(this,"pickingUniformMap",void 0)}pickOption2Array(){const t=[];return this.pickingUniformMap.forEach(r=>{Pfe(r)?t.push(r):t.push(...r)}),t}updatePickOption(t,r){Object.keys(t).forEach(o=>{this.pickingUniformMap.set(o,t[o])});const n=r.getLayerConfig().pickingBuffer||0,i=Number(r.getShaderPickStat());this.pickingUniformMap.set("u_PickingBuffer",n),this.pickingUniformMap.set("u_shaderPick",i),r.getPickingUniformBuffer().subData({offset:0,data:this.pickOption2Array()})}apply(t,{styleAttributeService:r}){this.pickingUniformMap=new Map([["u_HighlightColor",[1,0,0,1]],["u_SelectColor",[1,0,0,1]],["u_PickingColor",[0,0,0]],["u_PickingStage",0],["u_CurrentSelectedId",[0,0,0]],["u_PickingThreshold",10],["u_PickingBuffer",0],["u_shaderPick",0],["u_activeMix",0]]),t.hooks.init.tapPromise("PixelPickingPlugin",()=>{const{enablePicking:n}=t.getLayerConfig();r.registerStyleAttribute({name:"pickingColor",type:Vt.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:Nc.PICKING_COLOR,buffer:{data:[],type:L.FLOAT},size:3,update:i=>{const{id:a}=i;return n?Rp(a):[0,0,0]}}})}),t.hooks.beforePickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:n}=t.getLayerConfig();n&&t.isVisible()&&(this.updatePickOption({u_PickingStage:qh.ENCODE},t),t.models.forEach(i=>i.addUniforms({u_PickingStage:qh.ENCODE})))}),t.hooks.afterPickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:n}=t.getLayerConfig();n&&t.isVisible()&&(this.updatePickOption({u_PickingStage:qh.HIGHLIGHT},t),t.models.forEach(i=>i.addUniforms({u_PickingStage:qh.HIGHLIGHT})))}),t.hooks.beforeHighlight.tap("PixelPickingPlugin",n=>{const{highlightColor:i,activeMix:a=0}=t.getLayerConfig(),o=typeof i=="string"?pn(i):i||[1,0,0,1];t.updateLayerConfig({pickedFeatureID:nd(new Uint8Array(n))});const l={u_PickingStage:qh.HIGHLIGHT,u_PickingColor:n,u_HighlightColor:o.map(c=>c*255),u_activeMix:a};this.updatePickOption(l,t),t.models.forEach(c=>c.addUniforms(l))}),t.hooks.beforeSelect.tap("PixelPickingPlugin",n=>{const{selectColor:i,selectMix:a=0}=t.getLayerConfig(),o=typeof i=="string"?pn(i):i||[1,0,0,1];t.updateLayerConfig({pickedFeatureID:nd(new Uint8Array(n))});const l={u_PickingStage:qh.HIGHLIGHT,u_PickingColor:n,u_HighlightColor:o.map(c=>c*255),u_activeMix:a,u_CurrentSelectedId:n,u_SelectColor:o.map(c=>c*255)};this.updatePickOption(l,t),t.models.forEach(c=>c.addUniforms(l))})}}const Lfe=["mvt","geojsonvt","testTile"];function Bfe(e){const t=e.getSource();return Lfe.includes(t.parser.type)}class Ffe{apply(t,{styleAttributeService:r}){t.hooks.init.tapPromise("RegisterStyleAttributePlugin",()=>{Bfe(t)||this.registerBuiltinAttributes(r,t)})}registerBuiltinAttributes(t,r){if(r.type==="MaskLayer"){this.registerPositionAttribute(t);return}this.registerPositionAttribute(t),this.registerColorAttribute(t)}registerPositionAttribute(t){t.registerStyleAttribute({name:"position",type:Vt.Attribute,descriptor:{name:"a_Position",shaderLocation:Nc.POSITION,buffer:{data:[],type:L.FLOAT},size:3,update:(r,n,i)=>i.length===2?[i[0],i[1],0]:[i[0],i[1],i[2]]}})}registerColorAttribute(t){t.registerStyleAttribute({name:"color",type:Vt.Attribute,descriptor:{name:"a_Color",shaderLocation:Nc.COLOR,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:4,update:r=>{const{color:n}=r;return!n||!n.length?[1,1,1,1]:n}}})}}class Ufe{constructor(){F(this,"cameraService",void 0),F(this,"coordinateSystemService",void 0),F(this,"rendererService",void 0),F(this,"mapService",void 0),F(this,"layerService",void 0)}apply(t,{rendererService:r,mapService:n,layerService:i,coordinateSystemService:a,cameraService:o}){this.rendererService=r,this.mapService=n,this.layerService=i,this.coordinateSystemService=a,this.cameraService=o;let l;this.rendererService.uniformBuffers[0]||(l=this.rendererService.createBuffer({data:new Float32Array(96),isUBO:!0,label:"renderUniformBuffer"}),this.rendererService.uniformBuffers[0]=l),t.hooks.beforeRender.tap("ShaderUniformPlugin",()=>{const f=t.getRelativeOrigin&&t.getRelativeOrigin()||[0,0];this.coordinateSystemService.refresh(),f&&(Math.abs(f[0])>1e-4||Math.abs(f[1])>1e-4)&&this.coordinateSystemService.getCoordinateSystem()===2&&this.coordinateSystemService.setViewportCenter(f);const{width:p,height:v}=this.rendererService.getViewportSize(),{data:g,uniforms:_}=this.generateUBO(p,v,f);this.layerService.alreadyInRendering&&this.rendererService.uniformBuffers[0]&&this.rendererService.uniformBuffers[0].subData({offset:0,data:g}),this.rendererService.queryVerdorInfo()==="WebGL1"&&t.models.forEach(b=>{b.addUniforms(qe(qe({},_),{},{u_PickingBuffer:t.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(t.getShaderPickStat())}))})})}generateUBO(t,r,n){const i=this.cameraService.getProjectionMatrix(),a=this.cameraService.getViewMatrix(),o=this.cameraService.getViewProjectionMatrix(),l=this.cameraService.getModelMatrix(),c=this.coordinateSystemService.getViewportCenterProjection(),f=this.coordinateSystemService.getPixelsPerDegree(),h=this.cameraService.getZoom(),p=this.coordinateSystemService.getPixelsPerDegree2(),v=this.cameraService.getZoomScale(),g=this.coordinateSystemService.getPixelsPerMeter(),_=this.coordinateSystemService.getCoordinateSystem(),E=this.cameraService.getCameraPosition(),b=window.devicePixelRatio,S=this.coordinateSystemService.getViewportCenter(),T=[t,r],C=this.cameraService.getFocalDistance(),M=n&&n.length>=2?[n[0],n[1]]:[0,0];return{data:[...a,...i,...o,...l,...c,...f,h,...p,v,...g,_,...E,b,...S,...T,C,...M,0],uniforms:{[Xf.ProjectionMatrix]:i,[Xf.ViewMatrix]:a,[Xf.ViewProjectionMatrix]:o,[Xf.Zoom]:h,[Xf.ZoomScale]:v,[Xf.FocalDistance]:C,[Xf.CameraPosition]:E,[Vh.CoordinateSystem]:_,[Vh.ViewportCenter]:S,[Vh.ViewportCenterProjection]:c,[Vh.PixelsPerDegree]:f,[Vh.PixelsPerDegree2]:p,[Vh.PixelsPerMeter]:g,u_ViewportSize:T,u_ModelMatrix:l,u_DevicePixelRatio:b,u_RelativeOrigin:M}}}}class kfe{apply(t){t.hooks.beforeRender.tap("UpdateModelPlugin",()=>{t.layerModel&&t.layerModel.needUpdate().then(r=>{r&&t.renderLayers()})}),t.hooks.afterRender.tap("UpdateModelPlugin",()=>{t.layerModelNeedUpdate=!1})}}class jfe{apply(t,{styleAttributeService:r}){t.hooks.init.tapPromise("UpdateStyleAttributePlugin",()=>{this.initStyleAttribute(t,{styleAttributeService:r})}),t.hooks.beforeRender.tap("UpdateStyleAttributePlugin",()=>{t.layerModelNeedUpdate||t.inited&&this.updateStyleAttribute(t,{styleAttributeService:r})})}updateStyleAttribute(t,{styleAttributeService:r}){const n=r.getLayerStyleAttributes()||[],i=r.getLayerStyleAttribute("filter");if(i&&i.needRegenerateVertices){t.layerModelNeedUpdate=!0,n.forEach(a=>a.needRegenerateVertices=!1);return}n.filter(a=>a.needRegenerateVertices).forEach(a=>{r.updateAttributeByFeatureRange(a.name,t.getEncodedData(),a.featureRange.startIndex,a.featureRange.endIndex,t),a.needRegenerateVertices=!1})}initStyleAttribute(t,{styleAttributeService:r}){(r.getLayerStyleAttributes()||[]).filter(i=>i.needRegenerateVertices).forEach(i=>{r.updateAttributeByFeatureRange(i.name,t.getEncodedData(),i.featureRange.startIndex,i.featureRange.endIndex),i.needRegenerateVertices=!1})}}function zfe(){return[new uue,new Ffe,new Efe,new lue,new Tfe,new xfe,new jfe,new kfe,new Mfe,new Ufe,new bfe,new Nfe,new Dfe,new Sfe]}const i9={[Sc.additive]:{enable:!0,func:{srcRGB:L.ONE,dstRGB:L.ONE,srcAlpha:1,dstAlpha:1}},[Sc.none]:{enable:!1},[Sc.normal]:{enable:!0,func:{srcRGB:L.SRC_ALPHA,dstRGB:L.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}},[Sc.subtractive]:{enable:!0,func:{srcRGB:L.ONE,dstRGB:L.ONE,srcAlpha:L.ZERO,dstAlpha:L.ONE_MINUS_SRC_COLOR},equation:{rgb:L.FUNC_SUBTRACT,alpha:L.FUNC_SUBTRACT}},[Sc.max]:{enable:!0,func:{srcRGB:L.ONE,dstRGB:L.ONE},equation:{rgb:L.MAX_EXT}},[Sc.min]:{enable:!0,func:{srcRGB:L.ONE,dstRGB:L.ONE},equation:{rgb:L.MIN_EXT}}};class Vfe{constructor(t){F(this,"layer",void 0),this.layer=t}pickRender(t){const n=this.layer.getContainer().layerService,i=this.layer;if(i.tileLayer)return i.tileLayer.pickRender(t);i.hooks.beforePickingEncode.call(),n.renderTileLayerMask(i),i.renderModels({ispick:!0}),i.hooks.afterPickingEncode.call()}pick(t,r){var n=this;return et(function*(){const a=n.layer.getContainer().pickingService;return t.type==="RasterLayer"?n.pickRasterLayer(t,r):(n.pickRender(r),a.pickFromPickingFBO(t,r))})()}pickRasterLayer(t,r,n){const i=this.layer.getContainer(),a=i.pickingService,o=i.mapService,l=this.layer.getSource().extent,c=qte(r.lngLat,l),f={x:r.x,y:r.y,type:r.type,lngLat:r.lngLat,target:r,rasterValue:null},h=n||t;if(c){const p=this.readRasterValue(t,l,o,r.x,r.y);return f.rasterValue=p,a.triggerHoverOnLayer(h,f),!0}else return f.type=r.type==="mousemove"?"mouseout":"un"+r.type,a.triggerHoverOnLayer(h,qe(qe({},f),{},{type:"unpick"})),a.triggerHoverOnLayer(h,f),!1}readRasterValue(t,r,n,i,a){const o=t.getSource().data.dataArray[0],[l=0,c=0,f=10,h=-10]=r,p=n.lngLatToContainer([l,c]),v=n.lngLatToContainer([f,h]),g=v.x-p.x,_=p.y-v.y,E=[(i-p.x)/g,(a-v.y)/_],b=o.width||1,S=o.height||1,T=Math.floor(E[0]*b),C=Math.floor(E[1]*S),M=Math.max(0,C-1)*b+T;return o.data[M]}selectFeature(t){const r=this.layer,[n,i,a]=t;r.hooks.beforeSelect.call([n,i,a])}highlightPickedFeature(t){const[r,n,i]=t;this.layer.hooks.beforeHighlight.call([r,n,i])}getFeatureById(t){return this.layer.getSource().getFeatureById(t)}}class Hfe{constructor(t){F(this,"layer",void 0),F(this,"rendererService",void 0),F(this,"colorTexture",void 0),F(this,"key",void 0),this.layer=t;const r=this.layer.getContainer();this.rendererService=r.rendererService}getColorTexture(t,r){const n=this.getTextureKey(t,r);return this.key===n?this.colorTexture:(this.createColorTexture(t,r),this.key=n,this.colorTexture)}createColorTexture(t,r){const{createTexture2D:n}=this.rendererService,i=this.getColorRampBar(t,r),a=n({data:new Uint8Array(i.data),width:i.width,height:i.height,flipY:!1,unorm:!0});return this.colorTexture=a,a}setColorTexture(t,r,n){this.key=this.getTextureKey(r,n),this.colorTexture=t}destroy(){var t;(t=this.colorTexture)===null||t===void 0||t.destroy()}getColorRampBar(t,r){switch(t.type){case"cat":return gQ(t);case"quantize":return _Q(t);case"custom":return yQ(t,r);case"linear":return vQ(t,r);default:return mQ(t)}}getTextureKey(t,r){var n;return`${t.colors.join("_")}_${t==null||(n=t.positions)===null||n===void 0?void 0:n.join("_")}_${t.type}_${r?.join("_")}`}}const Xfe=["passes"],qfe=["moduleName","vertexShader","fragmentShader","defines","inject","triangulation","styleOption","pickingEnabled"],{isEqual:UR,isFunction:zB,isNumber:VB,isObject:Wi,isPlainObject:Gfe,isUndefined:Wfe}=Un;let HB=0;class em extends Za.EventEmitter{get shaderModuleService(){return this.container.shaderModuleService}get cameraService(){return this.container.cameraService}get coordinateService(){return this.container.coordinateSystemService}get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get pickingService(){return this.container.pickingService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get interactionService(){return this.container.interactionService}get mapService(){var t;return(t=this.container)===null||t===void 0?void 0:t.mapService}get normalPassFactory(){return this.container.normalPassFactory}constructor(t={}){super(),F(this,"id",`${HB++}`),F(this,"name",`${HB}`),F(this,"parent",void 0),F(this,"coordCenter",void 0),F(this,"type",void 0),F(this,"visible",!0),F(this,"zIndex",0),F(this,"minZoom",void 0),F(this,"maxZoom",void 0),F(this,"inited",!1),F(this,"layerModelNeedUpdate",!1),F(this,"pickedFeatureID",null),F(this,"selectedFeatureID",null),F(this,"styleNeedUpdate",!1),F(this,"rendering",void 0),F(this,"forceRender",!1),F(this,"clusterZoom",0),F(this,"layerType",void 0),F(this,"triangulation",void 0),F(this,"layerPickService",void 0),F(this,"textureService",void 0),F(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),F(this,"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),F(this,"hooks",{init:new Xae,afterInit:new pL,beforeRender:new pL,beforeRenderData:new qae,afterRender:new tl,beforePickingEncode:new tl,afterPickingEncode:new tl,beforeHighlight:new tl(["pickedColor"]),afterHighlight:new tl,beforeSelect:new tl(["pickedColor"]),afterSelect:new tl,beforeDestroy:new tl,afterDestroy:new tl}),F(this,"models",[]),F(this,"multiPassRenderer",void 0),F(this,"plugins",void 0),F(this,"startInit",!1),F(this,"sourceOption",void 0),F(this,"layerModel",void 0),F(this,"shapeOption",void 0),F(this,"tileLayer",void 0),F(this,"layerChildren",[]),F(this,"masks",[]),F(this,"configService",lj),F(this,"styleAttributeService",void 0),F(this,"layerSource",void 0),F(this,"postProcessingPassFactory",void 0),F(this,"animateOptions",{enable:!1}),F(this,"relativeOrigin",[0,0]),F(this,"originalExtent",[0,0,0,0]),F(this,"absoluteDataArray",[]),F(this,"container",void 0),F(this,"encodedData",void 0),F(this,"currentPickId",null),F(this,"rawConfig",void 0),F(this,"needUpdateConfig",void 0),F(this,"encodeStyleAttribute",{}),F(this,"enableShaderEncodeStyles",[]),F(this,"enableDataEncodeStyles",[]),F(this,"pendingStyleAttributes",[]),F(this,"scaleOptions",{}),F(this,"animateStartTime",void 0),F(this,"animateStatus",!1),F(this,"isDestroyed",!1),F(this,"uniformBuffers",[]),F(this,"encodeDataLength",0),F(this,"sourceEvent",()=>{this.dataState.dataSourceNeedUpdate=!0,this.processRelativeCoordinates();const r=this.getLayerConfig();r&&r.autoFit&&this.fitBounds(r.fitBoundsOptions),this.layerSource.getSourceCfg().autoRender&&setTimeout(()=>{this.reRender()},10)}),this.name=t.name||this.id,this.zIndex=t.zIndex||0,this.rawConfig=t,this.masks=t.maskLayers||[]}addMask(t){this.masks.push(t),this.updateLayerConfig({maskLayers:this.masks}),this.enableMask()}removeMask(t){const r=this.masks.indexOf(t);r>-1&&this.masks.splice(r,1),this.updateLayerConfig({maskLayers:this.masks})}disableMask(){this.updateLayerConfig({enableMask:!1})}enableMask(){this.updateLayerConfig({enableMask:!0})}addMaskLayer(t){this.masks.push(t)}removeMaskLayer(t){const r=this.masks.indexOf(t);r>-1&&this.masks.splice(r,1),t.destroy()}getAttribute(t){return this.styleAttributeService.getLayerStyleAttribute(t)}getLayerConfig(){return this.configService.getLayerConfig(this.id)}updateLayerConfig(t){if(Object.keys(t).map(r=>{r in this.rawConfig&&(this.rawConfig[r]=t[r])}),!this.startInit)this.needUpdateConfig=qe(qe({},this.needUpdateConfig),t);else{const r=this.container.id;this.configService.setLayerConfig(r,this.id,qe(qe(qe({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),t)),this.needUpdateConfig={}}}setContainer(t){this.container=t}getContainer(){return this.container}addPlugin(t){return this.plugins.push(t),this}init(){var t=this;return et(function*(){const r=t.container.id;t.startInit=!0,t.configService.setLayerConfig(r,t.id,t.rawConfig),t.layerType=t.rawConfig.layerType;const{enableMultiPassRenderer:n,passes:i}=t.getLayerConfig();n&&i!==null&&i!==void 0&&i.length&&i.length>0&&t.mapService.on("mapAfterFrameChange",()=>{t.renderLayers()}),t.postProcessingPassFactory=t.container.postProcessingPassFactory,t.styleAttributeService=t.container.styleAttributeService,n&&(t.multiPassRenderer=t.container.multiPassRenderer,t.multiPassRenderer.setLayer(t)),t.pendingStyleAttributes.forEach(({attributeName:a,attributeField:o,attributeValues:l,updateOptions:c})=>{t.styleAttributeService.updateStyleAttribute(a,{scale:qe({field:o},t.splitValuesAndCallbackInAttribute(l,o?void 0:t.getLayerConfig()[a]))},c)}),t.pendingStyleAttributes=[],t.plugins=zfe();for(const a of t.plugins)a.apply(t,t.container);t.layerPickService=new Vfe(t),t.textureService=new Hfe(t),t.log(Mi.LayerInitStart),yield t.hooks.init.promise(),t.log(Mi.LayerInitEnd),t.inited=!0,t.emit("inited",{target:t,type:"inited"}),t.emit("add",{target:t,type:"add"}),t.hooks.afterInit.call()})()}log(t,r="init"){var n;if(this.tileLayer||this.isTileLayer)return;const i=`${this.id}.${r}.${t}`,a={id:this.id,type:this.type};(n=this.debugService)===null||n===void 0||n.log(i,a)}updateModelData(t){t.attributes&&t.elements?this.models.map(r=>{r.updateAttributesAndElements(t.attributes,t.elements)}):console.warn("data error")}setLayerPickService(t){this.layerPickService=t}prepareBuildModel(){Object.keys(this.needUpdateConfig||{}).length!==0&&this.updateLayerConfig({});const{animateOption:t}=this.getLayerConfig();t!=null&&t.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}color(t,r,n){return this.updateStyleAttribute("color",t,r,n),this}texture(t,r,n){return this.updateStyleAttribute("texture",t,r,n),this}rotate(t,r,n){return this.updateStyleAttribute("rotate",t,r,n),this}size(t,r,n){return this.updateStyleAttribute("size",t,r,n),this}filter(t,r,n){const i=this.updateStyleAttribute("filter",t,r,n);return this.dataState.dataSourceNeedUpdate=i&&this.inited,this}shape(t,r,n){this.shapeOption={field:t,values:r};const i=this.updateStyleAttribute("shape",t,r,n);return this.dataState.dataSourceNeedUpdate=i&&this.inited,this}label(t,r,n){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:t,attributeValues:r,updateOptions:n}),this}animate(t){let r={};return Wi(t)?(r.enable=!0,r=qe(qe({},r),t)):r.enable=t,this.updateLayerConfig({animateOption:r}),this}source(t,r){return t?.type==="source"?(this.setSource(t),this):(this.sourceOption={data:t,options:r},this.clusterZoom=0,this)}setData(t,r){return this.inited?(this.dataUpdatelog(),this.layerSource.setData(t,r)):this.on("inited",()=>{this.dataUpdatelog(),this.layerSource.setData(t,r)}),this}dataUpdatelog(){this.log(Mi.SourceInitStart,Qi.UPDATE),this.layerSource.once("update",()=>{this.log(Mi.SourceInitEnd,Qi.UPDATE)})}style(t){const{passes:r}=t,n=ml(t,Xfe);r&&r9(r).forEach(a=>{const o=this.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(a[0]);o&&o.updateOptions(a[1])}),n.borderColor&&(n.stroke=n.borderColor),n.borderWidth&&(n.strokeWidth=n.borderWidth);const i=n;return Object.keys(n).forEach(a=>{const o=n[a];Array.isArray(o)&&o.length===2&&!VB(o[0])&&!VB(o[1])&&(i[a]={field:o[0],value:o[1]})}),this.encodeStyle(i),this.updateLayerConfig(i),this}encodeStyle(t){Object.keys(t).forEach(r=>{[...this.enableShaderEncodeStyles,...this.enableDataEncodeStyles].includes(r)&&Gfe(t[r])&&(t[r].field||t[r].value)&&!UR(this.encodeStyleAttribute[r],t[r])?(this.encodeStyleAttribute[r]=t[r],this.updateStyleAttribute(r,t[r].field,t[r].value),this.inited&&(this.dataState.dataMappingNeedUpdate=!0)):this.encodeStyleAttribute[r]&&(delete this.encodeStyleAttribute[r],this.dataState.dataSourceNeedUpdate=!0)})}scale(t,r){const n=qe({},this.scaleOptions);if(Wi(t)?this.scaleOptions=qe(qe({},this.scaleOptions),t):this.scaleOptions[t]=r,this.styleAttributeService&&!UR(n,this.scaleOptions)){const i=Wi(t)?t:{[t]:r};this.styleAttributeService.updateScaleAttribute(i)}return this}renderLayers(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}prerender(){}render(t={}){return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(t),this))}renderMultiPass(){var t=this;return et(function*(){t.encodeDataLength<=0&&!t.forceRender||(t.multiPassRenderer&&t.multiPassRenderer.getRenderFlag()?yield t.multiPassRenderer.render():t.renderModels())})()}active(t){const r={};return r.enableHighlight=Wi(t)?!0:t,Wi(t)?(r.enableHighlight=!0,t.color&&(r.highlightColor=t.color),t.mix&&(r.activeMix=t.mix)):r.enableHighlight=!!t,this.updateLayerConfig(r),this}setActive(t,r){if(Wi(t)){const{x:n=0,y:i=0}=t;this.updateLayerConfig({highlightColor:Wi(r)?r.color:this.getLayerConfig().highlightColor,activeMix:Wi(r)?r.mix:this.getLayerConfig().activeMix}),this.pick({x:n,y:i})}else this.updateLayerConfig({pickedFeatureID:t,highlightColor:Wi(r)?r.color:this.getLayerConfig().highlightColor,activeMix:Wi(r)?r.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call(Rp(t)).then(()=>{setTimeout(()=>{this.reRender()},1)})}select(t){const r={};return r.enableSelect=Wi(t)?!0:t,Wi(t)?(r.enableSelect=!0,t.color&&(r.selectColor=t.color),t.mix&&(r.selectMix=t.mix)):r.enableSelect=!!t,this.updateLayerConfig(r),this}setSelect(t,r){if(Wi(t)){const{x:n=0,y:i=0}=t;this.updateLayerConfig({selectColor:Wi(r)?r.color:this.getLayerConfig().selectColor,selectMix:Wi(r)?r.mix:this.getLayerConfig().selectMix}),this.pick({x:n,y:i})}else this.updateLayerConfig({pickedFeatureID:t,selectColor:Wi(r)?r.color:this.getLayerConfig().selectColor,selectMix:Wi(r)?r.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(Rp(t)).then(()=>{setTimeout(()=>{this.reRender()},1)})}setBlend(t){return this.updateLayerConfig({blend:t}),this.reRender(),this}show(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}hide(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}setIndex(t){return this.zIndex=t,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}setCurrentPickId(t){this.currentPickId=t}getCurrentPickId(){return this.currentPickId}setCurrentSelectedId(t){this.selectedFeatureID=t}getCurrentSelectedId(){return this.selectedFeatureID}isVisible(){const t=this.mapService.getZoom(),{visible:r,minZoom:n=-1/0,maxZoom:i=1/0}=this.getLayerConfig();return!!r&&t>=n&&t<i}setMultiPass(t,r){if(this.updateLayerConfig({enableMultiPassRenderer:t}),r&&this.updateLayerConfig({passes:r}),t){const{passes:n=[]}=this.getLayerConfig();this.multiPassRenderer=n9(this,n,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);const{width:i,height:a}=this.rendererService.getViewportSize();this.multiPassRenderer.resize(i,a)}return this}setMinZoom(t){return this.updateLayerConfig({minZoom:t}),this}getMinZoom(){const{minZoom:t}=this.getLayerConfig();return t}getMaxZoom(){const{maxZoom:t}=this.getLayerConfig();return t}get(t){return this.getLayerConfig()[t]}setMaxZoom(t){return this.updateLayerConfig({maxZoom:t}),this}setAutoFit(t){return this.updateLayerConfig({autoFit:t}),this}fitBounds(t){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;const n=this.getSource().extent;return n.some(a=>Math.abs(a)===1/0)?this:(this.mapService.fitBounds([[n[0],n[1]],[n[2],n[3]]],t),this)}destroy(t=!0){var r,n,i,a,o;if(this.isDestroyed)return;(r=this.layerModel)===null||r===void 0||r.uniformBuffers.forEach(c=>{c.destroy()}),this.layerChildren.map(c=>c.destroy(!1)),this.layerChildren=[];const{maskfence:l}=this.getLayerConfig();l&&(this.masks.map(c=>c.destroy(!1)),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(n=this.multiPassRenderer)===null||n===void 0||n.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(i=this.layerModel)===null||i===void 0||i.clearModels(t),(a=this.tileLayer)===null||a===void 0||a.destroy(),this.models=[],(o=this.debugService)===null||o===void 0||o.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}clear(){this.styleAttributeService.clearAllAttributes()}clearModels(){var t;this.models.forEach(r=>r.destroy()),(t=this.layerModel)===null||t===void 0||t.clearModels(),this.models=[]}isDirty(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(t=>t.needRescale||t.needRemapping||t.needRegenerateVertices).length}setSource(t){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=t,this.clusterZoom=0,this.inited&&this.layerSource.cluster){const r=this.mapService.getZoom();this.layerSource.updateClusterData(r)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",({type:r})=>{if(this.coordCenter===void 0){const n=this.layerSource.center;this.coordCenter=n}if(r==="update"){if(this.tileLayer){this.tileLayer.reload();return}this.sourceEvent()}r==="inited"&&this.processRelativeCoordinates()})}getSource(){return this.layerSource}getScaleOptions(){return this.scaleOptions}setEncodedData(t){this.encodedData=t,this.encodeDataLength=t.length}getEncodedData(){return this.encodedData}getScale(t){return this.styleAttributeService.getLayerAttributeScale(t)}getLegend(t){var r,n,i;const a=this.styleAttributeService.getLayerStyleAttribute(t);return{type:(n=((a==null||(r=a.scale)===null||r===void 0?void 0:r.scalers)||[])[0])===null||n===void 0||(n=n.option)===null||n===void 0?void 0:n.type,field:a==null||(i=a.scale)===null||i===void 0?void 0:i.field,items:this.getLegendItems(t)}}getLegendItems(t){const r=this.styleAttributeService.getLayerAttributeScale(t);return r?r.invertExtent?r.range().map(i=>({value:r.invertExtent(i),[t]:i})):r.ticks?r.ticks().map(i=>({value:i,[t]:r(i)})):r!=null&&r.domain?r.domain().filter(i=>!Wfe(i)).map(i=>({value:i,[t]:r(i)})):[]:[]}pick({x:t,y:r}){this.interactionService.triggerHover({x:t,y:r})}boxSelect(t,r){this.pickingService.boxPickLayer(this,t,r)}buildLayerModel(t){var r=this;return et(function*(){const{moduleName:n,vertexShader:i,fragmentShader:a,defines:o,inject:l,triangulation:c,styleOption:f,pickingEnabled:h=!0}=t,p=ml(t,qfe);r.shaderModuleService.registerModule(n,{vs:i,fs:a,defines:o,inject:l});const{vs:v,fs:g,uniforms:_}=r.shaderModuleService.getModule(n),{createModel:E}=r.rendererService;return new Promise(b=>{const{attributes:S,elements:T,count:C}=r.styleAttributeService.createAttributesAndIndices(r.encodedData,c,f,r),M=[...r.layerModel.uniformBuffers,...r.rendererService.uniformBuffers];h&&M.push(r.getPickingUniformBuffer());const D=qe({attributes:S,uniforms:_,fs:g,vs:v,elements:T,blend:i9[Sc.normal],uniformBuffers:M,textures:r.layerModel.textures},p);C&&(D.count=C);const I=E(D);b(I)})})()}createAttributes(t){const{triangulation:r}=t,{attributes:n}=this.styleAttributeService.createAttributes(this.encodedData,r);return n}getTime(){return this.layerService.clock.getDelta()}setAnimateStartTime(){this.animateStartTime=this.layerService.clock.getElapsedTime()}stopAnimate(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}getLayerAnimateTime(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}needPick(t){const{enableHighlight:r=!0,enableSelect:n=!0}=this.getLayerConfig();let i=this.eventNames().indexOf(t)!==-1||this.eventNames().indexOf("un"+t)!==-1;return(t==="click"||t==="dblclick")&&n&&(i=!0),t==="mousemove"&&(r||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(i=!0),this.isVisible()&&i}buildModels(){return et(function*(){throw new Error("Method not implemented.")})()}rebuildModels(){var t=this;return et(function*(){yield t.buildModels()})()}renderMulPass(t){return et(function*(){yield t.render()})()}renderModels(t={}){return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(r=>{r.draw({uniforms:this.layerModel.getUninforms(),blend:this.layerModel.getBlend(),stencil:this.layerModel.getStencil(t),textures:this.layerModel.textures},t?.ispick||!1)}),this.hooks.afterRender.call(),this)}updateStyleAttribute(t,r,n,i){const a=this.configService.getAttributeConfig(this.id)||{};return UR(a[t],{field:r,values:n})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(t)!==-1&&this.configService.setAttributeConfig(this.id,{[t]:{field:r,values:n}}),this.startInit?this.styleAttributeService.updateStyleAttribute(t,{scale:qe({field:r},this.splitValuesAndCallbackInAttribute(n,this.getLayerConfig()[r]))},i):this.pendingStyleAttributes.push({attributeName:t,attributeField:r,attributeValues:n,updateOptions:i}),!0)}getLayerAttributeConfig(){return this.configService.getAttributeConfig(this.id)}getShaderPickStat(){return this.layerService.getShaderPickStat()}setEarthTime(t){console.warn("empty fn")}processData(t){return t}getModelType(){throw new Error("Method not implemented.")}getDefaultConfig(){return{}}processRelativeCoordinates(){if(!this.getLayerConfig().enableRelativeCoordinates||!this.layerSource||!this.layerSource.data)return;this.absoluteDataArray=[...this.layerSource.data.dataArray];const n=iue(this.layerSource.data.dataArray,{enableRelativeCoordinates:!0});this.layerSource.data.dataArray=n.dataArray,this.relativeOrigin=n.relativeOrigin,this.originalExtent=n.originalExtent}getAbsoluteData(){return this.absoluteDataArray}getRelativeOrigin(){return this.relativeOrigin}getOriginalExtent(){return this.originalExtent}initLayerModels(){var t=this;return et(function*(){t.models.forEach(n=>n.destroy()),t.models=[],t.uniformBuffers.forEach(n=>{n.destroy()}),t.uniformBuffers=[];const r=t.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0,label:"pickingUniforms"});t.uniformBuffers.push(r),t.models=yield t.layerModel.initModels()})()}getPickingUniformBuffer(){return this.uniformBuffers[0]}reRender(){this.inited&&this.layerService.reRender()}splitValuesAndCallbackInAttribute(t){return{values:zB(t)?void 0:t,callback:zB(t)?t:void 0}}}function $fe(e,t){return{enable:e,mask:255,func:{cmp:L.EQUAL,ref:t?1:0,mask:1}}}function XB(e){return e.maskOperation===SE.OR?{enable:!0,mask:255,func:{cmp:L.ALWAYS,ref:1,mask:255},opFront:{fail:L.KEEP,zfail:L.REPLACE,zpass:L.REPLACE}}:{enable:!0,mask:255,func:{cmp:e.stencilType===Zf.SINGLE||e.stencilIndex===0?L.ALWAYS:L.LESS,ref:e.stencilType===Zf.SINGLE?1:e.stencilIndex===0?2:1,mask:255},opFront:{fail:L.KEEP,zfail:L.REPLACE,zpass:L.REPLACE}}}const Yfe={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},ty={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"};var ry={exports:{}},qB;function Zfe(){if(qB)return ry.exports;qB=1,ry.exports=e,ry.exports.default=e;function e(w,z,H){H=H||2;var ee=z&&z.length,oe=ee?z[0]*H:w.length,ge=t(w,0,oe,H,!0),ye=[];if(!ge||ge.next===ge.prev)return ye;var Pe,tt,We,Pt,$e,Tt,je;if(ee&&(ge=c(w,z,ge,H)),w.length>80*H){Pe=We=w[0],tt=Pt=w[1];for(var Ee=H;Ee<oe;Ee+=H)$e=w[Ee],Tt=w[Ee+1],$e<Pe&&(Pe=$e),Tt<tt&&(tt=Tt),$e>We&&(We=$e),Tt>Pt&&(Pt=Tt);je=Math.max(We-Pe,Pt-tt),je=je!==0?32767/je:0}return n(ge,ye,H,Pe,tt,je,0),ye}function t(w,z,H,ee,oe){var ge,ye;if(oe===le(w,z,H,ee)>0)for(ge=z;ge<H;ge+=ee)ye=R(ge,w[ge],w[ge+1],ye);else for(ge=H-ee;ge>=z;ge-=ee)ye=R(ge,w[ge],w[ge+1],ye);return ye&&M(ye,ye.next)&&(P(ye),ye=ye.next),ye}function r(w,z){if(!w)return w;z||(z=w);var H=w,ee;do if(ee=!1,!H.steiner&&(M(H,H.next)||C(H.prev,H,H.next)===0)){if(P(H),H=z=H.prev,H===H.next)break;ee=!0}else H=H.next;while(ee||H!==z);return z}function n(w,z,H,ee,oe,ge,ye){if(w){!ye&&ge&&g(w,ee,oe,ge);for(var Pe=w,tt,We;w.prev!==w.next;){if(tt=w.prev,We=w.next,ge?a(w,ee,oe,ge):i(w)){z.push(tt.i/H|0),z.push(w.i/H|0),z.push(We.i/H|0),P(w),w=We.next,Pe=We.next;continue}if(w=We,w===Pe){ye?ye===1?(w=o(r(w),z,H),n(w,z,H,ee,oe,ge,2)):ye===2&&l(w,z,H,ee,oe,ge):n(r(w),z,H,ee,oe,ge,1);break}}}}function i(w){var z=w.prev,H=w,ee=w.next;if(C(z,H,ee)>=0)return!1;for(var oe=z.x,ge=H.x,ye=ee.x,Pe=z.y,tt=H.y,We=ee.y,Pt=oe<ge?oe<ye?oe:ye:ge<ye?ge:ye,$e=Pe<tt?Pe<We?Pe:We:tt<We?tt:We,Tt=oe>ge?oe>ye?oe:ye:ge>ye?ge:ye,je=Pe>tt?Pe>We?Pe:We:tt>We?tt:We,Ee=ee.next;Ee!==z;){if(Ee.x>=Pt&&Ee.x<=Tt&&Ee.y>=$e&&Ee.y<=je&&S(oe,Pe,ge,tt,ye,We,Ee.x,Ee.y)&&C(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.next}return!0}function a(w,z,H,ee){var oe=w.prev,ge=w,ye=w.next;if(C(oe,ge,ye)>=0)return!1;for(var Pe=oe.x,tt=ge.x,We=ye.x,Pt=oe.y,$e=ge.y,Tt=ye.y,je=Pe<tt?Pe<We?Pe:We:tt<We?tt:We,Ee=Pt<$e?Pt<Tt?Pt:Tt:$e<Tt?$e:Tt,st=Pe>tt?Pe>We?Pe:We:tt>We?tt:We,Oe=Pt>$e?Pt>Tt?Pt:Tt:$e>Tt?$e:Tt,$t=E(je,Ee,z,H,ee),qt=E(st,Oe,z,H,ee),xt=w.prevZ,Dt=w.nextZ;xt&&xt.z>=$t&&Dt&&Dt.z<=qt;){if(xt.x>=je&&xt.x<=st&&xt.y>=Ee&&xt.y<=Oe&&xt!==oe&&xt!==ye&&S(Pe,Pt,tt,$e,We,Tt,xt.x,xt.y)&&C(xt.prev,xt,xt.next)>=0||(xt=xt.prevZ,Dt.x>=je&&Dt.x<=st&&Dt.y>=Ee&&Dt.y<=Oe&&Dt!==oe&&Dt!==ye&&S(Pe,Pt,tt,$e,We,Tt,Dt.x,Dt.y)&&C(Dt.prev,Dt,Dt.next)>=0))return!1;Dt=Dt.nextZ}for(;xt&&xt.z>=$t;){if(xt.x>=je&&xt.x<=st&&xt.y>=Ee&&xt.y<=Oe&&xt!==oe&&xt!==ye&&S(Pe,Pt,tt,$e,We,Tt,xt.x,xt.y)&&C(xt.prev,xt,xt.next)>=0)return!1;xt=xt.prevZ}for(;Dt&&Dt.z<=qt;){if(Dt.x>=je&&Dt.x<=st&&Dt.y>=Ee&&Dt.y<=Oe&&Dt!==oe&&Dt!==ye&&S(Pe,Pt,tt,$e,We,Tt,Dt.x,Dt.y)&&C(Dt.prev,Dt,Dt.next)>=0)return!1;Dt=Dt.nextZ}return!0}function o(w,z,H){var ee=w;do{var oe=ee.prev,ge=ee.next.next;!M(oe,ge)&&D(oe,ee,ee.next,ge)&&re(oe,ge)&&re(ge,oe)&&(z.push(oe.i/H|0),z.push(ee.i/H|0),z.push(ge.i/H|0),P(ee),P(ee.next),ee=w=ge),ee=ee.next}while(ee!==w);return r(ee)}function l(w,z,H,ee,oe,ge){var ye=w;do{for(var Pe=ye.next.next;Pe!==ye.prev;){if(ye.i!==Pe.i&&T(ye,Pe)){var tt=X(ye,Pe);ye=r(ye,ye.next),tt=r(tt,tt.next),n(ye,z,H,ee,oe,ge,0),n(tt,z,H,ee,oe,ge,0);return}Pe=Pe.next}ye=ye.next}while(ye!==w)}function c(w,z,H,ee){var oe=[],ge,ye,Pe,tt,We;for(ge=0,ye=z.length;ge<ye;ge++)Pe=z[ge]*ee,tt=ge<ye-1?z[ge+1]*ee:w.length,We=t(w,Pe,tt,ee,!1),We===We.next&&(We.steiner=!0),oe.push(b(We));for(oe.sort(f),ge=0;ge<oe.length;ge++)H=h(oe[ge],H);return H}function f(w,z){return w.x-z.x}function h(w,z){var H=p(w,z);if(!H)return z;var ee=X(H,w);return r(ee,ee.next),r(H,H.next)}function p(w,z){var H=z,ee=w.x,oe=w.y,ge=-1/0,ye;do{if(oe<=H.y&&oe>=H.next.y&&H.next.y!==H.y){var Pe=H.x+(oe-H.y)*(H.next.x-H.x)/(H.next.y-H.y);if(Pe<=ee&&Pe>ge&&(ge=Pe,ye=H.x<H.next.x?H:H.next,Pe===ee))return ye}H=H.next}while(H!==z);if(!ye)return null;var tt=ye,We=ye.x,Pt=ye.y,$e=1/0,Tt;H=ye;do ee>=H.x&&H.x>=We&&ee!==H.x&&S(oe<Pt?ee:ge,oe,We,Pt,oe<Pt?ge:ee,oe,H.x,H.y)&&(Tt=Math.abs(oe-H.y)/(ee-H.x),re(H,w)&&(Tt<$e||Tt===$e&&(H.x>ye.x||H.x===ye.x&&v(ye,H)))&&(ye=H,$e=Tt)),H=H.next;while(H!==tt);return ye}function v(w,z){return C(w.prev,w,z.prev)<0&&C(z.next,w,w.next)<0}function g(w,z,H,ee){var oe=w;do oe.z===0&&(oe.z=E(oe.x,oe.y,z,H,ee)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==w);oe.prevZ.nextZ=null,oe.prevZ=null,_(oe)}function _(w){var z,H,ee,oe,ge,ye,Pe,tt,We=1;do{for(H=w,w=null,ge=null,ye=0;H;){for(ye++,ee=H,Pe=0,z=0;z<We&&(Pe++,ee=ee.nextZ,!!ee);z++);for(tt=We;Pe>0||tt>0&&ee;)Pe!==0&&(tt===0||!ee||H.z<=ee.z)?(oe=H,H=H.nextZ,Pe--):(oe=ee,ee=ee.nextZ,tt--),ge?ge.nextZ=oe:w=oe,oe.prevZ=ge,ge=oe;H=ee}ge.nextZ=null,We*=2}while(ye>1);return w}function E(w,z,H,ee,oe){return w=(w-H)*oe|0,z=(z-ee)*oe|0,w=(w|w<<8)&16711935,w=(w|w<<4)&252645135,w=(w|w<<2)&858993459,w=(w|w<<1)&1431655765,z=(z|z<<8)&16711935,z=(z|z<<4)&252645135,z=(z|z<<2)&858993459,z=(z|z<<1)&1431655765,w|z<<1}function b(w){var z=w,H=w;do(z.x<H.x||z.x===H.x&&z.y<H.y)&&(H=z),z=z.next;while(z!==w);return H}function S(w,z,H,ee,oe,ge,ye,Pe){return(oe-ye)*(z-Pe)>=(w-ye)*(ge-Pe)&&(w-ye)*(ee-Pe)>=(H-ye)*(z-Pe)&&(H-ye)*(ge-Pe)>=(oe-ye)*(ee-Pe)}function T(w,z){return w.next.i!==z.i&&w.prev.i!==z.i&&!j(w,z)&&(re(w,z)&&re(z,w)&&Q(w,z)&&(C(w.prev,w,z.prev)||C(w,z.prev,z))||M(w,z)&&C(w.prev,w,w.next)>0&&C(z.prev,z,z.next)>0)}function C(w,z,H){return(z.y-w.y)*(H.x-z.x)-(z.x-w.x)*(H.y-z.y)}function M(w,z){return w.x===z.x&&w.y===z.y}function D(w,z,H,ee){var oe=N(C(w,z,H)),ge=N(C(w,z,ee)),ye=N(C(H,ee,w)),Pe=N(C(H,ee,z));return!!(oe!==ge&&ye!==Pe||oe===0&&I(w,H,z)||ge===0&&I(w,ee,z)||ye===0&&I(H,w,ee)||Pe===0&&I(H,z,ee))}function I(w,z,H){return z.x<=Math.max(w.x,H.x)&&z.x>=Math.min(w.x,H.x)&&z.y<=Math.max(w.y,H.y)&&z.y>=Math.min(w.y,H.y)}function N(w){return w>0?1:w<0?-1:0}function j(w,z){var H=w;do{if(H.i!==w.i&&H.next.i!==w.i&&H.i!==z.i&&H.next.i!==z.i&&D(H,H.next,w,z))return!0;H=H.next}while(H!==w);return!1}function re(w,z){return C(w.prev,w,w.next)<0?C(w,z,w.next)>=0&&C(w,w.prev,z)>=0:C(w,z,w.prev)<0||C(w,w.next,z)<0}function Q(w,z){var H=w,ee=!1,oe=(w.x+z.x)/2,ge=(w.y+z.y)/2;do H.y>ge!=H.next.y>ge&&H.next.y!==H.y&&oe<(H.next.x-H.x)*(ge-H.y)/(H.next.y-H.y)+H.x&&(ee=!ee),H=H.next;while(H!==w);return ee}function X(w,z){var H=new V(w.i,w.x,w.y),ee=new V(z.i,z.x,z.y),oe=w.next,ge=z.prev;return w.next=z,z.prev=w,H.next=oe,oe.prev=H,ee.next=H,H.prev=ee,ge.next=ee,ee.prev=ge,ee}function R(w,z,H,ee){var oe=new V(w,z,H);return ee?(oe.next=ee.next,oe.prev=ee,ee.next.prev=oe,ee.next=oe):(oe.prev=oe,oe.next=oe),oe}function P(w){w.next.prev=w.prev,w.prev.next=w.next,w.prevZ&&(w.prevZ.nextZ=w.nextZ),w.nextZ&&(w.nextZ.prevZ=w.prevZ)}function V(w,z,H){this.i=w,this.x=z,this.y=H,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}e.deviation=function(w,z,H,ee){var oe=z&&z.length,ge=oe?z[0]*H:w.length,ye=Math.abs(le(w,0,ge,H));if(oe)for(var Pe=0,tt=z.length;Pe<tt;Pe++){var We=z[Pe]*H,Pt=Pe<tt-1?z[Pe+1]*H:w.length;ye-=Math.abs(le(w,We,Pt,H))}var $e=0;for(Pe=0;Pe<ee.length;Pe+=3){var Tt=ee[Pe]*H,je=ee[Pe+1]*H,Ee=ee[Pe+2]*H;$e+=Math.abs((w[Tt]-w[Ee])*(w[je+1]-w[Tt+1])-(w[Tt]-w[je])*(w[Ee+1]-w[Tt+1]))}return ye===0&&$e===0?0:Math.abs(($e-ye)/ye)};function le(w,z,H,ee){for(var oe=0,ge=z,ye=H-ee;ge<H;ge+=ee)oe+=(w[ye]-w[ge])*(w[ge+1]+w[ye+1]),ye=ge;return oe}return e.flatten=function(w){for(var z=w[0][0].length,H={vertices:[],holes:[],dimensions:z},ee=0,oe=0;oe<w.length;oe++){for(var ge=0;ge<w[oe].length;ge++)for(var ye=0;ye<z;ye++)H.vertices.push(w[oe][ge][ye]);oe>0&&(ee+=w[oe-1].length,H.holes.push(ee))}return H},ry.exports}var Kfe=Zfe();const Ug=Kr(Kfe);function GB(e){return Math.max(Math.ceil(e/4)*4,4)}function a9(e,t,r,n=!0){const i=r===3;if(n){e=e.slice();const o=[];for(let l=0;l<e.length;l+=r){o[0]=e[l],o[1]=e[l+1],i&&(o[2]=e[l+2]);const c=Sy(o,!0,{enable:!1,decimal:1});e[l]=c[0],e[l+1]=c[1],i&&(e[l+2]=c[2])}}return Ug(e,t,r)}const o9="ATTRIBUTE_LOCATION_";class xn{get attributeLocation(){return qe({},Nc)}constructor(t){F(this,"triangulation",void 0),F(this,"uniformBuffers",[]),F(this,"textures",[]),F(this,"createTexture2D",void 0),F(this,"preStyleAttribute",{}),F(this,"encodeStyleAttribute",{}),F(this,"layer",void 0),F(this,"dataTexture",void 0),F(this,"DATA_TEXTURE_WIDTH",void 0),F(this,"dataTextureTest",void 0),F(this,"configService",void 0),F(this,"shaderModuleService",void 0),F(this,"rendererService",void 0),F(this,"iconService",void 0),F(this,"fontService",void 0),F(this,"styleAttributeService",void 0),F(this,"mapService",void 0),F(this,"cameraService",void 0),F(this,"layerService",void 0),F(this,"pickingService",void 0),F(this,"attributeUnifoms",void 0),F(this,"commonUnifoms",void 0),this.layer=t,this.configService=t.getContainer().globalConfigService,this.rendererService=t.getContainer().rendererService,this.pickingService=t.getContainer().pickingService,this.shaderModuleService=t.getContainer().shaderModuleService,this.styleAttributeService=t.getContainer().styleAttributeService,this.mapService=t.getContainer().mapService,this.iconService=t.getContainer().iconService,this.fontService=t.getContainer().fontService,this.cameraService=t.getContainer().cameraService,this.layerService=t.getContainer().layerService,this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();const{createTexture2D:r}=this.rendererService;this.createTexture2D=r}getBlend(){const{blend:t="normal"}=this.layer.getLayerConfig();return i9[Sc[t]]}getStencil(t){const{mask:r=!1,maskInside:n=!0,enableMask:i,maskOperation:a=SE.AND}=this.layer.getLayerConfig();if(this.layer.type==="MaskLayer")return XB({stencilType:Zf.SINGLE});if(t.isStencil)return XB(qe(qe({},t),{},{maskOperation:a}));const o=r||i&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return $fe(o,n)}getDefaultStyle(){return{}}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());this.updateStyleUnifoms();const n=qe(qe({},r.uniformsOption),t.uniformsOption);return Object.keys(n).forEach(i=>{typeof n[i]=="boolean"&&(n[i]=n[i]?1:0)}),!this.rendererService.hasOwnProperty("device")&&this.textures&&this.textures.length===1&&(n.u_texture=this.textures[0]),n}getAnimateUniforms(){return{}}needUpdate(){return et(function*(){return!1})()}buildModels(){return et(function*(){throw new Error("Method not implemented.")})()}initModels(){return et(function*(){throw new Error("Method not implemented.")})()}clearModels(t=!0){}getAttribute(){throw new Error("Method not implemented.")}prerender(){}render(t){throw new Error("Method not implemented.")}registerBuiltinAttributes(){throw new Error("Method not implemented.")}animateOption2Array(t){return[t.enable?0:1,t.duration||4,t.interval||.2,t.trailLength||.1]}startModelAnimate(){const{animateOption:t}=this.layer.getLayerConfig();t.enable&&this.layer.setAnimateStartTime()}getInject(){return Qfe(this.layer.enableShaderEncodeStyles,this.layer.encodeStyleAttribute)}getDefines(){const t=Object.keys(this.attributeLocation).reduce((r,n)=>{const i=o9+n;return r[i]=this.attributeLocation[n],r},{});return qe({},t)}getStyleAttribute(){const t={};return this.layer.enableShaderEncodeStyles.forEach(r=>{if(!this.layer.encodeStyleAttribute[r]){const n=this.layer.getLayerConfig()[r];let i=typeof n>"u"?Yfe[r]:n;r==="stroke"&&(i=pn(i)),t["u_"+r]=i}}),t}registerStyleAttribute(){Object.keys(this.layer.encodeStyleAttribute).forEach(t=>{const r=Ife(t);r&&this.styleAttributeService.registerStyleAttribute(r)})}registerPosition64LowAttribute(t=!0){this.styleAttributeService.registerStyleAttribute({name:"position64Low",type:Vt.Attribute,descriptor:{name:"a_Position64Low",shaderLocation:this.attributeLocation.POSITION_64LOW,buffer:{data:[],type:L.FLOAT},size:2,update:(r,n,i)=>t?[Ei(i[0]),Ei(i[1])]:[0,0]}})}updateEncodeAttribute(t,r){this.encodeStyleAttribute[t]=r}initUniformsBuffer(){const t=this.getUniformsBufferInfo(this.getStyleAttribute()),r=this.getCommonUniformsInfo();t.uniformsLength!==0&&(this.attributeUnifoms=this.rendererService.createBuffer({data:new Float32Array(GB(t.uniformsLength)).fill(0),isUBO:!0,label:"layerModelAttributeUnifoms"}),this.uniformBuffers.push(this.attributeUnifoms)),r.uniformsLength!==0&&(this.commonUnifoms=this.rendererService.createBuffer({data:new Float32Array(GB(r.uniformsLength)).fill(0),isUBO:!0,label:"layerModelCommonUnifoms"}),this.uniformBuffers.push(this.commonUnifoms))}getUniformsBufferInfo(t){let r=0;const n=[];return Object.values(t).forEach(i=>{Array.isArray(i)?(n.push(...i),r+=i.length):typeof i=="number"?(n.push(i),r+=1):typeof i=="boolean"&&(n.push(Number(i)),r+=1)}),{uniformsOption:t,uniformsLength:r,uniformsArray:n}}getCommonUniformsInfo(){return{uniformsLength:0,uniformsArray:[],uniformsOption:{}}}updateStyleUnifoms(){var t,r;const{uniformsArray:n}=this.getUniformsBufferInfo(this.getStyleAttribute()),{uniformsArray:i}=this.getCommonUniformsInfo();(t=this.attributeUnifoms)===null||t===void 0||t.subData({offset:0,data:new Uint8Array(new Float32Array(n).buffer)}),(r=this.commonUnifoms)===null||r===void 0||r.subData({offset:0,data:new Uint8Array(new Float32Array(i).buffer)})}}function Qfe(e,t){const r=[];let n="";e.forEach(o=>{const l=o.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase(),c=o9+l;t[o]?n+=`#define USE_ATTRIBUTE_${l} 0.0 
`:r.push(`  ${ty[o]} u_${o};`),n+=`
#ifdef USE_ATTRIBUTE_${l}
layout(location = ${c}) in ${ty[o]} a_${o.charAt(0).toUpperCase()+o.slice(1)};
#endif 
`});const i=r.length?`
layout(std140) uniform AttributeUniforms {
  ${r.join(`
`)}
};
`:"";n+=i;let a="";return e.forEach(o=>{const l=o.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase();a+=`
  #ifdef USE_ATTRIBUTE_${l}
    ${ty[o]} ${o} = a_${o.charAt(0).toUpperCase()+o.slice(1)};
  #else
    ${ty[o]} ${o} = u_${o};
  #endif
  `}),{"vs:#decl":n,"fs:#decl":i,"vs:#main-start":a}}let WB=(function(e){return e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e})({}),Jfe=(function(e){return e.NORMAL="normal",e.REPLACE="replace",e})({}),gO=(function(e){return e[e.pixel=0]="pixel",e[e.meter=1]="meter",e})({});const s9=100;function $B(e){return e/180*Math.acos(-1)}function l9(e){const t=$B(e[0])+Math.PI/2,r=$B(e[1]),n=s9+Math.random()*.4,i=n*Math.cos(r)*Math.cos(t),a=n*Math.cos(r)*Math.sin(t),o=n*Math.sin(r);return[a,o,i]}const YB=Ha();Ha();const wo=Ha(),Mv=Ha(),ny=Ha();function ZB(e,t,r,n,i){Rc(e,r,n),c1(e,e),t=k2(-e[1],e[0]);const a=k2(-r[1],r[0]);return[i/z2(t,a),t]}function Iv(e,t){return Jie(e,-t[1],t[0])}function iy(e,t,r){return Jk(e,t,r),c1(e,e),e}function KB(e,t){return e[0]===t[0]&&e[1]===t[1]}class ede{constructor(t={}){F(this,"complex",void 0),F(this,"join",void 0),F(this,"cap",void 0),F(this,"miterLimit",void 0),F(this,"thickness",void 0),F(this,"normal",void 0),F(this,"lastFlip",-1),F(this,"miter",k2(0,0)),F(this,"started",!1),F(this,"dash",!1),F(this,"totalDistance",0),F(this,"currentIndex",0),this.join=t.join||"miter",this.cap=t.cap||"butt",this.miterLimit=t.miterLimit||10,this.thickness=t.thickness||1,this.dash=t.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}simpleExtrude(t){const r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const n=t.length;let i=r.startIndex;for(let a=1;a<n;a++){const o=t[a-1],l=t[a],c=a<t.length-1?t[a+1]:null,f=this.simpleSegment(r,i,o,l,c);i+=f}if(this.dash)for(let a=0;a<r.positions.length/6;a++)r.positions[a*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}extrude(t){const r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const n=t.length;let i=r.startIndex;for(let a=1;a<n;a++){const o=t[a-1],l=t[a],c=a<t.length-1?t[a+1]:null,f=this.segment(r,i,o,l,c);i+=f}if(this.dash)for(let a=0;a<r.positions.length/6;a++)r.positions[a*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}simpleSegment(t,r,n,i,a){let o=0;const l=t.indices,c=t.positions,f=t.normals,h=Fo([i[0],i[1]]),p=Fo([n[0],n[1]]);iy(wo,h,p);let v=0;if(this.dash&&(v=this.lineSegmentDistance(h,p),this.totalDistance+=v),this.normal||(this.normal=Ha(),Iv(this.normal,wo)),this.started||(this.started=!0,this.extrusions(c,f,n,this.normal,this.thickness,this.totalDistance-v)),l.push(r+0,r+1,r+2),!a)Iv(this.normal,wo),this.extrusions(c,f,i,this.normal,this.thickness,this.totalDistance),l.push(...this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3]),o+=2;else{const g=Fo([a[0],a[1]]);KB(h,g)&&Rc(g,h,c1(g,j2(g,h,p))),iy(Mv,g,h);const[_,E]=ZB(ny,Ha(),wo,Mv,this.thickness);let b=z2(ny,this.normal)<0?-1:1;this.extrusions(c,f,i,E,_,this.totalDistance),l.push(...this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3]),b=-1,pR(this.normal,E),o+=2,this.lastFlip=b}return o}segment(t,r,n,i,a){let o=0;const l=t.indices,c=t.positions,f=t.normals,h=this.cap==="square",p=this.join==="bevel",v=Fo([i[0],i[1]]),g=Fo([n[0],n[1]]);iy(wo,v,g);let _=0;if(this.dash&&(_=this.lineSegmentDistance(v,g),this.totalDistance+=_),this.normal||(this.normal=Ha(),Iv(this.normal,wo)),!this.started)if(this.started=!0,h){const E=Ha(),b=Ha();Rc(E,this.normal,wo),Rc(b,this.normal,wo),f.push(b[0],b[1],0),f.push(E[0],E[1],0),c.push(n[0],n[1],n[2]|0,this.totalDistance-_,-this.thickness,n[2]|0),this.complex.indexes.push(this.currentIndex),c.push(n[0],n[1],n[2]|0,this.totalDistance-_,this.thickness,n[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(c,f,n,this.normal,this.thickness,this.totalDistance-_);if(l.push(r+0,r+1,r+2),a){const E=Fo([a[0],a[1]]);KB(v,E)&&Rc(E,v,c1(E,j2(E,v,g))),iy(Mv,E,v);const[b,S]=ZB(ny,Ha(),wo,Mv,this.thickness);let T=z2(ny,this.normal)<0?-1:1,C=p;!C&&this.join==="miter"&&b>this.miterLimit&&(C=!0),C?(f.push(this.normal[0],this.normal[1],0),f.push(S[0],S[1],0),c.push(i[0],i[1],i[2]|0,this.totalDistance,-this.thickness*T,i[2]|0),this.complex.indexes.push(this.currentIndex),c.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness*T,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,l.push(...this.lastFlip!==-T?[r,r+2,r+3]:[r+2,r+1,r+3]),l.push(r+2,r+3,r+4),Iv(YB,Mv),pR(this.normal,YB),f.push(this.normal[0],this.normal[1],0),c.push(i[0],i[1],i[2]|0,this.totalDistance,-this.thickness*T,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,o+=3):(this.extrusions(c,f,i,S,b,this.totalDistance),l.push(...this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3]),T=-1,pR(this.normal,S),o+=2),this.lastFlip=T}else{if(Iv(this.normal,wo),h){const E=Ha(),b=Ha();Jk(b,wo,this.normal),Rc(E,wo,this.normal),f.push(b[0],b[1],0),f.push(E[0],E[1],0),c.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness,i[2]|0),this.complex.indexes.push(this.currentIndex),c.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(c,f,i,this.normal,this.thickness,this.totalDistance);l.push(...this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3]),o+=2}return o}extrusions(t,r,n,i,a,o){r.push(i[0],i[1],0),r.push(i[0],i[1],0),t.push(n[0],n[1],n[2]|0,o,-a,n[2]|0),this.complex.indexes.push(this.currentIndex),t.push(n[0],n[1],n[2]|0,o,a,n[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}lineSegmentDistance(t,r){const n=r[0]-t[0],i=r[1]-t[1];return Math.sqrt(n*n+i*i)}}let Pv=(function(e){return e.CYLINDER="cylinder",e.SQUARECOLUMN="squareColumn",e.TRIANGLECOLUMN="triangleColumn",e.HEXAGONCOLUMN="hexagonColumn",e.PENTAGONCOLUMN="pentagonColumn",e})({}),Dv=(function(e){return e.CIRCLE="circle",e.SQUARE="square",e.TRIANGLE="triangle",e.HEXAGON="hexagon",e.PENTAGON="pentagon",e})({});function r0(e,t=0){const r=Math.PI*2/e,n=[];for(let a=0;a<e;a++)n.push(r*a+t*Math.PI/12);return n.map(a=>{const o=Math.sin(a+Math.PI/4),l=Math.cos(a+Math.PI/4);return[o,l,0]})}function iC(){return r0(30)}function QB(){return r0(4)}function JB(){return r0(3)}function e6(){return r0(6,1)}function t6(){return r0(5)}const kR={[Dv.CIRCLE]:iC,[Dv.HEXAGON]:e6,[Dv.TRIANGLE]:JB,[Dv.SQUARE]:QB,[Dv.PENTAGON]:t6,[Pv.CYLINDER]:iC,[Pv.HEXAGONCOLUMN]:e6,[Pv.TRIANGLECOLUMN]:JB,[Pv.SQUARECOLUMN]:QB,[Pv.PENTAGONCOLUMN]:t6};function u9(e,t=!1){const r=e[0][0],n=e[0][e[0].length-1];r[0]===n[0]&&r[1]===n[1]&&(e[0]=e[0].slice(0,e[0].length-1));const i=e[0].length,a=Ug.flatten(e),{vertices:o,dimensions:l,holes:c}=a,f=[],h=[],p=[];for(let g=0;g<o.length/l;g++)f.push(o[g*l],o[g*l+1],1,-1,-1),p.push(0,0,1);const v=a9(o,c,l,t);h.push(...v);for(let g=0;g<i;g++){const _=a.vertices.slice(g*l,(g+1)*l);let E=a.vertices.slice((g+1)*l,(g+2)*l);E.length===0&&(E=a.vertices.slice(0,l));const b=f.length/5;f.push(_[0],_[1],1,0,0,E[0],E[1],1,.1,0,_[0],_[1],0,0,.8,E[0],E[1],0,.1,.8);const S=tde([E[0],E[1],1],[_[0],_[1],0],[_[0],_[1],1],t);p.push(...S,...S,...S,...S),h.push(...[1,2,0,3,2,1].map(T=>T+b))}return{positions:f,index:h,normals:p}}function tde(e,t,r,n=!1){const i=tg(),a=tg(),o=tg();n&&(e=Sy(e),t=Sy(t),r=Sy(r));const l=vs(...e),c=vs(...t),f=vs(...r);lL(i,f,c),lL(a,l,c),Zie(o,i,a);const h=tg();return rg(h,o),h}const ay={};function ad(e){const t=pd(e.coordinates);return{vertices:[...t,...t,...t,...t],indices:[0,1,2,2,3,0],size:t.length}}function r6(e){const t=pd(e.coordinates),r=l9(t);return{vertices:[...r,...r,...r,...r],indices:[0,1,2,2,3,0],size:r.length}}function c9(e){const{shape:t}=e,{positions:r,index:n,normals:i}=sde(t,!1);return{vertices:r,indices:n,normals:i,size:5}}function rde(e){const t=pd(e.coordinates);return{vertices:[...t],indices:[0],size:t.length}}function aC(e){const{coordinates:t}=e,r=new ede({dash:!0,join:"bevel"});let n=t;n[0]&&!Array.isArray(n[0][0])&&(n=[t]),n.forEach(a=>{r.extrude(a)});const i=r.complex;return{vertices:i.positions,indices:i.indices,normals:i.normals,indexes:i.indexes,size:6}}function nde(e){const{coordinates:t}=e,r=[];if(!Array.isArray(t[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};const{results:n,totalDistance:i}=ide(t);return n.map(a=>{r.push(a[0],a[1],a[2],a[3],0,i)}),{vertices:r,indices:[],normals:[],size:6,count:n.length}}function n6(e,t){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function jR(e,t){return e.length<3&&e.push(0),t!==void 0&&e.push(t),e}function ide(e){let t=e;Array.isArray(t)&&Array.isArray(t[0])&&Array.isArray(t[0][0])&&(t=e.flat());let r=0;if(t.length<2)return{results:t,totalDistance:0};{const n=[],i=jR(t[0],r);n.push(i);for(let o=1;o<t.length-1;o++){const l=n6(Fo(t[o-1]),Fo(t[o]));r+=l;const c=jR(t[o],r);n.push(c),n.push(c)}const a=n6(Fo(t[t.length-2]),Fo(t[t.length-1]));return r+=a,n.push(jR(t[t.length-1],r)),{results:n,totalDistance:r}}}function n0(e){const{coordinates:t}=e,r=Ug.flatten(t),{vertices:n,dimensions:i,holes:a}=r;return{indices:a9(n,a,i),vertices:n,size:i}}function ade(e){const{indices:t,vertices:r,size:n}=n0(e);return{indices:t,vertices:ode(r),size:n+4}}function ode(e){const t=[],{center:r,radius:n}=Qte(e);for(let i=0;i<e.length;i+=2){const a=e[i],o=e[i+1];t.push(a,o,0,...r,n)}return t}function f9(e){const t=e.coordinates,{positions:r,index:n,normals:i}=u9(t,!0);return{vertices:r,indices:n,normals:i,size:5}}function OE(e){const t=e.coordinates;return{vertices:[...t[0],0,0,0,...t[1],0,1,0,...t[2],0,1,1,...t[3],0,0,1],indices:[0,1,2,0,2,3],size:5}}function _O(e,t){const{segmentNumber:r=30}=t,n=e.coordinates,i=[],a=[];for(let o=0;o<r;o++)i.push(o,1,o,n[0][0],n[0][1],n[1][0],n[1][1],o,-1,o,n[0][0],n[0][1],n[1][0],n[1][1]),o!==r-1&&a.push(...[0,1,2,1,3,2].map(l=>o*2+l));return{vertices:i,indices:a,size:7}}function sde(e,t=!1){if(ay&&ay[e])return ay[e];const r=kR[e]?kR[e]():kR.cylinder(),n=u9([r],t);return ay[e]=n,n}function lde(e,t){return{type:e.type,field:"value",items:e.positions.map((r,n)=>({[t]:n>=e.colors.length?null:e.colors[n],value:r}))}}const ude=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

in vec2 v_texCoord;
out vec4 outputColor;
vec3 setContrast(vec3 rgb, float contrast) {
  vec3 color = mix(vec3(0.5), rgb, contrast);
  color = clamp(color, 0.0, 1.0);
  return color;
}
vec3 setSaturation(vec3 rgb, float adjustment) {
  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);
  vec3 intensity = vec3(dot(rgb, grayVector));
  vec3 color = mix(intensity, rgb, adjustment);
  color = clamp(color, 0.0, 1.0);
  return color;
}
void main() {
  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));
  //brightness
  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);
  //contrast
  color.rgb = setContrast(color.rgb, u_contrast);
  // saturation
  color.rgb = setSaturation(color.rgb, u_saturation);
  // gamma
  color.rgb = pow(color.rgb, vec3(u_gamma));
  outputColor = color;
  outputColor.a *= u_opacity;
  if(outputColor.a < 0.01)
    discard;
}
`,cde=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;let fde=class extends xn{constructor(...t){super(...t),F(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getCommonUniformsInfo(){const{opacity:t,brightness:r,contrast:n,saturation:i,gamma:a}=this.layer.getLayerConfig(),o={u_opacity:xv(t,1),u_brightness:xv(r,1),u_contrast:xv(n,1),u_saturation:xv(i,1),u_gamma:xv(a,1)};return this.textures=[this.texture],this.getUniformsBufferInfo(o)}initModels(){var t=this;return et(function*(){return yield t.loadTexture(),t.buildModels()})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy()}loadTexture(){var t=this;return et(function*(){const{createTexture2D:r}=t.rendererService,i=yield t.layer.getSource().data.images;t.texture=r({data:i[0],width:i[0].width,height:i[0].height,mag:L.LINEAR,min:L.LINEAR})})()}buildModels(){var t=this;return et(function*(){return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:cde,fragmentShader:ude,defines:t.getDefines(),triangulation:OE,primitive:L.TRIANGLES,blend:{enable:!0},depth:{enable:!1},pickingEnabled:!1})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Vt.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:2,update:(t,r,n)=>[n[3],n[4]]}})}};const dde={image:fde};class hde extends em{constructor(...t){super(...t),F(this,"type","ImageLayer")}buildModels(){var t=this;return et(function*(){const r=t.getModelType();t.layerModel=new dde[r](t),yield t.initLayerModels()})()}getDefaultConfig(){const t=this.getModelType();return{image:{}}[t]}getModelType(){return"image"}}const pde=`
#define Animate 0.0
#define LineTexture 1.0
uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_lineData;
//dash
in vec4 v_dash_array;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      discard;
    };
  }
  float animateSpeed = 0.0; // 运动速度
  outputColor = v_color;
  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;
  }

  // 当存在贴图时在底色上贴上贴图
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // 贴图在弧线上重复的数量

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; // 横向 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
    
  } else {
     outputColor = filterColor(outputColor);
  }
}`,mde=`#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_lineData;
//dash
out vec4 v_dash_array;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  if (u_lineDir == 1.0) {
    // 正向
    return mid;
  } else {
    // 逆向
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
  // dash: index / (segmentNumber - 1.);
  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
  //  return index / (segmentNumber - 1.);
}
vec2 interpolate(vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x, t), bezier3(y, t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return dir_screenspace.xy * sign(offset_direction);
}

void main() {
  //vs中计算渐变色
  if (u_linearColor == 1.0) {
    float d_segmentIndex = a_Position.x + 1.0; // 当前顶点在弧线中所处的分段位置
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex / segmentNumber);
  } else {
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;

  vec2 source_world = a_Instance.rg; // 起始点
  vec2 target_world = a_Instance.ba; // 终点

  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  // 计算 dashArray 和 distanceRatio 输出到片元
  float total_Distance = pixelDistance(source_world, target_world) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  v_distance_ratio = segmentIndex / segmentNumber;

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;

  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

  v_lineData.b = d_distance_ratio;

  vec4 source = project_position(vec4(source_world, 0, 1.), a_Instance64Low.xy);
  vec4 target = project_position(vec4(target_world, 0, 1.), a_Instance64Low.zw);

  vec2 currPos = interpolate(source.xy, target.xy, segmentRatio, thetaOffset);
  vec2 nextPos = interpolate(source.xy, target.xy, nextSegmentRatio, thetaOffset);

  vec2 offset = project_pixel(
    getExtrusionOffset((nextPos.xy - currPos.xy) * indexDir, a_Position.y)
  );

  float d_segmentIndex = a_Position.x + 1.0; // 当前顶点在弧线中所处的分段位置
  v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // 开启贴图模式
    float arcDistrance = length(source - target); // 起始点和终点的距离
    arcDistrance = project_pixel(arcDistrance);

    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // 贴图沿弧线方向的长度 - 随地图缩放改变
    float texCount = floor(arcDistrance / pixelLen); // 贴图在弧线上重复的数量
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // 线横向偏移的距离
    float linePixelSize = project_pixel(a_Size); // 定点位置偏移
    v_lineData.a = lineOffsetWidth / linePixelSize; // 线图层贴图部分的 v 坐标值
  }

  gl_Position = project_common_position_to_clipspace(vec4(currPos.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,vde={solid:0,dash:1};class gde extends xn{constructor(...t){super(...t),F(this,"texture",void 0),F(this,"updateTexture",()=>{const{createTexture2D:r}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=r({data:this.iconService.getCanvas(),mag:L.NEAREST,min:L.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13})}getCommonUniformsInfo(){const{sourceColor:t,targetColor:r,textureBlend:n="normal",lineType:i="solid",dashArray:a=[10,5],forward:o=!0,lineTexture:l=!1,iconStep:c=100,segmentNumber:f=30}=this.layer.getLayerConfig(),{animateOption:h}=this.layer.getLayerConfig();let p=a;i!=="dash"&&(p=[0,0]),p.length===2&&p.push(0,0);let v=0,g=[0,0,0,0],_=[0,0,0,0];if(t&&r&&(g=pn(t),_=pn(r),v=1),this.rendererService.getDirty()){var E;(E=this.texture)===null||E===void 0||E.bind()}const b={u_animate:this.animateOption2Array(h),u_dash_array:p,u_sourceColor:g,u_targetColor:_,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:f,u_lineDir:o?1:-1,u_icon_step:c,u_line_texture:l?1:0,u_textureBlend:n==="normal"?0:1,u_blur:.9,u_line_type:vde[i||"solid"],u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:v};return this.getUniformsBufferInfo(b)}initModels(){var t=this;return et(function*(){return t.updateTexture(),t.iconService.on("imageUpdate",t.updateTexture),t.buildModels()})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:pde,vert:mde,type:""}}buildModels(){var t=this;return et(function*(){t.initUniformsBuffer();const{segmentNumber:r=30}=t.layer.getLayerConfig(),{frag:n,vert:i,type:a}=t.getShaders();return[yield t.layer.buildLayerModel({moduleName:"lineArc2d"+a,vertexShader:i,fragmentShader:n,defines:t.getDefines(),inject:t.getInject(),triangulation:_O,depth:{enable:!1},styleOption:{segmentNumber:r}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{size:r=1}=t;return Array.isArray(r)?[r[0]]:[r]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Vt.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:4,update:(t,r,n)=>[n[3],n[4],n[5],n[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Vt.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:4,update:(t,r,n)=>[Ei(n[3]),Ei(n[4]),Ei(n[5]),Ei(n[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Vt.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:2,update:t=>{const r=this.iconService.getIconMap(),{texture:n}=t,{x:i,y:a}=r[n]||{x:0,y:0};return[i,a]}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:Vt.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{thetaOffset:r=1}=t;return[r]}}})}}const _de=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec4 v_dash_array;
in float v_segmentIndex;
in vec2 v_iconMapUV;
in vec4 v_line_data;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // 运动速度
  float d_distance_ratio = v_line_data.g; // 当前点位距离占线总长的比例
  outputColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    outputColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;

      // u_animate
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // 贴图在弧线上重复的数量

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  // 线图层贴图部分的 v 坐标值
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          outputColor = filterColor(pattern);
        }
    }

  } else {
    outputColor = filterColor(outputColor);
  }
}
`,yde=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec4 v_dash_array;
out float v_segmentIndex;
out vec2 v_iconMapUV;
out vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 是为了对齐坐标
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // 手动增加一些偏移，减轻面的冲突
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  //vs中计算渐变色
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // 当前顶点在弧线中所处的分段位置
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0), a_Instance64Low.xy).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0), a_Instance64Low.zw).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // 当前点位距离占线总长的比例

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // 开启贴图模式

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // 贴图在弧线上重复的数量

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // 线横向偏移的距离
    float linePixelSize = project_pixel(a_Size);  // 定点位置偏移，按地图等级缩放后的距离
    v_line_data.a = lineOffsetWidth/linePixelSize;  // 线图层贴图部分的 v 坐标值

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // 地球模式
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // 线的偏移
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // 计算起始点和终止点的距离
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // 计算飞线各个节点相应的高度
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // 地球点位
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;

    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }


  setPickingColor(a_PickingColor);
}
`,Ede={solid:0,dash:1};class i6 extends xn{constructor(...t){super(...t),F(this,"texture",void 0),F(this,"updateTexture",()=>{const{createTexture2D:r}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=r({data:this.iconService.getCanvas(),mag:L.NEAREST,min:L.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13})}getCommonUniformsInfo(){const{sourceColor:t,targetColor:r,textureBlend:n="normal",lineType:i="solid",dashArray:a=[10,5],lineTexture:o=!1,iconStep:l=100,segmentNumber:c=30,globalArcHeight:f=10}=this.layer.getLayerConfig(),{animateOption:h}=this.layer.getLayerConfig();a.length===2&&a.push(0,0);let p=0,v=[0,0,0,0],g=[0,0,0,0];if(t&&r&&(v=pn(t),g=pn(r),p=1),this.rendererService.getDirty()){var _;(_=this.texture)===null||_===void 0||_.bind()}const E={u_animate:this.animateOption2Array(h),u_dash_array:a,u_sourceColor:v,u_targetColor:g,u_textSize:[1024,this.iconService.canvasHeight||128],u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:s9,u_global_height:f,segmentNumber:c,u_line_type:Ede[i]||0,u_icon_step:l,u_line_texture:o?1:0,u_textureBlend:n==="normal"?0:1,u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:p};return this.getUniformsBufferInfo(E)}initModels(){var t=this;return et(function*(){return t.initUniformsBuffer(),t.updateTexture(),t.iconService.on("imageUpdate",t.updateTexture),t.buildModels()})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:_de,vert:yde,type:""}}buildModels(){var t=this;return et(function*(){const{segmentNumber:r=30}=t.layer.getLayerConfig(),{frag:n,vert:i,type:a}=t.getShaders();return[yield t.layer.buildLayerModel({moduleName:"lineArc3d"+a,vertexShader:i,fragmentShader:n,defines:t.getDefines(),inject:t.getInject(),triangulation:_O,styleOption:{segmentNumber:r}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{size:r=1}=t;return Array.isArray(r)?[r[0]]:[r]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Vt.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:4,update:(t,r,n)=>[n[3],n[4],n[5],n[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Vt.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:4,update:(t,r,n)=>[Ei(n[3]),Ei(n[4]),Ei(n[5]),Ei(n[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Vt.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:2,update:t=>{const r=this.iconService.getIconMap(),{texture:n}=t,{x:i,y:a}=r[n]||{x:0,y:0};return[i,a]}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:Vt.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{thetaOffset:r=1}=t;return[r]}}})}}const a6={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0},Xa=1/2;function bde(e,t){const{width:r=2,height:n=1}=t;return{vertices:[0,Xa*e,1*e*r,-(n+Xa)*e,1*e*r,(n-Xa)*e,0,Xa*e,1*e*r,-(n+Xa)*e,1*e*r,(n-Xa)*e],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*e,-2*e,1,-2*e,1.5*e,1,1*e,1.5*e,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function xde(e,t){const{width:r=2,height:n=3}=t;return{vertices:[0,0,1*e*r,1*n,1*e*r,-1*n,0,0,1*e*r,1*n,1*e*r,-1*n],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*e,1,2,1*e,1,-2,1*e,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function Sde(e,t){const{width:r=2,height:n=2}=t;return{vertices:[0,n/2,e*r*1,n/2,e*r*1,-n/2,0,-n/2,0,n/2,e*r*1,n/2,e*r*1,-n/2,0,-n/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function Tde(e,t){const{width:r=2,height:n=3}=t;return{vertices:[0,0,1*r*e,.5*n,2*r*e,0,1*r*e,-.5*n,0,0,1*r*e,.5*n,2*r*e,0,1*r*e,-.5*n],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function Ade(e,t){const{width:r=2,height:n=3}=t;return{vertices:[0,0,2*e*r,1*n,1.5*e*r,0,2*e*r,-1*n,0,0,2*e*r,1*n,1.5*e*r,0,2*e*r,-1*n],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function Rde(e,t){const{width:r=2,height:n=2}=t,i=iC(),a=Ug.flatten([i]),o=Ug(a.vertices,a.holes,a.dimensions),l=i.map(c=>[c[0]*r*e,c[1]*n]).flat();return{vertices:[...l,...l],dimensions:2,indices:o.map(c=>c+i.length),outLineIndices:o,normals:[...i.map(c=>[c[1]*n,c[0]*r*e,1]).flat(),...new Array(i.length*3).fill(0)]}}function Cde(e,t=0,r){const n=typeof r.source=="object"?r.source.type:r.source,i=typeof r.target=="object"?r.target.type:r.target,{width:a=n?a6[n]:0}=typeof r.source=="object"?r.source:{},{width:o=i?a6[i]:0}=typeof r.target=="object"?r.target:{};return{vertices:[0,Xa,1*a,...e,1,Xa,-1*o,...e,1,-Xa,-1*o,...e,0,-Xa,1*a,...e,0,Xa,1*a,...e,1,Xa,-1*o,...e,1,-Xa,-1*o,...e,0,-Xa,1*a,...e],outLineIndices:[0,1,2,0,2,3].map(l=>l+t),indices:[4,5,6,4,6,7].map(l=>l+t),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2}}function o6(e,t){const r=typeof e=="object"?e.type:e,n=t==="source"?1:-1,i=typeof e=="object"?e:{};switch(r){case"circle":return Rde(n,i);case"triangle":return xde(n,i);case"diamond":return Tde(n,i);case"rect":return Sde(n,i);case"classic":return Ade(n,i);case"halfTriangle":return bde(n,i);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]}}}function Ode(e){const t=e.coordinates.flat(),r=1;return{vertices:[1,0,0,...t,1,2,-3,...t,1,1,-3,...t,0,1,0,...t,0,0,0,...t,1,0,0,...t,1,2,-3,...t,1,1,-3,...t,0,1,0,...t,0,0,0,...t],normals:[-1,2*r,1,2*r,-r,1,r,-r,1,r,-r,1,-1,-r,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function wde(e,t){return t?Nde(e,t):Ode(e)}function Nde(e,t){const r=e.coordinates.flat(),{target:n="classic",source:i="circle"}=t,a=s6(o6(i,"source"),r,0,0),o=Cde(r,a.vertices.length/7,t),l=s6(o6(n,"target"),r,1,a.vertices.length/7+o.vertices.length/7);return{vertices:[...a.vertices,...o.vertices,...l.vertices],indices:[...a.outLineIndices,...o.outLineIndices,...l.outLineIndices,...a.indices,...o.indices,...l.indices],normals:[...a.normals,...o.normals,...l.normals],size:7}}function s6(e,t,r=1,n=0){const i=[],{vertices:a,indices:o,dimensions:l,outLineIndices:c}=e;for(let f=0;f<a.length;f+=l)i.push(r,a[f+1],a[f],...t);return qe(qe({},e),{},{vertices:i,indices:o.map(f=>f+n),outLineIndices:c.map(f=>f+n)})}const Mde=`// #extension GL_OES_standard_derivatives : enable

in vec4 v_color;
out vec4 outputColor;


// line texture

#pragma include "picking"

void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,Ide=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniorm {
  float u_gap_width: 1.0;
  float u_stroke_width: 1.0;
  float u_stroke_opacity: 1.0;
};

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

out vec4 v_color;

vec2 project_pixel_offset(vec2 offsets) {
  vec2 data = project_pixel(offsets);

  return vec2(data.x, -data.y);
}

vec2 line_dir(vec2 target, vec2 source) {
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}


void main() {
  // 透明度计算
  vec2 source_world = a_Instance.rg; // 起点
  vec2 target_world = a_Instance.ba; // 终点
  vec2 flowlineDir = line_dir(target_world, source_world);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x);

  vec2 position = mix(source_world, target_world, a_Position.x);
  vec2 position64Low = mix(a_Instance64Low.rg, a_Instance64Low.ba, a_Position.x);

  float lengthCommon = length(
    project_position(vec4(target_world, 0, 1)) - project_position(vec4(source_world, 0, 1))
  );
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || 高德
  vec2 limitedOffsetDistances = clamp(
    offsetDistances,
    project_pixel(-lengthCommon * 0.2),
    project_pixel(lengthCommon * 0.2)
  );

  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon * 0.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon * 0.2),
    a_Position.x
  );

  vec2 normalsCommon = u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y));

  float gapCommon = -1. * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
      perpendicularDir * (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );

  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0), position64Low);

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));

  setPickingColor(a_PickingColor);
}
`;class Pde extends xn{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,NORMAL:12})}getCommonUniformsInfo(){const{gapWidth:t=2,strokeWidth:r=1,strokeOpacity:n=1}=this.layer.getLayerConfig(),i={u_gap_width:t,u_stroke_width:r,u_stroke_opacity:n};return this.getUniformsBufferInfo(i)}initModels(){var t=this;return et(function*(){return t.initUniformsBuffer(),t.buildModels()})()}buildModels(){var t=this;return et(function*(){return[yield t.layer.buildLayerModel({moduleName:"flow_line",vertexShader:Ide,fragmentShader:Mde,defines:t.getDefines(),inject:t.getInject(),triangulation:wde,styleOption:t.layer.getLayerConfig().symbol,primitive:L.TRIANGLES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:2,update:t=>{const{size:r=1}=t;return Array.isArray(r)?[r[0],r[1]]:[r,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Vt.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:4,update:(t,r,n)=>[n[3],n[4],n[5],n[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Vt.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:4,update:(t,r,n)=>[Ei(n[3]),Ei(n[4]),Ei(n[5]),Ei(n[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Vt.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:3,update:(t,r,n,i,a)=>a}})}}const Dde=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

in vec4 v_dash_array;
in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_line_data;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;

  // 设置弧线的底色
  if(u_linearColor == 1.0) { // 使用渐变颜色
    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
    outputColor.a *= v_color.a;
  } else { // 使用 color 方法传入的颜色
    outputColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // 实线部分
    } else {
      // 虚线部分
      discard;
    };
  }

  // 设置弧线的动画模式
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  // 设置弧线的贴图
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) {
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // 贴图在弧线上重复的数量
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = outputColor.a/v_color.a;
    }

    float v = v_line_data.a; // 线图层贴图部分的 v 坐标值

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // 设置贴图和底色的叠加模式
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  } else {
    outputColor = filterColor(outputColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}
`,Lde=`#define LineTypeSolid (0.0)
#define LineTypeDash (1.0)
#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

out vec4 v_dash_array;
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_line_data;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps(float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return index / (segmentNumber - 1.0);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(mix(source, target, segmentRatio), sqrt(max(0.0, vertex_height)));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}
float getAngularDist(vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) * sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate(vec2 source, vec2 target, float angularDist, float t) {
  if (abs(angularDist - PI) < 0.001) {
    return (1.0 - t) * source + t * target;
  }
  float a = sin((1.0 - t) * angularDist) / sin(angularDist);
  float b = sin(t * angularDist) / sin(angularDist);
  vec2 sin_source = sin(source);
  vec2 cos_source = cos(source);
  vec2 sin_target = sin(target);
  vec2 cos_target = cos(target);
  float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
  float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
  float z = a * sin_source.y + b * sin_target.y;
  return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));

}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if (u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    total_Distance = total_Distance * 16.0; // total_Distance*16.0 调整默认的效果
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if (u_animate.x == Animate) {
    v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;

  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0), a_Instance64Low.xy);
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0), a_Instance64Low.zw);

  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_line_data.g = a_Position.x; // 该顶点在弧线上的分段排序
  if (LineTexture == u_line_texture) {
    float d_arcDistrance = length(source - target);
    d_arcDistrance = project_pixel(d_arcDistrance);

    float d_pixelLen = project_pixel(u_icon_step) / 8.0;
    v_line_data.b = floor(d_arcDistrance / d_pixelLen); // 贴图在弧线上重复的数量

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // 线横向偏移的距离
    float linePixelSize = project_pixel(a_Size); // 定点位置偏移，按地图等级缩放后的距离
    v_line_data.a = lineOffsetWidth / linePixelSize; // 线图层贴图部分的 v 坐标值

    v_iconMapUV = a_iconMapUV;
  }

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,Bde={solid:0,dash:1};class Fde extends xn{constructor(...t){super(...t),F(this,"texture",void 0),F(this,"updateTexture",()=>{const{createTexture2D:r}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=r({data:this.iconService.getCanvas(),mag:L.NEAREST,min:L.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12})}getCommonUniformsInfo(){const{sourceColor:t,targetColor:r,textureBlend:n="normal",lineType:i="solid",dashArray:a=[10,5],lineTexture:o=!1,iconStep:l=100,segmentNumber:c=30}=this.layer.getLayerConfig(),{animateOption:f}=this.layer.getLayerConfig();if(a.length===2&&a.push(0,0),this.rendererService.getDirty()){var h;(h=this.texture)===null||h===void 0||h.bind()}let p=0,v=[0,0,0,0],g=[0,0,0,0];t&&r&&(v=pn(t),g=pn(r),p=1);let _=this.layer.getLayerAnimateTime();isNaN(_)&&(_=0);const E={u_animate:this.animateOption2Array(f),u_dash_array:a,u_sourceColor:v,u_targetColor:g,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:c,u_line_type:Bde[i]||0,u_icon_step:l,u_line_texture:o?1:0,u_textureBlend:n==="normal"?0:1,u_time:_,u_linearColor:p};return this.getUniformsBufferInfo(E)}initModels(){var t=this;return et(function*(){return t.initUniformsBuffer(),t.updateTexture(),t.iconService.on("imageUpdate",t.updateTexture),t.buildModels()})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var t=this;return et(function*(){const{segmentNumber:r=30}=t.layer.getLayerConfig();return[yield t.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:Lde,fragmentShader:Dde,triangulation:_O,styleOption:{segmentNumber:r},defines:t.getDefines(),inject:t.getInject(),depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{size:r=1}=t;return Array.isArray(r)?[r[0]]:[r]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Vt.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:4,update:(t,r,n)=>[n[3],n[4],n[5],n[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Vt.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:4,update:(t,r,n)=>[Ei(n[3]),Ei(n[4]),Ei(n[5]),Ei(n[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Vt.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:2,update:t=>{const r=this.iconService.getIconMap(),{texture:n}=t,{x:i,y:a}=r[n]||{x:0,y:0};return[i,a]}}})}}const Ude=`// #extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

in vec4 v_color;
in vec4 v_stroke;
// dash
in vec4 v_dash_array;
in float v_d_distance_ratio;
in vec2 v_iconMapUV;
in vec4 v_texture_data;

out vec4 outputColor;
#pragma include "picking"

// [animate, duration, interval, trailLength],
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // 虚线部分
      discard;
    };
  }
  float animateSpeed = 0.0; // 运动速度
  float d_distance_ratio = v_texture_data.r; // 当前点位距离占线总长的比例
  if(u_linearDir < 1.0) {
    d_distance_ratio = v_texture_data.a;
  }
  if(u_linearColor == 1.0) { // 使用渐变颜色
    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
    outputColor.a *= v_color.a;
  } else { // 使用 color 方法传入的颜色
     outputColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // 当前顶点的距离
    float d_texPixelLen = v_texture_data.b;  // 贴图的像素长度，根据地图层级缩放
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  // 线图层贴图部分的 v 坐标值

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  // 绘制 border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // 外侧
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  outputColor = filterColor(outputColor);
}
`,kde=`#define Animate (0.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_INDEX) in vec3 a_DistanceAndIndexAndMiter;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec4 a_Normal_Total_Distance;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

out vec4 v_color;
out vec4 v_stroke;
//dash
out vec4 v_dash_array;
out float v_d_distance_ratio;
// texV 线图层 - 贴图部分的 v 坐标（线的宽度方向）
out vec2 v_iconMapUV;
out vec4 v_texture_data;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec2 a_DistanceAndIndex = a_DistanceAndIndexAndMiter.xy;
  float a_Miter = a_DistanceAndIndexAndMiter.z;
  vec3 a_Normal = a_Normal_Total_Distance.xyz;
  float a_Total_Distance = a_Normal_Total_Distance.w;
  //dash输出
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;

  // cal style mapping - 数据纹理映射部分的计算
  float d_texPixelLen; // 贴图的像素长度，根据地图层级缩放
  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * a_Normal;

  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // 线横向偏移的距离（向两侧偏移的和）
  float linePixelSize = project_pixel(a_Size.x) * 2.0; // 定点位置偏移，按地图等级缩放后的距离 单侧 * 2
  float texV = lineOffsetWidth / linePixelSize; // 线图层贴图部分的 v 坐标值

  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // 设置数据集的参数

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // 线顶点的高度 - 兼容不存在第三个数值的情况 vertex height
  float lineHeight = a_Size.y; // size 第二个参数代表的高度 [linewidth, lineheight]

  // 兼容 mapbox 在线高度上的效果表现基本一致
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // 保持高度相对不变
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    h *= mapboxZoomScale;
    h += u_raisingHeight * mapboxZoomScale;
    if (u_heightfixed > 0.0) {
      lineHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(
    vec4(project_pos.xy + offset, lineHeight + h, 1.0)
  );

  setPickingColor(a_PickingColor);
}
`;class d9 extends xn{constructor(...t){super(...t),F(this,"textureEventFlag",!1),F(this,"texture",this.createTexture2D({data:new Uint8Array([0,0,0,0]),width:1,height:1})),F(this,"updateTexture",()=>{const{createTexture2D:r}=this.rendererService;if(this.textures.length===0&&(this.textures=[this.texture]),this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=r({data:this.iconService.getCanvas(),mag:L.NEAREST,min:L.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128})})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,DISTANCE_INDEX:10,NORMAL:11,UV:12})}getCommonUniformsInfo(){const{sourceColor:t,targetColor:r,textureBlend:n="normal",lineType:i="solid",dashArray:a=[10,5,0,0],lineTexture:o=!1,iconStep:l=100,vertexHeightScale:c=20,strokeWidth:f=0,raisingHeight:h=0,heightfixed:p=!1,linearDir:v=WB.VERTICAL,blur:g=[1,1,1,0]}=this.layer.getLayerConfig();let _=a;if(i!=="dash"&&(_=[0,0,0,0]),_.length===2&&_.push(0,0),this.rendererService.getDirty()&&this.texture){var E;(E=this.texture)===null||E===void 0||E.bind()}const{animateOption:b}=this.layer.getLayerConfig();let S=0,T=[0,0,0,0],C=[0,0,0,0];t&&r&&(T=pn(t),C=pn(r),S=1);const M={u_animate:this.animateOption2Array(b),u_dash_array:_,u_blur:g,u_sourceColor:T,u_targetColor:C,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:l,u_heightfixed:Number(p),u_vertexScale:c,u_raisingHeight:Number(h),u_strokeWidth:f,u_textureBlend:n===Jfe.NORMAL?0:1,u_line_texture:o?1:0,u_linearDir:v===WB.VERTICAL?1:0,u_linearColor:S,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(M)}initModels(){var t=this;return et(function*(){return t.initUniformsBuffer(),t.textureEventFlag||(t.textureEventFlag=!0,t.updateTexture(),t.iconService.on("imageUpdate",t.updateTexture)),t.buildModels()})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var t=this;return et(function*(){const{depth:r=!1}=t.layer.getLayerConfig(),{frag:n,vert:i,type:a}=t.getShaders();return t.layer.triangulation=aC,[yield t.layer.buildLayerModel({moduleName:"line"+a,vertexShader:i,fragmentShader:n,triangulation:aC,defines:t.getDefines(),inject:t.getInject(),depth:{enable:r}})]})()}getShaders(){return{frag:Ude,vert:kde,type:""}}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Vt.Attribute,descriptor:{name:"a_DistanceAndIndexAndMiter",shaderLocation:this.attributeLocation.DISTANCE_INDEX,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:3,update:(t,r,n,i,a,o)=>o===void 0?[n[3],10,n[4]]:[n[3],o,n[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:2,update:t=>{const{size:r=1}=t;return Array.isArray(r)?[r[0],r[1]]:[r,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal_total_distance",type:Vt.Attribute,descriptor:{name:"a_Normal_Total_Distance",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:4,update:(t,r,n,i,a)=>[...a,n[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Vt.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:2,update:t=>{const r=this.iconService.getIconMap(),{texture:n}=t,{x:i,y:a}=r[n]||{x:0,y:0};return[i,a]}}})}}const jde=`
layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};
in float v_distanceScale;
in vec4 v_color;
//dash
in vec4 v_dash_array;

out vec4 outputColor;
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // 虚线部分
      discard;
    };
  }
  if(u_linearColor==1.0){
    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
    outputColor.a *= v_color.a; // 全局透明度
  }
  else{
    outputColor = v_color;
  }
}
`,zde=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec4 a_SizeDistanceAndTotalDistance;

layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};

#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out float v_distanceScale;
out vec4 v_dash_array;

void main() {
  //dash输出
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;

  v_color = a_Color;
  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float h = float(a_Position.z) * u_vertexScale; // 线顶点的高度 - 兼容不存在第三个数值的情况

  float lineHeight = a_SizeDistanceAndTotalDistance.y;
  // 兼容 mapbox 在线高度上的效果表现基本一致
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // 保持高度相对不变
    h *= 2.0 / pow(2.0, 20.0 - u_Zoom);
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
  gl_PointSize = 10.0;

}
`;class Vde extends xn{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getCommonUniformsInfo(){const{sourceColor:t,targetColor:r,lineType:n="solid",dashArray:i=[10,5,0,0],vertexHeightScale:a=20}=this.layer.getLayerConfig();let o=i;n!=="dash"&&(o=[0,0,0,0]),o.length===2&&o.push(0,0);let l=0,c=[0,0,0,0],f=[0,0,0,0];t&&r&&(c=pn(t),f=pn(r),l=1);const h={u_sourceColor:c,u_targetColor:f,u_dash_array:o,u_vertexScale:a,u_linearColor:l};return this.getUniformsBufferInfo(h)}initModels(){var t=this;return et(function*(){return t.buildModels()})()}getShaders(){return{frag:jde,vert:zde,type:"lineSimpleNormal"}}buildModels(){var t=this;return et(function*(){t.initUniformsBuffer();const{frag:r,vert:n,type:i}=t.getShaders();return[yield t.layer.buildLayerModel({moduleName:i,vertexShader:n,fragmentShader:r,triangulation:nde,defines:t.getDefines(),inject:t.getInject(),primitive:L.LINES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:Vt.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:4,update:(t,r,n)=>{const{size:i=1}=t,a=Array.isArray(i)?[i[0],i[1]]:[i,0];return[a[0],a[1],n[3],n[5]]}}})}}const Hde=`#define Animate 0.0
#define LineTexture 1.0

// line texture

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};


in vec2 v_iconMapUV;
in vec4 v_color;
in float v_blur;
in vec4 v_dataset;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // 运动速度
  float d_distance_ratio = v_dataset.r; // 当前点位距离占线总长的比例
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // 使用渐变颜色
    outputColor = mix(u_sourceColor, u_targetColor, v);
  } else { // 使用 color 方法传入的颜色
     outputColor = v_color;
  }

  outputColor.a *= v_color.a; // 全局透明度
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // 当前顶点的距离
    float d_texPixelLen = v_dataset.b;  // 贴图的像素长度，根据地图层级缩放
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // 线图层贴图部分的 v 坐标值

    // 计算纹理间隔 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // 计算纹理间隔 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // Tip: 判断纹理间隔
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  }


  // blur - AA
  if(v < v_blur) {
    outputColor.a = mix(0.0, outputColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  outputColor = filterColor(outputColor);
}
`,Xde=`#define Animate 0.0
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_MITER_TOTAL) in vec3 a_Distance_Total_Miter;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};

// texV 线图层 - 贴图部分的 v 坐标（线的宽度方向）
out vec2 v_iconMapUV;
out vec4 v_color;
out float v_blur;
out vec4 v_dataset;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float a_Distance = a_Distance_Total_Miter.x;
  float a_Miter = a_Distance_Total_Miter.y;
  float a_Total_Distance = a_Distance_Total_Miter.z;

  float d_distance_ratio; // 当前点位距离占线总长的比例
  float d_texPixelLen; // 贴图的像素长度，根据地图层级缩放

  v_iconMapUV = a_iconMapUV;
  if (u_heightfixed < 1.0) {
    // 高度随 zoom 调整
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }

  if (u_animate.x == Animate || u_linearColor == 1.0) {
    d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0) / 2.0;
  // 设置数据集的参数
  v_dataset[0] = d_distance_ratio; // 当前点位距离占线总长的比例
  v_dataset[1] = a_Distance; // 当前顶点的距离
  v_dataset[2] = d_texPixelLen; // 贴图的像素长度，根据地图层级缩放
  v_dataset[3] = miter; // 线图层贴图部分的 v 坐标值 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float originSize = a_Size.x; // 固定高度
  if (u_heightfixed < 1.0) {
    originSize = project_float_meter(a_Size.x); // 高度随 zoom 调整
  }

  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  // 兼容 mapbox 在线高度上的效果表现基本一致
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // 保持高度相对不变
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    if (u_heightfixed > 0.0) {
      wallHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;class qde extends xn{constructor(...t){super(...t),F(this,"texture",void 0),F(this,"updateTexture",()=>{const{createTexture2D:r}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=r({data:this.iconService.getCanvas(),mag:L.NEAREST,min:L.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:12,UV:13,DISTANCE_MITER_TOTAL:15})}getCommonUniformsInfo(){const{sourceColor:t,targetColor:r,textureBlend:n="normal",heightfixed:i=!1,lineTexture:a=!1,iconStep:o=100,iconStepCount:l=1}=this.layer.getLayerConfig(),{animateOption:c}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var f;(f=this.texture)===null||f===void 0||f.bind()}let h=0,p=[0,0,0,0],v=[0,0,0,0];t&&r&&(p=pn(t),v=pn(r),h=1);const g={u_animate:this.animateOption2Array(c),u_sourceColor:p,u_targetColor:v,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:o,u_heightfixed:Number(i),u_linearColor:h,u_line_texture:a?1:0,u_textureBlend:n==="normal"?0:1,u_iconStepCount:l,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(g)}initModels(){var t=this;return et(function*(){return t.initUniformsBuffer(),t.updateTexture(),t.iconService.on("imageUpdate",t.updateTexture),t.buildModels()})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var t=this;return et(function*(){return[yield t.layer.buildLayerModel({moduleName:"lineWall",vertexShader:Xde,fragmentShader:Hde,triangulation:aC,defines:t.getDefines(),inject:t.getInject(),depth:{enable:!1},blend:t.getBlend()})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:2,update:t=>{const{size:r=1}=t;return Array.isArray(r)?[r[0],r[1]]:[r,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Vt.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:3,update:(t,r,n,i,a)=>a}}),this.styleAttributeService.registerStyleAttribute({name:"distanceAndTotalAndMiter",type:Vt.Attribute,descriptor:{name:"a_Distance_Total_Miter",shaderLocation:this.attributeLocation.DISTANCE_MITER_TOTAL,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:3,update:(t,r,n)=>[n[3],n[4],n[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Vt.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:2,update:t=>{const r=this.iconService.getIconMap(),{texture:n}=t,{x:i,y:a}=r[n]||{x:0,y:0};return[i,a]}}})}}const Gde={arc:gde,arc3d:i6,greatcircle:Fde,wall:qde,line:d9,simple:Vde,flowline:Pde,earthArc3d:i6};class h9 extends em{constructor(...t){super(...t),F(this,"type","LineLayer"),F(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","thetaOffset"]),F(this,"arrowInsertCount",0),F(this,"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}})}buildModels(){var t=this;return et(function*(){const r=t.getModelType();t.layerModel=new Gde[r](t),yield t.initLayerModels()})()}getDefaultConfig(){const t=this.getModelType();return{line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}}[t]}getModelType(){var t;if(this.layerType)return this.layerType;const r=this.styleAttributeService.getLayerStyleAttribute("shape");return(r==null||(t=r.scale)===null||t===void 0?void 0:t.field)||"line"}processData(t){if(this.getModelType()!=="simple")return t;const r=[];return t.map(n=>{if(Array.isArray(n.coordinates)&&Array.isArray(n.coordinates[0])&&Array.isArray(n.coordinates[0][0])){const i=qe({},n);n.coordinates.map(a=>{r.push(qe(qe({},i),{},{coordinates:a}))})}else r.push(n)}),r}}const Wde=`
layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

in vec4 v_color;
in float v_blur;
in float v_innerRadius;

out vec4 outputColor;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip: 片元到中心点的距离 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: 片元的剪切成圆形
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // 当存在 stroke 且 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      outputColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      outputColor = mix(v_color, stroke, mixR);
    } else {
      outputColor = v_color;
    }
  } else {
    // 当不存在 stroke 或 stroke <= 0.01
    outputColor = v_color;
  }

  outputColor = filterColor(outputColor);
  
  if(u_additive > 0.0) {
    outputColor *= circleClipOpacity;
  } else {
    outputColor.a *= circleClipOpacity;
  }

}
`,$de=`
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

out vec4 v_color;
out float v_blur;
out float v_innerRadius;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_blur = 1.0 - max(2.0 / a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);

  vec2 offset = project_pixel(u_offsets);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function l6(e){const t=e.coordinates;return{vertices:[...t],indices:[0],size:t.length}}class Yde extends xn{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const{blend:t,strokeOpacity:r=1,strokeWidth:n=0,stroke:i="#fff"}=this.layer.getLayerConfig(),a={u_stroke_color:pn(i),u_additive:t==="additive"?1:0,u_stroke_opacity:r,u_stroke_width:n};return this.getUniformsBufferInfo(a)}initModels(){var t=this;return et(function*(){return t.buildModels()})()}buildModels(){var t=this;return et(function*(){return t.layer.triangulation=l6,t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:$de,fragmentShader:Wde,defines:t.getDefines(),inject:t.getInject(),triangulation:l6,depth:{enable:!1},primitive:L.POINTS})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{size:r=1}=t;return Array.isArray(r)?[r[0]]:[r]}}})}}const Zde=`precision highp float;
in vec4 v_color;

#pragma include "picking"

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // 默认不固定
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};
in float v_lightWeight;
in float v_barLinearZ;
out vec4 outputColor;
void main() {

   outputColor = v_color;

  // 开启透明度渐变
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,Kde=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // 默认不固定
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};

out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;
// 用于将在顶点着色器中计算好的样式值传递给片元


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) +
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - 数据纹理映射部分的计算
  vec3 size = a_Size * a_Position;

  // a_Position.z 是在构建网格的时候传入的标准值 0 - 1，在插值器插值可以获取 0～1 线性渐变的值
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; // 控制圆柱体的大小 - 从标准单位圆柱体进行偏移
  if(u_heightfixed < 1.0) { // 圆柱体不固定高度
    //
  } else {// 圆柱体固定高度 （ 处理 mapbox ）
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r 控制圆柱的生长
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // 圆柱光照效果
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // 取消三元表达式，增强健壮性
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // 设置圆柱的底色
  if(u_linearColor == 1.0) { // 使用渐变颜色
    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);
    v_color.rgb *= lightWeight;
  } else { // 使用 color 方法传入的颜色
     v_color = a_Color;
  }
  v_color.a *= u_opacity;


  // 在地球模式下，将原本垂直于 xy 平面的圆柱调整姿态到适应圆的角度
  //旋转矩阵mx，创建绕x轴旋转矩阵
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//求解旋转角度余弦值
  float xsin = sin(xRadian);//求解旋转角度正弦值
  mat4 mx = mat4(
    1,0,0,0,
    0,xcos,-xsin,0,
    0,xsin,xcos,0,
    0,0,0,1);

  //旋转矩阵my，创建绕y轴旋转矩阵
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//求解旋转角度余弦值
  float ysin = sin(yRadian);//求解旋转角度正弦值
  mat4 my = mat4(
    ycos,0,-ysin,0,
    0,1,0,0,
    ysin,0,ycos,0,
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);


  setPickingColor(a_PickingColor);
}
`,{isNumber:Qde}=Un;let Jde=class extends xn{constructor(...t){super(...t),F(this,"raiseCount",0),F(this,"raiseRepeat",0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,POS:10,NORMAL:11})}getCommonUniformsInfo(){const{animateOption:t={enable:!1,speed:.01,repeat:!1},opacity:r=1,sourceColor:n,targetColor:i,pickLight:a=!1,heightfixed:o=!0,opacityLinear:l={enable:!1,dir:"up"},lightEnable:c=!0}=this.layer.getLayerConfig();let f=0,h=[0,0,0,0],p=[0,0,0,0];if(n&&i&&(h=pn(n),p=pn(i),f=1),this.raiseCount<1&&this.raiseRepeat>0&&t.enable){const{speed:_=.01}=t;this.raiseCount+=_,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const v={u_sourceColor:h,u_targetColor:p,u_linearColor:f,u_pickLight:Number(a),u_heightfixed:Number(o),u_r:t.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:Qde(r)?r:1,u_opacitylinear:Number(l.enable),u_opacitylinear_dir:l.dir==="up"?1:0,u_lightEnable:Number(c)};return this.getUniformsBufferInfo(v)}initModels(){var t=this;return et(function*(){return t.initUniformsBuffer(),t.buildModels()})()}buildModels(){var t=this;return et(function*(){const{animateOption:{repeat:r=1}}=t.layer.getLayerConfig();return t.raiseRepeat=r,[yield t.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:Kde,fragmentShader:Zde,triangulation:c9,depth:{enable:!0},defines:t.getDefines(),inject:t.getInject(),cull:{enable:!0,face:L.FRONT},blend:t.getBlend()})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:3,update:t=>{const{size:r}=t;if(r){let n=[];return Array.isArray(r)&&(n=r.length===2?[r[0],r[0],r[1]]:r),Array.isArray(r)||(n=[r,r,r]),n}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Vt.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:3,update:(t,r,n,i,a)=>a}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Vt.Attribute,descriptor:{name:"a_Pos",shaderLocation:this.attributeLocation.POS,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:3,update:t=>{const r=pd(t.coordinates);return l9([r[0],r[1]])}}})}};const ehe=`in vec4 v_data;
in vec4 v_color;
in float v_radius;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
}
`,the=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
out vec4 v_data;
out vec4 v_color;
out float v_radius;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize 设置拾取大小
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) 是为了兼容地球模式
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);

  setPickingColor(a_PickingColor);
}
`;let rhe=class extends xn{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,SHAPE:10,EXTRUDE:11})}getCommonUniformsInfo(){const{strokeOpacity:t=1,strokeWidth:r=0,blend:n,blur:i=0}=this.layer.getLayerConfig();this.layer.getLayerConfig();const a={u_additive:n==="additive"?1:0,u_stroke_opacity:t,u_stroke_width:r,u_blur:i};return this.getUniformsBufferInfo(a)}initModels(){var t=this;return et(function*(){return t.initUniformsBuffer(),t.buildModels()})()}buildModels(){var t=this;return et(function*(){return t.layer.triangulation=r6,[yield t.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:the,fragmentShader:ehe,triangulation:r6,defines:t.getDefines(),inject:t.getInject(),depth:{enable:!0},blend:t.getBlend()})]})()}animateOption2Array(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Vt.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:3,update:(t,r,n,i)=>{const[a,o,l]=n,c=vs(0,0,1),f=vs(a,0,l),h=a>=0?sL(c,f):Math.PI*2-sL(c,f),p=Math.PI*2-Math.asin(o/100),v=rO();Zk(v,v,h),nO(v,v,p);const g=vs(1,1,0);Q_(g,g,v),rg(g,g);const _=vs(-1,1,0);Q_(_,_,v),rg(_,_);const E=vs(-1,-1,0);Q_(E,E,v),rg(E,E);const b=vs(1,-1,0);Q_(b,b,v),rg(b,b);const S=[...g,..._,...E,...b],T=i%4*3;return[S[T],S[T+1],S[T+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{size:r=5}=t;return Array.isArray(r)?[r[0]]:[r]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Vt.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{shape:r=2}=t;return[this.layer.getLayerConfig().shape2d.indexOf(r)]}}})}};const nhe=`
in vec4 v_color;
in float v_lightWeight;
out vec4 outputColor;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {

  outputColor = v_color;
  // 开启透明度渐变
  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,ihe=`#define pi (3.1415926535)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec4 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};
out vec4 v_color;
out float v_lightWeight;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if (x > 0.0 && z > 0.0) {
    return atan(x / z);
  } else if (x > 0.0 && z <= 0.0) {
    return atan(-z / x) + pi / 2.0;
  } else if (x <= 0.0 && z <= 0.0) {
    return pi + atan(x / z); //atan(x/z) +
  } else {
    return atan(z / -x) + pi * 3.0 / 2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y / r);
}

void main() {
  vec3 size = a_Size * a_Position;

  vec3 offset = size; // 控制圆柱体的大小 - 从标准单位圆柱体进行偏移

  if (u_heightfixed < 1.0) {
    // 圆柱体不固定高度
  } else {
    // 圆柱体固定高度 （ 处理 mapbox ）
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      offset *= 4.0 / pow(2.0, 21.0 - u_Zoom);
    }
  }

  vec2 positions = a_Extrude.xy;
  vec2 positions64Low = a_Extrude.zw;
  vec4 project_pos = project_position(vec4(positions, 0.0, 1.0), positions64Low);

  // u_r 控制圆柱的生长
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // 圆柱光照效果
  float lightWeight = 1.0;

  if (u_lightEnable > 0.0) {
    // 取消三元表达式，增强健壮性
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

  // 设置圆柱的底色
  if (u_linearColor == 1.0) {
    // 使用渐变颜色
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a = v_color.a * opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);
  }

  if (u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? 1.0 - a_Position.z : a_Position.z;
  }

  gl_Position = project_common_position_to_clipspace(pos);

  setPickingColor(a_PickingColor);
}
`;let p9=class extends xn{constructor(...t){super(...t),F(this,"raiseCount",0),F(this,"raiseRepeat",0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10,NORMAL:11})}getCommonUniformsInfo(){const{animateOption:t={enable:!1,speed:.01,repeat:!1},sourceColor:r,targetColor:n,pickLight:i=!1,heightfixed:a=!1,opacityLinear:o={enable:!1,dir:"up"},lightEnable:l=!0}=this.layer.getLayerConfig();let c=0,f=[0,0,0,0],h=[0,0,0,0];if(r&&n&&(f=pn(r),h=pn(n),c=1),this.raiseCount<1&&this.raiseRepeat>0&&t.enable){const{speed:g=.01}=t;this.raiseCount+=g,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const p={u_pickLight:Number(i),u_heightfixed:Number(a),u_r:t.enable&&this.raiseRepeat>0?this.raiseCount:1,u_linearColor:c,u_sourceColor:f,u_targetColor:h,u_opacitylinear:Number(o.enable),u_opacitylinear_dir:o.dir==="up"?1:0,u_lightEnable:Number(l)};return this.getUniformsBufferInfo(p)}initModels(){var t=this;return et(function*(){return t.buildModels()})()}buildModels(){var t=this;return et(function*(){const{depth:r=!0,animateOption:{repeat:n=1}}=t.layer.getLayerConfig();return t.raiseRepeat=n,t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:ihe,fragmentShader:nhe,triangulation:c9,defines:t.getDefines(),inject:t.getInject(),cull:{enable:!0,face:L.FRONT},depth:{enable:r}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:3,update:t=>{const{size:r}=t;if(r){let n=[];return Array.isArray(r)&&(n=r.length===2?[r[0],r[0],r[1]]:r),Array.isArray(r)||(n=[r,r,r]),n}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Vt.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:3,update:(t,r,n,i,a)=>a}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Vt.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:4,update:t=>{const r=pd(t.coordinates);return[r[0],r[1],Ei(r[0]),Ei(r[1])]}}})}};const ahe=`
layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if(u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }
  float intensity = 1.0;
  if(u_time!=-1.0){
    //wave相关逻辑
    float d = length(v_data.xy);
    if(d > 0.5) {
      discard;
    }
    intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor *= intensity;//wave
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor.a *= intensity;//wave 
    outputColor = filterColor(outputColor);
  }
   // 作为 mask 模板时需要丢弃透明的像素
  if(outputColor.a < 0.01) {
    discard;
  } 
}
`,ohe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // 透明度计算
   v_stroke = stroke;
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize 设置拾取大小
  *  u_meter2coord 在等面积大小的时候设置单位
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);

  // TODP: /abs(extrude.x) 是为了兼容地球模式
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;let m9=class extends xn{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,SHAPE:10,EXTRUDE:11})}getCommonUniformsInfo(){const{strokeOpacity:t=1,strokeWidth:r=0,blend:n,blur:i=0,raisingHeight:a=0,heightfixed:o=!1,unit:l="pixel"}=this.layer.getLayerConfig();let c=this.getAnimateUniforms().u_time;isNaN(c)&&(c=-1);const f={u_blur_height_fixed:[i,Number(a),Number(o)],u_stroke_width:r,u_additive:n==="additive"?1:0,u_stroke_opacity:t,u_size_unit:gO[l],u_time:c,u_animate:this.getAnimateUniforms().u_animate};return this.getUniformsBufferInfo(f)}getAnimateUniforms(){const{animateOption:t={enable:!1}}=this.layer.getLayerConfig();return{u_animate:this.animateOption2Array(t),u_time:this.layer.getLayerAnimateTime()}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),ad)}initModels(){var t=this;return et(function*(){return t.buildModels()})()}buildModels(){var t=this;return et(function*(){const{frag:r,vert:n,type:i}=t.getShaders();return t.layer.triangulation=ad,t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:i,vertexShader:n,fragmentShader:r,defines:t.getDefines(),inject:t.getInject(),triangulation:ad,depth:{enable:!1}})]})()}getShaders(){return{frag:ahe,vert:ohe,type:"pointFill"}}animateOption2Array(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}registerBuiltinAttributes(){const t=this.layer.getLayerConfig().shape2d;this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Vt.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:3,update:(r,n,i,a)=>{const o=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],l=a%4*3;return[o[l],o[l+1],o[l+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:1,update:r=>{const{size:n=5}=r;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Vt.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:1,update:r=>{const{shape:n=2}=r;return[t.indexOf(n)]}}})}};const she=`in vec2 v_uv;// 本身的 uv 坐标
in vec2 v_Iconuv;
in float v_opacity;
out vec4 outputColor;

uniform sampler2D u_texture;
layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  outputColor = texture(SAMPLER_2D(u_texture), pos);
  outputColor.a *= v_opacity;
  outputColor = filterColor(outputColor);
}
`,lhe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed;
  float u_raisingHeight;
  float u_size_unit;
};

out vec2 v_uv;
out vec2 v_Iconuv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0) / 2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if (u_size_unit == 1.0) {
    newSize = newSize * u_PixelsPerMeter.z;
  }

  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = extrude.xy * newSize + offsets;

  offset = rotate_matrix(offset, rotation);

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`;class uhe extends xn{constructor(...t){super(...t),F(this,"meter2coord",1),F(this,"texture",void 0),F(this,"isMeter",!1),F(this,"radian",0),F(this,"updateTexture",()=>{const{createTexture2D:r}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),this.layerService.throttleRenderLayers();return}this.texture=r({data:this.iconService.getCanvas(),mag:L.LINEAR,min:L.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10,UV:11})}getCommonUniformsInfo(){const{raisingHeight:t=0,heightfixed:r=!1,unit:n="pixel"}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var i;(i=this.texture)===null||i===void 0||i.bind()}const a={u_textSize:[1024,this.iconService.canvasHeight||128],u_heightfixed:Number(r),u_raisingHeight:Number(t),u_size_unit:gO[n]};return this.getUniformsBufferInfo(a)}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),ad)}initModels(){var t=this;return et(function*(){return t.iconService.on("imageUpdate",t.updateTexture),t.updateTexture(),t.buildModels()})()}buildModels(){var t=this;return et(function*(){return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:lhe,fragmentShader:she,triangulation:ad,depth:{enable:!1},defines:t.getDefines(),inject:t.getInject(),cull:{enable:!0,face:L.FRONT}})]})()}clearModels(){var t;this.iconService.off("imageUpdate",this.updateTexture),(t=this.texture)===null||t===void 0||t.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Vt.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:2,update:t=>{const r=this.iconService.getIconMap(),{shape:n}=t,{x:i,y:a}=r[n]||{x:-64,y:-64};return[i,a]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Vt.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:3,update:(t,r,n,i)=>{const a=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=i%4*3;return[a[o],a[o+1],a[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{size:r=5}=t;return Array.isArray(r)?[r[0]]:[r]}}})}}const che=`layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

uniform sampler2D u_texture;

in vec4 v_color;
in vec2 v_uv;
in float v_opacity;

#pragma include "picking"

out vec4 outputColor;

void main(){
  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
  vec4 textureColor;

  // Y = 0.299R + 0.587G + 0.114B // 亮度提取
  
  textureColor = texture(SAMPLER_2D(u_texture), pos);

  // Tip: 去除边缘部分 mipmap 导致的混合变暗
  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
  if(fragmengTocenter >= 0.5) {
        float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
        textureColor.a *= luma;
  }
  
  if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
        outputColor= textureColor;
  }else {
        outputColor= step(0.01, textureColor.z) * v_color;
  }
  outputColor.a *= v_opacity;
  if (outputColor.a < 0.01) {
      discard;
  }
  outputColor = filterColor(outputColor);
}
`,fhe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

out vec4 v_color;
out vec2 v_uv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - 数据纹理映射部分的计算
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if (u_heightfixed < 1.0) {
    // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;class v9 extends xn{constructor(...t){super(...t),F(this,"texture",void 0),F(this,"updateTexture",()=>{const{createTexture2D:r}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(()=>{this.layerService.throttleRenderLayers()});return}this.texture=r({data:this.iconService.getCanvas(),mag:L.LINEAR,min:L.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0})})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,UV:10})}getUninforms(){if(this.rendererService.getDirty()){var t;(t=this.texture)===null||t===void 0||t.bind()}const r=this.getCommonUniformsInfo(),n=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),qe(qe({},r.uniformsOption),n.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:t=0,heightfixed:r=!1}=this.layer.getLayerConfig(),n={u_textSize:[1024,this.iconService.canvasHeight||128],u_raisingHeight:Number(t),u_heightfixed:Number(r),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(n)}initModels(){var t=this;return et(function*(){return t.iconService.on("imageUpdate",t.updateTexture),t.updateTexture(),t.buildModels()})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var t=this;return et(function*(){return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"pointImage",vertexShader:fhe,fragmentShader:che,triangulation:rde,defines:t.getDefines(),inject:t.getInject(),depth:{enable:!1},primitive:L.POINTS})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{size:r=5}=t;return Array.isArray(r)?[r[0]]:[r]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Vt.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:2,update:t=>{const r=this.iconService.getIconMap(),{shape:n}=t,{x:i,y:a}=r[n]||{x:-64,y:-64};return[i,a]}}})}}const dhe=`in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}`,hhe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(project_pos);

  gl_PointSize = a_Size * u_size_scale * 2.0 * u_DevicePixelRatio;
}
`;function u6(e){const t=e.coordinates;return{vertices:[...t],indices:[0],size:t.length}}class g9 extends xn{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const t={u_size_scale:.5};return this.getUniformsBufferInfo(t)}initModels(){var t=this;return et(function*(){return t.buildModels()})()}buildModels(){var t=this;return et(function*(){return t.layer.triangulation=u6,t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:hhe,fragmentShader:dhe,triangulation:u6,defines:t.getDefines(),inject:t.getInject(),depth:{enable:!1},primitive:L.POINTS,pick:!1})]})()}clearModels(){}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{size:r=1}=t;return Array.isArray(r)?[r[0]]:[r]}}})}}const phe=`
layout(std140) uniform commonUniorm{
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};
in vec4 v_data;
in vec4 v_color;
in float v_radius;
in vec2 v_extrude;
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  outputColor = vec4(v_color.rgb, v_color.a);

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
  } else {
    outputColor.a *= opacity_t;
  }

  if(outputColor.a > 0.0) {
    outputColor = filterColor(outputColor);
  }

  vec2 extrude =  v_extrude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  outputColor.a *= radar_v;
}
`,mhe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniorm {
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};

out vec4 v_data;
out vec4 v_color;
out float v_radius;
out vec2 v_extrude;

#pragma include "projection"
#pragma include "picking"

void main() {
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2(
    cos(time), sin(time),
    -sin(time), cos(time)
  );
  v_extrude = rotateMatrix * a_Extrude.xy;

  v_color = a_Color;
  v_color.a *= opacity;

  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_size_unit == 1.) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  v_radius = newSize;

  vec2 offset = (a_Extrude.xy * (newSize));

  offset = project_pixel(offset);

  v_data = vec4(a_Extrude.x, a_Extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`;class vhe extends xn{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10})}getCommonUniformsInfo(){const{blend:t,speed:r=1,unit:n="pixel"}=this.layer.getLayerConfig(),i={u_additive:t==="additive"?1:0,u_size_unit:gO[n],u_speed:r,u_time:this.layer.getLayerAnimateTime()};return this.getUniformsBufferInfo(i)}getAnimateUniforms(){return{}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),ad)}initModels(){var t=this;return et(function*(){return t.buildModels()})()}buildModels(){var t=this;return et(function*(){return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:mhe,fragmentShader:phe,triangulation:ad,defines:t.getDefines(),inject:t.getInject(),depth:{enable:!1}})]})()}animateOption2Array(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Vt.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:3,update:(t,r,n,i)=>{const a=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=i%4*3;return[a[o],a[o+1],a[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{shaderLocation:this.attributeLocation.SIZE,name:"a_Size",buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{size:r=5}=t;return Array.isArray(r)?[r[0]]:[r]}}})}}class ghe{constructor(t,r,n){F(this,"boxCells",[]),F(this,"xCellCount",void 0),F(this,"yCellCount",void 0),F(this,"boxKeys",void 0),F(this,"bboxes",void 0),F(this,"width",void 0),F(this,"height",void 0),F(this,"xScale",void 0),F(this,"yScale",void 0),F(this,"boxUid",void 0);const i=this.boxCells;this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(r/n);for(let a=0;a<this.xCellCount*this.yCellCount;a++)i.push([]);this.boxKeys=[],this.bboxes=[],this.width=t,this.height=r,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/r,this.boxUid=0}insert(t,r,n,i,a){this.forEachCell(r,n,i,a,this.insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(a)}query(t,r,n,i,a){return this.queryHitTest(t,r,n,i,!1,a)}hitTest(t,r,n,i,a){return this.queryHitTest(t,r,n,i,!0,a)}insertBoxCell(t,r,n,i,a,o){this.boxCells[a].push(o)}queryHitTest(t,r,n,i,a,o){if(n<0||t>this.width||i<0||r>this.height)return a?!1:[];const l=[];if(t<=0&&r<=0&&this.width<=n&&this.height<=i){if(a)return!0;for(let f=0;f<this.boxKeys.length;f++)l.push({key:this.boxKeys[f],x1:this.bboxes[f*4],y1:this.bboxes[f*4+1],x2:this.bboxes[f*4+2],y2:this.bboxes[f*4+3]});return o?l.filter(o):l}const c={hitTest:a,seenUids:{box:{},circle:{}}};return this.forEachCell(t,r,n,i,this.queryCell,l,c,o),a?l.length>0:l}queryCell(t,r,n,i,a,o,l,c){const f=l.seenUids,h=this.boxCells[a];if(h!==null){const p=this.bboxes;for(const v of h)if(!f.box[v]){f.box[v]=!0;const g=v*4;if(t<=p[g+2]&&r<=p[g+3]&&n>=p[g+0]&&i>=p[g+1]&&(!c||c(this.boxKeys[v]))){if(l.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[v],x1:p[g],y1:p[g+1],x2:p[g+2],y2:p[g+3]})}}}return!1}forEachCell(t,r,n,i,a,o,l,c){const f=this.convertToXCellCoord(t),h=this.convertToYCellCoord(r),p=this.convertToXCellCoord(n),v=this.convertToYCellCoord(i);for(let g=f;g<=p;g++)for(let _=h;_<=v;_++){const E=this.xCellCount*_+g;if(a.call(this,t,r,n,i,E,o,l,c))return}}convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}}class _he{constructor(t,r){F(this,"width",void 0),F(this,"height",void 0),F(this,"grid",void 0),F(this,"viewportPadding",100),F(this,"screenRightBoundary",void 0),F(this,"screenBottomBoundary",void 0),F(this,"gridRightBoundary",void 0),F(this,"gridBottomBoundary",void 0),this.width=t,this.height=r,this.viewportPadding=Math.max(t,r),this.grid=new ghe(t+this.viewportPadding,r+this.viewportPadding,25),this.screenRightBoundary=t+this.viewportPadding,this.screenBottomBoundary=r+this.viewportPadding,this.gridRightBoundary=t+2*this.viewportPadding,this.gridBottomBoundary=r+2*this.viewportPadding}placeCollisionBox(t){const r=t.x1+t.anchorPointX+this.viewportPadding,n=t.y1+t.anchorPointY+this.viewportPadding,i=t.x2+t.anchorPointX+this.viewportPadding,a=t.y2+t.anchorPointY+this.viewportPadding;return!this.isInsideGrid(r,n,i,a)||this.grid.hitTest(r,n,i,a)?{box:[]}:{box:[r,n,i,a]}}insertCollisionBox(t,r){const n={featureIndex:r};this.grid.insert(n,t[0],t[1],t[2],t[3])}project(t,r,n){const i=Kie(r,n,0,1),a=Qk(),o=Xie(...t);return iO(a,i,o),{x:(a[0]/a[3]+1)/2*this.width+this.viewportPadding,y:(-a[1]/a[3]+1)/2*this.height+this.viewportPadding}}isInsideGrid(t,r,n,i){return n>=0&&t<this.gridRightBoundary&&i>=0&&r<this.gridBottomBoundary}}function _9(e){let t=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0;break;default:t=.5}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0;break;default:r=.5}return{horizontalAlign:t,verticalAlign:r}}function y9(e,t,r,n,i,a,o){const l=(t-r)*i,c=(-n*o+.5)*a;for(const f of e)f.x+=l,f.y+=c}function yhe(e,t,r,n,i,a,o){let c=0,f=-8,h=0;const p=e.positionedGlyphs,v=0,g=p.length;r.forEach(S=>{if(S.split("").forEach(T=>{const C=t[T];C&&(p.push({glyph:T,x:c,y:f+0,vertical:!1,scale:1,metrics:C}),c+=C.advance+o)}),p.length!==g){const T=c-o;h=Math.max(T,h),p.length-1}c=0,f-=n+5});const{horizontalAlign:_,verticalAlign:E}=_9(i);y9(p,v,_,E,h,n,r.length);const b=f- -8;e.top+=-E*b,e.bottom=e.top-b,e.left+=-_*h,e.right=e.left+h}function Ehe(e,t,r,n,i,a,o){let c=0,f=-8,h=0;const p=e.positionedGlyphs,v=0,g=p.length;r.forEach(S=>{const T=t[S];if(T&&(p.push({glyph:S,x:T.advance/2,y:f+0,vertical:!1,scale:1,metrics:T}),c+=T.advance+o),p.length!==g){const M=c-o;h=Math.max(M,h),p.length-1}c=0,f-=n+5});const{horizontalAlign:_,verticalAlign:E}=_9(i);y9(p,v,_,E,h,n,r.length);const b=f- -8;e.top+=-E*b,e.bottom=e.top-b,e.left+=-_*h,e.right=e.left+h}function bhe(e,t,r,n,i,a,o=[0,0],l){const c=e.split(`
`),f=[],h={positionedGlyphs:f,top:o[1],bottom:o[1],left:o[0],right:o[0],lineCount:c.length,text:e};return l?Ehe(h,t,c,r,n,i,a):yhe(h,t,c,r,n,i,a),f.length?h:!1}function xhe(e,t=[0,0],r){const{positionedGlyphs:n=[]}=e,i=[];for(const a of n){const o=a.metrics,l=4,c=o.advance*a.scale/2,f=[0,0],h=[a.x+c+t[0],a.y+t[1]],p=(0-l)*a.scale-c+h[0],v=(0-l)*a.scale+h[1],g=p+o.width*a.scale,_=v+o.height*a.scale,E={x:p,y:v},b={x:g,y:v},S={x:p,y:_},T={x:g,y:_};i.push({tl:E,tr:b,bl:S,br:T,tex:o,glyphOffset:f})}return i}const c6=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0

uniform sampler2D u_sdf_map;
layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

in vec2 v_uv;
in float v_gamma_scale;
in vec4 v_color;
in vec4 v_stroke_color;
in float v_fontScale;

out vec4 outputColor;

#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  outputColor.a *= alpha;
   // 作为 mask 模板时需要丢弃透明的像素
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,f6=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_TEXT_OFFSETS) in vec2 a_textOffsets;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_tex;

layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

out vec2 v_uv;
out float v_gamma_scale;
out vec4 v_color;
out vec4 v_stroke_color;
out float v_fontScale;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - 数据纹理映射部分的计算

  v_uv = a_tex / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // 文本缩放比例
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textOffsets,rotation);

  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,{isEqual:Lv}=Un;function d6(e){const t=this,r=e.id,n=[],i=[];if(!t.glyphInfoMap||!t.glyphInfoMap[r])return{vertices:[],indices:[],size:7};const a=t.glyphInfoMap[r].centroid,o=a.length===2?[a[0],a[1],0]:a;return t.glyphInfoMap[r].glyphQuads.forEach((l,c)=>{n.push(...o,l.tex.x,l.tex.y+l.tex.height,l.tl.x,l.tl.y,...o,l.tex.x+l.tex.width,l.tex.y+l.tex.height,l.tr.x,l.tr.y,...o,l.tex.x+l.tex.width,l.tex.y,l.br.x,l.br.y,...o,l.tex.x,l.tex.y,l.bl.x,l.bl.y),i.push(0+c*4,1+c*4,2+c*4,2+c*4,3+c*4,0+c*4)}),{vertices:n,indices:i,size:7}}class E9 extends xn{constructor(...t){var r;super(...t),r=this,F(this,"glyphInfo",void 0),F(this,"glyphInfoMap",{}),F(this,"rawEncodeData",void 0),F(this,"texture",void 0),F(this,"currentZoom",-1),F(this,"extent",void 0),F(this,"textureHeight",0),F(this,"textCount",0),F(this,"preTextStyle",{}),F(this,"mapping",et(function*(){r.initGlyph(),r.updateTexture(),yield r.reBuildModel()}))}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,TEXT_OFFSETS:10,UV:11})}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),qe(qe(qe({},t.uniformsOption),r.uniformsOption),{u_sdf_map:this.textures[0]})}getCommonUniformsInfo(){const{stroke:t="#fff",strokeWidth:r=0,halo:n=.5,gamma:i=2,raisingHeight:a=0}=this.layer.getLayerConfig(),o=this.getFontServiceMapping(),l=this.getFontServiceCanvas();o&&Object.keys(o).length!==this.textCount&&l&&(this.updateTexture(),this.textCount=Object.keys(o).length),this.preTextStyle=this.getTextStyle();const c={u_stroke_color:pn(t),u_sdf_map_size:[l?.width||1,l?.height||1],u_raisingHeight:Number(a),u_stroke_width:r,u_gamma_scale:i,u_halo_blur:n};return this.getUniformsBufferInfo(c)}initModels(){var t=this;return et(function*(){return t.bindEvent(),t.extent=t.textExtent(),t.rawEncodeData=t.layer.getEncodedData(),t.preTextStyle=t.getTextStyle(),t.initUniformsBuffer(),t.buildModels()})()}buildModels(){var t=this;return et(function*(){const{textAllowOverlap:r=!1}=t.layer.getLayerConfig();return t.initGlyph(),t.updateTexture(),r||t.filterGlyphs(),[yield t.layer.buildLayerModel({moduleName:"pointText",vertexShader:f6,fragmentShader:c6,defines:t.getDefines(),inject:t.getInject(),triangulation:d6.bind(t),depth:{enable:!1}})]})()}needUpdate(){var t=this;return et(function*(){const{textAllowOverlap:r=!1,textAnchor:n="center",textOffset:i,padding:a,fontFamily:o,fontWeight:l}=t.getTextStyle();if(!Lv(a,t.preTextStyle.padding)||!Lv(i,t.preTextStyle.textOffset)||!Lv(n,t.preTextStyle.textAnchor)||!Lv(o,t.preTextStyle.fontFamily)||!Lv(l,t.preTextStyle.fontWeight))return yield t.mapping(),!0;if(r)return!1;const c=t.mapService.getZoom(),f=t.mapService.getBounds(),h=Tk(t.extent,f);return Math.abs(t.currentZoom-c)>.5||!h||r!==t.preTextStyle.textAllowOverlap?(yield t.reBuildModel(),!0):!1})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.layer.off("remapping",this.mapping)}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:Vt.Attribute,descriptor:{shaderLocation:this.attributeLocation.TEXT_OFFSETS,name:"a_textOffsets",buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:2,update:(t,r,n)=>[n[5],n[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:Vt.Attribute,descriptor:{name:"a_tex",shaderLocation:this.attributeLocation.UV,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:2,update:(t,r,n)=>[n[3],n[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{size:r=12}=t;return Array.isArray(r)?[r[0]]:[r]}}})}bindEvent(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}textExtent(){const t=this.mapService.getBounds();return Q3(t,.5)}initTextFont(){const{fontWeight:t,fontFamily:r}=this.getTextStyle(),n=this.rawEncodeData,i=[];n.forEach(a=>{let{shape:o=""}=a;o=o.toString();for(const l of o)i.indexOf(l)===-1&&i.push(l)}),this.fontService.setFontOptions({characterSet:i,fontWeight:t,fontFamily:r,iconfont:!1})}initIconFontTex(){const{fontWeight:t,fontFamily:r}=this.getTextStyle(),n=this.rawEncodeData,i=[];n.forEach(a=>{let{shape:o=""}=a;o=`${o}`,i.indexOf(o)===-1&&i.push(o)}),this.fontService.setFontOptions({characterSet:i,fontWeight:t,fontFamily:r,iconfont:!0})}getTextStyle(){const{fontWeight:t="400",fontFamily:r="sans-serif",textAllowOverlap:n=!1,padding:i=[0,0],textAnchor:a="center",textOffset:o=[0,0],opacity:l=1,strokeOpacity:c=1,strokeWidth:f=0,stroke:h="#000"}=this.layer.getLayerConfig();return{fontWeight:t,fontFamily:r,textAllowOverlap:n,padding:i,textAnchor:a,textOffset:o,opacity:l,strokeOpacity:c,strokeWidth:f,stroke:h}}generateGlyphLayout(t){const r=this.getFontServiceMapping(),{spacing:n=2,textAnchor:i="center",textOffset:a}=this.layer.getLayerConfig(),o=this.rawEncodeData;this.glyphInfo=o.map(l=>{const{shape:c="",id:f,size:h=1}=l,p=l.textOffset?l.textOffset:a||[0,0],v=l.textAnchor?l.textAnchor:i||"center",g=bhe(c.toString(),r,h,v,"left",n,p,t),_=xhe(g,p);return l.shaping=g,l.glyphQuads=_,l.centroid=pd(l.coordinates),this.glyphInfoMap[f]={shaping:g,glyphQuads:_,centroid:pd(l.coordinates)},l})}getFontServiceMapping(){const{fontWeight:t="400",fontFamily:r="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getMappingByKey(`${r}_${t}`)}getFontServiceCanvas(){const{fontWeight:t="400",fontFamily:r="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getCanvasByKey(`${r}_${t}`)}filterGlyphs(){const{padding:t=[0,0],textAllowOverlap:r=!1}=this.layer.getLayerConfig();if(r)return;this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();const{width:n,height:i}=this.rendererService.getViewportSize(),a=new _he(n,i);this.glyphInfo.filter(l=>{const{shaping:c,id:f=0}=l,h=l.centroid,v=l.size/16,g=this.mapService.lngLatToContainer(h),{box:_}=a.placeCollisionBox({x1:c.left*v-t[0],x2:c.right*v+t[0],y1:c.top*v-t[1],y2:c.bottom*v+t[1],anchorPointX:g.x,anchorPointY:g.y});return _&&_.length?(a.insertCollisionBox(_,f),!0):!1}).forEach(l=>{this.glyphInfoMap[l.id]=l})}initGlyph(){const{iconfont:t=!1}=this.layer.getLayerConfig();t?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(t)}updateTexture(){const{createTexture2D:t}=this.rendererService,r=this.getFontServiceCanvas();this.textureHeight=r.height,this.texture&&this.texture.destroy(),this.texture=t({data:r,mag:L.LINEAR,min:L.LINEAR,width:r.width,height:r.height}),this.textures=[this.texture]}reBuildModel(){var t=this;return et(function*(){t.filterGlyphs();const r=yield t.layer.buildLayerModel({moduleName:"pointText",vertexShader:f6,fragmentShader:c6,triangulation:d6.bind(t),defines:t.getDefines(),inject:t.getInject(),depth:{enable:!1}});t.layer.models=[r]})()}}const She={fillImage:uhe,fill:m9,radar:vhe,image:v9,normal:g9,simplePoint:Yde,extrude:p9,text:E9,earthFill:rhe,earthExtrude:Jde};class kg extends em{constructor(...t){super(...t),F(this,"type","PointLayer"),F(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),F(this,"enableDataEncodeStyles",["textOffset","textAnchor"]),F(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}})}buildModels(){var t=this;return et(function*(){const r=t.getModelType();t.layerModel&&t.layerModel.clearModels(),t.layerModel=new She[r](t),yield t.initLayerModels()})()}rebuildModels(){var t=this;return et(function*(){yield t.buildModels()})()}getModelTypeWillEmptyData(){if(this.shapeOption){const{field:t,values:r}=this.shapeOption,{shape2d:n}=this.getLayerConfig(),i=this.iconService.getIconMap();if(t&&n?.indexOf(t)!==-1)return"fill";if(r==="text")return"text";if(r&&r instanceof Array){for(const a of r)if(typeof a=="string"&&i.hasOwnProperty(a))return"image"}}return"normal"}getDefaultConfig(){const t=this.getModelType();return{fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}}[t]}getModelType(){const t=this.getEncodedData(),{shape2d:r,shape3d:n,billboard:i=!0}=this.getLayerConfig(),a=this.iconService.getIconMap(),o=t.find(l=>l.hasOwnProperty("shape"));if(o){const l=o.shape;return l==="dot"?"normal":l==="simple"?"simplePoint":l==="radar"?"radar":this.layerType==="fillImage"||i===!1?"fillImage":r?.indexOf(l)!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":n?.indexOf(l)!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":a.hasOwnProperty(l)?"image":"text"}else return this.getModelTypeWillEmptyData()}}function The(e){return oC.apply(this,arguments)}function oC(){return oC=et(function*(e){if(window.createImageBitmap){const t=yield fetch(e);return yield createImageBitmap(yield t.blob())}else{const t=new window.Image;return new Promise(r=>{t.onload=()=>r(t),t.src=e,t.crossOrigin="Anonymous"})}}),oC.apply(this,arguments)}const Ahe=`layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 默认不固定
  float u_raisingHeight;
};

in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = v_Color;
  
  outputColor = filterColor(outputColor);
}
`,Rhe=`
layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 默认不固定
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;
out vec4 outputColor;

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  float isSide =  v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip: 部分机型 GPU 计算精度兼容
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      // side notuse linear
       outputColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    outputColor = v_Color;
  }

  outputColor = filterColorAlpha(outputColor, lightWeight);
}
`,Che=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 默认不固定
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  v_uvs = a_uvs;
  // cal style mapping - 数据纹理映射部分的计算
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);

  if (u_heightfixed > 0.0) {
    // 判断几何体是否固定高度
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(project_pos);
  v_texture_data = vec2(a_Position.z, lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,Ohe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 默认不固定
  float u_raisingHeight;
};

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float isSide = a_Position.z;
  float topU = a_uvs[0];
  float topV = 1.0 - a_uvs[1];
  float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);

  if (u_heightfixed > 0.0) {
    // 判断几何体是否固定高度
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

 gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  // Tip: 部分机型 GPU 计算精度兼容
  if (isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,whe=`uniform sampler2D u_texture;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 默认不固定
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;

#pragma include "scene_uniforms"
#pragma include "picking"

out vec4 outputColor;

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];

  outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));
  // Tip: 部分机型 GPU 计算精度兼容
  if (isSide < 0.999) {// 是否是边缘
    // side face
    if (u_sidesurface < 1.0) {
      discard;
    }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      outputColor = v_Color;
    }
  } else {
     // top face
    if (u_topsurface < 1.0) {
      discard;
    }
  }
  
  outputColor.a *= opacity;
  outputColor = filterColor(outputColor);
}
`,Nhe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 默认不固定
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_uvs = a_uvs;
  v_Color = a_Color;
  v_Color.a *= opacity;

  v_texture_data = vec2(a_Position.z, lightWeight);

  if (u_heightfixed > 0.0) {
    // 判断几何体是否固定高度
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class Mhe extends xn{constructor(...t){super(...t),F(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,UV:11})}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),qe(qe({},t.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const{mapTexture:t,heightfixed:r=!1,raisingHeight:n=0,topsurface:i=!0,sidesurface:a=!0,sourceColor:o,targetColor:l}=this.layer.getLayerConfig();let c=0,f=[1,1,1,1],h=[1,1,1,1];o&&l&&(f=pn(o),h=pn(l),c=1);const p={u_sourceColor:f,u_targetColor:h,u_linearColor:c,u_topsurface:Number(i),u_sidesurface:Number(a),u_heightfixed:Number(r),u_raisingHeight:Number(n)};return t&&this.texture&&(p.u_texture=this.texture,this.textures=[this.texture]),this.getUniformsBufferInfo(p)}initModels(){var t=this;return et(function*(){return yield t.loadTexture(),t.buildModels()})()}buildModels(){var t=this;return et(function*(){const{frag:r,vert:n,type:i}=t.getShaders();return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:i,vertexShader:n,fragmentShader:r,depth:{enable:!0},defines:t.getDefines(),inject:t.getInject(),triangulation:f9})]})()}getShaders(){const{pickLight:t,mapTexture:r}=this.layer.getLayerConfig();return r?{frag:whe,vert:Nhe,type:"polygonExtrudeTexture"}:t?{frag:Rhe,vert:Che,type:"polygonExtrudePickLight"}:{frag:Ahe,vert:Ohe,type:"polygonExtrude"}}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy(),this.textures=[]}registerBuiltinAttributes(){const t=this.layer.getSource().extent,r=t[2]-t[0],n=t[3]-t[1];this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uvs",type:Vt.Attribute,descriptor:{name:"a_uvs",shaderLocation:this.attributeLocation.UV,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:3,update:(i,a,o)=>{const l=o[0],c=o[1];return[(l-t[0])/r,(c-t[1])/n,o[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Vt.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:3,update:(i,a,o,l,c)=>c}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:1,update:i=>{const{size:a=10}=i;return Array.isArray(a)?[a[0]]:[a]}}})}loadTexture(){var t=this;return et(function*(){const{mapTexture:r}=t.layer.getLayerConfig(),{createTexture2D:n}=t.rendererService;if(t.texture=n({height:1,width:1}),r){const i=yield The(r);t.texture=n({data:i,width:i.width,height:i.height,wrapS:L.CLAMP_TO_EDGE,wrapT:L.CLAMP_TO_EDGE,min:L.LINEAR,mag:L.LINEAR})}})()}}const Ihe=`
in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

  outputColor = v_Color;
  outputColor = filterColor(outputColor);
}
`,Phe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class Dhe extends xn{constructor(...t){super(...t),F(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,EXTRUSION_BASE:11})}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),qe(qe({},t.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const t={};return this.getUniformsBufferInfo(t)}initModels(){var t=this;return et(function*(){return t.buildModels()})()}buildModels(){var t=this;return et(function*(){const{frag:r,vert:n,type:i}=t.getShaders();return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:i,vertexShader:n,fragmentShader:r,defines:t.getDefines(),inject:t.getInject(),triangulation:f9,depth:{enable:!0}})]})()}getShaders(){return{frag:Ihe,vert:Phe,type:"polygonExtrude"}}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Vt.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:3,update:(t,r,n,i,a)=>a}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Vt.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{size:r=10}=t;return Array.isArray(r)?[r[0]]:[r]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrusionBase",type:Vt.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:this.attributeLocation.EXTRUSION_BASE,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:1,update:t=>{const{extrusionBase:r=0}=t;return[r]}}})}}const Lhe=`in vec4 v_color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,Bhe=`
layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

in vec4 v_color;
in vec3 v_linear;
in vec2 v_pos;
out vec4 outputColor;
#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  outputColor = v_color;
  if (u_opacitylinear > 0.0) {
    outputColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }
  outputColor = filterColor(outputColor);
}
`,Fhe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_LINEAR) in vec3 a_linear;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

out vec4 v_color;
out vec3 v_linear;
out vec2 v_pos;

#pragma include "projection"
#pragma include "picking"

void main() {
  if (u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  project_pos.z += u_raisingHeight;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}
`,Uhe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - 数据纹理映射部分的计算

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  project_pos.z += u_raisingHeight;

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`;class khe extends xn{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,LINEAR:9})}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),qe(qe({},t.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:t=0,opacityLinear:r={enable:!1,dir:"in"}}=this.layer.getLayerConfig(),n={u_raisingHeight:Number(t),u_opacitylinear:Number(r.enable),u_dir:r.dir==="in"?1:0};return this.getUniformsBufferInfo(n)}initModels(){var t=this;return et(function*(){return t.buildModels()})()}buildModels(){var t=this;return et(function*(){const{frag:r,vert:n,triangulation:i,type:a}=t.getModelParams();return t.initUniformsBuffer(),t.layer.triangulation=i,[yield t.layer.buildLayerModel({moduleName:a,vertexShader:n,fragmentShader:r,defines:t.getDefines(),inject:t.getInject(),triangulation:i,primitive:L.TRIANGLES,depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute();const{opacityLinear:t={enable:!1,dir:"in"}}=this.layer.getLayerConfig();t.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:Vt.Attribute,descriptor:{name:"a_linear",shaderLocation:this.attributeLocation.LINEAR,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:3,update:(r,n,i)=>[i[3],i[4],i[5]]}})}getModelParams(){const{opacityLinear:t={enable:!1}}=this.layer.getLayerConfig();return t.enable?{frag:Bhe,vert:Fhe,type:"polygonLinear",triangulation:ade}:{frag:Lhe,vert:Uhe,type:"polygonFill",triangulation:n0}}}const jhe=`
layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

in vec2 v_uv;
in float v_opacity;
out vec4 outputColor;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;

vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture(SAMPLER_2D(u_texture2),p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture(SAMPLER_2D(u_texture1),fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture(SAMPLER_2D(u_texture3), fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    
  outputColor = vec4(col, v_opacity);  
}
`,zhe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

out vec2 v_uv;
out float v_opacity;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_opacity = opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class Vhe extends xn{constructor(...t){super(...t),F(this,"texture1",void 0),F(this,"texture2",void 0),F(this,"texture3",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),qe(qe({},t.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const{watercolor:t="#6D99A8",watercolor2:r="#0F121C"}=this.layer.getLayerConfig(),n={u_watercolor:pn(t),u_watercolor2:pn(r),u_time:this.layer.getLayerAnimateTime(),u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3};return this.textures=[this.texture1,this.texture2,this.texture3],this.getUniformsBufferInfo(n)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var t=this;return et(function*(){return t.loadTexture(),t.buildModels()})()}buildModels(){var t=this;return et(function*(){return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:zhe,fragmentShader:jhe,defines:t.getDefines(),inject:t.getInject(),triangulation:n0,primitive:L.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var t,r,n;(t=this.texture1)===null||t===void 0||t.destroy(),(r=this.texture2)===null||r===void 0||r.destroy(),(n=this.texture3)===null||n===void 0||n.destroy()}registerBuiltinAttributes(){const t=this.layer.getSource().extent,[r,n,i,a]=t,o=i-r,l=a-n;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:Vt.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:2,update:(c,f,h)=>{const[p,v]=h;return[(p-r)/o,(v-n)/l]}}})}loadTexture(){const{createTexture2D:t}=this.rendererService,r={height:0,width:0};this.texture1=t(r),this.texture2=t(r),this.texture3=t(r),n(a=>{this.texture1=i(a[0]),this.texture2=i(a[1]),this.texture3=i(a[2]),this.layerService.reRender()});function n(a){let o=0;const l=[];["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"].map(f=>{const h=new Image;h.crossOrigin="",h.src=f,l.push(h),h.onload=()=>{o++,o===3&&a(l)}})}function i(a){return t({data:a,width:a.width,height:a.height,wrapS:L.MIRRORED_REPEAT,wrapT:L.MIRRORED_REPEAT,min:L.LINEAR,mag:L.LINEAR})}}}const Hhe=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};

out vec4 outputColor;


in vec4 v_Color;
in vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {

  outputColor = v_Color;
  float spc = calSpc();
  outputColor += spc * 0.4;
}
`,Xhe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};
out vec4 v_Color;
out vec2 v_uv;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_Color = a_Color;
  v_Color.a *= opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class qhe extends xn{constructor(...t){super(...t),F(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),qe(qe({},t.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const{speed:t=.5}=this.layer.getLayerConfig(),r={u_speed:t,u_time:this.layer.getLayerAnimateTime(),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(r)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var t=this;return et(function*(){return t.loadTexture(),t.buildModels()})()}buildModels(){var t=this;return et(function*(){return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:Xhe,fragmentShader:Hhe,triangulation:n0,defines:t.getDefines(),inject:t.getInject(),primitive:L.TRIANGLES,depth:{enable:!1},pickingEnabled:!1,diagnosticDerivativeUniformityEnabled:!1})]})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy()}registerBuiltinAttributes(){const t=this.layer.getSource().extent,[r,n,i,a]=t,o=i-r,l=a-n;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:Vt.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:L.STATIC_DRAW,data:[],type:L.FLOAT},size:2,update:(c,f,h)=>{const[p,v]=h;return[(p-r)/o,(v-n)/l]}}})}loadTexture(){const{waterTexture:t}=this.layer.getLayerConfig(),{createTexture2D:r}=this.rendererService;this.texture=r({height:1,width:1});const n=new Image;n.crossOrigin="",t?(console.warn("L7 recommend：https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),n.src=t):n.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",n.onload=()=>{this.texture=r({data:n,width:n.width,height:n.height,wrapS:L.MIRRORED_REPEAT,wrapT:L.MIRRORED_REPEAT,min:L.LINEAR,mag:L.LINEAR}),this.layerService.reRender()}}}const Ghe={fill:khe,line:d9,extrude:Mhe,text:E9,point_fill:m9,point_image:v9,point_normal:g9,point_extrude:p9,water:qhe,ocean:Vhe,extrusion:Dhe};class b9 extends em{constructor(...t){super(...t),F(this,"type","PolygonLayer"),F(this,"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"])}buildModels(){var t=this;return et(function*(){const r=t.getModelType();t.layerModel=new Ghe[r](t),yield t.initLayerModels()})()}getModelType(){var t;const r=this.styleAttributeService.getLayerStyleAttribute("shape"),n=r==null||(t=r.scale)===null||t===void 0?void 0:t.field;return n==="fill"||!n?"fill":n==="extrude"?"extrude":n==="extrusion"?"extrusion":n==="water"?"water":n==="ocean"?"ocean":n==="line"?"line":this.getPointModelType()}getPointModelType(){const t=this.getEncodedData(),{shape2d:r,shape3d:n}=this.getLayerConfig(),i=this.iconService.getIconMap(),a=t.find(o=>o.hasOwnProperty("shape"));if(a){const o=a.shape;return o==="dot"?"point_normal":r?.indexOf(o)!==-1?"point_fill":n?.indexOf(o)!==-1?"point_extrude":i.hasOwnProperty(o)?"point_image":"text"}else return"fill"}}const Whe=`layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

uniform sampler2D u_rasterTexture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;

bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }

out vec4 outputColor;

void main() {
  // Can use any component here since u_rasterTexture is under luminance format.
  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value)) {
    discard;
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
    discard;
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));
    
    outputColor = color;
    outputColor.a = outputColor.a * u_opacity ;
    if (outputColor.a < 0.01)
      discard;
  }
}
`,$he=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;let h6=class extends xn{constructor(...t){super(...t),F(this,"texture",void 0),F(this,"colorTexture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),qe(qe({},t.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const{opacity:t=1,clampLow:r=!0,clampHigh:n=!0,noDataValue:i=-9999999,domain:a,rampColors:o}=this.layer.getLayerConfig(),l=a||F3(o);this.colorTexture=this.layer.textureService.getColorTexture(o,l);const c={u_domain:l,u_opacity:t||1,u_noDataValue:i,u_clampLow:r?1:0,u_clampHigh:(typeof n<"u"?n:r)?1:0,u_rasterTexture:this.texture,u_colorTexture:this.colorTexture};return this.textures=[this.texture,this.colorTexture],this.getUniformsBufferInfo(c)}getRasterData(t){return et(function*(){if(Array.isArray(t.data))return{data:t.data,width:t.width,height:t.height};{const{rasterData:r,width:n,height:i}=yield t.data;return{data:Array.from(r),width:n,height:i}}})()}initModels(){var t=this;return et(function*(){return t.buildModels()})()}buildModels(){var t=this;return et(function*(){t.initUniformsBuffer();const r=t.layer.getSource(),{createTexture2D:n,queryVerdorInfo:i}=t.rendererService,a=r.data.dataArray[0],{data:o,width:l,height:c}=yield t.getRasterData(a);return t.texture=n({data:new Float32Array(o),width:l,height:c,format:i()==="WebGL1"?L.LUMINANCE:L.RED,type:L.FLOAT,alignment:1}),[yield t.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:$he,fragmentShader:Whe,defines:t.getDefines(),triangulation:OE,primitive:L.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}clearModels(){var t,r;(t=this.texture)===null||t===void 0||t.destroy(),(r=this.colorTexture)===null||r===void 0||r.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Vt.Attribute,descriptor:{shaderLocation:this.attributeLocation.UV,name:"a_Uv",buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:2,update:(t,r,n)=>[n[3],n[4]]}})}};const Yhe=["data"],Zhe=["rasterData"],Khe=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

in vec2 v_texCoord;

out vec4 outputColor;

void main() {

  vec3 rgb = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y)).rgb;

  if(rgb == vec3(u_noDataValue)) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }

  if(outputColor.a < 0.01)
    discard;
 
}`,Qhe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_rminmax;
  vec2 u_gminmax;
  vec2 u_bminmax;
  float u_opacity;
  float u_noDataValue;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class Jhe extends xn{constructor(...t){super(...t),F(this,"texture",void 0),F(this,"dataOption",{})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),qe(qe({},t.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const{opacity:t=1,noDataValue:r=0}=this.layer.getLayerConfig(),{rMinMax:n=[0,255],gMinMax:i=[0,255],bMinMax:a=[0,255]}=this.dataOption,o={u_rminmax:n,u_gminmax:i,u_bminmax:a,u_opacity:t||1,u_noDataValue:r,u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(o)}getRasterData(t){var r=this;return et(function*(){if(Array.isArray(t.data)){const{data:o}=t,l=ml(t,Yhe);return r.dataOption=l,qe({data:o},l)}const n=yield t.data,{rasterData:i}=n,a=ml(n,Zhe);return r.dataOption=a,Array.isArray(i)?qe({data:i},a):qe({data:Array.from(i)},a)})()}initModels(){var t=this;return et(function*(){t.initUniformsBuffer();const r=t.layer.getSource(),{createTexture2D:n}=t.rendererService,i=r.data.dataArray[0],{data:a,width:o,height:l}=yield t.getRasterData(i);return t.texture=n({data:new Float32Array(a),width:o,height:l,format:L.RGB,type:L.FLOAT}),[yield t.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:Qhe,fragmentShader:Khe,defines:t.getDefines(),triangulation:OE,primitive:L.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}buildModels(){var t=this;return et(function*(){return t.initModels()})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Vt.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:2,update:(t,r,n)=>[n[3],n[4]]}})}}const epe=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

layout(std140) uniform commonUniforms {
 vec4 u_unpack;
 vec2 u_domain;
 float u_opacity;
 float u_noDataValue;
 float u_clampLow;
 float u_clampHigh;
};

in vec2 v_texCoord;
out vec4 outputColor;


float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data =  texture(SAMPLER_2D(u_texture), coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return  texture(SAMPLER_2D(u_colorTexture), coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
     outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    outputColor = getColor(value);
    outputColor.a =  outputColor.a * u_opacity ;
      if(outputColor.a < 0.01)
      discard;
  }
}
`,tpe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec4 u_unpack;
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};
out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class rpe extends xn{constructor(...t){super(...t),F(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getCommonUniformsInfo(){const{opacity:t,clampLow:r=!0,clampHigh:n=!0,noDataValue:i=-9999999,domain:a,rampColors:o,colorTexture:l,rScaler:c=6553.6,gScaler:f=25.6,bScaler:h=.1,offset:p=1e4}=this.layer.getLayerConfig(),v=a||F3(o);let g=l;l?this.layer.textureService.setColorTexture(l,o,v):g=this.layer.textureService.getColorTexture(o,v);const _={u_unpack:[c,f,h,p],u_domain:v,u_opacity:t||1,u_noDataValue:i,u_clampLow:r,u_clampHigh:typeof n<"u"?n:r,u_texture:this.texture,u_colorTexture:g};return this.textures=[this.texture,g],this.getUniformsBufferInfo(_)}initModels(){var t=this;return et(function*(){t.initUniformsBuffer();const r=t.layer.getSource(),{createTexture2D:n}=t.rendererService,i=yield r.data.images;return t.texture=n({data:i[0],width:i[0].width,height:i[0].height,min:L.LINEAR,mag:L.LINEAR}),[yield t.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:tpe,fragmentShader:epe,defines:t.getDefines(),triangulation:OE,primitive:L.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var t;(t=this.texture)===null||t===void 0||t.destroy()}buildModels(){var t=this;return et(function*(){return t.initModels()})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Vt.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:L.DYNAMIC_DRAW,data:[],type:L.FLOAT},size:2,update:(t,r,n)=>[n[3],n[4]]}})}}const npe={raster:h6,rasterRgb:Jhe,raster3d:h6,rasterTerrainRgb:rpe};class yO extends em{constructor(...t){super(...t),F(this,"type","RasterLayer")}buildModels(){var t=this;return et(function*(){const r=t.getModelType();t.layerModel=new npe[r](t),yield t.initLayerModels()})()}getDefaultConfig(){const t=this.getModelType();return{raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}}[t]}getModelType(){switch(this.layerSource.getParserType()){case"raster":case"ndi":return"raster";case"rasterRgb":return"rasterRgb";case"rgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}getLegend(t){if(t!=="color")return{type:void 0,field:void 0,items:[]};const r=this.getLayerConfig().rampColors;return lde(r,t)}}class ipe{constructor({rendererService:t,layerService:r,parent:n}){F(this,"tileResource",new Map),F(this,"rendererService",void 0),F(this,"layerService",void 0),F(this,"parent",void 0),F(this,"layerTiles",[]),this.rendererService=t,this.layerService=r,this.parent=n}get tiles(){return this.layerTiles}hasTile(t){return this.layerTiles.some(r=>r.key===t)}addTile(t){this.layerTiles.push(t)}getTile(t){return this.layerTiles.find(r=>r.key===t)}getVisibleTileBylngLat(t){return this.layerTiles.find(r=>r.isLoaded&&r.visible&&r.lnglatInBounds(t))}removeTile(t){const r=this.layerTiles.findIndex(i=>i.key===t),n=this.layerTiles.splice(r,1);n[0]&&n[0].destroy()}updateTileVisible(t){const r=this.getTile(t.key);if(t.isVisible)if(t.parent){const n=this.isChildrenLoaded(t.parent);r?.updateVisible(n)}else r?.updateVisible(!0);else if(t.parent){const n=this.isChildrenLoaded(t.parent);r?.updateVisible(!n)}else r?.updateVisible(!1)}isParentLoaded(t){const r=t.parent;if(!r)return!0;const n=this.getTile(r?.key);return!!(n!=null&&n.isLoaded)}isChildrenLoaded(t){const r=t?.children;return r.length===0?!0:r.every(n=>{const i=this.getTile(n?.key);return i?i?.isLoaded===!0:!0})}render(){var t=this;return et(function*(){const n=t.getRenderLayers().map((function(){var i=et(function*(a){yield t.layerService.renderTileLayer(a)});return function(a){return i.apply(this,arguments)}})());yield Promise.all(n)})()}getRenderLayers(){const t=this.layerTiles.filter(n=>n.visible&&n.isLoaded),r=[];return t.map(n=>r.push(...n.getLayers())),r}getLayers(){const t=this.layerTiles.filter(n=>n.isLoaded),r=[];return t.map(n=>r.push(...n.getLayers())),r}getTiles(){return this.layerTiles}destroy(){this.layerTiles.forEach(t=>t.destroy()),this.tileResource.clear()}}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function ape(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(f){return function(h){return c([f,h])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){r.label=f[1];break}if(f[0]===6&&r.label<a[1]){r.label=a[1],a=f;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(f);break}a[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(h){f=[6,h],i=0}finally{n=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var Wc=(function(){function e(t,r){this.next=null,this.key=t,this.data=r,this.left=null,this.right=null}return e})();function ope(e,t){return e>t?1:e<t?-1:0}function Cc(e,t,r){for(var n=new Wc(null,null),i=n,a=n;;){var o=r(e,t.key);if(o<0){if(t.left===null)break;if(r(e,t.left.key)<0){var l=t.left;if(t.left=l.right,l.right=t,t=l,t.left===null)break}a.left=t,a=t,t=t.left}else if(o>0){if(t.right===null)break;if(r(e,t.right.key)>0){var l=t.right;if(t.right=l.left,l.left=t,t=l,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,a.left=t.right,t.left=n.right,t.right=n.left,t}function zR(e,t,r,n){var i=new Wc(e,t);if(r===null)return i.left=i.right=null,i;r=Cc(e,r,n);var a=n(e,r.key);return a<0?(i.left=r.left,i.right=r,r.left=null):a>=0&&(i.right=r.right,i.left=r,r.right=null),i}function p6(e,t,r){var n=null,i=null;if(t){t=Cc(e,t,r);var a=r(t.key,e);a===0?(n=t.left,i=t.right):a<0?(i=t.right,t.right=null,n=t):(n=t.left,t.left=null,i=t)}return{left:n,right:i}}function spe(e,t,r){return t===null?e:(e===null||(t=Cc(e.key,t,r),t.left=e),t)}function sC(e,t,r,n,i){if(e){n(""+t+(r?"└── ":"├── ")+i(e)+`
`);var a=t+(r?"    ":"│   ");e.left&&sC(e.left,a,!1,n,i),e.right&&sC(e.right,a,!0,n,i)}}var EO=(function(){function e(t){t===void 0&&(t=ope),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,r){return this._size++,this._root=zR(t,r,this._root,this._comparator)},e.prototype.add=function(t,r){var n=new Wc(t,r);this._root===null&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,a=Cc(t,this._root,i),o=i(t,a.key);return o===0?this._root=a:(o<0?(n.left=a.left,n.right=a,a.left=null):o>0&&(n.right=a.right,n.left=a,a.right=null),this._size++,this._root=n),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,r,n){var i;if(r===null)return null;r=Cc(t,r,n);var a=n(t,r.key);return a===0?(r.left===null?i=r.right:(i=Cc(t,r.left,n),i.right=r.right),this._size--,i):r},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=Cc(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var r=this._root,n=this._comparator;r;){var i=n(t,r.key);if(i===0)return r;i<0?r=r.left:r=r.right}return null},e.prototype.find=function(t){return this._root&&(this._root=Cc(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var r=this._root,n=this._comparator;r;){var i=n(t,r.key);if(i===0)return!0;i<0?r=r.left:r=r.right}return!1},e.prototype.forEach=function(t,r){for(var n=this._root,i=[],a=!1;!a;)n!==null?(i.push(n),n=n.left):i.length!==0?(n=i.pop(),t.call(r,n),n=n.right):a=!0;return this},e.prototype.range=function(t,r,n,i){for(var a=[],o=this._comparator,l=this._root,c;a.length!==0||l;)if(l)a.push(l),l=l.left;else{if(l=a.pop(),c=o(l.key,r),c>0)break;if(o(l.key,t)>=0&&n.call(i,l))return this;l=l.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(r){var n=r.key;return t.push(n)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(r){var n=r.data;return t.push(n)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var r=this._root,n=!1,i=0,a=[];!n;)if(r)a.push(r),r=r.left;else if(a.length>0){if(r=a.pop(),i===t)return r;i++,r=r.right}else n=!0;return null},e.prototype.next=function(t){var r=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var i=this._comparator;r;){var a=i(t.key,r.key);if(a===0)break;a<0?(n=r,r=r.left):r=r.right}return n},e.prototype.prev=function(t){var r=this._root,n=null;if(t.left!==null){for(n=t.left;n.right;)n=n.right;return n}for(var i=this._comparator;r;){var a=i(t.key,r.key);if(a===0)break;a<0?r=r.left:(n=r,r=r.right)}return n},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return upe(this._root)},e.prototype.load=function(t,r,n){r===void 0&&(r=[]),n===void 0&&(n=!1);var i=t.length,a=this._comparator;if(n&&cC(t,r,0,i-1,a),this._root===null)this._root=lC(t,r,0,i),this._size=i;else{var o=cpe(this.toList(),lpe(t,r),a);i=this._size+i,this._root=uC({head:o},0,i)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(n){return String(n.key)});var r=[];return sC(this._root,"",!0,function(n){return r.push(n)},t),r.join("")},e.prototype.update=function(t,r,n){var i=this._comparator,a=p6(t,this._root,i),o=a.left,l=a.right;i(t,r)<0?l=zR(r,n,l,i):o=zR(r,n,o,i),this._root=spe(o,l,i)},e.prototype.split=function(t){return p6(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,r,n;return ape(this,function(i){switch(i.label){case 0:t=this._root,r=[],n=!1,i.label=1;case 1:return n?[3,6]:t===null?[3,2]:(r.push(t),t=t.left,[3,5]);case 2:return r.length===0?[3,4]:(t=r.pop(),[4,t]);case 3:return i.sent(),t=t.right,[3,5];case 4:n=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},e})();function lC(e,t,r,n){var i=n-r;if(i>0){var a=r+Math.floor(i/2),o=e[a],l=t[a],c=new Wc(o,l);return c.left=lC(e,t,r,a),c.right=lC(e,t,a+1,n),c}return null}function lpe(e,t){for(var r=new Wc(null,null),n=r,i=0;i<e.length;i++)n=n.next=new Wc(e[i],t[i]);return n.next=null,r.next}function upe(e){for(var t=e,r=[],n=!1,i=new Wc(null,null),a=i;!n;)t?(r.push(t),t=t.left):r.length>0?(t=a=a.next=r.pop(),t=t.right):n=!0;return a.next=null,i.next}function uC(e,t,r){var n=r-t;if(n>0){var i=t+Math.floor(n/2),a=uC(e,t,i),o=e.head;return o.left=a,e.head=e.head.next,o.right=uC(e,i+1,r),o}return null}function cpe(e,t,r){for(var n=new Wc(null,null),i=n,a=e,o=t;a!==null&&o!==null;)r(a.key,o.key)<0?(i.next=a,a=a.next):(i.next=o,o=o.next),i=i.next;return a!==null?i.next=a:o!==null&&(i.next=o),n.next}function cC(e,t,r,n,i){if(!(r>=n)){for(var a=e[r+n>>1],o=r-1,l=n+1;;){do o++;while(i(e[o],a)<0);do l--;while(i(e[l],a)>0);if(o>=l)break;var c=e[o];e[o]=e[l],e[l]=c,c=t[o],t[o]=t[l],t[l]=c}cC(e,t,r,l,i),cC(e,t,l+1,n,i)}}const cu=11102230246251565e-32,la=134217729,fpe=(3+8*cu)*cu;function VR(e,t,r,n,i){let a,o,l,c,f=t[0],h=n[0],p=0,v=0;h>f==h>-f?(a=f,f=t[++p]):(a=h,h=n[++v]);let g=0;if(p<e&&v<r)for(h>f==h>-f?(o=f+a,l=a-(o-f),f=t[++p]):(o=h+a,l=a-(o-h),h=n[++v]),a=o,l!==0&&(i[g++]=l);p<e&&v<r;)h>f==h>-f?(o=a+f,c=o-a,l=a-(o-c)+(f-c),f=t[++p]):(o=a+h,c=o-a,l=a-(o-c)+(h-c),h=n[++v]),a=o,l!==0&&(i[g++]=l);for(;p<e;)o=a+f,c=o-a,l=a-(o-c)+(f-c),f=t[++p],a=o,l!==0&&(i[g++]=l);for(;v<r;)o=a+h,c=o-a,l=a-(o-c)+(h-c),h=n[++v],a=o,l!==0&&(i[g++]=l);return(a!==0||g===0)&&(i[g++]=a),g}function dpe(e,t){let r=t[0];for(let n=1;n<e;n++)r+=t[n];return r}function i0(e){return new Float64Array(e)}const hpe=(3+16*cu)*cu,ppe=(2+12*cu)*cu,mpe=(9+64*cu)*cu*cu,Gh=i0(4),m6=i0(8),v6=i0(12),g6=i0(16),Ta=i0(4);function vpe(e,t,r,n,i,a,o){let l,c,f,h,p,v,g,_,E,b,S,T,C,M,D,I,N,j;const re=e-i,Q=r-i,X=t-a,R=n-a;M=re*R,v=la*re,g=v-(v-re),_=re-g,v=la*R,E=v-(v-R),b=R-E,D=_*b-(M-g*E-_*E-g*b),I=X*Q,v=la*X,g=v-(v-X),_=X-g,v=la*Q,E=v-(v-Q),b=Q-E,N=_*b-(I-g*E-_*E-g*b),S=D-N,p=D-S,Gh[0]=D-(S+p)+(p-N),T=M+S,p=T-M,C=M-(T-p)+(S-p),S=C-I,p=C-S,Gh[1]=C-(S+p)+(p-I),j=T+S,p=j-T,Gh[2]=T-(j-p)+(S-p),Gh[3]=j;let P=dpe(4,Gh),V=ppe*o;if(P>=V||-P>=V||(p=e-re,l=e-(re+p)+(p-i),p=r-Q,f=r-(Q+p)+(p-i),p=t-X,c=t-(X+p)+(p-a),p=n-R,h=n-(R+p)+(p-a),l===0&&c===0&&f===0&&h===0)||(V=mpe*o+fpe*Math.abs(P),P+=re*h+R*l-(X*f+Q*c),P>=V||-P>=V))return P;M=l*R,v=la*l,g=v-(v-l),_=l-g,v=la*R,E=v-(v-R),b=R-E,D=_*b-(M-g*E-_*E-g*b),I=c*Q,v=la*c,g=v-(v-c),_=c-g,v=la*Q,E=v-(v-Q),b=Q-E,N=_*b-(I-g*E-_*E-g*b),S=D-N,p=D-S,Ta[0]=D-(S+p)+(p-N),T=M+S,p=T-M,C=M-(T-p)+(S-p),S=C-I,p=C-S,Ta[1]=C-(S+p)+(p-I),j=T+S,p=j-T,Ta[2]=T-(j-p)+(S-p),Ta[3]=j;const le=VR(4,Gh,4,Ta,m6);M=re*h,v=la*re,g=v-(v-re),_=re-g,v=la*h,E=v-(v-h),b=h-E,D=_*b-(M-g*E-_*E-g*b),I=X*f,v=la*X,g=v-(v-X),_=X-g,v=la*f,E=v-(v-f),b=f-E,N=_*b-(I-g*E-_*E-g*b),S=D-N,p=D-S,Ta[0]=D-(S+p)+(p-N),T=M+S,p=T-M,C=M-(T-p)+(S-p),S=C-I,p=C-S,Ta[1]=C-(S+p)+(p-I),j=T+S,p=j-T,Ta[2]=T-(j-p)+(S-p),Ta[3]=j;const w=VR(le,m6,4,Ta,v6);M=l*h,v=la*l,g=v-(v-l),_=l-g,v=la*h,E=v-(v-h),b=h-E,D=_*b-(M-g*E-_*E-g*b),I=c*f,v=la*c,g=v-(v-c),_=c-g,v=la*f,E=v-(v-f),b=f-E,N=_*b-(I-g*E-_*E-g*b),S=D-N,p=D-S,Ta[0]=D-(S+p)+(p-N),T=M+S,p=T-M,C=M-(T-p)+(S-p),S=C-I,p=C-S,Ta[1]=C-(S+p)+(p-I),j=T+S,p=j-T,Ta[2]=T-(j-p)+(S-p),Ta[3]=j;const z=VR(w,v6,4,Ta,g6);return g6[z-1]}function gpe(e,t,r,n,i,a){const o=(t-a)*(r-i),l=(e-i)*(n-a),c=o-l,f=Math.abs(o+l);return Math.abs(c)>=hpe*f?c:-vpe(e,t,r,n,i,a,f)}var x9={};const Bv=(e,t)=>e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y,fC=(e,t)=>{if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;const r=e.ll.x<t.ll.x?t.ll.x:e.ll.x,n=e.ur.x<t.ur.x?e.ur.x:t.ur.x,i=e.ll.y<t.ll.y?t.ll.y:e.ll.y,a=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:r,y:i},ur:{x:n,y:a}}};let Mc=Number.EPSILON;Mc===void 0&&(Mc=Math.pow(2,-52));const _pe=Mc*Mc,_6=(e,t)=>{if(-Mc<e&&e<Mc&&-Mc<t&&t<Mc)return 0;const r=e-t;return r*r<_pe*e*t?0:e<t?-1:1};class ype{constructor(){this.reset()}reset(){this.xRounder=new y6,this.yRounder=new y6}round(t,r){return{x:this.xRounder.round(t),y:this.yRounder.round(r)}}}class y6{constructor(){this.tree=new EO,this.round(0)}round(t){const r=this.tree.add(t),n=this.tree.prev(r);if(n!==null&&_6(r.key,n.key)===0)return this.tree.remove(t),n.key;const i=this.tree.next(r);return i!==null&&_6(r.key,i.key)===0?(this.tree.remove(t),i.key):t}}const jg=new ype,Oy=(e,t)=>e.x*t.y-e.y*t.x,S9=(e,t)=>e.x*t.x+e.y*t.y,E6=(e,t,r)=>{const n=gpe(e.x,e.y,t.x,t.y,r.x,r.y);return n>0?-1:n<0?1:0},C1=e=>Math.sqrt(S9(e,e)),Epe=(e,t,r)=>{const n={x:t.x-e.x,y:t.y-e.y},i={x:r.x-e.x,y:r.y-e.y};return Oy(i,n)/C1(i)/C1(n)},bpe=(e,t,r)=>{const n={x:t.x-e.x,y:t.y-e.y},i={x:r.x-e.x,y:r.y-e.y};return S9(i,n)/C1(i)/C1(n)},b6=(e,t,r)=>t.y===0?null:{x:e.x+t.x/t.y*(r-e.y),y:r},x6=(e,t,r)=>t.x===0?null:{x:r,y:e.y+t.y/t.x*(r-e.x)},xpe=(e,t,r,n)=>{if(t.x===0)return x6(r,n,e.x);if(n.x===0)return x6(e,t,r.x);if(t.y===0)return b6(r,n,e.y);if(n.y===0)return b6(e,t,r.y);const i=Oy(t,n);if(i==0)return null;const a={x:r.x-e.x,y:r.y-e.y},o=Oy(a,t)/i,l=Oy(a,n)/i,c=e.x+l*t.x,f=r.x+o*n.x,h=e.y+l*t.y,p=r.y+o*n.y,v=(c+f)/2,g=(h+p)/2;return{x:v,y:g}};class Bo{static compare(t,r){const n=Bo.comparePoints(t.point,r.point);return n!==0?n:(t.point!==r.point&&t.link(r),t.isLeft!==r.isLeft?t.isLeft?1:-1:kc.compare(t.segment,r.segment))}static comparePoints(t,r){return t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0}constructor(t,r){t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=r}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const r=t.point.events;for(let n=0,i=r.length;n<i;n++){const a=r[n];this.point.events.push(a),a.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let r=0;r<t;r++){const n=this.point.events[r];if(n.segment.consumedBy===void 0)for(let i=r+1;i<t;i++){const a=this.point.events[i];a.consumedBy===void 0&&n.otherSE.point.events===a.otherSE.point.events&&n.segment.consume(a.segment)}}}getAvailableLinkedEvents(){const t=[];for(let r=0,n=this.point.events.length;r<n;r++){const i=this.point.events[r];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}getLeftmostComparator(t){const r=new Map,n=i=>{const a=i.otherSE;r.set(i,{sine:Epe(this.point,t.point,a.point),cosine:bpe(this.point,t.point,a.point)})};return(i,a)=>{r.has(i)||n(i),r.has(a)||n(a);const{sine:o,cosine:l}=r.get(i),{sine:c,cosine:f}=r.get(a);return o>=0&&c>=0?l<f?1:l>f?-1:0:o<0&&c<0?l<f?-1:l>f?1:0:c<o?-1:c>o?1:0}}}let Spe=0;class kc{static compare(t,r){const n=t.leftSE.point.x,i=r.leftSE.point.x,a=t.rightSE.point.x,o=r.rightSE.point.x;if(o<n)return 1;if(a<i)return-1;const l=t.leftSE.point.y,c=r.leftSE.point.y,f=t.rightSE.point.y,h=r.rightSE.point.y;if(n<i){if(c<l&&c<f)return 1;if(c>l&&c>f)return-1;const p=t.comparePoint(r.leftSE.point);if(p<0)return 1;if(p>0)return-1;const v=r.comparePoint(t.rightSE.point);return v!==0?v:-1}if(n>i){if(l<c&&l<h)return-1;if(l>c&&l>h)return 1;const p=r.comparePoint(t.leftSE.point);if(p!==0)return p;const v=t.comparePoint(r.rightSE.point);return v<0?1:v>0?-1:1}if(l<c)return-1;if(l>c)return 1;if(a<o){const p=r.comparePoint(t.rightSE.point);if(p!==0)return p}if(a>o){const p=t.comparePoint(r.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(a!==o){const p=f-l,v=a-n,g=h-c,_=o-i;if(p>v&&g<_)return 1;if(p<v&&g>_)return-1}return a>o?1:a<o||f<h?-1:f>h?1:t.id<r.id?-1:t.id>r.id?1:0}constructor(t,r,n,i){this.id=++Spe,this.leftSE=t,t.segment=this,t.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=t,this.rings=n,this.windings=i}static fromRing(t,r,n){let i,a,o;const l=Bo.comparePoints(t,r);if(l<0)i=t,a=r,o=1;else if(l>0)i=r,a=t,o=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const c=new Bo(i,!0),f=new Bo(a,!1);return new kc(c,f,[n],[o])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,r=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<r?t:r},ur:{x:this.rightSE.point.x,y:t>r?t:r}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0;const r=this.leftSE.point,n=this.rightSE.point,i=this.vector();if(r.x===n.x)return t.x===r.x?0:t.x<r.x?1:-1;const a=(t.y-r.y)/i.y,o=r.x+a*i.x;if(t.x===o)return 0;const l=(t.x-r.x)/i.x,c=r.y+l*i.y;return t.y===c?0:t.y<c?-1:1}getIntersection(t){const r=this.bbox(),n=t.bbox(),i=fC(r,n);if(i===null)return null;const a=this.leftSE.point,o=this.rightSE.point,l=t.leftSE.point,c=t.rightSE.point,f=Bv(r,l)&&this.comparePoint(l)===0,h=Bv(n,a)&&t.comparePoint(a)===0,p=Bv(r,c)&&this.comparePoint(c)===0,v=Bv(n,o)&&t.comparePoint(o)===0;if(h&&f)return v&&!p?o:!v&&p?c:null;if(h)return p&&a.x===c.x&&a.y===c.y?null:a;if(f)return v&&o.x===l.x&&o.y===l.y?null:l;if(v&&p)return null;if(v)return o;if(p)return c;const g=xpe(a,this.vector(),l,t.vector());return g===null||!Bv(i,g)?null:jg.round(g.x,g.y)}split(t){const r=[],n=t.events!==void 0,i=new Bo(t,!0),a=new Bo(t,!1),o=this.rightSE;this.replaceRightSE(a),r.push(a),r.push(i);const l=new kc(i,o,this.rings.slice(),this.windings.slice());return Bo.comparePoints(l.leftSE.point,l.rightSE.point)>0&&l.swapEvents(),Bo.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(i.checkForConsuming(),a.checkForConsuming()),r}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let r=0,n=this.windings.length;r<n;r++)this.windings[r]*=-1}consume(t){let r=this,n=t;for(;r.consumedBy;)r=r.consumedBy;for(;n.consumedBy;)n=n.consumedBy;const i=kc.compare(r,n);if(i!==0){if(i>0){const a=r;r=n,n=a}if(r.prev===n){const a=r;r=n,n=a}for(let a=0,o=n.rings.length;a<o;a++){const l=n.rings[a],c=n.windings[a],f=r.rings.indexOf(l);f===-1?(r.rings.push(l),r.windings.push(c)):r.windings[f]+=c}n.rings=null,n.windings=null,n.consumedBy=r,n.leftSE.consumedBy=r.leftSE,n.rightSE.consumedBy=r.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const r=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys;for(let l=0,c=this.rings.length;l<c;l++){const f=this.rings[l],h=this.windings[l],p=r.indexOf(f);p===-1?(r.push(f),n.push(h)):n[p]+=h}const a=[],o=[];for(let l=0,c=r.length;l<c;l++){if(n[l]===0)continue;const f=r[l],h=f.poly;if(o.indexOf(h)===-1)if(f.isExterior)a.push(h);else{o.indexOf(h)===-1&&o.push(h);const p=a.indexOf(f.poly);p!==-1&&a.splice(p,1)}}for(let l=0,c=a.length;l<c;l++){const f=a[l].multiPoly;i.indexOf(f)===-1&&i.push(f)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,r=this.afterState().multiPolys;switch(ys.type){case"union":{const n=t.length===0,i=r.length===0;this._isInResult=n!==i;break}case"intersection":{let n,i;t.length<r.length?(n=t.length,i=r.length):(n=r.length,i=t.length),this._isInResult=i===ys.numMultiPolys&&n<i;break}case"xor":{const n=Math.abs(t.length-r.length);this._isInResult=n%2===1;break}case"difference":{const n=i=>i.length===1&&i[0].isSubject;this._isInResult=n(t)!==n(r);break}default:throw new Error(`Unrecognized operation type found ${ys.type}`)}return this._isInResult}}class S6{constructor(t,r,n){if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const i=jg.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};let a=i;for(let o=1,l=t.length;o<l;o++){if(typeof t[o][0]!="number"||typeof t[o][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let c=jg.round(t[o][0],t[o][1]);c.x===a.x&&c.y===a.y||(this.segments.push(kc.fromRing(a,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),a=c)}(i.x!==a.x||i.y!==a.y)&&this.segments.push(kc.fromRing(a,i,this))}getSweepEvents(){const t=[];for(let r=0,n=this.segments.length;r<n;r++){const i=this.segments[r];t.push(i.leftSE),t.push(i.rightSE)}return t}}class Tpe{constructor(t,r){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new S6(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,i=t.length;n<i;n++){const a=new S6(t[n],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=r}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let r=0,n=this.interiorRings.length;r<n;r++){const i=this.interiorRings[r].getSweepEvents();for(let a=0,o=i.length;a<o;a++)t.push(i[a])}return t}}class T6{constructor(t,r){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let n=0,i=t.length;n<i;n++){const a=new Tpe(t[n],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=r}getSweepEvents(){const t=[];for(let r=0,n=this.polys.length;r<n;r++){const i=this.polys[r].getSweepEvents();for(let a=0,o=i.length;a<o;a++)t.push(i[a])}return t}}class O1{static factory(t){const r=[];for(let n=0,i=t.length;n<i;n++){const a=t[n];if(!a.isInResult()||a.ringOut)continue;let o=null,l=a.leftSE,c=a.rightSE;const f=[l],h=l.point,p=[];for(;o=l,l=c,f.push(l),l.point!==h;)for(;;){const v=l.getAvailableLinkedEvents();if(v.length===0){const E=f[0].point,b=f[f.length-1].point;throw new Error(`Unable to complete output ring starting at [${E.x}, ${E.y}]. Last matching segment found ends at [${b.x}, ${b.y}].`)}if(v.length===1){c=v[0].otherSE;break}let g=null;for(let E=0,b=p.length;E<b;E++)if(p[E].point===l.point){g=E;break}if(g!==null){const E=p.splice(g)[0],b=f.splice(E.index);b.unshift(b[0].otherSE),r.push(new O1(b.reverse()));continue}p.push({index:f.length,point:l.point});const _=l.getLeftmostComparator(o);c=v.sort(_)[0].otherSE;break}r.push(new O1(f))}return r}constructor(t){this.events=t;for(let r=0,n=t.length;r<n;r++)t[r].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const r=[t];for(let f=1,h=this.events.length-1;f<h;f++){const p=this.events[f].point,v=this.events[f+1].point;E6(p,t,v)!==0&&(r.push(p),t=p)}if(r.length===1)return null;const n=r[0],i=r[1];E6(n,t,i)===0&&r.shift(),r.push(r[0]);const a=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:r.length-1,l=this.isExteriorRing()?r.length:-1,c=[];for(let f=o;f!=l;f+=a)c.push([r[f].x,r[f].y]);return c}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let i=1,a=this.events.length;i<a;i++){const o=this.events[i];Bo.compare(t,o)>0&&(t=o)}let r=t.segment.prevInResult(),n=r?r.prevInResult():null;for(;;){if(!r)return null;if(!n)return r.ringOut;if(n.ringOut!==r.ringOut)return n.ringOut.enclosingRing()!==r.ringOut?r.ringOut:r.ringOut.enclosingRing();r=n.prevInResult(),n=r?r.prevInResult():null}}}class A6{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(let r=0,n=this.interiorRings.length;r<n;r++){const i=this.interiorRings[r].getGeom();i!==null&&t.push(i)}return t}}class Ape{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let r=0,n=this.polys.length;r<n;r++){const i=this.polys[r].getGeom();i!==null&&t.push(i)}return t}_composePolys(t){const r=[];for(let n=0,i=t.length;n<i;n++){const a=t[n];if(!a.poly)if(a.isExteriorRing())r.push(new A6(a));else{const o=a.enclosingRing();o.poly||r.push(new A6(o)),o.poly.addInterior(a)}}return r}}class Rpe{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kc.compare;this.queue=t,this.tree=new EO(r),this.segments=[]}process(t){const r=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(r),n;const i=t.isLeft?this.tree.add(r):this.tree.find(r);if(!i)throw new Error(`Unable to find segment #${r.id} [${r.leftSE.point.x}, ${r.leftSE.point.y}] -> [${r.rightSE.point.x}, ${r.rightSE.point.y}] in SweepLine tree.`);let a=i,o=i,l,c;for(;l===void 0;)a=this.tree.prev(a),a===null?l=null:a.key.consumedBy===void 0&&(l=a.key);for(;c===void 0;)o=this.tree.next(o),o===null?c=null:o.key.consumedBy===void 0&&(c=o.key);if(t.isLeft){let f=null;if(l){const p=l.getIntersection(r);if(p!==null&&(r.isAnEndpoint(p)||(f=p),!l.isAnEndpoint(p))){const v=this._splitSafely(l,p);for(let g=0,_=v.length;g<_;g++)n.push(v[g])}}let h=null;if(c){const p=c.getIntersection(r);if(p!==null&&(r.isAnEndpoint(p)||(h=p),!c.isAnEndpoint(p))){const v=this._splitSafely(c,p);for(let g=0,_=v.length;g<_;g++)n.push(v[g])}}if(f!==null||h!==null){let p=null;f===null?p=h:h===null?p=f:p=Bo.comparePoints(f,h)<=0?f:h,this.queue.remove(r.rightSE),n.push(r.rightSE);const v=r.split(p);for(let g=0,_=v.length;g<_;g++)n.push(v[g])}n.length>0?(this.tree.remove(r),n.push(t)):(this.segments.push(r),r.prev=l)}else{if(l&&c){const f=l.getIntersection(c);if(f!==null){if(!l.isAnEndpoint(f)){const h=this._splitSafely(l,f);for(let p=0,v=h.length;p<v;p++)n.push(h[p])}if(!c.isAnEndpoint(f)){const h=this._splitSafely(c,f);for(let p=0,v=h.length;p<v;p++)n.push(h[p])}}}this.tree.remove(r)}return n}_splitSafely(t,r){this.tree.remove(t);const n=t.rightSE;this.queue.remove(n);const i=t.split(r);return i.push(n),t.consumedBy===void 0&&this.tree.add(t),i}}const R6=typeof process<"u"&&x9.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Cpe=typeof process<"u"&&x9.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class Ope{run(t,r,n){ys.type=t,jg.reset();const i=[new T6(r,!0)];for(let p=0,v=n.length;p<v;p++)i.push(new T6(n[p],!1));if(ys.numMultiPolys=i.length,ys.type==="difference"){const p=i[0];let v=1;for(;v<i.length;)fC(i[v].bbox,p.bbox)!==null?v++:i.splice(v,1)}if(ys.type==="intersection")for(let p=0,v=i.length;p<v;p++){const g=i[p];for(let _=p+1,E=i.length;_<E;_++)if(fC(g.bbox,i[_].bbox)===null)return[]}const a=new EO(Bo.compare);for(let p=0,v=i.length;p<v;p++){const g=i[p].getSweepEvents();for(let _=0,E=g.length;_<E;_++)if(a.insert(g[_]),a.size>R6)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const o=new Rpe(a);let l=a.size,c=a.pop();for(;c;){const p=c.key;if(a.size===l){const g=p.segment;throw new Error(`Unable to pop() ${p.isLeft?"left":"right"} SweepEvent [${p.point.x}, ${p.point.y}] from segment #${g.id} [${g.leftSE.point.x}, ${g.leftSE.point.y}] -> [${g.rightSE.point.x}, ${g.rightSE.point.y}] from queue.`)}if(a.size>R6)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(o.segments.length>Cpe)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const v=o.process(p);for(let g=0,_=v.length;g<_;g++){const E=v[g];E.consumedBy===void 0&&a.insert(E)}l=a.size,c=a.pop()}jg.reset();const f=O1.factory(o.segments);return new Ape(f).getGeom()}}const ys=new Ope,wpe=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ys.run("union",e,r)},Npe=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ys.run("intersection",e,r)},Mpe=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ys.run("xor",e,r)},Ipe=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ys.run("difference",e,r)};var Ppe={union:wpe,intersection:Npe,xor:Mpe,difference:Ipe};function Dpe(e,t,r){r===void 0&&(r={});var n=cM(e),i=cM(t),a=Ppe.union(n.coordinates,i.coordinates);return a.length===0?null:a.length===1?w3(a[0],r.properties):GK(a,r.properties)}class Lpe{getCombineFeature(t){let r=null;const n=t[0];return t.map(i=>{const a=w3(i.coordinates);r===null?r=a:r=Dpe(r,a)}),n&&(r.properties=qe({},n)),r}}const Fv="select",Uv="active";class Bpe{constructor({layerService:t,tileLayerService:r,parent:n}){F(this,"layerService",void 0),F(this,"tileLayerService",void 0),F(this,"tileSourceService",void 0),F(this,"parent",void 0),F(this,"tilePickID",new Map),this.layerService=t,this.tileLayerService=r,this.parent=n,this.tileSourceService=new Lpe}pickRender(t){const r=this.tileLayerService.getVisibleTileBylngLat(t.lngLat);if(r){const n=r.getMainLayer();n?.layerPickService.pickRender(t)}}pick(t,r){var n=this;return et(function*(){const a=n.parent.getContainer().pickingService;if(t.type==="RasterLayer"){const o=n.tileLayerService.getVisibleTileBylngLat(r.lngLat);if(o&&o.getMainLayer()!==void 0){const l=o.getMainLayer();return l.layerPickService.pickRasterLayer(l,r,n.parent)}return!1}return n.pickRender(r),a.pickFromPickingFBO(t,r)})()}selectFeature(t){const[r,n,i]=t,a=this.color2PickId(r,n,i);this.tilePickID.set(Fv,a),this.updateHighLight(r,n,i,Fv)}highlightPickedFeature(t){const[r,n,i]=t,a=this.color2PickId(r,n,i);this.tilePickID.set(Uv,a),this.updateHighLight(r,n,i,Uv)}updateHighLight(t,r,n,i){this.tileLayerService.tiles.map(a=>{const o=a.getMainLayer();switch(i){case Fv:o?.hooks.beforeSelect.call([t,r,n]);break;case Uv:o?.hooks.beforeHighlight.call([t,r,n]);break}})}setPickState(){const t=this.tilePickID.get(Fv),r=this.tilePickID.get(Uv);if(t){const[n,i,a]=this.pickId2Color(t);this.updateHighLight(n,i,a,Fv);return}if(r){const[n,i,a]=this.pickId2Color(r);this.updateHighLight(n,i,a,Uv);return}}color2PickId(t,r,n){return nd(new Uint8Array([t,r,n]))}pickId2Color(t){return Rp(t)}getFeatureById(t){const r=this.tileLayerService.getTiles().filter(i=>i.visible),n=[];return r.forEach(i=>{n.push(...i.getFeatureById(t))}),n}pickRasterLayer(){return!1}}function Fpe(e){return e==="PolygonLayer"?b9:e==="LineLayer"?h9:kg}function Upe(e){return["PolygonLayer","LineLayer"].indexOf(e)!==-1}class Od extends Za.EventEmitter{constructor(t,r){super(),F(this,"x",void 0),F(this,"y",void 0),F(this,"z",void 0),F(this,"key",void 0),F(this,"parent",void 0),F(this,"sourceTile",void 0),F(this,"visible",!0),F(this,"layers",[]),F(this,"isLoaded",!1),F(this,"tileMaskLayers",[]),F(this,"tileMask",void 0),this.parent=r,this.sourceTile=t,this.x=t.x,this.y=t.y,this.z=t.z,this.key=`${this.x}_${this.y}_${this.z}`}getLayers(){return this.layers}styleUpdate(...t){}lnglatInBounds(t){const[r,n,i,a]=this.sourceTile.bounds,{lng:o,lat:l}=t;return o>=r&&o<=i&&l>=n&&l<=a}getLayerOptions(){var t;const r=this.parent.getLayerConfig();return qe(qe({},r),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:Upe(this.parent.type),mask:r.mask||((t=r.maskLayers)===null||t===void 0?void 0:t.length)!==0&&r.enableMask})}getMaskLayer(){const{maskLayers:t}=this.parent.getLayerConfig(),r=[];return t?.forEach(n=>{if(!n.tileLayer)return r.push(n),n;const a=n.tileLayer.getTile(this.sourceTile.key),o=a?.getLayers()[0];o&&r.push(o)}),r}addTileMask(){var t=this;return et(function*(){const r=new b9({name:"mask",visible:!0,enablePicking:!1}).source({type:"FeatureCollection",features:[t.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").color("#0f0").style({opacity:.5}),n=_g(t.parent.container);r.setContainer(n),yield r.init(),t.tileMask=r;const i=t.getMainLayer();return i!==void 0&&(i.tileMask=r),r})()}addMask(t,r){var n=this;return et(function*(){const i=_g(n.parent.container);r.setContainer(i),yield r.init(),t.addMask(r),n.tileMaskLayers.push(r)})()}addLayer(t){var r=this;return et(function*(){t.isTileLayer=!0;const n=_g(r.parent.container);t.setContainer(n),r.layers.push(t),yield t.init()})()}updateVisible(t){this.visible=t,this.updateOptions("visible",t)}updateOptions(t,r){this.layers.forEach(n=>{n.updateLayerConfig({[t]:r})})}getMainLayer(){return this.layers[0]}getFeatures(t){return[]}getFeatureById(t){return[]}destroy(){var t;(t=this.tileMask)===null||t===void 0||t.destroy(),this.layers.forEach(r=>r.destroy())}}class kpe extends Od{initTileLayer(){var t=this;return et(function*(){const r=t.getSourceOption(),n=r.data.features[0].properties,i=new h9().source(r.data,r.options).size(1).shape("line").color("red"),a=new kg({minZoom:t.z-1,maxZoom:t.z+1,textAllowOverlap:!0}).source([n],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(t.key).style({stroke:"#fff",strokeWidth:2});yield t.addLayer(i),yield t.addLayer(a),t.isLoaded=!0})()}getSourceOption(){const t=this.parent.getSource();return{data:{type:"FeatureCollection",features:this.sourceTile.data.layers.testTile.features},options:{parser:{type:"geojson"},transforms:t.transforms}}}}class jpe extends Od{initTileLayer(){var t=this;return et(function*(){const r=t.parent.getLayerAttributeConfig(),n=t.getLayerOptions(),i=t.getSourceOption(),a=new hde(qe({},n)).source(i.data,i.options);r&&Object.keys(r).forEach(o=>{var l,c;const f=o;a[f]((l=r[f])===null||l===void 0?void 0:l.field,(c=r[f])===null||c===void 0?void 0:c.values)}),yield t.addLayer(a),t.isLoaded=!0})()}getSourceOption(){const t=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:t.transforms}}}}const zpe=`layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

out vec4 outputColor;

void main() {
  outputColor = u_color;
  outputColor.a *= u_opacity;
}
`,Vpe=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;

layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class Hpe extends xn{getUninforms(){const t=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),qe(qe({},t.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const{opacity:t=1,color:r="#000"}=this.layer.getLayerConfig(),n={u_color:pn(r),u_opacity:t||1};return this.getUniformsBufferInfo(n)}initModels(){var t=this;return et(function*(){return t.buildModels()})()}buildModels(){var t=this;return et(function*(){return t.initUniformsBuffer(),[yield t.layer.buildLayerModel({moduleName:"mask",vertexShader:Vpe,fragmentShader:zpe,defines:t.getDefines(),triangulation:n0,depth:{enable:!1},pick:!1})]})()}clearModels(t=!0){t&&this.layerService.clear()}registerBuiltinAttributes(){return""}}const Xpe={fill:Hpe};class T9 extends em{constructor(...t){super(...t),F(this,"type","MaskLayer")}buildModels(){var t=this;return et(function*(){const r=t.getModelType();t.layerModel=new Xpe[r](t),yield t.initLayerModels()})()}getModelType(){return"fill"}}class qpe extends Od{initTileLayer(){var t=this;return et(function*(){const r=t.parent.getLayerAttributeConfig(),n=t.getLayerOptions(),i=t.getSourceOption(),a=new T9(qe({},n)).source(i.data,i.options);r&&Object.keys(r).forEach(o=>{var l,c;const f=o;a[f]((l=r[f])===null||l===void 0?void 0:l.field,(c=r[f])===null||c===void 0?void 0:c.values)}),yield t.addLayer(a),t.isLoaded=!0})()}getFeatures(t){return t?this.sourceTile.data.getTileData(t):[]}getSourceOption(){const t=this.parent.getSource(),{sourceLayer:r,featureId:n}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(r)},options:{parser:{type:"geojson",featureId:n},transforms:t.transforms}}}}const Gpe=["rasterData"];let Wpe=class extends Od{initTileLayer(){var t=this;return et(function*(){const r=t.parent.getLayerAttributeConfig(),n=t.getLayerOptions(),i=t.getSourceOption(),a=new yO(qe({},n)).source(i.data,i.options);r&&Object.keys(r).forEach(o=>{var l,c;const f=o;a[f]((l=r[f])===null||l===void 0?void 0:l.field,(c=r[f])===null||c===void 0?void 0:c.values)}),yield t.addLayer(a),t.isLoaded=!0})()}getSourceOption(){const t=this.parent.getSource(),r=this.sourceTile.data.data,{rasterData:n}=r,i=ml(r,Gpe);return{data:n,options:{parser:qe({type:"rasterRgb",extent:this.sourceTile.bounds},i),transforms:t.transforms}}}};class $pe extends Od{initTileLayer(){var t=this;return et(function*(){const r=t.parent.getLayerAttributeConfig(),n=t.getLayerOptions(),i=t.getSourceOption(),a=new yO(qe({},n)).source(i.data,i.options);r&&Object.keys(r).forEach(o=>{var l,c;const f=o;a[f]((l=r[f])===null||l===void 0?void 0:l.field,(c=r[f])===null||c===void 0?void 0:c.values)}),yield t.addLayer(a),t.isLoaded=!0})()}getSourceOption(){const t=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:t.transforms}}}}const Ype=["rasterData"],Zpe={positions:[0,1],colors:["#000","#fff"]};class Kpe extends Od{constructor(...t){super(...t),F(this,"colorTexture",void 0)}initTileLayer(){var t=this;return et(function*(){const r=t.parent.getLayerAttributeConfig(),n=t.getLayerOptions(),i=t.getSourceOption(),{rampColors:a,domain:o}=t.getLayerOptions();t.colorTexture=t.parent.textureService.getColorTexture(a,o);const l=new yO(qe(qe({},n),{},{colorTexture:t.colorTexture})).source(i.data,i.options);r&&Object.keys(r).forEach(c=>{var f,h;const p=c;l[p]((f=r[p])===null||f===void 0?void 0:f.field,(h=r[p])===null||h===void 0?void 0:h.values)}),yield t.addLayer(l),t.isLoaded=!0})()}getSourceOption(){const t=this.parent.getSource(),r=this.sourceTile.data.data,{rasterData:n}=r,i=ml(r,Ype);return{data:n,options:{parser:qe({type:"raster",extent:this.sourceTile.bounds},i),transforms:t.transforms}}}styleUpdate(...t){const{rampColors:r=Zpe,domain:n}=t;this.colorTexture=this.parent.textureService.getColorTexture(r,n||F3(r)),this.layers.forEach(i=>i.style({colorTexture:this.colorTexture}))}destroy(){this.layers.forEach(t=>t.destroy())}}class oy extends Od{initTileLayer(){var t=this;return et(function*(){const r=t.parent.getLayerAttributeConfig(),n=t.getLayerOptions(),i=Fpe(t.parent.type),a=t.getSourceOption();if(!a){t.isLoaded=!0,t.emit("loaded");return}const o=new i(qe({},n)).source(a.data,a.options);Object.keys(r).forEach(l=>{var c,f;const h=l;o[h]((c=r[h])===null||c===void 0?void 0:c.field,(f=r[h])===null||f===void 0?void 0:f.values)}),yield t.addLayer(o),n.tileMask&&(yield t.addTileMask()),t.setLayerMinMaxZoom(o),t.isLoaded=!0,t.emit("loaded")})()}getSourceOption(){const t=this.parent.getSource(),{sourceLayer:r="defaultLayer",featureId:n="id"}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(r)},options:{parser:{type:"geojson",featureId:n},transforms:t.transforms}}}setLayerMinMaxZoom(t){t.getModelType()==="text"&&t.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}getFeatures(t){return this.sourceTile.data.getTileData(t)}getFeatureById(t){const r=this.getMainLayer();return r?r.getSource().data.dataArray.filter(i=>i._id===t):[]}}function Qpe(e){switch(e.type){case"PolygonLayer":return oy;case"LineLayer":return oy;case"PointLayer":return oy;case"TileDebugLayer":return kpe;case"MaskLayer":return qpe;case"RasterLayer":const{dataType:r}=e.getSource().parser;switch(r){case $i.RGB:case $i.CUSTOMRGB:return Wpe;case $i.ARRAYBUFFER:case $i.CUSTOMARRAYBUFFER:return Kpe;case $i.TERRAINRGB:case $i.CUSTOMTERRAINRGB:return $pe;default:return jpe}default:return oy}}const Jpe=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask","addMask","removeMask"],{debounce:eme}=Un;class tme{constructor(t){F(this,"parent",void 0),F(this,"tileLayerService",void 0),F(this,"mapService",void 0),F(this,"layerService",void 0),F(this,"rendererService",void 0),F(this,"pickingService",void 0),F(this,"tilePickService",void 0),F(this,"tilesetManager",void 0),F(this,"initedTileset",!1),F(this,"lastViewStates",void 0),F(this,"mapchange",()=>{var n;if(this.parent.isVisible()===!1)return;const{latLonBounds:i,zoom:a}=this.getCurrentView();this.lastViewStates&&this.lastViewStates.zoom===a&&this.lastViewStates.latLonBounds.toString()===i.toString()||(this.lastViewStates={zoom:a,latLonBounds:i},(n=this.tilesetManager)===null||n===void 0||n.throttleUpdate(a,i))}),F(this,"viewchange",eme(this.mapchange,24)),this.parent=t;const r=this.parent.getContainer();this.rendererService=r.rendererService,this.layerService=r.layerService,this.mapService=r.mapService,this.pickingService=r.pickingService,this.tileLayerService=new ipe({rendererService:this.rendererService,layerService:this.layerService,parent:t}),this.tilePickService=new Bpe({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:t}),this.parent.setLayerPickService(this.tilePickService),this.proxy(t),this.initTileSetManager()}initTileSetManager(){var t;const r=this.parent.getSource();if(this.tilesetManager=r.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),this.parent.isVisible()===!1)return;const{latLonBounds:n,zoom:i}=this.getCurrentView();(t=this.tilesetManager)===null||t===void 0||t.update(i,n)}getCurrentView(){const t=this.mapService.getBounds(),r=[t[0][0],t[0][1],t[1][0],t[1][1]],n=this.mapService.getZoom();return{latLonBounds:r,zoom:n}}bindTilesetEvent(){this.tilesetManager.on("tile-loaded",t=>{}),this.tilesetManager.on("tile-unload",t=>{this.tileUnLoad(t)}),this.tilesetManager.on("tile-error",(t,r)=>{this.tileError(t)}),this.tilesetManager.on("tile-update",()=>{this.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}render(){this.tileLayerService.render()}getLayers(){return this.tileLayerService.getLayers()}getTiles(){return this.tileLayerService.getTiles()}getTile(t){return this.tileLayerService.getTile(t)}tileLoaded(t){}tileError(t){console.warn("error:",t)}destroy(){var t;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(t=this.tilesetManager)===null||t===void 0||t.destroy(),this.tileLayerService.destroy()}reload(){var t;this.tilesetManager.clear();const{latLonBounds:r,zoom:n}=this.getCurrentView();(t=this.tilesetManager)===null||t===void 0||t.update(n,r)}tileUnLoad(t){this.tileLayerService.removeTile(t.key)}tileUpdate(){var t=this;return et(function*(){if(!t.tilesetManager)return;const r=t.parent.getMinZoom(),n=t.parent.getMaxZoom(),i=t.tilesetManager.tiles.filter(a=>a.isLoaded).filter(a=>a.isVisibleChange).filter(a=>a.data).filter(a=>a.z>=r&&a.z<n);yield Promise.all(i.map((function(){var a=et(function*(o){if(t.tileLayerService.hasTile(o.key))t.tileLayerService.updateTileVisible(o),t.tilePickService.setPickState(),t.layerService.reRender();else{const l=Qpe(t.parent),c=new l(o,t.parent);yield c.initTileLayer(),t.tilePickService.setPickState(),c.getLayers().length!==0&&(t.tileLayerService.addTile(c),t.tileLayerService.updateTileVisible(o),t.layerService.reRender())}});return function(o){return a.apply(this,arguments)}})())),t.tilesetManager.isLoaded&&t.parent.emit("tiles-loaded",t.tilesetManager.currentTiles)})()}setPickState(t){}pickRender(t){this.tilePickService.pickRender(t)}selectFeature(t){this.tilePickService.selectFeature(t)}highlightPickedFeature(t){this.tilePickService.highlightPickedFeature(t)}proxy(t){Jpe.forEach(r=>{const n=t[r].bind(t);t[r]=(...i)=>(n(...i),this.getLayers().map(a=>{a[r](...i)}),r==="style"&&this.getTiles().forEach(a=>a.styleUpdate(...i)),t)})}}class A9 extends Za.EventEmitter{get lngLat(){var t;return(t=this.popupOption.lngLat)!==null&&t!==void 0?t:{lng:0,lat:0}}set lngLat(t){this.popupOption.lngLat=t}constructor(t){super(),F(this,"popupOption",void 0),F(this,"mapsService",void 0),F(this,"sceneService",void 0),F(this,"layerService",void 0),F(this,"scene",void 0),F(this,"closeButton",void 0),F(this,"container",void 0),F(this,"content",void 0),F(this,"contentTitle",void 0),F(this,"contentPanel",void 0),F(this,"tip",void 0),F(this,"isShow",!0),F(this,"onMouseMove",n=>{var i;const a=this.mapsService.getMapContainer(),{left:o=0,top:l=0}=(i=a?.getBoundingClientRect())!==null&&i!==void 0?i:{};this.setPopupPosition(n.clientX-o,n.clientY-l)}),F(this,"updateLngLatPosition",()=>{if(!this.mapsService||this.popupOption.followCursor)return;const{lng:n,lat:i}=this.lngLat,{x:a,y:o}=this.mapsService.lngLatToContainer([n,i]);this.setPopupPosition(a,o)}),F(this,"updateLngLatPositionWhenZoom",n=>{if(!this.mapsService||this.popupOption.followCursor)return;const i=n.map,a=i.getSize();a.x=a.x/2,a.y=a.y/2;const o=n.center,l=n.zoom,c=i.DE(this.lngLat,l,o);c.x=Math.round(c.x),c.y=Math.round(c.y),this.setPopupPosition(c.x,c.y,!0)}),F(this,"onKeyDown",n=>{n.keyCode===27&&this.remove()}),F(this,"onCloseButtonClick",n=>{n.stopPropagation&&n.stopPropagation(),this.hide()}),F(this,"updatePosition",(n,i=!0)=>{const a=!!this.lngLat,{className:o,style:l,maxWidth:c,anchor:f,stopPropagation:h}=this.popupOption;if(!this.mapsService||!a||!this.content)return;const p=this.mapsService.getMarkerContainer();if(!this.container&&p&&(this.container=ui("div",`l7-popup ${o??""} ${this.isShow?"":"l7-popup-hide"}`,p),l&&this.container.setAttribute("style",l),this.tip=ui("div","l7-popup-tip",this.container),this.container.appendChild(this.content),h&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(v=>{this.container.addEventListener(v,g=>{g.stopPropagation()})}),this.container.style.whiteSpace="nowrap"),i?this.updateLngLatPositionWhenZoom(n):this.updateLngLatPosition(),Ute(this.container,`${O2[f]}`),iQ(this.container,f,"popup"),c){const{width:v}=this.container.getBoundingClientRect();v>parseFloat(c)&&(this.container.style.width=c)}else this.container.style.removeProperty("width")}),F(this,"updateWhenZoom",n=>{this.updatePosition(n,!0)}),F(this,"update",()=>{this.updatePosition(null,!1)}),this.popupOption=qe(qe({},this.getDefault(t??{})),t);const{lngLat:r}=this.popupOption;r&&(this.lngLat=r)}getIsShow(){return this.isShow}addTo(t){this.mapsService=t.mapService,this.sceneService=t.sceneService,this.layerService=t.layerService,this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=t,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();const{html:r,text:n,title:i}=this.popupOption;return r?this.setHTML(r):n&&this.setText(n),i&&this.setTitle(i),this.emit("open"),this}remove(){if(this!==null&&this!==void 0&&this.isOpen())return this.content&&nu(this.content),this.container&&(nu(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}getOptions(){return this.popupOption}setOptions(t){this.show();const{className:r}=this.popupOption;if(this.popupOption=qe(qe({},this.popupOption),t),this.checkUpdateOption(t,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","lngLat","offsets"])&&(this.container&&(nu(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(t,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(t,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(t,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(t,["html"])&&t.html?this.setHTML(t.html):this.checkUpdateOption(t,["text"])&&t.text&&this.setText(t.text),this.checkUpdateOption(t,["className"])){var n;r&&this.container.classList.remove(r??""),this.container.classList.add((n=t.className)!==null&&n!==void 0?n:"")}if(this.checkUpdateOption(t,["style"])){var i;xk(this.container,(i=t.style)!==null&&i!==void 0?i:"")}return this.checkUpdateOption(t,["lngLat"])&&t.lngLat&&this.setLnglat(t.lngLat),this}open(){return this.addTo(this.scene),this}close(){return this.remove(),this}show(){if(!this.isShow)return this.container&&n1(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}hide(){if(this.isShow)return this.container&&id(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}setHTML(t){return this.popupOption.html=t,this.setDOMContent(t)}setText(t){return this.popupOption.text=t,this.setDOMContent(window.document.createTextNode(t))}setTitle(t){this.show(),this.popupOption.title=t,t?(this.contentTitle||(this.contentTitle=ui("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),K3(this.contentTitle),$f(this.contentTitle,t)):this.contentTitle&&(nu(this.contentTitle),this.contentTitle=void 0)}panToPopup(){const{lng:t,lat:r}=this.lngLat;return this.popupOption.autoPan&&this.mapsService.panTo([t,r]),this}setLngLat(t){return this.setLnglat(t)}setLnglat(t){return this.show(),this.lngLat=t,Array.isArray(t)&&(this.lngLat={lng:t[0],lat:t[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(()=>{this.panToPopup()},0),this}getLnglat(){return this.lngLat}setMaxWidth(t){return this.popupOption.maxWidth=t,this.update(),this}isOpen(){return!!this.mapsService}getDefault(t){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:L7.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}setDOMContent(t){return this.show(),this.createContent(),$f(this.contentPanel,t),this.update(),this}updateCloseOnClick(t){const r=this.mapsService;r&&(r?.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!t&&requestAnimationFrame(()=>{r?.on("click",this.onCloseButtonClick)}))}updateCloseOnEsc(t){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!t&&window.addEventListener("keydown",this.onKeyDown)}updateFollowCursor(t){var r;const n=(r=this.mapsService)===null||r===void 0?void 0:r.getContainer();n&&(n?.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!t&&n?.addEventListener("mousemove",this.onMouseMove))}createContent(){if(this.content&&nu(this.content),this.contentTitle=void 0,this.content=ui("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){const t=oue("l7-icon-guanbi");id(t,"l7-popup-close-button"),this.content.appendChild(t),this.popupOption.closeButtonOffsets&&(t.style.right=this.popupOption.closeButtonOffsets[0]+"px",t.style.top=this.popupOption.closeButtonOffsets[1]+"px"),t.setAttribute("aria-label","Close popup"),t.addEventListener("click",()=>{this.hide()}),t.addEventListener("pointerup",r=>{r.stopPropagation()}),t.addEventListener("pointerdown",r=>{r.stopPropagation()}),this.closeButton=t}else this.closeButton=void 0;this.contentPanel=ui("div","l7-popup-content__panel",this.content)}setPopupPosition(t,r,n=!1){if(this.container){const{offsets:i}=this.popupOption;this.container.style.left=t+i[0]+"px",this.container.style.top=r-i[1]+"px",n?this.container.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)":this.container.style.transition=""}}checkUpdateOption(t,r){return r.some(n=>n in t)}}const{get:rme}=Un;class nme extends A9{constructor(...t){super(...t),F(this,"layerClickCountByFrame",0),F(this,"layerConfigMap",new WeakMap),F(this,"displayFeatureInfo",void 0),F(this,"onLayerClick",(r,n)=>{requestAnimationFrame(()=>{if(this.popupOption.closeOnClick&&this.layerClickCountByFrame++,this.isShow&&this.isSameFeature(r,n.featureId))this.hide();else{const{title:i,content:a}=this.getLayerInfoFrag(r,n);this.setDOMContent(a),this.setLnglat(n.lngLat),this.setTitle(i),this.setDisplayFeatureInfo({layer:r,featureId:n.featureId}),this.show()}})}),F(this,"onSceneClick",()=>{this.layerClickCountByFrame=0,requestAnimationFrame(()=>{this.layerClickCountByFrame||this.hide()})}),F(this,"onLayerHide",()=>{this.hide(),this.setDisplayFeatureInfo(void 0)}),F(this,"updateCloseOnClick",()=>{})}get layerConfigItems(){var t;const{config:r,items:n}=this.popupOption;return(t=r??n)!==null&&t!==void 0?t:[]}addTo(t){return super.addTo(t),this.bindLayerEvent(),this.hide(),this}remove(){return super.remove(),this.unbindLayerEvent(),this}setOptions(t){this.unbindLayerEvent();const r=qe({},t),n=r.trigger||this.popupOption.trigger,i=r.items||this.popupOption.items,a=i?.length===0;r.followCursor=n==="hover"&&!a;const o=this.isShow;return super.setOptions(r),this.bindLayerEvent(),(a||!o)&&this.hide(),this}getDefault(t){const r=t.trigger!=="click";return qe(qe({},super.getDefault(t)),{},{trigger:"hover",followCursor:r,lngLat:{lng:0,lat:0},offsets:[0,10],closeButton:!1,closeOnClick:!0,autoClose:!1,closeOnEsc:!1})}bindLayerEvent(){const{trigger:t,closeOnClick:r}=this.popupOption;this.layerConfigItems.forEach(n=>{var i;const a=this.getLayerByConfig(n);if(!a)return;const o=qe({},n);if(t==="hover"){const h=this.onLayerMouseMove.bind(this,a),p=this.onLayerMouseOut.bind(this,a);o.onMouseMove=h,o.onMouseOut=p,a?.on("mousemove",h),a?.on("mouseout",p)}else{var l;const h=this.onLayerClick.bind(this,a);o.onClick=h,a?.on("click",h);const p=(l=this.mapsService)===null||l===void 0?void 0:l.getMapContainer();p&&r&&p.addEventListener("click",this.onSceneClick)}const c=a==null||(i=a.getSource)===null||i===void 0?void 0:i.call(a),f=this.onSourceUpdate.bind(this);c?.on("update",f),o.onSourceUpdate=f,this.layerConfigMap.set(a,o)})}unbindLayerEvent(){this.layerConfigItems.forEach(t=>{var r;const n=this.getLayerByConfig(t),i=n&&this.layerConfigMap.get(n);if(!i)return;const{onMouseMove:a,onMouseOut:o,onClick:l,onSourceUpdate:c}=i;if(a&&n.off("mousemove",a),o&&n.off("mouseout",o),l&&n.off("click",l),c){var f;n==null||(f=n.getSource())===null||f===void 0||f.off("update",c)}const h=(r=this.mapsService)===null||r===void 0?void 0:r.getMapContainer();h&&h.removeEventListener("click",this.onSceneClick)})}onLayerMouseMove(t,r){if(!this.isSameFeature(t,r.featureId)){const{title:n,content:i}=this.getLayerInfoFrag(t,r);this.setDOMContent(i),this.setTitle(n),this.setDisplayFeatureInfo({layer:t,featureId:r.featureId}),this.show()}}onLayerMouseOut(t,r){this.setDisplayFeatureInfo(void 0),this.isShow&&this.hide()}onSourceUpdate(){this.hide(),this.setDisplayFeatureInfo(void 0)}getLayerInfoFrag(t,r){const n=this.layerConfigMap.get(t);let i;const a=document.createDocumentFragment();if(n){let o=r.feature;o.type==="Feature"&&"properties"in o&&"geometry"in o&&(o=o.properties);const{title:l,fields:c,customContent:f}=n;if(l){i=document.createDocumentFragment();const h=l instanceof Function?l(o):l;$f(i,h)}if(f){const h=f instanceof Function?f(o):f;$f(a,h)}else c!=null&&c.length&&c?.forEach(h=>{var p,v;const{field:g,formatField:_,formatValue:E,getValue:b}=typeof h=="string"?{field:h}:h,S=ui("div","l7-layer-popup__row"),T=b?b(r.feature):rme(o,g),C=(p=_ instanceof Function?_(g,o):_)!==null&&p!==void 0?p:g;let M=(v=E instanceof Function?E(T,o):E)!==null&&v!==void 0?v:T;const D=ui("span","l7-layer-popup__key",S);$f(D,C),$f(D,document.createTextNode("："));const I=ui("span","l7-layer-popup__value",S);Array.isArray(M)&&M.every(N=>!(N instanceof Object))&&(M=M.map(N=>String(N)).join(",")),$f(I,M),a.appendChild(S)})}return{title:i,content:a}}getLayerByConfig(t){const r=t.layer;if(r instanceof Object)return r;if(typeof r=="string")return this.layerService.getLayer(r)||this.layerService.getLayerByName(r)}isSameFeature(t,r){const n=this.displayFeatureInfo;return n&&t===n.layer&&r===n.featureId}setDisplayFeatureInfo(t){const r=this.displayFeatureInfo;r&&r.layer.off("hide",this.onLayerHide),t&&t.layer.on("hide",this.onLayerHide),this.displayFeatureInfo=t}}function ime(e,t){var r=typeof my<"u"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,n=typeof wx<"u"&&wx!==null&&(typeof wx.request<"u"||typeof wx.miniProgram<"u");if(!(r||n)&&(t||(t=document),!!t)){var i=t.head||t.getElementsByTagName("head")[0];if(!i){i=t.createElement("head");var a=t.body||t.getElementsByTagName("body")[0];a?a.parentNode.insertBefore(i,a):t.documentElement.appendChild(i)}var o=t.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),i.appendChild(o),o}}ime(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font:
    12px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  box-sizing: border-box;
}
.l7-control-container {
  font:
    12px/1.5 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: flex;
  justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  align-items: flex-end;
}
.l7-control-container .l7-column {
  flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 6px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  align-items: flex-start;
}
.l7-popper.l7-popper-end {
  align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: flex;
  align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow-x: hidden;
  overflow-y: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: flex;
  flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  flex-direction: column;
  justify-content: center;
  box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: flex;
  flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: flex;
  align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  touch-action: none;
}
.l7-control-swipe_hide {
  display: none;
}
.l7-control-swipe:before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}
.l7-control-swipe.horizontal:before {
  top: 50%;
  right: -5000px;
  bottom: auto;
  left: -5000px;
  width: auto;
  height: 4px;
}
.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}
.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}
.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}
.l7-control-swipe:after,
.l7-control-swipe__button:before,
.l7-control-swipe__button:after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentColor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}
.l7-control-swipe__button:after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}
.l7-control-swipe__button:before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);class ame{constructor(t){F(this,"configService",void 0),F(this,"config",void 0),this.config=t}setContainer(t,r){this.configService=t.globalConfigService,t.mapConfig=qe(qe({},this.config),{},{id:r}),t.mapService=new(this.getServiceConstructor())(t)}getServiceConstructor(){throw new Error("Method not implemented.")}}var wy={exports:{}},ome=wy.exports,C6;function sme(){return C6||(C6=1,(function(e,t){(function(r,n){e.exports=n()})(ome,function(){function r(p){var v=[];return p.AMapUI&&v.push(n(p.AMapUI)),p.Loca&&v.push(i(p.Loca)),Promise.all(v)}function n(p){return new Promise(function(v,g){var _=[];if(p.plugins)for(var E=0;E<p.plugins.length;E+=1)o.AMapUI.plugins.indexOf(p.plugins[E])==-1&&_.push(p.plugins[E]);if(l.AMapUI===a.failed)g("前次请求 AMapUI 失败");else if(l.AMapUI===a.notload){l.AMapUI=a.loading,o.AMapUI.version=p.version||o.AMapUI.version,E=o.AMapUI.version;var b=document.body||document.head,S=document.createElement("script");S.type="text/javascript",S.src="https://webapi.amap.com/ui/"+E+"/main.js",S.onerror=function(T){l.AMapUI=a.failed,g("请求 AMapUI 失败")},S.onload=function(){if(l.AMapUI=a.loaded,_.length)window.AMapUI.loadUI(_,function(){for(var T=0,C=_.length;T<C;T++){var M=_[T].split("/").slice(-1)[0];window.AMapUI[M]=arguments[T]}for(v();c.AMapUI.length;)c.AMapUI.splice(0,1)[0]()});else for(v();c.AMapUI.length;)c.AMapUI.splice(0,1)[0]()},b.appendChild(S)}else l.AMapUI===a.loaded?p.version&&p.version!==o.AMapUI.version?g("不允许多个版本 AMapUI 混用"):_.length?window.AMapUI.loadUI(_,function(){for(var T=0,C=_.length;T<C;T++){var M=_[T].split("/").slice(-1)[0];window.AMapUI[M]=arguments[T]}v()}):v():p.version&&p.version!==o.AMapUI.version?g("不允许多个版本 AMapUI 混用"):c.AMapUI.push(function(T){T?g(T):_.length?window.AMapUI.loadUI(_,function(){for(var C=0,M=_.length;C<M;C++){var D=_[C].split("/").slice(-1)[0];window.AMapUI[D]=arguments[C]}v()}):v()})})}function i(p){return new Promise(function(v,g){if(l.Loca===a.failed)g("前次请求 Loca 失败");else if(l.Loca===a.notload){l.Loca=a.loading,o.Loca.version=p.version||o.Loca.version;var _=o.Loca.version,E=o.AMap.version.startsWith("2"),b=_.startsWith("2");if(E&&!b||!E&&b)g("JSAPI 与 Loca 版本不对应！！");else{E=o.key,b=document.body||document.head;var S=document.createElement("script");S.type="text/javascript",S.src="https://webapi.amap.com/loca?v="+_+"&key="+E,S.onerror=function(T){l.Loca=a.failed,g("请求 AMapUI 失败")},S.onload=function(){for(l.Loca=a.loaded,v();c.Loca.length;)c.Loca.splice(0,1)[0]()},b.appendChild(S)}}else l.Loca===a.loaded?p.version&&p.version!==o.Loca.version?g("不允许多个版本 Loca 混用"):v():p.version&&p.version!==o.Loca.version?g("不允许多个版本 Loca 混用"):c.Loca.push(function(T){T?g(T):g()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var a;(function(p){p.notload="notload",p.loading="loading",p.loaded="loaded",p.failed="failed"})(a||(a={}));var o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},c={AMapUI:[],Loca:[]},f=[],h=function(p){typeof p=="function"&&(l.AMap===a.loaded?p(window.AMap):f.push(p))};return{load:function(p){return new Promise(function(v,g){if(l.AMap==a.failed)g("");else if(l.AMap==a.notload){var _=p.key,E=p.version,b=p.plugins;_?(window.AMap&&location.host!=="lbs.amap.com"&&g("禁止多种API加载方式混用"),o.key=_,o.AMap.version=E||o.AMap.version,o.AMap.plugins=b||o.AMap.plugins,l.AMap=a.loading,E=document.body||document.head,window.___onAPILoaded=function(T){if(delete window.___onAPILoaded,T)l.AMap=a.failed,g(T);else for(l.AMap=a.loaded,r(p).then(function(){v(window.AMap)}).catch(g);f.length;)f.splice(0,1)[0]()},b=document.createElement("script"),b.type="text/javascript",b.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+o.AMap.version+"&key="+_+"&plugin="+o.AMap.plugins.join(","),b.onerror=function(T){l.AMap=a.failed,g(T)},E.appendChild(b)):g("请填写key")}else if(l.AMap==a.loaded)if(p.key&&p.key!==o.key)g("多个不一致的 key");else if(p.version&&p.version!==o.AMap.version)g("不允许多个版本 JSAPI 混用");else{if(_=[],p.plugins)for(E=0;E<p.plugins.length;E+=1)o.AMap.plugins.indexOf(p.plugins[E])==-1&&_.push(p.plugins[E]);_.length?window.AMap.plugin(_,function(){r(p).then(function(){v(window.AMap)}).catch(g)}):r(p).then(function(){v(window.AMap)}).catch(g)}else if(p.key&&p.key!==o.key)g("多个不一致的 key");else if(p.version&&p.version!==o.AMap.version)g("不允许多个版本 JSAPI 混用");else{var S=[];if(p.plugins)for(E=0;E<p.plugins.length;E+=1)o.AMap.plugins.indexOf(p.plugins[E])==-1&&S.push(p.plugins[E]);h(function(){S.length?window.AMap.plugin(S,function(){r(p).then(function(){v(window.AMap)}).catch(g)}):r(p).then(function(){v(window.AMap)}).catch(g)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},c={AMap:[],AMapUI:[],Loca:[]}}}})})(wy)),wy.exports}var lme=sme();const ume=Kr(lme);class cme{constructor(t){F(this,"size",1e4),this.size=t||1e4}setSize(t){this.size=t}getSize(){return[this.size,this.size]}mercatorXfromLng(t){return(180+t)/360*this.size}mercatorYfromLat(t){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360)*this.size}lngFromMercatorX(t){return t/this.size*360-180}latFromMercatorY(t){const r=180-(1-t/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90}project(t){const r=this.mercatorXfromLng(t[0]),n=this.mercatorYfromLat(t[1]);return[r,n]}unproject(t){const r=this.lngFromMercatorX(t[0]),n=this.latFromMercatorY(t[1]);return[r,n]}}const fme=12;class dme{constructor(t){F(this,"map",void 0),F(this,"simpleMapCoord",new cme),F(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),F(this,"config",void 0),F(this,"configService",void 0),F(this,"coordinateSystemService",void 0),F(this,"eventEmitter",void 0),F(this,"markerContainer",void 0),F(this,"mapContainer",void 0),F(this,"cameraChangedCallback",void 0),this.config=t.mapConfig,this.configService=t.globalConfigService,this.coordinateSystemService=t.coordinateSystemService,this.eventEmitter=new Za.EventEmitter}onCameraChanged(t){this.cameraChangedCallback=t}updateView(t){var r;this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:t.bearing,center:t.center,viewportHeight:t.viewportHeight,pitch:t.pitch,viewportWidth:t.viewportWidth,zoom:t.zoom}),this.updateCoordinateSystemService(),(r=this.cameraChangedCallback)===null||r===void 0||r.call(this,this.viewport)}updateCoordinateSystemService(){const{offsetCoordinate:t=!0}=this.config;this.viewport.getZoom()>fme&&t?this.coordinateSystemService.setCoordinateSystem(s1.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(s1.LNGLAT)}creatMapContainer(t){let r;return typeof t=="string"?r=document.getElementById(t):r=t,r}getMapStyleValue(t){var r;return(r=this.getMapStyleConfig()[t])!==null&&r!==void 0?r:t}setBgColor(t){this.bgColor=t}getMapContainer(){return this.mapContainer}getMarkerContainer(){return this.markerContainer}getOverlayContainer(){}getCanvasOverlays(){}emit(t,...r){this.eventEmitter.emit(t,...r)}once(t,r){this.eventEmitter.once(t,r)}meterToCoord(t,r){return 1}destroy(){this.eventEmitter.removeAllListeners()}}function R9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hme(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gk(n.key),n)}}function C9(e,t,r){return t&&hme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sg(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pme(e,t){if(t&&(Cp(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sg(e)}function dC(e){return dC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dC(e)}function hC(e,t){return hC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},hC(e,t)}function mme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hC(e,t)}function vme(e){if(Array.isArray(e))return e}function gme(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,o,l=[],c=!0,f=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){f=!0,i=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(f)throw i}}return l}}function O6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _me(e,t){if(e){if(typeof e=="string")return O6(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O6(e,t):void 0}}function yme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uo(e,t){return vme(e)||gme(e,t)||_me(e,t)||yme()}function yg(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ny(e,t){var r=iO([],t,e);return Qie(r,r,1/r[3]),r}function _d(e,t){if(!e)throw new Error(t||"viewport-mercator-project: assertion failed.")}var Es=Math.PI,O9=Es/4,jc=Es/180,w6=180/Es,bO=512,N6=4003e4,Eme=1.5;function w9(e){return Math.pow(2,e)}function HR(e,t){var r=Uo(e,2),n=r[0],i=r[1];_d(Number.isFinite(n)&&Number.isFinite(t)),_d(Number.isFinite(i)&&i>=-90&&i<=90,"invalid latitude"),t*=bO;var a=n*jc,o=i*jc,l=t*(a+Es)/(2*Es),c=t*(Es-Math.log(Math.tan(O9+o*.5)))/(2*Es);return[l,c]}function M6(e,t){var r=Uo(e,2),n=r[0],i=r[1];t*=bO;var a=n/t*(2*Es)-Es,o=2*(Math.atan(Math.exp(Es-i/t*(2*Es)))-O9);return[a*w6,o*w6]}function bme(e){var t=e.latitude,r=e.longitude,n=e.zoom,i=e.scale,a=e.highPrecision,o=a===void 0?!1:a;i=i!==void 0?i:w9(n),_d(Number.isFinite(t)&&Number.isFinite(r)&&Number.isFinite(i));var l={},c=bO*i,f=Math.cos(t*jc),h=c/360,p=h/f,v=c/N6/f;if(l.pixelsPerMeter=[v,-v,v],l.metersPerPixel=[1/v,-1/v,1/v],l.pixelsPerDegree=[h,-p,v],l.degreesPerPixel=[1/h,-1/p,1/v],o){var g=jc*Math.tan(t*jc)/f,_=h*g/2,E=c/N6*g,b=E/p*v;l.pixelsPerDegree2=[0,-_,E],l.pixelsPerMeter2=[b,0,b]}return l}function xme(e){var t=e.height,r=e.pitch,n=e.bearing,i=e.altitude,a=e.center,o=a===void 0?null:a,l=yg();return l1(l,l,[0,0,-i]),u1(l,l,[1,1,1/t]),nO(l,l,-r*jc),Kk(l,l,n*jc),u1(l,l,[1,-1,1]),o&&l1(l,l,$ie([],o)),l}function Sme(e){var t=e.width,r=e.height,n=e.altitude,i=n===void 0?Eme:n,a=e.pitch,o=a===void 0?0:a,l=e.nearZMultiplier,c=l===void 0?1:l,f=e.farZMultiplier,h=f===void 0?1:f,p=o*jc,v=Math.atan(.5/i),g=Math.sin(v)*i/Math.sin(Math.PI/2-p-v),_=Math.cos(Math.PI/2-p)*g+i;return{fov:2*Math.atan(r/2/i),aspect:t/r,focalDistance:i,near:c,far:_*h}}function Tme(e){var t=e.width,r=e.height,n=e.pitch,i=e.altitude,a=e.nearZMultiplier,o=e.farZMultiplier,l=Sme({width:t,height:r,altitude:i,pitch:n,nearZMultiplier:a,farZMultiplier:o}),c=l.fov,f=l.aspect,h=l.near,p=l.far,v=Gie([],c,f,h,p);return v}function Ame(e,t){var r=Uo(e,3),n=r[0],i=r[1],a=r[2],o=a===void 0?0:a;return _d(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(o)),Ny(t,[n,i,o,1])}function N9(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=Uo(e,3),i=n[0],a=n[1],o=n[2];if(_d(Number.isFinite(i)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(o)){var l=Ny(t,[i,a,o,1]);return l}var c=Ny(t,[i,a,0,1]),f=Ny(t,[i,a,1,1]),h=c[2],p=f[2],v=h===p?0:((r||0)-h)/(p-h);return tae([],c,f,v)}var I6=yg(),Rme=(function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width,n=t.height,i=t.viewMatrix,a=i===void 0?I6:i,o=t.projectionMatrix,l=o===void 0?I6:o;R9(this,e),this.width=r||1,this.height=n||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=a,this.projectionMatrix=l;var c=yg();vp(c,c,this.projectionMatrix),vp(c,c,this.viewMatrix),this.viewProjectionMatrix=c;var f=yg();u1(f,f,[this.width/2,-this.height/2,1]),l1(f,f,[1,-1,0]),vp(f,f,this.viewProjectionMatrix);var h=Yk(yg(),f);if(!h)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=h,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return C9(e,[{key:"equals",value:function(r){return r instanceof e?r.width===this.width&&r.height===this.height&&oL(r.projectionMatrix,this.projectionMatrix)&&oL(r.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.topLeft,a=i===void 0?!0:i,o=this.projectPosition(r),l=Ame(o,this.pixelProjectionMatrix),c=Uo(l,2),f=c[0],h=c[1],p=a?h:this.height-h;return r.length===2?[f,p]:[f,p,l[2]]}},{key:"unproject",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.topLeft,a=i===void 0?!0:i,o=n.targetZ,l=Uo(r,3),c=l[0],f=l[1],h=l[2],p=a?f:this.height-f,v=o&&o*this.pixelsPerMeter,g=N9([c,p,h],this.pixelUnprojectionMatrix,v),_=this.unprojectPosition(g),E=Uo(_,3),b=E[0],S=E[1],T=E[2];return Number.isFinite(h)?[b,S,T]:Number.isFinite(o)?[b,S,o]:[b,S]}},{key:"projectPosition",value:function(r){var n=this.projectFlat(r),i=Uo(n,2),a=i[0],o=i[1],l=(r[2]||0)*this.pixelsPerMeter;return[a,o,l]}},{key:"unprojectPosition",value:function(r){var n=this.unprojectFlat(r),i=Uo(n,2),a=i[0],o=i[1],l=(r[2]||0)/this.pixelsPerMeter;return[a,o,l]}},{key:"projectFlat",value:function(r){return arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale,r}},{key:"unprojectFlat",value:function(r){return arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale,r}}]),e})();function Cme(e){var t=e.width,r=e.height,n=e.bounds,i=e.minExtent,a=i===void 0?0:i,o=e.maxZoom,l=o===void 0?24:o,c=e.padding,f=c===void 0?0:c,h=e.offset,p=h===void 0?[0,0]:h,v=Uo(n,2),g=Uo(v[0],2),_=g[0],E=g[1],b=Uo(v[1],2),S=b[0],T=b[1];if(Number.isFinite(f)){var C=f;f={top:C,bottom:C,left:C,right:C}}else _d(Number.isFinite(f.top)&&Number.isFinite(f.bottom)&&Number.isFinite(f.left)&&Number.isFinite(f.right));var M=new pC({width:t,height:r,longitude:0,latitude:0,zoom:0}),D=M.project([_,T]),I=M.project([S,E]),N=[Math.max(Math.abs(I[0]-D[0]),a),Math.max(Math.abs(I[1]-D[1]),a)],j=[t-f.left-f.right-Math.abs(p[0])*2,r-f.top-f.bottom-Math.abs(p[1])*2];_d(j[0]>0&&j[1]>0);var re=j[0]/N[0],Q=j[1]/N[1],X=(f.right-f.left)/2/re,R=(f.bottom-f.top)/2/Q,P=[(I[0]+D[0])/2+X,(I[1]+D[1])/2+R],V=M.unproject(P),le=M.zoom+Math.log2(Math.abs(Math.min(re,Q)));return{longitude:V[0],latitude:V[1],zoom:Math.min(le,l)}}var pC=(function(e){mme(t,e);function t(){var r,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.width,a=n.height,o=n.latitude,l=o===void 0?0:o,c=n.longitude,f=c===void 0?0:c,h=n.zoom,p=h===void 0?0:h,v=n.pitch,g=v===void 0?0:v,_=n.bearing,E=_===void 0?0:_,b=n.altitude,S=b===void 0?1.5:b,T=n.nearZMultiplier,C=n.farZMultiplier;R9(this,t),i=i||1,a=a||1;var M=w9(p);S=Math.max(.75,S);var D=HR([f,l],M);D[2]=0;var I=Tme({width:i,height:a,pitch:g,altitude:S,nearZMultiplier:T||1/a,farZMultiplier:C||1.01}),N=xme({height:a,center:D,pitch:g,bearing:E,altitude:S});return r=pme(this,dC(t).call(this,{width:i,height:a,viewMatrix:N,projectionMatrix:I})),r.latitude=l,r.longitude=f,r.zoom=p,r.pitch=g,r.bearing=E,r.altitude=S,r.scale=M,r.center=D,r.pixelsPerMeter=bme(sg(sg(r))).pixelsPerMeter[2],Object.freeze(sg(sg(r))),r}return C9(t,[{key:"projectFlat",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return HR(n,i)}},{key:"unprojectFlat",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return M6(n,i)}},{key:"getMapCenterByLngLatPosition",value:function(n){var i=n.lngLat,a=n.pos,o=N9(a,this.pixelUnprojectionMatrix),l=HR(i,this.scale),c=Rc([],l,eae([],o)),f=Rc([],this.center,c);return M6(f,this.scale)}},{key:"getLocationAtPoint",value:function(n){var i=n.lngLat,a=n.pos;return this.getMapCenterByLngLatPosition({lngLat:i,pos:a})}},{key:"fitBounds",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.width,o=this.height,l=Cme(Object.assign({width:a,height:o,bounds:n},i)),c=l.longitude,f=l.latitude,h=l.zoom;return new t({width:a,height:o,longitude:c,latitude:f,zoom:h})}}]),t})(Rme);class Ome{constructor(){F(this,"viewport",new pC)}syncWithMapCamera(t){const{center:r,zoom:n,pitch:i,bearing:a,viewportHeight:o,viewportWidth:l}=t,c={width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing};this.viewport=new pC(qe(qe({},c),{},{width:l,height:o,longitude:r&&r[0],latitude:r&&r[1],zoom:n,pitch:i,bearing:a}))}getZoom(){return this.viewport.zoom}getZoomScale(){return Math.pow(2,this.getZoom())}getCenter(){return[this.viewport.longitude,this.viewport.latitude]}getProjectionMatrix(){return this.viewport.projectionMatrix}getModelMatrix(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}getViewMatrix(){return this.viewport.viewMatrix}getViewMatrixUncentered(){return this.viewport.viewMatrixUncentered}getViewProjectionMatrix(){return this.viewport.viewProjectionMatrix}getViewProjectionMatrixUncentered(){return this.viewport.viewProjectionMatrix}getFocalDistance(){return 1}projectFlat(t,r){return this.viewport.projectFlat(t,r)}}let wme=(function(e){return e.GAODE="GAODE",e.MAPBOX="MAPBOX",e.DEFAULT="DEFAUlTMAP",e.SIMPLE="SIMPLE",e.GLOBEL="GLOBEL",e})({});function P6(e={}){const t={top:0,right:0,bottom:0,left:0};if(typeof e=="number")return{top:e,right:e,bottom:e,left:e};if(Array.isArray(e)){if(e.length===4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]}}return qe(qe({},t),e)}const Nme={normal:"amap://styles/normal",light:"amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",dark:"amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true",fresh:"amap://styles/fresh",grey:"amap://styles/grey",graffiti:"amap://styles/graffiti",macaron:"amap://styles/macaron",darkblue:"amap://styles/darkblue",wine:"amap://styles/wine"},Mme=["id","style","minZoom","maxZoom","token","mapInstance","plugin"];function Ime(e,t){var r=typeof my<"u"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,n=typeof wx<"u"&&wx!==null&&(typeof wx.request<"u"||typeof wx.miniProgram<"u");if(!(r||n)&&(t||(t=document),!!t)){var i=t.head||t.getElementsByTagName("head")[0];if(!i){i=t.createElement("head");var a=t.body||t.getElementsByTagName("body")[0];a?a.parentNode.insertBefore(i,a):t.documentElement.appendChild(i)}var o=t.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),i.appendChild(o),o}}Ime(`.amap-logo {
  display: none !important;
}

.amap-copyright {
  display: none !important;
}

.amap-overlays {
  z-index: 3 !important;
}
`);const Pme="2.0",D6="f59bcf249433f8b05caaee19f349b3d7",Gf=1;window.forceWebGL=!0;const L6={contextmenu:"rightclick",camerachange:"viewchange"};class Dme extends dme{constructor(...t){super(...t),F(this,"viewport",new Ome),F(this,"version",wme.GAODE),F(this,"handleCameraChanged",()=>{const r=this.getViewState();this.updateView(r)})}getType(){return"amap"}init(){var t=this;return et(function*(){const r=t.config,{id:n,style:i="light",minZoom:a=0,maxZoom:o=24,token:l=D6,mapInstance:c,plugin:f=[]}=r,h=ml(r,Mme);if(window.AMap||c||(f.push("Map3D"),yield ume.load({key:l,version:Pme,plugins:f})),c)t.map=c,t.mapContainer=t.map.getContainer(),t.map.on("viewchange",t.handleCameraChanged);else{const p=qe({mapStyle:t.getMapStyleValue(i),zooms:[a,o],viewMode:"3D"},h);if(p.zoom&&(p.zoom+=Gf),l===D6&&(window._AMapSecurityConfig={securityJsCode:"2653011adeb04230b3a26cc9a780a800"},console.warn(`%c${t.configService.getSceneWarninfo("MapToken")}!`,"color: #873bf4;font-weigh:900;font-size: 16px;")),!n)throw Error("No container id specified");window.forceWebGL=!0,t.mapContainer=t.creatMapContainer(n);const v=new AMap.Map(t.mapContainer,p);t.map=v,v.on("viewchange",t.handleCameraChanged)}t.syncInitViewPort()})()}syncInitViewPort(){const t=this.getViewState();this.updateView(t)}getViewState(){const{center:t,zoom:r}=Lme(this.map);return{center:t,viewportWidth:this.map.getContainer().clientWidth,viewportHeight:this.map.getContainer().clientHeight,bearing:-this.map.getRotation(),pitch:this.map.getPitch(),zoom:r-Gf}}creatMapContainer(t){const r=super.creatMapContainer(t),n=document.createElement("div");return n.style.cssText+=`
       position: absolute;
       top: 0;
       height: 100%;
       width: 100%;
     `,n.id=Un.uniqueId("l7_amap_div"),r.appendChild(n),n}getContainer(){return this.map.getContainer()}addMarkerContainer(){if(!this.map)return;const t=this.map.getContainer();if(t!==null){const r=t.getElementsByClassName("amap-maps")[0];r.style.zIndex="auto",this.markerContainer=ui("div","l7-marker-container2",r)}}getMarkerContainer(){return this.markerContainer}getCanvasOverlays(){var t;return(t=this.mapContainer)===null||t===void 0?void 0:t.querySelector(".amap-overlays")}on(t,r){KD.indexOf(t)!==-1?this.eventEmitter.on(t,r):this.map.on(L6[t]||t,r)}off(t,r){KD.indexOf(t)!==-1?this.eventEmitter.off(t,r):this.map.off(L6[t]||t,r)}getSize(){const t=this.map.getSize();return[t.getWidth(),t.getHeight()]}getMinZoom(){return this.map.getZooms()[0]-Gf}getMaxZoom(){return this.map.getZooms()[1]-Gf}getZoom(){return this.map.getZoom()-Gf}getCenter(t){if(t!=null&&t.padding){const n=this.getCenter(),i=P6(t.padding),a=this.lngLatToPixel([n.lng,n.lat]),o=[(i.right-i.left)/2,(i.bottom-i.top)/2];return this.pixelToLngLat([a.x-o[0],a.y-o[1]])}const r=this.map.getCenter();return{lng:r.getLng(),lat:r.getLat()}}getPitch(){return this.map.getPitch()}getRotation(){return 360-this.map.getRotation()}getBounds(){const t=this.map.getBounds(),r=t.getNorthEast(),n=t.getSouthWest(),i=this.getCenter(),a=i.lng>r.getLng()||i.lng<n.getLng()?180-r.getLng():r.getLng();return[[i.lng<n.getLng()?n.getLng()-180:n.getLng(),n.getLat()],[a,r.getLat()]]}getMapContainer(){return this.mapContainer}getMapCanvasContainer(){var t;return(t=this.map.getContainer())===null||t===void 0?void 0:t.getElementsByClassName("amap-maps")[0]}getMapStyleConfig(){return Nme}getMapStyleValue(t){return this.getMapStyleConfig()[t]||t}getMapStyle(){return this.map.getMapStyle()}setMapStyle(t){this.map.setMapStyle(this.getMapStyleValue(t))}setRotation(t){return this.map.setRotation(t)}zoomIn(){this.map.zoomIn()}zoomOut(){this.map.zoomOut()}panTo(t){this.map.panTo(t)}panBy(t=0,r=0){this.map.panBy(t,r)}fitBounds(t){this.map.setBounds(new AMap.Bounds([t[0][0],t[0][1],t[1][0],t[1][1]]),!0)}setZoomAndCenter(t,r){this.map.setZoomAndCenter(t+Gf,r)}setCenter(t,r){if(r!=null&&r.padding){const n=P6(r.padding),i=this.lngLatToPixel(t),a=[(n.right-n.left)/2,(n.bottom-n.top)/2],o=this.pixelToLngLat([i.x+a[0],i.y+a[1]]);this.map.setCenter([o.lng,o.lat])}else this.map.setCenter(t)}setPitch(t){return this.map.setPitch(t)}setZoom(t){return this.map.setZoom(t+Gf)}setMaxZoom(t){throw new Error("Method not implemented.")}setMinZoom(t){throw new Error("Method not implemented.")}setMapStatus(t){this.map.setStatus(t)}meterToCoord(t,r){const n=AMap.GeometryUtil.distance(new AMap.LngLat(...t),new AMap.LngLat(...r)),[i,a]=JA(...t),[o,l]=JA(...r);return Math.sqrt(Math.pow(i-o,2)+Math.pow(a-l,2))/n}pixelToLngLat(t){const r=this.map.pixelToLngLat(new AMap.Pixel(t[0],t[1]));return{lng:r.getLng(),lat:r.getLat()}}lngLatToPixel(t){const r=this.map.lnglatToPixel(t);return{x:r.getX(),y:r.getY()}}containerToLngLat(t){const r=new AMap.Pixel(t[0],t[1]),n=this.map.containerToLngLat(r);return{lng:n?.getLng(),lat:n?.getLat()}}lngLatToContainer(t){const r=this.map.lngLatToContainer(t);return{x:r.getX(),y:r.getY()}}lngLatToMercator([t,r],n){const[i,a]=JA(t,r);return{x:i,y:a,z:n}}getModelMatrix(t,r,n,i=[1,1,1]){const a=this.viewport.projectFlat(t),o=rO();return l1(o,o,vs(a[0],a[1],r)),u1(o,o,vs(i[0],i[1],i[2])),nO(o,o,n[0]),Zk(o,o,n[1]),Kk(o,o,n[2]),o}exportMap(t){var r;const n=(r=this.getContainer())===null||r===void 0?void 0:r.getElementsByClassName("amap-layer")[0];return t==="jpg"?n?.toDataURL("image/jpeg"):n?.toDataURL("image/png")}destroy(){var t;super.destroy(),(t=this.mapContainer)===null||t===void 0||(t=t.parentNode)===null||t===void 0||t.removeChild(this.mapContainer),delete window.initAMap;const r=document.getElementById("amap-script");r&&document.head.removeChild(r),this.map.destroy()}}function Lme(e){const t=e._view.getOptions(),r=t.center,n=t.zoom;return{center:r,zoom:n}}class Bme extends ame{getServiceConstructor(){return Dme}}const Fme=Bme;function jo(e){return e==null}var Ume=function(e,t,r){return e<t?t:e>r?r:e};function ap(e){return typeof e=="number"}var mC=function(e,t){return mC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},mC(e,t)};function kn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");mC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Pn=function(){return Pn=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Pn.apply(this,arguments)};function kme(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function gp(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(h){try{f(n.next(h))}catch(p){o(p)}}function c(h){try{f(n.throw(h))}catch(p){o(p)}}function f(h){h.done?a(h.value):i(h.value).then(l,c)}f((n=n.apply(e,t||[])).next())})}function _p(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(f){return function(h){return c([f,h])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(r=0)),r;)try{if(n=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){r.label=f[1];break}if(f[0]===6&&r.label<a[1]){r.label=a[1],a=f;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(f);break}a[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(h){f=[6,h],i=0}finally{n=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function yd(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ms(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function kv(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var XR={exports:{}},B6;function jme(){return B6||(B6=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,f,h){this.fn=c,this.context=f,this.once=h||!1}function a(c,f,h,p,v){if(typeof h!="function")throw new TypeError("The listener must be a function");var g=new i(h,p||c,v),_=r?r+f:f;return c._events[_]?c._events[_].fn?c._events[_]=[c._events[_],g]:c._events[_].push(g):(c._events[_]=g,c._eventsCount++),c}function o(c,f){--c._eventsCount===0?c._events=new n:delete c._events[f]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var f=[],h,p;if(this._eventsCount===0)return f;for(p in h=this._events)t.call(h,p)&&f.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},l.prototype.listeners=function(f){var h=r?r+f:f,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var v=0,g=p.length,_=new Array(g);v<g;v++)_[v]=p[v].fn;return _},l.prototype.listenerCount=function(f){var h=r?r+f:f,p=this._events[h];return p?p.fn?1:p.length:0},l.prototype.emit=function(f,h,p,v,g,_){var E=r?r+f:f;if(!this._events[E])return!1;var b=this._events[E],S=arguments.length,T,C;if(b.fn){switch(b.once&&this.removeListener(f,b.fn,void 0,!0),S){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,h),!0;case 3:return b.fn.call(b.context,h,p),!0;case 4:return b.fn.call(b.context,h,p,v),!0;case 5:return b.fn.call(b.context,h,p,v,g),!0;case 6:return b.fn.call(b.context,h,p,v,g,_),!0}for(C=1,T=new Array(S-1);C<S;C++)T[C-1]=arguments[C];b.fn.apply(b.context,T)}else{var M=b.length,D;for(C=0;C<M;C++)switch(b[C].once&&this.removeListener(f,b[C].fn,void 0,!0),S){case 1:b[C].fn.call(b[C].context);break;case 2:b[C].fn.call(b[C].context,h);break;case 3:b[C].fn.call(b[C].context,h,p);break;case 4:b[C].fn.call(b[C].context,h,p,v);break;default:if(!T)for(D=1,T=new Array(S-1);D<S;D++)T[D-1]=arguments[D];b[C].fn.apply(b[C].context,T)}}return!0},l.prototype.on=function(f,h,p){return a(this,f,h,p,!1)},l.prototype.once=function(f,h,p){return a(this,f,h,p,!0)},l.prototype.removeListener=function(f,h,p,v){var g=r?r+f:f;if(!this._events[g])return this;if(!h)return o(this,g),this;var _=this._events[g];if(_.fn)_.fn===h&&(!v||_.once)&&(!p||_.context===p)&&o(this,g);else{for(var E=0,b=[],S=_.length;E<S;E++)(_[E].fn!==h||v&&!_[E].once||p&&_[E].context!==p)&&b.push(_[E]);b.length?this._events[g]=b.length===1?b[0]:b:o(this,g)}return this},l.prototype.removeAllListeners=function(f){var h;return f?(h=r?r+f:f,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(XR)),XR.exports}var zme=jme();const M9=Kr(zme);var ne;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",e[e.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.CULL_FACE=2884]="CULL_FACE",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.BLEND=3042]="BLEND",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.DITHER=3024]="DITHER",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DOUBLE=5130]="DOUBLE",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.ALWAYS=519]="ALWAYS",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.GEQUAL=518]="GEQUAL",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",e[e.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.READ_BUFFER=3074]="READ_BUFFER",e[e.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",e[e.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",e[e.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",e[e.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",e[e.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",e[e.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",e[e.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",e[e.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",e[e.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",e[e.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",e[e.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",e[e.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",e[e.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",e[e.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",e[e.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",e[e.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",e[e.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",e[e.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",e[e.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",e[e.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",e[e.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",e[e.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",e[e.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",e[e.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",e[e.RED=6403]="RED",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB10_A2=32857]="RGB10_A2",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",e[e.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",e[e.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",e[e.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",e[e.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",e[e.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",e[e.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",e[e.SRGB=35904]="SRGB",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",e[e.RGBA32F=34836]="RGBA32F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.RGB16F=34843]="RGB16F",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R16F=33325]="R16F",e[e.R32F=33326]="R32F",e[e.RG16F=33327]="RG16F",e[e.RG32F=33328]="RG32F",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2UI=36975]="RGB10_A2UI",e[e.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",e[e.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.RG=33319]="RG",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",e[e.CURRENT_QUERY=34917]="CURRENT_QUERY",e[e.QUERY_RESULT=34918]="QUERY_RESULT",e[e.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",e[e.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",e[e.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",e[e.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",e[e.DRAW_BUFFER0=34853]="DRAW_BUFFER0",e[e.DRAW_BUFFER1=34854]="DRAW_BUFFER1",e[e.DRAW_BUFFER2=34855]="DRAW_BUFFER2",e[e.DRAW_BUFFER3=34856]="DRAW_BUFFER3",e[e.DRAW_BUFFER4=34857]="DRAW_BUFFER4",e[e.DRAW_BUFFER5=34858]="DRAW_BUFFER5",e[e.DRAW_BUFFER6=34859]="DRAW_BUFFER6",e[e.DRAW_BUFFER7=34860]="DRAW_BUFFER7",e[e.DRAW_BUFFER8=34861]="DRAW_BUFFER8",e[e.DRAW_BUFFER9=34862]="DRAW_BUFFER9",e[e.DRAW_BUFFER10=34863]="DRAW_BUFFER10",e[e.DRAW_BUFFER11=34864]="DRAW_BUFFER11",e[e.DRAW_BUFFER12=34865]="DRAW_BUFFER12",e[e.DRAW_BUFFER13=34866]="DRAW_BUFFER13",e[e.DRAW_BUFFER14=34867]="DRAW_BUFFER14",e[e.DRAW_BUFFER15=34868]="DRAW_BUFFER15",e[e.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",e[e.MAX_SAMPLES=36183]="MAX_SAMPLES",e[e.SAMPLER_BINDING=35097]="SAMPLER_BINDING",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",e[e.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",e[e.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",e[e.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",e[e.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",e[e.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",e[e.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",e[e.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",e[e.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",e[e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",e[e.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",e[e.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",e[e.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",e[e.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",e[e.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",e[e.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",e[e.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",e[e.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",e[e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",e[e.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",e[e.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",e[e.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",e[e.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",e[e.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",e[e.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",e[e.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",e[e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",e[e.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",e[e.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",e[e.UNIFORM_TYPE=35383]="UNIFORM_TYPE",e[e.UNIFORM_SIZE=35384]="UNIFORM_SIZE",e[e.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",e[e.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",e[e.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",e[e.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",e[e.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",e[e.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",e[e.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",e[e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",e[e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS",e[e.SYNC_FENCE=37142]="SYNC_FENCE",e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED",e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED",e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",e[e.COLOR=6144]="COLOR",e[e.DEPTH=6145]="DEPTH",e[e.STENCIL=6146]="STENCIL",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STREAM_COPY=35042]="STREAM_COPY",e[e.STATIC_READ=35045]="STATIC_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",e[e.INVALID_INDEX=4294967295]="INVALID_INDEX",e[e.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",e[e.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",e[e.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",e[e.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",e[e.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",e[e.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",e[e.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",e[e.RGBA32F_EXT=34836]="RGBA32F_EXT",e[e.RGB32F_EXT=34837]="RGB32F_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",e[e.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.SRGB_EXT=35904]="SRGB_EXT",e[e.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",e[e.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",e[e.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",e[e.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",e[e.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",e[e.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",e[e.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",e[e.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",e[e.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",e[e.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",e[e.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",e[e.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",e[e.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",e[e.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",e[e.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",e[e.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",e[e.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",e[e.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",e[e.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",e[e.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",e[e.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",e[e.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",e[e.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",e[e.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",e[e.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",e[e.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",e[e.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",e[e.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",e[e.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",e[e.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",e[e.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",e[e.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",e[e.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",e[e.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",e[e.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",e[e.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",e[e.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",e[e.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",e[e.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",e[e.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",e[e.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",e[e.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",e[e.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",e[e.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"})(ne||(ne={}));var qr;(function(e){e[e.Buffer=0]="Buffer",e[e.Texture=1]="Texture",e[e.RenderTarget=2]="RenderTarget",e[e.Sampler=3]="Sampler",e[e.Program=4]="Program",e[e.Bindings=5]="Bindings",e[e.InputLayout=6]="InputLayout",e[e.RenderPipeline=7]="RenderPipeline",e[e.ComputePipeline=8]="ComputePipeline",e[e.Readback=9]="Readback",e[e.QueryPool=10]="QueryPool",e[e.RenderBundle=11]="RenderBundle"})(qr||(qr={}));var Zr;(function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"})(Zr||(Zr={}));var zg;(function(e){e[e.CCW=2305]="CCW",e[e.CW=2304]="CW"})(zg||(zg={}));var qa;(function(e){e[e.NONE=0]="NONE",e[e.FRONT=1]="FRONT",e[e.BACK=2]="BACK",e[e.FRONT_AND_BACK=3]="FRONT_AND_BACK"})(qa||(qa={}));var Cr;(function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC=768]="SRC",e[e.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",e[e.DST=774]="DST",e[e.ONE_MINUS_DST=775]="ONE_MINUS_DST",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.CONST=32769]="CONST",e[e.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(Cr||(Cr={}));var Ni;(function(e){e[e.ADD=32774]="ADD",e[e.SUBSTRACT=32778]="SUBSTRACT",e[e.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX"})(Ni||(Ni={}));var Oa;(function(e){e[e.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",e[e.REPEAT=1]="REPEAT",e[e.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"})(Oa||(Oa={}));var Wn;(function(e){e[e.POINT=0]="POINT",e[e.BILINEAR=1]="BILINEAR"})(Wn||(Wn={}));var yi;(function(e){e[e.NO_MIP=0]="NO_MIP",e[e.NEAREST=1]="NEAREST",e[e.LINEAR=2]="LINEAR"})(yi||(yi={}));var ii;(function(e){e[e.POINTS=0]="POINTS",e[e.TRIANGLES=1]="TRIANGLES",e[e.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",e[e.LINES=3]="LINES",e[e.LINE_STRIP=4]="LINE_STRIP"})(ii||(ii={}));var fn;(function(e){e[e.MAP_READ=1]="MAP_READ",e[e.MAP_WRITE=2]="MAP_WRITE",e[e.COPY_SRC=4]="COPY_SRC",e[e.COPY_DST=8]="COPY_DST",e[e.INDEX=16]="INDEX",e[e.VERTEX=32]="VERTEX",e[e.UNIFORM=64]="UNIFORM",e[e.STORAGE=128]="STORAGE",e[e.INDIRECT=256]="INDIRECT",e[e.QUERY_RESOLVE=512]="QUERY_RESOLVE"})(fn||(fn={}));var Ss;(function(e){e[e.STATIC=1]="STATIC",e[e.DYNAMIC=2]="DYNAMIC"})(Ss||(Ss={}));var Ed;(function(e){e[e.VERTEX=1]="VERTEX",e[e.INSTANCE=2]="INSTANCE"})(Ed||(Ed={}));var F6;(function(e){e.LOADED="loaded"})(F6||(F6={}));var Or;(function(e){e[e.TEXTURE_2D=0]="TEXTURE_2D",e[e.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",e[e.TEXTURE_3D=2]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"})(Or||(Or={}));var ha;(function(e){e[e.SAMPLED=1]="SAMPLED",e[e.RENDER_TARGET=2]="RENDER_TARGET",e[e.STORAGE=4]="STORAGE"})(ha||(ha={}));var Ci;(function(e){e[e.NONE=0]="NONE",e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA",e[e.RGB=7]="RGB",e[e.ALL=15]="ALL"})(Ci||(Ci={}));var Bn;(function(e){e[e.KEEP=7680]="KEEP",e[e.ZERO=0]="ZERO",e[e.REPLACE=7681]="REPLACE",e[e.INVERT=5386]="INVERT",e[e.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",e[e.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",e[e.INCREMENT_WRAP=34055]="INCREMENT_WRAP",e[e.DECREMENT_WRAP=34056]="DECREMENT_WRAP"})(Bn||(Bn={}));var Ln;(function(e){e[e.Float=0]="Float",e[e.UnfilterableFloat=1]="UnfilterableFloat",e[e.Uint=2]="Uint",e[e.Sint=3]="Sint",e[e.Depth=4]="Depth"})(Ln||(Ln={}));var bs;(function(e){e[e.LOWER_LEFT=0]="LOWER_LEFT",e[e.UPPER_LEFT=1]="UPPER_LEFT"})(bs||(bs={}));var Mp;(function(e){e[e.NEGATIVE_ONE=0]="NEGATIVE_ONE",e[e.ZERO=1]="ZERO"})(Mp||(Mp={}));var w1;(function(e){e[e.OcclusionConservative=0]="OcclusionConservative"})(w1||(w1={}));var Qe;(function(e){e[e.U8=1]="U8",e[e.U16=2]="U16",e[e.U32=3]="U32",e[e.S8=4]="S8",e[e.S16=5]="S16",e[e.S32=6]="S32",e[e.F16=7]="F16",e[e.F32=8]="F32",e[e.BC1=65]="BC1",e[e.BC2=66]="BC2",e[e.BC3=67]="BC3",e[e.BC4_UNORM=68]="BC4_UNORM",e[e.BC4_SNORM=69]="BC4_SNORM",e[e.BC5_UNORM=70]="BC5_UNORM",e[e.BC5_SNORM=71]="BC5_SNORM",e[e.U16_PACKED_5551=97]="U16_PACKED_5551",e[e.U16_PACKED_565=98]="U16_PACKED_565",e[e.D24=129]="D24",e[e.D32F=130]="D32F",e[e.D24S8=131]="D24S8",e[e.D32FS8=132]="D32FS8"})(Qe||(Qe={}));var Ft;(function(e){e[e.R=1]="R",e[e.RG=2]="RG",e[e.RGB=3]="RGB",e[e.RGBA=4]="RGBA",e[e.A=5]="A"})(Ft||(Ft={}));var wt;(function(e){e[e.None=0]="None",e[e.Normalized=1]="Normalized",e[e.sRGB=2]="sRGB",e[e.Depth=4]="Depth",e[e.Stencil=8]="Stencil",e[e.RenderTarget=16]="RenderTarget",e[e.Luminance=32]="Luminance"})(wt||(wt={}));function Wt(e,t,r){return e<<16|t<<8|r}var ve;(function(e){e[e.ALPHA=Wt(Qe.U8,Ft.A,wt.None)]="ALPHA",e[e.U8_LUMINANCE=Wt(Qe.U8,Ft.A,wt.Luminance)]="U8_LUMINANCE",e[e.F16_LUMINANCE=Wt(Qe.F16,Ft.A,wt.Luminance)]="F16_LUMINANCE",e[e.F32_LUMINANCE=Wt(Qe.F32,Ft.A,wt.Luminance)]="F32_LUMINANCE",e[e.F16_R=Wt(Qe.F16,Ft.R,wt.None)]="F16_R",e[e.F16_RG=Wt(Qe.F16,Ft.RG,wt.None)]="F16_RG",e[e.F16_RGB=Wt(Qe.F16,Ft.RGB,wt.None)]="F16_RGB",e[e.F16_RGBA=Wt(Qe.F16,Ft.RGBA,wt.None)]="F16_RGBA",e[e.F32_R=Wt(Qe.F32,Ft.R,wt.None)]="F32_R",e[e.F32_RG=Wt(Qe.F32,Ft.RG,wt.None)]="F32_RG",e[e.F32_RGB=Wt(Qe.F32,Ft.RGB,wt.None)]="F32_RGB",e[e.F32_RGBA=Wt(Qe.F32,Ft.RGBA,wt.None)]="F32_RGBA",e[e.U8_R=Wt(Qe.U8,Ft.R,wt.None)]="U8_R",e[e.U8_R_NORM=Wt(Qe.U8,Ft.R,wt.Normalized)]="U8_R_NORM",e[e.U8_RG=Wt(Qe.U8,Ft.RG,wt.None)]="U8_RG",e[e.U8_RG_NORM=Wt(Qe.U8,Ft.RG,wt.Normalized)]="U8_RG_NORM",e[e.U8_RGB=Wt(Qe.U8,Ft.RGB,wt.None)]="U8_RGB",e[e.U8_RGB_NORM=Wt(Qe.U8,Ft.RGB,wt.Normalized)]="U8_RGB_NORM",e[e.U8_RGB_SRGB=Wt(Qe.U8,Ft.RGB,wt.sRGB|wt.Normalized)]="U8_RGB_SRGB",e[e.U8_RGBA=Wt(Qe.U8,Ft.RGBA,wt.None)]="U8_RGBA",e[e.U8_RGBA_NORM=Wt(Qe.U8,Ft.RGBA,wt.Normalized)]="U8_RGBA_NORM",e[e.U8_RGBA_SRGB=Wt(Qe.U8,Ft.RGBA,wt.sRGB|wt.Normalized)]="U8_RGBA_SRGB",e[e.U16_R=Wt(Qe.U16,Ft.R,wt.None)]="U16_R",e[e.U16_R_NORM=Wt(Qe.U16,Ft.R,wt.Normalized)]="U16_R_NORM",e[e.U16_RG_NORM=Wt(Qe.U16,Ft.RG,wt.Normalized)]="U16_RG_NORM",e[e.U16_RGBA_NORM=Wt(Qe.U16,Ft.RGBA,wt.Normalized)]="U16_RGBA_NORM",e[e.U16_RGBA=Wt(Qe.U16,Ft.RGBA,wt.None)]="U16_RGBA",e[e.U16_RGB=Wt(Qe.U16,Ft.RGB,wt.None)]="U16_RGB",e[e.U16_RG=Wt(Qe.U16,Ft.RG,wt.None)]="U16_RG",e[e.U32_R=Wt(Qe.U32,Ft.R,wt.None)]="U32_R",e[e.U32_RG=Wt(Qe.U32,Ft.RG,wt.None)]="U32_RG",e[e.U32_RGB=Wt(Qe.U32,Ft.RGB,wt.None)]="U32_RGB",e[e.U32_RGBA=Wt(Qe.U32,Ft.RGBA,wt.None)]="U32_RGBA",e[e.S8_R=Wt(Qe.S8,Ft.R,wt.None)]="S8_R",e[e.S8_R_NORM=Wt(Qe.S8,Ft.R,wt.Normalized)]="S8_R_NORM",e[e.S8_RG_NORM=Wt(Qe.S8,Ft.RG,wt.Normalized)]="S8_RG_NORM",e[e.S8_RGB_NORM=Wt(Qe.S8,Ft.RGB,wt.Normalized)]="S8_RGB_NORM",e[e.S8_RGBA_NORM=Wt(Qe.S8,Ft.RGBA,wt.Normalized)]="S8_RGBA_NORM",e[e.S16_R=Wt(Qe.S16,Ft.R,wt.None)]="S16_R",e[e.S16_RG=Wt(Qe.S16,Ft.RG,wt.None)]="S16_RG",e[e.S16_RG_NORM=Wt(Qe.S16,Ft.RG,wt.Normalized)]="S16_RG_NORM",e[e.S16_RGB_NORM=Wt(Qe.S16,Ft.RGB,wt.Normalized)]="S16_RGB_NORM",e[e.S16_RGBA=Wt(Qe.S16,Ft.RGBA,wt.None)]="S16_RGBA",e[e.S16_RGBA_NORM=Wt(Qe.S16,Ft.RGBA,wt.Normalized)]="S16_RGBA_NORM",e[e.S32_R=Wt(Qe.S32,Ft.R,wt.None)]="S32_R",e[e.S32_RG=Wt(Qe.S32,Ft.RG,wt.None)]="S32_RG",e[e.S32_RGB=Wt(Qe.S32,Ft.RGB,wt.None)]="S32_RGB",e[e.S32_RGBA=Wt(Qe.S32,Ft.RGBA,wt.None)]="S32_RGBA",e[e.U16_RGBA_5551=Wt(Qe.U16_PACKED_5551,Ft.RGBA,wt.Normalized)]="U16_RGBA_5551",e[e.U16_RGB_565=Wt(Qe.U16_PACKED_565,Ft.RGB,wt.Normalized)]="U16_RGB_565",e[e.BC1=Wt(Qe.BC1,Ft.RGBA,wt.Normalized)]="BC1",e[e.BC1_SRGB=Wt(Qe.BC1,Ft.RGBA,wt.Normalized|wt.sRGB)]="BC1_SRGB",e[e.BC2=Wt(Qe.BC2,Ft.RGBA,wt.Normalized)]="BC2",e[e.BC2_SRGB=Wt(Qe.BC2,Ft.RGBA,wt.Normalized|wt.sRGB)]="BC2_SRGB",e[e.BC3=Wt(Qe.BC3,Ft.RGBA,wt.Normalized)]="BC3",e[e.BC3_SRGB=Wt(Qe.BC3,Ft.RGBA,wt.Normalized|wt.sRGB)]="BC3_SRGB",e[e.BC4_UNORM=Wt(Qe.BC4_UNORM,Ft.R,wt.Normalized)]="BC4_UNORM",e[e.BC4_SNORM=Wt(Qe.BC4_SNORM,Ft.R,wt.Normalized)]="BC4_SNORM",e[e.BC5_UNORM=Wt(Qe.BC5_UNORM,Ft.RG,wt.Normalized)]="BC5_UNORM",e[e.BC5_SNORM=Wt(Qe.BC5_SNORM,Ft.RG,wt.Normalized)]="BC5_SNORM",e[e.D24=Wt(Qe.D24,Ft.R,wt.Depth)]="D24",e[e.D24_S8=Wt(Qe.D24S8,Ft.RG,wt.Depth|wt.Stencil)]="D24_S8",e[e.D32F=Wt(Qe.D32F,Ft.R,wt.Depth)]="D32F",e[e.D32F_S8=Wt(Qe.D32FS8,Ft.RG,wt.Depth|wt.Stencil)]="D32F_S8",e[e.U8_RGB_RT=Wt(Qe.U8,Ft.RGB,wt.RenderTarget|wt.Normalized)]="U8_RGB_RT",e[e.U8_RGBA_RT=Wt(Qe.U8,Ft.RGBA,wt.RenderTarget|wt.Normalized)]="U8_RGBA_RT",e[e.U8_RGBA_RT_SRGB=Wt(Qe.U8,Ft.RGBA,wt.RenderTarget|wt.Normalized|wt.sRGB)]="U8_RGBA_RT_SRGB"})(ve||(ve={}));function xO(e){return e>>>8&255}function gl(e){return e>>>16&255}function Ip(e){return e&255}function I9(e){switch(e){case Qe.F32:case Qe.U32:case Qe.S32:return 4;case Qe.U16:case Qe.S16:case Qe.F16:return 2;case Qe.U8:case Qe.S8:return 1;default:throw new Error("whoops")}}function P9(e){return I9(gl(e))}function Vme(e){var t=I9(gl(e)),r=xO(e);return t*r}function D9(e){var t=Ip(e);if(t&wt.Depth)return Ln.Depth;if(t&wt.Normalized)return Ln.Float;var r=gl(e);if(r===Qe.F16||r===Qe.F32)return Ln.Float;if(r===Qe.U8||r===Qe.U16||r===Qe.U32)return Ln.Uint;if(r===Qe.S8||r===Qe.S16||r===Qe.S32)return Ln.Sint;throw new Error("whoops")}function gr(e,t){if(t===void 0&&(t=""),!e)throw new Error("Assert fail: ".concat(t))}function Kf(e){if(e!=null)return e;throw new Error("Missing object")}function L9(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}function B9(e,t){e.r=t.r,e.g=t.g,e.b=t.b,e.a=t.a}function F9(e){var t=e.r,r=e.g,n=e.b,i=e.a;return{r:t,g:r,b:n,a:i}}function a0(e,t,r,n){return n===void 0&&(n=1),{r:e,g:t,b:r,a:n}}var wE=a0(0,0,0,0);a0(0,0,0,1);var Hme=a0(1,1,1,0);a0(1,1,1,1);function N1(e){return!!(e&&(e&e-1)===0)}function yc(e,t){return e??t}function Xme(e){return e===void 0?null:e}function M1(e,t){var r=t-1;return e+r&~r}function qme(e,t){for(var r=new Array(e),n=0;n<e;n++)r[n]=t();return r}function Gme(e,t){t===void 0&&(t=1);var r=e.split(`
`);return r.map(function(n,i){return"".concat(Wme(""+(t+i),4," "),"  ").concat(n)}).join(`
`)}function Wme(e,t,r){for(;e.length<t;)e="".concat(r).concat(e);return e}function U6(e,t){e.blendDstFactor=t.blendDstFactor,e.blendSrcFactor=t.blendSrcFactor,e.blendMode=t.blendMode}function I1(e,t){return e===void 0&&(e={}),e.compare=t.compare,e.depthFailOp=t.depthFailOp,e.passOp=t.passOp,e.failOp=t.failOp,e.mask=t.mask,e}function U9(e,t){return e===void 0&&(e={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),U6(e.rgbBlendState,t.rgbBlendState),U6(e.alphaBlendState,t.alphaBlendState),e.channelWriteMask=t.channelWriteMask,e}function k9(e,t){e.length!==t.length&&(e.length=t.length);for(var r=0;r<t.length;r++)e[r]=U9(e[r],t[r])}function $me(e,t){t.attachmentsState!==void 0&&k9(e.attachmentsState,t.attachmentsState),e.blendConstant&&t.blendConstant&&B9(e.blendConstant,t.blendConstant),e.depthCompare=yc(t.depthCompare,e.depthCompare),e.depthWrite=yc(t.depthWrite,e.depthWrite),e.stencilWrite=yc(t.stencilWrite,e.stencilWrite),e.stencilFront&&t.stencilFront&&I1(e.stencilFront,t.stencilFront),e.stencilBack&&t.stencilBack&&I1(e.stencilBack,t.stencilBack),e.cullMode=yc(t.cullMode,e.cullMode),e.frontFace=yc(t.frontFace,e.frontFace),e.polygonOffset=yc(t.polygonOffset,e.polygonOffset),e.polygonOffsetFactor=yc(t.polygonOffsetFactor,e.polygonOffsetFactor),e.polygonOffsetUnits=yc(t.polygonOffsetUnits,e.polygonOffsetUnits)}function Pp(e){var t=Object.assign({},e);return t.attachmentsState=[],k9(t.attachmentsState,e.attachmentsState),t.blendConstant=t.blendConstant&&F9(t.blendConstant),t.stencilFront=I1(void 0,e.stencilFront),t.stencilBack=I1(void 0,e.stencilBack),t}var k6={blendMode:Ni.ADD,blendSrcFactor:Cr.ONE,blendDstFactor:Cr.ZERO},Dp={attachmentsState:[{channelWriteMask:Ci.ALL,rgbBlendState:k6,alphaBlendState:k6}],blendConstant:F9(wE),depthWrite:!0,depthCompare:Zr.LEQUAL,stencilWrite:!1,stencilFront:{compare:Zr.ALWAYS,passOp:Bn.KEEP,depthFailOp:Bn.KEEP,failOp:Bn.KEEP},stencilBack:{compare:Zr.ALWAYS,passOp:Bn.KEEP,depthFailOp:Bn.KEEP,failOp:Bn.KEEP},cullMode:qa.NONE,frontFace:zg.CCW,polygonOffset:!1,polygonOffsetFactor:0,polygonOffsetUnits:0};function Yme(e,t){e===void 0&&(e=null),t===void 0&&(t=Dp);var r=Pp(t);return e!==null&&$me(r,e),r}Yme({depthCompare:Zr.ALWAYS,depthWrite:!1},Dp);var j9={texture:null,sampler:null,formatKind:Ln.Float,dimension:Or.TEXTURE_2D};function Ic(e,t,r){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}function op(e,t){for(var r=Array(e.length),n=0;n<e.length;n++)r[n]=t(e[n]);return r}function Zme(e,t){return e.texture===t.texture&&e.binding===t.binding}function j6(e,t){return e.buffer===t.buffer&&e.size===t.size&&e.binding===t.binding&&e.offset===t.offset}function Kme(e,t){return e===null?t===null:t===null?!1:e.sampler===t.sampler&&e.texture===t.texture&&e.dimension===t.dimension&&e.formatKind===t.formatKind&&e.comparison===t.comparison}function Qme(e,t){return e.samplerBindings=e.samplerBindings||[],e.uniformBufferBindings=e.uniformBufferBindings||[],e.storageBufferBindings=e.storageBufferBindings||[],e.storageTextureBindings=e.storageTextureBindings||[],t.samplerBindings=t.samplerBindings||[],t.uniformBufferBindings=t.uniformBufferBindings||[],t.storageBufferBindings=t.storageBufferBindings||[],t.storageTextureBindings=t.storageTextureBindings||[],!(e.samplerBindings.length!==t.samplerBindings.length||!Ic(e.samplerBindings,t.samplerBindings,Kme)||!Ic(e.uniformBufferBindings,t.uniformBufferBindings,j6)||!Ic(e.storageBufferBindings,t.storageBufferBindings,j6)||!Ic(e.storageTextureBindings,t.storageTextureBindings,Zme))}function z6(e,t){return e.blendMode==t.blendMode&&e.blendSrcFactor===t.blendSrcFactor&&e.blendDstFactor===t.blendDstFactor}function Jme(e,t){return!(!z6(e.rgbBlendState,t.rgbBlendState)||!z6(e.alphaBlendState,t.alphaBlendState)||e.channelWriteMask!==t.channelWriteMask)}function P1(e,t){return e.compare==t.compare&&e.depthFailOp===t.depthFailOp&&e.failOp===t.failOp&&e.passOp===t.passOp&&e.mask===t.mask}function eve(e,t){return!Ic(e.attachmentsState,t.attachmentsState,Jme)||e.blendConstant&&t.blendConstant&&!L9(e.blendConstant,t.blendConstant)||e.stencilFront&&t.stencilFront&&!P1(e.stencilFront,t.stencilFront)||e.stencilBack&&t.stencilBack&&!P1(e.stencilBack,t.stencilBack)?!1:e.depthCompare===t.depthCompare&&e.depthWrite===t.depthWrite&&e.stencilWrite===t.stencilWrite&&e.cullMode===t.cullMode&&e.frontFace===t.frontFace&&e.polygonOffset===t.polygonOffset&&e.polygonOffsetFactor===t.polygonOffsetFactor&&e.polygonOffsetUnits===t.polygonOffsetUnits}function z9(e,t){return e.id===t.id}function tve(e,t){return e===t}function rve(e,t){return!(e.topology!==t.topology||e.inputLayout!==t.inputLayout||e.sampleCount!==t.sampleCount||e.megaStateDescriptor&&t.megaStateDescriptor&&!eve(e.megaStateDescriptor,t.megaStateDescriptor)||!z9(e.program,t.program)||!Ic(e.colorAttachmentFormats,t.colorAttachmentFormats,tve)||e.depthStencilAttachmentFormat!==t.depthStencilAttachmentFormat)}function nve(e,t){return e.offset===t.offset&&e.shaderLocation===t.shaderLocation&&e.format===t.format&&e.divisor===t.divisor}function ive(e,t){return jo(e)?jo(t):jo(t)?!1:e.arrayStride===t.arrayStride&&e.stepMode===t.stepMode&&Ic(e.attributes,t.attributes,nve)}function ave(e,t){return!(e.indexBufferFormat!==t.indexBufferFormat||!Ic(e.vertexBufferDescriptors,t.vertexBufferDescriptors,ive)||!z9(e.program,t.program))}function ove(e){var t=e.sampler,r=e.texture,n=e.dimension,i=e.formatKind,a=e.comparison;return{sampler:t,texture:r,dimension:n,formatKind:i,comparison:a}}function V6(e){var t=e.buffer,r=e.size,n=e.binding,i=e.offset;return{binding:n,buffer:t,offset:i,size:r}}function sve(e){var t=e.binding,r=e.texture;return{binding:t,texture:r}}function lve(e){var t=e.samplerBindings&&op(e.samplerBindings,ove),r=e.uniformBufferBindings&&op(e.uniformBufferBindings,V6),n=e.storageBufferBindings&&op(e.storageBufferBindings,V6),i=e.storageTextureBindings&&op(e.storageTextureBindings,sve);return{samplerBindings:t,uniformBufferBindings:r,storageBufferBindings:n,storageTextureBindings:i,pipeline:e.pipeline}}function uve(e){var t=e.inputLayout,r=e.program,n=e.topology,i=e.megaStateDescriptor&&Pp(e.megaStateDescriptor),a=e.colorAttachmentFormats.slice(),o=e.depthStencilAttachmentFormat,l=e.sampleCount;return{inputLayout:t,megaStateDescriptor:i,program:r,topology:n,colorAttachmentFormats:a,depthStencilAttachmentFormat:o,sampleCount:l}}function cve(e){var t=e.shaderLocation,r=e.format,n=e.offset,i=e.divisor;return{shaderLocation:t,format:r,offset:n,divisor:i}}function fve(e){if(jo(e))return e;var t=e.arrayStride,r=e.stepMode,n=op(e.attributes,cve);return{arrayStride:t,stepMode:r,attributes:n}}function dve(e){var t=op(e.vertexBufferDescriptors,fve),r=e.indexBufferFormat,n=e.program;return{vertexBufferDescriptors:t,indexBufferFormat:r,program:n}}var Br,hve=/([^[]*)(\[[0-9]+\])?/;function pve(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};var t=e.match(hve);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:Number(t[2])||1,isArray:!!t[2]}}function Aa(){var e=null;return function(t,r,n){var i=e!==n;return i&&(t.uniform1i(r,n),e=n),i}}function In(e,t,r,n){var i=null,a=null;return function(o,l,c){var f=t(c,r),h=f.length,p=!1;if(i===null)i=new Float32Array(h),a=h,p=!0;else{gr(a===h,"Uniform length cannot change.");for(var v=0;v<h;++v)if(f[v]!==i[v]){p=!0;break}}return p&&(n(o,e,l,f),i.set(f)),p}}function ua(e,t,r,n){e[t](r,n)}function Ql(e,t,r,n){e[t](r,!1,n)}var mve={},vve={},gve={},H6=[0];function SO(e,t,r,n){t===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(H6[0]=e,e=H6);var i=e.length;if(e instanceof r)return e;var a=n[i];a||(a=new r(i),n[i]=a);for(var o=0;o<i;o++)a[o]=e[o];return a}function so(e,t){return SO(e,t,Float32Array,mve)}function Ec(e,t){return SO(e,t,Int32Array,vve)}function sy(e,t){return SO(e,t,Uint32Array,gve)}var _ve=(Br={},Br[ne.FLOAT]=In.bind(null,"uniform1fv",so,1,ua),Br[ne.FLOAT_VEC2]=In.bind(null,"uniform2fv",so,2,ua),Br[ne.FLOAT_VEC3]=In.bind(null,"uniform3fv",so,3,ua),Br[ne.FLOAT_VEC4]=In.bind(null,"uniform4fv",so,4,ua),Br[ne.INT]=In.bind(null,"uniform1iv",Ec,1,ua),Br[ne.INT_VEC2]=In.bind(null,"uniform2iv",Ec,2,ua),Br[ne.INT_VEC3]=In.bind(null,"uniform3iv",Ec,3,ua),Br[ne.INT_VEC4]=In.bind(null,"uniform4iv",Ec,4,ua),Br[ne.BOOL]=In.bind(null,"uniform1iv",Ec,1,ua),Br[ne.BOOL_VEC2]=In.bind(null,"uniform2iv",Ec,2,ua),Br[ne.BOOL_VEC3]=In.bind(null,"uniform3iv",Ec,3,ua),Br[ne.BOOL_VEC4]=In.bind(null,"uniform4iv",Ec,4,ua),Br[ne.FLOAT_MAT2]=In.bind(null,"uniformMatrix2fv",so,4,Ql),Br[ne.FLOAT_MAT3]=In.bind(null,"uniformMatrix3fv",so,9,Ql),Br[ne.FLOAT_MAT4]=In.bind(null,"uniformMatrix4fv",so,16,Ql),Br[ne.UNSIGNED_INT]=In.bind(null,"uniform1uiv",sy,1,ua),Br[ne.UNSIGNED_INT_VEC2]=In.bind(null,"uniform2uiv",sy,2,ua),Br[ne.UNSIGNED_INT_VEC3]=In.bind(null,"uniform3uiv",sy,3,ua),Br[ne.UNSIGNED_INT_VEC4]=In.bind(null,"uniform4uiv",sy,4,ua),Br[ne.FLOAT_MAT2x3]=In.bind(null,"uniformMatrix2x3fv",so,6,Ql),Br[ne.FLOAT_MAT2x4]=In.bind(null,"uniformMatrix2x4fv",so,8,Ql),Br[ne.FLOAT_MAT3x2]=In.bind(null,"uniformMatrix3x2fv",so,6,Ql),Br[ne.FLOAT_MAT3x4]=In.bind(null,"uniformMatrix3x4fv",so,12,Ql),Br[ne.FLOAT_MAT4x2]=In.bind(null,"uniformMatrix4x2fv",so,8,Ql),Br[ne.FLOAT_MAT4x3]=In.bind(null,"uniformMatrix4x3fv",so,12,Ql),Br[ne.SAMPLER_2D]=Aa,Br[ne.SAMPLER_CUBE]=Aa,Br[ne.SAMPLER_3D]=Aa,Br[ne.SAMPLER_2D_SHADOW]=Aa,Br[ne.SAMPLER_2D_ARRAY]=Aa,Br[ne.SAMPLER_2D_ARRAY_SHADOW]=Aa,Br[ne.SAMPLER_CUBE_SHADOW]=Aa,Br[ne.INT_SAMPLER_2D]=Aa,Br[ne.INT_SAMPLER_3D]=Aa,Br[ne.INT_SAMPLER_CUBE]=Aa,Br[ne.INT_SAMPLER_2D_ARRAY]=Aa,Br[ne.UNSIGNED_INT_SAMPLER_2D]=Aa,Br[ne.UNSIGNED_INT_SAMPLER_3D]=Aa,Br[ne.UNSIGNED_INT_SAMPLER_CUBE]=Aa,Br[ne.UNSIGNED_INT_SAMPLER_2D_ARRAY]=Aa,Br);function X6(e,t,r){var n=_ve[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}var yve={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function Eve(e){return Object.prototype.toString.call(e)in yve}function jv(e,t){return"#define ".concat(e," ").concat(t)}function bve(e){var t={};return e.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(r,n,i){var a=Number(i);return t[n]=isNaN(a)?i:a,""}),t}function xve(e,t){var r=[];return e.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(n,i,a){var o=Number(i);return r.push({location:isNaN(o)?t[i]:o,name:a}),""}),r}function q6(e){if(e===void 0)return null;var t=/binding\s*=\s*(\d+)/.exec(e);if(t!==null){var r=parseInt(t[1],10);if(!Number.isNaN(r))return r}return null}function G6(e){var t="",r=e;return[r,t]}function Lp(e,t,r,n,i){var a;n===void 0&&(n=null),i===void 0&&(i=!0);var o=e.glslVersion==="#version 100",l=t==="frag"&&((a=r.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))===null||a===void 0?void 0:a.length)>1,c=r.replace(`\r
`,`
`).split(`
`).map(function(I){return I.replace(/[/][/].*$/,"")}).filter(function(I){var N=!I||/^\s+$/.test(I);return!N}),f="";n!==null&&(f=Object.keys(n).map(function(I){return jv(I,n[I])}).join(`
`));var h=c.find(function(I){return I.startsWith("precision")})||"precision mediump float;",p=i?c.filter(function(I){return!I.startsWith("precision")}).join(`
`):c.join(`
`),v="";if(e.viewportOrigin===bs.UPPER_LEFT&&(v+="".concat(jv("VIEWPORT_ORIGIN_TL","1"),`
`)),e.clipSpaceNearZ===Mp.ZERO&&(v+="".concat(jv("CLIPSPACE_NEAR_ZERO","1"),`
`)),e.explicitBindingLocations){var g=0,_=0,E=0;p=p.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(I,N,j,re){var Q=j?"".concat(j,", "):"";return"layout(".concat(Q,"set = ").concat(g,", binding = ").concat(_++,") uniform ").concat(re)}),g++,_=0,gr(e.separateSamplerTextures),p=p.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(I,N,j,re,Q){var X=q6(j);X===null&&(X=_++);var R=ms(G6(re),2),P=R[0],V=R[1];return t==="frag"?`
layout(set = `.concat(g,", binding = ").concat(X*2+0,") uniform texture").concat(P," T_").concat(Q,`;
layout(set = `).concat(g,", binding = ").concat(X*2+1,") uniform sampler").concat(V," S_").concat(Q,";").trim():""}),p=p.replace(t==="frag"?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(I,N){return"layout(location = ".concat(E++,") ").concat(N)}),v+="".concat(jv("gl_VertexID","gl_VertexIndex"),`
`),v+="".concat(jv("gl_InstanceID","gl_InstanceIndex"),`
`),h=h.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var b=0;p=p.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(I,N,j,re,Q){var X=q6(j);return X===null&&(X=b++),"uniform sampler".concat(re," ").concat(Q,"; // BINDING=").concat(X)})}if(p=p.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g,function(I,N,j){return"SAMPLER_".concat(N,"(P_").concat(j,")")}),p=p.replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g,function(I,N,j){return"PP_SAMPLER_".concat(N,"(P_").concat(j,")")}),p=p.replace(/\bPU_TEXTURE\((.*?)\)/g,function(I,N){return"TEXTURE(P_".concat(N,")")}),e.separateSamplerTextures)p=p.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(I,N,j){var re=ms(G6(N),2),Q=re[0],X=re[1];return"texture".concat(Q," T_P_").concat(j,", sampler").concat(X," S_P_").concat(j)}),p=p.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(I,N,j){return"T_".concat(j,", S_").concat(j)}),p=p.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(I,N,j){return"sampler".concat(N,"(T_").concat(j,", S_").concat(j,")")}),p=p.replace(/\bTEXTURE\((.*?)\)/g,function(I,N){return"T_".concat(N)});else{var S=[];p=p.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(I,N,j){return"sampler".concat(N," P_").concat(j)}),p=p.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(I,N,j){return j}),p=p.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(I,N,j){return S.push([j,N]),j}),o&&S.forEach(function(I){var N=ms(I,2),j=N[0],re=N[1];p=p.replace(new RegExp("texture\\(".concat(j),"g"),function(){return"texture".concat(re,"(").concat(j)})}),p=p.replace(/\bTEXTURE\((.*?)\)/g,function(I,N){return N})}var T="".concat(o?"":e.glslVersion,`
`).concat(o&&l?`#extension GL_EXT_draw_buffers : require
`:"",`
`).concat(o&&t==="frag"?`#extension GL_OES_standard_derivatives : enable
`:"").concat(i?h:"",`
`).concat(v||"").concat(f?f+`
`:"",`
`).concat(p,`
`).trim();if(e.explicitBindingLocations&&t==="frag"&&(T=T.replace(/^\b(out)\b/g,function(I,N){return"layout(location = 0) ".concat(N)})),o){if(t==="frag"&&(T=T.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(I,N,j){return"varying ".concat(N," ").concat(j,`;
`)})),t==="vert"&&(T=T.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(I,N,j){return"varying ".concat(N," ").concat(j,`;
`)}),T=T.replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(I,N,j){return"attribute ".concat(N," ").concat(j,`;
`)})),T=T.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(I,N){return N.trim().replace(/^.*$/gm,function(j){var re=j.trim();return re.startsWith("#")?re:j?"uniform ".concat(re):""})}),t==="frag")if(l){var C=[];T=T.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(I,N){return C.push(N),"vec4 ".concat(N,`;
`)});var M=T.lastIndexOf("}");T=T.substring(0,M)+`
    `.concat(C.map(function(I,N){return"gl_FragData[".concat(N,"] = ").concat(I,`;
    `)}).join(`
`))+T.substring(M)}else{var D;if(T=T.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(I,N,j){return D=j,"".concat(N," ").concat(j,`;
`)}),D){var M=T.lastIndexOf("}");T=T.substring(0,M)+`
  gl_FragColor = vec4(`.concat(D,`);
`)+T.substring(M)}}T=T.replace(/^\s*layout\((.*)\)/gm,"")}return T}var Xo=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=e.call(this)||this;return a.id=n,a.device=i,a.device.resourceCreationTracker!==null&&a.device.resourceCreationTracker.trackResourceCreated(a),a}return t.prototype.destroy=function(){this.device.resourceCreationTracker!==null&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},t})(M9),Sve=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;o.type=qr.Bindings;var l=a.uniformBufferBindings,c=a.samplerBindings;return o.uniformBufferBindings=l||[],o.samplerBindings=c||[],o.bindingLayouts=o.createBindingLayouts(),o}return t.prototype.createBindingLayouts=function(){var r=0,n=0,i=[],a=this.uniformBufferBindings.length,o=this.samplerBindings.length;return i.push({firstUniformBuffer:r,numUniformBuffers:a,firstSampler:n,numSamplers:o}),r+=a,n+=o,{numUniformBuffers:r,numSamplers:n,bindingLayoutTables:i}},t})(Xo),zv;function zt(e){return zv!==void 0?zv:typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?(zv=!0,!0):(zv=!!(e&&e._version===2),zv)}function V9(e){var t=gl(e);switch(t){case Qe.BC1:case Qe.BC2:case Qe.BC3:case Qe.BC4_UNORM:case Qe.BC4_SNORM:case Qe.BC5_UNORM:case Qe.BC5_SNORM:return!0;default:return!1}}function H9(e){var t=Ip(e);if(t&wt.Normalized)return!1;var r=gl(e);return r===Qe.S8||r===Qe.S16||r===Qe.S32||r===Qe.U8||r===Qe.U16||r===Qe.U32}function Tve(e){switch(e){case Ss.STATIC:return ne.STATIC_DRAW;case Ss.DYNAMIC:return ne.DYNAMIC_DRAW}}function W6(e){if(e&fn.INDEX)return ne.ELEMENT_ARRAY_BUFFER;if(e&fn.VERTEX)return ne.ARRAY_BUFFER;if(e&fn.UNIFORM)return ne.UNIFORM_BUFFER}function Ave(e){switch(e){case ii.TRIANGLES:return ne.TRIANGLES;case ii.POINTS:return ne.POINTS;case ii.TRIANGLE_STRIP:return ne.TRIANGLE_STRIP;case ii.LINES:return ne.LINES;case ii.LINE_STRIP:return ne.LINE_STRIP;default:throw new Error("Unknown primitive topology mode")}}function Rve(e){switch(e){case Qe.U8:return ne.UNSIGNED_BYTE;case Qe.U16:return ne.UNSIGNED_SHORT;case Qe.U32:return ne.UNSIGNED_INT;case Qe.S8:return ne.BYTE;case Qe.S16:return ne.SHORT;case Qe.S32:return ne.INT;case Qe.F16:return ne.HALF_FLOAT;case Qe.F32:return ne.FLOAT;default:throw new Error("whoops")}}function Cve(e){switch(e){case Ft.R:return 1;case Ft.RG:return 2;case Ft.RGB:return 3;case Ft.RGBA:return 4;default:return 1}}function Ove(e){var t=gl(e),r=xO(e),n=Ip(e),i=Rve(t),a=Cve(r),o=!!(n&wt.Normalized);return{size:a,type:i,normalized:o}}function wve(e){switch(e){case ve.U8_R:return ne.UNSIGNED_BYTE;case ve.U16_R:return ne.UNSIGNED_SHORT;case ve.U32_R:return ne.UNSIGNED_INT;default:throw new Error("whoops")}}function Vv(e){switch(e){case Oa.CLAMP_TO_EDGE:return ne.CLAMP_TO_EDGE;case Oa.REPEAT:return ne.REPEAT;case Oa.MIRRORED_REPEAT:return ne.MIRRORED_REPEAT;default:throw new Error("whoops")}}function ly(e,t){if(t===yi.LINEAR&&e===Wn.BILINEAR)return ne.LINEAR_MIPMAP_LINEAR;if(t===yi.LINEAR&&e===Wn.POINT)return ne.NEAREST_MIPMAP_LINEAR;if(t===yi.NEAREST&&e===Wn.BILINEAR)return ne.LINEAR_MIPMAP_NEAREST;if(t===yi.NEAREST&&e===Wn.POINT)return ne.NEAREST_MIPMAP_NEAREST;if(t===yi.NO_MIP&&e===Wn.BILINEAR)return ne.LINEAR;if(t===yi.NO_MIP&&e===Wn.POINT)return ne.NEAREST;throw new Error("Unknown texture filter mode")}function yp(e,t){t===void 0&&(t=0);var r=e;return r.gl_buffer_pages[t/r.pageByteSize|0]}function rp(e){var t=e;return t.gl_texture}function vC(e){var t=e;return t.gl_sampler}function Hv(e,t){e.name=t,e.__SPECTOR_Metadata={name:t}}function $6(e,t){for(var r=[];;){var n=t.exec(e);if(!n)break;r.push(n)}return r}function bc(e){return e.blendMode==Ni.ADD&&e.blendSrcFactor==Cr.ONE&&e.blendDstFactor===Cr.ZERO}function Nve(e){switch(e){case w1.OcclusionConservative:return ne.ANY_SAMPLES_PASSED_CONSERVATIVE;default:throw new Error("whoops")}}function Mve(e){if(e===Or.TEXTURE_2D)return ne.TEXTURE_2D;if(e===Or.TEXTURE_2D_ARRAY)return ne.TEXTURE_2D_ARRAY;if(e===Or.TEXTURE_CUBE_MAP)return ne.TEXTURE_CUBE_MAP;if(e===Or.TEXTURE_3D)return ne.TEXTURE_3D;throw new Error("whoops")}function qR(e,t,r,n){return!(e%r!==0||t%n!==0)}var Ive=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;o.type=qr.Buffer;var l=a.viewOrSize,c=a.usage,f=a.hint,h=f===void 0?Ss.STATIC:f,p=i.uniformBufferMaxPageByteSize,v=i.gl,g=c&fn.UNIFORM;g||(zt(v)?v.bindVertexArray(null):i.OES_vertex_array_object.bindVertexArrayOES(null));var _=ap(l)?M1(l,4):M1(l.byteLength,4);o.gl_buffer_pages=[];var E;if(g){for(var b=_;b>0;)o.gl_buffer_pages.push(o.createBufferPage(Math.min(b,p),c,h)),b-=p;E=p}else o.gl_buffer_pages.push(o.createBufferPage(_,c,h)),E=_;return o.pageByteSize=E,o.byteSize=_,o.usage=c,o.gl_target=W6(c),ap(l)||o.setSubData(0,new Uint8Array(l.buffer)),g||(zt(v)?v.bindVertexArray(o.device.currentBoundVAO):i.OES_vertex_array_object.bindVertexArrayOES(o.device.currentBoundVAO)),o}return t.prototype.setSubData=function(r,n,i,a){i===void 0&&(i=0),a===void 0&&(a=n.byteLength-i);for(var o=this.device.gl,l=this.pageByteSize,c=r+a,f=r,h=r%l;f<c;){var p=zt(o)?o.COPY_WRITE_BUFFER:this.gl_target,v=yp(this,f);if(v.ubo)return;o.bindBuffer(p,v),zt(o)?o.bufferSubData(p,h,n,i,Math.min(c-f,l)):o.bufferSubData(p,h,n),f+=l,h=0,i+=l,this.device.debugGroupStatisticsBufferUpload()}},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var r=0;r<this.gl_buffer_pages.length;r++)this.gl_buffer_pages[r].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[r]);this.gl_buffer_pages=[]},t.prototype.createBufferPage=function(r,n,i){var a=this.device.gl,o=n&fn.UNIFORM;if(!zt(a)&&o)return{ubo:!0};var l=this.device.ensureResourceExists(a.createBuffer()),c=W6(n),f=Tve(i);return a.bindBuffer(c,l),a.bufferData(c,r,f),l},t})(Xo),Pve=(function(e){kn(t,e);function t(r){var n,i,a,o,l=r.id,c=r.device,f=r.descriptor,h,p=e.call(this,{id:l,device:c})||this;p.type=qr.InputLayout;var v=f.vertexBufferDescriptors,g=f.indexBufferFormat,_=f.program;gr(g===ve.U16_R||g===ve.U32_R||g===null);var E=g!==null?wve(g):null,b=g!==null?P9(g):null,S=p.device.gl,T=p.device.ensureResourceExists(zt(S)?S.createVertexArray():c.OES_vertex_array_object.createVertexArrayOES());zt(S)?S.bindVertexArray(T):c.OES_vertex_array_object.bindVertexArrayOES(T),S.bindBuffer(S.ARRAY_BUFFER,yp(p.device.fallbackVertexBuffer));try{for(var C=yd(f.vertexBufferDescriptors),M=C.next();!M.done;M=C.next()){var D=M.value,I=D.stepMode,N=D.attributes;try{for(var j=(a=void 0,yd(N)),re=j.next();!re.done;re=j.next()){var Q=re.value,X=Q.shaderLocation,R=Q.format,P=Q.divisor,V=P===void 0?1:P,le=zt(S)?X:(h=_.attributes[X])===null||h===void 0?void 0:h.location,w=Ove(R);if(Q.vertexFormat=w,!jo(le)){H9(R);var z=w.size,H=w.type,ee=w.normalized;S.vertexAttribPointer(le,z,H,ee,0,0),I===Ed.INSTANCE&&(zt(S)?S.vertexAttribDivisor(le,V):c.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(le,V)),S.enableVertexAttribArray(le)}}}catch(oe){a={error:oe}}finally{try{re&&!re.done&&(o=j.return)&&o.call(j)}finally{if(a)throw a.error}}}}catch(oe){n={error:oe}}finally{try{M&&!M.done&&(i=C.return)&&i.call(C)}finally{if(n)throw n.error}}return zt(S)?S.bindVertexArray(null):c.OES_vertex_array_object.bindVertexArrayOES(null),p.vertexBufferDescriptors=v,p.vao=T,p.indexBufferFormat=g,p.indexBufferType=E,p.indexBufferCompByteSize=b,p.program=_,p}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(zt(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},t})(Xo),gC=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=r.fake,l=e.call(this,{id:n,device:i})||this;l.type=qr.Texture,a=Pn({dimension:Or.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},a);var c=l.device.gl,f,h,p=l.clampmipLevelCount(a);if(l.immutable=a.usage===ha.RENDER_TARGET,l.pixelStore=a.pixelStore,l.format=a.format,l.dimension=a.dimension,l.formatKind=D9(a.format),l.width=a.width,l.height=a.height,l.depthOrArrayLayers=a.depthOrArrayLayers,l.mipmaps=p>=1,!o){h=l.device.ensureResourceExists(c.createTexture());var v=l.device.translateTextureType(a.format),g=l.device.translateTextureInternalFormat(a.format);if(l.device.setActiveTexture(c.TEXTURE0),l.device.currentTextures[0]=null,l.preprocessImage(),a.dimension===Or.TEXTURE_2D){if(f=ne.TEXTURE_2D,c.bindTexture(f,h),l.immutable)if(zt(c))c.texStorage2D(f,p,g,a.width,a.height);else{var _=(g===ne.DEPTH_COMPONENT||l.isNPOT(),0);(l.format===ve.D32F||l.format===ve.D24_S8)&&!zt(c)&&!i.WEBGL_depth_texture||(c.texImage2D(f,_,g,a.width,a.height,0,g,v,null),l.mipmaps&&(l.mipmaps=!1,c.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MIN_FILTER,ne.LINEAR),c.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_S,ne.CLAMP_TO_EDGE),c.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_T,ne.CLAMP_TO_EDGE)))}gr(a.depthOrArrayLayers===1)}else if(a.dimension===Or.TEXTURE_2D_ARRAY)f=ne.TEXTURE_2D_ARRAY,c.bindTexture(f,h),l.immutable&&zt(c)&&c.texStorage3D(f,p,g,a.width,a.height,a.depthOrArrayLayers);else if(a.dimension===Or.TEXTURE_3D)f=ne.TEXTURE_3D,c.bindTexture(f,h),l.immutable&&zt(c)&&c.texStorage3D(f,p,g,a.width,a.height,a.depthOrArrayLayers);else if(a.dimension===Or.TEXTURE_CUBE_MAP)f=ne.TEXTURE_CUBE_MAP,c.bindTexture(f,h),l.immutable&&zt(c)&&c.texStorage2D(f,p,g,a.width,a.height),gr(a.depthOrArrayLayers===6);else throw new Error("whoops")}return l.gl_texture=h,l.gl_target=f,l.mipLevelCount=p,l}return t.prototype.setImageData=function(r,n){n===void 0&&(n=0);var i=this.device.gl;V9(this.format);var a=this.gl_target===ne.TEXTURE_3D||this.gl_target===ne.TEXTURE_2D_ARRAY,o=this.gl_target===ne.TEXTURE_CUBE_MAP,l=Eve(r[0]);this.device.setActiveTexture(i.TEXTURE0),this.device.currentTextures[0]=null;var c=r[0],f,h;l?(f=this.width,h=this.height):(f=c.width,h=c.height,this.width=f,this.height=h),i.bindTexture(this.gl_target,this.gl_texture);var p=this.device.translateTextureFormat(this.format),v=zt(i)?this.device.translateInternalTextureFormat(this.format):p,g=this.device.translateTextureType(this.format);this.preprocessImage();for(var _=0;_<this.depthOrArrayLayers;_++){var E=r[_],b=this.gl_target;o&&(b=ne.TEXTURE_CUBE_MAP_POSITIVE_X+_%6),this.immutable?i.texSubImage2D(b,n,0,0,f,h,p,g,E):zt(i)?a?i.texImage3D(b,n,v,f,h,this.depthOrArrayLayers,0,p,g,E):i.texImage2D(b,n,v,f,h,0,p,g,E):l?i.texImage2D(b,n,p,f,h,0,p,g,E):i.texImage2D(b,n,p,p,g,E)}this.mipmaps&&this.generateMipmap(a)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteTexture(rp(this))},t.prototype.clampmipLevelCount=function(r){if(r.dimension===Or.TEXTURE_2D_ARRAY&&r.depthOrArrayLayers>1){var n=gl(r.format);if(n===Qe.BC1)for(var i=r.width,a=r.height,o=0;o<r.mipLevelCount;o++){if(i<=2||a<=2)return o-1;i=Math.max(i/2|0,1),a=Math.max(a/2|0,1)}}return r.mipLevelCount},t.prototype.preprocessImage=function(){var r=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&r.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&r.pixelStorei(ne.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&r.pixelStorei(ne.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},t.prototype.generateMipmap=function(r){r===void 0&&(r=!1);var n=this.device.gl;return!zt(n)&&this.isNPOT()?this:(this.gl_texture&&this.gl_target&&(n.bindTexture(this.gl_target,this.gl_texture),r?(n.texParameteri(this.gl_target,ne.TEXTURE_BASE_LEVEL,0),n.texParameteri(this.gl_target,ne.TEXTURE_MAX_LEVEL,Math.log2(this.width)),n.texParameteri(this.gl_target,ne.TEXTURE_MIN_FILTER,ne.LINEAR_MIPMAP_LINEAR),n.texParameteri(this.gl_target,ne.TEXTURE_MAG_FILTER,ne.LINEAR)):n.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MIN_FILTER,ne.NEAREST_MIPMAP_LINEAR),n.generateMipmap(this.gl_target),n.bindTexture(this.gl_target,null)),this)},t.prototype.isNPOT=function(){var r=this.device.gl;return zt(r)?!1:!N1(this.width)||!N1(this.height)},t})(Xo),Dve=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;o.type=qr.RenderTarget,o.gl_renderbuffer=null,o.texture=null;var l=o.device.gl,c=a.format,f=a.width,h=a.height,p=a.sampleCount,v=p===void 0?1:p,g=a.texture,_=!1;if((c===ve.D32F||c===ve.D24_S8)&&g&&!zt(l)&&!i.WEBGL_depth_texture&&(g.destroy(),o.texture=null,_=!0),!_&&g)o.texture=g;else{o.gl_renderbuffer=o.device.ensureResourceExists(l.createRenderbuffer()),l.bindRenderbuffer(l.RENDERBUFFER,o.gl_renderbuffer);var E=o.device.translateTextureInternalFormat(c,!0);zt(l)&&v>1?l.renderbufferStorageMultisample(ne.RENDERBUFFER,v,E,f,h):l.renderbufferStorage(ne.RENDERBUFFER,E,f,h)}return o.format=c,o.width=f,o.height=h,o.sampleCount=v,o}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gl_renderbuffer!==null&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},t})(Xo),Va;(function(e){e[e.NeedsCompile=0]="NeedsCompile",e[e.Compiling=1]="Compiling",e[e.NeedsBind=2]="NeedsBind",e[e.ReadyToUse=3]="ReadyToUse"})(Va||(Va={}));var Lve=(function(e){kn(t,e);function t(r,n){var i=r.id,a=r.device,o=r.descriptor,l=e.call(this,{id:i,device:a})||this;l.rawVertexGLSL=n,l.type=qr.Program,l.uniformSetters={},l.attributes=[];var c=l.device.gl;return l.descriptor=o,l.gl_program=l.device.ensureResourceExists(c.createProgram()),l.gl_shader_vert=null,l.gl_shader_frag=null,l.compileState=Va.NeedsCompile,l.tryCompileProgram(),l}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},t.prototype.tryCompileProgram=function(){gr(this.compileState===Va.NeedsCompile);var r=this.descriptor,n=r.vertex,i=r.fragment,a=this.device.gl;n?.glsl&&i?.glsl&&(this.gl_shader_vert=this.compileShader(n.postprocess?n.postprocess(n.glsl):n.glsl,a.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(i.postprocess?i.postprocess(i.glsl):i.glsl,a.FRAGMENT_SHADER),a.attachShader(this.gl_program,this.gl_shader_vert),a.attachShader(this.gl_program,this.gl_shader_frag),a.linkProgram(this.gl_program),this.compileState=Va.Compiling,zt(a)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},t.prototype.readAttributesFromLinkedProgram=function(){for(var r,n=this.device.gl,i=n.getProgramParameter(this.gl_program,n.ACTIVE_ATTRIBUTES),a=bve(this.descriptor.vertex.glsl),o=xve(this.rawVertexGLSL,a),l=function(h){var p=n.getActiveAttrib(c.gl_program,h),v=p.name,g=p.type,_=p.size,E=n.getAttribLocation(c.gl_program,v),b=(r=o.find(function(S){return S.name===v}))===null||r===void 0?void 0:r.location;E>=0&&!jo(b)&&(c.attributes[b]={name:v,location:E,type:g,size:_})},c=this,f=0;f<i;f++)l(f)},t.prototype.readUniformLocationsFromLinkedProgram=function(){for(var r=this.device.gl,n=r.getProgramParameter(this.gl_program,r.ACTIVE_UNIFORMS),i=0;i<n;i++){var a=r.getActiveUniform(this.gl_program,i),o=pve(a.name).name,l=r.getUniformLocation(this.gl_program,o);if(this.uniformSetters[o]=X6(r,l,a),a&&a.size>1)for(var c=0;c<a.size;c++)l=r.getUniformLocation(this.gl_program,"".concat(o,"[").concat(c,"]")),this.uniformSetters["".concat(o,"[").concat(c,"]")]=X6(r,l,a)}},t.prototype.compileShader=function(r,n){var i=this.device.gl,a=this.device.ensureResourceExists(i.createShader(n));return i.shaderSource(a,r),i.compileShader(a),a},t.prototype.setUniformsLegacy=function(r){r===void 0&&(r={});var n=this.device.gl;if(!zt(n)){var i=!1;for(var a in r){i||(n.useProgram(this.gl_program),i=!0);var o=r[a],l=this.uniformSetters[a];if(l){var c=o;c instanceof gC&&(c=c.textureIndex),l(c)}}}return this},t})(Xo),Bve=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;o.type=qr.QueryPool;var l=o.device.gl;if(zt(l)){var c=a.elemCount,f=a.type;o.gl_query=qme(c,function(){return o.device.ensureResourceExists(l.createQuery())}),o.gl_query_type=Nve(f)}return o}return t.prototype.queryResultOcclusion=function(r){var n=this.device.gl;if(zt(n)){var i=this.gl_query[r];return n.getQueryParameter(i,n.QUERY_RESULT_AVAILABLE)?!!n.getQueryParameter(i,n.QUERY_RESULT):null}return null},t.prototype.destroy=function(){e.prototype.destroy.call(this);var r=this.device.gl;if(zt(r))for(var n=0;n<this.gl_query.length;n++)r.deleteQuery(this.gl_query[n])},t})(Xo),Fve=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=e.call(this,{id:n,device:i})||this;return a.type=qr.Readback,a.gl_pbo=null,a.gl_sync=null,a}return t.prototype.clientWaitAsync=function(r,n,i){n===void 0&&(n=0),i===void 0&&(i=10);var a=this.device.gl;return new Promise(function(o,l){function c(){var f=a.clientWaitSync(r,n,0);if(f==a.WAIT_FAILED){l();return}if(f==a.TIMEOUT_EXPIRED){setTimeout(c,Ume(i,0,a.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}o()}c()})},t.prototype.getBufferSubDataAsync=function(r,n,i,a,o,l){return gp(this,void 0,void 0,function(){var c;return _p(this,function(f){switch(f.label){case 0:return c=this.device.gl,zt(c)?(this.gl_sync=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0),c.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)]):[3,2];case 1:return f.sent(),c.bindBuffer(r,n),c.getBufferSubData(r,i,a,o,l),c.bindBuffer(r,null),[2,a];case 2:return[2]}})})},t.prototype.readTexture=function(r,n,i,a,o,l,c,f){return c===void 0&&(c=0),f===void 0&&(f=l.byteLength||0),gp(this,void 0,void 0,function(){var h,p,v,g,_;return _p(this,function(E){return h=this.device.gl,p=r,v=this.device.translateTextureFormat(p.format),g=this.device.translateTextureType(p.format),_=Vme(p.format),zt(h)?(this.gl_pbo=this.device.ensureResourceExists(h.createBuffer()),h.bindBuffer(h.PIXEL_PACK_BUFFER,this.gl_pbo),h.bufferData(h.PIXEL_PACK_BUFFER,f,h.STREAM_READ),h.bindBuffer(h.PIXEL_PACK_BUFFER,null),h.bindFramebuffer(ne.READ_FRAMEBUFFER,this.device.readbackFramebuffer),h.framebufferTexture2D(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,p.gl_texture,0),h.bindBuffer(h.PIXEL_PACK_BUFFER,this.gl_pbo),h.readPixels(n,i,a,o,v,g,c*_),h.bindBuffer(h.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(h.PIXEL_PACK_BUFFER,this.gl_pbo,0,l,c,0)]):[2,this.readTextureSync(r,n,i,a,o,l,c,f)]})})},t.prototype.readTextureSync=function(r,n,i,a,o,l,c,f){f===void 0&&(f=l.byteLength||0);var h=this.device.gl,p=r,v=this.device.translateTextureType(p.format);return h.bindFramebuffer(ne.FRAMEBUFFER,this.device.readbackFramebuffer),h.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,p.gl_texture,0),h.pixelStorei(h.PACK_ALIGNMENT,4),h.readPixels(n,i,a,o,h.RGBA,v,l),l},t.prototype.readBuffer=function(r,n,i,a,o){return gp(this,void 0,void 0,function(){var l;return _p(this,function(c){return l=this.device.gl,zt(l)?[2,this.getBufferSubDataAsync(l.ARRAY_BUFFER,yp(r,n),n,i,a,o)]:[2,Promise.reject()]})})},t.prototype.destroy=function(){e.prototype.destroy.call(this),zt(this.device.gl)&&(this.gl_sync!==null&&this.device.gl.deleteSync(this.gl_sync),this.gl_pbo!==null&&this.device.gl.deleteBuffer(this.gl_pbo))},t})(Xo),Uve=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o,l,c=e.call(this,{id:n,device:i})||this;return c.type=qr.RenderPipeline,c.drawMode=Ave((o=a.topology)!==null&&o!==void 0?o:ii.TRIANGLES),c.program=a.program,c.inputLayout=a.inputLayout,c.megaState=Pn(Pn({},Pp(Dp)),a.megaStateDescriptor),c.colorAttachmentFormats=a.colorAttachmentFormats.slice(),c.depthStencilAttachmentFormat=a.depthStencilAttachmentFormat,c.sampleCount=(l=a.sampleCount)!==null&&l!==void 0?l:1,c}return t})(Xo),kve=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;return o.type=qr.ComputePipeline,o.descriptor=a,o}return t})(Xo),jve=(function(){function e(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return e.prototype.trackResourceCreated=function(t){this.creationStacks.set(t,new Error().stack),this.liveObjects.add(t)},e.prototype.trackResourceDestroyed=function(t){this.deletionStacks.has(t)&&console.warn("Object double freed:",t,`

Creation stack: `,this.creationStacks.get(t),`

Deletion stack: `,this.deletionStacks.get(t),`

This stack: `,new Error().stack),this.deletionStacks.set(t,new Error().stack),this.liveObjects.delete(t)},e.prototype.checkForLeaks=function(){var t,r;try{for(var n=yd(this.liveObjects.values()),i=n.next();!i.done;i=n.next()){var a=i.value;console.warn("Object leaked:",a,"Creation stack:",this.creationStacks.get(a))}}catch(o){t={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.setResourceLeakCheck=function(t,r){r?this.liveObjects.add(t):this.liveObjects.delete(t)},e})(),zve=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o,l,c=e.call(this,{id:n,device:i})||this;c.type=qr.Sampler;var f=c.device.gl;if(zt(f)){var h=c.device.ensureResourceExists(f.createSampler());f.samplerParameteri(h,ne.TEXTURE_WRAP_S,Vv(a.addressModeU)),f.samplerParameteri(h,ne.TEXTURE_WRAP_T,Vv(a.addressModeV)),f.samplerParameteri(h,ne.TEXTURE_WRAP_R,Vv((o=a.addressModeW)!==null&&o!==void 0?o:a.addressModeU)),f.samplerParameteri(h,ne.TEXTURE_MIN_FILTER,ly(a.minFilter,a.mipmapFilter)),f.samplerParameteri(h,ne.TEXTURE_MAG_FILTER,ly(a.magFilter,yi.NO_MIP)),a.lodMinClamp!==void 0&&f.samplerParameterf(h,ne.TEXTURE_MIN_LOD,a.lodMinClamp),a.lodMaxClamp!==void 0&&f.samplerParameterf(h,ne.TEXTURE_MAX_LOD,a.lodMaxClamp),a.compareFunction!==void 0&&(f.samplerParameteri(h,f.TEXTURE_COMPARE_MODE,f.COMPARE_REF_TO_TEXTURE),f.samplerParameteri(h,f.TEXTURE_COMPARE_FUNC,a.compareFunction));var p=(l=a.maxAnisotropy)!==null&&l!==void 0?l:1;p>1&&c.device.EXT_texture_filter_anisotropic!==null&&(gr(a.minFilter===Wn.BILINEAR&&a.magFilter===Wn.BILINEAR&&a.mipmapFilter===yi.LINEAR),f.samplerParameterf(h,c.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,p)),c.gl_sampler=h}else c.descriptor=a;return c}return t.prototype.setTextureParameters=function(r,n,i){var a,o=this.device.gl,l=this.descriptor;this.isNPOT(n,i)?o.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MIN_FILTER,ne.LINEAR):o.texParameteri(r,ne.TEXTURE_MIN_FILTER,ly(l.minFilter,l.mipmapFilter)),o.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_S,Vv(l.addressModeU)),o.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_T,Vv(l.addressModeV)),o.texParameteri(r,ne.TEXTURE_MAG_FILTER,ly(l.magFilter,yi.NO_MIP));var c=(a=l.maxAnisotropy)!==null&&a!==void 0?a:1;c>1&&this.device.EXT_texture_filter_anisotropic!==null&&(gr(l.minFilter===Wn.BILINEAR&&l.magFilter===Wn.BILINEAR&&l.mipmapFilter===yi.LINEAR),o.texParameteri(r,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,c))},t.prototype.destroy=function(){e.prototype.destroy.call(this),zt(this.device.gl)&&this.device.gl.deleteSampler(vC(this))},t.prototype.isNPOT=function(r,n){return!N1(r)||!N1(n)},t})(Xo),Vve=(function(){function e(){}return e.prototype.dispatchWorkgroups=function(t,r,n){},e.prototype.dispatchWorkgroupsIndirect=function(t,r){},e.prototype.setPipeline=function(t){},e.prototype.setBindings=function(t){},e.prototype.pushDebugGroup=function(t){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(t){},e})(),Hve=(function(e){kn(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=qr.RenderBundle,r.commands=[],r}return t.prototype.push=function(r){this.commands.push(r)},t.prototype.replay=function(){this.commands.forEach(function(r){return r()})},t})(Xo),Y6=65536,Xve=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,qve=(function(){function e(t,r){r===void 0&&(r={}),this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=Pp(Dp),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=bs.LOWER_LEFT,this.clipSpaceNearZ=Mp.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=t,this.contextAttributes=Kf(t.getContextAttributes()),zt(t)?(this.EXT_texture_norm16=t.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=t.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=t.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=t.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=t.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=t.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=t.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=t.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=t.getExtension("EXT_color_buffer_half_float"),t.getExtension("EXT_frag_depth"),t.getExtension("OES_element_index_uint"),t.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=t.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=t.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=t.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=t.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=t.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=t.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=t.getExtension("KHR_parallel_shader_compile"),zt(t)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new gC({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:Or.TEXTURE_2D,mipLevelCount:1,usage:ha.RENDER_TARGET,format:this.contextAttributes.alpha===!1?ve.U8_RGB_RT:ve.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=Ln.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(t.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(Or.TEXTURE_2D,Ln.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(Or.TEXTURE_2D,Ln.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:fn.VERTEX,hint:Ss.STATIC}),zt(t)&&(this.fallbackTexture2DArray=this.createFallbackTexture(Or.TEXTURE_2D_ARRAY,Ln.Float),this.fallbackTexture3D=this.createFallbackTexture(Or.TEXTURE_3D,Ln.Float),this.fallbackTextureCube=this.createFallbackTexture(Or.TEXTURE_CUBE_MAP,Ln.Float)),this.currentMegaState.depthCompare=Zr.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=Ci.ALL,t.enable(t.DEPTH_TEST),t.enable(t.STENCIL_TEST),this.checkLimits(),r.shaderDebug&&(this.shaderDebug=!0),r.trackResources&&(this.resourceCreationTracker=new jve)}return e.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},e.prototype.createFallbackTexture=function(t,r){var n=t===Or.TEXTURE_CUBE_MAP?6:1,i=r===Ln.Depth?ve.D32F:ve.U8_RGBA_NORM,a=this.createTexture({dimension:t,format:i,usage:ha.SAMPLED,width:1,height:1,depthOrArrayLayers:n,mipLevelCount:1});return r===Ln.Float&&a.setImageData([new Uint8Array(4*n)]),rp(a)},e.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},e.prototype.checkLimits=function(){var t=this.gl;if(this.maxVertexAttribs=t.getParameter(ne.MAX_VERTEX_ATTRIBS),zt(t)){this.uniformBufferMaxPageByteSize=Math.min(t.getParameter(ne.MAX_UNIFORM_BLOCK_SIZE),Y6),this.uniformBufferWordAlignment=t.getParameter(t.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var r=t.getInternalformatParameter(t.RENDERBUFFER,t.DEPTH32F_STENCIL8,t.SAMPLES);this.supportedSampleCounts=r?kv([],ms(r),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=Y6;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(n,i){return n-i})},e.prototype.configureSwapChain=function(t,r,n){var i=this.scTexture;i.width=t,i.height=r,this.scPlatformFramebuffer=Xme(n)},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.gl.canvas},e.prototype.getOnscreenTexture=function(){return this.scTexture},e.prototype.beginFrame=function(){},e.prototype.endFrame=function(){},e.prototype.translateTextureInternalFormat=function(t,r){switch(r===void 0&&(r=!1),t){case ve.ALPHA:return ne.ALPHA;case ve.U8_LUMINANCE:case ve.F16_LUMINANCE:case ve.F32_LUMINANCE:return ne.LUMINANCE;case ve.F16_R:return ne.R16F;case ve.F16_RG:return ne.RG16F;case ve.F16_RGB:return ne.RGB16F;case ve.F16_RGBA:return ne.RGBA16F;case ve.F32_R:return ne.R32F;case ve.F32_RG:return ne.RG32F;case ve.F32_RGB:return ne.RGB32F;case ve.F32_RGBA:return zt(this.gl)?ne.RGBA32F:r?this.WEBGL_color_buffer_float.RGBA32F_EXT:ne.RGBA;case ve.U8_R_NORM:return ne.R8;case ve.U8_RG_NORM:return ne.RG8;case ve.U8_RGB_NORM:case ve.U8_RGB_RT:return ne.RGB8;case ve.U8_RGB_SRGB:return ne.SRGB8;case ve.U8_RGBA_NORM:case ve.U8_RGBA_RT:return zt(this.gl)?ne.RGBA8:r?ne.RGBA4:ne.RGBA;case ve.U8_RGBA:return ne.RGBA;case ve.U8_RGBA_SRGB:case ve.U8_RGBA_RT_SRGB:return ne.SRGB8_ALPHA8;case ve.U16_R:return ne.R16UI;case ve.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case ve.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case ve.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case ve.U16_RGBA_5551:return ne.RGB5_A1;case ve.U16_RGB_565:return ne.RGB565;case ve.U32_R:return ne.R32UI;case ve.S8_RGBA_NORM:return ne.RGBA8_SNORM;case ve.S8_RG_NORM:return ne.RG8_SNORM;case ve.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case ve.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case ve.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case ve.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case ve.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case ve.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case ve.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case ve.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case ve.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case ve.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case ve.D32F_S8:return zt(this.gl)?ne.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?ne.DEPTH_STENCIL:ne.DEPTH_COMPONENT16;case ve.D24_S8:return zt(this.gl)?ne.DEPTH24_STENCIL8:this.WEBGL_depth_texture?ne.DEPTH_STENCIL:ne.DEPTH_COMPONENT16;case ve.D32F:return zt(this.gl)?ne.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?ne.DEPTH_COMPONENT:ne.DEPTH_COMPONENT16;case ve.D24:return zt(this.gl)?ne.DEPTH_COMPONENT24:this.WEBGL_depth_texture?ne.DEPTH_COMPONENT:ne.DEPTH_COMPONENT16;default:throw new Error("whoops")}},e.prototype.translateTextureType=function(t){var r=gl(t);switch(r){case Qe.U8:return ne.UNSIGNED_BYTE;case Qe.U16:return ne.UNSIGNED_SHORT;case Qe.U32:return ne.UNSIGNED_INT;case Qe.S8:return ne.BYTE;case Qe.F16:return ne.HALF_FLOAT;case Qe.F32:return ne.FLOAT;case Qe.U16_PACKED_5551:return ne.UNSIGNED_SHORT_5_5_5_1;case Qe.D32F:return zt(this.gl)?ne.FLOAT:this.WEBGL_depth_texture?ne.UNSIGNED_INT:ne.UNSIGNED_BYTE;case Qe.D24:return zt(this.gl)?ne.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?ne.UNSIGNED_SHORT:ne.UNSIGNED_BYTE;case Qe.D24S8:return zt(this.gl)?ne.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?ne.UNSIGNED_INT_24_8_WEBGL:ne.UNSIGNED_BYTE;case Qe.D32FS8:return ne.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw new Error("whoops")}},e.prototype.translateInternalTextureFormat=function(t){switch(t){case ve.F32_R:return ne.R32F;case ve.F32_RG:return ne.RG32F;case ve.F32_RGB:return ne.RGB32F;case ve.F32_RGBA:return ne.RGBA32F;case ve.F16_R:return ne.R16F;case ve.F16_RG:return ne.RG16F;case ve.F16_RGB:return ne.RGB16F;case ve.F16_RGBA:return ne.RGBA16F}return this.translateTextureFormat(t)},e.prototype.translateTextureFormat=function(t){if(V9(t)||t===ve.F32_LUMINANCE||t===ve.U8_LUMINANCE)return this.translateTextureInternalFormat(t);var r=zt(this.gl)||!zt(this.gl)&&!!this.WEBGL_depth_texture;switch(t){case ve.D24_S8:case ve.D32F_S8:return r?ne.DEPTH_STENCIL:ne.RGBA;case ve.D24:case ve.D32F:return r?ne.DEPTH_COMPONENT:ne.RGBA}var n=H9(t),i=xO(t);switch(i){case Ft.A:return ne.ALPHA;case Ft.R:return n?ne.RED_INTEGER:ne.RED;case Ft.RG:return n?ne.RG_INTEGER:ne.RG;case Ft.RGB:return n?ne.RGB_INTEGER:ne.RGB;case Ft.RGBA:return ne.RGBA}},e.prototype.setActiveTexture=function(t){this.currentActiveTexture!==t&&(this.gl.activeTexture(t),this.currentActiveTexture=t)},e.prototype.bindVAO=function(t){this.currentBoundVAO!==t&&(zt(this.gl)?this.gl.bindVertexArray(t):this.OES_vertex_array_object.bindVertexArrayOES(t),this.currentBoundVAO=t)},e.prototype.programCompiled=function(t){gr(t.compileState!==Va.NeedsCompile),t.compileState===Va.Compiling&&(t.compileState=Va.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(t))},e.prototype.useProgram=function(t){this.currentProgram!==t&&(this.programCompiled(t),this.gl.useProgram(t.gl_program),this.currentProgram=t)},e.prototype.ensureResourceExists=function(t){if(t===null){var r=this.gl.getError();throw new Error("Created resource is null; GL error encountered: ".concat(r))}else return t},e.prototype.createBuffer=function(t){return new Ive({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createTexture=function(t){return new gC({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createSampler=function(t){return new zve({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createRenderTarget=function(t){return new Dve({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createRenderTargetFromTexture=function(t){var r=t,n=r.format,i=r.width,a=r.height,o=r.mipLevelCount;return gr(o===1),this.createRenderTarget({format:n,width:i,height:a,sampleCount:1,texture:t})},e.prototype.createProgram=function(t){var r,n,i,a=(r=t.vertex)===null||r===void 0?void 0:r.glsl;return!((n=t.vertex)===null||n===void 0)&&n.glsl&&(t.vertex.glsl=Lp(this.queryVendorInfo(),"vert",t.vertex.glsl)),!((i=t.fragment)===null||i===void 0)&&i.glsl&&(t.fragment.glsl=Lp(this.queryVendorInfo(),"frag",t.fragment.glsl)),this.createProgramSimple(t,a)},e.prototype.createProgramSimple=function(t,r){var n=new Lve({id:this.getNextUniqueId(),device:this,descriptor:t},r);return n},e.prototype.createBindings=function(t){return new Sve({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createInputLayout=function(t){return new Pve({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createRenderPipeline=function(t){return new Uve({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createComputePass=function(){return new Vve},e.prototype.createComputePipeline=function(t){return new kve({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createReadback=function(){return new Fve({id:this.getNextUniqueId(),device:this})},e.prototype.createQueryPool=function(t,r){return new Bve({id:this.getNextUniqueId(),device:this,descriptor:{type:t,elemCount:r}})},e.prototype.formatRenderPassDescriptor=function(t){var r,n,i,a,o,l,c=t.colorAttachment;t.depthClearValue=(r=t.depthClearValue)!==null&&r!==void 0?r:"load",t.stencilClearValue=(n=t.stencilClearValue)!==null&&n!==void 0?n:"load";for(var f=0;f<c.length;f++)t.colorAttachmentLevel||(t.colorAttachmentLevel=[]),t.colorAttachmentLevel[f]=(i=t.colorAttachmentLevel[f])!==null&&i!==void 0?i:0,t.colorResolveToLevel||(t.colorResolveToLevel=[]),t.colorResolveToLevel[f]=(a=t.colorResolveToLevel[f])!==null&&a!==void 0?a:0,t.colorClearColor||(t.colorClearColor=[]),t.colorClearColor[f]=(o=t.colorClearColor[f])!==null&&o!==void 0?o:"load",t.colorStore||(t.colorStore=[]),t.colorStore[f]=(l=t.colorStore[f])!==null&&l!==void 0?l:!1},e.prototype.createRenderBundle=function(){return new Hve({id:this.getNextUniqueId(),device:this})},e.prototype.beginBundle=function(t){this.renderBundle=t},e.prototype.endBundle=function(){this.renderBundle=void 0},e.prototype.executeBundles=function(t){t.forEach(function(r){r.replay()})},e.prototype.createRenderPass=function(t){this.currentRenderPassDescriptor!==null&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=t,this.formatRenderPassDescriptor(t);var r=t.colorAttachment,n=t.colorAttachmentLevel,i=t.colorClearColor,a=t.colorResolveTo,o=t.colorResolveToLevel,l=t.depthStencilAttachment,c=t.depthClearValue,f=t.stencilClearValue,h=t.depthStencilResolveTo,p=a&&a.length===1&&a[0]===this.scTexture;this.setRenderPassParametersBegin(r.length,p);for(var v=0;v<r.length;v++)this.setRenderPassParametersColor(v,r[v],n[v],a[v],o[v],p);this.setRenderPassParametersDepthStencil(l,h,p),this.validateCurrentAttachments();for(var v=0;v<r.length;v++){var g=i[v];g!=="load"&&this.setRenderPassParametersClearColor(v,g.r,g.g,g.b,g.a)}return this.setRenderPassParametersClearDepthStencil(c,f),this},e.prototype.submitPass=function(t){gr(this.currentRenderPassDescriptor!==null),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},e.prototype.copySubTexture2D=function(t,r,n,i,a,o){var l=this.gl,c=t,f=i;if(gr(f.mipLevelCount===1),gr(c.mipLevelCount===1),zt(l))c===this.scTexture?l.bindFramebuffer(l.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(l.bindFramebuffer(l.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(l.DRAW_FRAMEBUFFER,l.COLOR_ATTACHMENT0,c,0)),l.bindFramebuffer(l.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(l.READ_FRAMEBUFFER,l.COLOR_ATTACHMENT0,f,0),l.blitFramebuffer(a,o,a+f.width,o+f.height,r,n,r+f.width,n+f.height,l.COLOR_BUFFER_BIT,l.LINEAR),l.bindFramebuffer(l.READ_FRAMEBUFFER,null),l.bindFramebuffer(l.DRAW_FRAMEBUFFER,null);else if(c===this.scTexture){var h=this.createRenderTargetFromTexture(i);this.submitBlitRenderPass(h,c)}},e.prototype.queryLimits=function(){return this},e.prototype.queryTextureFormatSupported=function(t,r,n){switch(t){case ve.BC1_SRGB:case ve.BC2_SRGB:case ve.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb!==null?qR(r,n,4,4):!1;case ve.BC1:case ve.BC2:case ve.BC3:return this.WEBGL_compressed_texture_s3tc!==null?qR(r,n,4,4):!1;case ve.BC4_UNORM:case ve.BC4_SNORM:case ve.BC5_UNORM:case ve.BC5_SNORM:return this.EXT_texture_compression_rgtc!==null?qR(r,n,4,4):!1;case ve.U16_R_NORM:case ve.U16_RG_NORM:case ve.U16_RGBA_NORM:return this.EXT_texture_norm16!==null;case ve.F32_R:case ve.F32_RG:case ve.F32_RGB:case ve.F32_RGBA:return this.OES_texture_float_linear!==null;case ve.F16_R:case ve.F16_RG:case ve.F16_RGB:case ve.F16_RGBA:return this.OES_texture_half_float_linear!==null;default:return!0}},e.prototype.queryProgramReady=function(t){var r=this.gl;if(t.compileState===Va.NeedsCompile)throw new Error("whoops");if(t.compileState===Va.Compiling){var n=void 0;return this.KHR_parallel_shader_compile!==null?n=r.getProgramParameter(t.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR):n=!0,n&&this.programCompiled(t),n}return t.compileState===Va.NeedsBind||t.compileState===Va.ReadyToUse},e.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(t){return this.currentRenderPassDescriptor},e.prototype.queryRenderTarget=function(t){var r=t;return r},e.prototype.setResourceName=function(t,r){if(t.name=r,t.type===qr.Buffer)for(var n=t.gl_buffer_pages,i=0;i<n.length;i++)Hv(n[i],"".concat(r," Page ").concat(i));else if(t.type===qr.Texture)Hv(rp(t),r);else if(t.type===qr.Sampler)Hv(vC(t),r);else if(t.type===qr.RenderTarget){var a=t.gl_renderbuffer;a!==null&&Hv(a,r)}else t.type===qr.InputLayout&&Hv(t.vao,r)},e.prototype.setResourceLeakCheck=function(t,r){this.resourceCreationTracker!==null&&this.resourceCreationTracker.setResourceLeakCheck(t,r)},e.prototype.checkForLeaks=function(){this.resourceCreationTracker!==null&&this.resourceCreationTracker.checkForLeaks()},e.prototype.pushDebugGroup=function(t){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(t){},e.prototype.programPatched=function(t,r){gr(this.shaderDebug)},e.prototype.getBufferData=function(t,r,n){n===void 0&&(n=0);var i=this.gl;zt(i)&&(i.bindBuffer(i.COPY_READ_BUFFER,yp(t,n*4)),i.getBufferSubData(i.COPY_READ_BUFFER,n*4,r))},e.prototype.debugGroupStatisticsDrawCall=function(t){t===void 0&&(t=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].drawCallCount+=t},e.prototype.debugGroupStatisticsBufferUpload=function(t){t===void 0&&(t=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].bufferUploadCount+=t},e.prototype.debugGroupStatisticsTextureBind=function(t){t===void 0&&(t=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].textureBindCount+=t},e.prototype.debugGroupStatisticsTriangles=function(t){for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].triangleCount+=t},e.prototype.reportShaderError=function(t,r){var n=this.gl,i=n.getShaderParameter(t,n.COMPILE_STATUS);if(!i){console.error(Gme(r));var a=n.getExtension("WEBGL_debug_shaders");a&&console.error(a.getTranslatedShaderSource(t)),console.error(n.getShaderInfoLog(t))}return i},e.prototype.checkProgramCompilationForErrors=function(t){var r=this.gl,n=t.gl_program;if(!r.getProgramParameter(n,r.LINK_STATUS)){var i=t.descriptor;if(!this.reportShaderError(t.gl_shader_vert,i.vertex.glsl)||!this.reportShaderError(t.gl_shader_frag,i.fragment.glsl))return;console.error(r.getProgramInfoLog(t.gl_program))}},e.prototype.bindFramebufferAttachment=function(t,r,n,i){var a=this.gl;if(jo(n))a.framebufferRenderbuffer(t,r,a.RENDERBUFFER,null);else if(n.type===qr.RenderTarget)n.gl_renderbuffer!==null?a.framebufferRenderbuffer(t,r,a.RENDERBUFFER,n.gl_renderbuffer):n.texture!==null&&a.framebufferTexture2D(t,r,ne.TEXTURE_2D,rp(n.texture),i);else if(n.type===qr.Texture){var o=rp(n);n.dimension===Or.TEXTURE_2D?a.framebufferTexture2D(t,r,ne.TEXTURE_2D,o,i):zt(a)&&(n.dimension,Or.TEXTURE_2D_ARRAY)}},e.prototype.bindFramebufferDepthStencilAttachment=function(t,r){var n=this.gl,i=jo(r)?wt.Depth|wt.Stencil:Ip(r.format),a=!!(i&wt.Depth),o=!!(i&wt.Stencil);if(a&&o){var l=zt(this.gl)||!zt(this.gl)&&!!this.WEBGL_depth_texture;l?this.bindFramebufferAttachment(t,n.DEPTH_STENCIL_ATTACHMENT,r,0):this.bindFramebufferAttachment(t,n.DEPTH_ATTACHMENT,r,0)}else a?(this.bindFramebufferAttachment(t,n.DEPTH_ATTACHMENT,r,0),this.bindFramebufferAttachment(t,n.STENCIL_ATTACHMENT,null,0)):o&&(this.bindFramebufferAttachment(t,n.STENCIL_ATTACHMENT,r,0),this.bindFramebufferAttachment(t,n.DEPTH_ATTACHMENT,null,0))},e.prototype.validateCurrentAttachments=function(){for(var t=-1,r=-1,n=-1,i=0;i<this.currentColorAttachments.length;i++){var a=this.currentColorAttachments[i];a!==null&&(t===-1?(t=a.sampleCount,r=a.width,n=a.height):(gr(t===a.sampleCount),gr(r===a.width),gr(n===a.height)))}this.currentDepthStencilAttachment&&(t===-1?t=this.currentDepthStencilAttachment.sampleCount:(gr(t===this.currentDepthStencilAttachment.sampleCount),gr(r===this.currentDepthStencilAttachment.width),gr(n===this.currentDepthStencilAttachment.height))),this.currentSampleCount=t},e.prototype.setRenderPassParametersBegin=function(t,r){r===void 0&&(r=!1);var n=this.gl;if(r)n.bindFramebuffer(ne.FRAMEBUFFER,null);else if(zt(n)?n.bindFramebuffer(ne.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||n.bindFramebuffer(ne.FRAMEBUFFER,this.renderPassDrawFramebuffer),zt(n)?n.drawBuffers([ne.COLOR_ATTACHMENT0,ne.COLOR_ATTACHMENT1,ne.COLOR_ATTACHMENT2,ne.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([ne.COLOR_ATTACHMENT0_WEBGL,ne.COLOR_ATTACHMENT1_WEBGL,ne.COLOR_ATTACHMENT2_WEBGL,ne.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var i=t;i<this.currentColorAttachments.length;i++){var a=zt(n)?ne.DRAW_FRAMEBUFFER:ne.FRAMEBUFFER,o=zt(n)?ne.COLOR_ATTACHMENT0:ne.COLOR_ATTACHMENT0_WEBGL;n.framebufferRenderbuffer(a,o+i,ne.RENDERBUFFER,null),n.framebufferTexture2D(a,o+i,ne.TEXTURE_2D,null,0)}this.currentColorAttachments.length=t},e.prototype.setRenderPassParametersColor=function(t,r,n,i,a,o){o===void 0&&(o=!1);var l=this.gl,c=zt(l);(this.currentColorAttachments[t]!==r||this.currentColorAttachmentLevels[t]!==n)&&(this.currentColorAttachments[t]=r,this.currentColorAttachmentLevels[t]=n,!o&&(c||!c&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(c?ne.DRAW_FRAMEBUFFER:ne.FRAMEBUFFER,(c?ne.COLOR_ATTACHMENT0:ne.COLOR_ATTACHMENT0_WEBGL)+t,r,n),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[t]!==i||this.currentColorResolveToLevels[t]!==a)&&(this.currentColorResolveTos[t]=i,this.currentColorResolveToLevels[t]=a,i!==null&&(this.resolveColorAttachmentsChanged=!0))},e.prototype.setRenderPassParametersDepthStencil=function(t,r,n){n===void 0&&(n=!1);var i=this.gl;this.currentDepthStencilAttachment!==t&&(this.currentDepthStencilAttachment=t,!n&&!this.inBlitRenderPass&&this.bindFramebufferDepthStencilAttachment(zt(i)?ne.DRAW_FRAMEBUFFER:ne.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==r&&(this.currentDepthStencilResolveTo=r,r&&(this.resolveDepthStencilAttachmentsChanged=!0))},e.prototype.setRenderPassParametersClearColor=function(t,r,n,i,a){var o=this.gl;if(this.OES_draw_buffers_indexed!==null){var l=this.currentMegaState.attachmentsState[t];l&&l.channelWriteMask!==Ci.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(t,!0,!0,!0,!0),l.channelWriteMask=Ci.ALL)}else{var l=this.currentMegaState.attachmentsState[0];l&&l.channelWriteMask!==Ci.ALL&&(o.colorMask(!0,!0,!0,!0),l.channelWriteMask=Ci.ALL)}this.setScissorRectEnabled(!1),zt(o)?o.clearBufferfv(o.COLOR,t,[r,n,i,a]):(o.clearColor(r,n,i,a),o.clear(o.COLOR_BUFFER_BIT))},e.prototype.setRenderPassParametersClearDepthStencil=function(t,r){t===void 0&&(t="load"),r===void 0&&(r="load");var n=this.gl;t!=="load"&&(gr(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(n.depthMask(!0),this.currentMegaState.depthWrite=!0),zt(n)?n.clearBufferfv(n.DEPTH,0,[t]):(n.clearDepth(t),n.clear(n.DEPTH_BUFFER_BIT))),r!=="load"&&(gr(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(n.enable(n.STENCIL_TEST),n.stencilMask(255),this.currentMegaState.stencilWrite=!0),zt(n)?n.clearBufferiv(n.STENCIL,0,[r]):(n.clearStencil(r),n.clear(n.STENCIL_BUFFER_BIT)))},e.prototype.setBindings=function(t){var r=this,n;if(this.renderBundle){this.renderBundle.push(function(){return r.setBindings(t)});return}var i=this.gl,a=t,o=a.uniformBufferBindings,l=a.samplerBindings,c=a.bindingLayouts;gr(0<c.bindingLayoutTables.length);var f=c.bindingLayoutTables[0];gr(o.length>=f.numUniformBuffers),gr(l.length>=f.numSamplers);for(var h=0;h<o.length;h++){var p=o[h];if(p.size!==0){var v=f.firstUniformBuffer+h,g=p.buffer,_=p.offset||0,E=p.size||g.byteSize;if(g!==this.currentUniformBuffers[v]||_!==this.currentUniformBufferByteOffsets[v]||E!==this.currentUniformBufferByteSizes[v]){var b=_%g.pageByteSize,S=g.gl_buffer_pages[_/g.pageByteSize|0];gr(b+E<=g.pageByteSize),zt(i)&&i.bindBufferRange(i.UNIFORM_BUFFER,v,S,b,E),this.currentUniformBuffers[v]=g,this.currentUniformBufferByteOffsets[v]=_,this.currentUniformBufferByteSizes[v]=E}}}for(var h=0;h<f.numSamplers;h++){var p=l[h],T=f.firstSampler+h,C=p!==null&&p.sampler!==null?vC(p.sampler):null,M=p!==null&&p.texture!==null?rp(p.texture):null;if(this.currentSamplers[T]!==C&&(zt(i)&&i.bindSampler(T,C),this.currentSamplers[T]=C),this.currentTextures[T]!==M){if(this.setActiveTexture(i.TEXTURE0+T),M!==null){var D=Kf(p).texture,I=D.gl_target,N=D.width,j=D.height;p.texture.textureIndex=T,i.bindTexture(I,M),zt(i)||(n=p.sampler)===null||n===void 0||n.setTextureParameters(I,N,j),this.debugGroupStatisticsTextureBind()}else{var re=Pn(Pn({},p),j9),Q=re.dimension,X=re.formatKind,I=Mve(Q);i.bindTexture(I,this.getFallbackTexture(Pn({gl_target:I,formatKind:X},re)))}this.currentTextures[T]=M}}},e.prototype.setViewport=function(t,r,n,i){var a=this.gl;a.viewport(t,r,n,i)},e.prototype.setScissorRect=function(t,r,n,i){var a=this.gl;this.setScissorRectEnabled(!0),a.scissor(t,r,n,i)},e.prototype.applyAttachmentStateIndexed=function(t,r,n){var i=this.gl,a=this.OES_draw_buffers_indexed;r.channelWriteMask!==n.channelWriteMask&&(a.colorMaskiOES(t,!!(n.channelWriteMask&Ci.RED),!!(n.channelWriteMask&Ci.GREEN),!!(n.channelWriteMask&Ci.BLUE),!!(n.channelWriteMask&Ci.ALPHA)),r.channelWriteMask=n.channelWriteMask);var o=r.rgbBlendState.blendMode!==n.rgbBlendState.blendMode||r.alphaBlendState.blendMode!==n.alphaBlendState.blendMode,l=r.rgbBlendState.blendSrcFactor!==n.rgbBlendState.blendSrcFactor||r.alphaBlendState.blendSrcFactor!==n.alphaBlendState.blendSrcFactor||r.rgbBlendState.blendDstFactor!==n.rgbBlendState.blendDstFactor||r.alphaBlendState.blendDstFactor!==n.alphaBlendState.blendDstFactor;(l||o)&&(bc(r.rgbBlendState)&&bc(r.alphaBlendState)?a.enableiOES(t,i.BLEND):bc(n.rgbBlendState)&&bc(n.alphaBlendState)&&a.disableiOES(t,i.BLEND)),o&&(a.blendEquationSeparateiOES(t,n.rgbBlendState.blendMode,n.alphaBlendState.blendMode),r.rgbBlendState.blendMode=n.rgbBlendState.blendMode,r.alphaBlendState.blendMode=n.alphaBlendState.blendMode),l&&(a.blendFuncSeparateiOES(t,n.rgbBlendState.blendSrcFactor,n.rgbBlendState.blendDstFactor,n.alphaBlendState.blendSrcFactor,n.alphaBlendState.blendDstFactor),r.rgbBlendState.blendSrcFactor=n.rgbBlendState.blendSrcFactor,r.alphaBlendState.blendSrcFactor=n.alphaBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor=n.rgbBlendState.blendDstFactor,r.alphaBlendState.blendDstFactor=n.alphaBlendState.blendDstFactor)},e.prototype.applyAttachmentState=function(t,r){var n=this.gl;t.channelWriteMask!==r.channelWriteMask&&(n.colorMask(!!(r.channelWriteMask&Ci.RED),!!(r.channelWriteMask&Ci.GREEN),!!(r.channelWriteMask&Ci.BLUE),!!(r.channelWriteMask&Ci.ALPHA)),t.channelWriteMask=r.channelWriteMask);var i=t.rgbBlendState.blendMode!==r.rgbBlendState.blendMode||t.alphaBlendState.blendMode!==r.alphaBlendState.blendMode,a=t.rgbBlendState.blendSrcFactor!==r.rgbBlendState.blendSrcFactor||t.alphaBlendState.blendSrcFactor!==r.alphaBlendState.blendSrcFactor||t.rgbBlendState.blendDstFactor!==r.rgbBlendState.blendDstFactor||t.alphaBlendState.blendDstFactor!==r.alphaBlendState.blendDstFactor;(a||i)&&(bc(t.rgbBlendState)&&bc(t.alphaBlendState)?n.enable(n.BLEND):bc(r.rgbBlendState)&&bc(r.alphaBlendState)&&n.disable(n.BLEND)),i&&(n.blendEquationSeparate(r.rgbBlendState.blendMode,r.alphaBlendState.blendMode),t.rgbBlendState.blendMode=r.rgbBlendState.blendMode,t.alphaBlendState.blendMode=r.alphaBlendState.blendMode),a&&(n.blendFuncSeparate(r.rgbBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor,r.alphaBlendState.blendSrcFactor,r.alphaBlendState.blendDstFactor),t.rgbBlendState.blendSrcFactor=r.rgbBlendState.blendSrcFactor,t.alphaBlendState.blendSrcFactor=r.alphaBlendState.blendSrcFactor,t.rgbBlendState.blendDstFactor=r.rgbBlendState.blendDstFactor,t.alphaBlendState.blendDstFactor=r.alphaBlendState.blendDstFactor)},e.prototype.setMegaState=function(t){var r=this.gl,n=this.currentMegaState;if(this.OES_draw_buffers_indexed!==null)for(var i=0;i<t.attachmentsState.length;i++)this.applyAttachmentStateIndexed(i,n.attachmentsState[0],t.attachmentsState[0]);else gr(t.attachmentsState.length===1),this.applyAttachmentState(n.attachmentsState[0],t.attachmentsState[0]);L9(n.blendConstant,t.blendConstant)||(r.blendColor(t.blendConstant.r,t.blendConstant.g,t.blendConstant.b,t.blendConstant.a),B9(n.blendConstant,t.blendConstant)),n.depthCompare!==t.depthCompare&&(r.depthFunc(t.depthCompare),n.depthCompare=t.depthCompare),!!n.depthWrite!=!!t.depthWrite&&(r.depthMask(t.depthWrite),n.depthWrite=t.depthWrite),!!n.stencilWrite!=!!t.stencilWrite&&(r.stencilMask(t.stencilWrite?255:0),n.stencilWrite=t.stencilWrite);var a=!1;if(!P1(n.stencilFront,t.stencilFront)){a=!0;var o=t.stencilFront,l=o.passOp,c=o.failOp,f=o.depthFailOp,h=o.compare;(n.stencilFront.passOp!==l||n.stencilFront.failOp!==c||n.stencilFront.depthFailOp!==f)&&(r.stencilOpSeparate(r.FRONT,c,f,l),n.stencilFront.passOp=l,n.stencilFront.failOp=c,n.stencilFront.depthFailOp=f),n.stencilFront.compare!==h&&(this.setStencilReference(0),n.stencilFront.compare=h)}if(!P1(n.stencilBack,t.stencilBack)){a=!0;var p=t.stencilBack,l=p.passOp,c=p.failOp,f=p.depthFailOp,h=p.compare;(n.stencilBack.passOp!==l||n.stencilBack.failOp!==c||n.stencilBack.depthFailOp!==f)&&(r.stencilOpSeparate(r.BACK,c,f,l),n.stencilBack.passOp=l,n.stencilBack.failOp=c,n.stencilBack.depthFailOp=f),n.stencilBack.compare!==h&&(this.setStencilReference(0),n.stencilBack.compare=h)}(n.stencilFront.mask!==t.stencilFront.mask||n.stencilBack.mask!==t.stencilBack.mask)&&(a=!0,n.stencilFront.mask=t.stencilFront.mask,n.stencilBack.mask=t.stencilBack.mask),a&&this.applyStencil(),n.cullMode!==t.cullMode&&(n.cullMode===qa.NONE?r.enable(r.CULL_FACE):t.cullMode===qa.NONE&&r.disable(r.CULL_FACE),t.cullMode===qa.BACK?r.cullFace(r.BACK):t.cullMode===qa.FRONT?r.cullFace(r.FRONT):t.cullMode===qa.FRONT_AND_BACK&&r.cullFace(r.FRONT_AND_BACK),n.cullMode=t.cullMode),n.frontFace!==t.frontFace&&(r.frontFace(t.frontFace),n.frontFace=t.frontFace),n.polygonOffset!==t.polygonOffset&&(t.polygonOffset?r.enable(r.POLYGON_OFFSET_FILL):r.disable(r.POLYGON_OFFSET_FILL),n.polygonOffset=t.polygonOffset),(n.polygonOffsetFactor!==t.polygonOffsetFactor||n.polygonOffsetUnits!==t.polygonOffsetUnits)&&(r.polygonOffset(t.polygonOffsetFactor,t.polygonOffsetUnits),n.polygonOffsetFactor=t.polygonOffsetFactor,n.polygonOffsetUnits=t.polygonOffsetUnits)},e.prototype.validatePipelineFormats=function(t){for(var r=0;r<this.currentColorAttachments.length;r++)var n=this.currentColorAttachments[r];this.currentDepthStencilAttachment&&gr(this.currentDepthStencilAttachment.format===t.depthStencilAttachmentFormat),this.currentSampleCount!==-1&&gr(this.currentSampleCount===t.sampleCount)},e.prototype.setPipeline=function(t){var r=this;if(this.renderBundle){this.renderBundle.push(function(){return r.setPipeline(t)});return}this.currentPipeline=t,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var n=this.currentPipeline.program;if(this.useProgram(n),n.compileState===Va.NeedsBind){var i=this.gl,a=n.gl_program,o=n.descriptor,l=$6(o.vertex.glsl,Xve);if(zt(i))for(var c=0;c<l.length;c++){var f=ms(l[c],2),h=f[1],p=i.getUniformBlockIndex(a,h);p!==-1&&p!==4294967295&&i.uniformBlockBinding(a,p,c)}for(var v=$6(o.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),c=0;c<v.length;c++){var g=ms(v[c],3),_=g[1],E=g[2],b=i.getUniformLocation(a,_);i.uniform1i(b,parseInt(E))}n.compileState=Va.ReadyToUse}},e.prototype.setVertexInput=function(t,r,n){var i,a,o=this,l;if(this.renderBundle){this.renderBundle.push(function(){return o.setVertexInput(t,r,n)});return}if(t!==null){gr(this.currentPipeline.inputLayout===t);var c=t;this.bindVAO(c.vao);for(var f=this.gl,h=0;h<c.vertexBufferDescriptors.length;h++){var p=c.vertexBufferDescriptors[h],v=p.arrayStride,g=p.attributes;try{for(var _=(i=void 0,yd(g)),E=_.next();!E.done;E=_.next()){var b=E.value,S=b.shaderLocation,T=b.offset,C=zt(f)?S:(l=c.program.attributes[S])===null||l===void 0?void 0:l.location;if(!jo(C)){var M=r[h];if(M===null)continue;var D=b.vertexFormat;f.bindBuffer(f.ARRAY_BUFFER,yp(M.buffer));var I=(M.offset||0)+T;f.vertexAttribPointer(C,D.size,D.type,D.normalized,v,I)}}}catch(j){i={error:j}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}}if(gr(n!==null==(c.indexBufferFormat!==null)),n!==null){var N=n.buffer;gr(N.usage===fn.INDEX),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,yp(N)),this.currentIndexBufferByteOffset=n.offset||0}else this.currentIndexBufferByteOffset=null}else gr(this.currentPipeline.inputLayout===null),gr(n===null),this.bindVAO(null),this.currentIndexBufferByteOffset=0},e.prototype.setStencilReference=function(t){this.currentStencilRef!==t&&(this.currentStencilRef=t,this.applyStencil())},e.prototype.draw=function(t,r,n,i){var a,o=this;if(this.renderBundle){this.renderBundle.push(function(){return o.draw(t,r,n,i)});return}var l=this.gl,c=this.currentPipeline;if(r){var f=[c.drawMode,n||0,t,r];zt(l)?l.drawArraysInstanced.apply(l,kv([],ms(f),!1)):(a=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(a,kv([],ms(f),!1))}else l.drawArrays(c.drawMode,n,t);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(t/3*Math.max(r,1))},e.prototype.drawIndexed=function(t,r,n,i,a){var o,l=this;if(this.renderBundle){this.renderBundle.push(function(){return l.drawIndexed(t,r,n,i,a)});return}var c=this.gl,f=this.currentPipeline,h=Kf(f.inputLayout),p=Kf(this.currentIndexBufferByteOffset)+n*h.indexBufferCompByteSize;if(r){var v=[f.drawMode,t,h.indexBufferType,p,r];zt(c)?c.drawElementsInstanced.apply(c,kv([],ms(v),!1)):(o=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(o,kv([],ms(v),!1))}else c.drawElements(f.drawMode,t,h.indexBufferType,p);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(t/3*Math.max(r,1))},e.prototype.drawIndirect=function(t,r){},e.prototype.drawIndexedIndirect=function(t,r){},e.prototype.beginOcclusionQuery=function(t){var r=this.gl;if(zt(r)){var n=this.currentRenderPassDescriptor.occlusionQueryPool;r.beginQuery(n.gl_query_type,n.gl_query[t])}},e.prototype.endOcclusionQuery=function(){var t=this.gl;if(zt(t)){var r=this.currentRenderPassDescriptor.occlusionQueryPool;t.endQuery(r.gl_query_type)}},e.prototype.pipelineQueryReady=function(t){var r=t;return this.queryProgramReady(r.program)},e.prototype.pipelineForceReady=function(t){},e.prototype.endPass=function(){for(var t=this.gl,r=zt(t),n=this.currentColorResolveTos.length===1&&this.currentColorResolveTos[0]===this.scTexture,i=!1,a=0;a<this.currentColorAttachments.length;a++){var o=this.currentColorAttachments[a];if(o!==null){var l=this.currentColorResolveTos[a],c=!1;l!==null&&(gr(o.width===l.width&&o.height===l.height),this.setScissorRectEnabled(!1),n||(r&&t.bindFramebuffer(t.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&r&&this.bindFramebufferAttachment(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,o,this.currentColorAttachmentLevels[a])),c=!0,n||(l===this.scTexture?t.bindFramebuffer(r?ne.DRAW_FRAMEBUFFER:ne.FRAMEBUFFER,this.scPlatformFramebuffer):(t.bindFramebuffer(r?ne.DRAW_FRAMEBUFFER:ne.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&t.framebufferTexture2D(r?ne.DRAW_FRAMEBUFFER:ne.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,l.gl_texture,this.currentColorResolveToLevels[a]))),n||(r?(t.blitFramebuffer(0,0,o.width,o.height,0,0,l.width,l.height,t.COLOR_BUFFER_BIT,t.LINEAR),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(o,l)),i=!0),this.currentRenderPassDescriptor.colorStore[a]||!n&&!c&&(t.bindFramebuffer(r?ne.READ_FRAMEBUFFER:ne.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(r?ne.READ_FRAMEBUFFER:ne.FRAMEBUFFER,t.COLOR_ATTACHMENT0,o,this.currentColorAttachmentLevels[a])),n||t.bindFramebuffer(r?ne.READ_FRAMEBUFFER:ne.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var f=this.currentDepthStencilAttachment;if(f){var h=this.currentDepthStencilResolveTo,c=!1;h&&(gr(f.width===h.width&&f.height===h.height),this.setScissorRectEnabled(!1),n||(t.bindFramebuffer(r?ne.READ_FRAMEBUFFER:ne.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),t.bindFramebuffer(r?ne.DRAW_FRAMEBUFFER:ne.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(r?ne.READ_FRAMEBUFFER:ne.FRAMEBUFFER,f),this.bindFramebufferDepthStencilAttachment(r?ne.DRAW_FRAMEBUFFER:ne.FRAMEBUFFER,h))),c=!0,n||(r&&t.blitFramebuffer(0,0,f.width,f.height,0,0,h.width,h.height,t.DEPTH_BUFFER_BIT,t.NEAREST),t.bindFramebuffer(r?ne.DRAW_FRAMEBUFFER:ne.FRAMEBUFFER,null)),i=!0),!n&&!this.currentRenderPassDescriptor.depthStencilStore&&(c||(t.bindFramebuffer(r?ne.READ_FRAMEBUFFER:ne.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(r?ne.READ_FRAMEBUFFER:ne.FRAMEBUFFER,f),c=!0),r&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[t.DEPTH_STENCIL_ATTACHMENT])),!n&&c&&t.bindFramebuffer(r?ne.READ_FRAMEBUFFER:ne.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}!n&&!i&&t.bindFramebuffer(r?ne.DRAW_FRAMEBUFFER:ne.FRAMEBUFFER,null)},e.prototype.setScissorRectEnabled=function(t){if(this.currentScissorEnabled!==t){var r=this.gl;t?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST),this.currentScissorEnabled=t}},e.prototype.applyStencil=function(){jo(this.currentStencilRef)||(this.gl.stencilFuncSeparate(ne.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,this.currentMegaState.stencilFront.mask||255),this.gl.stencilFuncSeparate(ne.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,this.currentMegaState.stencilBack.mask||255))},e.prototype.getFallbackTexture=function(t){var r=t.gl_target,n=t.formatKind;if(r===ne.TEXTURE_2D)return n===Ln.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(r===ne.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(r===ne.TEXTURE_3D)return this.fallbackTexture3D;if(r===ne.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},e.prototype.submitBlitRenderPass=function(t,r){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:`layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`},fragment:{glsl:`uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`}}),this.blitVertexBuffer=this.createBuffer({usage:fn.VERTEX|fn.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:8,stepMode:Ed.VERTEX,attributes:[{format:ve.F32_RG,offset:0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:ii.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[ve.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:Pp(Dp)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:t.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:t}));var n=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var i=this.createRenderPass({colorAttachment:[t],colorResolveTo:[r],colorClearColor:[Hme]}),a=this.getCanvas(),o=a.width,l=a.height;i.setPipeline(this.blitRenderPipeline),i.setBindings(this.blitBindings),i.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),i.setViewport(0,0,o,l),this.gl.disable(this.gl.BLEND),i.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=n,this.inBlitRenderPass=!1},e})(),Gve=(function(){function e(t){this.pluginOptions=t}return e.prototype.createSwapChain=function(t){return gp(this,void 0,void 0,function(){var r,n,i,a,o,l,c,f,h,p,v,g,_;return _p(this,function(E){return r=this.pluginOptions,n=r.targets,i=r.xrCompatible,a=r.antialias,o=a===void 0?!1:a,l=r.preserveDrawingBuffer,c=l===void 0?!1:l,f=r.premultipliedAlpha,h=f===void 0?!0:f,p=r.shaderDebug,v=r.trackResources,g={antialias:o,preserveDrawingBuffer:c,stencil:!0,premultipliedAlpha:h,xrCompatible:i},this.handleContextEvents(t),n.includes("webgl2")&&(_=t.getContext("webgl2",g)||t.getContext("experimental-webgl2",g)),!_&&n.includes("webgl1")&&(_=t.getContext("webgl",g)||t.getContext("experimental-webgl",g)),[2,new qve(_,{shaderDebug:p,trackResources:v})]})})},e.prototype.handleContextEvents=function(t){var r=this.pluginOptions,n=r.onContextLost,i=r.onContextRestored,a=r.onContextCreationError;a&&t.addEventListener("webglcontextcreationerror",a,!1),n&&t.addEventListener("webglcontextlost",n,!1),i&&t.addEventListener("webglcontextrestored",i,!1)},e})();let Dn;const X9=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&X9.decode();let lg=null;function My(){return(lg===null||lg.byteLength===0)&&(lg=new Uint8Array(Dn.memory.buffer)),lg}function D1(e,t){return e=e>>>0,X9.decode(My().subarray(e,e+t))}const iu=new Array(128).fill(void 0);iu.push(void 0,null,!0,!1);let Eg=iu.length;function Wve(e){Eg===iu.length&&iu.push(iu.length+1);const t=Eg;return Eg=iu[t],iu[t]=e,t}function Iy(e){return iu[e]}function $ve(e){e<132||(iu[e]=Eg,Eg=e)}function Yve(e){const t=Iy(e);return $ve(e),t}let Bp=0;const Py=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},Zve=typeof Py.encodeInto=="function"?function(e,t){return Py.encodeInto(e,t)}:function(e,t){const r=Py.encode(e);return t.set(r),{read:e.length,written:r.length}};function L1(e,t,r){if(r===void 0){const l=Py.encode(e),c=t(l.length,1)>>>0;return My().subarray(c,c+l.length).set(l),Bp=l.length,c}let n=e.length,i=t(n,1)>>>0;const a=My();let o=0;for(;o<n;o++){const l=e.charCodeAt(o);if(l>127)break;a[i+o]=l}if(o!==n){o!==0&&(e=e.slice(o)),i=r(i,n,n=o+e.length*3,1)>>>0;const l=My().subarray(i+o,i+n),c=Zve(e,l);o+=c.written}return Bp=o,i}let ug=null;function B1(){return(ug===null||ug.byteLength===0)&&(ug=new Int32Array(Dn.memory.buffer)),ug}function Kve(e,t,r){let n,i;try{const l=Dn.__wbindgen_add_to_stack_pointer(-16),c=L1(e,Dn.__wbindgen_malloc,Dn.__wbindgen_realloc),f=Bp,h=L1(t,Dn.__wbindgen_malloc,Dn.__wbindgen_realloc),p=Bp;Dn.glsl_compile(l,c,f,h,p,r);var a=B1()[l/4+0],o=B1()[l/4+1];return n=a,i=o,D1(a,o)}finally{Dn.__wbindgen_add_to_stack_pointer(16),Dn.__wbindgen_free(n,i,1)}}class Vg{static __wrap(t){t=t>>>0;const r=Object.create(Vg.prototype);return r.__wbg_ptr=t,r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();Dn.__wbg_wgslcomposer_free(t)}constructor(){const t=Dn.wgslcomposer_new();return Vg.__wrap(t)}load_composable(t){const r=L1(t,Dn.__wbindgen_malloc,Dn.__wbindgen_realloc),n=Bp;Dn.wgslcomposer_load_composable(this.__wbg_ptr,r,n)}wgsl_compile(t){let r,n;try{const o=Dn.__wbindgen_add_to_stack_pointer(-16),l=L1(t,Dn.__wbindgen_malloc,Dn.__wbindgen_realloc),c=Bp;Dn.wgslcomposer_wgsl_compile(o,this.__wbg_ptr,l,c);var i=B1()[o/4+0],a=B1()[o/4+1];return r=i,n=a,D1(i,a)}finally{Dn.__wbindgen_add_to_stack_pointer(16),Dn.__wbindgen_free(r,n,1)}}}async function Qve(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(n){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}else{const r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}function Jve(){const e={};return e.wbg={},e.wbg.__wbindgen_string_new=function(t,r){const n=D1(t,r);return Wve(n)},e.wbg.__wbindgen_object_drop_ref=function(t){Yve(t)},e.wbg.__wbg_log_1d3ae0273d8f4f8a=function(t){console.log(Iy(t))},e.wbg.__wbg_log_576ca876af0d4a77=function(t,r){console.log(Iy(t),Iy(r))},e.wbg.__wbindgen_throw=function(t,r){throw new Error(D1(t,r))},e}function ege(e,t){return Dn=e.exports,q9.__wbindgen_wasm_module=t,ug=null,lg=null,Dn}async function q9(e){if(Dn!==void 0)return Dn;const t=Jve();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:n}=await Qve(await e,t);return ege(r,n)}var mi;(function(e){e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.TEXTURE_BINDING=4]="TEXTURE_BINDING",e[e.STORAGE_BINDING=8]="STORAGE_BINDING",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(mi||(mi={}));var _C;(function(e){e[e.READ=1]="READ",e[e.WRITE=2]="WRITE"})(_C||(_C={}));function tge(e){var t=0;return e&ha.SAMPLED&&(t|=mi.TEXTURE_BINDING|mi.COPY_DST|mi.COPY_SRC),e&ha.STORAGE&&(t|=mi.TEXTURE_BINDING|mi.STORAGE_BINDING|mi.COPY_SRC|mi.COPY_DST),e&ha.RENDER_TARGET&&(t|=mi.RENDER_ATTACHMENT|mi.TEXTURE_BINDING|mi.COPY_SRC|mi.COPY_DST),t}function TO(e){if(e===ve.U8_R_NORM)return"r8unorm";if(e===ve.S8_R_NORM)return"r8snorm";if(e===ve.U8_RG_NORM)return"rg8unorm";if(e===ve.S8_RG_NORM)return"rg8snorm";if(e===ve.U32_R)return"r32uint";if(e===ve.S32_R)return"r32sint";if(e===ve.F32_R)return"r32float";if(e===ve.U16_RG)return"rg16uint";if(e===ve.S16_RG)return"rg16sint";if(e===ve.F16_RG)return"rg16float";if(e===ve.U8_RGBA_RT)return"bgra8unorm";if(e===ve.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";if(e===ve.U8_RGBA_NORM)return"rgba8unorm";if(e===ve.U8_RGBA_SRGB)return"rgba8unorm-srgb";if(e===ve.S8_RGBA_NORM)return"rgba8snorm";if(e===ve.U32_RG)return"rg32uint";if(e===ve.S32_RG)return"rg32sint";if(e===ve.F32_RG)return"rg32float";if(e===ve.U16_RGBA)return"rgba16uint";if(e===ve.S16_RGBA)return"rgba16sint";if(e===ve.F16_RGBA)return"rgba16float";if(e===ve.F32_RGBA)return"rgba32float";if(e===ve.U32_RGBA)return"rgba32uint";if(e===ve.S32_RGBA)return"rgba32sint";if(e===ve.D24)return"depth24plus";if(e===ve.D24_S8)return"depth24plus-stencil8";if(e===ve.D32F)return"depth32float";if(e===ve.D32F_S8)return"depth32float-stencil8";if(e===ve.BC1)return"bc1-rgba-unorm";if(e===ve.BC1_SRGB)return"bc1-rgba-unorm-srgb";if(e===ve.BC2)return"bc2-rgba-unorm";if(e===ve.BC2_SRGB)return"bc2-rgba-unorm-srgb";if(e===ve.BC3)return"bc3-rgba-unorm";if(e===ve.BC3_SRGB)return"bc3-rgba-unorm-srgb";if(e===ve.BC4_SNORM)return"bc4-r-snorm";if(e===ve.BC4_UNORM)return"bc4-r-unorm";if(e===ve.BC5_SNORM)return"bc5-rg-snorm";if(e===ve.BC5_UNORM)return"bc5-rg-unorm";throw"whoops"}function rge(e){if(e===Or.TEXTURE_2D)return"2d";if(e===Or.TEXTURE_CUBE_MAP)return"2d";if(e===Or.TEXTURE_2D_ARRAY)return"2d";if(e===Or.TEXTURE_3D)return"3d";throw new Error("whoops")}function nge(e){if(e===Or.TEXTURE_2D)return"2d";if(e===Or.TEXTURE_CUBE_MAP)return"cube";if(e===Or.TEXTURE_2D_ARRAY)return"2d-array";if(e===Or.TEXTURE_3D)return"3d";throw new Error("whoops")}function ige(e){var t=0;return e&fn.INDEX&&(t|=GPUBufferUsage.INDEX),e&fn.VERTEX&&(t|=GPUBufferUsage.VERTEX),e&fn.UNIFORM&&(t|=GPUBufferUsage.UNIFORM),e&fn.STORAGE&&(t|=GPUBufferUsage.STORAGE),e&fn.COPY_SRC&&(t|=GPUBufferUsage.COPY_SRC),e&fn.INDIRECT&&(t|=GPUBufferUsage.INDIRECT),t|=GPUBufferUsage.COPY_DST,t}function GR(e){if(e===Oa.CLAMP_TO_EDGE)return"clamp-to-edge";if(e===Oa.REPEAT)return"repeat";if(e===Oa.MIRRORED_REPEAT)return"mirror-repeat";throw new Error("whoops")}function Z6(e){if(e===Wn.BILINEAR)return"linear";if(e===Wn.POINT)return"nearest";throw new Error("whoops")}function age(e){if(e===yi.LINEAR)return"linear";if(e===yi.NEAREST)return"nearest";if(e===yi.NO_MIP)return"nearest";throw new Error("whoops")}function sp(e){var t=e;return t.gpuBuffer}function oge(e){var t=e;return t.gpuSampler}function sge(e){var t=e;return t.querySet}function lge(e){if(e===w1.OcclusionConservative)return"occlusion";throw new Error("whoops")}function uge(e){switch(e){case ii.TRIANGLES:return"triangle-list";case ii.POINTS:return"point-list";case ii.TRIANGLE_STRIP:return"triangle-strip";case ii.LINES:return"line-list";case ii.LINE_STRIP:return"line-strip";default:throw new Error("Unknown primitive topology mode")}}function cge(e){if(e===qa.NONE)return"none";if(e===qa.FRONT)return"front";if(e===qa.BACK)return"back";throw new Error("whoops")}function fge(e){if(e===zg.CCW)return"ccw";if(e===zg.CW)return"cw";throw new Error("whoops")}function dge(e,t){return{topology:uge(e),cullMode:cge(t.cullMode),frontFace:fge(t.frontFace)}}function K6(e){if(e===Cr.ZERO)return"zero";if(e===Cr.ONE)return"one";if(e===Cr.SRC)return"src";if(e===Cr.ONE_MINUS_SRC)return"one-minus-src";if(e===Cr.DST)return"dst";if(e===Cr.ONE_MINUS_DST)return"one-minus-dst";if(e===Cr.SRC_ALPHA)return"src-alpha";if(e===Cr.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";if(e===Cr.DST_ALPHA)return"dst-alpha";if(e===Cr.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";if(e===Cr.CONST)return"constant";if(e===Cr.ONE_MINUS_CONSTANT)return"one-minus-constant";if(e===Cr.SRC_ALPHA_SATURATE)return"src-alpha-saturated";throw new Error("whoops")}function hge(e){if(e===Ni.ADD)return"add";if(e===Ni.SUBSTRACT)return"subtract";if(e===Ni.REVERSE_SUBSTRACT)return"reverse-subtract";if(e===Ni.MIN)return"min";if(e===Ni.MAX)return"max";throw new Error("whoops")}function Q6(e){return{operation:hge(e.blendMode),srcFactor:K6(e.blendSrcFactor),dstFactor:K6(e.blendDstFactor)}}function J6(e){return e.blendMode===Ni.ADD&&e.blendSrcFactor===Cr.ONE&&e.blendDstFactor===Cr.ZERO}function pge(e){if(!(J6(e.rgbBlendState)&&J6(e.alphaBlendState)))return{color:Q6(e.rgbBlendState),alpha:Q6(e.alphaBlendState)}}function mge(e,t){return{format:TO(t),blend:pge(e),writeMask:e.channelWriteMask}}function vge(e,t){return t.attachmentsState.map(function(r,n){return mge(r,e[n])})}function Dy(e){if(e===Zr.NEVER)return"never";if(e===Zr.LESS)return"less";if(e===Zr.EQUAL)return"equal";if(e===Zr.LEQUAL)return"less-equal";if(e===Zr.GREATER)return"greater";if(e===Zr.NOTEQUAL)return"not-equal";if(e===Zr.GEQUAL)return"greater-equal";if(e===Zr.ALWAYS)return"always";throw new Error("whoops")}function Wh(e){if(e===Bn.KEEP)return"keep";if(e===Bn.REPLACE)return"replace";if(e===Bn.ZERO)return"zero";if(e===Bn.DECREMENT_CLAMP)return"decrement-clamp";if(e===Bn.DECREMENT_WRAP)return"decrement-wrap";if(e===Bn.INCREMENT_CLAMP)return"increment-clamp";if(e===Bn.INCREMENT_WRAP)return"increment-wrap";if(e===Bn.INVERT)return"invert";throw new Error("whoops")}function gge(e,t){if(!jo(e))return{format:TO(e),depthWriteEnabled:!!t.depthWrite,depthCompare:Dy(t.depthCompare),depthBias:t.polygonOffset?t.polygonOffsetUnits:0,depthBiasSlopeScale:t.polygonOffset?t.polygonOffsetFactor:0,stencilFront:{compare:Dy(t.stencilFront.compare),passOp:Wh(t.stencilFront.passOp),failOp:Wh(t.stencilFront.failOp),depthFailOp:Wh(t.stencilFront.depthFailOp)},stencilBack:{compare:Dy(t.stencilBack.compare),passOp:Wh(t.stencilBack.passOp),failOp:Wh(t.stencilBack.failOp),depthFailOp:Wh(t.stencilBack.depthFailOp)},stencilReadMask:4294967295,stencilWriteMask:4294967295}}function _ge(e){if(e!==null){if(e===ve.U16_R)return"uint16";if(e===ve.U32_R)return"uint32";throw new Error("whoops")}}function yge(e){if(e===Ed.VERTEX)return"vertex";if(e===Ed.INSTANCE)return"instance";throw new Error("whoops")}function Ege(e){if(e===ve.U8_R)return"uint8x2";if(e===ve.U8_RG)return"uint8x2";if(e===ve.U8_RGB)return"uint8x4";if(e===ve.U8_RGBA)return"uint8x4";if(e===ve.U8_RG_NORM)return"unorm8x2";if(e===ve.U8_RGBA_NORM)return"unorm8x4";if(e===ve.S8_RGB_NORM)return"snorm8x4";if(e===ve.S8_RGBA_NORM)return"snorm8x4";if(e===ve.U16_RG_NORM)return"unorm16x2";if(e===ve.U16_RGBA_NORM)return"unorm16x4";if(e===ve.S16_RG_NORM)return"snorm16x2";if(e===ve.S16_RGBA_NORM)return"snorm16x4";if(e===ve.S16_RG)return"uint16x2";if(e===ve.F16_RG)return"float16x2";if(e===ve.F16_RGBA)return"float16x4";if(e===ve.F32_R)return"float32";if(e===ve.F32_RG)return"float32x2";if(e===ve.F32_RGB)return"float32x3";if(e===ve.F32_RGBA)return"float32x4";throw"whoops"}function bge(e){var t=gl(e);switch(t){case Qe.BC1:case Qe.BC2:case Qe.BC3:case Qe.BC4_SNORM:case Qe.BC4_UNORM:case Qe.BC5_SNORM:case Qe.BC5_UNORM:return!0;default:return!1}}function xge(e){var t=gl(e);switch(t){case Qe.BC1:case Qe.BC2:case Qe.BC3:case Qe.BC4_SNORM:case Qe.BC4_UNORM:case Qe.BC5_SNORM:case Qe.BC5_UNORM:return 4;default:return 1}}function eF(e,t,r,n){switch(r===void 0&&(r=!1),e){case ve.S8_R:case ve.S8_R_NORM:case ve.S8_RG_NORM:case ve.S8_RGB_NORM:case ve.S8_RGBA_NORM:{var i=t instanceof ArrayBuffer?new Int8Array(t):new Int8Array(t);return n&&i.set(new Int8Array(n)),i}case ve.U8_R:case ve.U8_R_NORM:case ve.U8_RG:case ve.U8_RG_NORM:case ve.U8_RGB:case ve.U8_RGB_NORM:case ve.U8_RGB_SRGB:case ve.U8_RGBA:case ve.U8_RGBA_NORM:case ve.U8_RGBA_SRGB:{var a=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t);return n&&a.set(new Uint8Array(n)),a}case ve.S16_R:case ve.S16_RG:case ve.S16_RG_NORM:case ve.S16_RGB_NORM:case ve.S16_RGBA:case ve.S16_RGBA_NORM:{var o=t instanceof ArrayBuffer?new Int16Array(t):new Int16Array(r?t/2:t);return n&&o.set(new Int16Array(n)),o}case ve.U16_R:case ve.U16_RGB:case ve.U16_RGBA_5551:case ve.U16_RGBA_NORM:case ve.U16_RG_NORM:case ve.U16_R_NORM:{var l=t instanceof ArrayBuffer?new Uint16Array(t):new Uint16Array(r?t/2:t);return n&&l.set(new Uint16Array(n)),l}case ve.S32_R:{var c=t instanceof ArrayBuffer?new Int32Array(t):new Int32Array(r?t/4:t);return n&&c.set(new Int32Array(n)),c}case ve.U32_R:case ve.U32_RG:{var f=t instanceof ArrayBuffer?new Uint32Array(t):new Uint32Array(r?t/4:t);return n&&f.set(new Uint32Array(n)),f}case ve.F32_R:case ve.F32_RG:case ve.F32_RGB:case ve.F32_RGBA:{var h=t instanceof ArrayBuffer?new Float32Array(t):new Float32Array(r?t/4:t);return n&&h.set(new Float32Array(n)),h}}var p=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t);return n&&p.set(new Uint8Array(n)),p}function Sge(e){var t=(e&32768)>>15,r=(e&31744)>>10,n=e&1023;return r===0?(t?-1:1)*Math.pow(2,-14)*(n/Math.pow(2,10)):r==31?n?NaN:(t?-1:1)*(1/0):(t?-1:1)*Math.pow(2,r-15)*(1+n/Math.pow(2,10))}function G9(e){switch(e){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw new Error("No fixed size for Stencil8 format!");case"depth16unorm":return{width:1,height:1,length:2};case"depth24plus":throw new Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw new Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float":return{width:1,height:1,length:4};case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};default:return{width:1,height:1,length:4}}}var Os=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=e.call(this)||this;return a.id=n,a.device=i,a}return t.prototype.destroy=function(){},t})(M9),Tge=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o,l,c=e.call(this,{id:n,device:i})||this;c.type=qr.Bindings;var f=a.pipeline;gr(!!f);var h=a.uniformBufferBindings,p=a.storageBufferBindings,v=a.samplerBindings,g=a.storageTextureBindings;c.numUniformBuffers=h?.length||0;var _=[[],[],[],[]],E=0;if(h&&h.length)for(var b=0;b<h.length;b++){var S=a.uniformBufferBindings[b],T=S.binding,C=S.size,M=S.offset,D=S.buffer,I={buffer:sp(D),offset:M??0,size:C};_[0].push({binding:T??E++,resource:I})}if(v&&v.length){E=0;for(var b=0;b<v.length;b++){var N=Pn(Pn({},v[b]),j9),T=a.samplerBindings[b],j=T.texture!==null?T.texture:c.device.getFallbackTexture(N);N.dimension=j.dimension,N.formatKind=D9(j.format);var re=j.gpuTextureView;if(_[1].push({binding:(o=T.textureBinding)!==null&&o!==void 0?o:E++,resource:re}),T.samplerBinding!==-1){var Q=T.sampler!==null?T.sampler:c.device.getFallbackSampler(N),X=oge(Q);_[1].push({binding:(l=T.samplerBinding)!==null&&l!==void 0?l:E++,resource:X})}}}if(p&&p.length){E=0;for(var b=0;b<p.length;b++){var R=a.storageBufferBindings[b],T=R.binding,C=R.size,M=R.offset,D=R.buffer,I={buffer:sp(D),offset:M??0,size:C};_[2].push({binding:T??E++,resource:I})}}if(g&&g.length){E=0;for(var b=0;b<g.length;b++){var P=a.storageTextureBindings[b],T=P.binding,j=P.texture,re=j.gpuTextureView;_[3].push({binding:T??E++,resource:re})}}var V=_.findLastIndex(function(le){return!!le.length});return c.gpuBindGroup=_.map(function(le,w){return w<=V&&c.device.device.createBindGroup({layout:f.getBindGroupLayout(w),entries:le})}),c}return t})(Os),Age=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;o.type=qr.Buffer;var l=a.usage,c=a.viewOrSize,f=!!(l&fn.MAP_READ);o.usage=ige(l),f&&(o.usage=fn.MAP_READ|fn.COPY_DST);var h=!ap(c);if(o.view=ap(c)?null:c,o.size=ap(c)?M1(c,4):M1(c.byteLength,4),ap(c))o.gpuBuffer=o.device.device.createBuffer({usage:o.usage,size:o.size,mappedAtCreation:f?h:!1});else{o.gpuBuffer=o.device.device.createBuffer({usage:o.usage,size:o.size,mappedAtCreation:!0});var p=c&&c.constructor||Float32Array;new p(o.gpuBuffer.getMappedRange()).set(c),o.gpuBuffer.unmap()}return o}return t.prototype.setSubData=function(r,n,i,a){i===void 0&&(i=0),a===void 0&&(a=0);var o=this.gpuBuffer;a=a||n.byteLength,a=Math.min(a,this.size-r);var l=n.byteOffset+i,c=l+a,f=a+3&-4;if(f!==a){var h=new Uint8Array(n.buffer.slice(l,c));n=new Uint8Array(f),n.set(h),i=0,l=0,c=f,a=f}for(var p=1024*1024*15,v=0;c-(l+v)>p;)this.device.device.queue.writeBuffer(o,r+v,n.buffer,l+v,p),v+=p;this.device.device.queue.writeBuffer(o,r+v,n.buffer,l+v,a-v)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuBuffer.destroy()},t})(Os),tF=(function(){function e(){this.gpuComputePassEncoder=null}return e.prototype.dispatchWorkgroups=function(t,r,n){this.gpuComputePassEncoder.dispatchWorkgroups(t,r,n)},e.prototype.dispatchWorkgroupsIndirect=function(t,r){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(t.gpuBuffer,r)},e.prototype.finish=function(){this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.frameCommandEncoder=null},e.prototype.beginComputePass=function(t){gr(this.gpuComputePassEncoder===null),this.frameCommandEncoder=t,this.gpuComputePassEncoder=this.frameCommandEncoder.beginComputePass(this.gpuComputePassDescriptor)},e.prototype.setPipeline=function(t){var r=t,n=Kf(r.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(n)},e.prototype.setBindings=function(t){var r=this,n=t;n.gpuBindGroup.forEach(function(i,a){i&&r.gpuComputePassEncoder.setBindGroup(a,n.gpuBindGroup[a])})},e.prototype.pushDebugGroup=function(t){this.gpuComputePassEncoder.pushDebugGroup(t)},e.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(t){this.gpuComputePassEncoder.insertDebugMarker(t)},e})(),Rge=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;o.type=qr.ComputePipeline,o.gpuComputePipeline=null,o.descriptor=a;var l=a.program,c=l.computeStage;if(c===null)return o;var f={layout:"auto",compute:Pn({},c)};return o.gpuComputePipeline=o.device.device.createComputePipeline(f),o.name!==void 0&&(o.gpuComputePipeline.label=o.name),o}return t.prototype.getBindGroupLayout=function(r){return this.gpuComputePipeline.getBindGroupLayout(r)},t})(Os),Cge=(function(e){kn(t,e);function t(r){var n,i,a,o,l=r.id,c=r.device,f=r.descriptor,h=e.call(this,{id:l,device:c})||this;h.type=qr.InputLayout;var p=[];try{for(var v=yd(f.vertexBufferDescriptors),g=v.next();!g.done;g=v.next()){var _=g.value,E=_.arrayStride,b=_.stepMode,S=_.attributes;p.push({arrayStride:E,stepMode:yge(b),attributes:[]});try{for(var T=(a=void 0,yd(S)),C=T.next();!C.done;C=T.next()){var M=C.value,D=M.shaderLocation,I=M.format,N=M.offset;p[p.length-1].attributes.push({shaderLocation:D,format:Ege(I),offset:N})}}catch(j){a={error:j}}finally{try{C&&!C.done&&(o=T.return)&&o.call(T)}finally{if(a)throw a.error}}}}catch(j){n={error:j}}finally{try{g&&!g.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}return h.indexFormat=_ge(f.indexBufferFormat),h.buffers=p,h}return t})(Os),rF=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;return o.type=qr.Program,o.vertexStage=null,o.fragmentStage=null,o.computeStage=null,o.descriptor=a,a.vertex&&(o.vertexStage=o.createShaderStage(a.vertex,"vertex")),a.fragment&&(o.fragmentStage=o.createShaderStage(a.fragment,"fragment")),a.compute&&(o.computeStage=o.createShaderStage(a.compute,"compute")),o}return t.prototype.setUniformsLegacy=function(r){},t.prototype.createShaderStage=function(r,n){var i,a,o=r.glsl,l=r.wgsl,c=r.entryPoint,f=r.postprocess,h=!1,p=l;if(!p)try{p=this.device.glsl_compile(o,n,h)}catch(S){throw console.error(S,o),new Error("whoops")}var v=function(S){if(!p.includes(S))return"continue";p=p.replace("var T_".concat(S,": texture_2d<f32>;"),"var T_".concat(S,": texture_depth_2d;")),p=p.replace(new RegExp("textureSample\\(T_".concat(S,"(.*)\\);$"),"gm"),function(T,C){return"vec4<f32>(textureSample(T_".concat(S).concat(C,"), 0.0, 0.0, 0.0);")})};try{for(var g=yd(["u_TextureFramebufferDepth"]),_=g.next();!_.done;_=g.next()){var E=_.value;v(E)}}catch(S){i={error:S}}finally{try{_&&!_.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}f&&(p=f(p));var b=this.device.device.createShaderModule({code:p});return{module:b,entryPoint:c||"main"}},t})(Os),Oge=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;o.type=qr.QueryPool;var l=a.elemCount,c=a.type;return o.querySet=o.device.device.createQuerySet({type:lge(c),count:l}),o.resolveBuffer=o.device.device.createBuffer({size:l*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),o.cpuBuffer=o.device.device.createBuffer({size:l*8,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),o.results=null,o}return t.prototype.queryResultOcclusion=function(r){return this.results===null?null:this.results[r]!==BigInt(0)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},t})(Os),wge=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=e.call(this,{id:n,device:i})||this;return a.type=qr.Readback,a}return t.prototype.readTexture=function(r,n,i,a,o,l,c,f){return c===void 0&&(c=0),gp(this,void 0,void 0,function(){var h,p,v,g,_,E,b,S;return _p(this,function(T){return h=r,p=0,v=G9(h.gpuTextureformat),g=Math.ceil(a/v.width)*v.length,_=Math.ceil(g/256)*256,E=_*o,b=this.device.createBuffer({usage:fn.STORAGE|fn.MAP_READ|fn.COPY_DST,hint:Ss.STATIC,viewOrSize:E}),S=this.device.device.createCommandEncoder(),S.copyTextureToBuffer({texture:h.gpuTexture,mipLevel:0,origin:{x:n,y:i,z:Math.max(p,0)}},{buffer:b.gpuBuffer,offset:0,bytesPerRow:_},{width:a,height:o,depthOrArrayLayers:1}),this.device.device.queue.submit([S.finish()]),[2,this.readBuffer(b,0,l.byteLength===E?l:null,c,E,h.format,!0,!1,g,_,o)]})})},t.prototype.readTextureSync=function(r,n,i,a,o,l,c,f){throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},t.prototype.readBuffer=function(r,n,i,a,o,l,c,f,h,p,v){var g=this;n===void 0&&(n=0),i===void 0&&(i=null),o===void 0&&(o=0),l===void 0&&(l=ve.U8_RGB),c===void 0&&(c=!1),h===void 0&&(h=0),p===void 0&&(p=0),v===void 0&&(v=0);var _=r,E=o||_.size,b=i||_.view,S=b&&b.constructor&&b.constructor.BYTES_PER_ELEMENT||P9(l),T=_;if(!(_.usage&fn.MAP_READ&&_.usage&fn.COPY_DST)){var C=this.device.device.createCommandEncoder();T=this.device.createBuffer({usage:fn.STORAGE|fn.MAP_READ|fn.COPY_DST,hint:Ss.STATIC,viewOrSize:E}),C.copyBufferToBuffer(_.gpuBuffer,n,T.gpuBuffer,0,E),this.device.device.queue.submit([C.finish()])}return new Promise(function(M,D){T.gpuBuffer.mapAsync(_C.READ,n,E).then(function(){var I=T.gpuBuffer.getMappedRange(n,E),N=b;if(c)N===null?N=eF(l,E,!0,I):N=eF(l,N.buffer,void 0,I);else if(N===null)switch(S){case 1:N=new Uint8Array(E),N.set(new Uint8Array(I));break;case 2:N=g.getHalfFloatAsFloatRGBAArrayBuffer(E/2,I);break;case 4:N=new Float32Array(E/4),N.set(new Float32Array(I));break}else switch(S){case 1:N=new Uint8Array(N.buffer),N.set(new Uint8Array(I));break;case 2:N=g.getHalfFloatAsFloatRGBAArrayBuffer(E/2,I,b);break;case 4:var j=b&&b.constructor||Float32Array;N=new j(N.buffer),N.set(new j(I));break}if(h!==p){S===1&&!c&&(h*=2,p*=2);for(var re=new Uint8Array(N.buffer),Q=h,X=0,R=1;R<v;++R){X=R*p;for(var P=0;P<h;++P)re[Q++]=re[X++]}S!==0&&!c?N=new Float32Array(re.buffer,0,Q/4):N=new Uint8Array(re.buffer,0,Q)}T.gpuBuffer.unmap(),M(N)},function(I){return D(I)})})},t.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(r,n,i){i||(i=new Float32Array(r));for(var a=new Uint16Array(n);r--;)i[r]=Sge(a[r]);return i},t})(Os),nF=(function(){function e(t){this.device=t,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return e.prototype.getEncoder=function(){var t;return((t=this.renderBundle)===null||t===void 0?void 0:t.renderBundleEncoder)||this.gpuRenderPassEncoder},e.prototype.getTextureView=function(t,r){return gr(r<t.mipLevelCount),t.mipLevelCount===1?t.gpuTextureView:t.gpuTexture.createView({baseMipLevel:r,mipLevelCount:1})},e.prototype.setRenderPassDescriptor=function(t){var r,n,i,a,o,l;this.descriptor=t,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var c=t.colorAttachment.length;this.gfxColorAttachment.length=c,this.gfxColorResolveTo.length=c;for(var f=0;f<t.colorAttachment.length;f++){var h=t.colorAttachment[f],p=t.colorResolveTo[f];if(h===null&&p!==null&&(h=p,p=null),this.gfxColorAttachment[f]=h,this.gfxColorResolveTo[f]=p,this.gfxColorAttachmentLevel[f]=((r=t.colorAttachmentLevel)===null||r===void 0?void 0:r[f])||0,this.gfxColorResolveToLevel[f]=((n=t.colorResolveToLevel)===null||n===void 0?void 0:n[f])||0,h!==null){this.gpuColorAttachments[f]===void 0&&(this.gpuColorAttachments[f]={});var v=this.gpuColorAttachments[f];v.view=this.getTextureView(h,((i=this.gfxColorAttachmentLevel)===null||i===void 0?void 0:i[f])||0);var g=(o=(a=t.colorClearColor)===null||a===void 0?void 0:a[f])!==null&&o!==void 0?o:"load";g==="load"?v.loadOp="load":(v.loadOp="clear",v.clearValue=g),v.storeOp=!((l=t.colorStore)===null||l===void 0)&&l[f]?"store":"discard",v.resolveTarget=void 0,p!==null&&(h.sampleCount>1?v.resolveTarget=this.getTextureView(p,this.gfxColorResolveToLevel[f]):v.storeOp="store")}else{this.gpuColorAttachments.length=f,this.gfxColorAttachment.length=f,this.gfxColorResolveTo.length=f;break}}if(this.gfxDepthStencilAttachment=t.depthStencilAttachment,this.gfxDepthStencilResolveTo=t.depthStencilResolveTo,t.depthStencilAttachment){var _=t.depthStencilAttachment,v=this.gpuDepthStencilAttachment;v.view=_.gpuTextureView;var E=!!(Ip(_.format)&wt.Depth);E?(t.depthClearValue==="load"?v.depthLoadOp="load":(v.depthLoadOp="clear",v.depthClearValue=t.depthClearValue),t.depthStencilStore||this.gfxDepthStencilResolveTo!==null?v.depthStoreOp="store":v.depthStoreOp="discard"):(v.depthLoadOp=void 0,v.depthStoreOp=void 0);var b=!!(Ip(_.format)&wt.Stencil);b?(t.stencilClearValue==="load"?v.stencilLoadOp="load":(v.stencilLoadOp="clear",v.stencilClearValue=t.stencilClearValue),t.depthStencilStore||this.gfxDepthStencilResolveTo!==null?v.stencilStoreOp="store":v.stencilStoreOp="discard"):(v.stencilLoadOp=void 0,v.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=jo(t.occlusionQueryPool)?void 0:sge(t.occlusionQueryPool)},e.prototype.beginRenderPass=function(t,r){gr(this.gpuRenderPassEncoder===null),this.setRenderPassDescriptor(r),this.frameCommandEncoder=t,this.gpuRenderPassEncoder=this.frameCommandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},e.prototype.flipY=function(t,r){var n=this.device.swapChainHeight;return n-t-r},e.prototype.setViewport=function(t,r,n,i,a,o){a===void 0&&(a=0),o===void 0&&(o=1),this.gpuRenderPassEncoder.setViewport(t,this.flipY(r,i),n,i,a,o)},e.prototype.setScissorRect=function(t,r,n,i){this.gpuRenderPassEncoder.setScissorRect(t,this.flipY(r,i),n,i)},e.prototype.setPipeline=function(t){var r=t,n=Kf(r.gpuRenderPipeline);this.getEncoder().setPipeline(n)},e.prototype.setVertexInput=function(t,r,n){if(t!==null){var i=this.getEncoder(),a=t;n!==null&&i.setIndexBuffer(sp(n.buffer),Kf(a.indexFormat),n.offset);for(var o=0;o<r.length;o++){var l=r[o];l!==null&&i.setVertexBuffer(o,sp(l.buffer),l.offset)}}},e.prototype.setBindings=function(t){var r=t,n=this.getEncoder();r.gpuBindGroup.forEach(function(i,a){i&&n.setBindGroup(a,r.gpuBindGroup[a])})},e.prototype.setStencilReference=function(t){this.gpuRenderPassEncoder.setStencilReference(t)},e.prototype.draw=function(t,r,n,i){this.getEncoder().draw(t,r,n,i)},e.prototype.drawIndexed=function(t,r,n,i,a){this.getEncoder().drawIndexed(t,r,n,i,a)},e.prototype.drawIndirect=function(t,r){this.getEncoder().drawIndirect(sp(t),r)},e.prototype.drawIndexedIndirect=function(t,r){this.getEncoder().drawIndexedIndirect(sp(t),r)},e.prototype.beginOcclusionQuery=function(t){this.gpuRenderPassEncoder.beginOcclusionQuery(t)},e.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},e.prototype.pushDebugGroup=function(t){this.gpuRenderPassEncoder.pushDebugGroup(t)},e.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(t){this.gpuRenderPassEncoder.insertDebugMarker(t)},e.prototype.beginBundle=function(t){this.renderBundle=t},e.prototype.endBundle=function(){this.renderBundle.finish()},e.prototype.executeBundles=function(t){this.gpuRenderPassEncoder.executeBundles(t.map(function(r){return r.renderBundle}))},e.prototype.finish=function(){var t;(t=this.gpuRenderPassEncoder)===null||t===void 0||t.end(),this.gpuRenderPassEncoder=null;for(var r=0;r<this.gfxColorAttachment.length;r++){var n=this.gfxColorAttachment[r],i=this.gfxColorResolveTo[r];n!==null&&i!==null&&n.sampleCount===1&&this.copyAttachment(i,this.gfxColorAttachmentLevel[r],n,this.gfxColorResolveToLevel[r])}this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.frameCommandEncoder=null},e.prototype.copyAttachment=function(t,r,n,i){gr(n.sampleCount===1);var a={texture:n.gpuTexture,mipLevel:i},o={texture:t.gpuTexture,mipLevel:r};gr(n.width>>>i===t.width>>>r),gr(n.height>>>i===t.height>>>r),gr(!!(n.usage&mi.COPY_SRC)),gr(!!(t.usage&mi.COPY_DST)),this.frameCommandEncoder.copyTextureToTexture(a,o,[t.width,t.height,1])},e})(),Nge=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=e.call(this,{id:n,device:i})||this;return o.type=qr.RenderPipeline,o.isCreatingAsync=!1,o.gpuRenderPipeline=null,o.descriptor=a,o.device.createRenderPipelineInternal(o,!1),o}return t.prototype.getBindGroupLayout=function(r){return this.gpuRenderPipeline.getBindGroupLayout(r)},t})(Os),Mge=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o,l,c=e.call(this,{id:n,device:i})||this;c.type=qr.Sampler;var f=a.lodMinClamp,h=a.mipmapFilter===yi.NO_MIP?a.lodMinClamp:a.lodMaxClamp,p=(o=a.maxAnisotropy)!==null&&o!==void 0?o:1;return p>1&&gr(a.minFilter===Wn.BILINEAR&&a.magFilter===Wn.BILINEAR&&a.mipmapFilter===yi.LINEAR),c.gpuSampler=c.device.device.createSampler({addressModeU:GR(a.addressModeU),addressModeV:GR(a.addressModeV),addressModeW:GR((l=a.addressModeW)!==null&&l!==void 0?l:a.addressModeU),lodMinClamp:f,lodMaxClamp:h,minFilter:Z6(a.minFilter),magFilter:Z6(a.magFilter),mipmapFilter:age(a.mipmapFilter),compare:a.compareFunction!==void 0?Dy(a.compareFunction):void 0,maxAnisotropy:p}),c}return t})(Os),uy=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=r.descriptor,o=r.skipCreate,l=r.sampleCount,c=e.call(this,{id:n,device:i})||this;c.type=qr.Texture,c.flipY=!1;var f=a.format,h=a.dimension,p=a.width,v=a.height,g=a.depthOrArrayLayers,_=a.mipLevelCount,E=a.usage,b=a.pixelStore;return c.flipY=!!b?.unpackFlipY,c.device.createTextureShared({format:f,dimension:h??Or.TEXTURE_2D,width:p,height:v,depthOrArrayLayers:g??1,mipLevelCount:_??1,usage:E,sampleCount:l??1},c,o),c}return t.prototype.textureFromImageBitmapOrCanvas=function(r,n,i){for(var a=n[0].width,o=n[0].height,l={size:{width:a,height:o,depthOrArrayLayers:i},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},c=r.createTexture(l),f=0;f<n.length;f++)r.queue.copyExternalImageToTexture({source:n[f],flipY:this.flipY},{texture:c,origin:[0,0,f]},[a,o]);return[c,a,o]},t.prototype.isImageBitmapOrCanvases=function(r){var n=r[0];return n instanceof ImageBitmap||n instanceof HTMLCanvasElement||n instanceof OffscreenCanvas},t.prototype.isVideo=function(r){var n=r[0];return n instanceof HTMLVideoElement},t.prototype.setImageData=function(r,n){var i,a=this,o=this.device.device,l,c,f;if(this.isImageBitmapOrCanvases(r))i=ms(this.textureFromImageBitmapOrCanvas(o,r,this.depthOrArrayLayers),3),l=i[0],c=i[1],f=i[2];else if(this.isVideo(r))l=o.importExternalTexture({source:r[0]});else{var h=G9(this.gpuTextureformat),p=Math.ceil(this.width/h.width)*h.length;r.forEach(function(v){o.queue.writeTexture({texture:a.gpuTexture},v,{bytesPerRow:p},{width:a.width,height:a.height})})}this.width=c,this.height=f,l&&(this.gpuTexture=l),this.gpuTextureView=this.gpuTexture.createView({dimension:nge(this.dimension)})},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuTexture.destroy()},t})(Os),Ige=(function(e){kn(t,e);function t(r){var n=r.id,i=r.device,a=e.call(this,{id:n,device:i})||this;return a.type=qr.RenderBundle,a.renderBundleEncoder=a.device.device.createRenderBundleEncoder({colorFormats:[a.device.swapChainFormat]}),a}return t.prototype.finish=function(){this.renderBundle=this.renderBundleEncoder.finish()},t})(Os),Pge=(function(){function e(t,r,n,i,a,o){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=mi.RENDER_ATTACHMENT|mi.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.frameCommandEncoderPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=bs.UPPER_LEFT,this.clipSpaceNearZ=Mp.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=r,this.canvas=n,this.canvasContext=i,this.glsl_compile=a,this.WGSLComposer=o,this.fallbackTexture2D=this.createFallbackTexture(Or.TEXTURE_2D,Ln.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(Or.TEXTURE_2D,Ln.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(Or.TEXTURE_2D_ARRAY,Ln.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(Or.TEXTURE_3D,Ln.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(Or.TEXTURE_CUBE_MAP,Ln.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:Oa.REPEAT,addressModeV:Oa.REPEAT,minFilter:Wn.POINT,magFilter:Wn.POINT,mipmapFilter:yi.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:Oa.REPEAT,addressModeV:Oa.REPEAT,minFilter:Wn.POINT,magFilter:Wn.POINT,mipmapFilter:yi.NEAREST,compareFunction:Zr.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(l){console.error(l.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return e.prototype.destroy=function(){},e.prototype.configureSwapChain=function(t,r){this.swapChainWidth===t&&this.swapChainHeight===r||(this.swapChainWidth=t,this.swapChainHeight=r)},e.prototype.getOnscreenTexture=function(){var t=this.canvasContext.getCurrentTexture(),r=t.createView(),n=new uy({id:0,device:this,descriptor:{format:ve.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:Or.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return n.depthOrArrayLayers=1,n.sampleCount=1,n.gpuTexture=t,n.gpuTextureView=r,n.name="Onscreen",this.setResourceName(n,"Onscreen Texture"),n},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.canvas},e.prototype.beginFrame=function(){gr(this.frameCommandEncoderPool.length===0)},e.prototype.endFrame=function(){gr(this.frameCommandEncoderPool.every(function(t){return t!==null})),this.device.queue.submit(this.frameCommandEncoderPool.map(function(t){return t.finish()})),this.frameCommandEncoderPool=[]},e.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},e.prototype.createBuffer=function(t){return new Age({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createTexture=function(t){return new uy({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createSampler=function(t){return new Mge({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createRenderTarget=function(t){var r=new uy({id:this.getNextUniqueId(),device:this,descriptor:Pn(Pn({},t),{dimension:Or.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:ha.RENDER_TARGET}),sampleCount:t.sampleCount});return r.depthOrArrayLayers=1,r.type=qr.RenderTarget,r},e.prototype.createRenderTargetFromTexture=function(t){var r=t,n=r.format,i=r.width,a=r.height,o=r.depthOrArrayLayers,l=r.sampleCount,c=r.mipLevelCount,f=r.gpuTexture,h=r.gpuTextureView,p=r.usage;gr(!!(p&mi.RENDER_ATTACHMENT));var v=new uy({id:this.getNextUniqueId(),device:this,descriptor:{format:n,width:i,height:a,depthOrArrayLayers:o,dimension:Or.TEXTURE_2D,mipLevelCount:c,usage:p},skipCreate:!0});return v.depthOrArrayLayers=o,v.sampleCount=l,v.gpuTexture=f,v.gpuTextureView=h,v},e.prototype.createProgram=function(t){var r,n;return!((r=t.vertex)===null||r===void 0)&&r.glsl&&(t.vertex.glsl=Lp(this.queryVendorInfo(),"vert",t.vertex.glsl)),!((n=t.fragment)===null||n===void 0)&&n.glsl&&(t.fragment.glsl=Lp(this.queryVendorInfo(),"frag",t.fragment.glsl)),new rF({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createProgramSimple=function(t){return new rF({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createTextureShared=function(t,r,n){var i={width:t.width,height:t.height,depthOrArrayLayers:t.depthOrArrayLayers},a=t.mipLevelCount,o=TO(t.format),l=rge(t.dimension),c=tge(t.usage);if(r.gpuTextureformat=o,r.dimension=t.dimension,r.format=t.format,r.width=t.width,r.height=t.height,r.depthOrArrayLayers=t.depthOrArrayLayers,r.mipLevelCount=a,r.usage=c,r.sampleCount=t.sampleCount,!n){var f=this.device.createTexture({size:i,mipLevelCount:a,format:o,dimension:l,sampleCount:t.sampleCount,usage:c}),h=f.createView();r.gpuTexture=f,r.gpuTextureView=h}},e.prototype.getFallbackSampler=function(t){var r=t.formatKind;return r===Ln.Depth&&t.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},e.prototype.getFallbackTexture=function(t){var r=t.dimension,n=t.formatKind;if(r===Or.TEXTURE_2D)return n===Ln.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(r===Or.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(r===Or.TEXTURE_3D)return this.fallbackTexture3D;if(r===Or.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},e.prototype.createFallbackTexture=function(t,r){var n=t===Or.TEXTURE_CUBE_MAP?6:1,i=r===Ln.Float?ve.U8_RGBA_NORM:ve.D24;return this.createTexture({dimension:t,format:i,usage:ha.SAMPLED,width:1,height:1,depthOrArrayLayers:n,mipLevelCount:1})},e.prototype.createBindings=function(t){return new Tge({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createInputLayout=function(t){return new Cge({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createComputePipeline=function(t){return new Rge({id:this.getNextUniqueId(),device:this,descriptor:t})},e.prototype.createRenderPipeline=function(t){return new Nge({id:this.getNextUniqueId(),device:this,descriptor:Pn({},t)})},e.prototype.createQueryPool=function(t,r){return new Oge({id:this.getNextUniqueId(),device:this,descriptor:{type:t,elemCount:r}})},e.prototype.createRenderPipelineInternal=function(t,r){var n;if(t.gpuRenderPipeline===null){var i=t.descriptor,a=i.program,o=a.vertexStage,l=a.fragmentStage;if(!(o===null||l===null)){var c=i.megaStateDescriptor||{},f=c.stencilBack,h=c.stencilFront,p=kme(c,["stencilBack","stencilFront"]),v=Pp(Dp);i.megaStateDescriptor=Pn(Pn(Pn({},v),{stencilBack:Pn(Pn({},v.stencilBack),f),stencilFront:Pn(Pn({},v.stencilFront),h)}),p);var g=i.megaStateDescriptor.attachmentsState[0];i.colorAttachmentFormats.forEach(function(M,D){i.megaStateDescriptor.attachmentsState[D]||(i.megaStateDescriptor.attachmentsState[D]=U9(void 0,g))});var _=dge((n=i.topology)!==null&&n!==void 0?n:ii.TRIANGLES,i.megaStateDescriptor),E=vge(i.colorAttachmentFormats,i.megaStateDescriptor),b=gge(i.depthStencilAttachmentFormat,i.megaStateDescriptor),S=void 0;i.inputLayout!==null&&(S=i.inputLayout.buffers);var T=i.sampleCount,C={layout:"auto",vertex:Pn(Pn({},o),{buffers:S}),primitive:_,depthStencil:b,multisample:{count:T},fragment:Pn(Pn({},l),{targets:E})};t.gpuRenderPipeline=this.device.createRenderPipeline(C)}}},e.prototype.createReadback=function(){return new wge({id:this.getNextUniqueId(),device:this})},e.prototype.createRenderBundle=function(){return new Ige({id:this.getNextUniqueId(),device:this})},e.prototype.createRenderPass=function(t){var r=this.renderPassPool.pop();r===void 0&&(r=new nF(this));var n=this.frameCommandEncoderPool.pop();return n===void 0&&(n=this.device.createCommandEncoder()),r.beginRenderPass(n,t),r},e.prototype.createComputePass=function(){var t=this.computePassPool.pop();t===void 0&&(t=new tF);var r=this.frameCommandEncoderPool.pop();return r===void 0&&(r=this.device.createCommandEncoder()),t.beginComputePass(r),t},e.prototype.submitPass=function(t){var r=t;r instanceof nF?(this.frameCommandEncoderPool.push(r.frameCommandEncoder),r.finish(),this.renderPassPool.push(r)):r instanceof tF&&(this.frameCommandEncoderPool.push(r.frameCommandEncoder),r.finish(),this.computePassPool.push(r))},e.prototype.copySubTexture2D=function(t,r,n,i,a,o,l){var c=this.device.createCommandEncoder(),f=t,h=i,p={texture:h.gpuTexture,origin:[a,o,0],mipLevel:0,aspect:"all"},v={texture:f.gpuTexture,origin:[r,n,0],mipLevel:0,aspect:"all"};gr(!!(h.usage&mi.COPY_SRC)),gr(!!(f.usage&mi.COPY_DST)),c.copyTextureToTexture(p,v,[h.width,h.height,l||1]),this.device.queue.submit([c.finish()])},e.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},e.prototype.queryTextureFormatSupported=function(t,r,n){if(bge(t)){if(!this.featureTextureCompressionBC)return!1;var i=xge(t);return r%i!==0||n%i!==0?!1:this.featureTextureCompressionBC}switch(t){case ve.U16_RGBA_NORM:return!1;case ve.F32_RGBA:return!1}return!0},e.prototype.queryPlatformAvailable=function(){return!0},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(t){var r=t;return r.descriptor},e.prototype.queryRenderTarget=function(t){var r=t;return r},e.prototype.setResourceName=function(t,r){if(t.name=r,t.type===qr.Buffer){var n=t;n.gpuBuffer.label=r}else if(t.type===qr.Texture){var n=t;n.gpuTexture.label=r,n.gpuTextureView.label=r}else if(t.type===qr.RenderTarget){var n=t;n.gpuTexture.label=r,n.gpuTextureView.label=r}else if(t.type===qr.Sampler){var n=t;n.gpuSampler.label=r}else if(t.type===qr.RenderPipeline){var n=t;n.gpuRenderPipeline!==null&&(n.gpuRenderPipeline.label=r)}},e.prototype.setResourceLeakCheck=function(t,r){},e.prototype.checkForLeaks=function(){},e.prototype.programPatched=function(t){},e.prototype.pipelineQueryReady=function(t){var r=t;return r.gpuRenderPipeline!==null},e.prototype.pipelineForceReady=function(t){var r=t;this.createRenderPipelineInternal(r,!1)},e})(),Dge=(function(){function e(t){this.pluginOptions=t}return e.prototype.createSwapChain=function(t){return gp(this,void 0,void 0,function(){var r,n,i,a,o,l,c,f;return _p(this,function(h){switch(h.label){case 0:if(globalThis.navigator.gpu===void 0)return[2,null];r=null,h.label=1;case 1:return h.trys.push([1,3,,4]),n=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:n})];case 2:return r=h.sent(),[3,4];case 3:return i=h.sent(),console.log(i),[3,4];case 4:return r===null?[2,null]:(a=["depth32float-stencil8","texture-compression-bc","float32-filterable"],o=a.filter(function(p){return r.features.has(p)}),[4,r.requestDevice({requiredFeatures:o})]);case 5:if(l=h.sent(),l&&(c=this.pluginOptions.onContextLost,l.lost.then(function(){c&&c()})),l===null)return[2,null];if(f=t.getContext("webgpu"),!f)return[2,null];h.label=6;case 6:return h.trys.push([6,8,,9]),[4,q9(this.pluginOptions.shaderCompilerPath)];case 7:return h.sent(),[3,9];case 8:return h.sent(),[3,9];case 9:return[2,new Pge(r,l,t,f,Kve,Vg&&new Vg)]}})})},e})(),Lge=class{constructor(e,t){const{buffer:r,offset:n,stride:i,normalized:a,size:o,divisor:l,shaderLocation:c}=t;this.buffer=r,this.attribute={shaderLocation:c,buffer:r.get(),offset:n||0,stride:i||0,normalized:a||!1,divisor:l||0},o&&(this.attribute.size=o)}get(){return this.buffer}updateBuffer(e){this.buffer.subData(e)}destroy(){this.buffer.destroy()}},F1={[L.FLOAT]:Float32Array,[L.UNSIGNED_BYTE]:Uint8Array,[L.SHORT]:Int16Array,[L.UNSIGNED_SHORT]:Uint16Array,[L.INT]:Int32Array,[L.UNSIGNED_INT]:Uint32Array},Bge={[L.POINTS]:ii.POINTS,[L.LINES]:ii.LINES,[L.LINE_LOOP]:ii.LINES,[L.LINE_STRIP]:ii.LINE_STRIP,[L.TRIANGLES]:ii.TRIANGLES,[L.TRIANGLE_FAN]:ii.TRIANGLES,[L.TRIANGLE_STRIP]:ii.TRIANGLE_STRIP},Fge={1:ve.F32_R,2:ve.F32_RG,3:ve.F32_RGB,4:ve.F32_RGBA},Uge={[L.STATIC_DRAW]:Ss.STATIC,[L.DYNAMIC_DRAW]:Ss.DYNAMIC,[L.STREAM_DRAW]:Ss.DYNAMIC},iF={[L.REPEAT]:Oa.REPEAT,[L.CLAMP_TO_EDGE]:Oa.CLAMP_TO_EDGE,[L.MIRRORED_REPEAT]:Oa.MIRRORED_REPEAT},kge={[L.NEVER]:Zr.NEVER,[L.ALWAYS]:Zr.ALWAYS,[L.LESS]:Zr.LESS,[L.LEQUAL]:Zr.LEQUAL,[L.GREATER]:Zr.GREATER,[L.GEQUAL]:Zr.GEQUAL,[L.EQUAL]:Zr.EQUAL,[L.NOTEQUAL]:Zr.NOTEQUAL},jge={[L.FRONT]:qa.FRONT,[L.BACK]:qa.BACK},aF={[L.FUNC_ADD]:Ni.ADD,[L.MIN_EXT]:Ni.MIN,[L.MAX_EXT]:Ni.MAX,[L.FUNC_SUBTRACT]:Ni.SUBSTRACT,[L.FUNC_REVERSE_SUBTRACT]:Ni.REVERSE_SUBSTRACT},cy={[L.ZERO]:Cr.ZERO,[L.ONE]:Cr.ONE,[L.SRC_COLOR]:Cr.SRC,[L.ONE_MINUS_SRC_COLOR]:Cr.ONE_MINUS_SRC,[L.SRC_ALPHA]:Cr.SRC_ALPHA,[L.ONE_MINUS_SRC_ALPHA]:Cr.ONE_MINUS_SRC_ALPHA,[L.DST_COLOR]:Cr.DST,[L.ONE_MINUS_DST_COLOR]:Cr.ONE_MINUS_DST,[L.DST_ALPHA]:Cr.DST_ALPHA,[L.ONE_MINUS_DST_ALPHA]:Cr.ONE_MINUS_DST_ALPHA,[L.CONSTANT_COLOR]:Cr.CONST,[L.ONE_MINUS_CONSTANT_COLOR]:Cr.ONE_MINUS_CONSTANT,[L.CONSTANT_ALPHA]:Cr.CONST,[L.ONE_MINUS_CONSTANT_ALPHA]:Cr.ONE_MINUS_CONSTANT,[L.SRC_ALPHA_SATURATE]:Cr.SRC_ALPHA_SATURATE},$h={[L.REPLACE]:Bn.REPLACE,[L.KEEP]:Bn.KEEP,[L.ZERO]:Bn.ZERO,[L.INVERT]:Bn.INVERT,[L.INCR]:Bn.INCREMENT_CLAMP,[L.DECR]:Bn.DECREMENT_CLAMP,[L.INCR_WRAP]:Bn.INCREMENT_WRAP,[L.DECR_WRAP]:Bn.DECREMENT_WRAP},zge={[L.ALWAYS]:Zr.ALWAYS,[L.EQUAL]:Zr.EQUAL,[L.GEQUAL]:Zr.GEQUAL,[L.GREATER]:Zr.GREATER,[L.LEQUAL]:Zr.LEQUAL,[L.LESS]:Zr.LESS,[L.NEVER]:Zr.NEVER,[L.NOTEQUAL]:Zr.NOTEQUAL},Vge={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function U1(e){return Object.prototype.toString.call(e)in Vge}function Hge(e,t){const r=e.length,n=Math.ceil(r/3),i=r+n,a=new Float32Array(i);for(let o=0;o<i;o+=4)a[o]=e[o/4*3],a[o+1]=e[o/4*3+1],a[o+2]=e[o/4*3+2],a[o+3]=t;return a}var Xge=class{constructor(e,t){this.isDestroyed=!1;const{data:r,usage:n,type:i,isUBO:a,label:o}=t;let l;U1(r)?l=r:l=new F1[this.type||L.FLOAT](r),this.type=i,this.size=l.byteLength,this.buffer=e.createBuffer({viewOrSize:l,usage:a?fn.UNIFORM:fn.VERTEX,hint:Uge[n||L.STATIC_DRAW]}),o&&e.setResourceName(this.buffer,o)}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:e,offset:t}){let r;U1(e)?r=e:r=new F1[this.type||L.FLOAT](e),this.buffer.setSubData(t,new Uint8Array(r.buffer))}};function Jr(e,t=0){return e+=t,e+=e<<10,e+=e>>>6,e>>>0}function W9(e){return e+=e<<3,e^=e>>>11,e+=e<<15,e>>>0}function oF(){return 0}var qge=class{constructor(){this.keys=[],this.values=[]}},fy=class{constructor(e,t){this.keyEqualFunc=e,this.keyHashFunc=t,this.buckets=new Map}findBucketIndex(e,t){for(let r=0;r<e.keys.length;r++)if(this.keyEqualFunc(t,e.keys[r]))return r;return-1}findBucket(e){const t=this.keyHashFunc(e);return this.buckets.get(t)}get(e){const t=this.findBucket(e);if(t===void 0)return null;const r=this.findBucketIndex(t,e);return r<0?null:t.values[r]}add(e,t){const r=this.keyHashFunc(e);this.buckets.get(r)===void 0&&this.buckets.set(r,new qge);const n=this.buckets.get(r);n.keys.push(e),n.values.push(t)}delete(e){const t=this.findBucket(e);if(t===void 0)return;const r=this.findBucketIndex(t,e);r!==-1&&(t.keys.splice(r,1),t.values.splice(r,1))}clear(){this.buckets.clear()}size(){let e=0;for(const t of this.buckets.values())e+=t.values.length;return e}*values(){for(const e of this.buckets.values())for(let t=e.values.length-1;t>=0;t--)yield e.values[t]}};function sF(e,t){return e=Jr(e,t.blendMode),e=Jr(e,t.blendSrcFactor),e=Jr(e,t.blendDstFactor),e}function Gge(e,t){return e=sF(e,t.rgbBlendState),e=sF(e,t.alphaBlendState),e=Jr(e,t.channelWriteMask),e}function Wge(e,t){return e=Jr(e,t.r<<24|t.g<<16|t.b<<8|t.a),e}function $ge(e,t){var r,n,i,a,o,l,c,f;for(let h=0;h<t.attachmentsState.length;h++)e=Gge(e,t.attachmentsState[h]);return e=Wge(e,t.blendConstant||wE),e=Jr(e,t.depthCompare),e=Jr(e,t.depthWrite?1:0),e=Jr(e,(r=t.stencilFront)==null?void 0:r.compare),e=Jr(e,(n=t.stencilFront)==null?void 0:n.passOp),e=Jr(e,(i=t.stencilFront)==null?void 0:i.failOp),e=Jr(e,(a=t.stencilFront)==null?void 0:a.depthFailOp),e=Jr(e,(o=t.stencilBack)==null?void 0:o.compare),e=Jr(e,(l=t.stencilBack)==null?void 0:l.passOp),e=Jr(e,(c=t.stencilBack)==null?void 0:c.failOp),e=Jr(e,(f=t.stencilBack)==null?void 0:f.depthFailOp),e=Jr(e,t.stencilWrite?1:0),e=Jr(e,t.cullMode),e=Jr(e,t.frontFace?1:0),e=Jr(e,t.polygonOffset?1:0),e}function Yge(e){let t=0;t=Jr(t,e.program.id),e.inputLayout!==null&&(t=Jr(t,e.inputLayout.id)),t=$ge(t,e.megaStateDescriptor);for(let r=0;r<e.colorAttachmentFormats.length;r++)t=Jr(t,e.colorAttachmentFormats[r]||0);return t=Jr(t,e.depthStencilAttachmentFormat||0),W9(t)}function Zge(e){let t=0;if(e.samplerBindings)for(let r=0;r<e.samplerBindings.length;r++){const n=e.samplerBindings[r];n!==null&&n.texture!==null&&(t=Jr(t,n.texture.id))}if(e.uniformBufferBindings)for(let r=0;r<e.uniformBufferBindings.length;r++){const n=e.uniformBufferBindings[r];n!==null&&n.buffer!==null&&(t=Jr(t,n.buffer.id),t=Jr(t,n.binding),t=Jr(t,n.offset),t=Jr(t,n.size))}if(e.storageBufferBindings)for(let r=0;r<e.storageBufferBindings.length;r++){const n=e.storageBufferBindings[r];n!==null&&n.buffer!==null&&(t=Jr(t,n.buffer.id),t=Jr(t,n.binding),t=Jr(t,n.offset),t=Jr(t,n.size))}if(e.storageTextureBindings)for(let r=0;r<e.storageTextureBindings.length;r++){const n=e.storageTextureBindings[r];n!==null&&n.texture!==null&&(t=Jr(t,n.texture.id),t=Jr(t,n.binding))}return W9(t)}function Kge(e,t){var r,n,i,a;return((r=e.vertex)==null?void 0:r.glsl)===((n=t.vertex)==null?void 0:n.glsl)&&((i=e.fragment)==null?void 0:i.glsl)===((a=t.fragment)==null?void 0:a.glsl)}function Qge(e){var t,r;return{vertex:{glsl:(t=e.vertex)==null?void 0:t.glsl},fragment:{glsl:(r=e.fragment)==null?void 0:r.glsl}}}var Jge=class{constructor(e){this.device=e,this.bindingsCache=new fy(Qme,Zge),this.renderPipelinesCache=new fy(rve,Yge),this.inputLayoutsCache=new fy(ave,oF),this.programCache=new fy(Kge,oF)}createBindings(e){var t;let r=this.bindingsCache.get(e);if(r===null){const n=lve(e);n.uniformBufferBindings=(t=n.uniformBufferBindings)==null?void 0:t.filter(({size:i})=>i&&i>0),r=this.device.createBindings(n),this.bindingsCache.add(n,r)}return r}createRenderPipeline(e){let t=this.renderPipelinesCache.get(e);if(t===null){const r=uve(e);r.colorAttachmentFormats=r.colorAttachmentFormats.filter(n=>n),t=this.device.createRenderPipeline(r),this.renderPipelinesCache.add(r,t)}return t}createInputLayout(e){e.vertexBufferDescriptors=e.vertexBufferDescriptors.filter(r=>!!r);let t=this.inputLayoutsCache.get(e);if(t===null){const r=dve(e);t=this.device.createInputLayout(r),this.inputLayoutsCache.add(r,t)}return t}createProgram(e){let t=this.programCache.get(e);if(t===null){const r=Qge(e);t=this.device.createProgram(e),this.programCache.add(r,t)}return t}destroy(){for(const e of this.bindingsCache.values())e.destroy();for(const e of this.renderPipelinesCache.values())e.destroy();for(const e of this.inputLayoutsCache.values())e.destroy();for(const e of this.programCache.values())e.destroy();this.bindingsCache.clear(),this.renderPipelinesCache.clear(),this.inputLayoutsCache.clear(),this.programCache.clear()}},e0e=class{constructor(e,t){const{data:r,type:n,count:i=0}=t;let a;U1(r)?a=r:a=new F1[this.type||L.UNSIGNED_INT](r),this.type=n,this.count=i,this.indexBuffer=e.createBuffer({viewOrSize:a,usage:fn.INDEX})}get(){return this.indexBuffer}subData({data:e}){let t;U1(e)?t=e:t=new F1[this.type||L.UNSIGNED_INT](e),this.indexBuffer.setSubData(0,new Uint8Array(t.buffer))}destroy(){this.indexBuffer.destroy()}};function lF(e){return!!(e&&e.texture)}var $9=class{constructor(e,t){this.device=e,this.options=t,this.isDestroy=!1;const{wrapS:r=L.CLAMP_TO_EDGE,wrapT:n=L.CLAMP_TO_EDGE,aniso:i,mag:a=L.NEAREST,min:o=L.NEAREST}=t;this.createTexture(t),this.sampler=e.createSampler({addressModeU:iF[r],addressModeV:iF[n],minFilter:o===L.NEAREST?Wn.POINT:Wn.BILINEAR,magFilter:a===L.NEAREST?Wn.POINT:Wn.BILINEAR,mipmapFilter:yi.NO_MIP,maxAnisotropy:i})}createTexture(e){const{type:t=L.UNSIGNED_BYTE,width:r,height:n,flipY:i=!1,format:a=L.RGBA,alignment:o=1,usage:l=Ng.SAMPLED,unorm:c=!1,label:f}=e;let{data:h}=e;this.width=r,this.height=n;let p=ve.U8_RGBA_RT;if(t===L.UNSIGNED_BYTE&&a===L.RGBA)p=c?ve.U8_RGBA_NORM:ve.U8_RGBA_RT;else if(t===L.UNSIGNED_BYTE&&a===L.LUMINANCE)p=ve.U8_LUMINANCE;else if(t===L.FLOAT&&a===L.LUMINANCE)p=ve.F32_LUMINANCE;else if(t===L.FLOAT&&a===L.RGB)this.device.queryVendorInfo().platformString==="WebGPU"?(h&&(h=Hge(h,0)),p=ve.F32_RGBA):p=ve.F32_RGB;else if(t===L.FLOAT&&a===L.RGBA)p=ve.F32_RGBA;else if(t===L.FLOAT&&a===L.RED)p=ve.F32_R;else throw new Error(`create texture error, type: ${t}, format: ${a}`);this.texture=this.device.createTexture({format:p,width:r,height:n,usage:l===Ng.SAMPLED?ha.SAMPLED:ha.RENDER_TARGET,pixelStore:{unpackFlipY:i,packAlignment:o},mipLevelCount:1}),f&&this.device.setResourceName(this.texture,f),h&&this.texture.setImageData([h])}get(){return this.texture}update(e){const{data:t}=e;this.texture.setImageData([t])}bind(){}resize({width:e,height:t}){(this.width!==e||this.height!==t)&&this.destroy(),this.options.width=e,this.options.height=t,this.createTexture(this.options),this.isDestroy=!1}getSize(){return[this.width,this.height]}destroy(){var e;!this.isDestroy&&!this.texture.destroyed&&((e=this.texture)==null||e.destroy()),this.isDestroy=!0}},Y9=class{constructor(e,t){this.device=e,this.options=t,this.createColorRenderTarget(),this.createDepthRenderTarget()}createColorRenderTarget(e=!1){const{width:t,height:r,color:n}=this.options;n&&(lF(n)?(e&&n.resize({width:t,height:r}),this.colorTexture=n.get(),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=n.width,this.height=n.height):t&&r&&(this.colorTexture=this.device.createTexture({format:ve.U8_RGBA_RT,usage:ha.RENDER_TARGET,width:t,height:r}),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=t,this.height=r))}createDepthRenderTarget(e=!1){const{width:t,height:r,depth:n}=this.options;n&&(lF(n)?(e&&n.resize({width:t,height:r}),this.depthTexture=n.get(),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=n.width,this.height=n.height):t&&r&&(this.depthTexture=this.device.createTexture({format:ve.D24_S8,usage:ha.RENDER_TARGET,width:t,height:r}),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=t,this.height=r))}get(){return this.colorRenderTarget}destroy(){var e,t;(e=this.colorRenderTarget)==null||e.destroy(),(t=this.depthRenderTarget)==null||t.destroy()}resize({width:e,height:t}){(this.width!==e||this.height!==t)&&(this.destroy(),this.colorTexture.destroyed=!0,this.depthTexture.destroyed=!0,this.options.width=e,this.options.height=t,this.createColorRenderTarget(!0),this.createDepthRenderTarget(!0))}},t0e=Object.defineProperty,r0e=Object.defineProperties,n0e=Object.getOwnPropertyDescriptors,uF=Object.getOwnPropertySymbols,i0e=Object.prototype.hasOwnProperty,a0e=Object.prototype.propertyIsEnumerable,cF=(e,t,r)=>t in e?t0e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Wf=(e,t)=>{for(var r in t||(t={}))i0e.call(t,r)&&cF(e,r,t[r]);if(uF)for(var r of uF(t))a0e.call(t,r)&&cF(e,r,t[r]);return e},o0e=(e,t)=>r0e(e,n0e(t)),{isPlainObject:s0e,isTypedArray:l0e,isNil:fF}=Un,u0e=class{constructor(e,t,r){this.device=e,this.options=t,this.service=r,this.destroyed=!1,this.uniforms={},this.vertexBuffers=[];const{vs:n,fs:i,attributes:a,uniforms:o,count:l,elements:c,diagnosticDerivativeUniformityEnabled:f}=t;this.options=t;const h=f?"":this.service.viewportOrigin===bs.UPPER_LEFT?"diagnostic(off,derivative_uniformity);":"";this.program=r.renderCache.createProgram({vertex:{glsl:n},fragment:{glsl:i,postprocess:_=>h+_}}),o&&(this.uniforms=this.extractUniforms(o));const p=[];let v=0;Object.keys(a).forEach(_=>{const E=a[_],b=E.get();this.vertexBuffers.push(b.get());const{offset:S=0,stride:T=0,size:C=1,divisor:M=0,shaderLocation:D=0}=E.attribute;p.push({arrayStride:T||C*4,stepMode:Ed.VERTEX,attributes:[{format:Fge[C],shaderLocation:D,offset:S,divisor:M}]}),v=b.size/C}),l||(this.options.count=v),c&&(this.indexBuffer=c.get());const g=r.renderCache.createInputLayout({vertexBufferDescriptors:p,indexBufferFormat:c?ve.U32_R:null,program:this.program});this.inputLayout=g,this.pipeline=this.createPipeline(t)}createPipeline(e,t){var r;const{primitive:n=L.TRIANGLES,depth:i,cull:a,blend:o,stencil:l}=e,c=this.initDepthDrawParams({depth:i}),f=!!(c&&c.enable),h=this.initCullDrawParams({cull:a}),p=!!(h&&h.enable),v=this.getBlendDrawParams({blend:o}),g=!!(v&&v.enable),_=this.getStencilDrawParams({stencil:l}),E=!!(_&&_.enable),b=this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:Bge[n],colorAttachmentFormats:[ve.U8_RGBA_RT],depthStencilAttachmentFormat:ve.D24_S8,megaStateDescriptor:{attachmentsState:[t?{channelWriteMask:Ci.ALL,rgbBlendState:{blendMode:Ni.ADD,blendSrcFactor:Cr.ONE,blendDstFactor:Cr.ZERO},alphaBlendState:{blendMode:Ni.ADD,blendSrcFactor:Cr.ONE,blendDstFactor:Cr.ZERO}}:{channelWriteMask:E&&_.opFront.zpass===Bn.REPLACE?Ci.NONE:Ci.ALL,rgbBlendState:{blendMode:g&&v.equation.rgb||Ni.ADD,blendSrcFactor:g&&v.func.srcRGB||Cr.SRC_ALPHA,blendDstFactor:g&&v.func.dstRGB||Cr.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:g&&v.equation.alpha||Ni.ADD,blendSrcFactor:g&&v.func.srcAlpha||Cr.ONE,blendDstFactor:g&&v.func.dstAlpha||Cr.ONE}}],blendConstant:g?wE:void 0,depthWrite:f,depthCompare:f&&c.func||Zr.LESS,cullMode:p&&h.face||qa.NONE,stencilWrite:E,stencilFront:{compare:E?_.func.cmp:Zr.ALWAYS,passOp:_.opFront.zpass,failOp:_.opFront.fail,depthFailOp:_.opFront.zfail,mask:_.opFront.mask},stencilBack:{compare:E?_.func.cmp:Zr.ALWAYS,passOp:_.opBack.zpass,failOp:_.opBack.fail,depthFailOp:_.opBack.zfail,mask:_.opBack.mask}}});return E&&!fF((r=l?.func)==null?void 0:r.ref)&&(b.stencilFuncReference=l.func.ref),b}updateAttributesAndElements(){}updateAttributes(){}addUniforms(e){this.uniforms=Wf(Wf({},this.uniforms),this.extractUniforms(e))}draw(e,t){const r=Wf(Wf({},this.options),e),{count:n=0,instances:i,elements:a,uniforms:o={},uniformBuffers:l,textures:c}=r;this.uniforms=Wf(Wf({},this.uniforms),this.extractUniforms(o));const{renderPass:f,currentFramebuffer:h,width:p,height:v}=this.service;this.pipeline=this.createPipeline(r,t);const g=this.service.device,_=g.swapChainHeight;if(g.swapChainHeight=h?.height||v,f.setViewport(0,0,h?.width||p,h?.height||v),g.swapChainHeight=_,f.setPipeline(this.pipeline),fF(this.pipeline.stencilFuncReference)||f.setStencilReference(this.pipeline.stencilFuncReference),f.setVertexInput(this.inputLayout,this.vertexBuffers.map(E=>({buffer:E})),a?{buffer:this.indexBuffer,offset:0}:null),l&&(this.bindings=g.createBindings({pipeline:this.pipeline,uniformBufferBindings:l.map((E,b)=>{const S=E;return{binding:b,buffer:S.get(),size:S.size}}),samplerBindings:c?.map(E=>({texture:E.texture,sampler:E.sampler}))})),this.bindings&&(f.setBindings(this.bindings),Object.keys(this.uniforms).forEach(E=>{const b=this.uniforms[E];b instanceof $9?this.uniforms[E]=b.get():b instanceof Y9&&(this.uniforms[E]=b.get().texture)}),this.program.setUniformsLegacy(this.uniforms)),a){const E=a.count;E===0?f.draw(n,i):f.drawIndexed(E,i)}else f.draw(n,i)}destroy(){var e,t,r;(e=this.vertexBuffers)==null||e.forEach(n=>n.destroy()),(t=this.indexBuffer)==null||t.destroy(),(r=this.bindings)==null||r.destroy(),this.pipeline.destroy(),this.destroyed=!0}initDepthDrawParams({depth:e}){if(e)return{enable:e.enable===void 0?!0:!!e.enable,mask:e.mask===void 0?!0:!!e.mask,func:kge[e.func||L.LESS],range:e.range||[0,1]}}getBlendDrawParams({blend:e}){const{enable:t,func:r,equation:n,color:i=[0,0,0,0]}=e||{};return{enable:!!t,func:{srcRGB:cy[r&&r.srcRGB||L.SRC_ALPHA],srcAlpha:cy[r&&r.srcAlpha||L.SRC_ALPHA],dstRGB:cy[r&&r.dstRGB||L.ONE_MINUS_SRC_ALPHA],dstAlpha:cy[r&&r.dstAlpha||L.ONE_MINUS_SRC_ALPHA]},equation:{rgb:aF[n&&n.rgb||L.FUNC_ADD],alpha:aF[n&&n.alpha||L.FUNC_ADD]},color:i}}getStencilDrawParams({stencil:e}){const{enable:t,mask:r=4294967295,func:n={cmp:L.ALWAYS,ref:0,mask:4294967295},opFront:i={fail:L.KEEP,zfail:L.KEEP,zpass:L.KEEP},opBack:a={fail:L.KEEP,zfail:L.KEEP,zpass:L.KEEP}}=e||{};return{enable:!!t,mask:r,func:o0e(Wf({},n),{cmp:zge[n.cmp]}),opFront:{fail:$h[i.fail],zfail:$h[i.zfail],zpass:$h[i.zpass],mask:n.mask},opBack:{fail:$h[a.fail],zfail:$h[a.zfail],zpass:$h[a.zpass],mask:n.mask}}}initCullDrawParams({cull:e}){if(e){const{enable:t,face:r=L.BACK}=e;return{enable:!!t,face:jge[r]}}}extractUniforms(e){const t={};return Object.keys(e).forEach(r=>{this.extractUniformsRecursively(r,e[r],t,"")}),t}extractUniformsRecursively(e,t,r,n){if(t===null||typeof t=="number"||typeof t=="boolean"||Array.isArray(t)&&typeof t[0]=="number"||l0e(t)||t===""||"resize"in t){r[`${n&&n+"."}${e}`]=t;return}s0e(t)&&Object.keys(t).forEach(i=>{this.extractUniformsRecursively(i,t[i],r,`${n&&n+"."}${e}`)}),Array.isArray(t)&&t.forEach((i,a)=>{Object.keys(i).forEach(o=>{this.extractUniformsRecursively(o,i[o],r,`${n&&n+"."}${e}[${a}]`)})})}};function c0e(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:!!(e&&e._version===2)}var WR=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{l(r.next(c))}catch(f){i(f)}},o=c=>{try{l(r.throw(c))}catch(f){i(f)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);l((r=r.apply(e,t)).next())}),{isUndefined:dy}=Un,f0e=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>this.device.queryVendorInfo().platformString,this.createModel=e=>new u0e(this.device,e,this),this.createAttribute=e=>new Lge(this.device,e),this.createBuffer=e=>new Xge(this.device,e),this.createElements=e=>new e0e(this.device,e),this.createTexture2D=e=>new $9(this.device,e),this.createFramebuffer=e=>new Y9(this.device,e),this.useFramebuffer=(e,t)=>{this.currentFramebuffer=e,this.beginFrame(),t(),this.endFrame(),this.currentFramebuffer=null},this.useFramebufferAsync=(e,t)=>WR(this,null,function*(){this.currentFramebuffer=e,this.preRenderPass=this.renderPass,this.beginFrame(),yield t(),this.endFrame(),this.currentFramebuffer=null,this.renderPass=this.preRenderPass}),this.clear=e=>{const{color:t,depth:r,stencil:n,framebuffer:i=null}=e;if(i)i.clearOptions={color:t,depth:r,stencil:n};else{const a=this.queryVerdorInfo();if(a==="WebGL1"){const o=this.getGLContext();dy(n)?dy(r)||(o.clearDepth(r),o.clear(o.DEPTH_BUFFER_BIT)):(o.clearStencil(n),o.clear(o.STENCIL_BUFFER_BIT))}else if(a==="WebGL2"){const o=this.getGLContext();dy(n)?dy(r)||o.clearBufferfv(o.DEPTH,0,[r]):o.clearBufferiv(o.STENCIL,0,[n])}}},this.viewport=({width:e,height:t})=>{this.swapChain.configureSwapChain(e,t),this.createMainColorDepthRT(e,t),this.width=e,this.height=t},this.readPixels=e=>{const{framebuffer:t,x:r,y:n,width:i,height:a}=e,o=this.device.createReadback(),l=t.colorTexture,c=o.readTextureSync(l,r,this.viewportOrigin===bs.LOWER_LEFT?n:this.height-n,i,a,new Uint8Array(i*a*4));if(this.viewportOrigin!==bs.LOWER_LEFT)for(let f=0;f<c.length;f+=4){const h=c[f];c[f]=c[f+2],c[f+2]=h}return o.destroy(),c},this.readPixelsAsync=e=>WR(this,null,function*(){const{framebuffer:t,x:r,y:n,width:i,height:a}=e,o=this.device.createReadback(),l=t.colorTexture,c=yield o.readTexture(l,r,this.viewportOrigin===bs.LOWER_LEFT?n:this.height-n,i,a,new Uint8Array(i*a*4));if(this.viewportOrigin!==bs.LOWER_LEFT)for(let f=0;f<c.length;f+=4){const h=c[f];c[f]=c[f+2],c[f+2]=h}return o.destroy(),c}),this.getViewportSize=()=>({width:this.width,height:this.height}),this.getContainer=()=>{var e;return(e=this.canvas)==null?void 0:e.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.device.gl,this.destroy=()=>{var e;this.canvas=null,(e=this.uniformBuffers)==null||e.forEach(t=>{t.destroy()}),this.device.destroy(),this.renderCache.destroy()}}init(e,t){return WR(this,null,function*(){const{enableWebGPU:r,shaderCompilerPath:n,antialias:i}=t;this.canvas=e;const o=yield(r?new Dge({shaderCompilerPath:n}):new Gve({targets:["webgl2","webgl1"],antialias:i,onContextLost(c){console.warn("context lost",c)},onContextCreationError(c){console.warn("context creation error",c)},onContextRestored(c){console.warn("context restored",c)}})).createSwapChain(e);o.configureSwapChain(e.width,e.height),this.device=o.getDevice(),this.swapChain=o,this.renderCache=new Jge(this.device),this.currentFramebuffer=null,this.viewportOrigin=this.device.queryVendorInfo().viewportOrigin;const l=this.device.gl;this.extensionObject={OES_texture_float:!c0e(l)&&this.device.OES_texture_float},this.createMainColorDepthRT(e.width,e.height)})}createMainColorDepthRT(e,t){this.mainColorRT&&this.mainColorRT.destroy(),this.mainDepthRT&&this.mainDepthRT.destroy(),this.mainColorRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:ve.U8_RGBA_RT,width:e,height:t,usage:ha.RENDER_TARGET})),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:ve.D24_S8,width:e,height:t,usage:ha.RENDER_TARGET}))}beginFrame(){this.device.beginFrame();const{currentFramebuffer:e,swapChain:t,mainColorRT:r,mainDepthRT:n}=this,i=e?e.colorRenderTarget:r,a=e?null:t.getOnscreenTexture(),o=e?e.depthRenderTarget:n,{color:l=[0,0,0,0],depth:c=1,stencil:f=0}=e?.clearOptions||{},h=i?a0(l[0]*255,l[1]*255,l[2]*255,l[3]):wE,p=o?c:void 0,v=o?f:void 0,g=this.device.createRenderPass({colorAttachment:[i],colorResolveTo:[a],colorClearColor:[h],colorStore:[!0],depthStencilAttachment:o,depthClearValue:p,stencilClearValue:v});this.renderPass=g}endFrame(){this.device.submitPass(this.renderPass),this.device.endFrame()}getPointSizeRange(){const e=this.device.gl;return e.getParameter(e.ALIASED_POINT_SIZE_RANGE)}testExtension(e){return!!this.getGLContext().getExtension(e)}setState(){}setBaseState(){}setCustomLayerDefaults(){}setDirty(e){this.isDirty=e}getDirty(){return this.isDirty}},Ly={exports:{}},d0e=Ly.exports,dF;function h0e(){return dF||(dF=1,(function(e,t){(function(r,n){e.exports=n()})(d0e,(function(){var r=function(O){return O instanceof Uint8Array||O instanceof Uint16Array||O instanceof Uint32Array||O instanceof Int8Array||O instanceof Int16Array||O instanceof Int32Array||O instanceof Float32Array||O instanceof Float64Array||O instanceof Uint8ClampedArray},n=function(O,$){for(var ae=Object.keys($),Ce=0;Ce<ae.length;++Ce)O[ae[Ce]]=$[ae[Ce]];return O},i=`
`;function a(O){return typeof atob<"u"?atob(O):"base64:"+O}function o(O){var $=new Error("(regl) "+O);throw console.error($),$}function l(O,$){O||o($)}function c(O){return O?": "+O:""}function f(O,$,ae){O in $||o("unknown parameter ("+O+")"+c(ae)+". possible values: "+Object.keys($).join())}function h(O,$){r(O)||o("invalid parameter type"+c($)+". must be a typed array")}function p(O,$){switch($){case"number":return typeof O=="number";case"object":return typeof O=="object";case"string":return typeof O=="string";case"boolean":return typeof O=="boolean";case"function":return typeof O=="function";case"undefined":return typeof O>"u";case"symbol":return typeof O=="symbol"}}function v(O,$,ae){p(O,$)||o("invalid parameter type"+c(ae)+". expected "+$+", got "+typeof O)}function g(O,$){O>=0&&(O|0)===O||o("invalid parameter type, ("+O+")"+c($)+". must be a nonnegative integer")}function _(O,$,ae){$.indexOf(O)<0&&o("invalid value"+c(ae)+". must be one of: "+$)}var E=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function b(O){Object.keys(O).forEach(function($){E.indexOf($)<0&&o('invalid regl constructor argument "'+$+'". must be one of '+E)})}function S(O,$){for(O=O+"";O.length<$;)O=" "+O;return O}function T(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function C(O,$){this.number=O,this.line=$,this.errors=[]}function M(O,$,ae){this.file=O,this.line=$,this.message=ae}function D(){var O=new Error,$=(O.stack||O).toString(),ae=/compileProcedure.*\n\s*at.*\((.*)\)/.exec($);if(ae)return ae[1];var Ce=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec($);return Ce?Ce[1]:"unknown"}function I(){var O=new Error,$=(O.stack||O).toString(),ae=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec($);if(ae)return ae[1];var Ce=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec($);return Ce?Ce[1]:"unknown"}function N(O,$){var ae=O.split(`
`),Ce=1,Ge=0,Ne={unknown:new T,0:new T};Ne.unknown.name=Ne[0].name=$||D(),Ne.unknown.lines.push(new C(0,""));for(var ke=0;ke<ae.length;++ke){var ut=ae[ke],dt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(ut);if(dt)switch(dt[1]){case"line":var St=/(\d+)(\s+\d+)?/.exec(dt[2]);St&&(Ce=St[1]|0,St[2]&&(Ge=St[2]|0,Ge in Ne||(Ne[Ge]=new T)));break;case"define":var ht=/SHADER_NAME(_B64)?\s+(.*)$/.exec(dt[2]);ht&&(Ne[Ge].name=ht[1]?a(ht[2]):ht[2]);break}Ne[Ge].lines.push(new C(Ce++,ut))}return Object.keys(Ne).forEach(function(gt){var bt=Ne[gt];bt.lines.forEach(function(it){bt.index[it.number]=it})}),Ne}function j(O){var $=[];return O.split(`
`).forEach(function(ae){if(!(ae.length<5)){var Ce=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(ae);Ce?$.push(new M(Ce[1]|0,Ce[2]|0,Ce[3].trim())):ae.length>0&&$.push(new M("unknown",0,ae))}}),$}function re(O,$){$.forEach(function(ae){var Ce=O[ae.file];if(Ce){var Ge=Ce.index[ae.line];if(Ge){Ge.errors.push(ae),Ce.hasErrors=!0;return}}O.unknown.hasErrors=!0,O.unknown.lines[0].errors.push(ae)})}function Q(O,$,ae,Ce,Ge){if(!O.getShaderParameter($,O.COMPILE_STATUS)){var Ne=O.getShaderInfoLog($),ke=Ce===O.FRAGMENT_SHADER?"fragment":"vertex";z(ae,"string",ke+" shader source must be a string",Ge);var ut=N(ae,Ge),dt=j(Ne);re(ut,dt),Object.keys(ut).forEach(function(St){var ht=ut[St];if(!ht.hasErrors)return;var gt=[""],bt=[""];function it(_t,be){gt.push(_t),bt.push(be||"")}it("file number "+St+": "+ht.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ht.lines.forEach(function(_t){if(_t.errors.length>0){it(S(_t.number,4)+"|  ","background-color:yellow; font-weight:bold"),it(_t.line+i,"color:red; background-color:yellow; font-weight:bold");var be=0;_t.errors.forEach(function(De){var ct=De.message,Rt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ct);if(Rt){var Je=Rt[1];switch(ct=Rt[2],Je){case"assign":Je="=";break}be=Math.max(_t.line.indexOf(Je,be),0)}else be=0;it(S("| ",6)),it(S("^^^",be+3)+i,"font-weight:bold"),it(S("| ",6)),it(ct+i,"font-weight:bold")}),it(S("| ",6)+i)}else it(S(_t.number,4)+"|  "),it(_t.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(bt[0]=gt.join("%c"),console.log.apply(console,bt)):console.log(gt.join(""))}),l.raise("Error compiling "+ke+" shader, "+ut[0].name)}}function X(O,$,ae,Ce,Ge){if(!O.getProgramParameter($,O.LINK_STATUS)){var Ne=O.getProgramInfoLog($),ke=N(ae,Ge),ut=N(Ce,Ge),dt='Error linking program with vertex shader, "'+ut[0].name+'", and fragment shader "'+ke[0].name+'"';typeof document<"u"?console.log("%c"+dt+i+"%c"+Ne,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(dt+i+Ne),l.raise(dt)}}function R(O){O._commandRef=D()}function P(O,$,ae,Ce){R(O);function Ge(dt){return dt?Ce.id(dt):0}O._fragId=Ge(O.static.frag),O._vertId=Ge(O.static.vert);function Ne(dt,St){Object.keys(St).forEach(function(ht){dt[Ce.id(ht)]=!0})}var ke=O._uniformSet={};Ne(ke,$.static),Ne(ke,$.dynamic);var ut=O._attributeSet={};Ne(ut,ae.static),Ne(ut,ae.dynamic),O._hasCount="count"in O.static||"count"in O.dynamic||"elements"in O.static||"elements"in O.dynamic}function V(O,$){var ae=I();o(O+" in command "+($||D())+(ae==="unknown"?"":" called from "+ae))}function le(O,$,ae){O||V($,ae||D())}function w(O,$,ae,Ce){O in $||V("unknown parameter ("+O+")"+c(ae)+". possible values: "+Object.keys($).join(),Ce||D())}function z(O,$,ae,Ce){p(O,$)||V("invalid parameter type"+c(ae)+". expected "+$+", got "+typeof O,Ce||D())}function H(O){O()}function ee(O,$,ae){O.texture?_(O.texture._texture.internalformat,$,"unsupported texture format for attachment"):_(O.renderbuffer._renderbuffer.format,ae,"unsupported renderbuffer format for attachment")}var oe=33071,ge=9728,ye=9984,Pe=9985,tt=9986,We=9987,Pt=5120,$e=5121,Tt=5122,je=5123,Ee=5124,st=5125,Oe=5126,$t=32819,qt=32820,xt=33635,Dt=34042,It=36193,er={};er[Pt]=er[$e]=1,er[Tt]=er[je]=er[It]=er[xt]=er[$t]=er[qt]=2,er[Ee]=er[st]=er[Oe]=er[Dt]=4;function kr(O,$){return O===qt||O===$t||O===xt?2:O===Dt?4:er[O]*$}function ue(O){return!(O&O-1)&&!!O}function xe(O,$,ae){var Ce,Ge=$.width,Ne=$.height,ke=$.channels;l(Ge>0&&Ge<=ae.maxTextureSize&&Ne>0&&Ne<=ae.maxTextureSize,"invalid texture shape"),(O.wrapS!==oe||O.wrapT!==oe)&&l(ue(Ge)&&ue(Ne),"incompatible wrap mode for texture, both width and height must be power of 2"),$.mipmask===1?Ge!==1&&Ne!==1&&l(O.minFilter!==ye&&O.minFilter!==tt&&O.minFilter!==Pe&&O.minFilter!==We,"min filter requires mipmap"):(l(ue(Ge)&&ue(Ne),"texture must be a square power of 2 to support mipmapping"),l($.mipmask===(Ge<<1)-1,"missing or incomplete mipmap data")),$.type===Oe&&(ae.extensions.indexOf("oes_texture_float_linear")<0&&l(O.minFilter===ge&&O.magFilter===ge,"filter not supported, must enable oes_texture_float_linear"),l(!O.genMipmaps,"mipmap generation not supported with float textures"));var ut=$.images;for(Ce=0;Ce<16;++Ce)if(ut[Ce]){var dt=Ge>>Ce,St=Ne>>Ce;l($.mipmask&1<<Ce,"missing mipmap data");var ht=ut[Ce];if(l(ht.width===dt&&ht.height===St,"invalid shape for mip images"),l(ht.format===$.format&&ht.internalformat===$.internalformat&&ht.type===$.type,"incompatible type for mip image"),!ht.compressed)if(ht.data){var gt=Math.ceil(kr(ht.type,ke)*dt/ht.unpackAlignment)*ht.unpackAlignment;l(ht.data.byteLength===gt*St,"invalid data for image, buffer size is inconsistent with image format")}else ht.element||ht.copy}else O.genMipmaps||l(($.mipmask&1<<Ce)===0,"extra mipmap data");$.compressed&&l(!O.genMipmaps,"mipmap generation for compressed images not supported")}function Ue(O,$,ae,Ce){var Ge=O.width,Ne=O.height,ke=O.channels;l(Ge>0&&Ge<=Ce.maxTextureSize&&Ne>0&&Ne<=Ce.maxTextureSize,"invalid texture shape"),l(Ge===Ne,"cube map must be square"),l($.wrapS===oe&&$.wrapT===oe,"wrap mode not supported by cube map");for(var ut=0;ut<ae.length;++ut){var dt=ae[ut];l(dt.width===Ge&&dt.height===Ne,"inconsistent cube map face shape"),$.genMipmaps&&(l(!dt.compressed,"can not generate mipmap for compressed textures"),l(dt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var St=dt.images,ht=0;ht<16;++ht){var gt=St[ht];if(gt){var bt=Ge>>ht,it=Ne>>ht;l(dt.mipmask&1<<ht,"missing mipmap data"),l(gt.width===bt&&gt.height===it,"invalid shape for mip images"),l(gt.format===O.format&&gt.internalformat===O.internalformat&&gt.type===O.type,"incompatible type for mip image"),gt.compressed||(gt.data?l(gt.data.byteLength===bt*it*Math.max(kr(gt.type,ke),gt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):gt.element||gt.copy)}}}}var k=n(l,{optional:H,raise:o,commandRaise:V,command:le,parameter:f,commandParameter:w,constructor:b,type:v,commandType:z,isTypedArray:h,nni:g,oneOf:_,shaderError:Q,linkError:X,callSite:I,saveCommandRef:R,saveDrawInfo:P,framebufferFormat:ee,guessCommand:D,texture2D:xe,textureCube:Ue}),vt=0,pt=0;function Ut(O,$){this.id=vt++,this.type=O,this.data=$}function lr(O){return O.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function dr(O){if(O.length===0)return[];var $=O.charAt(0),ae=O.charAt(O.length-1);if(O.length>1&&$===ae&&($==='"'||$==="'"))return['"'+lr(O.substr(1,O.length-2))+'"'];var Ce=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(O);if(Ce)return dr(O.substr(0,Ce.index)).concat(dr(Ce[1])).concat(dr(O.substr(Ce.index+Ce[0].length)));var Ge=O.split(".");if(Ge.length===1)return['"'+lr(O)+'"'];for(var Ne=[],ke=0;ke<Ge.length;++ke)Ne=Ne.concat(dr(Ge[ke]));return Ne}function hr(O){return"["+dr(O).join("][")+"]"}function jn(O,$){return new Ut(O,hr($+""))}function Sn(O){return typeof O=="function"&&!O._reglType||O instanceof Ut}function fi(O,$){return typeof O=="function"?new Ut(pt,O):O}var en={DynamicVariable:Ut,define:jn,isDynamic:Sn,unbox:fi,accessor:hr},yn={next:typeof requestAnimationFrame=="function"?function(O){return requestAnimationFrame(O)}:function(O){return setTimeout(O,16)},cancel:typeof cancelAnimationFrame=="function"?function(O){return cancelAnimationFrame(O)}:clearTimeout},Ji=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function pa(){var O={"":0},$=[""];return{id:function(ae){var Ce=O[ae];return Ce||(Ce=O[ae]=$.length,$.push(ae),Ce)},str:function(ae){return $[ae]}}}function Ka(O,$,ae){var Ce=document.createElement("canvas");n(Ce.style,{border:0,margin:0,padding:0,top:0,left:0}),O.appendChild(Ce),O===document.body&&(Ce.style.position="absolute",n(O.style,{margin:0,padding:0}));function Ge(){var ut=window.innerWidth,dt=window.innerHeight;if(O!==document.body){var St=O.getBoundingClientRect();ut=St.right-St.left,dt=St.bottom-St.top}Ce.width=ae*ut,Ce.height=ae*dt,n(Ce.style,{width:ut+"px",height:dt+"px"})}var Ne;O!==document.body&&typeof ResizeObserver=="function"?(Ne=new ResizeObserver(function(){setTimeout(Ge)}),Ne.observe(O)):window.addEventListener("resize",Ge,!1);function ke(){Ne?Ne.disconnect():window.removeEventListener("resize",Ge),O.removeChild(Ce)}return Ge(),{canvas:Ce,onDestroy:ke}}function Go(O,$){function ae(Ce){try{return O.getContext(Ce,$)}catch{return null}}return ae("webgl")||ae("experimental-webgl")||ae("webgl-experimental")}function wd(O){return typeof O.nodeName=="string"&&typeof O.appendChild=="function"&&typeof O.getBoundingClientRect=="function"}function Nd(O){return typeof O.drawArrays=="function"||typeof O.drawElements=="function"}function _l(O){return typeof O=="string"?O.split():(k(Array.isArray(O),"invalid extension array"),O)}function Wo(O){return typeof O=="string"?(k(typeof document<"u","not supported outside of DOM"),document.querySelector(O)):O}function rf(O){var $=O||{},ae,Ce,Ge,Ne,ke={},ut=[],dt=[],St=typeof window>"u"?1:window.devicePixelRatio,ht=!1,gt=function(_t){_t&&k.raise(_t)},bt=function(){};if(typeof $=="string"?(k(typeof document<"u","selector queries only supported in DOM enviroments"),ae=document.querySelector($),k(ae,"invalid query string for element")):typeof $=="object"?wd($)?ae=$:Nd($)?(Ne=$,Ge=Ne.canvas):(k.constructor($),"gl"in $?Ne=$.gl:"canvas"in $?Ge=Wo($.canvas):"container"in $&&(Ce=Wo($.container)),"attributes"in $&&(ke=$.attributes,k.type(ke,"object","invalid context attributes")),"extensions"in $&&(ut=_l($.extensions)),"optionalExtensions"in $&&(dt=_l($.optionalExtensions)),"onDone"in $&&(k.type($.onDone,"function","invalid or missing onDone callback"),gt=$.onDone),"profile"in $&&(ht=!!$.profile),"pixelRatio"in $&&(St=+$.pixelRatio,k(St>0,"invalid pixel ratio"))):k.raise("invalid arguments to regl"),ae&&(ae.nodeName.toLowerCase()==="canvas"?Ge=ae:Ce=ae),!Ne){if(!Ge){k(typeof document<"u","must manually specify webgl context outside of DOM environments");var it=Ka(Ce||document.body,gt,St);if(!it)return null;Ge=it.canvas,bt=it.onDestroy}ke.premultipliedAlpha===void 0&&(ke.premultipliedAlpha=!0),Ne=Go(Ge,ke)}return Ne?{gl:Ne,canvas:Ge,container:Ce,extensions:ut,optionalExtensions:dt,pixelRatio:St,profile:ht,onDone:gt,onDestroy:bt}:(bt(),gt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Md(O,$){var ae={};function Ce(ke){k.type(ke,"string","extension name must be string");var ut=ke.toLowerCase(),dt;try{dt=ae[ut]=O.getExtension(ut)}catch{}return!!dt}for(var Ge=0;Ge<$.extensions.length;++Ge){var Ne=$.extensions[Ge];if(!Ce(Ne))return $.onDestroy(),$.onDone('"'+Ne+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return $.optionalExtensions.forEach(Ce),{extensions:ae,restore:function(){Object.keys(ae).forEach(function(ke){if(ae[ke]&&!Ce(ke))throw new Error("(regl): error restoring extension "+ke)})}}}function Pi(O,$){for(var ae=Array(O),Ce=0;Ce<O;++Ce)ae[Ce]=$(Ce);return ae}var nf=5120,Eu=5121,Id=5122,im=5123,_o=5124,Yn=5125,Di=5126;function Ms(O){for(var $=16;$<=1<<28;$*=16)if(O<=$)return $;return 0}function yl(O){var $,ae;return $=(O>65535)<<4,O>>>=$,ae=(O>255)<<3,O>>>=ae,$|=ae,ae=(O>15)<<2,O>>>=ae,$|=ae,ae=(O>3)<<1,O>>>=ae,$|=ae,$|O>>1}function bu(){var O=Pi(8,function(){return[]});function $(Ne){var ke=Ms(Ne),ut=O[yl(ke)>>2];return ut.length>0?ut.pop():new ArrayBuffer(ke)}function ae(Ne){O[yl(Ne.byteLength)>>2].push(Ne)}function Ce(Ne,ke){var ut=null;switch(Ne){case nf:ut=new Int8Array($(ke),0,ke);break;case Eu:ut=new Uint8Array($(ke),0,ke);break;case Id:ut=new Int16Array($(2*ke),0,ke);break;case im:ut=new Uint16Array($(2*ke),0,ke);break;case _o:ut=new Int32Array($(4*ke),0,ke);break;case Yn:ut=new Uint32Array($(4*ke),0,ke);break;case Di:ut=new Float32Array($(4*ke),0,ke);break;default:return null}return ut.length!==ke?ut.subarray(0,ke):ut}function Ge(Ne){ae(Ne.buffer)}return{alloc:$,free:ae,allocType:Ce,freeType:Ge}}var Tn=bu();Tn.zero=bu();var af=3408,El=3410,xu=3411,$o=3412,Yo=3413,Is=3414,yo=3415,mn=33901,Ps=33902,Ds=3379,Na=3386,Eo=34921,am=36347,Pd=36348,bl=35661,ea=35660,Qa=34930,ma=36349,ai=34076,Zo=34024,va=7936,Li=7937,Su=7938,Tu=35724,Au=34047,ta=36063,xi=34852,Ko=3553,Ru=34067,Ls=34069,Cu=33984,ga=6408,Ma=5126,Hi=5121,Bs=36160,Ou=36053,wu=36064,Fs=16384,Dd=function(O,$){var ae=1;$.ext_texture_filter_anisotropic&&(ae=O.getParameter(Au));var Ce=1,Ge=1;$.webgl_draw_buffers&&(Ce=O.getParameter(xi),Ge=O.getParameter(ta));var Ne=!!$.oes_texture_float;if(Ne){var ke=O.createTexture();O.bindTexture(Ko,ke),O.texImage2D(Ko,0,ga,1,1,0,ga,Ma,null);var ut=O.createFramebuffer();if(O.bindFramebuffer(Bs,ut),O.framebufferTexture2D(Bs,wu,Ko,ke,0),O.bindTexture(Ko,null),O.checkFramebufferStatus(Bs)!==Ou)Ne=!1;else{O.viewport(0,0,1,1),O.clearColor(1,0,0,1),O.clear(Fs);var dt=Tn.allocType(Ma,4);O.readPixels(0,0,1,1,ga,Ma,dt),O.getError()?Ne=!1:(O.deleteFramebuffer(ut),O.deleteTexture(ke),Ne=dt[0]===1),Tn.freeType(dt)}}var St=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ht=!0;if(!St){var gt=O.createTexture(),bt=Tn.allocType(Hi,36);O.activeTexture(Cu),O.bindTexture(Ru,gt),O.texImage2D(Ls,0,ga,3,3,0,ga,Hi,bt),Tn.freeType(bt),O.bindTexture(Ru,null),O.deleteTexture(gt),ht=!O.getError()}return{colorBits:[O.getParameter(El),O.getParameter(xu),O.getParameter($o),O.getParameter(Yo)],depthBits:O.getParameter(Is),stencilBits:O.getParameter(yo),subpixelBits:O.getParameter(af),extensions:Object.keys($).filter(function(it){return!!$[it]}),maxAnisotropic:ae,maxDrawbuffers:Ce,maxColorAttachments:Ge,pointSizeDims:O.getParameter(mn),lineWidthDims:O.getParameter(Ps),maxViewportDims:O.getParameter(Na),maxCombinedTextureUnits:O.getParameter(bl),maxCubeMapSize:O.getParameter(ai),maxRenderbufferSize:O.getParameter(Zo),maxTextureUnits:O.getParameter(Qa),maxTextureSize:O.getParameter(Ds),maxAttributes:O.getParameter(Eo),maxVertexUniforms:O.getParameter(am),maxVertexTextureUnits:O.getParameter(ea),maxVaryingVectors:O.getParameter(Pd),maxFragmentUniforms:O.getParameter(ma),glsl:O.getParameter(Tu),renderer:O.getParameter(Li),vendor:O.getParameter(va),version:O.getParameter(Su),readFloat:Ne,npotTextureCube:ht}};function G(O){return!!O&&typeof O=="object"&&Array.isArray(O.shape)&&Array.isArray(O.stride)&&typeof O.offset=="number"&&O.shape.length===O.stride.length&&(Array.isArray(O.data)||r(O.data))}var K=function(O){return Object.keys(O).map(function($){return O[$]})},pe={shape:zn,flatten:ei};function Ve(O,$,ae){for(var Ce=0;Ce<$;++Ce)ae[Ce]=O[Ce]}function Et(O,$,ae,Ce){for(var Ge=0,Ne=0;Ne<$;++Ne)for(var ke=O[Ne],ut=0;ut<ae;++ut)Ce[Ge++]=ke[ut]}function kt(O,$,ae,Ce,Ge,Ne){for(var ke=Ne,ut=0;ut<$;++ut)for(var dt=O[ut],St=0;St<ae;++St)for(var ht=dt[St],gt=0;gt<Ce;++gt)Ge[ke++]=ht[gt]}function Ir(O,$,ae,Ce,Ge){for(var Ne=1,ke=ae+1;ke<$.length;++ke)Ne*=$[ke];var ut=$[ae];if($.length-ae===4){var dt=$[ae+1],St=$[ae+2],ht=$[ae+3];for(ke=0;ke<ut;++ke)kt(O[ke],dt,St,ht,Ce,Ge),Ge+=Ne}else for(ke=0;ke<ut;++ke)Ir(O[ke],$,ae+1,Ce,Ge),Ge+=Ne}function ei(O,$,ae,Ce){var Ge=1;if($.length)for(var Ne=0;Ne<$.length;++Ne)Ge*=$[Ne];else Ge=0;var ke=Ce||Tn.allocType(ae,Ge);switch($.length){case 0:break;case 1:Ve(O,$[0],ke);break;case 2:Et(O,$[0],$[1],ke);break;case 3:kt(O,$[0],$[1],$[2],ke,0);break;default:Ir(O,$,0,ke,0)}return ke}function zn(O){for(var $=[],ae=O;ae.length;ae=ae[0])$.push(ae.length);return $}var Zn={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ra=5120,Nu=5122,Mu=5124,f0=5121,om=5123,d0=5125,of=5126,Qo=5126,Jo={int8:ra,int16:Nu,int32:Mu,uint8:f0,uint16:om,uint32:d0,float:of,float32:Qo},sf=35048,Us=35040,Iu={dynamic:sf,stream:Us,static:35044},Pu=pe.flatten,sm=pe.shape,lf=35044,Ld=35040,Bd=5121,Bi=5126,na=[];na[5120]=1,na[5122]=2,na[5124]=4,na[5121]=1,na[5123]=2,na[5125]=4,na[5126]=4;function xl(O){return Zn[Object.prototype.toString.call(O)]|0}function Du(O,$){for(var ae=0;ae<$.length;++ae)O[ae]=$[ae]}function h0(O,$,ae,Ce,Ge,Ne,ke){for(var ut=0,dt=0;dt<ae;++dt)for(var St=0;St<Ce;++St)O[ut++]=$[Ge*dt+Ne*St+ke]}function lm(O,$,ae,Ce){var Ge=0,Ne={};function ke(be){this.id=Ge++,this.buffer=O.createBuffer(),this.type=be,this.usage=lf,this.byteLength=0,this.dimension=1,this.dtype=Bd,this.persistentData=null,ae.profile&&(this.stats={size:0})}ke.prototype.bind=function(){O.bindBuffer(this.type,this.buffer)},ke.prototype.destroy=function(){bt(this)};var ut=[];function dt(be,De){var ct=ut.pop();return ct||(ct=new ke(be)),ct.bind(),gt(ct,De,Ld,0,1,!1),ct}function St(be){ut.push(be)}function ht(be,De,ct){be.byteLength=De.byteLength,O.bufferData(be.type,De,ct)}function gt(be,De,ct,Rt,Je,Ct){var ft;if(be.usage=ct,Array.isArray(De)){if(be.dtype=Rt||Bi,De.length>0){var Ot;if(Array.isArray(De[0])){ft=sm(De);for(var rt=1,yt=1;yt<ft.length;++yt)rt*=ft[yt];be.dimension=rt,Ot=Pu(De,ft,be.dtype),ht(be,Ot,ct),Ct?be.persistentData=Ot:Tn.freeType(Ot)}else if(typeof De[0]=="number"){be.dimension=Je;var Ht=Tn.allocType(be.dtype,De.length);Du(Ht,De),ht(be,Ht,ct),Ct?be.persistentData=Ht:Tn.freeType(Ht)}else r(De[0])?(be.dimension=De[0].length,be.dtype=Rt||xl(De[0])||Bi,Ot=Pu(De,[De.length,De[0].length],be.dtype),ht(be,Ot,ct),Ct?be.persistentData=Ot:Tn.freeType(Ot)):k.raise("invalid buffer data")}}else if(r(De))be.dtype=Rt||xl(De),be.dimension=Je,ht(be,De,ct),Ct&&(be.persistentData=new Uint8Array(new Uint8Array(De.buffer)));else if(G(De)){ft=De.shape;var rr=De.stride,At=De.offset,Ye=0,Ke=0,ar=0,Ar=0;ft.length===1?(Ye=ft[0],Ke=1,ar=rr[0],Ar=0):ft.length===2?(Ye=ft[0],Ke=ft[1],ar=rr[0],Ar=rr[1]):k.raise("invalid shape"),be.dtype=Rt||xl(De.data)||Bi,be.dimension=Ke;var Bt=Tn.allocType(be.dtype,Ye*Ke);h0(Bt,De.data,Ye,Ke,ar,Ar,At),ht(be,Bt,ct),Ct?be.persistentData=Bt:Tn.freeType(Bt)}else De instanceof ArrayBuffer?(be.dtype=Bd,be.dimension=Je,ht(be,De,ct),Ct&&(be.persistentData=new Uint8Array(new Uint8Array(De)))):k.raise("invalid buffer data")}function bt(be){$.bufferCount--,Ce(be);var De=be.buffer;k(De,"buffer must not be deleted already"),O.deleteBuffer(De),be.buffer=null,delete Ne[be.id]}function it(be,De,ct,Rt){$.bufferCount++;var Je=new ke(De);Ne[Je.id]=Je;function Ct(rt){var yt=lf,Ht=null,rr=0,At=0,Ye=1;return Array.isArray(rt)||r(rt)||G(rt)||rt instanceof ArrayBuffer?Ht=rt:typeof rt=="number"?rr=rt|0:rt&&(k.type(rt,"object","buffer arguments must be an object, a number or an array"),"data"in rt&&(k(Ht===null||Array.isArray(Ht)||r(Ht)||G(Ht),"invalid data for buffer"),Ht=rt.data),"usage"in rt&&(k.parameter(rt.usage,Iu,"invalid buffer usage"),yt=Iu[rt.usage]),"type"in rt&&(k.parameter(rt.type,Jo,"invalid buffer type"),At=Jo[rt.type]),"dimension"in rt&&(k.type(rt.dimension,"number","invalid dimension"),Ye=rt.dimension|0),"length"in rt&&(k.nni(rr,"buffer length must be a nonnegative integer"),rr=rt.length|0)),Je.bind(),Ht?gt(Je,Ht,yt,At,Ye,Rt):(rr&&O.bufferData(Je.type,rr,yt),Je.dtype=At||Bd,Je.usage=yt,Je.dimension=Ye,Je.byteLength=rr),ae.profile&&(Je.stats.size=Je.byteLength*na[Je.dtype]),Ct}function ft(rt,yt){k(yt+rt.byteLength<=Je.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+rt.byteLength+" starting from offset "+yt+" to a buffer of size "+Je.byteLength),O.bufferSubData(Je.type,yt,rt)}function Ot(rt,yt){var Ht=(yt||0)|0,rr;if(Je.bind(),r(rt)||rt instanceof ArrayBuffer)ft(rt,Ht);else if(Array.isArray(rt)){if(rt.length>0)if(typeof rt[0]=="number"){var At=Tn.allocType(Je.dtype,rt.length);Du(At,rt),ft(At,Ht),Tn.freeType(At)}else if(Array.isArray(rt[0])||r(rt[0])){rr=sm(rt);var Ye=Pu(rt,rr,Je.dtype);ft(Ye,Ht),Tn.freeType(Ye)}else k.raise("invalid buffer data")}else if(G(rt)){rr=rt.shape;var Ke=rt.stride,ar=0,Ar=0,Bt=0,ur=0;rr.length===1?(ar=rr[0],Ar=1,Bt=Ke[0],ur=0):rr.length===2?(ar=rr[0],Ar=rr[1],Bt=Ke[0],ur=Ke[1]):k.raise("invalid shape");var or=Array.isArray(rt.data)?Je.dtype:xl(rt.data),mr=Tn.allocType(or,ar*Ar);h0(mr,rt.data,ar,Ar,Bt,ur,rt.offset),ft(mr,Ht),Tn.freeType(mr)}else k.raise("invalid data for buffer subdata");return Ct}return ct||Ct(be),Ct._reglType="buffer",Ct._buffer=Je,Ct.subdata=Ot,ae.profile&&(Ct.stats=Je.stats),Ct.destroy=function(){bt(Je)},Ct}function _t(){K(Ne).forEach(function(be){be.buffer=O.createBuffer(),O.bindBuffer(be.type,be.buffer),O.bufferData(be.type,be.persistentData||be.byteLength,be.usage)})}return ae.profile&&($.getTotalBufferSize=function(){var be=0;return Object.keys(Ne).forEach(function(De){be+=Ne[De].stats.size}),be}),{create:it,createStream:dt,destroyStream:St,clear:function(){K(Ne).forEach(bt),ut.forEach(bt)},getBuffer:function(be){return be&&be._buffer instanceof ke?be._buffer:null},restore:_t,_initBuffer:gt}}var um=0,uf=0,Fd=1,p0=1,jE=4,zE=4,Lu={points:um,point:uf,lines:Fd,line:p0,triangles:jE,triangle:zE,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},cm=0,VE=1,cf=4,HE=5120,Bu=5121,m0=5122,Sl=5123,v0=5124,Tl=5125,fm=34963,XE=35040,dm=35044;function qE(O,$,ae,Ce){var Ge={},Ne=0,ke={uint8:Bu,uint16:Sl};$.oes_element_index_uint&&(ke.uint32=Tl);function ut(_t){this.id=Ne++,Ge[this.id]=this,this.buffer=_t,this.primType=cf,this.vertCount=0,this.type=0}ut.prototype.bind=function(){this.buffer.bind()};var dt=[];function St(_t){var be=dt.pop();return be||(be=new ut(ae.create(null,fm,!0,!1)._buffer)),gt(be,_t,XE,-1,-1,0,0),be}function ht(_t){dt.push(_t)}function gt(_t,be,De,ct,Rt,Je,Ct){_t.buffer.bind();var ft;if(be){var Ot=Ct;!Ct&&(!r(be)||G(be)&&!r(be.data))&&(Ot=$.oes_element_index_uint?Tl:Sl),ae._initBuffer(_t.buffer,be,De,Ot,3)}else O.bufferData(fm,Je,De),_t.buffer.dtype=ft||Bu,_t.buffer.usage=De,_t.buffer.dimension=3,_t.buffer.byteLength=Je;if(ft=Ct,!Ct){switch(_t.buffer.dtype){case Bu:case HE:ft=Bu;break;case Sl:case m0:ft=Sl;break;case Tl:case v0:ft=Tl;break;default:k.raise("unsupported type for element array")}_t.buffer.dtype=ft}_t.type=ft,k(ft!==Tl||!!$.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var rt=Rt;rt<0&&(rt=_t.buffer.byteLength,ft===Sl?rt>>=1:ft===Tl&&(rt>>=2)),_t.vertCount=rt;var yt=ct;if(ct<0){yt=cf;var Ht=_t.buffer.dimension;Ht===1&&(yt=cm),Ht===2&&(yt=VE),Ht===3&&(yt=cf)}_t.primType=yt}function bt(_t){Ce.elementsCount--,k(_t.buffer!==null,"must not double destroy elements"),delete Ge[_t.id],_t.buffer.destroy(),_t.buffer=null}function it(_t,be){var De=ae.create(null,fm,!0),ct=new ut(De._buffer);Ce.elementsCount++;function Rt(Je){if(!Je)De(),ct.primType=cf,ct.vertCount=0,ct.type=Bu;else if(typeof Je=="number")De(Je),ct.primType=cf,ct.vertCount=Je|0,ct.type=Bu;else{var Ct=null,ft=dm,Ot=-1,rt=-1,yt=0,Ht=0;Array.isArray(Je)||r(Je)||G(Je)?Ct=Je:(k.type(Je,"object","invalid arguments for elements"),"data"in Je&&(Ct=Je.data,k(Array.isArray(Ct)||r(Ct)||G(Ct),"invalid data for element buffer")),"usage"in Je&&(k.parameter(Je.usage,Iu,"invalid element buffer usage"),ft=Iu[Je.usage]),"primitive"in Je&&(k.parameter(Je.primitive,Lu,"invalid element buffer primitive"),Ot=Lu[Je.primitive]),"count"in Je&&(k(typeof Je.count=="number"&&Je.count>=0,"invalid vertex count for elements"),rt=Je.count|0),"type"in Je&&(k.parameter(Je.type,ke,"invalid buffer type"),Ht=ke[Je.type]),"length"in Je?yt=Je.length|0:(yt=rt,Ht===Sl||Ht===m0?yt*=2:(Ht===Tl||Ht===v0)&&(yt*=4))),gt(ct,Ct,ft,Ot,rt,yt,Ht)}return Rt}return Rt(_t),Rt._reglType="elements",Rt._elements=ct,Rt.subdata=function(Je,Ct){return De.subdata(Je,Ct),Rt},Rt.destroy=function(){bt(ct)},Rt}return{create:it,createStream:St,destroyStream:ht,getElements:function(_t){return typeof _t=="function"&&_t._elements instanceof ut?_t._elements:null},clear:function(){K(Ge).forEach(bt)}}}var g0=new Float32Array(1),GE=new Uint32Array(g0.buffer),_0=5123;function y0(O){for(var $=Tn.allocType(_0,O.length),ae=0;ae<O.length;++ae)if(isNaN(O[ae]))$[ae]=65535;else if(O[ae]===1/0)$[ae]=31744;else if(O[ae]===-1/0)$[ae]=64512;else{g0[0]=O[ae];var Ce=GE[0],Ge=Ce>>>31<<15,Ne=(Ce<<1>>>24)-127,ke=Ce>>13&1023;if(Ne<-24)$[ae]=Ge;else if(Ne<-14){var ut=-14-Ne;$[ae]=Ge+(ke+1024>>ut)}else Ne>15?$[ae]=Ge+31744:$[ae]=Ge+(Ne+15<<10)+ke}return $}function On(O){return Array.isArray(O)||r(O)}var E0=function(O){return!(O&O-1)&&!!O},WE=34467,es=3553,b0=34067,Ud=34069,Al=6408,hm=6406,Fu=6407,ts=6409,kd=6410,pm=32854,jd=32855,mm=36194,x0=32819,S0=32820,Uu=33635,$E=34042,vm=6402,zd=34041,Vd=35904,Hd=35906,bo=36193,Rl=33776,gm=33777,ku=33778,Xd=33779,_m=35986,qd=35987,Gd=34798,ym=35840,Em=35841,bm=35842,T0=35843,A0=36196,ju=5121,xm=5123,Sm=5125,Si=5126,ff=10242,R0=10243,C0=10497,Wd=33071,O0=33648,Tm=10240,YE=10241,ks=9728,Am=9729,Cl=9984,$d=9985,Rm=9986,rs=9987,zu=33170,Vu=4352,w0=4353,Ol=4354,N0=34046,M0=3317,I0=37440,ZE=37441,KE=37443,P0=37444,df=33984,D0=[Cl,Rm,$d,rs],Hu=[0,ts,kd,Fu,Al],Vn={};Vn[ts]=Vn[hm]=Vn[vm]=1,Vn[zd]=Vn[kd]=2,Vn[Fu]=Vn[Vd]=3,Vn[Al]=Vn[Hd]=4;function wl(O){return"[object "+O+"]"}var _a=wl("HTMLCanvasElement"),ya=wl("OffscreenCanvas"),Nl=wl("CanvasRenderingContext2D"),Yd=wl("ImageBitmap"),hf=wl("HTMLImageElement"),pf=wl("HTMLVideoElement"),Cm=Object.keys(Zn).concat([_a,ya,Nl,Yd,hf,pf]),Ja=[];Ja[ju]=1,Ja[Si]=4,Ja[bo]=2,Ja[xm]=2,Ja[Sm]=4;var oi=[];oi[pm]=2,oi[jd]=2,oi[mm]=2,oi[zd]=4,oi[Rl]=.5,oi[gm]=.5,oi[ku]=1,oi[Xd]=1,oi[_m]=.5,oi[qd]=1,oi[Gd]=1,oi[ym]=.5,oi[Em]=.25,oi[bm]=.5,oi[T0]=.25,oi[A0]=.5;function mf(O){return Array.isArray(O)&&(O.length===0||typeof O[0]=="number")}function Ml(O){if(!Array.isArray(O))return!1;var $=O.length;return!($===0||!On(O[0]))}function Il(O){return Object.prototype.toString.call(O)}function ia(O){return Il(O)===_a}function Zd(O){return Il(O)===ya}function ns(O){return Il(O)===Nl}function L0(O){return Il(O)===Yd}function Kd(O){return Il(O)===hf}function Pl(O){return Il(O)===pf}function vf(O){if(!O)return!1;var $=Il(O);return Cm.indexOf($)>=0?!0:mf(O)||Ml(O)||G(O)}function Qd(O){return Zn[Object.prototype.toString.call(O)]|0}function Xu(O,$){var ae=$.length;switch(O.type){case ju:case xm:case Sm:case Si:var Ce=Tn.allocType(O.type,ae);Ce.set($),O.data=Ce;break;case bo:O.data=y0($);break;default:k.raise("unsupported texture type, must specify a typed array")}}function Dl(O,$){return Tn.allocType(O.type===bo?Si:O.type,$)}function gf(O,$){O.type===bo?(O.data=y0($),Tn.freeType($)):O.data=$}function Jd(O,$,ae,Ce,Ge,Ne){for(var ke=O.width,ut=O.height,dt=O.channels,St=ke*ut*dt,ht=Dl(O,St),gt=0,bt=0;bt<ut;++bt)for(var it=0;it<ke;++it)for(var _t=0;_t<dt;++_t)ht[gt++]=$[ae*it+Ce*bt+Ge*_t+Ne];gf(O,ht)}function Xi(O,$,ae,Ce,Ge,Ne){var ke;if(typeof oi[O]<"u"?ke=oi[O]:ke=Vn[O]*Ja[$],Ne&&(ke*=6),Ge){for(var ut=0,dt=ae;dt>=1;)ut+=ke*dt*dt,dt/=2;return ut}else return ke*ae*Ce}function Ia(O,$,ae,Ce,Ge,Ne,ke){var ut={"don't care":Vu,"dont care":Vu,nice:Ol,fast:w0},dt={repeat:C0,clamp:Wd,mirror:O0},St={nearest:ks,linear:Am},ht=n({mipmap:rs,"nearest mipmap nearest":Cl,"linear mipmap nearest":$d,"nearest mipmap linear":Rm,"linear mipmap linear":rs},St),gt={none:0,browser:P0},bt={uint8:ju,rgba4:x0,rgb565:Uu,"rgb5 a1":S0},it={alpha:hm,luminance:ts,"luminance alpha":kd,rgb:Fu,rgba:Al,rgba4:pm,"rgb5 a1":jd,rgb565:mm},_t={};$.ext_srgb&&(it.srgb=Vd,it.srgba=Hd),$.oes_texture_float&&(bt.float32=bt.float=Si),$.oes_texture_half_float&&(bt.float16=bt["half float"]=bo),$.webgl_depth_texture&&(n(it,{depth:vm,"depth stencil":zd}),n(bt,{uint16:xm,uint32:Sm,"depth stencil":$E})),$.webgl_compressed_texture_s3tc&&n(_t,{"rgb s3tc dxt1":Rl,"rgba s3tc dxt1":gm,"rgba s3tc dxt3":ku,"rgba s3tc dxt5":Xd}),$.webgl_compressed_texture_atc&&n(_t,{"rgb atc":_m,"rgba atc explicit alpha":qd,"rgba atc interpolated alpha":Gd}),$.webgl_compressed_texture_pvrtc&&n(_t,{"rgb pvrtc 4bppv1":ym,"rgb pvrtc 2bppv1":Em,"rgba pvrtc 4bppv1":bm,"rgba pvrtc 2bppv1":T0}),$.webgl_compressed_texture_etc1&&(_t["rgb etc1"]=A0);var be=Array.prototype.slice.call(O.getParameter(WE));Object.keys(_t).forEach(function(te){var Me=_t[te];be.indexOf(Me)>=0&&(it[te]=Me)});var De=Object.keys(it);ae.textureFormats=De;var ct=[];Object.keys(it).forEach(function(te){var Me=it[te];ct[Me]=te});var Rt=[];Object.keys(bt).forEach(function(te){var Me=bt[te];Rt[Me]=te});var Je=[];Object.keys(St).forEach(function(te){var Me=St[te];Je[Me]=te});var Ct=[];Object.keys(ht).forEach(function(te){var Me=ht[te];Ct[Me]=te});var ft=[];Object.keys(dt).forEach(function(te){var Me=dt[te];ft[Me]=te});var Ot=De.reduce(function(te,Me){var Re=it[Me];return Re===ts||Re===hm||Re===ts||Re===kd||Re===vm||Re===zd||$.ext_srgb&&(Re===Vd||Re===Hd)?te[Re]=Re:Re===jd||Me.indexOf("rgba")>=0?te[Re]=Al:te[Re]=Fu,te},{});function rt(){this.internalformat=Al,this.format=Al,this.type=ju,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=P0,this.width=0,this.height=0,this.channels=0}function yt(te,Me){te.internalformat=Me.internalformat,te.format=Me.format,te.type=Me.type,te.compressed=Me.compressed,te.premultiplyAlpha=Me.premultiplyAlpha,te.flipY=Me.flipY,te.unpackAlignment=Me.unpackAlignment,te.colorSpace=Me.colorSpace,te.width=Me.width,te.height=Me.height,te.channels=Me.channels}function Ht(te,Me){if(!(typeof Me!="object"||!Me)){if("premultiplyAlpha"in Me&&(k.type(Me.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),te.premultiplyAlpha=Me.premultiplyAlpha),"flipY"in Me&&(k.type(Me.flipY,"boolean","invalid texture flip"),te.flipY=Me.flipY),"alignment"in Me&&(k.oneOf(Me.alignment,[1,2,4,8],"invalid texture unpack alignment"),te.unpackAlignment=Me.alignment),"colorSpace"in Me&&(k.parameter(Me.colorSpace,gt,"invalid colorSpace"),te.colorSpace=gt[Me.colorSpace]),"type"in Me){var Re=Me.type;k($.oes_texture_float||!(Re==="float"||Re==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),k($.oes_texture_half_float||!(Re==="half float"||Re==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),k($.webgl_depth_texture||!(Re==="uint16"||Re==="uint32"||Re==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),k.parameter(Re,bt,"invalid texture type"),te.type=bt[Re]}var Nt=te.width,nr=te.height,Dr=te.channels,q=!1;"shape"in Me?(k(Array.isArray(Me.shape)&&Me.shape.length>=2,"shape must be an array"),Nt=Me.shape[0],nr=Me.shape[1],Me.shape.length===3&&(Dr=Me.shape[2],k(Dr>0&&Dr<=4,"invalid number of channels"),q=!0),k(Nt>=0&&Nt<=ae.maxTextureSize,"invalid width"),k(nr>=0&&nr<=ae.maxTextureSize,"invalid height")):("radius"in Me&&(Nt=nr=Me.radius,k(Nt>=0&&Nt<=ae.maxTextureSize,"invalid radius")),"width"in Me&&(Nt=Me.width,k(Nt>=0&&Nt<=ae.maxTextureSize,"invalid width")),"height"in Me&&(nr=Me.height,k(nr>=0&&nr<=ae.maxTextureSize,"invalid height")),"channels"in Me&&(Dr=Me.channels,k(Dr>0&&Dr<=4,"invalid number of channels"),q=!0)),te.width=Nt|0,te.height=nr|0,te.channels=Dr|0;var Y=!1;if("format"in Me){var ie=Me.format;k($.webgl_depth_texture||!(ie==="depth"||ie==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),k.parameter(ie,it,"invalid texture format");var Se=te.internalformat=it[ie];te.format=Ot[Se],ie in bt&&("type"in Me||(te.type=bt[ie])),ie in _t&&(te.compressed=!0),Y=!0}!q&&Y?te.channels=Vn[te.format]:q&&!Y?te.channels!==Hu[te.format]&&(te.format=te.internalformat=Hu[te.channels]):Y&&q&&k(te.channels===Vn[te.format],"number of channels inconsistent with specified format")}}function rr(te){O.pixelStorei(I0,te.flipY),O.pixelStorei(ZE,te.premultiplyAlpha),O.pixelStorei(KE,te.colorSpace),O.pixelStorei(M0,te.unpackAlignment)}function At(){rt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ye(te,Me){var Re=null;if(vf(Me)?Re=Me:Me&&(k.type(Me,"object","invalid pixel data type"),Ht(te,Me),"x"in Me&&(te.xOffset=Me.x|0),"y"in Me&&(te.yOffset=Me.y|0),vf(Me.data)&&(Re=Me.data)),k(!te.compressed||Re instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Me.copy){k(!Re,"can not specify copy and data field for the same texture");var Nt=Ge.viewportWidth,nr=Ge.viewportHeight;te.width=te.width||Nt-te.xOffset,te.height=te.height||nr-te.yOffset,te.needsCopy=!0,k(te.xOffset>=0&&te.xOffset<Nt&&te.yOffset>=0&&te.yOffset<nr&&te.width>0&&te.width<=Nt&&te.height>0&&te.height<=nr,"copy texture read out of bounds")}else if(!Re)te.width=te.width||1,te.height=te.height||1,te.channels=te.channels||4;else if(r(Re))te.channels=te.channels||4,te.data=Re,!("type"in Me)&&te.type===ju&&(te.type=Qd(Re));else if(mf(Re))te.channels=te.channels||4,Xu(te,Re),te.alignment=1,te.needsFree=!0;else if(G(Re)){var Dr=Re.data;!Array.isArray(Dr)&&te.type===ju&&(te.type=Qd(Dr));var q=Re.shape,Y=Re.stride,ie,Se,Te,se,he,me;q.length===3?(Te=q[2],me=Y[2]):(k(q.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Te=1,me=1),ie=q[0],Se=q[1],se=Y[0],he=Y[1],te.alignment=1,te.width=ie,te.height=Se,te.channels=Te,te.format=te.internalformat=Hu[Te],te.needsFree=!0,Jd(te,Dr,se,he,me,Re.offset)}else if(ia(Re)||Zd(Re)||ns(Re))ia(Re)||Zd(Re)?te.element=Re:te.element=Re.canvas,te.width=te.element.width,te.height=te.element.height,te.channels=4;else if(L0(Re))te.element=Re,te.width=Re.width,te.height=Re.height,te.channels=4;else if(Kd(Re))te.element=Re,te.width=Re.naturalWidth,te.height=Re.naturalHeight,te.channels=4;else if(Pl(Re))te.element=Re,te.width=Re.videoWidth,te.height=Re.videoHeight,te.channels=4;else if(Ml(Re)){var J=te.width||Re[0].length,ce=te.height||Re.length,Z=te.channels;On(Re[0][0])?Z=Z||Re[0][0].length:Z=Z||1;for(var fe=pe.shape(Re),we=1,Fe=0;Fe<fe.length;++Fe)we*=fe[Fe];var nt=Dl(te,we);pe.flatten(Re,fe,"",nt),gf(te,nt),te.alignment=1,te.width=J,te.height=ce,te.channels=Z,te.format=te.internalformat=Hu[Z],te.needsFree=!0}te.type===Si?k(ae.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):te.type===bo&&k(ae.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Ke(te,Me,Re){var Nt=te.element,nr=te.data,Dr=te.internalformat,q=te.format,Y=te.type,ie=te.width,Se=te.height;rr(te),Nt?O.texImage2D(Me,Re,q,q,Y,Nt):te.compressed?O.compressedTexImage2D(Me,Re,Dr,ie,Se,0,nr):te.needsCopy?(Ce(),O.copyTexImage2D(Me,Re,q,te.xOffset,te.yOffset,ie,Se,0)):O.texImage2D(Me,Re,q,ie,Se,0,q,Y,nr||null)}function ar(te,Me,Re,Nt,nr){var Dr=te.element,q=te.data,Y=te.internalformat,ie=te.format,Se=te.type,Te=te.width,se=te.height;rr(te),Dr?O.texSubImage2D(Me,nr,Re,Nt,ie,Se,Dr):te.compressed?O.compressedTexSubImage2D(Me,nr,Re,Nt,Y,Te,se,q):te.needsCopy?(Ce(),O.copyTexSubImage2D(Me,nr,Re,Nt,te.xOffset,te.yOffset,Te,se)):O.texSubImage2D(Me,nr,Re,Nt,Te,se,ie,Se,q)}var Ar=[];function Bt(){return Ar.pop()||new At}function ur(te){te.needsFree&&Tn.freeType(te.data),At.call(te),Ar.push(te)}function or(){rt.call(this),this.genMipmaps=!1,this.mipmapHint=Vu,this.mipmask=0,this.images=Array(16)}function mr(te,Me,Re){var Nt=te.images[0]=Bt();te.mipmask=1,Nt.width=te.width=Me,Nt.height=te.height=Re,Nt.channels=te.channels=4}function Rr(te,Me){var Re=null;if(vf(Me))Re=te.images[0]=Bt(),yt(Re,te),Ye(Re,Me),te.mipmask=1;else if(Ht(te,Me),Array.isArray(Me.mipmap))for(var Nt=Me.mipmap,nr=0;nr<Nt.length;++nr)Re=te.images[nr]=Bt(),yt(Re,te),Re.width>>=nr,Re.height>>=nr,Ye(Re,Nt[nr]),te.mipmask|=1<<nr;else Re=te.images[0]=Bt(),yt(Re,te),Ye(Re,Me),te.mipmask=1;yt(te,te.images[0]),te.compressed&&(te.internalformat===Rl||te.internalformat===gm||te.internalformat===ku||te.internalformat===Xd)&&k(te.width%4===0&&te.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function tn(te,Me){for(var Re=te.images,Nt=0;Nt<Re.length;++Nt){if(!Re[Nt])return;Ke(Re[Nt],Me,Nt)}}var Jn=[];function br(){var te=Jn.pop()||new or;rt.call(te),te.mipmask=0;for(var Me=0;Me<16;++Me)te.images[Me]=null;return te}function Xn(te){for(var Me=te.images,Re=0;Re<Me.length;++Re)Me[Re]&&ur(Me[Re]),Me[Re]=null;Jn.push(te)}function nn(){this.minFilter=ks,this.magFilter=ks,this.wrapS=Wd,this.wrapT=Wd,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Vu}function An(te,Me){if("min"in Me){var Re=Me.min;k.parameter(Re,ht),te.minFilter=ht[Re],D0.indexOf(te.minFilter)>=0&&!("faces"in Me)&&(te.genMipmaps=!0)}if("mag"in Me){var Nt=Me.mag;k.parameter(Nt,St),te.magFilter=St[Nt]}var nr=te.wrapS,Dr=te.wrapT;if("wrap"in Me){var q=Me.wrap;typeof q=="string"?(k.parameter(q,dt),nr=Dr=dt[q]):Array.isArray(q)&&(k.parameter(q[0],dt),k.parameter(q[1],dt),nr=dt[q[0]],Dr=dt[q[1]])}else{if("wrapS"in Me){var Y=Me.wrapS;k.parameter(Y,dt),nr=dt[Y]}if("wrapT"in Me){var ie=Me.wrapT;k.parameter(ie,dt),Dr=dt[ie]}}if(te.wrapS=nr,te.wrapT=Dr,"anisotropic"in Me){var Se=Me.anisotropic;k(typeof Se=="number"&&Se>=1&&Se<=ae.maxAnisotropic,"aniso samples must be between 1 and "),te.anisotropic=Me.anisotropic}if("mipmap"in Me){var Te=!1;switch(typeof Me.mipmap){case"string":k.parameter(Me.mipmap,ut,"invalid mipmap hint"),te.mipmapHint=ut[Me.mipmap],te.genMipmaps=!0,Te=!0;break;case"boolean":Te=te.genMipmaps=Me.mipmap;break;case"object":k(Array.isArray(Me.mipmap),"invalid mipmap type"),te.genMipmaps=!1,Te=!0;break;default:k.raise("invalid mipmap type")}Te&&!("min"in Me)&&(te.minFilter=Cl)}}function Rn(te,Me){O.texParameteri(Me,YE,te.minFilter),O.texParameteri(Me,Tm,te.magFilter),O.texParameteri(Me,ff,te.wrapS),O.texParameteri(Me,R0,te.wrapT),$.ext_texture_filter_anisotropic&&O.texParameteri(Me,N0,te.anisotropic),te.genMipmaps&&(O.hint(zu,te.mipmapHint),O.generateMipmap(Me))}var qn=0,dn={},jr=ae.maxTextureUnits,Nn=Array(jr).map(function(){return null});function pr(te){rt.call(this),this.mipmask=0,this.internalformat=Al,this.id=qn++,this.refCount=1,this.target=te,this.texture=O.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new nn,ke.profile&&(this.stats={size:0})}function Wr(te){O.activeTexture(df),O.bindTexture(te.target,te.texture)}function zr(){var te=Nn[0];te?O.bindTexture(te.target,te.texture):O.bindTexture(es,null)}function Yt(te){var Me=te.texture;k(Me,"must not double destroy texture");var Re=te.unit,Nt=te.target;Re>=0&&(O.activeTexture(df+Re),O.bindTexture(Nt,null),Nn[Re]=null),O.deleteTexture(Me),te.texture=null,te.params=null,te.pixels=null,te.refCount=0,delete dn[te.id],Ne.textureCount--}n(pr.prototype,{bind:function(){var te=this;te.bindCount+=1;var Me=te.unit;if(Me<0){for(var Re=0;Re<jr;++Re){var Nt=Nn[Re];if(Nt){if(Nt.bindCount>0)continue;Nt.unit=-1}Nn[Re]=te,Me=Re;break}Me>=jr&&k.raise("insufficient number of texture units"),ke.profile&&Ne.maxTextureUnits<Me+1&&(Ne.maxTextureUnits=Me+1),te.unit=Me,O.activeTexture(df+Me),O.bindTexture(te.target,te.texture)}return Me},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Yt(this)}});function xr(te,Me){var Re=new pr(es);dn[Re.id]=Re,Ne.textureCount++;function Nt(q,Y){var ie=Re.texInfo;nn.call(ie);var Se=br();return typeof q=="number"?typeof Y=="number"?mr(Se,q|0,Y|0):mr(Se,q|0,q|0):q?(k.type(q,"object","invalid arguments to regl.texture"),An(ie,q),Rr(Se,q)):mr(Se,1,1),ie.genMipmaps&&(Se.mipmask=(Se.width<<1)-1),Re.mipmask=Se.mipmask,yt(Re,Se),k.texture2D(ie,Se,ae),Re.internalformat=Se.internalformat,Nt.width=Se.width,Nt.height=Se.height,Wr(Re),tn(Se,es),Rn(ie,es),zr(),Xn(Se),ke.profile&&(Re.stats.size=Xi(Re.internalformat,Re.type,Se.width,Se.height,ie.genMipmaps,!1)),Nt.format=ct[Re.internalformat],Nt.type=Rt[Re.type],Nt.mag=Je[ie.magFilter],Nt.min=Ct[ie.minFilter],Nt.wrapS=ft[ie.wrapS],Nt.wrapT=ft[ie.wrapT],Nt}function nr(q,Y,ie,Se){k(!!q,"must specify image data");var Te=Y|0,se=ie|0,he=Se|0,me=Bt();return yt(me,Re),me.width=0,me.height=0,Ye(me,q),me.width=me.width||(Re.width>>he)-Te,me.height=me.height||(Re.height>>he)-se,k(Re.type===me.type&&Re.format===me.format&&Re.internalformat===me.internalformat,"incompatible format for texture.subimage"),k(Te>=0&&se>=0&&Te+me.width<=Re.width&&se+me.height<=Re.height,"texture.subimage write out of bounds"),k(Re.mipmask&1<<he,"missing mipmap data"),k(me.data||me.element||me.needsCopy,"missing image data"),Wr(Re),ar(me,es,Te,se,he),zr(),ur(me),Nt}function Dr(q,Y){var ie=q|0,Se=Y|0||ie;if(ie===Re.width&&Se===Re.height)return Nt;Nt.width=Re.width=ie,Nt.height=Re.height=Se,Wr(Re);for(var Te=0;Re.mipmask>>Te;++Te){var se=ie>>Te,he=Se>>Te;if(!se||!he)break;O.texImage2D(es,Te,Re.format,se,he,0,Re.format,Re.type,null)}return zr(),ke.profile&&(Re.stats.size=Xi(Re.internalformat,Re.type,ie,Se,!1,!1)),Nt}return Nt(te,Me),Nt.subimage=nr,Nt.resize=Dr,Nt._reglType="texture2d",Nt._texture=Re,ke.profile&&(Nt.stats=Re.stats),Nt.destroy=function(){Re.decRef()},Nt}function Zt(te,Me,Re,Nt,nr,Dr){var q=new pr(b0);dn[q.id]=q,Ne.cubeCount++;var Y=new Array(6);function ie(se,he,me,J,ce,Z){var fe,we=q.texInfo;for(nn.call(we),fe=0;fe<6;++fe)Y[fe]=br();if(typeof se=="number"||!se){var Fe=se|0||1;for(fe=0;fe<6;++fe)mr(Y[fe],Fe,Fe)}else if(typeof se=="object")if(he)Rr(Y[0],se),Rr(Y[1],he),Rr(Y[2],me),Rr(Y[3],J),Rr(Y[4],ce),Rr(Y[5],Z);else if(An(we,se),Ht(q,se),"faces"in se){var nt=se.faces;for(k(Array.isArray(nt)&&nt.length===6,"cube faces must be a length 6 array"),fe=0;fe<6;++fe)k(typeof nt[fe]=="object"&&!!nt[fe],"invalid input for cube map face"),yt(Y[fe],q),Rr(Y[fe],nt[fe])}else for(fe=0;fe<6;++fe)Rr(Y[fe],se);else k.raise("invalid arguments to cube map");for(yt(q,Y[0]),ae.npotTextureCube||k(E0(q.width)&&E0(q.height),"your browser does not support non power or two texture dimensions"),we.genMipmaps?q.mipmask=(Y[0].width<<1)-1:q.mipmask=Y[0].mipmask,k.textureCube(q,we,Y,ae),q.internalformat=Y[0].internalformat,ie.width=Y[0].width,ie.height=Y[0].height,Wr(q),fe=0;fe<6;++fe)tn(Y[fe],Ud+fe);for(Rn(we,b0),zr(),ke.profile&&(q.stats.size=Xi(q.internalformat,q.type,ie.width,ie.height,we.genMipmaps,!0)),ie.format=ct[q.internalformat],ie.type=Rt[q.type],ie.mag=Je[we.magFilter],ie.min=Ct[we.minFilter],ie.wrapS=ft[we.wrapS],ie.wrapT=ft[we.wrapT],fe=0;fe<6;++fe)Xn(Y[fe]);return ie}function Se(se,he,me,J,ce){k(!!he,"must specify image data"),k(typeof se=="number"&&se===(se|0)&&se>=0&&se<6,"invalid face");var Z=me|0,fe=J|0,we=ce|0,Fe=Bt();return yt(Fe,q),Fe.width=0,Fe.height=0,Ye(Fe,he),Fe.width=Fe.width||(q.width>>we)-Z,Fe.height=Fe.height||(q.height>>we)-fe,k(q.type===Fe.type&&q.format===Fe.format&&q.internalformat===Fe.internalformat,"incompatible format for texture.subimage"),k(Z>=0&&fe>=0&&Z+Fe.width<=q.width&&fe+Fe.height<=q.height,"texture.subimage write out of bounds"),k(q.mipmask&1<<we,"missing mipmap data"),k(Fe.data||Fe.element||Fe.needsCopy,"missing image data"),Wr(q),ar(Fe,Ud+se,Z,fe,we),zr(),ur(Fe),ie}function Te(se){var he=se|0;if(he!==q.width){ie.width=q.width=he,ie.height=q.height=he,Wr(q);for(var me=0;me<6;++me)for(var J=0;q.mipmask>>J;++J)O.texImage2D(Ud+me,J,q.format,he>>J,he>>J,0,q.format,q.type,null);return zr(),ke.profile&&(q.stats.size=Xi(q.internalformat,q.type,ie.width,ie.height,!1,!0)),ie}}return ie(te,Me,Re,Nt,nr,Dr),ie.subimage=Se,ie.resize=Te,ie._reglType="textureCube",ie._texture=q,ke.profile&&(ie.stats=q.stats),ie.destroy=function(){q.decRef()},ie}function Vr(){for(var te=0;te<jr;++te)O.activeTexture(df+te),O.bindTexture(es,null),Nn[te]=null;K(dn).forEach(Yt),Ne.cubeCount=0,Ne.textureCount=0}ke.profile&&(Ne.getTotalTextureSize=function(){var te=0;return Object.keys(dn).forEach(function(Me){te+=dn[Me].stats.size}),te});function hi(){for(var te=0;te<jr;++te){var Me=Nn[te];Me&&(Me.bindCount=0,Me.unit=-1,Nn[te]=null)}K(dn).forEach(function(Re){Re.texture=O.createTexture(),O.bindTexture(Re.target,Re.texture);for(var Nt=0;Nt<32;++Nt)if((Re.mipmask&1<<Nt)!==0)if(Re.target===es)O.texImage2D(es,Nt,Re.internalformat,Re.width>>Nt,Re.height>>Nt,0,Re.internalformat,Re.type,null);else for(var nr=0;nr<6;++nr)O.texImage2D(Ud+nr,Nt,Re.internalformat,Re.width>>Nt,Re.height>>Nt,0,Re.internalformat,Re.type,null);Rn(Re.texInfo,Re.target)})}return{create2D:xr,createCube:Zt,clear:Vr,getTexture:function(te){return null},restore:hi}}var aa=36161,Pa=32854,xo=32855,js=36194,Om=33189,eh=36168,th=34041,Fi=35907,wn=34836,Qr=34842,zs=34843,ti=[];ti[Pa]=2,ti[xo]=2,ti[js]=2,ti[Om]=2,ti[eh]=1,ti[th]=4,ti[Fi]=4,ti[wn]=16,ti[Qr]=8,ti[zs]=6;function rh(O,$,ae){return ti[O]*$*ae}var Ll=function(O,$,ae,Ce,Ge){var Ne={rgba4:Pa,rgb565:js,"rgb5 a1":xo,depth:Om,stencil:eh,"depth stencil":th};$.ext_srgb&&(Ne.srgba=Fi),$.ext_color_buffer_half_float&&(Ne.rgba16f=Qr,Ne.rgb16f=zs),$.webgl_color_buffer_float&&(Ne.rgba32f=wn);var ke=[];Object.keys(Ne).forEach(function(it){var _t=Ne[it];ke[_t]=it});var ut=0,dt={};function St(it){this.id=ut++,this.refCount=1,this.renderbuffer=it,this.format=Pa,this.width=0,this.height=0,Ge.profile&&(this.stats={size:0})}St.prototype.decRef=function(){--this.refCount<=0&&ht(this)};function ht(it){var _t=it.renderbuffer;k(_t,"must not double destroy renderbuffer"),O.bindRenderbuffer(aa,null),O.deleteRenderbuffer(_t),it.renderbuffer=null,it.refCount=0,delete dt[it.id],Ce.renderbufferCount--}function gt(it,_t){var be=new St(O.createRenderbuffer());dt[be.id]=be,Ce.renderbufferCount++;function De(Rt,Je){var Ct=0,ft=0,Ot=Pa;if(typeof Rt=="object"&&Rt){var rt=Rt;if("shape"in rt){var yt=rt.shape;k(Array.isArray(yt)&&yt.length>=2,"invalid renderbuffer shape"),Ct=yt[0]|0,ft=yt[1]|0}else"radius"in rt&&(Ct=ft=rt.radius|0),"width"in rt&&(Ct=rt.width|0),"height"in rt&&(ft=rt.height|0);"format"in rt&&(k.parameter(rt.format,Ne,"invalid renderbuffer format"),Ot=Ne[rt.format])}else typeof Rt=="number"?(Ct=Rt|0,typeof Je=="number"?ft=Je|0:ft=Ct):Rt?k.raise("invalid arguments to renderbuffer constructor"):Ct=ft=1;if(k(Ct>0&&ft>0&&Ct<=ae.maxRenderbufferSize&&ft<=ae.maxRenderbufferSize,"invalid renderbuffer size"),!(Ct===be.width&&ft===be.height&&Ot===be.format))return De.width=be.width=Ct,De.height=be.height=ft,be.format=Ot,O.bindRenderbuffer(aa,be.renderbuffer),O.renderbufferStorage(aa,Ot,Ct,ft),k(O.getError()===0,"invalid render buffer format"),Ge.profile&&(be.stats.size=rh(be.format,be.width,be.height)),De.format=ke[be.format],De}function ct(Rt,Je){var Ct=Rt|0,ft=Je|0||Ct;return Ct===be.width&&ft===be.height||(k(Ct>0&&ft>0&&Ct<=ae.maxRenderbufferSize&&ft<=ae.maxRenderbufferSize,"invalid renderbuffer size"),De.width=be.width=Ct,De.height=be.height=ft,O.bindRenderbuffer(aa,be.renderbuffer),O.renderbufferStorage(aa,be.format,Ct,ft),k(O.getError()===0,"invalid render buffer format"),Ge.profile&&(be.stats.size=rh(be.format,be.width,be.height))),De}return De(it,_t),De.resize=ct,De._reglType="renderbuffer",De._renderbuffer=be,Ge.profile&&(De.stats=be.stats),De.destroy=function(){be.decRef()},De}Ge.profile&&(Ce.getTotalRenderbufferSize=function(){var it=0;return Object.keys(dt).forEach(function(_t){it+=dt[_t].stats.size}),it});function bt(){K(dt).forEach(function(it){it.renderbuffer=O.createRenderbuffer(),O.bindRenderbuffer(aa,it.renderbuffer),O.renderbufferStorage(aa,it.format,it.width,it.height)}),O.bindRenderbuffer(aa,null)}return{create:gt,clear:function(){K(dt).forEach(ht)},restore:bt}},So=36160,nh=36161,eo=3553,Vs=34069,wm=36064,qu=36096,ih=36128,Hs=33306,To=36053,Xs=36054,is=36055,Nm=36057,Mm=36061,_f=36193,ah=5121,Bl=5126,Ti=6407,yf=6408,B0=6402,QE=[Ti,yf],Im=[];Im[yf]=4,Im[Ti]=3;var oh=[];oh[ah]=1,oh[Bl]=4,oh[_f]=2;var si=32854,Pm=32855,Ef=36194,bf=33189,Dm=36168,Fl=34041,Gu=35907,JE=34836,F0=34842,eb=34843,U0=[si,Pm,Ef,Gu,F0,eb,JE],Da={};Da[To]="complete",Da[Xs]="incomplete attachment",Da[Nm]="incomplete dimensions",Da[is]="incomplete, missing attachment",Da[Mm]="unsupported";function Lm(O,$,ae,Ce,Ge,Ne){var ke={cur:null,next:null,dirty:!1,setFBO:null},ut=["rgba"],dt=["rgba4","rgb565","rgb5 a1"];$.ext_srgb&&dt.push("srgba"),$.ext_color_buffer_half_float&&dt.push("rgba16f","rgb16f"),$.webgl_color_buffer_float&&dt.push("rgba32f");var St=["uint8"];$.oes_texture_half_float&&St.push("half float","float16"),$.oes_texture_float&&St.push("float","float32");function ht(At,Ye,Ke){this.target=At,this.texture=Ye,this.renderbuffer=Ke;var ar=0,Ar=0;Ye?(ar=Ye.width,Ar=Ye.height):Ke&&(ar=Ke.width,Ar=Ke.height),this.width=ar,this.height=Ar}function gt(At){At&&(At.texture&&At.texture._texture.decRef(),At.renderbuffer&&At.renderbuffer._renderbuffer.decRef())}function bt(At,Ye,Ke){if(At)if(At.texture){var ar=At.texture._texture,Ar=Math.max(1,ar.width),Bt=Math.max(1,ar.height);k(Ar===Ye&&Bt===Ke,"inconsistent width/height for supplied texture"),ar.refCount+=1}else{var ur=At.renderbuffer._renderbuffer;k(ur.width===Ye&&ur.height===Ke,"inconsistent width/height for renderbuffer"),ur.refCount+=1}}function it(At,Ye){Ye&&(Ye.texture?O.framebufferTexture2D(So,At,Ye.target,Ye.texture._texture.texture,0):O.framebufferRenderbuffer(So,At,nh,Ye.renderbuffer._renderbuffer.renderbuffer))}function _t(At){var Ye=eo,Ke=null,ar=null,Ar=At;typeof At=="object"&&(Ar=At.data,"target"in At&&(Ye=At.target|0)),k.type(Ar,"function","invalid attachment data");var Bt=Ar._reglType;return Bt==="texture2d"?(Ke=Ar,k(Ye===eo)):Bt==="textureCube"?(Ke=Ar,k(Ye>=Vs&&Ye<Vs+6,"invalid cube map target")):Bt==="renderbuffer"?(ar=Ar,Ye=nh):k.raise("invalid regl object for attachment"),new ht(Ye,Ke,ar)}function be(At,Ye,Ke,ar,Ar){if(Ke){var Bt=Ce.create2D({width:At,height:Ye,format:ar,type:Ar});return Bt._texture.refCount=0,new ht(eo,Bt,null)}else{var ur=Ge.create({width:At,height:Ye,format:ar});return ur._renderbuffer.refCount=0,new ht(nh,null,ur)}}function De(At){return At&&(At.texture||At.renderbuffer)}function ct(At,Ye,Ke){At&&(At.texture?At.texture.resize(Ye,Ke):At.renderbuffer&&At.renderbuffer.resize(Ye,Ke),At.width=Ye,At.height=Ke)}var Rt=0,Je={};function Ct(){this.id=Rt++,Je[this.id]=this,this.framebuffer=O.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function ft(At){At.colorAttachments.forEach(gt),gt(At.depthAttachment),gt(At.stencilAttachment),gt(At.depthStencilAttachment)}function Ot(At){var Ye=At.framebuffer;k(Ye,"must not double destroy framebuffer"),O.deleteFramebuffer(Ye),At.framebuffer=null,Ne.framebufferCount--,delete Je[At.id]}function rt(At){var Ye;O.bindFramebuffer(So,At.framebuffer);var Ke=At.colorAttachments;for(Ye=0;Ye<Ke.length;++Ye)it(wm+Ye,Ke[Ye]);for(Ye=Ke.length;Ye<ae.maxColorAttachments;++Ye)O.framebufferTexture2D(So,wm+Ye,eo,null,0);O.framebufferTexture2D(So,Hs,eo,null,0),O.framebufferTexture2D(So,qu,eo,null,0),O.framebufferTexture2D(So,ih,eo,null,0),it(qu,At.depthAttachment),it(ih,At.stencilAttachment),it(Hs,At.depthStencilAttachment);var ar=O.checkFramebufferStatus(So);!O.isContextLost()&&ar!==To&&k.raise("framebuffer configuration not supported, status = "+Da[ar]),O.bindFramebuffer(So,ke.next?ke.next.framebuffer:null),ke.cur=ke.next,O.getError()}function yt(At,Ye){var Ke=new Ct;Ne.framebufferCount++;function ar(Bt,ur){var or;k(ke.next!==Ke,"can not update framebuffer which is currently in use");var mr=0,Rr=0,tn=!0,Jn=!0,br=null,Xn=!0,nn="rgba",An="uint8",Rn=1,qn=null,dn=null,jr=null,Nn=!1;if(typeof Bt=="number")mr=Bt|0,Rr=ur|0||mr;else if(!Bt)mr=Rr=1;else{k.type(Bt,"object","invalid arguments for framebuffer");var pr=Bt;if("shape"in pr){var Wr=pr.shape;k(Array.isArray(Wr)&&Wr.length>=2,"invalid shape for framebuffer"),mr=Wr[0],Rr=Wr[1]}else"radius"in pr&&(mr=Rr=pr.radius),"width"in pr&&(mr=pr.width),"height"in pr&&(Rr=pr.height);("color"in pr||"colors"in pr)&&(br=pr.color||pr.colors,Array.isArray(br)&&k(br.length===1||$.webgl_draw_buffers,"multiple render targets not supported")),br||("colorCount"in pr&&(Rn=pr.colorCount|0,k(Rn>0,"invalid color buffer count")),"colorTexture"in pr&&(Xn=!!pr.colorTexture,nn="rgba4"),"colorType"in pr&&(An=pr.colorType,Xn?(k($.oes_texture_float||!(An==="float"||An==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),k($.oes_texture_half_float||!(An==="half float"||An==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):An==="half float"||An==="float16"?(k($.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),nn="rgba16f"):(An==="float"||An==="float32")&&(k($.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),nn="rgba32f"),k.oneOf(An,St,"invalid color type")),"colorFormat"in pr&&(nn=pr.colorFormat,ut.indexOf(nn)>=0?Xn=!0:dt.indexOf(nn)>=0?Xn=!1:Xn?k.oneOf(pr.colorFormat,ut,"invalid color format for texture"):k.oneOf(pr.colorFormat,dt,"invalid color format for renderbuffer"))),("depthTexture"in pr||"depthStencilTexture"in pr)&&(Nn=!!(pr.depthTexture||pr.depthStencilTexture),k(!Nn||$.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in pr&&(typeof pr.depth=="boolean"?tn=pr.depth:(qn=pr.depth,Jn=!1)),"stencil"in pr&&(typeof pr.stencil=="boolean"?Jn=pr.stencil:(dn=pr.stencil,tn=!1)),"depthStencil"in pr&&(typeof pr.depthStencil=="boolean"?tn=Jn=pr.depthStencil:(jr=pr.depthStencil,tn=!1,Jn=!1))}var zr=null,Yt=null,xr=null,Zt=null;if(Array.isArray(br))zr=br.map(_t);else if(br)zr=[_t(br)];else for(zr=new Array(Rn),or=0;or<Rn;++or)zr[or]=be(mr,Rr,Xn,nn,An);k($.webgl_draw_buffers||zr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),k(zr.length<=ae.maxColorAttachments,"too many color attachments, not supported"),mr=mr||zr[0].width,Rr=Rr||zr[0].height,qn?Yt=_t(qn):tn&&!Jn&&(Yt=be(mr,Rr,Nn,"depth","uint32")),dn?xr=_t(dn):Jn&&!tn&&(xr=be(mr,Rr,!1,"stencil","uint8")),jr?Zt=_t(jr):!qn&&!dn&&Jn&&tn&&(Zt=be(mr,Rr,Nn,"depth stencil","depth stencil")),k(!!qn+!!dn+!!jr<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Vr=null;for(or=0;or<zr.length;++or)if(bt(zr[or],mr,Rr),k(!zr[or]||zr[or].texture&&QE.indexOf(zr[or].texture._texture.format)>=0||zr[or].renderbuffer&&U0.indexOf(zr[or].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+or+" is invalid"),zr[or]&&zr[or].texture){var hi=Im[zr[or].texture._texture.format]*oh[zr[or].texture._texture.type];Vr===null?Vr=hi:k(Vr===hi,"all color attachments much have the same number of bits per pixel.")}return bt(Yt,mr,Rr),k(!Yt||Yt.texture&&Yt.texture._texture.format===B0||Yt.renderbuffer&&Yt.renderbuffer._renderbuffer.format===bf,"invalid depth attachment for framebuffer object"),bt(xr,mr,Rr),k(!xr||xr.renderbuffer&&xr.renderbuffer._renderbuffer.format===Dm,"invalid stencil attachment for framebuffer object"),bt(Zt,mr,Rr),k(!Zt||Zt.texture&&Zt.texture._texture.format===Fl||Zt.renderbuffer&&Zt.renderbuffer._renderbuffer.format===Fl,"invalid depth-stencil attachment for framebuffer object"),ft(Ke),Ke.width=mr,Ke.height=Rr,Ke.colorAttachments=zr,Ke.depthAttachment=Yt,Ke.stencilAttachment=xr,Ke.depthStencilAttachment=Zt,ar.color=zr.map(De),ar.depth=De(Yt),ar.stencil=De(xr),ar.depthStencil=De(Zt),ar.width=Ke.width,ar.height=Ke.height,rt(Ke),ar}function Ar(Bt,ur){k(ke.next!==Ke,"can not resize a framebuffer which is currently in use");var or=Math.max(Bt|0,1),mr=Math.max(ur|0||or,1);if(or===Ke.width&&mr===Ke.height)return ar;for(var Rr=Ke.colorAttachments,tn=0;tn<Rr.length;++tn)ct(Rr[tn],or,mr);return ct(Ke.depthAttachment,or,mr),ct(Ke.stencilAttachment,or,mr),ct(Ke.depthStencilAttachment,or,mr),Ke.width=ar.width=or,Ke.height=ar.height=mr,rt(Ke),ar}return ar(At,Ye),n(ar,{resize:Ar,_reglType:"framebuffer",_framebuffer:Ke,destroy:function(){Ot(Ke),ft(Ke)},use:function(Bt){ke.setFBO({framebuffer:ar},Bt)}})}function Ht(At){var Ye=Array(6);function Ke(Ar){var Bt;k(Ye.indexOf(ke.next)<0,"can not update framebuffer which is currently in use");var ur={color:null},or=0,mr=null,Rr="rgba",tn="uint8",Jn=1;if(typeof Ar=="number")or=Ar|0;else if(!Ar)or=1;else{k.type(Ar,"object","invalid arguments for framebuffer");var br=Ar;if("shape"in br){var Xn=br.shape;k(Array.isArray(Xn)&&Xn.length>=2,"invalid shape for framebuffer"),k(Xn[0]===Xn[1],"cube framebuffer must be square"),or=Xn[0]}else"radius"in br&&(or=br.radius|0),"width"in br?(or=br.width|0,"height"in br&&k(br.height===or,"must be square")):"height"in br&&(or=br.height|0);("color"in br||"colors"in br)&&(mr=br.color||br.colors,Array.isArray(mr)&&k(mr.length===1||$.webgl_draw_buffers,"multiple render targets not supported")),mr||("colorCount"in br&&(Jn=br.colorCount|0,k(Jn>0,"invalid color buffer count")),"colorType"in br&&(k.oneOf(br.colorType,St,"invalid color type"),tn=br.colorType),"colorFormat"in br&&(Rr=br.colorFormat,k.oneOf(br.colorFormat,ut,"invalid color format for texture"))),"depth"in br&&(ur.depth=br.depth),"stencil"in br&&(ur.stencil=br.stencil),"depthStencil"in br&&(ur.depthStencil=br.depthStencil)}var nn;if(mr)if(Array.isArray(mr))for(nn=[],Bt=0;Bt<mr.length;++Bt)nn[Bt]=mr[Bt];else nn=[mr];else{nn=Array(Jn);var An={radius:or,format:Rr,type:tn};for(Bt=0;Bt<Jn;++Bt)nn[Bt]=Ce.createCube(An)}for(ur.color=Array(nn.length),Bt=0;Bt<nn.length;++Bt){var Rn=nn[Bt];k(typeof Rn=="function"&&Rn._reglType==="textureCube","invalid cube map"),or=or||Rn.width,k(Rn.width===or&&Rn.height===or,"invalid cube map shape"),ur.color[Bt]={target:Vs,data:nn[Bt]}}for(Bt=0;Bt<6;++Bt){for(var qn=0;qn<nn.length;++qn)ur.color[qn].target=Vs+Bt;Bt>0&&(ur.depth=Ye[0].depth,ur.stencil=Ye[0].stencil,ur.depthStencil=Ye[0].depthStencil),Ye[Bt]?Ye[Bt](ur):Ye[Bt]=yt(ur)}return n(Ke,{width:or,height:or,color:nn})}function ar(Ar){var Bt,ur=Ar|0;if(k(ur>0&&ur<=ae.maxCubeMapSize,"invalid radius for cube fbo"),ur===Ke.width)return Ke;var or=Ke.color;for(Bt=0;Bt<or.length;++Bt)or[Bt].resize(ur);for(Bt=0;Bt<6;++Bt)Ye[Bt].resize(ur);return Ke.width=Ke.height=ur,Ke}return Ke(At),n(Ke,{faces:Ye,resize:ar,_reglType:"framebufferCube",destroy:function(){Ye.forEach(function(Ar){Ar.destroy()})}})}function rr(){ke.cur=null,ke.next=null,ke.dirty=!0,K(Je).forEach(function(At){At.framebuffer=O.createFramebuffer(),rt(At)})}return n(ke,{getFramebuffer:function(At){if(typeof At=="function"&&At._reglType==="framebuffer"){var Ye=At._framebuffer;if(Ye instanceof Ct)return Ye}return null},create:yt,createCube:Ht,clear:function(){K(Je).forEach(Ot)},restore:rr})}var sh=5126,Bm=34962;function Ul(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=sh,this.offset=0,this.stride=0,this.divisor=0}function k0(O,$,ae,Ce,Ge){for(var Ne=ae.maxAttributes,ke=new Array(Ne),ut=0;ut<Ne;++ut)ke[ut]=new Ul;var dt=0,St={},ht={Record:Ul,scope:{},state:ke,currentVAO:null,targetVAO:null,restore:bt()?Je:function(){},createVAO:Ct,getVAO:_t,destroyBuffer:gt,setVAO:bt()?be:De,clear:bt()?ct:function(){}};function gt(ft){for(var Ot=0;Ot<ke.length;++Ot){var rt=ke[Ot];rt.buffer===ft&&(O.disableVertexAttribArray(Ot),rt.buffer=null)}}function bt(){return $.oes_vertex_array_object}function it(){return $.angle_instanced_arrays}function _t(ft){return typeof ft=="function"&&ft._vao?ft._vao:null}function be(ft){if(ft!==ht.currentVAO){var Ot=bt();ft?Ot.bindVertexArrayOES(ft.vao):Ot.bindVertexArrayOES(null),ht.currentVAO=ft}}function De(ft){if(ft!==ht.currentVAO){if(ft)ft.bindAttrs();else for(var Ot=it(),rt=0;rt<ke.length;++rt){var yt=ke[rt];yt.buffer?(O.enableVertexAttribArray(rt),O.vertexAttribPointer(rt,yt.size,yt.type,yt.normalized,yt.stride,yt.offfset),Ot&&Ot.vertexAttribDivisorANGLE(rt,yt.divisor)):(O.disableVertexAttribArray(rt),O.vertexAttrib4f(rt,yt.x,yt.y,yt.z,yt.w))}ht.currentVAO=ft}}function ct(){K(St).forEach(function(ft){ft.destroy()})}function Rt(){this.id=++dt,this.attributes=[];var ft=bt();ft?this.vao=ft.createVertexArrayOES():this.vao=null,St[this.id]=this,this.buffers=[]}Rt.prototype.bindAttrs=function(){for(var ft=it(),Ot=this.attributes,rt=0;rt<Ot.length;++rt){var yt=Ot[rt];yt.buffer?(O.enableVertexAttribArray(rt),O.bindBuffer(Bm,yt.buffer.buffer),O.vertexAttribPointer(rt,yt.size,yt.type,yt.normalized,yt.stride,yt.offset),ft&&ft.vertexAttribDivisorANGLE(rt,yt.divisor)):(O.disableVertexAttribArray(rt),O.vertexAttrib4f(rt,yt.x,yt.y,yt.z,yt.w))}for(var Ht=Ot.length;Ht<Ne;++Ht)O.disableVertexAttribArray(Ht)},Rt.prototype.refresh=function(){var ft=bt();ft&&(ft.bindVertexArrayOES(this.vao),this.bindAttrs(),ht.currentVAO=this)},Rt.prototype.destroy=function(){if(this.vao){var ft=bt();this===ht.currentVAO&&(ht.currentVAO=null,ft.bindVertexArrayOES(null)),ft.deleteVertexArrayOES(this.vao),this.vao=null}St[this.id]&&(delete St[this.id],Ce.vaoCount-=1)};function Je(){var ft=bt();ft&&K(St).forEach(function(Ot){Ot.refresh()})}function Ct(ft){var Ot=new Rt;Ce.vaoCount+=1;function rt(yt){k(Array.isArray(yt),"arguments to vertex array constructor must be an array"),k(yt.length<Ne,"too many attributes"),k(yt.length>0,"must specify at least one attribute");for(var Ht=0;Ht<Ot.buffers.length;++Ht)Ot.buffers[Ht].destroy();Ot.buffers.length=0;var rr=Ot.attributes;rr.length=yt.length;for(var At=0;At<yt.length;++At){var Ye=yt[At],Ke=rr[At]=new Ul;if(Array.isArray(Ye)||r(Ye)||G(Ye)){var ar=Ge.create(Ye,Bm,!1,!0);Ke.buffer=Ge.getBuffer(ar),Ke.size=Ke.buffer.dimension|0,Ke.normalized=!1,Ke.type=Ke.buffer.dtype,Ke.offset=0,Ke.stride=0,Ke.divisor=0,Ke.state=1,Ot.buffers.push(ar)}else Ge.getBuffer(Ye)?(Ke.buffer=Ge.getBuffer(Ye),Ke.size=Ke.buffer.dimension|0,Ke.normalized=!1,Ke.type=Ke.buffer.dtype,Ke.offset=0,Ke.stride=0,Ke.divisor=0,Ke.state=1):Ge.getBuffer(Ye.buffer)?(Ke.buffer=Ge.getBuffer(Ye.buffer),Ke.size=(+Ye.size||Ke.buffer.dimension)|0,Ke.normalized=!!Ye.normalized||!1,"type"in Ye?(k.parameter(Ye.type,Jo,"invalid buffer type"),Ke.type=Jo[Ye.type]):Ke.type=Ke.buffer.dtype,Ke.offset=(Ye.offset||0)|0,Ke.stride=(Ye.stride||0)|0,Ke.divisor=(Ye.divisor||0)|0,Ke.state=1,k(Ke.size>=1&&Ke.size<=4,"size must be between 1 and 4"),k(Ke.offset>=0,"invalid offset"),k(Ke.stride>=0&&Ke.stride<=255,"stride must be between 0 and 255"),k(Ke.divisor>=0,"divisor must be positive"),k(!Ke.divisor||!!$.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Ye?(k(At>0,"first attribute must not be a constant"),Ke.x=+Ye.x||0,Ke.y=+Ye.y||0,Ke.z=+Ye.z||0,Ke.w=+Ye.w||0,Ke.state=2):k(!1,"invalid attribute spec for location "+At)}return Ot.refresh(),rt}return rt.destroy=function(){Ot.destroy()},rt._vao=Ot,rt._reglType="vao",rt(ft)}return ht}var xf=35632,Fm=35633,j0=35718,lh=35721;function z0(O,$,ae,Ce){var Ge={},Ne={};function ke(be,De,ct,Rt){this.name=be,this.id=De,this.location=ct,this.info=Rt}function ut(be,De){for(var ct=0;ct<be.length;++ct)if(be[ct].id===De.id){be[ct].location=De.location;return}be.push(De)}function dt(be,De,ct){var Rt=be===xf?Ge:Ne,Je=Rt[De];if(!Je){var Ct=$.str(De);Je=O.createShader(be),O.shaderSource(Je,Ct),O.compileShader(Je),k.shaderError(O,Je,Ct,be,ct),Rt[De]=Je}return Je}var St={},ht=[],gt=0;function bt(be,De){this.id=gt++,this.fragId=be,this.vertId=De,this.program=null,this.uniforms=[],this.attributes=[],Ce.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function it(be,De,ct){var Rt,Je,Ct=dt(xf,be.fragId),ft=dt(Fm,be.vertId),Ot=be.program=O.createProgram();if(O.attachShader(Ot,Ct),O.attachShader(Ot,ft),ct)for(Rt=0;Rt<ct.length;++Rt){var rt=ct[Rt];O.bindAttribLocation(Ot,rt[0],rt[1])}O.linkProgram(Ot),k.linkError(O,Ot,$.str(be.fragId),$.str(be.vertId),De);var yt=O.getProgramParameter(Ot,j0);Ce.profile&&(be.stats.uniformsCount=yt);var Ht=be.uniforms;for(Rt=0;Rt<yt;++Rt)if(Je=O.getActiveUniform(Ot,Rt),Je)if(Je.size>1)for(var rr=0;rr<Je.size;++rr){var At=Je.name.replace("[0]","["+rr+"]");ut(Ht,new ke(At,$.id(At),O.getUniformLocation(Ot,At),Je))}else ut(Ht,new ke(Je.name,$.id(Je.name),O.getUniformLocation(Ot,Je.name),Je));var Ye=O.getProgramParameter(Ot,lh);Ce.profile&&(be.stats.attributesCount=Ye);var Ke=be.attributes;for(Rt=0;Rt<Ye;++Rt)Je=O.getActiveAttrib(Ot,Rt),Je&&ut(Ke,new ke(Je.name,$.id(Je.name),O.getAttribLocation(Ot,Je.name),Je))}Ce.profile&&(ae.getMaxUniformsCount=function(){var be=0;return ht.forEach(function(De){De.stats.uniformsCount>be&&(be=De.stats.uniformsCount)}),be},ae.getMaxAttributesCount=function(){var be=0;return ht.forEach(function(De){De.stats.attributesCount>be&&(be=De.stats.attributesCount)}),be});function _t(){Ge={},Ne={};for(var be=0;be<ht.length;++be)it(ht[be],null,ht[be].attributes.map(function(De){return[De.location,De.name]}))}return{clear:function(){var be=O.deleteShader.bind(O);K(Ge).forEach(be),Ge={},K(Ne).forEach(be),Ne={},ht.forEach(function(De){O.deleteProgram(De.program)}),ht.length=0,St={},ae.shaderCount=0},program:function(be,De,ct,Rt){k.command(be>=0,"missing vertex shader",ct),k.command(De>=0,"missing fragment shader",ct);var Je=St[De];Je||(Je=St[De]={});var Ct=Je[be];if(Ct&&!Rt)return Ct;var ft=new bt(De,be);return ae.shaderCount++,it(ft,ct,Rt),Ct||(Je[be]=ft),ht.push(ft),ft},restore:_t,shader:dt,frag:-1,vert:-1}}var Sf=6408,Wu=5121,V0=3333,to=5126;function Um(O,$,ae,Ce,Ge,Ne,ke){function ut(ht){var gt;$.next===null?(k(Ge.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),gt=Wu):(k($.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),gt=$.next.colorAttachments[0].texture._texture.type,Ne.oes_texture_float?(k(gt===Wu||gt===to,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),gt===to&&k(ke.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):k(gt===Wu,"Reading from a framebuffer is only allowed for the type 'uint8'"));var bt=0,it=0,_t=Ce.framebufferWidth,be=Ce.framebufferHeight,De=null;r(ht)?De=ht:ht&&(k.type(ht,"object","invalid arguments to regl.read()"),bt=ht.x|0,it=ht.y|0,k(bt>=0&&bt<Ce.framebufferWidth,"invalid x offset for regl.read"),k(it>=0&&it<Ce.framebufferHeight,"invalid y offset for regl.read"),_t=(ht.width||Ce.framebufferWidth-bt)|0,be=(ht.height||Ce.framebufferHeight-it)|0,De=ht.data||null),De&&(gt===Wu?k(De instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):gt===to&&k(De instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),k(_t>0&&_t+bt<=Ce.framebufferWidth,"invalid width for read pixels"),k(be>0&&be+it<=Ce.framebufferHeight,"invalid height for read pixels"),ae();var ct=_t*be*4;return De||(gt===Wu?De=new Uint8Array(ct):gt===to&&(De=De||new Float32Array(ct))),k.isTypedArray(De,"data buffer for regl.read() must be a typedarray"),k(De.byteLength>=ct,"data buffer for regl.read() too small"),O.pixelStorei(V0,4),O.readPixels(bt,it,_t,be,Sf,gt,De),De}function dt(ht){var gt;return $.setFBO({framebuffer:ht.framebuffer},function(){gt=ut(ht)}),gt}function St(ht){return!ht||!("framebuffer"in ht)?ut(ht):dt(ht)}return St}function qs(O){return Array.prototype.slice.call(O)}function Ea(O){return qs(O).join("")}function Gs(){var O=0,$=[],ae=[];function Ce(gt){for(var bt=0;bt<ae.length;++bt)if(ae[bt]===gt)return $[bt];var it="g"+O++;return $.push(it),ae.push(gt),it}function Ge(){var gt=[];function bt(){gt.push.apply(gt,qs(arguments))}var it=[];function _t(){var be="v"+O++;return it.push(be),arguments.length>0&&(gt.push(be,"="),gt.push.apply(gt,qs(arguments)),gt.push(";")),be}return n(bt,{def:_t,toString:function(){return Ea([it.length>0?"var "+it.join(",")+";":"",Ea(gt)])}})}function Ne(){var gt=Ge(),bt=Ge(),it=gt.toString,_t=bt.toString;function be(De,ct){bt(De,ct,"=",gt.def(De,ct),";")}return n(function(){gt.apply(gt,qs(arguments))},{def:gt.def,entry:gt,exit:bt,save:be,set:function(De,ct,Rt){be(De,ct),gt(De,ct,"=",Rt,";")},toString:function(){return it()+_t()}})}function ke(){var gt=Ea(arguments),bt=Ne(),it=Ne(),_t=bt.toString,be=it.toString;return n(bt,{then:function(){return bt.apply(bt,qs(arguments)),this},else:function(){return it.apply(it,qs(arguments)),this},toString:function(){var De=be();return De&&(De="else{"+De+"}"),Ea(["if(",gt,"){",_t(),"}",De])}})}var ut=Ge(),dt={};function St(gt,bt){var it=[];function _t(){var Je="a"+it.length;return it.push(Je),Je}bt=bt||0;for(var be=0;be<bt;++be)_t();var De=Ne(),ct=De.toString,Rt=dt[gt]=n(De,{arg:_t,toString:function(){return Ea(["function(",it.join(),"){",ct(),"}"])}});return Rt}function ht(){var gt=['"use strict";',ut,"return {"];Object.keys(dt).forEach(function(_t){gt.push('"',_t,'":',dt[_t].toString(),",")}),gt.push("}");var bt=Ea(gt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),it=Function.apply(null,$.concat(bt));return it.apply(null,ae)}return{global:ut,link:Ce,block:Ge,proc:St,scope:Ne,cond:ke,compile:ht}}var Ao="xyzw".split(""),uh=5121,Ws=1,kl=2,$u=0,km=1,jm=2,jl=3,Yu=4,zm="dither",ch="blend.enable",fh="blend.color",Ro="blend.equation",Mr="blend.func",ln="depth.enable",Kn="depth.func",Tf="depth.range",zl="depth.mask",as="colorMask",Af="cull.enable",Zu="cull.face",$s="frontFace",Vm="lineWidth",Hn="polygonOffset.enable",Rf="polygonOffset.offset",dh="sample.alpha",Hm="sample.enable",hh="sample.coverage",H0="stencil.enable",ph="stencil.mask",Cf="stencil.func",Of="stencil.opFront",di="stencil.opBack",Qn="scissor.enable",Ku="scissor.box",ba="viewport",Ys="profile",os="framebuffer",xa="vert",Zs="frag",ss="elements",ls="primitive",Ks="count",wf="offset",Nf="instances",Qu="vao",mh="Width",vh="Height",Qs=os+mh,Vl=os+vh,tb=ba+mh,X0=ba+vh,Xm="drawingBuffer",qm=Xm+mh,gh=Xm+vh,q0=[Mr,Ro,Cf,Of,di,hh,ba,Ku,Rf],Hl=34962,G0=34963,W0=35632,$0=35633,Y0=3553,Z0=34067,Ju=2884,_h=3042,K0=3024,yh=2960,Mf=2929,Q0=3089,J0=32823,e_=32926,t_=32928,Eh=5126,If=35664,ec=35665,Pf=35666,bh=5124,tc=35667,Df=35668,Lf=35669,Gm=35670,rc=35671,Bf=35672,Ff=35673,Xl=35674,nc=35675,ic=35676,Uf=35678,kf=35680,Wm=4,us=1028,cs=1029,jf=2304,xh=2305,r_=32775,Sh=32776,n_=519,fs=7680,i_=0,ql=1,ac=32774,Th=513,oc=36160,Ah=36064,ro={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},$m=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],no={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ds={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Sa={frag:W0,vert:$0},La={cw:jf,ccw:xh};function io(O){return Array.isArray(O)||r(O)||G(O)}function Ym(O){return O.sort(function($,ae){return $===ba?-1:ae===ba?1:$<ae?-1:1})}function ri(O,$,ae,Ce){this.thisDep=O,this.contextDep=$,this.propDep=ae,this.append=Ce}function Ui(O){return O&&!(O.thisDep||O.contextDep||O.propDep)}function Pr(O){return new ri(!1,!1,!1,O)}function Ai(O,$){var ae=O.type;if(ae===$u){var Ce=O.data.length;return new ri(!0,Ce>=1,Ce>=2,$)}else if(ae===Yu){var Ge=O.data;return new ri(Ge.thisDep,Ge.contextDep,Ge.propDep,$)}else return new ri(ae===jl,ae===jm,ae===km,$)}var Rh=new ri(!1,!1,!1,function(){});function Zm(O,$,ae,Ce,Ge,Ne,ke,ut,dt,St,ht,gt,bt,it,_t){var be=St.Record,De={add:32774,subtract:32778,"reverse subtract":32779};ae.ext_blend_minmax&&(De.min=r_,De.max=Sh);var ct=ae.angle_instanced_arrays,Rt=ae.webgl_draw_buffers,Je={dirty:!0,profile:_t.profile},Ct={},ft=[],Ot={},rt={};function yt(q){return q.replace(".","_")}function Ht(q,Y,ie){var Se=yt(q);ft.push(q),Ct[Se]=Je[Se]=!!ie,Ot[Se]=Y}function rr(q,Y,ie){var Se=yt(q);ft.push(q),Array.isArray(ie)?(Je[Se]=ie.slice(),Ct[Se]=ie.slice()):Je[Se]=Ct[Se]=ie,rt[Se]=Y}Ht(zm,K0),Ht(ch,_h),rr(fh,"blendColor",[0,0,0,0]),rr(Ro,"blendEquationSeparate",[ac,ac]),rr(Mr,"blendFuncSeparate",[ql,i_,ql,i_]),Ht(ln,Mf,!0),rr(Kn,"depthFunc",Th),rr(Tf,"depthRange",[0,1]),rr(zl,"depthMask",!0),rr(as,as,[!0,!0,!0,!0]),Ht(Af,Ju),rr(Zu,"cullFace",cs),rr($s,$s,xh),rr(Vm,Vm,1),Ht(Hn,J0),rr(Rf,"polygonOffset",[0,0]),Ht(dh,e_),Ht(Hm,t_),rr(hh,"sampleCoverage",[1,!1]),Ht(H0,yh),rr(ph,"stencilMask",-1),rr(Cf,"stencilFunc",[n_,0,-1]),rr(Of,"stencilOpSeparate",[us,fs,fs,fs]),rr(di,"stencilOpSeparate",[cs,fs,fs,fs]),Ht(Qn,Q0),rr(Ku,"scissor",[0,0,O.drawingBufferWidth,O.drawingBufferHeight]),rr(ba,ba,[0,0,O.drawingBufferWidth,O.drawingBufferHeight]);var At={gl:O,context:bt,strings:$,next:Ct,current:Je,draw:gt,elements:Ne,buffer:Ge,shader:ht,attributes:St.state,vao:St,uniforms:dt,framebuffer:ut,extensions:ae,timer:it,isBufferArgs:io},Ye={primTypes:Lu,compareFuncs:no,blendFuncs:ro,blendEquations:De,stencilOps:ds,glTypes:Jo,orientationType:La};k.optional(function(){At.isArrayLike=On}),Rt&&(Ye.backBuffer=[cs],Ye.drawBuffer=Pi(Ce.maxDrawbuffers,function(q){return q===0?[0]:Pi(q,function(Y){return Ah+Y})}));var Ke=0;function ar(){var q=Gs(),Y=q.link,ie=q.global;q.id=Ke++,q.batchId="0";var Se=Y(At),Te=q.shared={props:"a0"};Object.keys(At).forEach(function(ce){Te[ce]=ie.def(Se,".",ce)}),k.optional(function(){q.CHECK=Y(k),q.commandStr=k.guessCommand(),q.command=Y(q.commandStr),q.assert=function(ce,Z,fe){ce("if(!(",Z,"))",this.CHECK,".commandRaise(",Y(fe),",",this.command,");")},Ye.invalidBlendCombinations=$m});var se=q.next={},he=q.current={};Object.keys(rt).forEach(function(ce){Array.isArray(Je[ce])&&(se[ce]=ie.def(Te.next,".",ce),he[ce]=ie.def(Te.current,".",ce))});var me=q.constants={};Object.keys(Ye).forEach(function(ce){me[ce]=ie.def(JSON.stringify(Ye[ce]))}),q.invoke=function(ce,Z){switch(Z.type){case $u:var fe=["this",Te.context,Te.props,q.batchId];return ce.def(Y(Z.data),".call(",fe.slice(0,Math.max(Z.data.length+1,4)),")");case km:return ce.def(Te.props,Z.data);case jm:return ce.def(Te.context,Z.data);case jl:return ce.def("this",Z.data);case Yu:return Z.data.append(q,ce),Z.data.ref}},q.attribCache={};var J={};return q.scopeAttrib=function(ce){var Z=$.id(ce);if(Z in J)return J[Z];var fe=St.scope[Z];fe||(fe=St.scope[Z]=new be);var we=J[Z]=Y(fe);return we},q}function Ar(q){var Y=q.static,ie=q.dynamic,Se;if(Ys in Y){var Te=!!Y[Ys];Se=Pr(function(he,me){return Te}),Se.enable=Te}else if(Ys in ie){var se=ie[Ys];Se=Ai(se,function(he,me){return he.invoke(me,se)})}return Se}function Bt(q,Y){var ie=q.static,Se=q.dynamic;if(os in ie){var Te=ie[os];return Te?(Te=ut.getFramebuffer(Te),k.command(Te,"invalid framebuffer object"),Pr(function(he,me){var J=he.link(Te),ce=he.shared;me.set(ce.framebuffer,".next",J);var Z=ce.context;return me.set(Z,"."+Qs,J+".width"),me.set(Z,"."+Vl,J+".height"),J})):Pr(function(he,me){var J=he.shared;me.set(J.framebuffer,".next","null");var ce=J.context;return me.set(ce,"."+Qs,ce+"."+qm),me.set(ce,"."+Vl,ce+"."+gh),"null"})}else if(os in Se){var se=Se[os];return Ai(se,function(he,me){var J=he.invoke(me,se),ce=he.shared,Z=ce.framebuffer,fe=me.def(Z,".getFramebuffer(",J,")");k.optional(function(){he.assert(me,"!"+J+"||"+fe,"invalid framebuffer object")}),me.set(Z,".next",fe);var we=ce.context;return me.set(we,"."+Qs,fe+"?"+fe+".width:"+we+"."+qm),me.set(we,"."+Vl,fe+"?"+fe+".height:"+we+"."+gh),fe})}else return null}function ur(q,Y,ie){var Se=q.static,Te=q.dynamic;function se(J){if(J in Se){var ce=Se[J];k.commandType(ce,"object","invalid "+J,ie.commandStr);var Z=!0,fe=ce.x|0,we=ce.y|0,Fe,nt;return"width"in ce?(Fe=ce.width|0,k.command(Fe>=0,"invalid "+J,ie.commandStr)):Z=!1,"height"in ce?(nt=ce.height|0,k.command(nt>=0,"invalid "+J,ie.commandStr)):Z=!1,new ri(!Z&&Y&&Y.thisDep,!Z&&Y&&Y.contextDep,!Z&&Y&&Y.propDep,function(jt,cr){var Lt=jt.shared.context,Kt=Fe;"width"in ce||(Kt=cr.def(Lt,".",Qs,"-",fe));var fr=nt;return"height"in ce||(fr=cr.def(Lt,".",Vl,"-",we)),[fe,we,Kt,fr]})}else if(J in Te){var Ze=Te[J],ot=Ai(Ze,function(jt,cr){var Lt=jt.invoke(cr,Ze);k.optional(function(){jt.assert(cr,Lt+"&&typeof "+Lt+'==="object"',"invalid "+J)});var Kt=jt.shared.context,fr=cr.def(Lt,".x|0"),Gt=cr.def(Lt,".y|0"),yr=cr.def('"width" in ',Lt,"?",Lt,".width|0:","(",Kt,".",Qs,"-",fr,")"),Er=cr.def('"height" in ',Lt,"?",Lt,".height|0:","(",Kt,".",Vl,"-",Gt,")");return k.optional(function(){jt.assert(cr,yr+">=0&&"+Er+">=0","invalid "+J)}),[fr,Gt,yr,Er]});return Y&&(ot.thisDep=ot.thisDep||Y.thisDep,ot.contextDep=ot.contextDep||Y.contextDep,ot.propDep=ot.propDep||Y.propDep),ot}else return Y?new ri(Y.thisDep,Y.contextDep,Y.propDep,function(jt,cr){var Lt=jt.shared.context;return[0,0,cr.def(Lt,".",Qs),cr.def(Lt,".",Vl)]}):null}var he=se(ba);if(he){var me=he;he=new ri(he.thisDep,he.contextDep,he.propDep,function(J,ce){var Z=me.append(J,ce),fe=J.shared.context;return ce.set(fe,"."+tb,Z[2]),ce.set(fe,"."+X0,Z[3]),Z})}return{viewport:he,scissor_box:se(Ku)}}function or(q,Y){var ie=q.static,Se=typeof ie[Zs]=="string"&&typeof ie[xa]=="string";if(Se){if(Object.keys(Y.dynamic).length>0)return null;var Te=Y.static,se=Object.keys(Te);if(se.length>0&&typeof Te[se[0]]=="number"){for(var he=[],me=0;me<se.length;++me)k(typeof Te[se[me]]=="number","must specify all vertex attribute locations when using vaos"),he.push([Te[se[me]]|0,se[me]]);return he}}return null}function mr(q,Y,ie){var Se=q.static,Te=q.dynamic;function se(Z){if(Z in Se){var fe=$.id(Se[Z]);k.optional(function(){ht.shader(Sa[Z],fe,k.guessCommand())});var we=Pr(function(){return fe});return we.id=fe,we}else if(Z in Te){var Fe=Te[Z];return Ai(Fe,function(nt,Ze){var ot=nt.invoke(Ze,Fe),jt=Ze.def(nt.shared.strings,".id(",ot,")");return k.optional(function(){Ze(nt.shared.shader,".shader(",Sa[Z],",",jt,",",nt.command,");")}),jt})}return null}var he=se(Zs),me=se(xa),J=null,ce;return Ui(he)&&Ui(me)?(J=ht.program(me.id,he.id,null,ie),ce=Pr(function(Z,fe){return Z.link(J)})):ce=new ri(he&&he.thisDep||me&&me.thisDep,he&&he.contextDep||me&&me.contextDep,he&&he.propDep||me&&me.propDep,function(Z,fe){var we=Z.shared.shader,Fe;he?Fe=he.append(Z,fe):Fe=fe.def(we,".",Zs);var nt;me?nt=me.append(Z,fe):nt=fe.def(we,".",xa);var Ze=we+".program("+nt+","+Fe;return k.optional(function(){Ze+=","+Z.command}),fe.def(Ze+")")}),{frag:he,vert:me,progVar:ce,program:J}}function Rr(q,Y){var ie=q.static,Se=q.dynamic;function Te(){if(ss in ie){var Z=ie[ss];io(Z)?Z=Ne.getElements(Ne.create(Z,!0)):Z&&(Z=Ne.getElements(Z),k.command(Z,"invalid elements",Y.commandStr));var fe=Pr(function(Fe,nt){if(Z){var Ze=Fe.link(Z);return Fe.ELEMENTS=Ze,Ze}return Fe.ELEMENTS=null,null});return fe.value=Z,fe}else if(ss in Se){var we=Se[ss];return Ai(we,function(Fe,nt){var Ze=Fe.shared,ot=Ze.isBufferArgs,jt=Ze.elements,cr=Fe.invoke(nt,we),Lt=nt.def("null"),Kt=nt.def(ot,"(",cr,")"),fr=Fe.cond(Kt).then(Lt,"=",jt,".createStream(",cr,");").else(Lt,"=",jt,".getElements(",cr,");");return k.optional(function(){Fe.assert(fr.else,"!"+cr+"||"+Lt,"invalid elements")}),nt.entry(fr),nt.exit(Fe.cond(Kt).then(jt,".destroyStream(",Lt,");")),Fe.ELEMENTS=Lt,Lt})}return null}var se=Te();function he(){if(ls in ie){var Z=ie[ls];return k.commandParameter(Z,Lu,"invalid primitve",Y.commandStr),Pr(function(we,Fe){return Lu[Z]})}else if(ls in Se){var fe=Se[ls];return Ai(fe,function(we,Fe){var nt=we.constants.primTypes,Ze=we.invoke(Fe,fe);return k.optional(function(){we.assert(Fe,Ze+" in "+nt,"invalid primitive, must be one of "+Object.keys(Lu))}),Fe.def(nt,"[",Ze,"]")})}else if(se)return Ui(se)?se.value?Pr(function(we,Fe){return Fe.def(we.ELEMENTS,".primType")}):Pr(function(){return Wm}):new ri(se.thisDep,se.contextDep,se.propDep,function(we,Fe){var nt=we.ELEMENTS;return Fe.def(nt,"?",nt,".primType:",Wm)});return null}function me(Z,fe){if(Z in ie){var we=ie[Z]|0;return k.command(!fe||we>=0,"invalid "+Z,Y.commandStr),Pr(function(nt,Ze){return fe&&(nt.OFFSET=we),we})}else if(Z in Se){var Fe=Se[Z];return Ai(Fe,function(nt,Ze){var ot=nt.invoke(Ze,Fe);return fe&&(nt.OFFSET=ot,k.optional(function(){nt.assert(Ze,ot+">=0","invalid "+Z)})),ot})}else if(fe&&se)return Pr(function(nt,Ze){return nt.OFFSET="0",0});return null}var J=me(wf,!0);function ce(){if(Ks in ie){var Z=ie[Ks]|0;return k.command(typeof Z=="number"&&Z>=0,"invalid vertex count",Y.commandStr),Pr(function(){return Z})}else if(Ks in Se){var fe=Se[Ks];return Ai(fe,function(nt,Ze){var ot=nt.invoke(Ze,fe);return k.optional(function(){nt.assert(Ze,"typeof "+ot+'==="number"&&'+ot+">=0&&"+ot+"===("+ot+"|0)","invalid vertex count")}),ot})}else if(se)if(Ui(se)){if(se)return J?new ri(J.thisDep,J.contextDep,J.propDep,function(nt,Ze){var ot=Ze.def(nt.ELEMENTS,".vertCount-",nt.OFFSET);return k.optional(function(){nt.assert(Ze,ot+">=0","invalid vertex offset/element buffer too small")}),ot}):Pr(function(nt,Ze){return Ze.def(nt.ELEMENTS,".vertCount")});var we=Pr(function(){return-1});return k.optional(function(){we.MISSING=!0}),we}else{var Fe=new ri(se.thisDep||J.thisDep,se.contextDep||J.contextDep,se.propDep||J.propDep,function(nt,Ze){var ot=nt.ELEMENTS;return nt.OFFSET?Ze.def(ot,"?",ot,".vertCount-",nt.OFFSET,":-1"):Ze.def(ot,"?",ot,".vertCount:-1")});return k.optional(function(){Fe.DYNAMIC=!0}),Fe}return null}return{elements:se,primitive:he(),count:ce(),instances:me(Nf,!1),offset:J}}function tn(q,Y){var ie=q.static,Se=q.dynamic,Te={};return ft.forEach(function(se){var he=yt(se);function me(J,ce){if(se in ie){var Z=J(ie[se]);Te[he]=Pr(function(){return Z})}else if(se in Se){var fe=Se[se];Te[he]=Ai(fe,function(we,Fe){return ce(we,Fe,we.invoke(Fe,fe))})}}switch(se){case Af:case ch:case zm:case H0:case ln:case Qn:case Hn:case dh:case Hm:case zl:return me(function(J){return k.commandType(J,"boolean",se,Y.commandStr),J},function(J,ce,Z){return k.optional(function(){J.assert(ce,"typeof "+Z+'==="boolean"',"invalid flag "+se,J.commandStr)}),Z});case Kn:return me(function(J){return k.commandParameter(J,no,"invalid "+se,Y.commandStr),no[J]},function(J,ce,Z){var fe=J.constants.compareFuncs;return k.optional(function(){J.assert(ce,Z+" in "+fe,"invalid "+se+", must be one of "+Object.keys(no))}),ce.def(fe,"[",Z,"]")});case Tf:return me(function(J){return k.command(On(J)&&J.length===2&&typeof J[0]=="number"&&typeof J[1]=="number"&&J[0]<=J[1],"depth range is 2d array",Y.commandStr),J},function(J,ce,Z){k.optional(function(){J.assert(ce,J.shared.isArrayLike+"("+Z+")&&"+Z+".length===2&&typeof "+Z+'[0]==="number"&&typeof '+Z+'[1]==="number"&&'+Z+"[0]<="+Z+"[1]","depth range must be a 2d array")});var fe=ce.def("+",Z,"[0]"),we=ce.def("+",Z,"[1]");return[fe,we]});case Mr:return me(function(J){k.commandType(J,"object","blend.func",Y.commandStr);var ce="srcRGB"in J?J.srcRGB:J.src,Z="srcAlpha"in J?J.srcAlpha:J.src,fe="dstRGB"in J?J.dstRGB:J.dst,we="dstAlpha"in J?J.dstAlpha:J.dst;return k.commandParameter(ce,ro,he+".srcRGB",Y.commandStr),k.commandParameter(Z,ro,he+".srcAlpha",Y.commandStr),k.commandParameter(fe,ro,he+".dstRGB",Y.commandStr),k.commandParameter(we,ro,he+".dstAlpha",Y.commandStr),k.command($m.indexOf(ce+", "+fe)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+ce+", "+fe+")",Y.commandStr),[ro[ce],ro[fe],ro[Z],ro[we]]},function(J,ce,Z){var fe=J.constants.blendFuncs;k.optional(function(){J.assert(ce,Z+"&&typeof "+Z+'==="object"',"invalid blend func, must be an object")});function we(Lt,Kt){var fr=ce.def('"',Lt,Kt,'" in ',Z,"?",Z,".",Lt,Kt,":",Z,".",Lt);return k.optional(function(){J.assert(ce,fr+" in "+fe,"invalid "+se+"."+Lt+Kt+", must be one of "+Object.keys(ro))}),fr}var Fe=we("src","RGB"),nt=we("dst","RGB");k.optional(function(){var Lt=J.constants.invalidBlendCombinations;J.assert(ce,Lt+".indexOf("+Fe+'+", "+'+nt+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Ze=ce.def(fe,"[",Fe,"]"),ot=ce.def(fe,"[",we("src","Alpha"),"]"),jt=ce.def(fe,"[",nt,"]"),cr=ce.def(fe,"[",we("dst","Alpha"),"]");return[Ze,jt,ot,cr]});case Ro:return me(function(J){if(typeof J=="string")return k.commandParameter(J,De,"invalid "+se,Y.commandStr),[De[J],De[J]];if(typeof J=="object")return k.commandParameter(J.rgb,De,se+".rgb",Y.commandStr),k.commandParameter(J.alpha,De,se+".alpha",Y.commandStr),[De[J.rgb],De[J.alpha]];k.commandRaise("invalid blend.equation",Y.commandStr)},function(J,ce,Z){var fe=J.constants.blendEquations,we=ce.def(),Fe=ce.def(),nt=J.cond("typeof ",Z,'==="string"');return k.optional(function(){function Ze(ot,jt,cr){J.assert(ot,cr+" in "+fe,"invalid "+jt+", must be one of "+Object.keys(De))}Ze(nt.then,se,Z),J.assert(nt.else,Z+"&&typeof "+Z+'==="object"',"invalid "+se),Ze(nt.else,se+".rgb",Z+".rgb"),Ze(nt.else,se+".alpha",Z+".alpha")}),nt.then(we,"=",Fe,"=",fe,"[",Z,"];"),nt.else(we,"=",fe,"[",Z,".rgb];",Fe,"=",fe,"[",Z,".alpha];"),ce(nt),[we,Fe]});case fh:return me(function(J){return k.command(On(J)&&J.length===4,"blend.color must be a 4d array",Y.commandStr),Pi(4,function(ce){return+J[ce]})},function(J,ce,Z){return k.optional(function(){J.assert(ce,J.shared.isArrayLike+"("+Z+")&&"+Z+".length===4","blend.color must be a 4d array")}),Pi(4,function(fe){return ce.def("+",Z,"[",fe,"]")})});case ph:return me(function(J){return k.commandType(J,"number",he,Y.commandStr),J|0},function(J,ce,Z){return k.optional(function(){J.assert(ce,"typeof "+Z+'==="number"',"invalid stencil.mask")}),ce.def(Z,"|0")});case Cf:return me(function(J){k.commandType(J,"object",he,Y.commandStr);var ce=J.cmp||"keep",Z=J.ref||0,fe="mask"in J?J.mask:-1;return k.commandParameter(ce,no,se+".cmp",Y.commandStr),k.commandType(Z,"number",se+".ref",Y.commandStr),k.commandType(fe,"number",se+".mask",Y.commandStr),[no[ce],Z,fe]},function(J,ce,Z){var fe=J.constants.compareFuncs;k.optional(function(){function Ze(){J.assert(ce,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Ze(Z+"&&typeof ",Z,'==="object"'),Ze('!("cmp" in ',Z,")||(",Z,".cmp in ",fe,")")});var we=ce.def('"cmp" in ',Z,"?",fe,"[",Z,".cmp]",":",fs),Fe=ce.def(Z,".ref|0"),nt=ce.def('"mask" in ',Z,"?",Z,".mask|0:-1");return[we,Fe,nt]});case Of:case di:return me(function(J){k.commandType(J,"object",he,Y.commandStr);var ce=J.fail||"keep",Z=J.zfail||"keep",fe=J.zpass||"keep";return k.commandParameter(ce,ds,se+".fail",Y.commandStr),k.commandParameter(Z,ds,se+".zfail",Y.commandStr),k.commandParameter(fe,ds,se+".zpass",Y.commandStr),[se===di?cs:us,ds[ce],ds[Z],ds[fe]]},function(J,ce,Z){var fe=J.constants.stencilOps;k.optional(function(){J.assert(ce,Z+"&&typeof "+Z+'==="object"',"invalid "+se)});function we(Fe){return k.optional(function(){J.assert(ce,'!("'+Fe+'" in '+Z+")||("+Z+"."+Fe+" in "+fe+")","invalid "+se+"."+Fe+", must be one of "+Object.keys(ds))}),ce.def('"',Fe,'" in ',Z,"?",fe,"[",Z,".",Fe,"]:",fs)}return[se===di?cs:us,we("fail"),we("zfail"),we("zpass")]});case Rf:return me(function(J){k.commandType(J,"object",he,Y.commandStr);var ce=J.factor|0,Z=J.units|0;return k.commandType(ce,"number",he+".factor",Y.commandStr),k.commandType(Z,"number",he+".units",Y.commandStr),[ce,Z]},function(J,ce,Z){k.optional(function(){J.assert(ce,Z+"&&typeof "+Z+'==="object"',"invalid "+se)});var fe=ce.def(Z,".factor|0"),we=ce.def(Z,".units|0");return[fe,we]});case Zu:return me(function(J){var ce=0;return J==="front"?ce=us:J==="back"&&(ce=cs),k.command(!!ce,he,Y.commandStr),ce},function(J,ce,Z){return k.optional(function(){J.assert(ce,Z+'==="front"||'+Z+'==="back"',"invalid cull.face")}),ce.def(Z,'==="front"?',us,":",cs)});case Vm:return me(function(J){return k.command(typeof J=="number"&&J>=Ce.lineWidthDims[0]&&J<=Ce.lineWidthDims[1],"invalid line width, must be a positive number between "+Ce.lineWidthDims[0]+" and "+Ce.lineWidthDims[1],Y.commandStr),J},function(J,ce,Z){return k.optional(function(){J.assert(ce,"typeof "+Z+'==="number"&&'+Z+">="+Ce.lineWidthDims[0]+"&&"+Z+"<="+Ce.lineWidthDims[1],"invalid line width")}),Z});case $s:return me(function(J){return k.commandParameter(J,La,he,Y.commandStr),La[J]},function(J,ce,Z){return k.optional(function(){J.assert(ce,Z+'==="cw"||'+Z+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),ce.def(Z+'==="cw"?'+jf+":"+xh)});case as:return me(function(J){return k.command(On(J)&&J.length===4,"color.mask must be length 4 array",Y.commandStr),J.map(function(ce){return!!ce})},function(J,ce,Z){return k.optional(function(){J.assert(ce,J.shared.isArrayLike+"("+Z+")&&"+Z+".length===4","invalid color.mask")}),Pi(4,function(fe){return"!!"+Z+"["+fe+"]"})});case hh:return me(function(J){k.command(typeof J=="object"&&J,he,Y.commandStr);var ce="value"in J?J.value:1,Z=!!J.invert;return k.command(typeof ce=="number"&&ce>=0&&ce<=1,"sample.coverage.value must be a number between 0 and 1",Y.commandStr),[ce,Z]},function(J,ce,Z){k.optional(function(){J.assert(ce,Z+"&&typeof "+Z+'==="object"',"invalid sample.coverage")});var fe=ce.def('"value" in ',Z,"?+",Z,".value:1"),we=ce.def("!!",Z,".invert");return[fe,we]})}}),Te}function Jn(q,Y){var ie=q.static,Se=q.dynamic,Te={};return Object.keys(ie).forEach(function(se){var he=ie[se],me;if(typeof he=="number"||typeof he=="boolean")me=Pr(function(){return he});else if(typeof he=="function"){var J=he._reglType;J==="texture2d"||J==="textureCube"?me=Pr(function(ce){return ce.link(he)}):J==="framebuffer"||J==="framebufferCube"?(k.command(he.color.length>0,'missing color attachment for framebuffer sent to uniform "'+se+'"',Y.commandStr),me=Pr(function(ce){return ce.link(he.color[0])})):k.commandRaise('invalid data for uniform "'+se+'"',Y.commandStr)}else On(he)?me=Pr(function(ce){var Z=ce.global.def("[",Pi(he.length,function(fe){return k.command(typeof he[fe]=="number"||typeof he[fe]=="boolean","invalid uniform "+se,ce.commandStr),he[fe]}),"]");return Z}):k.commandRaise('invalid or missing data for uniform "'+se+'"',Y.commandStr);me.value=he,Te[se]=me}),Object.keys(Se).forEach(function(se){var he=Se[se];Te[se]=Ai(he,function(me,J){return me.invoke(J,he)})}),Te}function br(q,Y){var ie=q.static,Se=q.dynamic,Te={};return Object.keys(ie).forEach(function(se){var he=ie[se],me=$.id(se),J=new be;if(io(he))J.state=Ws,J.buffer=Ge.getBuffer(Ge.create(he,Hl,!1,!0)),J.type=0;else{var ce=Ge.getBuffer(he);if(ce)J.state=Ws,J.buffer=ce,J.type=0;else if(k.command(typeof he=="object"&&he,"invalid data for attribute "+se,Y.commandStr),"constant"in he){var Z=he.constant;J.buffer="null",J.state=kl,typeof Z=="number"?J.x=Z:(k.command(On(Z)&&Z.length>0&&Z.length<=4,"invalid constant for attribute "+se,Y.commandStr),Ao.forEach(function(jt,cr){cr<Z.length&&(J[jt]=Z[cr])}))}else{io(he.buffer)?ce=Ge.getBuffer(Ge.create(he.buffer,Hl,!1,!0)):ce=Ge.getBuffer(he.buffer),k.command(!!ce,'missing buffer for attribute "'+se+'"',Y.commandStr);var fe=he.offset|0;k.command(fe>=0,'invalid offset for attribute "'+se+'"',Y.commandStr);var we=he.stride|0;k.command(we>=0&&we<256,'invalid stride for attribute "'+se+'", must be integer betweeen [0, 255]',Y.commandStr);var Fe=he.size|0;k.command(!("size"in he)||Fe>0&&Fe<=4,'invalid size for attribute "'+se+'", must be 1,2,3,4',Y.commandStr);var nt=!!he.normalized,Ze=0;"type"in he&&(k.commandParameter(he.type,Jo,"invalid type for attribute "+se,Y.commandStr),Ze=Jo[he.type]);var ot=he.divisor|0;"divisor"in he&&(k.command(ot===0||ct,'cannot specify divisor for attribute "'+se+'", instancing not supported',Y.commandStr),k.command(ot>=0,'invalid divisor for attribute "'+se+'"',Y.commandStr)),k.optional(function(){var jt=Y.commandStr,cr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(he).forEach(function(Lt){k.command(cr.indexOf(Lt)>=0,'unknown parameter "'+Lt+'" for attribute pointer "'+se+'" (valid parameters are '+cr+")",jt)})}),J.buffer=ce,J.state=Ws,J.size=Fe,J.normalized=nt,J.type=Ze||ce.dtype,J.offset=fe,J.stride=we,J.divisor=ot}}Te[se]=Pr(function(jt,cr){var Lt=jt.attribCache;if(me in Lt)return Lt[me];var Kt={isStream:!1};return Object.keys(J).forEach(function(fr){Kt[fr]=J[fr]}),J.buffer&&(Kt.buffer=jt.link(J.buffer),Kt.type=Kt.type||Kt.buffer+".dtype"),Lt[me]=Kt,Kt})}),Object.keys(Se).forEach(function(se){var he=Se[se];function me(J,ce){var Z=J.invoke(ce,he),fe=J.shared,we=J.constants,Fe=fe.isBufferArgs,nt=fe.buffer;k.optional(function(){J.assert(ce,Z+"&&(typeof "+Z+'==="object"||typeof '+Z+'==="function")&&('+Fe+"("+Z+")||"+nt+".getBuffer("+Z+")||"+nt+".getBuffer("+Z+".buffer)||"+Fe+"("+Z+'.buffer)||("constant" in '+Z+"&&(typeof "+Z+'.constant==="number"||'+fe.isArrayLike+"("+Z+".constant))))",'invalid dynamic attribute "'+se+'"')});var Ze={isStream:ce.def(!1)},ot=new be;ot.state=Ws,Object.keys(ot).forEach(function(Kt){Ze[Kt]=ce.def(""+ot[Kt])});var jt=Ze.buffer,cr=Ze.type;ce("if(",Fe,"(",Z,")){",Ze.isStream,"=true;",jt,"=",nt,".createStream(",Hl,",",Z,");",cr,"=",jt,".dtype;","}else{",jt,"=",nt,".getBuffer(",Z,");","if(",jt,"){",cr,"=",jt,".dtype;",'}else if("constant" in ',Z,"){",Ze.state,"=",kl,";","if(typeof "+Z+'.constant === "number"){',Ze[Ao[0]],"=",Z,".constant;",Ao.slice(1).map(function(Kt){return Ze[Kt]}).join("="),"=0;","}else{",Ao.map(function(Kt,fr){return Ze[Kt]+"="+Z+".constant.length>"+fr+"?"+Z+".constant["+fr+"]:0;"}).join(""),"}}else{","if(",Fe,"(",Z,".buffer)){",jt,"=",nt,".createStream(",Hl,",",Z,".buffer);","}else{",jt,"=",nt,".getBuffer(",Z,".buffer);","}",cr,'="type" in ',Z,"?",we.glTypes,"[",Z,".type]:",jt,".dtype;",Ze.normalized,"=!!",Z,".normalized;");function Lt(Kt){ce(Ze[Kt],"=",Z,".",Kt,"|0;")}return Lt("size"),Lt("offset"),Lt("stride"),Lt("divisor"),ce("}}"),ce.exit("if(",Ze.isStream,"){",nt,".destroyStream(",jt,");","}"),Ze}Te[se]=Ai(he,me)}),Te}function Xn(q,Y){var ie=q.static,Se=q.dynamic;if(Qu in ie){var Te=ie[Qu];return Te!==null&&St.getVAO(Te)===null&&(Te=St.createVAO(Te)),Pr(function(he){return he.link(St.getVAO(Te))})}else if(Qu in Se){var se=Se[Qu];return Ai(se,function(he,me){var J=he.invoke(me,se);return me.def(he.shared.vao+".getVAO("+J+")")})}return null}function nn(q){var Y=q.static,ie=q.dynamic,Se={};return Object.keys(Y).forEach(function(Te){var se=Y[Te];Se[Te]=Pr(function(he,me){return typeof se=="number"||typeof se=="boolean"?""+se:he.link(se)})}),Object.keys(ie).forEach(function(Te){var se=ie[Te];Se[Te]=Ai(se,function(he,me){return he.invoke(me,se)})}),Se}function An(q,Y,ie,Se,Te){var se=q.static,he=q.dynamic;k.optional(function(){var Lt=[os,xa,Zs,ss,ls,wf,Ks,Nf,Ys,Qu].concat(ft);function Kt(fr){Object.keys(fr).forEach(function(Gt){k.command(Lt.indexOf(Gt)>=0,'unknown parameter "'+Gt+'"',Te.commandStr)})}Kt(se),Kt(he)});var me=or(q,Y),J=Bt(q),ce=ur(q,J,Te),Z=Rr(q,Te),fe=tn(q,Te),we=mr(q,Te,me);function Fe(Lt){var Kt=ce[Lt];Kt&&(fe[Lt]=Kt)}Fe(ba),Fe(yt(Ku));var nt=Object.keys(fe).length>0,Ze={framebuffer:J,draw:Z,shader:we,state:fe,dirty:nt,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Ze.profile=Ar(q),Ze.uniforms=Jn(ie,Te),Ze.drawVAO=Ze.scopeVAO=Xn(q),!Ze.drawVAO&&we.program&&!me&&ae.angle_instanced_arrays){var ot=!0,jt=we.program.attributes.map(function(Lt){var Kt=Y.static[Lt];return ot=ot&&!!Kt,Kt});if(ot&&jt.length>0){var cr=St.getVAO(St.createVAO(jt));Ze.drawVAO=new ri(null,null,null,function(Lt,Kt){return Lt.link(cr)}),Ze.useVAO=!0}}return me?Ze.useVAO=!0:Ze.attributes=br(Y,Te),Ze.context=nn(Se),Ze}function Rn(q,Y,ie){var Se=q.shared,Te=Se.context,se=q.scope();Object.keys(ie).forEach(function(he){Y.save(Te,"."+he);var me=ie[he];se(Te,".",he,"=",me.append(q,Y),";")}),Y(se)}function qn(q,Y,ie,Se){var Te=q.shared,se=Te.gl,he=Te.framebuffer,me;Rt&&(me=Y.def(Te.extensions,".webgl_draw_buffers"));var J=q.constants,ce=J.drawBuffer,Z=J.backBuffer,fe;ie?fe=ie.append(q,Y):fe=Y.def(he,".next"),Se||Y("if(",fe,"!==",he,".cur){"),Y("if(",fe,"){",se,".bindFramebuffer(",oc,",",fe,".framebuffer);"),Rt&&Y(me,".drawBuffersWEBGL(",ce,"[",fe,".colorAttachments.length]);"),Y("}else{",se,".bindFramebuffer(",oc,",null);"),Rt&&Y(me,".drawBuffersWEBGL(",Z,");"),Y("}",he,".cur=",fe,";"),Se||Y("}")}function dn(q,Y,ie){var Se=q.shared,Te=Se.gl,se=q.current,he=q.next,me=Se.current,J=Se.next,ce=q.cond(me,".dirty");ft.forEach(function(Z){var fe=yt(Z);if(!(fe in ie.state)){var we,Fe;if(fe in he){we=he[fe],Fe=se[fe];var nt=Pi(Je[fe].length,function(ot){return ce.def(we,"[",ot,"]")});ce(q.cond(nt.map(function(ot,jt){return ot+"!=="+Fe+"["+jt+"]"}).join("||")).then(Te,".",rt[fe],"(",nt,");",nt.map(function(ot,jt){return Fe+"["+jt+"]="+ot}).join(";"),";"))}else{we=ce.def(J,".",fe);var Ze=q.cond(we,"!==",me,".",fe);ce(Ze),fe in Ot?Ze(q.cond(we).then(Te,".enable(",Ot[fe],");").else(Te,".disable(",Ot[fe],");"),me,".",fe,"=",we,";"):Ze(Te,".",rt[fe],"(",we,");",me,".",fe,"=",we,";")}}}),Object.keys(ie.state).length===0&&ce(me,".dirty=false;"),Y(ce)}function jr(q,Y,ie,Se){var Te=q.shared,se=q.current,he=Te.current,me=Te.gl;Ym(Object.keys(ie)).forEach(function(J){var ce=ie[J];if(!(Se&&!Se(ce))){var Z=ce.append(q,Y);if(Ot[J]){var fe=Ot[J];Ui(ce)?Z?Y(me,".enable(",fe,");"):Y(me,".disable(",fe,");"):Y(q.cond(Z).then(me,".enable(",fe,");").else(me,".disable(",fe,");")),Y(he,".",J,"=",Z,";")}else if(On(Z)){var we=se[J];Y(me,".",rt[J],"(",Z,");",Z.map(function(Fe,nt){return we+"["+nt+"]="+Fe}).join(";"),";")}else Y(me,".",rt[J],"(",Z,");",he,".",J,"=",Z,";")}})}function Nn(q,Y){ct&&(q.instancing=Y.def(q.shared.extensions,".angle_instanced_arrays"))}function pr(q,Y,ie,Se,Te){var se=q.shared,he=q.stats,me=se.current,J=se.timer,ce=ie.profile;function Z(){return typeof performance>"u"?"Date.now()":"performance.now()"}var fe,we;function Fe(Lt){fe=Y.def(),Lt(fe,"=",Z(),";"),typeof Te=="string"?Lt(he,".count+=",Te,";"):Lt(he,".count++;"),it&&(Se?(we=Y.def(),Lt(we,"=",J,".getNumPendingQueries();")):Lt(J,".beginQuery(",he,");"))}function nt(Lt){Lt(he,".cpuTime+=",Z(),"-",fe,";"),it&&(Se?Lt(J,".pushScopeStats(",we,",",J,".getNumPendingQueries(),",he,");"):Lt(J,".endQuery();"))}function Ze(Lt){var Kt=Y.def(me,".profile");Y(me,".profile=",Lt,";"),Y.exit(me,".profile=",Kt,";")}var ot;if(ce){if(Ui(ce)){ce.enable?(Fe(Y),nt(Y.exit),Ze("true")):Ze("false");return}ot=ce.append(q,Y),Ze(ot)}else ot=Y.def(me,".profile");var jt=q.block();Fe(jt),Y("if(",ot,"){",jt,"}");var cr=q.block();nt(cr),Y.exit("if(",ot,"){",cr,"}")}function Wr(q,Y,ie,Se,Te){var se=q.shared;function he(J){switch(J){case If:case tc:case rc:return 2;case ec:case Df:case Bf:return 3;case Pf:case Lf:case Ff:return 4;default:return 1}}function me(J,ce,Z){var fe=se.gl,we=Y.def(J,".location"),Fe=Y.def(se.attributes,"[",we,"]"),nt=Z.state,Ze=Z.buffer,ot=[Z.x,Z.y,Z.z,Z.w],jt=["buffer","normalized","offset","stride"];function cr(){Y("if(!",Fe,".buffer){",fe,".enableVertexAttribArray(",we,");}");var Kt=Z.type,fr;if(Z.size?fr=Y.def(Z.size,"||",ce):fr=ce,Y("if(",Fe,".type!==",Kt,"||",Fe,".size!==",fr,"||",jt.map(function(yr){return Fe+"."+yr+"!=="+Z[yr]}).join("||"),"){",fe,".bindBuffer(",Hl,",",Ze,".buffer);",fe,".vertexAttribPointer(",[we,fr,Kt,Z.normalized,Z.stride,Z.offset],");",Fe,".type=",Kt,";",Fe,".size=",fr,";",jt.map(function(yr){return Fe+"."+yr+"="+Z[yr]+";"}).join(""),"}"),ct){var Gt=Z.divisor;Y("if(",Fe,".divisor!==",Gt,"){",q.instancing,".vertexAttribDivisorANGLE(",[we,Gt],");",Fe,".divisor=",Gt,";}")}}function Lt(){Y("if(",Fe,".buffer){",fe,".disableVertexAttribArray(",we,");",Fe,".buffer=null;","}if(",Ao.map(function(Kt,fr){return Fe+"."+Kt+"!=="+ot[fr]}).join("||"),"){",fe,".vertexAttrib4f(",we,",",ot,");",Ao.map(function(Kt,fr){return Fe+"."+Kt+"="+ot[fr]+";"}).join(""),"}")}nt===Ws?cr():nt===kl?Lt():(Y("if(",nt,"===",Ws,"){"),cr(),Y("}else{"),Lt(),Y("}"))}Se.forEach(function(J){var ce=J.name,Z=ie.attributes[ce],fe;if(Z){if(!Te(Z))return;fe=Z.append(q,Y)}else{if(!Te(Rh))return;var we=q.scopeAttrib(ce);k.optional(function(){q.assert(Y,we+".state","missing attribute "+ce)}),fe={},Object.keys(new be).forEach(function(Fe){fe[Fe]=Y.def(we,".",Fe)})}me(q.link(J),he(J.info.type),fe)})}function zr(q,Y,ie,Se,Te){for(var se=q.shared,he=se.gl,me,J=0;J<Se.length;++J){var ce=Se[J],Z=ce.name,fe=ce.info.type,we=ie.uniforms[Z],Fe=q.link(ce),nt=Fe+".location",Ze;if(we){if(!Te(we))continue;if(Ui(we)){var ot=we.value;if(k.command(ot!==null&&typeof ot<"u",'missing uniform "'+Z+'"',q.commandStr),fe===Uf||fe===kf){k.command(typeof ot=="function"&&(fe===Uf&&(ot._reglType==="texture2d"||ot._reglType==="framebuffer")||fe===kf&&(ot._reglType==="textureCube"||ot._reglType==="framebufferCube")),"invalid texture for uniform "+Z,q.commandStr);var jt=q.link(ot._texture||ot.color[0]._texture);Y(he,".uniform1i(",nt,",",jt+".bind());"),Y.exit(jt,".unbind();")}else if(fe===Xl||fe===nc||fe===ic){k.optional(function(){k.command(On(ot),"invalid matrix for uniform "+Z,q.commandStr),k.command(fe===Xl&&ot.length===4||fe===nc&&ot.length===9||fe===ic&&ot.length===16,"invalid length for matrix uniform "+Z,q.commandStr)});var cr=q.global.def("new Float32Array(["+Array.prototype.slice.call(ot)+"])"),Lt=2;fe===nc?Lt=3:fe===ic&&(Lt=4),Y(he,".uniformMatrix",Lt,"fv(",nt,",false,",cr,");")}else{switch(fe){case Eh:k.commandType(ot,"number","uniform "+Z,q.commandStr),me="1f";break;case If:k.command(On(ot)&&ot.length===2,"uniform "+Z,q.commandStr),me="2f";break;case ec:k.command(On(ot)&&ot.length===3,"uniform "+Z,q.commandStr),me="3f";break;case Pf:k.command(On(ot)&&ot.length===4,"uniform "+Z,q.commandStr),me="4f";break;case Gm:k.commandType(ot,"boolean","uniform "+Z,q.commandStr),me="1i";break;case bh:k.commandType(ot,"number","uniform "+Z,q.commandStr),me="1i";break;case rc:k.command(On(ot)&&ot.length===2,"uniform "+Z,q.commandStr),me="2i";break;case tc:k.command(On(ot)&&ot.length===2,"uniform "+Z,q.commandStr),me="2i";break;case Bf:k.command(On(ot)&&ot.length===3,"uniform "+Z,q.commandStr),me="3i";break;case Df:k.command(On(ot)&&ot.length===3,"uniform "+Z,q.commandStr),me="3i";break;case Ff:k.command(On(ot)&&ot.length===4,"uniform "+Z,q.commandStr),me="4i";break;case Lf:k.command(On(ot)&&ot.length===4,"uniform "+Z,q.commandStr),me="4i";break}Y(he,".uniform",me,"(",nt,",",On(ot)?Array.prototype.slice.call(ot):ot,");")}continue}else Ze=we.append(q,Y)}else{if(!Te(Rh))continue;Ze=Y.def(se.uniforms,"[",$.id(Z),"]")}fe===Uf?Y("if(",Ze,"&&",Ze,'._reglType==="framebuffer"){',Ze,"=",Ze,".color[0];","}"):fe===kf&&Y("if(",Ze,"&&",Ze,'._reglType==="framebufferCube"){',Ze,"=",Ze,".color[0];","}"),k.optional(function(){function Er(ki,Wl){q.assert(Y,ki,'bad data or missing for uniform "'+Z+'".  '+Wl)}function Hr(ki){Er("typeof "+Ze+'==="'+ki+'"',"invalid type, expected "+ki)}function Lr(ki,Wl){Er(se.isArrayLike+"("+Ze+")&&"+Ze+".length==="+ki,"invalid vector, should have length "+ki,q.commandStr)}function oa(ki){Er("typeof "+Ze+'==="function"&&'+Ze+'._reglType==="texture'+(ki===Y0?"2d":"Cube")+'"',"invalid texture type",q.commandStr)}switch(fe){case bh:Hr("number");break;case tc:Lr(2);break;case Df:Lr(3);break;case Lf:Lr(4);break;case Eh:Hr("number");break;case If:Lr(2);break;case ec:Lr(3);break;case Pf:Lr(4);break;case Gm:Hr("boolean");break;case rc:Lr(2);break;case Bf:Lr(3);break;case Ff:Lr(4);break;case Xl:Lr(4);break;case nc:Lr(9);break;case ic:Lr(16);break;case Uf:oa(Y0);break;case kf:oa(Z0);break}});var Kt=1;switch(fe){case Uf:case kf:var fr=Y.def(Ze,"._texture");Y(he,".uniform1i(",nt,",",fr,".bind());"),Y.exit(fr,".unbind();");continue;case bh:case Gm:me="1i";break;case tc:case rc:me="2i",Kt=2;break;case Df:case Bf:me="3i",Kt=3;break;case Lf:case Ff:me="4i",Kt=4;break;case Eh:me="1f";break;case If:me="2f",Kt=2;break;case ec:me="3f",Kt=3;break;case Pf:me="4f",Kt=4;break;case Xl:me="Matrix2fv";break;case nc:me="Matrix3fv";break;case ic:me="Matrix4fv";break}if(Y(he,".uniform",me,"(",nt,","),me.charAt(0)==="M"){var Gt=Math.pow(fe-Xl+2,2),yr=q.global.def("new Float32Array(",Gt,")");Y("false,(Array.isArray(",Ze,")||",Ze," instanceof Float32Array)?",Ze,":(",Pi(Gt,function(Er){return yr+"["+Er+"]="+Ze+"["+Er+"]"}),",",yr,")")}else Kt>1?Y(Pi(Kt,function(Er){return Ze+"["+Er+"]"})):Y(Ze);Y(");")}}function Yt(q,Y,ie,Se){var Te=q.shared,se=Te.gl,he=Te.draw,me=Se.draw;function J(){var fr=me.elements,Gt,yr=Y;return fr?((fr.contextDep&&Se.contextDynamic||fr.propDep)&&(yr=ie),Gt=fr.append(q,yr)):Gt=yr.def(he,".",ss),Gt&&yr("if("+Gt+")"+se+".bindBuffer("+G0+","+Gt+".buffer.buffer);"),Gt}function ce(){var fr=me.count,Gt,yr=Y;return fr?((fr.contextDep&&Se.contextDynamic||fr.propDep)&&(yr=ie),Gt=fr.append(q,yr),k.optional(function(){fr.MISSING&&q.assert(Y,"false","missing vertex count"),fr.DYNAMIC&&q.assert(yr,Gt+">=0","missing vertex count")})):(Gt=yr.def(he,".",Ks),k.optional(function(){q.assert(yr,Gt+">=0","missing vertex count")})),Gt}var Z=J();function fe(fr){var Gt=me[fr];return Gt?Gt.contextDep&&Se.contextDynamic||Gt.propDep?Gt.append(q,ie):Gt.append(q,Y):Y.def(he,".",fr)}var we=fe(ls),Fe=fe(wf),nt=ce();if(typeof nt=="number"){if(nt===0)return}else ie("if(",nt,"){"),ie.exit("}");var Ze,ot;ct&&(Ze=fe(Nf),ot=q.instancing);var jt=Z+".type",cr=me.elements&&Ui(me.elements);function Lt(){function fr(){ie(ot,".drawElementsInstancedANGLE(",[we,nt,jt,Fe+"<<(("+jt+"-"+uh+")>>1)",Ze],");")}function Gt(){ie(ot,".drawArraysInstancedANGLE(",[we,Fe,nt,Ze],");")}Z?cr?fr():(ie("if(",Z,"){"),fr(),ie("}else{"),Gt(),ie("}")):Gt()}function Kt(){function fr(){ie(se+".drawElements("+[we,nt,jt,Fe+"<<(("+jt+"-"+uh+")>>1)"]+");")}function Gt(){ie(se+".drawArrays("+[we,Fe,nt]+");")}Z?cr?fr():(ie("if(",Z,"){"),fr(),ie("}else{"),Gt(),ie("}")):Gt()}ct&&(typeof Ze!="number"||Ze>=0)?typeof Ze=="string"?(ie("if(",Ze,">0){"),Lt(),ie("}else if(",Ze,"<0){"),Kt(),ie("}")):Lt():Kt()}function xr(q,Y,ie,Se,Te){var se=ar(),he=se.proc("body",Te);return k.optional(function(){se.commandStr=Y.commandStr,se.command=se.link(Y.commandStr)}),ct&&(se.instancing=he.def(se.shared.extensions,".angle_instanced_arrays")),q(se,he,ie,Se),se.compile().body}function Zt(q,Y,ie,Se){Nn(q,Y),ie.useVAO?ie.drawVAO?Y(q.shared.vao,".setVAO(",ie.drawVAO.append(q,Y),");"):Y(q.shared.vao,".setVAO(",q.shared.vao,".targetVAO);"):(Y(q.shared.vao,".setVAO(null);"),Wr(q,Y,ie,Se.attributes,function(){return!0})),zr(q,Y,ie,Se.uniforms,function(){return!0}),Yt(q,Y,Y,ie)}function Vr(q,Y){var ie=q.proc("draw",1);Nn(q,ie),Rn(q,ie,Y.context),qn(q,ie,Y.framebuffer),dn(q,ie,Y),jr(q,ie,Y.state),pr(q,ie,Y,!1,!0);var Se=Y.shader.progVar.append(q,ie);if(ie(q.shared.gl,".useProgram(",Se,".program);"),Y.shader.program)Zt(q,ie,Y,Y.shader.program);else{ie(q.shared.vao,".setVAO(null);");var Te=q.global.def("{}"),se=ie.def(Se,".id"),he=ie.def(Te,"[",se,"]");ie(q.cond(he).then(he,".call(this,a0);").else(he,"=",Te,"[",se,"]=",q.link(function(me){return xr(Zt,q,Y,me,1)}),"(",Se,");",he,".call(this,a0);"))}Object.keys(Y.state).length>0&&ie(q.shared.current,".dirty=true;")}function hi(q,Y,ie,Se){q.batchId="a1",Nn(q,Y);function Te(){return!0}Wr(q,Y,ie,Se.attributes,Te),zr(q,Y,ie,Se.uniforms,Te),Yt(q,Y,Y,ie)}function te(q,Y,ie,Se){Nn(q,Y);var Te=ie.contextDep,se=Y.def(),he="a0",me="a1",J=Y.def();q.shared.props=J,q.batchId=se;var ce=q.scope(),Z=q.scope();Y(ce.entry,"for(",se,"=0;",se,"<",me,";++",se,"){",J,"=",he,"[",se,"];",Z,"}",ce.exit);function fe(jt){return jt.contextDep&&Te||jt.propDep}function we(jt){return!fe(jt)}if(ie.needsContext&&Rn(q,Z,ie.context),ie.needsFramebuffer&&qn(q,Z,ie.framebuffer),jr(q,Z,ie.state,fe),ie.profile&&fe(ie.profile)&&pr(q,Z,ie,!1,!0),Se)ie.useVAO?ie.drawVAO?fe(ie.drawVAO)?Z(q.shared.vao,".setVAO(",ie.drawVAO.append(q,Z),");"):ce(q.shared.vao,".setVAO(",ie.drawVAO.append(q,ce),");"):ce(q.shared.vao,".setVAO(",q.shared.vao,".targetVAO);"):(ce(q.shared.vao,".setVAO(null);"),Wr(q,ce,ie,Se.attributes,we),Wr(q,Z,ie,Se.attributes,fe)),zr(q,ce,ie,Se.uniforms,we),zr(q,Z,ie,Se.uniforms,fe),Yt(q,ce,Z,ie);else{var Fe=q.global.def("{}"),nt=ie.shader.progVar.append(q,Z),Ze=Z.def(nt,".id"),ot=Z.def(Fe,"[",Ze,"]");Z(q.shared.gl,".useProgram(",nt,".program);","if(!",ot,"){",ot,"=",Fe,"[",Ze,"]=",q.link(function(jt){return xr(hi,q,ie,jt,2)}),"(",nt,");}",ot,".call(this,a0[",se,"],",se,");")}}function Me(q,Y){var ie=q.proc("batch",2);q.batchId="0",Nn(q,ie);var Se=!1,Te=!0;Object.keys(Y.context).forEach(function(Fe){Se=Se||Y.context[Fe].propDep}),Se||(Rn(q,ie,Y.context),Te=!1);var se=Y.framebuffer,he=!1;se?(se.propDep?Se=he=!0:se.contextDep&&Se&&(he=!0),he||qn(q,ie,se)):qn(q,ie,null),Y.state.viewport&&Y.state.viewport.propDep&&(Se=!0);function me(Fe){return Fe.contextDep&&Se||Fe.propDep}dn(q,ie,Y),jr(q,ie,Y.state,function(Fe){return!me(Fe)}),(!Y.profile||!me(Y.profile))&&pr(q,ie,Y,!1,"a1"),Y.contextDep=Se,Y.needsContext=Te,Y.needsFramebuffer=he;var J=Y.shader.progVar;if(J.contextDep&&Se||J.propDep)te(q,ie,Y,null);else{var ce=J.append(q,ie);if(ie(q.shared.gl,".useProgram(",ce,".program);"),Y.shader.program)te(q,ie,Y,Y.shader.program);else{ie(q.shared.vao,".setVAO(null);");var Z=q.global.def("{}"),fe=ie.def(ce,".id"),we=ie.def(Z,"[",fe,"]");ie(q.cond(we).then(we,".call(this,a0,a1);").else(we,"=",Z,"[",fe,"]=",q.link(function(Fe){return xr(te,q,Y,Fe,2)}),"(",ce,");",we,".call(this,a0,a1);"))}}Object.keys(Y.state).length>0&&ie(q.shared.current,".dirty=true;")}function Re(q,Y){var ie=q.proc("scope",3);q.batchId="a2";var Se=q.shared,Te=Se.current;Rn(q,ie,Y.context),Y.framebuffer&&Y.framebuffer.append(q,ie),Ym(Object.keys(Y.state)).forEach(function(he){var me=Y.state[he],J=me.append(q,ie);On(J)?J.forEach(function(ce,Z){ie.set(q.next[he],"["+Z+"]",ce)}):ie.set(Se.next,"."+he,J)}),pr(q,ie,Y,!0,!0),[ss,wf,Ks,Nf,ls].forEach(function(he){var me=Y.draw[he];me&&ie.set(Se.draw,"."+he,""+me.append(q,ie))}),Object.keys(Y.uniforms).forEach(function(he){ie.set(Se.uniforms,"["+$.id(he)+"]",Y.uniforms[he].append(q,ie))}),Object.keys(Y.attributes).forEach(function(he){var me=Y.attributes[he].append(q,ie),J=q.scopeAttrib(he);Object.keys(new be).forEach(function(ce){ie.set(J,"."+ce,me[ce])})}),Y.scopeVAO&&ie.set(Se.vao,".targetVAO",Y.scopeVAO.append(q,ie));function se(he){var me=Y.shader[he];me&&ie.set(Se.shader,"."+he,me.append(q,ie))}se(xa),se(Zs),Object.keys(Y.state).length>0&&(ie(Te,".dirty=true;"),ie.exit(Te,".dirty=true;")),ie("a1(",q.shared.context,",a0,",q.batchId,");")}function Nt(q){if(!(typeof q!="object"||On(q))){for(var Y=Object.keys(q),ie=0;ie<Y.length;++ie)if(en.isDynamic(q[Y[ie]]))return!0;return!1}}function nr(q,Y,ie){var Se=Y.static[ie];if(!Se||!Nt(Se))return;var Te=q.global,se=Object.keys(Se),he=!1,me=!1,J=!1,ce=q.global.def("{}");se.forEach(function(fe){var we=Se[fe];if(en.isDynamic(we)){typeof we=="function"&&(we=Se[fe]=en.unbox(we));var Fe=Ai(we,null);he=he||Fe.thisDep,J=J||Fe.propDep,me=me||Fe.contextDep}else{switch(Te(ce,".",fe,"="),typeof we){case"number":Te(we);break;case"string":Te('"',we,'"');break;case"object":Array.isArray(we)&&Te("[",we.join(),"]");break;default:Te(q.link(we));break}Te(";")}});function Z(fe,we){se.forEach(function(Fe){var nt=Se[Fe];if(en.isDynamic(nt)){var Ze=fe.invoke(we,nt);we(ce,".",Fe,"=",Ze,";")}})}Y.dynamic[ie]=new en.DynamicVariable(Yu,{thisDep:he,contextDep:me,propDep:J,ref:ce,append:Z}),delete Y.static[ie]}function Dr(q,Y,ie,Se,Te){var se=ar();se.stats=se.link(Te),Object.keys(Y.static).forEach(function(me){nr(se,Y,me)}),q0.forEach(function(me){nr(se,q,me)});var he=An(q,Y,ie,Se,se);return Vr(se,he),Re(se,he),Me(se,he),se.compile()}return{next:Ct,current:Je,procs:(function(){var q=ar(),Y=q.proc("poll"),ie=q.proc("refresh"),Se=q.block();Y(Se),ie(Se);var Te=q.shared,se=Te.gl,he=Te.next,me=Te.current;Se(me,".dirty=false;"),qn(q,Y),qn(q,ie,null,!0);var J;ct&&(J=q.link(ct)),ae.oes_vertex_array_object&&ie(q.link(ae.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var ce=0;ce<Ce.maxAttributes;++ce){var Z=ie.def(Te.attributes,"[",ce,"]"),fe=q.cond(Z,".buffer");fe.then(se,".enableVertexAttribArray(",ce,");",se,".bindBuffer(",Hl,",",Z,".buffer.buffer);",se,".vertexAttribPointer(",ce,",",Z,".size,",Z,".type,",Z,".normalized,",Z,".stride,",Z,".offset);").else(se,".disableVertexAttribArray(",ce,");",se,".vertexAttrib4f(",ce,",",Z,".x,",Z,".y,",Z,".z,",Z,".w);",Z,".buffer=null;"),ie(fe),ct&&ie(J,".vertexAttribDivisorANGLE(",ce,",",Z,".divisor);")}return ie(q.shared.vao,".currentVAO=null;",q.shared.vao,".setVAO(",q.shared.vao,".targetVAO);"),Object.keys(Ot).forEach(function(we){var Fe=Ot[we],nt=Se.def(he,".",we),Ze=q.block();Ze("if(",nt,"){",se,".enable(",Fe,")}else{",se,".disable(",Fe,")}",me,".",we,"=",nt,";"),ie(Ze),Y("if(",nt,"!==",me,".",we,"){",Ze,"}")}),Object.keys(rt).forEach(function(we){var Fe=rt[we],nt=Je[we],Ze,ot,jt=q.block();if(jt(se,".",Fe,"("),On(nt)){var cr=nt.length;Ze=q.global.def(he,".",we),ot=q.global.def(me,".",we),jt(Pi(cr,function(Lt){return Ze+"["+Lt+"]"}),");",Pi(cr,function(Lt){return ot+"["+Lt+"]="+Ze+"["+Lt+"];"}).join("")),Y("if(",Pi(cr,function(Lt){return Ze+"["+Lt+"]!=="+ot+"["+Lt+"]"}).join("||"),"){",jt,"}")}else Ze=Se.def(he,".",we),ot=Se.def(me,".",we),jt(Ze,");",me,".",we,"=",Ze,";"),Y("if(",Ze,"!==",ot,"){",jt,"}");ie(jt)}),q.compile()})(),compile:Dr}}function a_(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var o_=34918,Gl=34919,zf=35007,s_=function(O,$){if(!$.ext_disjoint_timer_query)return null;var ae=[];function Ce(){return ae.pop()||$.ext_disjoint_timer_query.createQueryEXT()}function Ge(ct){ae.push(ct)}var Ne=[];function ke(ct){var Rt=Ce();$.ext_disjoint_timer_query.beginQueryEXT(zf,Rt),Ne.push(Rt),it(Ne.length-1,Ne.length,ct)}function ut(){$.ext_disjoint_timer_query.endQueryEXT(zf)}function dt(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var St=[];function ht(){return St.pop()||new dt}function gt(ct){St.push(ct)}var bt=[];function it(ct,Rt,Je){var Ct=ht();Ct.startQueryIndex=ct,Ct.endQueryIndex=Rt,Ct.sum=0,Ct.stats=Je,bt.push(Ct)}var _t=[],be=[];function De(){var ct,Rt,Je=Ne.length;if(Je!==0){be.length=Math.max(be.length,Je+1),_t.length=Math.max(_t.length,Je+1),_t[0]=0,be[0]=0;var Ct=0;for(ct=0,Rt=0;Rt<Ne.length;++Rt){var ft=Ne[Rt];$.ext_disjoint_timer_query.getQueryObjectEXT(ft,Gl)?(Ct+=$.ext_disjoint_timer_query.getQueryObjectEXT(ft,o_),Ge(ft)):Ne[ct++]=ft,_t[Rt+1]=Ct,be[Rt+1]=ct}for(Ne.length=ct,ct=0,Rt=0;Rt<bt.length;++Rt){var Ot=bt[Rt],rt=Ot.startQueryIndex,yt=Ot.endQueryIndex;Ot.sum+=_t[yt]-_t[rt];var Ht=be[rt],rr=be[yt];rr===Ht?(Ot.stats.gpuTime+=Ot.sum/1e6,gt(Ot)):(Ot.startQueryIndex=Ht,Ot.endQueryIndex=rr,bt[ct++]=Ot)}bt.length=ct}}return{beginQuery:ke,endQuery:ut,pushScopeStats:it,update:De,getNumPendingQueries:function(){return Ne.length},clear:function(){ae.push.apply(ae,Ne);for(var ct=0;ct<ae.length;ct++)$.ext_disjoint_timer_query.deleteQueryEXT(ae[ct]);Ne.length=0,ae.length=0},restore:function(){Ne.length=0,ae.length=0}}},l_=16384,u_=256,Ch=1024,c_=34962,Oh="webglcontextlost",Km="webglcontextrestored",Qm=1,rb=2,f_=3;function li(O,$){for(var ae=0;ae<O.length;++ae)if(O[ae]===$)return ae;return-1}function Ri(O){var $=rf(O);if(!$)return null;var ae=$.gl,Ce=ae.getContextAttributes(),Ge=ae.isContextLost(),Ne=Md(ae,$);if(!Ne)return null;var ke=pa(),ut=a_(),dt=Ne.extensions,St=s_(ae,dt),ht=Ji(),gt=ae.drawingBufferWidth,bt=ae.drawingBufferHeight,it={tick:0,time:0,viewportWidth:gt,viewportHeight:bt,framebufferWidth:gt,framebufferHeight:bt,drawingBufferWidth:gt,drawingBufferHeight:bt,pixelRatio:$.pixelRatio},_t={},be={elements:null,primitive:4,count:-1,offset:0,instances:-1},De=Dd(ae,dt),ct=lm(ae,ut,$,Je),Rt=k0(ae,dt,De,ut,ct);function Je(Yt){return Rt.destroyBuffer(Yt)}var Ct=qE(ae,dt,ct,ut),ft=z0(ae,ke,ut,$),Ot=Ia(ae,dt,De,function(){Ht.procs.poll()},it,ut,$),rt=Ll(ae,dt,De,ut,$),yt=Lm(ae,dt,De,Ot,rt,ut),Ht=Zm(ae,ke,dt,De,ct,Ct,Ot,yt,_t,Rt,ft,be,it,St,$),rr=Um(ae,yt,Ht.procs.poll,it,Ce,dt,De),At=Ht.next,Ye=ae.canvas,Ke=[],ar=[],Ar=[],Bt=[$.onDestroy],ur=null;function or(){if(Ke.length===0){St&&St.update(),ur=null;return}ur=yn.next(or),jr();for(var Yt=Ke.length-1;Yt>=0;--Yt){var xr=Ke[Yt];xr&&xr(it,null,0)}ae.flush(),St&&St.update()}function mr(){!ur&&Ke.length>0&&(ur=yn.next(or))}function Rr(){ur&&(yn.cancel(or),ur=null)}function tn(Yt){Yt.preventDefault(),Ge=!0,Rr(),ar.forEach(function(xr){xr()})}function Jn(Yt){ae.getError(),Ge=!1,Ne.restore(),ft.restore(),ct.restore(),Ot.restore(),rt.restore(),yt.restore(),Rt.restore(),St&&St.restore(),Ht.procs.refresh(),mr(),Ar.forEach(function(xr){xr()})}Ye&&(Ye.addEventListener(Oh,tn,!1),Ye.addEventListener(Km,Jn,!1));function br(){Ke.length=0,Rr(),Ye&&(Ye.removeEventListener(Oh,tn),Ye.removeEventListener(Km,Jn)),ft.clear(),yt.clear(),rt.clear(),Ot.clear(),Ct.clear(),ct.clear(),Rt.clear(),St&&St.clear(),Bt.forEach(function(Yt){Yt()})}function Xn(Yt){k(!!Yt,"invalid args to regl({...})"),k.type(Yt,"object","invalid args to regl({...})");function xr(Te){var se=n({},Te);delete se.uniforms,delete se.attributes,delete se.context,delete se.vao,"stencil"in se&&se.stencil.op&&(se.stencil.opBack=se.stencil.opFront=se.stencil.op,delete se.stencil.op);function he(me){if(me in se){var J=se[me];delete se[me],Object.keys(J).forEach(function(ce){se[me+"."+ce]=J[ce]})}}return he("blend"),he("depth"),he("cull"),he("stencil"),he("polygonOffset"),he("scissor"),he("sample"),"vao"in Te&&(se.vao=Te.vao),se}function Zt(Te){var se={},he={};return Object.keys(Te).forEach(function(me){var J=Te[me];en.isDynamic(J)?he[me]=en.unbox(J,me):se[me]=J}),{dynamic:he,static:se}}var Vr=Zt(Yt.context||{}),hi=Zt(Yt.uniforms||{}),te=Zt(Yt.attributes||{}),Me=Zt(xr(Yt)),Re={gpuTime:0,cpuTime:0,count:0},Nt=Ht.compile(Me,te,hi,Vr,Re),nr=Nt.draw,Dr=Nt.batch,q=Nt.scope,Y=[];function ie(Te){for(;Y.length<Te;)Y.push(null);return Y}function Se(Te,se){var he;if(Ge&&k.raise("context lost"),typeof Te=="function")return q.call(this,null,Te,0);if(typeof se=="function")if(typeof Te=="number")for(he=0;he<Te;++he)q.call(this,null,se,he);else if(Array.isArray(Te))for(he=0;he<Te.length;++he)q.call(this,Te[he],se,he);else return q.call(this,Te,se,0);else if(typeof Te=="number"){if(Te>0)return Dr.call(this,ie(Te|0),Te|0)}else if(Array.isArray(Te)){if(Te.length)return Dr.call(this,Te,Te.length)}else return nr.call(this,Te)}return n(Se,{stats:Re})}var nn=yt.setFBO=Xn({framebuffer:en.define.call(null,Qm,"framebuffer")});function An(Yt,xr){var Zt=0;Ht.procs.poll();var Vr=xr.color;Vr&&(ae.clearColor(+Vr[0]||0,+Vr[1]||0,+Vr[2]||0,+Vr[3]||0),Zt|=l_),"depth"in xr&&(ae.clearDepth(+xr.depth),Zt|=u_),"stencil"in xr&&(ae.clearStencil(xr.stencil|0),Zt|=Ch),k(!!Zt,"called regl.clear with no buffer specified"),ae.clear(Zt)}function Rn(Yt){if(k(typeof Yt=="object"&&Yt,"regl.clear() takes an object as input"),"framebuffer"in Yt)if(Yt.framebuffer&&Yt.framebuffer_reglType==="framebufferCube")for(var xr=0;xr<6;++xr)nn(n({framebuffer:Yt.framebuffer.faces[xr]},Yt),An);else nn(Yt,An);else An(null,Yt)}function qn(Yt){k.type(Yt,"function","regl.frame() callback must be a function"),Ke.push(Yt);function xr(){var Zt=li(Ke,Yt);k(Zt>=0,"cannot cancel a frame twice");function Vr(){var hi=li(Ke,Vr);Ke[hi]=Ke[Ke.length-1],Ke.length-=1,Ke.length<=0&&Rr()}Ke[Zt]=Vr}return mr(),{cancel:xr}}function dn(){var Yt=At.viewport,xr=At.scissor_box;Yt[0]=Yt[1]=xr[0]=xr[1]=0,it.viewportWidth=it.framebufferWidth=it.drawingBufferWidth=Yt[2]=xr[2]=ae.drawingBufferWidth,it.viewportHeight=it.framebufferHeight=it.drawingBufferHeight=Yt[3]=xr[3]=ae.drawingBufferHeight}function jr(){it.tick+=1,it.time=pr(),dn(),Ht.procs.poll()}function Nn(){dn(),Ht.procs.refresh(),St&&St.update()}function pr(){return(Ji()-ht)/1e3}Nn();function Wr(Yt,xr){k.type(xr,"function","listener callback must be a function");var Zt;switch(Yt){case"frame":return qn(xr);case"lost":Zt=ar;break;case"restore":Zt=Ar;break;case"destroy":Zt=Bt;break;default:k.raise("invalid event, must be one of frame,lost,restore,destroy")}return Zt.push(xr),{cancel:function(){for(var Vr=0;Vr<Zt.length;++Vr)if(Zt[Vr]===xr){Zt[Vr]=Zt[Zt.length-1],Zt.pop();return}}}}var zr=n(Xn,{clear:Rn,prop:en.define.bind(null,Qm),context:en.define.bind(null,rb),this:en.define.bind(null,f_),draw:Xn({}),buffer:function(Yt){return ct.create(Yt,c_,!1,!1)},elements:function(Yt){return Ct.create(Yt,!1)},texture:Ot.create2D,cube:Ot.createCube,renderbuffer:rt.create,framebuffer:yt.create,framebufferCube:yt.createCube,vao:Rt.createVAO,attributes:Ce,frame:qn,on:Wr,limits:De,hasExtension:function(Yt){return De.extensions.indexOf(Yt.toLowerCase())>=0},read:rr,destroy:br,_gl:ae,_refresh:Nn,poll:function(){jr(),St&&St.update()},now:pr,stats:ut});return $.onDone(null,zr),zr}return Ri}))})(Ly)),Ly.exports}var p0e=h0e();const m0e=Kr(p0e);var v0e=class{constructor(e,t){const{buffer:r,offset:n,stride:i,normalized:a,size:o,divisor:l}=t;this.buffer=r,this.attribute={buffer:r.get(),offset:n||0,stride:i||0,normalized:a||!1,divisor:l||0},o&&(this.attribute.size=o)}get(){return this.attribute}updateBuffer(e){this.buffer.subData(e)}destroy(){this.buffer.destroy()}},g0e={[L.POINTS]:"points",[L.LINES]:"lines",[L.LINE_LOOP]:"line loop",[L.LINE_STRIP]:"line strip",[L.TRIANGLES]:"triangles",[L.TRIANGLE_FAN]:"triangle fan",[L.TRIANGLE_STRIP]:"triangle strip"},Z9={[L.STATIC_DRAW]:"static",[L.DYNAMIC_DRAW]:"dynamic",[L.STREAM_DRAW]:"stream"},AO={[L.BYTE]:"int8",[L.INT]:"int32",[L.UNSIGNED_BYTE]:"uint8",[L.UNSIGNED_SHORT]:"uint16",[L.UNSIGNED_INT]:"uint32",[L.FLOAT]:"float"},_0e={[L.ALPHA]:"alpha",[L.LUMINANCE]:"luminance",[L.LUMINANCE_ALPHA]:"luminance alpha",[L.RGB]:"rgb",[L.RGBA]:"rgba",[L.RGBA4]:"rgba4",[L.RGB5_A1]:"rgb5 a1",[L.RGB565]:"rgb565",[L.DEPTH_COMPONENT]:"depth",[L.DEPTH_STENCIL]:"depth stencil"},y0e={[L.DONT_CARE]:"dont care",[L.NICEST]:"nice",[L.FASTEST]:"fast"},hF={[L.NEAREST]:"nearest",[L.LINEAR]:"linear",[L.LINEAR_MIPMAP_LINEAR]:"mipmap",[L.NEAREST_MIPMAP_LINEAR]:"nearest mipmap linear",[L.LINEAR_MIPMAP_NEAREST]:"linear mipmap nearest",[L.NEAREST_MIPMAP_NEAREST]:"nearest mipmap nearest"},pF={[L.REPEAT]:"repeat",[L.CLAMP_TO_EDGE]:"clamp",[L.MIRRORED_REPEAT]:"mirror"},E0e={[L.NONE]:"none",[L.BROWSER_DEFAULT_WEBGL]:"browser"},b0e={[L.NEVER]:"never",[L.ALWAYS]:"always",[L.LESS]:"less",[L.LEQUAL]:"lequal",[L.GREATER]:"greater",[L.GEQUAL]:"gequal",[L.EQUAL]:"equal",[L.NOTEQUAL]:"notequal"},mF={[L.FUNC_ADD]:"add",[L.MIN_EXT]:"min",[L.MAX_EXT]:"max",[L.FUNC_SUBTRACT]:"subtract",[L.FUNC_REVERSE_SUBTRACT]:"reverse subtract"},hy={[L.ZERO]:"zero",[L.ONE]:"one",[L.SRC_COLOR]:"src color",[L.ONE_MINUS_SRC_COLOR]:"one minus src color",[L.SRC_ALPHA]:"src alpha",[L.ONE_MINUS_SRC_ALPHA]:"one minus src alpha",[L.DST_COLOR]:"dst color",[L.ONE_MINUS_DST_COLOR]:"one minus dst color",[L.DST_ALPHA]:"dst alpha",[L.ONE_MINUS_DST_ALPHA]:"one minus dst alpha",[L.CONSTANT_COLOR]:"constant color",[L.ONE_MINUS_CONSTANT_COLOR]:"one minus constant color",[L.CONSTANT_ALPHA]:"constant alpha",[L.ONE_MINUS_CONSTANT_ALPHA]:"one minus constant alpha",[L.SRC_ALPHA_SATURATE]:"src alpha saturate"},x0e={[L.NEVER]:"never",[L.ALWAYS]:"always",[L.LESS]:"less",[L.LEQUAL]:"lequal",[L.GREATER]:"greater",[L.GEQUAL]:"gequal",[L.EQUAL]:"equal",[L.NOTEQUAL]:"notequal"},Yh={[L.ZERO]:"zero",[L.KEEP]:"keep",[L.REPLACE]:"replace",[L.INVERT]:"invert",[L.INCR]:"increment",[L.DECR]:"decrement",[L.INCR_WRAP]:"increment wrap",[L.DECR_WRAP]:"decrement wrap"},S0e={[L.FRONT]:"front",[L.BACK]:"back"},T0e=class{constructor(e,t){this.isDestroyed=!1;const{data:r,usage:n,type:i}=t;this.buffer=e.buffer({data:r,usage:Z9[n||L.STATIC_DRAW],type:AO[i||L.UNSIGNED_BYTE]})}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:e,offset:t}){this.buffer.subdata(e,t)}},A0e=class{constructor(e,t){const{data:r,usage:n,type:i,count:a}=t;this.elements=e.elements({data:r,usage:Z9[n||L.STATIC_DRAW],type:AO[i||L.UNSIGNED_BYTE],count:a})}get(){return this.elements}subData({data:e}){this.elements.subdata(e)}destroy(){}},R0e=class{constructor(e,t){const{width:r,height:n,color:i,colors:a}=t,o={width:r,height:n};Array.isArray(a)&&(o.colors=a.map(l=>l.get())),i&&typeof i!="boolean"&&(o.color=i.get()),this.framebuffer=e.framebuffer(o)}get(){return this.framebuffer}destroy(){this.framebuffer.destroy()}resize({width:e,height:t}){this.framebuffer.resize(e,t)}},C0e=Object.defineProperty,O0e=Object.defineProperties,w0e=Object.getOwnPropertyDescriptors,vF=Object.getOwnPropertySymbols,N0e=Object.prototype.hasOwnProperty,M0e=Object.prototype.propertyIsEnumerable,gF=(e,t,r)=>t in e?C0e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Xv=(e,t)=>{for(var r in t||(t={}))N0e.call(t,r)&&gF(e,r,t[r]);if(vF)for(var r of vF(t))M0e.call(t,r)&&gF(e,r,t[r]);return e},I0e=(e,t)=>O0e(e,w0e(t)),{isPlainObject:P0e,isTypedArray:D0e}=Un,L0e=class{constructor(e,t){this.destroyed=!1,this.uniforms={},this.reGl=e;const{vs:r,fs:n,attributes:i,uniforms:a,primitive:o,count:l,elements:c,depth:f,cull:h,instances:p}=t,v={glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:bs.LOWER_LEFT,clipSpaceNearZ:Mp.NEGATIVE_ONE},g={};this.options=t,a&&(this.uniforms=this.extractUniforms(a),Object.keys(a).forEach(T=>{g[T]=e.prop(T)}));const _={};Object.keys(i).forEach(T=>{_[T]=i[T].get()});const E=ZD(Lp(v,"frag",n,null,!1)),b=ZD(Lp(v,"vert",r,null,!1)),S={attributes:_,frag:E,uniforms:g,vert:b,colorMask:e.prop("colorMask"),lineWidth:1,blend:{enable:e.prop("blend.enable"),func:e.prop("blend.func"),equation:e.prop("blend.equation"),color:e.prop("blend.color")},stencil:{enable:e.prop("stencil.enable"),mask:e.prop("stencil.mask"),func:e.prop("stencil.func"),opFront:e.prop("stencil.opFront"),opBack:e.prop("stencil.opBack")},primitive:g0e[o===void 0?L.TRIANGLES:o]};p&&(S.instances=p),l?S.count=l:c&&(S.elements=c.get()),this.initDepthDrawParams({depth:f},S),this.initCullDrawParams({cull:h},S),this.drawCommand=e(S),this.drawParams=S}updateAttributesAndElements(e,t){const r={};Object.keys(e).forEach(n=>{r[n]=e[n].get()}),this.drawParams.attributes=r,this.drawParams.elements=t.get(),this.drawCommand=this.reGl(this.drawParams)}updateAttributes(e){const t={};Object.keys(e).forEach(r=>{t[r]=e[r].get()}),this.drawParams.attributes=t,this.drawCommand=this.reGl(this.drawParams)}addUniforms(e){this.uniforms=Xv(Xv({},this.uniforms),this.extractUniforms(e))}draw(e,t){if(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)return;const r=Xv(Xv({},this.uniforms),this.extractUniforms(e.uniforms||{})),n={};Object.keys(r).forEach(i=>{const a=typeof r[i];a==="boolean"||a==="number"||Array.isArray(r[i])||r[i].BYTES_PER_ELEMENT?n[i]=r[i]:n[i]=r[i].get()}),n.blend=t?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(e),n.stencil=this.getStencilDrawParams(e),n.colorMask=this.getColorMaskDrawParams(e,t),this.drawCommand(n)}destroy(){var e,t;(t=(e=this.drawParams)==null?void 0:e.elements)==null||t.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(r=>{r?.destroy()}),this.destroyed=!0}initDepthDrawParams({depth:e},t){e&&(t.depth={enable:e.enable===void 0?!0:!!e.enable,mask:e.mask===void 0?!0:!!e.mask,func:b0e[e.func||L.LESS],range:e.range||[0,1]})}getBlendDrawParams({blend:e}){const{enable:t,func:r,equation:n,color:i=[0,0,0,0]}=e||{};return{enable:!!t,func:{srcRGB:hy[r&&r.srcRGB||L.SRC_ALPHA],srcAlpha:hy[r&&r.srcAlpha||L.SRC_ALPHA],dstRGB:hy[r&&r.dstRGB||L.ONE_MINUS_SRC_ALPHA],dstAlpha:hy[r&&r.dstAlpha||L.ONE_MINUS_SRC_ALPHA]},equation:{rgb:mF[n&&n.rgb||L.FUNC_ADD],alpha:mF[n&&n.alpha||L.FUNC_ADD]},color:i}}getStencilDrawParams({stencil:e}){const{enable:t,mask:r=-1,func:n={cmp:L.ALWAYS,ref:0,mask:-1},opFront:i={fail:L.KEEP,zfail:L.KEEP,zpass:L.KEEP},opBack:a={fail:L.KEEP,zfail:L.KEEP,zpass:L.KEEP}}=e||{};return{enable:!!t,mask:r,func:I0e(Xv({},n),{cmp:x0e[n.cmp]}),opFront:{fail:Yh[i.fail],zfail:Yh[i.zfail],zpass:Yh[i.zpass]},opBack:{fail:Yh[a.fail],zfail:Yh[a.zfail],zpass:Yh[a.zpass]}}}getColorMaskDrawParams({stencil:e},t){return e?.enable&&e.opFront&&!t?[!1,!1,!1,!1]:[!0,!0,!0,!0]}initCullDrawParams({cull:e},t){if(e){const{enable:r,face:n=L.BACK}=e;t.cull={enable:!!r,face:S0e[n]}}}extractUniforms(e){const t={};return Object.keys(e).forEach(r=>{this.extractUniformsRecursively(r,e[r],t,"")}),t}extractUniformsRecursively(e,t,r,n){if(t===null||typeof t=="number"||typeof t=="boolean"||Array.isArray(t)&&typeof t[0]=="number"||D0e(t)||t===""||"resize"in t){r[`${n&&n+"."}${e}`]=t;return}P0e(t)&&Object.keys(t).forEach(i=>{this.extractUniformsRecursively(i,t[i],r,`${n&&n+"."}${e}`)}),Array.isArray(t)&&t.forEach((i,a)=>{Object.keys(i).forEach(o=>{this.extractUniformsRecursively(o,i[o],r,`${n&&n+"."}${e}[${a}]`)})})}},B0e=class{constructor(e,t){this.isDestroy=!1;const{data:r,type:n=L.UNSIGNED_BYTE,width:i,height:a,flipY:o=!1,format:l=L.RGBA,mipmap:c=!1,wrapS:f=L.CLAMP_TO_EDGE,wrapT:h=L.CLAMP_TO_EDGE,aniso:p=0,alignment:v=1,premultiplyAlpha:g=!1,mag:_=L.NEAREST,min:E=L.NEAREST,colorSpace:b=L.BROWSER_DEFAULT_WEBGL,x:S=0,y:T=0,copy:C=!1}=t;this.width=i,this.height=a;const M={width:i,height:a,type:AO[n],format:_0e[l],wrapS:pF[f],wrapT:pF[h],mag:hF[_],min:hF[E],alignment:v,flipY:o,colorSpace:E0e[b],premultiplyAlpha:g,aniso:p,x:S,y:T,copy:C};r&&(M.data=r),typeof c=="number"?M.mipmap=y0e[c]:typeof c=="boolean"&&(M.mipmap=c),this.texture=e.texture(M)}get(){return this.texture}update(e={}){this.texture(e)}bind(){this.texture._texture.bind()}resize({width:e,height:t}){this.texture.resize(e,t),this.width=e,this.height=t}getSize(){return[this.width,this.height]}destroy(){var e;this.isDestroy||(e=this.texture)==null||e.destroy(),this.isDestroy=!0}},$R=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{l(r.next(c))}catch(f){i(f)}},o=c=>{try{l(r.throw(c))}catch(f){i(f)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);l((r=r.apply(e,t)).next())}),F0e=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>"WebGL1",this.createModel=e=>new L0e(this.gl,e),this.createAttribute=e=>new v0e(this.gl,e),this.createBuffer=e=>new T0e(this.gl,e),this.createElements=e=>new A0e(this.gl,e),this.createTexture2D=e=>new B0e(this.gl,e),this.createFramebuffer=e=>new R0e(this.gl,e),this.useFramebuffer=(e,t)=>{this.gl({framebuffer:e?e.get():null})(t)},this.useFramebufferAsync=(e,t)=>$R(this,null,function*(){this.gl({framebuffer:e?e.get():null})(t)}),this.clear=e=>{var t;const{color:r,depth:n,stencil:i,framebuffer:a=null}=e,o={color:r,depth:n,stencil:i};o.framebuffer=a===null?a:a.get(),(t=this.gl)==null||t.clear(o)},this.viewport=({x:e,y:t,width:r,height:n})=>{this.gl._gl.viewport(e,t,r,n),this.width=r,this.height=n,this.gl._refresh()},this.readPixels=e=>{const{framebuffer:t,x:r,y:n,width:i,height:a}=e,o={x:r,y:n,width:i,height:a};return t&&(o.framebuffer=t.get()),this.gl.read(o)},this.readPixelsAsync=e=>$R(this,null,function*(){return this.readPixels(e)}),this.getViewportSize=()=>({width:this.gl._gl.drawingBufferWidth,height:this.gl._gl.drawingBufferHeight}),this.getContainer=()=>{var e;return(e=this.canvas)==null?void 0:e.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.gl._gl,this.destroy=()=>{var e,t,r;this.canvas=null,(r=(t=(e=this.gl)==null?void 0:e._gl)==null?void 0:t.getExtension("WEBGL_lose_context"))==null||r.loseContext(),this.gl.destroy(),this.gl=null}}init(e,t,r){return $R(this,null,function*(){this.canvas=e,r?this.gl=r:this.gl=yield new Promise((n,i)=>{m0e({canvas:this.canvas,attributes:{alpha:!0,antialias:t.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,stencil:t.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:(a,o)=>{(a||!o)&&i(a),n(o)}})}),this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")}})}getPointSizeRange(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}testExtension(e){return!!this.getGLContext().getExtension(e)}setState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}setBaseState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}setCustomLayerDefaults(){const e=this.getGLContext();e.disable(e.CULL_FACE)}setDirty(e){this.isDirty=e}getDirty(){return this.isDirty}beginFrame(){}endFrame(){}},YR=["selectstart","selecting","selectend"],U0e=class extends Za.EventEmitter{constructor(e,t={}){super(),this.isEnable=!1,this.onDragStart=r=>{this.box.style.display="block",this.startEvent=this.endEvent=r,this.syncBoxBound(),this.emit("selectstart",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragging=r=>{this.endEvent=r,this.syncBoxBound(),this.emit("selecting",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragEnd=r=>{this.endEvent=r,this.box.style.display="none",this.emit("selectend",this.getLngLatBox(),this.startEvent,this.endEvent)},this.scene=e,this.options=t}get container(){return this.scene.getMapService().getMarkerContainer()}enable(){if(this.isEnable)return;const{className:e}=this.options;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){const t=ui("div",void 0,this.container);t.classList.add("l7-select-box"),e&&t.classList.add(e),t.style.display="none",this.box=t}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}disable(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}syncBoxBound(){const{x:e,y:t}=this.startEvent,{x:r,y:n}=this.endEvent,i=Math.min(e,r),a=Math.min(t,n),o=Math.abs(e-r),l=Math.abs(t-n);this.box.style.top=`${a}px`,this.box.style.left=`${i}px`,this.box.style.width=`${o}px`,this.box.style.height=`${l}px`}getLngLatBox(){const{lngLat:{lng:e,lat:t}}=this.startEvent,{lngLat:{lng:r,lat:n}}=this.endEvent;return Jte([[e,t],[r,n]])}},k0e=Object.defineProperty,j0e=Object.defineProperties,z0e=Object.getOwnPropertyDescriptors,_F=Object.getOwnPropertySymbols,V0e=Object.prototype.hasOwnProperty,H0e=Object.prototype.propertyIsEnumerable,yF=(e,t,r)=>t in e?k0e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,X0e=(e,t)=>{for(var r in t||(t={}))V0e.call(t,r)&&yF(e,r,t[r]);if(_F)for(var r of _F(t))H0e.call(t,r)&&yF(e,r,t[r]);return e},q0e=(e,t)=>j0e(e,z0e(t)),qv=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{l(r.next(c))}catch(f){i(f)}},o=c=>{try{l(r.throw(c))}catch(f){i(f)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);l((r=r.apply(e,t)).next())}),G0e=class{constructor(e){const{id:t,map:r,renderer:n="device"}=e,i=ese();this.container=i,r.setContainer(i,t),n==="regl"?i.rendererService=new F0e:i.rendererService=new f0e,this.sceneService=i.sceneService,this.mapService=i.mapService,this.iconService=i.iconService,this.fontService=i.fontService,this.controlService=i.controlService,this.layerService=i.layerService,this.debugService=i.debugService,this.debugService.setEnable(e.debug),this.markerService=i.markerService,this.interactionService=i.interactionService,this.popupService=i.popupService,this.boxSelect=new U0e(this,{}),this.initComponent(t),this.sceneService.init(e),this.initControl()}get map(){return this.mapService.map}get loaded(){return this.sceneService.loaded}getServiceContainer(){return this.container}getSize(){return this.mapService.getSize()}getMinZoom(){return this.mapService.getMinZoom()}getMaxZoom(){return this.mapService.getMaxZoom()}getType(){return this.mapService.getType()}getMapContainer(){return this.mapService.getMapContainer()}getMapCanvasContainer(){return this.mapService.getMapCanvasContainer()}getMapService(){return this.mapService}getDebugService(){return this.debugService}exportPng(e){return qv(this,null,function*(){return this.sceneService.exportPng(e)})}exportMap(e){return qv(this,null,function*(){return this.sceneService.exportPng(e)})}registerRenderService(e){this.sceneService.loaded?new e(this).init():this.on("loaded",()=>{new e(this).init()})}setBgColor(e){this.mapService.setBgColor(e)}addLayer(e){this.loaded?this.preAddLayer(e):this.once("loaded",()=>{this.preAddLayer(e)})}preAddLayer(e){const t=_g(this.container);if(e.setContainer(t),this.sceneService.addLayer(e),e.inited){this.initTileLayer(e);const r=this.initMask(e);this.addMask(r,e.id)}else e.on("inited",()=>{this.initTileLayer(e);const r=this.initMask(e);this.addMask(r,e.id)})}initMask(e){const{mask:t,maskfence:r,maskColor:n="#000",maskOpacity:i=0}=e.getLayerConfig();return!t||!r?void 0:new T9().source(r).shape("fill").style({color:n,opacity:i})}addMask(e,t){if(!e)return;const r=this.getLayer(t);if(r){const n=_g(this.container);e.setContainer(n),r.addMaskLayer(e),this.sceneService.addMask(e)}else console.warn("parent layer not find!")}getPickedLayer(){return this.layerService.pickedLayerId}getLayers(){return this.layerService.getLayers()}getLayer(e){return this.layerService.getLayer(e)}getLayerByName(e){return this.layerService.getLayerByName(e)}removeLayer(e,t){return qv(this,null,function*(){yield this.layerService.remove(e,t)})}removeAllLayer(){return qv(this,null,function*(){yield this.layerService.removeAllLayers()})}render(){this.sceneService.render()}setEnableRender(e){this.layerService.setEnableRender(e)}addIconFont(e,t){this.fontService.addIconFont(e,t)}addIconFonts(e){e.forEach(([t,r])=>{this.fontService.addIconFont(t,r)})}addFontFace(e,t){this.fontService.once("fontloaded",r=>{this.emit("fontloaded",r)}),this.fontService.addFontFace(e,t)}addImage(e,t){return qv(this,null,function*(){yield this.iconService.addImage(e,t)})}hasImage(e){return this.iconService.hasImage(e)}removeImage(e){this.iconService.removeImage(e)}addIconFontGlyphs(e,t){this.fontService.addIconGlyphs(t)}addControl(e){this.controlService.addControl(e,this.container)}removeControl(e){this.controlService.removeControl(e)}getControlByName(e){return this.controlService.getControlByName(e)}addMarker(e){this.markerService.addMarker(e)}addMarkerLayer(e){this.markerService.addMarkerLayer(e)}removeMarkerLayer(e){this.markerService.removeMarkerLayer(e)}removeAllMarkers(){this.markerService.removeAllMarkers()}removeAllMakers(){console.warn("removeAllMakers 已废弃，请使用 removeAllMarkers"),this.markerService.removeAllMarkers()}addPopup(e){this.popupService.addPopup(e)}removePopup(e){this.popupService.removePopup(e)}on(e,t){var r;YR.includes(e)?(r=this.boxSelect)==null||r.on(e,t):J_.includes(e)?this.sceneService.on(e,t):this.mapService.on(e,t)}once(e,t){var r;YR.includes(e)?(r=this.boxSelect)==null||r.once(e,t):J_.includes(e)?this.sceneService.once(e,t):this.mapService.once(e,t)}emit(e,t){J_.indexOf(e)===-1?this.mapService.on(e,t):this.sceneService.emit(e,t)}off(e,t){var r;YR.includes(e)?(r=this.boxSelect)==null||r.off(e,t):J_.includes(e)?this.sceneService.off(e,t):this.mapService.off(e,t)}getZoom(){return this.mapService.getZoom()}getCenter(e){return this.mapService.getCenter(e)}setCenter(e,t){return this.mapService.setCenter(e,t)}getPitch(){return this.mapService.getPitch()}setPitch(e){return this.mapService.setPitch(e)}getRotation(){return this.mapService.getRotation()}getBounds(){return this.mapService.getBounds()}setRotation(e){this.mapService.setRotation(e)}zoomIn(){this.mapService.zoomIn()}zoomOut(){this.mapService.zoomOut()}panTo(e){this.mapService.panTo(e)}panBy(e,t){this.mapService.panBy(e,t)}getContainer(){return this.mapService.getContainer()}setZoom(e){this.mapService.setZoom(e)}fitBounds(e,t){const{fitBoundsOptions:r,animate:n}=this.sceneService.getSceneConfig();this.mapService.fitBounds(e,t||q0e(X0e({},r),{animate:n}))}setZoomAndCenter(e,t){this.mapService.setZoomAndCenter(e,t)}setMapStyle(e){this.mapService.setMapStyle(e)}setMapStatus(e){this.mapService.setMapStatus(e)}pixelToLngLat(e){return this.mapService.pixelToLngLat(e)}lngLatToPixel(e){return this.mapService.lngLatToPixel(e)}containerToLngLat(e){return this.mapService.containerToLngLat(e)}lngLatToContainer(e){return this.mapService.lngLatToContainer(e)}destroy(){this.sceneService.destroy()}registerPostProcessingPass(e){this.container.postProcessingPass.name=new e}enableShaderPick(){this.layerService.enableShaderPick()}diasbleShaderPick(){this.layerService.disableShaderPick()}enableBoxSelect(e=!0){this.boxSelect.enable(),e&&this.boxSelect.once("selectend",()=>{this.disableBoxSelect()})}disableBoxSelect(){this.boxSelect.disable()}static addProtocol(e,t){xy.REGISTERED_PROTOCOLS[e]=t}static removeProtocol(e){delete xy.REGISTERED_PROTOCOLS[e]}getProtocol(e){return xy.REGISTERED_PROTOCOLS[e]}startAnimate(){this.layerService.startAnimate()}stopAnimate(){this.layerService.stopAnimate()}getPointSizeRange(){return this.sceneService.getPointSizeRange()}initComponent(e){this.controlService.init({container:Dte(e)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}initControl(){const{logoVisible:e,logoPosition:t}=this.sceneService.getSceneConfig();e&&this.addControl(new sue({position:t}))}initTileLayer(e){e.getSource().isTile&&(e.tileLayer=new tme(e))}},EF={exports:{}},Gv={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bF;function W0e(){if(bF)return Gv;bF=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:e,type:n,key:o,ref:i!==void 0?i:null,props:a}}return Gv.Fragment=t,Gv.jsx=r,Gv.jsxs=r,Gv}var xF;function $0e(){return xF||(xF=1,EF.exports=W0e()),EF.exports}var Cn=$0e();function Y0e({events:e,className:t,enableCluster:r=!0,clusterRadius:n=50,minClusterSize:i=2}){const a=U.useRef(null),o=U.useRef(null),l=U.useRef(null),c=U.useRef(null),[f,h]=U.useState(!1),[p,v]=U.useState(!0),g=U.useMemo(()=>{const S=e.filter(C=>C.location&&typeof C.location.lng=="number"&&typeof C.location.lat=="number"&&!isNaN(C.location.lng)&&!isNaN(C.location.lat)&&Math.abs(C.location.lng)<=180&&Math.abs(C.location.lat)<=90),T=S.map(C=>({lng:C.location.lng,lat:C.location.lat,title:C.title,sentiment:C.sentiment,hotness:C.hotness||1,address:C.address,timestamp:C.timestamp,score:C.score||0,source:C.source,content:C.content,tags:C.tags||[]}));return{validEvents:S,pointData:T}},[e]),_=U.useCallback(S=>{switch(S){case"positive":return"#52c41a";case"negative":return"#ff4d4f";case"neutral":return"#1890ff";default:return"#d9d9d9"}},[]),E=U.useCallback(S=>{const T=new Map([["positive","正面"],["negative","负面"],["neutral","中性"]]),C=String(S.sentiment||""),M=T.get(C)||"未知",D=_(S.sentiment);return`
      <div style="padding: 12px; min-width: 280px; max-width: 320px; font-family: Arial, sans-serif;">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
          <h3 style="font-weight: 600; font-size: 14px; color: #333; margin: 0; max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${S.title||"未知标题"}</h3>
          <span style="padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 500; background-color: ${D}20; color: ${D};">
            ${M}
          </span>
        </div>
        <p style="font-size: 12px; color: #666; margin: 0 0 8px 0; line-height: 1.4; max-height: 60px; overflow: hidden;">${S.content||"暂无内容"}</p>
        <div style="display: flex; align-items: center; justify-content: space-between; font-size: 12px; color: #999; margin-bottom: 4px;">
          <span>🏢 ${S.source||"未知来源"}</span>
          <span>📍 ${S.address||"未知地址"}</span>
        </div>
        <div style="display: flex; align-items: center; justify-content: space-between; font-size: 12px; color: #999;">
          <span>🔥 热度: ${S.hotness||0}</span>
          <span>🕒 ${S.timestamp||""}</span>
        </div>
        ${Array.isArray(S.tags)&&S.tags.length>0?`
          <div style="margin-top: 8px;">
            <div style="display: flex; flex-wrap: wrap; gap: 4px;">
              ${S.tags.map(I=>`<span style="padding: 2px 6px; background-color: #e3f2fd; color: #1976d2; font-size: 12px; border-radius: 4px;">${String(I)}</span>`).join("")}
            </div>
          </div>
        `:""}
      </div>
    `},[_]),b=()=>{try{const S=new G0e({id:a.current,map:new Fme({style:"light",center:[104,35.5],zoom:4,token:"d2f3394e4d2807b003a50a8a6f4bb6bb"})});S.on("loaded",()=>{h(!0),v(!1)});const T=new A9({closeButton:!0,closeOnClick:!1,className:"custom-popup"});l.current=T,o.current=S}catch(S){console.error("L7场景初始化失败:",S)}};return U.useEffect(()=>{if(a.current)return b(),()=>{c.current&&o.current&&(o.current.removePopup(c.current),c.current=null),l.current&&o.current&&(o.current.removePopup(l.current),l.current=null),o.current&&(o.current.destroy(),o.current=null)}},[]),U.useEffect(()=>{if(!o.current||!f||!g.validEvents.length)return;const S=o.current;if(!S)return;const{validEvents:T,pointData:C}=g;S.getLayers().filter(N=>N.name==="event-points"||N.name==="cluster-text").forEach(N=>{S.removeLayer(N)});const M=new kg({name:"event-points"});r&&T.length>=i?M.source(C,{parser:{type:"json",x:"lng",y:"lat"},cluster:!0,clusterOptions:{field:"point_count",method:"sum",radius:n,minZoom:0,maxZoom:20}}).size("point_count",N=>N===1?14:N<=3?20:N<=6?28:N<=10?36:44).color("point_count",N=>N===1?_("neutral"):N<=3?"#52c41a":N<=6?"#faad14":N<=10?"#fa8c16":"#f5222d").shape("circle").style({opacity:.9,strokeWidth:2,stroke:"#ffffff"}).select({color:"#1890ff"}).active({color:"#0050b3"}):M.source(C,{parser:{type:"json",x:"lng",y:"lat"}}).size("hotness",N=>Math.max(10,Math.min(30,N*2.5+5))).color("sentiment",N=>_(N)).shape("circle").style({opacity:.8,strokeWidth:2,stroke:"#ffffff"}).select({color:"#1890ff"}).active({color:"#0050b3"}),M.on("mousemove",N=>{a.current&&(a.current.style.cursor="pointer")}),M.on("mouseleave",()=>{a.current&&(a.current.style.cursor="grab")}),S.addLayer(M),c.current&&S.removePopup(c.current);const D=r&&T.length>=i?[{field:"point_count",formatField:N=>(N?.point_count||0)===1?"事件标题":"事件数量",formatValue:(N,j)=>N===1?j?.title||"单个事件（放大查看详情）":`${N} 个事件`},{field:"point_count",formatField:N=>(N?.point_count||0)===1?"情感倾向":"聚合类型",formatValue:(N,j)=>{if(N===1){const re=j?.sentiment;return new Map([["positive","正面"],["negative","负面"],["neutral","中性"]]).get(re)||"未知"}return N<=3?"小型聚合":N<=6?"中型聚合":N<=10?"大型聚合":"超大聚合"}},{field:"point_count",formatField:()=>"区域概览",formatValue:N=>{const j=T.length;return`包含该区域${(N/j*100).toFixed(1)}%的事件`}},{field:"point_count",formatField:()=>"操作提示",formatValue:N=>N===1?"放大地图查看完整事件详情":`放大地图查看${N}个具体事件`}]:[{field:"title",formatField:()=>"标题"},{field:"sentiment",formatField:()=>"情感",formatValue:N=>new Map([["positive","正面"],["negative","负面"],["neutral","中性"]]).get(N)||"未知"},{field:"content",formatField:()=>"内容",formatValue:N=>N&&N.length>50?N.substring(0,50)+"...":N||"暂无内容"},{field:"source",formatField:()=>"来源"},{field:"address",formatField:()=>"地址"},{field:"hotness",formatField:()=>"热度"},{field:"timestamp",formatField:()=>"时间"}],I=new nme({items:[{layer:M,fields:D}]});if(c.current=I,S.addPopup(I),r&&T.length>=i&&o.current){const N=new kg({name:"cluster-text"}).source(C,{parser:{type:"json",x:"lng",y:"lat"},cluster:!0,clusterOptions:{field:"point_count",method:"sum",radius:n,minZoom:0,maxZoom:20}}).shape("point_count","text").size(14).color("#ffffff").style({opacity:1,strokeWidth:1,stroke:"#333333",fontFamily:"Arial, sans-serif",fontWeight:"bold"});o.current.addLayer(N)}return()=>{}},[g,f,r,n,i,_,E]),Cn.jsxs("div",{className:Tr("relative w-full h-full bg-gradient-to-br from-blue-50 to-gray-100",t),children:[Cn.jsx("div",{ref:a,className:"w-full h-full cursor-grab active:cursor-grabbing"}),p&&Cn.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gradient-to-br from-blue-50/90 to-gray-100/90 backdrop-blur-sm",children:[Cn.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full mb-3"}),Cn.jsx("div",{className:"text-sm text-gray-700 font-medium",children:"地图加载中..."}),Cn.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"正在初始化地理数据"})]}),f&&g.validEvents.length>0&&Cn.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur-sm rounded-lg px-3 py-2 shadow-lg",children:Cn.jsxs("div",{className:"text-xs text-gray-600",children:["事件总数:"," ",Cn.jsx("span",{className:"font-semibold text-blue-600",children:g.validEvents.length}),r&&Cn.jsx("span",{className:"ml-2",children:"聚合已启用"})]})}),f&&!r&&Cn.jsxs("div",{className:"absolute bottom-4 left-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-lg",children:[Cn.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:"情感分析"}),Cn.jsxs("div",{className:"space-y-1",children:[Cn.jsxs("div",{className:"flex items-center text-xs",children:[Cn.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 mr-2"}),Cn.jsx("span",{children:"正面"})]}),Cn.jsxs("div",{className:"flex items-center text-xs",children:[Cn.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 mr-2"}),Cn.jsx("span",{children:"负面"})]}),Cn.jsxs("div",{className:"flex items-center text-xs",children:[Cn.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mr-2"}),Cn.jsx("span",{children:"中性"})]})]})]}),f&&g.validEvents.length===0&&Cn.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Cn.jsxs("div",{className:"text-center text-gray-500",children:[Cn.jsx("div",{className:"text-lg mb-2",children:"📍"}),Cn.jsx("div",{className:"text-sm",children:"暂无有效的地理数据"})]})})]})}const Z0e=[{id:"1",title:"北京新技术发布会获得热烈反响",content:"某科技公司在北京举办的新产品发布会获得业界广泛关注，用户反馈积极",sentiment:"positive",score:.85,location:{lat:39.9042,lng:116.4074},address:"北京市朝阳区",source:"科技日报",timestamp:"2024-01-24 14:30",hotness:8,tags:["科技","产品发布","创新"]},{id:"2",title:"上海某服务平台系统故障影响用户体验",content:"上海一家互联网公司的服务平台出现技术故障，导致部分用户无法正常使用",sentiment:"negative",score:-.72,location:{lat:31.2304,lng:121.4737},address:"上海市浦东新区",source:"澎湃新闻",timestamp:"2024-01-24 13:45",hotness:6,tags:["故障","用户体验","技术"]},{id:"3",title:"深圳智能制造展览会开幕",content:"第十五届深圳国际智能制造展览会正式开幕，展示最新工业4.0技术",sentiment:"neutral",score:.15,location:{lat:22.3193,lng:114.1694},address:"深圳市福田区",source:"深圳特区报",timestamp:"2024-01-24 12:00",hotness:5,tags:["展览会","智能制造","工业4.0"]},{id:"4",title:"广州美食节引发全民热议",content:"广州国际美食节吸引众多市民和游客参与，社交媒体上好评如潮",sentiment:"positive",score:.78,location:{lat:23.1291,lng:113.2644},address:"广州市天河区",source:"南方日报",timestamp:"2024-01-24 11:30",hotness:7,tags:["美食节","文化","旅游"]},{id:"5",title:"杭州网约车价格调整引发争议",content:"杭州多家网约车平台宣布价格调整，用户对此反应不一",sentiment:"negative",score:-.45,location:{lat:30.2741,lng:120.1551},address:"杭州市西湖区",source:"钱江晚报",timestamp:"2024-01-24 10:15",hotness:4,tags:["网约车","价格","争议"]},{id:"6",title:"成都文创产业园区项目启动",content:"成都高新区文创产业园区正式启动，将打造西南地区文创产业新高地",sentiment:"positive",score:.62,location:{lat:30.5728,lng:104.0668},address:"成都市高新区",source:"成都商报",timestamp:"2024-01-24 09:45",hotness:6,tags:["文创","产业园","高新区"]},{id:"7",title:"西安地铁新线路建设进展",content:"西安地铁新线路建设项目取得重要进展，预计明年通车",sentiment:"neutral",score:.25,location:{lat:34.3416,lng:108.9398},address:"西安市雁塔区",source:"西安晚报",timestamp:"2024-01-24 08:30",hotness:3,tags:["地铁","交通","建设"]},{id:"8",title:"武汉大学樱花节筹备工作启动",content:"武汉大学2024年樱花节筹备工作正式启动，预计将吸引大量游客",sentiment:"positive",score:.55,location:{lat:30.5928,lng:114.3055},address:"武汉市武昌区",source:"长江日报",timestamp:"2024-01-24 07:20",hotness:5,tags:["樱花节","旅游","大学"]},{id:"9",title:"南京新能源汽车产业发展迅速",content:"南京新能源汽车产业园新增多家企业入驻，产业集群效应显现",sentiment:"positive",score:.68,location:{lat:32.0603,lng:118.7969},address:"南京市江宁区",source:"新华日报",timestamp:"2024-01-24 16:45",hotness:7,tags:["新能源","汽车","产业园"]},{id:"10",title:"青岛啤酒节门票预售火爆",content:"2024青岛国际啤酒节门票开启预售，首日销量破万，引发网友热议",sentiment:"positive",score:.72,location:{lat:36.0986,lng:120.3719},address:"青岛市市南区",source:"青岛日报",timestamp:"2024-01-24 15:30",hotness:8,tags:["啤酒节","旅游","文化"]},{id:"11",title:"重庆火锅店食品安全问题曝光",content:"重庆某知名火锅连锁店被曝光存在食品安全隐患，相关部门已介入调查",sentiment:"negative",score:-.85,location:{lat:29.563,lng:106.5516},address:"重庆市渝中区",source:"重庆晨报",timestamp:"2024-01-24 18:20",hotness:9,tags:["食品安全","火锅","调查"]},{id:"12",title:"天津港智能化改造项目完成",content:"天津港智能化改造项目顺利完成，港口作业效率大幅提升",sentiment:"positive",score:.76,location:{lat:39.1042,lng:117.2},address:"天津市滨海新区",source:"天津日报",timestamp:"2024-01-24 14:10",hotness:6,tags:["智能化","港口","改造"]},{id:"13",title:"沈阳地铁票价调整听证会举行",content:"沈阳地铁票价调整听证会在市政府举行，市民代表积极参与讨论",sentiment:"neutral",score:-.15,location:{lat:41.8057,lng:123.4315},address:"沈阳市沈河区",source:"沈阳晚报",timestamp:"2024-01-24 10:30",hotness:4,tags:["地铁","票价","听证会"]},{id:"14",title:"厦门马拉松报名系统崩溃",content:"厦门国际马拉松报名系统因访问量过大出现崩溃，组委会正在紧急修复",sentiment:"negative",score:-.58,location:{lat:24.4798,lng:118.0819},address:"厦门市思明区",source:"厦门日报",timestamp:"2024-01-24 12:45",hotness:6,tags:["马拉松","系统崩溃","报名"]},{id:"15",title:"大连樱花盛开吸引游客",content:"大连旅顺口区樱花进入盛开期，吸引众多游客前来观赏拍照",sentiment:"positive",score:.64,location:{lat:38.914,lng:121.6147},address:"大连市旅顺口区",source:"大连日报",timestamp:"2024-01-24 09:15",hotness:5,tags:["樱花","旅游","观光"]},{id:"16",title:"长沙网红餐厅排队现象调查",content:"长沙多家网红餐厅出现长时间排队现象，引发对消费理性的讨论",sentiment:"neutral",score:.08,location:{lat:28.2282,lng:112.9388},address:"长沙市岳麓区",source:"湖南日报",timestamp:"2024-01-24 19:00",hotness:3,tags:["网红餐厅","排队","消费"]},{id:"17",title:"哈尔滨冰雪大世界游客爆满",content:"哈尔滨冰雪大世界迎来客流高峰，园区采取限流措施确保游客安全",sentiment:"positive",score:.58,location:{lat:45.8038,lng:126.5349},address:"哈尔滨市松北区",source:"哈尔滨日报",timestamp:"2024-01-24 11:00",hotness:7,tags:["冰雪","旅游","限流"]},{id:"18",title:"福州地铁建设工程进度滞后",content:"福州地铁6号线建设进度出现滞后，相关部门表示将加快推进",sentiment:"negative",score:-.42,location:{lat:26.0745,lng:119.2965},address:"福州市鼓楼区",source:"福州晚报",timestamp:"2024-01-24 13:20",hotness:4,tags:["地铁","建设","滞后"]},{id:"19",title:"昆明花市春节销售旺盛",content:"昆明斗南花市春节期间销售火爆，鲜花价格较去年同期上涨",sentiment:"neutral",score:.22,location:{lat:25.0389,lng:102.7183},address:"昆明市呈贡区",source:"昆明日报",timestamp:"2024-01-24 08:45",hotness:5,tags:["花市","春节","销售"]},{id:"20",title:"太原古建筑保护项目获赞",content:"太原市古建筑保护修复项目取得显著成效，获得文物专家一致好评",sentiment:"positive",score:.71,location:{lat:37.8706,lng:112.5489},address:"太原市迎泽区",source:"太原晚报",timestamp:"2024-01-24 16:30",hotness:6,tags:["古建筑","保护","修复"]},{id:"21",title:"石家庄空气质量持续改善",content:"石家庄市空气质量指数连续一周保持优良，环保治理成效显著",sentiment:"positive",score:.69,location:{lat:38.0428,lng:114.5149},address:"石家庄市长安区",source:"河北日报",timestamp:"2024-01-24 07:45",hotness:5,tags:["空气质量","环保","改善"]},{id:"22",title:"兰州拉面文化节筹备中",content:"第三届兰州国际拉面文化节筹备工作全面启动，将展示丰富面食文化",sentiment:"positive",score:.53,location:{lat:36.0611,lng:103.8343},address:"兰州市城关区",source:"兰州晚报",timestamp:"2024-01-24 14:50",hotness:4,tags:["拉面","文化节","美食"]},{id:"23",title:"银川共享单车投放过度问题",content:"银川市部分区域共享单车投放过度，影响市容市貌，管理部门将加强监管",sentiment:"negative",score:-.38,location:{lat:38.4872,lng:106.2309},address:"银川市兴庆区",source:"宁夏日报",timestamp:"2024-01-24 15:10",hotness:3,tags:["共享单车","投放","监管"]},{id:"24",title:"呼和浩特草原音乐节确定举办",content:"2024呼和浩特草原音乐节确定于夏季举办，多位知名音乐人确认参演",sentiment:"positive",score:.66,location:{lat:40.8414,lng:111.7519},address:"呼和浩特市新城区",source:"内蒙古日报",timestamp:"2024-01-24 17:25",hotness:6,tags:["音乐节","草原","演出"]},{id:"25",title:"拉萨旅游业复苏态势良好",content:"拉萨旅游业呈现强劲复苏态势，酒店入住率和景区游客量大幅增长",sentiment:"positive",score:.74,location:{lat:29.652,lng:91.1721},address:"拉萨市城关区",source:"西藏日报",timestamp:"2024-01-24 12:30",hotness:7,tags:["旅游","复苏","增长"]},{id:"26",title:"乌鲁木齐国际大巴扎夜市开启",content:"乌鲁木齐国际大巴扎夜市正式开启夏季模式，各种特色美食吸引游客",sentiment:"positive",score:.61,location:{lat:43.8256,lng:87.6168},address:"乌鲁木齐市天山区",source:"新疆日报",timestamp:"2024-01-24 20:30",hotness:6,tags:["夜市","美食","旅游"]},{id:"27",title:"海口免税店销售额创新高",content:"海口免税店单日销售额突破历史纪录，国际品牌受到消费者热捧",sentiment:"positive",score:.78,location:{lat:20.0444,lng:110.1989},address:"海口市美兰区",source:"海南日报",timestamp:"2024-01-24 18:45",hotness:8,tags:["免税店","销售","消费"]},{id:"28",title:"合肥科技创新园区扩建项目启动",content:"合肥高新区科技创新园区扩建项目正式启动，将引入更多高科技企业",sentiment:"positive",score:.65,location:{lat:31.8206,lng:117.2272},address:"合肥市高新区",source:"安徽日报",timestamp:"2024-01-24 09:20",hotness:5,tags:["科技园","扩建","高新区"]},{id:"29",title:"南昌地铁4号线试运行延期",content:"南昌地铁4号线因技术调试问题，试运行时间推迟至下月",sentiment:"negative",score:-.52,location:{lat:28.6844,lng:115.8579},address:"南昌市东湖区",source:"江西日报",timestamp:"2024-01-24 11:40",hotness:4,tags:["地铁","延期","试运行"]},{id:"30",title:"贵阳数博会筹备工作全面启动",content:"2024贵阳数博会筹备工作全面启动，预计将有更多国际参展商参与",sentiment:"positive",score:.67,location:{lat:26.647,lng:106.6302},address:"贵阳市南明区",source:"贵州日报",timestamp:"2024-01-24 14:15",hotness:6,tags:["数博会","筹备","国际"]},{id:"31",title:"济南黄河大桥维修施工开始",content:"济南黄河大桥进入年度维修期，施工期间将实施交通管制",sentiment:"neutral",score:-.08,location:{lat:36.6512,lng:117.1201},address:"济南市历下区",source:"齐鲁晚报",timestamp:"2024-01-24 08:00",hotness:3,tags:["大桥","维修","交通管制"]},{id:"32",title:"郑州航空港区物流业务激增",content:"郑州航空港区物流业务量同比增长35%，成为中部物流枢纽",sentiment:"positive",score:.72,location:{lat:34.7466,lng:113.6254},address:"郑州市航空港区",source:"河南日报",timestamp:"2024-01-24 16:20",hotness:7,tags:["航空港","物流","增长"]},{id:"33",title:"南宁东盟博览会场馆升级改造",content:"南宁东盟博览会场馆启动智能化升级改造，提升国际展览水平",sentiment:"positive",score:.59,location:{lat:22.817,lng:108.3669},address:"南宁市青秀区",source:"广西日报",timestamp:"2024-01-24 13:50",hotness:5,tags:["博览会","升级","智能化"]},{id:"34",title:"包头稀土产业园环保整改",content:"包头稀土产业园区因环保问题被要求整改，部分企业暂停生产",sentiment:"negative",score:-.63,location:{lat:40.6574,lng:109.8403},address:"包头市昆都仑区",source:"内蒙古晨报",timestamp:"2024-01-24 15:30",hotness:6,tags:["稀土","环保","整改"]},{id:"35",title:"温州小商品市场数字化转型",content:"温州小商品市场启动数字化转型，线上线下融合发展模式初见成效",sentiment:"positive",score:.56,location:{lat:28.0181,lng:120.6528},address:"温州市鹿城区",source:"温州日报",timestamp:"2024-01-24 10:25",hotness:4,tags:["小商品","数字化","转型"]},{id:"36",title:"东莞制造业智能化升级提速",content:"东莞制造业企业加快智能化升级步伐，工业机器人使用率大幅提升",sentiment:"positive",score:.7,location:{lat:23.0489,lng:113.7447},address:"东莞市南城区",source:"南方都市报",timestamp:"2024-01-24 17:10",hotness:6,tags:["制造业","智能化","机器人"]},{id:"37",title:"无锡太湖治理成效显著",content:"无锡太湖水质治理项目取得显著成效，湖水透明度明显提升",sentiment:"positive",score:.75,location:{lat:31.4912,lng:120.3114},address:"无锡市滨湖区",source:"无锡日报",timestamp:"2024-01-24 12:00",hotness:7,tags:["太湖","治理","水质"]},{id:"38",title:"佛山陶瓷展销会延期举办",content:"原定本月举办的佛山国际陶瓷展销会因场地问题延期至下月",sentiment:"negative",score:-.35,location:{lat:23.035,lng:113.1244},address:"佛山市禅城区",source:"佛山日报",timestamp:"2024-01-24 09:45",hotness:3,tags:["陶瓷","展销会","延期"]},{id:"39",title:"珠海港口货运量持续增长",content:"珠海港口1月份货运量同比增长28%，集装箱吞吐量创历史新高",sentiment:"positive",score:.68,location:{lat:22.2711,lng:113.5767},address:"珠海市香洲区",source:"珠海特区报",timestamp:"2024-01-24 14:40",hotness:5,tags:["港口","货运","增长"]},{id:"40",title:"中山灯饰产业转型升级",content:"中山古镇灯饰产业积极拥抱智能家居趋势，产品附加值显著提升",sentiment:"positive",score:.63,location:{lat:22.5211,lng:113.3924},address:"中山市古镇镇",source:"中山日报",timestamp:"2024-01-24 11:15",hotness:4,tags:["灯饰","转型","智能家居"]},{id:"41",title:"常州新能源汽车产业集群发展",content:"常州新能源汽车产业集群效应凸显，多家龙头企业宣布扩产计划",sentiment:"positive",score:.71,location:{lat:31.7976,lng:119.9462},address:"常州市武进区",source:"常州晚报",timestamp:"2024-01-24 16:50",hotness:6,tags:["新能源汽车","产业集群","扩产"]},{id:"42",title:"嘉兴乌镇互联网大会筹备启动",content:"第十一届世界互联网大会·乌镇峰会筹备工作正式启动",sentiment:"positive",score:.64,location:{lat:30.7467,lng:120.755},address:"嘉兴市桐乡市",source:"嘉兴日报",timestamp:"2024-01-24 13:25",hotness:7,tags:["互联网大会","乌镇","筹备"]},{id:"43",title:"绍兴纺织产业数字化改革",content:"绍兴纺织产业深入推进数字化改革，传统产业焕发新活力",sentiment:"positive",score:.58,location:{lat:30.0023,lng:120.581},address:"绍兴市越城区",source:"绍兴日报",timestamp:"2024-01-24 08:30",hotness:4,tags:["纺织","数字化","改革"]},{id:"44",title:"金华义乌小商品城交易额攀升",content:"义乌国际商贸城月交易额突破新纪录，外贸订单显著增加",sentiment:"positive",score:.73,location:{lat:29.3071,lng:120.0758},address:"金华市义乌市",source:"金华日报",timestamp:"2024-01-24 19:20",hotness:8,tags:["小商品城","交易额","外贸"]},{id:"45",title:"台州医药制造业创新发展",content:"台州医药制造业加大研发投入，多项创新药物进入临床试验阶段",sentiment:"positive",score:.66,location:{lat:28.6129,lng:121.4204},address:"台州市椒江区",source:"台州日报",timestamp:"2024-01-24 15:00",hotness:5,tags:["医药","创新","研发"]}];/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),K9=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q0e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0e=U.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:o,...l},c)=>U.createElement("svg",{ref:c,...Q0e,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:K9("lucide",i),...l},[...o.map(([f,h])=>U.createElement(f,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=(e,t)=>{const r=U.forwardRef(({className:n,...i},a)=>U.createElement(J0e,{ref:a,iconNode:t,className:K9(`lucide-${K0e(e)}`,n),...i}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_e=ws("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_e=ws("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=ws("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_e=ws("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=ws("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_e=ws("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=ws("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=ws("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=ws("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=ws("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=ws("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function i_e(){return A.jsxs("div",{className:"flex h-screen bg-background",children:[A.jsx("div",{className:"hidden lg:block w-80 bg-card border-r border-border overflow-y-auto shadow-lg",children:A.jsxs("div",{className:"p-4 space-y-4",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"监控数据"}),A.jsx(hd,{status:"online"})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsx(Gn,{variant:"primary",size:"sm",children:A.jsxs(co,{variant:"primary",size:"sm",children:[A.jsx(ca,{children:"总监控数据"}),A.jsx(Yi,{variant:"primary",size:"sm",children:"2,847"}),A.jsx(Zi,{trend:"up",value:"+12.5%",icon:A.jsx("span",{children:"↗"})})]})}),A.jsx(Gn,{variant:"success",size:"sm",children:A.jsxs(co,{variant:"success",size:"sm",children:[A.jsx(ca,{children:"正面情感"}),A.jsx(Yi,{variant:"success",size:"sm",children:"1,634"}),A.jsx(Zi,{trend:"up",value:"+8.3%",icon:A.jsx("span",{children:"↗"})})]})}),A.jsx(Gn,{variant:"danger",size:"sm",children:A.jsxs(co,{variant:"danger",size:"sm",children:[A.jsx(ca,{children:"负面情感"}),A.jsx(Yi,{variant:"danger",size:"sm",children:"321"}),A.jsx(Zi,{trend:"down",value:"-5.7%",icon:A.jsx("span",{children:"↘"})})]})})]}),A.jsx(Gn,{size:"sm",children:A.jsxs("div",{className:"space-y-3",children:[A.jsxs("h3",{className:"text-sm font-semibold flex items-center",children:[A.jsx(ru,{status:"online"}),"系统状态"]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[A.jsx("span",{children:"数据采集"}),A.jsx("span",{children:"98.5%"})]}),A.jsx(ou,{value:98.5,variant:"success",size:"sm"})]}),A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[A.jsx("span",{children:"情感分析"}),A.jsx("span",{children:"87.2%"})]}),A.jsx(ou,{value:87.2,variant:"warning",size:"sm"})]}),A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[A.jsx("span",{children:"实时推送"}),A.jsx("span",{children:"96.8%"})]}),A.jsx(ou,{value:96.8,variant:"primary",size:"sm"})]})]})]})})]})}),A.jsxs("div",{className:"flex-1 relative",children:[A.jsxs("div",{className:"absolute top-4 left-4 right-4 z-10 flex justify-between items-center",children:[A.jsx(ko,{to:"/",children:A.jsxs($n,{variant:"outline",className:"bg-card/90 backdrop-blur-sm border-border",children:[A.jsx(Q9,{className:"w-4 h-4 mr-2"}),"返回首页"]})}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx(ko,{to:"/dashboard-view",children:A.jsxs($n,{variant:"outline",className:"bg-card/90 backdrop-blur-sm border-border",children:[A.jsx(t_e,{className:"w-4 h-4 mr-2"}),"数据大屏"]})}),A.jsx(ko,{to:"/sentiment-intensity",children:A.jsxs($n,{variant:"outline",className:"bg-card/90 backdrop-blur-sm border-border",children:[A.jsx(J9,{className:"w-4 h-4 mr-2"}),"情感强度管理"]})})]})]}),A.jsx("div",{className:"h-full",children:A.jsx(Y0e,{events:Z0e,enableCluster:!0,clusterRadius:80,minClusterSize:2})})]})]})}const a_e=U.forwardRef((e,t)=>A.jsx(Gn,{ref:t,...e}));a_e.displayName="DashboardCard";const o_e=U.forwardRef(({title:e,value:t,trend:r,trendValue:n,icon:i,valueVariant:a="primary",className:o,...l},c)=>{const f=()=>{switch(r){case"up":return"↗";case"down":return"↘";case"neutral":default:return"→"}};return A.jsxs(co,{ref:c,className:o,...l,children:[A.jsxs("div",{className:"flex items-center justify-center mb-3",children:[i&&A.jsx("span",{className:"mr-2 text-muted-foreground",children:i}),A.jsx(ca,{children:e})]}),A.jsx(Yi,{variant:a,children:t}),r&&n&&A.jsx(Zi,{trend:r,value:n,icon:A.jsx("span",{children:f()})})]})});o_e.displayName="MetricCard";function s_e(){const[e,t]=U.useState(mg.metrics),[r,n]=U.useState(mg.systemStatus),[i,a]=U.useState(mg.sentimentIntensity),[o,l]=U.useState(!1);return U.useEffect(()=>{const c=setInterval(()=>{l(!0),setTimeout(()=>{t(C3()),n(O3()),a(A7()),l(!1)},500)},1e4);return()=>clearInterval(c)},[]),A.jsxs("div",{className:"min-h-screen bg-background p-6 space-y-6",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent mb-2",children:"舆情分析监控大屏"}),A.jsx("p",{className:"text-muted-foreground text-lg",children:"基于 Tailwind CSS 组件系统 · 实时数据监控"}),A.jsx(hd,{status:o?"warning":"online",className:"mt-4",children:o?"更新中...":"LIVE"})]}),A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6 mb-8",children:[A.jsx(Gn,{variant:"primary",highlighted:!0,children:A.jsxs(co,{variant:"primary",children:[A.jsx("div",{className:"flex items-center justify-center mb-3",children:A.jsx(ca,{children:"总监控数据"})}),A.jsx(Yi,{variant:"primary",children:e.totalData.toLocaleString()}),A.jsx(Zi,{trend:"up",value:e.trends.total,icon:A.jsx("span",{children:"↗"})})]})}),A.jsx(Gn,{variant:"success",children:A.jsxs(co,{variant:"success",children:[A.jsx("div",{className:"flex items-center justify-center mb-3",children:A.jsx(ca,{children:"正面情感"})}),A.jsx(Yi,{variant:"success",children:e.positiveCount.toLocaleString()}),A.jsx(Zi,{trend:"up",value:e.trends.positive,icon:A.jsx("span",{children:"↗"})})]})}),A.jsx(Gn,{variant:"warning",children:A.jsxs(co,{variant:"warning",children:[A.jsx("div",{className:"flex items-center justify-center mb-3",children:A.jsx(ca,{children:"中性情感"})}),A.jsx(Yi,{variant:"warning",children:e.neutralCount.toLocaleString()}),A.jsx(Zi,{trend:"neutral",value:e.trends.neutral,icon:A.jsx("span",{children:"→"})})]})}),A.jsx(Gn,{variant:"danger",children:A.jsxs(co,{variant:"danger",children:[A.jsx("div",{className:"flex items-center justify-center mb-3",children:A.jsx(ca,{children:"负面情感"})}),A.jsx(Yi,{variant:"danger",children:e.negativeCount.toLocaleString()}),A.jsx(Zi,{trend:"down",value:e.trends.negative,icon:A.jsx("span",{children:"↘"})})]})})]}),A.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 lg:gap-6",children:[A.jsx(Gn,{size:"lg",children:A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h3",{className:"text-lg font-semibold",children:"情感强度分布"}),A.jsx(ru,{status:"online",pulse:!0})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx(Jh,{sentiment:"very-positive",children:"极正面"}),A.jsx(ep,{value:i.veryPositive,intensity:"very-positive",className:"flex-1 mx-4"}),A.jsxs("span",{className:"text-sm font-medium",children:[Math.round(i.veryPositive*100),"%"]})]}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx(Jh,{sentiment:"positive",children:"正面"}),A.jsx(ep,{value:i.positive,intensity:"positive",className:"flex-1 mx-4"}),A.jsxs("span",{className:"text-sm font-medium",children:[Math.round(i.positive*100),"%"]})]}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx(Jh,{sentiment:"neutral",children:"中性"}),A.jsx(ep,{value:i.neutral,intensity:"neutral",className:"flex-1 mx-4"}),A.jsxs("span",{className:"text-sm font-medium",children:[Math.round(i.neutral*100),"%"]})]}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx(Jh,{sentiment:"negative",children:"负面"}),A.jsx(ep,{value:i.negative,intensity:"negative",className:"flex-1 mx-4"}),A.jsxs("span",{className:"text-sm font-medium",children:[Math.round(i.negative*100),"%"]})]}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx(Jh,{sentiment:"very-negative",children:"极负面"}),A.jsx(ep,{value:i.veryNegative,intensity:"very-negative",className:"flex-1 mx-4"}),A.jsxs("span",{className:"text-sm font-medium",children:[Math.round(i.veryNegative*100),"%"]})]})]})]})}),A.jsx(Gn,{size:"lg",children:A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h3",{className:"text-lg font-semibold",children:"系统状态"}),A.jsx(hd,{status:"online"})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("span",{className:"text-sm font-medium flex items-center",children:[A.jsx(ru,{status:r.dataCollection>95?"online":"warning"}),"数据采集服务"]}),A.jsxs("span",{className:"text-sm text-muted-foreground",children:[r.dataCollection,"%"]})]}),A.jsx(ou,{value:r.dataCollection,variant:r.dataCollection>95?"success":"warning"})]}),A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("span",{className:"text-sm font-medium flex items-center",children:[A.jsx(ru,{status:r.sentimentAnalysis>90?"online":"warning"}),"情感分析引擎"]}),A.jsxs("span",{className:"text-sm text-muted-foreground",children:[r.sentimentAnalysis,"%"]})]}),A.jsx(ou,{value:r.sentimentAnalysis,variant:r.sentimentAnalysis>90?"success":"warning"})]}),A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("span",{className:"text-sm font-medium flex items-center",children:[A.jsx(ru,{status:r.realTimePush>90?"online":"warning"}),"实时推送服务"]}),A.jsxs("span",{className:"text-sm text-muted-foreground",children:[r.realTimePush,"%"]})]}),A.jsx(ou,{value:r.realTimePush,variant:r.realTimePush>90?"primary":"warning"})]}),A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("span",{className:"text-sm font-medium flex items-center",children:[A.jsx(ru,{status:r.backupService>50?"online":"offline"}),"备份服务"]}),A.jsxs("span",{className:"text-sm text-muted-foreground",children:[r.backupService,"%"]})]}),A.jsx(ou,{value:r.backupService,variant:r.backupService>50?"primary":"danger",shine:r.backupService>0})]})]})]})})]}),A.jsx(Gn,{size:"lg",children:A.jsx(A3,{title:"热点话题词云",subtitle:"实时更新 · 数据来源：全网监控",children:A.jsxs(R3,{children:[A.jsx(Fa,{variant:"primary",shine:!0,children:"人工智能"}),A.jsx(Fa,{variant:"primary",shine:!0,children:"科技创新"}),A.jsx(Fa,{variant:"secondary",shine:!0,children:"数字化转型"}),A.jsx(Fa,{variant:"primary",shine:!0,children:"智能制造"}),A.jsx(Fa,{variant:"secondary",shine:!0,children:"云计算"}),A.jsx(Fa,{variant:"primary",shine:!0,children:"大数据"}),A.jsx(Fa,{variant:"secondary",shine:!0,children:"区块链"}),A.jsx(Fa,{variant:"primary",shine:!0,children:"5G技术"}),A.jsx(Fa,{variant:"secondary",shine:!0,children:"物联网"}),A.jsx(Fa,{variant:"primary",shine:!0,children:"机器学习"}),A.jsx(Fa,{variant:"secondary",shine:!0,children:"深度学习"}),A.jsx(Fa,{variant:"primary",shine:!0,children:"量子计算"})]})})}),A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[A.jsx(Gn,{children:A.jsxs("div",{className:"text-center",children:[A.jsx(Yi,{variant:"primary",size:"sm",children:"+15.2%"}),A.jsx(ca,{children:"数据增长率"}),A.jsx(Zi,{trend:"up",value:"持续上升",icon:"📈",className:"mt-2"})]})}),A.jsx(Gn,{children:A.jsxs("div",{className:"text-center",children:[A.jsx(Yi,{variant:"success",size:"sm",children:"92.6%"}),A.jsx(ca,{children:"服务可用性"}),A.jsx(Zi,{trend:"up",value:"稳定运行",icon:"✅",className:"mt-2"})]})}),A.jsx(Gn,{children:A.jsxs("div",{className:"text-center",children:[A.jsx(Yi,{variant:"warning",size:"sm",children:"2.8s"}),A.jsx(ca,{children:"平均响应时间"}),A.jsx(Zi,{trend:"neutral",value:"正常范围",icon:"⏱",className:"mt-2"})]})})]})]})}function l_e(){return A.jsxs("div",{className:"min-h-screen bg-background",children:[A.jsxs("div",{className:"absolute top-4 left-4 right-4 z-50 flex justify-between items-center",children:[A.jsx(ko,{to:"/",children:A.jsxs($n,{variant:"outline",className:"bg-card/90 backdrop-blur-sm border-border",children:[A.jsx(Q9,{className:"w-4 h-4 mr-2"}),"返回首页"]})}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx(ko,{to:"/sentiment-intensity",children:A.jsxs($n,{variant:"outline",className:"bg-card/90 backdrop-blur-sm border-border",children:[A.jsx(J9,{className:"w-4 h-4 mr-2"}),"情感强度管理"]})}),A.jsx(ko,{to:"/dashboard",children:A.jsx($n,{variant:"outline",className:"bg-card/90 backdrop-blur-sm border-border",children:"🗺️ 地图视图"})})]})]}),A.jsx("div",{className:"pt-16",children:A.jsx(s_e,{})})]})}var o0=e=>e.type==="checkbox",Qf=e=>e instanceof Date,Ca=e=>e==null;const nz=e=>typeof e=="object";var bi=e=>!Ca(e)&&!Array.isArray(e)&&nz(e)&&!Qf(e),u_e=e=>bi(e)&&e.target?o0(e.target)?e.target.checked:e.target.value:e,c_e=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,f_e=(e,t)=>e.has(c_e(t)),d_e=e=>{const t=e.constructor&&e.constructor.prototype;return bi(t)&&t.hasOwnProperty("isPrototypeOf")},CO=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function zi(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(CO&&(e instanceof Blob||n))&&(r||bi(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!d_e(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=zi(e[i]));else return e;return t}var NE=e=>/^\w*$/.test(e),_i=e=>e===void 0,OO=e=>Array.isArray(e)?e.filter(Boolean):[],wO=e=>OO(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Jt=(e,t,r)=>{if(!t||!bi(e))return r;const n=(NE(t)?[t]:wO(t)).reduce((i,a)=>Ca(i)?i:i[a],e);return _i(n)||n===e?_i(e[t])?r:e[t]:n},rl=e=>typeof e=="boolean",bn=(e,t,r)=>{let n=-1;const i=NE(t)?[t]:wO(t),a=i.length,o=a-1;for(;++n<a;){const l=i[n];let c=r;if(n!==o){const f=e[l];c=bi(f)||Array.isArray(f)?f:isNaN(+i[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const TF={BLUR:"blur",FOCUS_OUT:"focusout"},gs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Jl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},h_e=cn.createContext(null);h_e.displayName="HookFormContext";var p_e=(e,t,r,n=!0)=>{const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const o=a;return t._proxyFormState[o]!==gs.all&&(t._proxyFormState[o]=!n||gs.all),e[o]}});return i};const m_e=typeof window<"u"?cn.useLayoutEffect:cn.useEffect;var uo=e=>typeof e=="string",v_e=(e,t,r,n,i)=>uo(e)?(n&&t.watch.add(e),Jt(r,e,i)):Array.isArray(e)?e.map(a=>(n&&t.watch.add(a),Jt(r,a))):(n&&(t.watchAll=!0),r),yC=e=>Ca(e)||!nz(e);function Oc(e,t,r=new WeakSet){if(yC(e)||yC(t))return e===t;if(Qf(e)&&Qf(t))return e.getTime()===t.getTime();const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const a of n){const o=e[a];if(!i.includes(a))return!1;if(a!=="ref"){const l=t[a];if(Qf(o)&&Qf(l)||bi(o)&&bi(l)||Array.isArray(o)&&Array.isArray(l)?!Oc(o,l,r):o!==l)return!1}}return!0}var iz=(e,t,r,n,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:i||!0}}:{},bg=e=>Array.isArray(e)?e:[e],AF=()=>{let e=[];return{get observers(){return e},next:i=>{for(const a of e)a.next&&a.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(a=>a!==i)}}),unsubscribe:()=>{e=[]}}};function az(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const i=e[n],a=t[n];if(i&&bi(i)&&a){const o=az(i,a);bi(o)&&(r[n]=o)}else e[n]&&(r[n]=a)}return r}var ka=e=>bi(e)&&!Object.keys(e).length,NO=e=>e.type==="file",_s=e=>typeof e=="function",k1=e=>{if(!CO)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},oz=e=>e.type==="select-multiple",MO=e=>e.type==="radio",g_e=e=>MO(e)||o0(e),ZR=e=>k1(e)&&e.isConnected;function __e(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=_i(e)?n++:e[t[n++]];return e}function y_e(e){for(const t in e)if(e.hasOwnProperty(t)&&!_i(e[t]))return!1;return!0}function pi(e,t){const r=Array.isArray(t)?t:NE(t)?[t]:wO(t),n=r.length===1?e:__e(e,r),i=r.length-1,a=r[i];return n&&delete n[a],i!==0&&(bi(n)&&ka(n)||Array.isArray(n)&&y_e(n))&&pi(e,r.slice(0,-1)),e}var E_e=e=>{for(const t in e)if(_s(e[t]))return!0;return!1};function sz(e){return Array.isArray(e)||bi(e)&&!E_e(e)}function EC(e,t={}){for(const r in e)sz(e[r])?(t[r]=Array.isArray(e[r])?[]:{},EC(e[r],t[r])):Ca(e[r])||(t[r]=!0);return t}function np(e,t,r){r||(r=EC(t));for(const n in e)sz(e[n])?_i(t)||yC(r[n])?r[n]=EC(e[n],Array.isArray(e[n])?[]:{}):np(e[n],Ca(t)?{}:t[n],r[n]):r[n]=!Oc(e[n],t[n]);return r}const RF={value:!1,isValid:!1},CF={value:!0,isValid:!0};var lz=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!_i(e[0].attributes.value)?_i(e[0].value)||e[0].value===""?CF:{value:e[0].value,isValid:!0}:CF:RF}return RF},uz=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>_i(e)?e:t?e===""?NaN:e&&+e:r&&uo(e)?new Date(e):n?n(e):e;const OF={isValid:!1,value:null};var cz=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,OF):OF;function wF(e){const t=e.ref;return NO(t)?t.files:MO(t)?cz(e.refs).value:oz(t)?[...t.selectedOptions].map(({value:r})=>r):o0(t)?lz(e.refs).value:uz(_i(t.value)?e.ref.value:t.value,e)}var b_e=(e,t,r,n)=>{const i={};for(const a of e){const o=Jt(t,a);o&&bn(i,a,o._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},j1=e=>e instanceof RegExp,Wv=e=>_i(e)?e:j1(e)?e.source:bi(e)?j1(e.value)?e.value.source:e.value:e,NF=e=>({isOnSubmit:!e||e===gs.onSubmit,isOnBlur:e===gs.onBlur,isOnChange:e===gs.onChange,isOnAll:e===gs.all,isOnTouch:e===gs.onTouched});const MF="AsyncFunction";var x_e=e=>!!e&&!!e.validate&&!!(_s(e.validate)&&e.validate.constructor.name===MF||bi(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===MF)),S_e=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),IF=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const xg=(e,t,r,n)=>{for(const i of r||Object.keys(e)){const a=Jt(e,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(xg(l,t))break}else if(bi(l)&&xg(l,t))break}}};function PF(e,t,r){const n=Jt(e,r);if(n||NE(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const a=i.join("."),o=Jt(t,a),l=Jt(e,a);if(o&&!Array.isArray(o)&&r!==a)return{name:r};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};i.pop()}return{name:r}}var T_e=(e,t,r,n)=>{r(e);const{name:i,...a}=e;return ka(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!n||gs.all))},A_e=(e,t,r)=>!e||!t||e===t||bg(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),R_e=(e,t,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?n.isOnChange:i.isOnChange)?e:!0,C_e=(e,t)=>!OO(Jt(e,t)).length&&pi(e,t),O_e=(e,t,r)=>{const n=bg(Jt(e,r));return bn(n,"root",t[r]),bn(e,r,n),e};function DF(e,t,r="validate"){if(uo(e)||Array.isArray(e)&&e.every(uo)||rl(e)&&!e)return{type:r,message:uo(e)?e:"",ref:t}}var Zh=e=>bi(e)&&!j1(e)?e:{value:e,message:""},LF=async(e,t,r,n,i,a)=>{const{ref:o,refs:l,required:c,maxLength:f,minLength:h,min:p,max:v,pattern:g,validate:_,name:E,valueAsNumber:b,mount:S}=e._f,T=Jt(r,E);if(!S||t.has(E))return{};const C=l?l[0]:o,M=R=>{i&&C.reportValidity&&(C.setCustomValidity(rl(R)?"":R||""),C.reportValidity())},D={},I=MO(o),N=o0(o),j=I||N,re=(b||NO(o))&&_i(o.value)&&_i(T)||k1(o)&&o.value===""||T===""||Array.isArray(T)&&!T.length,Q=iz.bind(null,E,n,D),X=(R,P,V,le=Jl.maxLength,w=Jl.minLength)=>{const z=R?P:V;D[E]={type:R?le:w,message:z,ref:o,...Q(R?le:w,z)}};if(a?!Array.isArray(T)||!T.length:c&&(!j&&(re||Ca(T))||rl(T)&&!T||N&&!lz(l).isValid||I&&!cz(l).isValid)){const{value:R,message:P}=uo(c)?{value:!!c,message:c}:Zh(c);if(R&&(D[E]={type:Jl.required,message:P,ref:C,...Q(Jl.required,P)},!n))return M(P),D}if(!re&&(!Ca(p)||!Ca(v))){let R,P;const V=Zh(v),le=Zh(p);if(!Ca(T)&&!isNaN(T)){const w=o.valueAsNumber||T&&+T;Ca(V.value)||(R=w>V.value),Ca(le.value)||(P=w<le.value)}else{const w=o.valueAsDate||new Date(T),z=oe=>new Date(new Date().toDateString()+" "+oe),H=o.type=="time",ee=o.type=="week";uo(V.value)&&T&&(R=H?z(T)>z(V.value):ee?T>V.value:w>new Date(V.value)),uo(le.value)&&T&&(P=H?z(T)<z(le.value):ee?T<le.value:w<new Date(le.value))}if((R||P)&&(X(!!R,V.message,le.message,Jl.max,Jl.min),!n))return M(D[E].message),D}if((f||h)&&!re&&(uo(T)||a&&Array.isArray(T))){const R=Zh(f),P=Zh(h),V=!Ca(R.value)&&T.length>+R.value,le=!Ca(P.value)&&T.length<+P.value;if((V||le)&&(X(V,R.message,P.message),!n))return M(D[E].message),D}if(g&&!re&&uo(T)){const{value:R,message:P}=Zh(g);if(j1(R)&&!T.match(R)&&(D[E]={type:Jl.pattern,message:P,ref:o,...Q(Jl.pattern,P)},!n))return M(P),D}if(_){if(_s(_)){const R=await _(T,r),P=DF(R,C);if(P&&(D[E]={...P,...Q(Jl.validate,P.message)},!n))return M(P.message),D}else if(bi(_)){let R={};for(const P in _){if(!ka(R)&&!n)break;const V=DF(await _[P](T,r),C,P);V&&(R={...V,...Q(P,V.message)},M(V.message),n&&(D[E]=R))}if(!ka(R)&&(D[E]={ref:C,...R},!n))return D}}return M(!0),D};const w_e={mode:gs.onSubmit,reValidateMode:gs.onChange,shouldFocusError:!0};function N_e(e={}){let t={...w_e,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:_s(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},i=bi(t.defaultValues)||bi(t.values)?zi(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:zi(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,f=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...h};const v={array:AF(),state:AF()},g=t.criteriaMode===gs.all,_=ue=>xe=>{clearTimeout(f),f=setTimeout(ue,xe)},E=async ue=>{if(!t.disabled&&(h.isValid||p.isValid||ue)){const xe=t.resolver?ka((await N()).errors):await re(n,!0);xe!==r.isValid&&v.state.next({isValid:xe})}},b=(ue,xe)=>{!t.disabled&&(h.isValidating||h.validatingFields||p.isValidating||p.validatingFields)&&((ue||Array.from(l.mount)).forEach(Ue=>{Ue&&(xe?bn(r.validatingFields,Ue,xe):pi(r.validatingFields,Ue))}),v.state.next({validatingFields:r.validatingFields,isValidating:!ka(r.validatingFields)}))},S=(ue,xe=[],Ue,k,vt=!0,pt=!0)=>{if(k&&Ue&&!t.disabled){if(o.action=!0,pt&&Array.isArray(Jt(n,ue))){const Ut=Ue(Jt(n,ue),k.argA,k.argB);vt&&bn(n,ue,Ut)}if(pt&&Array.isArray(Jt(r.errors,ue))){const Ut=Ue(Jt(r.errors,ue),k.argA,k.argB);vt&&bn(r.errors,ue,Ut),C_e(r.errors,ue)}if((h.touchedFields||p.touchedFields)&&pt&&Array.isArray(Jt(r.touchedFields,ue))){const Ut=Ue(Jt(r.touchedFields,ue),k.argA,k.argB);vt&&bn(r.touchedFields,ue,Ut)}(h.dirtyFields||p.dirtyFields)&&(r.dirtyFields=np(i,a)),v.state.next({name:ue,isDirty:X(ue,xe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else bn(a,ue,xe)},T=(ue,xe)=>{bn(r.errors,ue,xe),v.state.next({errors:r.errors})},C=ue=>{r.errors=ue,v.state.next({errors:r.errors,isValid:!1})},M=(ue,xe,Ue,k)=>{const vt=Jt(n,ue);if(vt){const pt=Jt(a,ue,_i(Ue)?Jt(i,ue):Ue);_i(pt)||k&&k.defaultChecked||xe?bn(a,ue,xe?pt:wF(vt._f)):V(ue,pt),o.mount&&E()}},D=(ue,xe,Ue,k,vt)=>{let pt=!1,Ut=!1;const lr={name:ue};if(!t.disabled){if(!Ue||k){(h.isDirty||p.isDirty)&&(Ut=r.isDirty,r.isDirty=lr.isDirty=X(),pt=Ut!==lr.isDirty);const dr=Oc(Jt(i,ue),xe);Ut=!!Jt(r.dirtyFields,ue),dr?pi(r.dirtyFields,ue):bn(r.dirtyFields,ue,!0),lr.dirtyFields=r.dirtyFields,pt=pt||(h.dirtyFields||p.dirtyFields)&&Ut!==!dr}if(Ue){const dr=Jt(r.touchedFields,ue);dr||(bn(r.touchedFields,ue,Ue),lr.touchedFields=r.touchedFields,pt=pt||(h.touchedFields||p.touchedFields)&&dr!==Ue)}pt&&vt&&v.state.next(lr)}return pt?lr:{}},I=(ue,xe,Ue,k)=>{const vt=Jt(r.errors,ue),pt=(h.isValid||p.isValid)&&rl(xe)&&r.isValid!==xe;if(t.delayError&&Ue?(c=_(()=>T(ue,Ue)),c(t.delayError)):(clearTimeout(f),c=null,Ue?bn(r.errors,ue,Ue):pi(r.errors,ue)),(Ue?!Oc(vt,Ue):vt)||!ka(k)||pt){const Ut={...k,...pt&&rl(xe)?{isValid:xe}:{},errors:r.errors,name:ue};r={...r,...Ut},v.state.next(Ut)}},N=async ue=>{b(ue,!0);const xe=await t.resolver(a,t.context,b_e(ue||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(ue),xe},j=async ue=>{const{errors:xe}=await N(ue);if(ue)for(const Ue of ue){const k=Jt(xe,Ue);k?bn(r.errors,Ue,k):pi(r.errors,Ue)}else r.errors=xe;return xe},re=async(ue,xe,Ue={valid:!0})=>{for(const k in ue){const vt=ue[k];if(vt){const{_f:pt,...Ut}=vt;if(pt){const lr=l.array.has(pt.name),dr=vt._f&&x_e(vt._f);dr&&h.validatingFields&&b([pt.name],!0);const hr=await LF(vt,l.disabled,a,g,t.shouldUseNativeValidation&&!xe,lr);if(dr&&h.validatingFields&&b([pt.name]),hr[pt.name]&&(Ue.valid=!1,xe))break;!xe&&(Jt(hr,pt.name)?lr?O_e(r.errors,hr,pt.name):bn(r.errors,pt.name,hr[pt.name]):pi(r.errors,pt.name))}!ka(Ut)&&await re(Ut,xe,Ue)}}return Ue.valid},Q=()=>{for(const ue of l.unMount){const xe=Jt(n,ue);xe&&(xe._f.refs?xe._f.refs.every(Ue=>!ZR(Ue)):!ZR(xe._f.ref))&&$e(ue)}l.unMount=new Set},X=(ue,xe)=>!t.disabled&&(ue&&xe&&bn(a,ue,xe),!Oc(oe(),i)),R=(ue,xe,Ue)=>v_e(ue,l,{...o.mount?a:_i(xe)?i:uo(ue)?{[ue]:xe}:xe},Ue,xe),P=ue=>OO(Jt(o.mount?a:i,ue,t.shouldUnregister?Jt(i,ue,[]):[])),V=(ue,xe,Ue={})=>{const k=Jt(n,ue);let vt=xe;if(k){const pt=k._f;pt&&(!pt.disabled&&bn(a,ue,uz(xe,pt)),vt=k1(pt.ref)&&Ca(xe)?"":xe,oz(pt.ref)?[...pt.ref.options].forEach(Ut=>Ut.selected=vt.includes(Ut.value)):pt.refs?o0(pt.ref)?pt.refs.forEach(Ut=>{(!Ut.defaultChecked||!Ut.disabled)&&(Array.isArray(vt)?Ut.checked=!!vt.find(lr=>lr===Ut.value):Ut.checked=vt===Ut.value||!!vt)}):pt.refs.forEach(Ut=>Ut.checked=Ut.value===vt):NO(pt.ref)?pt.ref.value="":(pt.ref.value=vt,pt.ref.type||v.state.next({name:ue,values:zi(a)})))}(Ue.shouldDirty||Ue.shouldTouch)&&D(ue,vt,Ue.shouldTouch,Ue.shouldDirty,!0),Ue.shouldValidate&&ee(ue)},le=(ue,xe,Ue)=>{for(const k in xe){if(!xe.hasOwnProperty(k))return;const vt=xe[k],pt=ue+"."+k,Ut=Jt(n,pt);(l.array.has(ue)||bi(vt)||Ut&&!Ut._f)&&!Qf(vt)?le(pt,vt,Ue):V(pt,vt,Ue)}},w=(ue,xe,Ue={})=>{const k=Jt(n,ue),vt=l.array.has(ue),pt=zi(xe);bn(a,ue,pt),vt?(v.array.next({name:ue,values:zi(a)}),(h.isDirty||h.dirtyFields||p.isDirty||p.dirtyFields)&&Ue.shouldDirty&&v.state.next({name:ue,dirtyFields:np(i,a),isDirty:X(ue,pt)})):k&&!k._f&&!Ca(pt)?le(ue,pt,Ue):V(ue,pt,Ue),IF(ue,l)&&v.state.next({...r,name:ue}),v.state.next({name:o.mount?ue:void 0,values:zi(a)})},z=async ue=>{o.mount=!0;const xe=ue.target;let Ue=xe.name,k=!0;const vt=Jt(n,Ue),pt=dr=>{k=Number.isNaN(dr)||Qf(dr)&&isNaN(dr.getTime())||Oc(dr,Jt(a,Ue,dr))},Ut=NF(t.mode),lr=NF(t.reValidateMode);if(vt){let dr,hr;const jn=xe.type?wF(vt._f):u_e(ue),Sn=ue.type===TF.BLUR||ue.type===TF.FOCUS_OUT,fi=!S_e(vt._f)&&!t.resolver&&!Jt(r.errors,Ue)&&!vt._f.deps||R_e(Sn,Jt(r.touchedFields,Ue),r.isSubmitted,lr,Ut),en=IF(Ue,l,Sn);bn(a,Ue,jn),Sn?(!xe||!xe.readOnly)&&(vt._f.onBlur&&vt._f.onBlur(ue),c&&c(0)):vt._f.onChange&&vt._f.onChange(ue);const yn=D(Ue,jn,Sn),Ji=!ka(yn)||en;if(!Sn&&v.state.next({name:Ue,type:ue.type,values:zi(a)}),fi)return(h.isValid||p.isValid)&&(t.mode==="onBlur"?Sn&&E():Sn||E()),Ji&&v.state.next({name:Ue,...en?{}:yn});if(!Sn&&en&&v.state.next({...r}),t.resolver){const{errors:pa}=await N([Ue]);if(pt(jn),k){const Ka=PF(r.errors,n,Ue),Go=PF(pa,n,Ka.name||Ue);dr=Go.error,Ue=Go.name,hr=ka(pa)}}else b([Ue],!0),dr=(await LF(vt,l.disabled,a,g,t.shouldUseNativeValidation))[Ue],b([Ue]),pt(jn),k&&(dr?hr=!1:(h.isValid||p.isValid)&&(hr=await re(n,!0)));k&&(vt._f.deps&&(!Array.isArray(vt._f.deps)||vt._f.deps.length>0)&&ee(vt._f.deps),I(Ue,hr,dr,yn))}},H=(ue,xe)=>{if(Jt(r.errors,xe)&&ue.focus)return ue.focus(),1},ee=async(ue,xe={})=>{let Ue,k;const vt=bg(ue);if(t.resolver){const pt=await j(_i(ue)?ue:vt);Ue=ka(pt),k=ue?!vt.some(Ut=>Jt(pt,Ut)):Ue}else ue?(k=(await Promise.all(vt.map(async pt=>{const Ut=Jt(n,pt);return await re(Ut&&Ut._f?{[pt]:Ut}:Ut)}))).every(Boolean),!(!k&&!r.isValid)&&E()):k=Ue=await re(n);return v.state.next({...!uo(ue)||(h.isValid||p.isValid)&&Ue!==r.isValid?{}:{name:ue},...t.resolver||!ue?{isValid:Ue}:{},errors:r.errors}),xe.shouldFocus&&!k&&xg(n,H,ue?vt:l.mount),k},oe=(ue,xe)=>{let Ue={...o.mount?a:i};return xe&&(Ue=az(xe.dirtyFields?r.dirtyFields:r.touchedFields,Ue)),_i(ue)?Ue:uo(ue)?Jt(Ue,ue):ue.map(k=>Jt(Ue,k))},ge=(ue,xe)=>({invalid:!!Jt((xe||r).errors,ue),isDirty:!!Jt((xe||r).dirtyFields,ue),error:Jt((xe||r).errors,ue),isValidating:!!Jt(r.validatingFields,ue),isTouched:!!Jt((xe||r).touchedFields,ue)}),ye=ue=>{ue&&bg(ue).forEach(xe=>pi(r.errors,xe)),v.state.next({errors:ue?r.errors:{}})},Pe=(ue,xe,Ue)=>{const k=(Jt(n,ue,{_f:{}})._f||{}).ref,vt=Jt(r.errors,ue)||{},{ref:pt,message:Ut,type:lr,...dr}=vt;bn(r.errors,ue,{...dr,...xe,ref:k}),v.state.next({name:ue,errors:r.errors,isValid:!1}),Ue&&Ue.shouldFocus&&k&&k.focus&&k.focus()},tt=(ue,xe)=>_s(ue)?v.state.subscribe({next:Ue=>"values"in Ue&&ue(R(void 0,xe),Ue)}):R(ue,xe,!0),We=ue=>v.state.subscribe({next:xe=>{A_e(ue.name,xe.name,ue.exact)&&T_e(xe,ue.formState||h,It,ue.reRenderRoot)&&ue.callback({values:{...a},...r,...xe,defaultValues:i})}}).unsubscribe,Pt=ue=>(o.mount=!0,p={...p,...ue.formState},We({...ue,formState:p})),$e=(ue,xe={})=>{for(const Ue of ue?bg(ue):l.mount)l.mount.delete(Ue),l.array.delete(Ue),xe.keepValue||(pi(n,Ue),pi(a,Ue)),!xe.keepError&&pi(r.errors,Ue),!xe.keepDirty&&pi(r.dirtyFields,Ue),!xe.keepTouched&&pi(r.touchedFields,Ue),!xe.keepIsValidating&&pi(r.validatingFields,Ue),!t.shouldUnregister&&!xe.keepDefaultValue&&pi(i,Ue);v.state.next({values:zi(a)}),v.state.next({...r,...xe.keepDirty?{isDirty:X()}:{}}),!xe.keepIsValid&&E()},Tt=({disabled:ue,name:xe})=>{(rl(ue)&&o.mount||ue||l.disabled.has(xe))&&(ue?l.disabled.add(xe):l.disabled.delete(xe))},je=(ue,xe={})=>{let Ue=Jt(n,ue);const k=rl(xe.disabled)||rl(t.disabled);return bn(n,ue,{...Ue||{},_f:{...Ue&&Ue._f?Ue._f:{ref:{name:ue}},name:ue,mount:!0,...xe}}),l.mount.add(ue),Ue?Tt({disabled:rl(xe.disabled)?xe.disabled:t.disabled,name:ue}):M(ue,!0,xe.value),{...k?{disabled:xe.disabled||t.disabled}:{},...t.progressive?{required:!!xe.required,min:Wv(xe.min),max:Wv(xe.max),minLength:Wv(xe.minLength),maxLength:Wv(xe.maxLength),pattern:Wv(xe.pattern)}:{},name:ue,onChange:z,onBlur:z,ref:vt=>{if(vt){je(ue,xe),Ue=Jt(n,ue);const pt=_i(vt.value)&&vt.querySelectorAll&&vt.querySelectorAll("input,select,textarea")[0]||vt,Ut=g_e(pt),lr=Ue._f.refs||[];if(Ut?lr.find(dr=>dr===pt):pt===Ue._f.ref)return;bn(n,ue,{_f:{...Ue._f,...Ut?{refs:[...lr.filter(ZR),pt,...Array.isArray(Jt(i,ue))?[{}]:[]],ref:{type:pt.type,name:ue}}:{ref:pt}}}),M(ue,!1,void 0,pt)}else Ue=Jt(n,ue,{}),Ue._f&&(Ue._f.mount=!1),(t.shouldUnregister||xe.shouldUnregister)&&!(f_e(l.array,ue)&&o.action)&&l.unMount.add(ue)}}},Ee=()=>t.shouldFocusError&&xg(n,H,l.mount),st=ue=>{rl(ue)&&(v.state.next({disabled:ue}),xg(n,(xe,Ue)=>{const k=Jt(n,Ue);k&&(xe.disabled=k._f.disabled||ue,Array.isArray(k._f.refs)&&k._f.refs.forEach(vt=>{vt.disabled=k._f.disabled||ue}))},0,!1))},Oe=(ue,xe)=>async Ue=>{let k;Ue&&(Ue.preventDefault&&Ue.preventDefault(),Ue.persist&&Ue.persist());let vt=zi(a);if(v.state.next({isSubmitting:!0}),t.resolver){const{errors:pt,values:Ut}=await N();r.errors=pt,vt=zi(Ut)}else await re(n);if(l.disabled.size)for(const pt of l.disabled)pi(vt,pt);if(pi(r.errors,"root"),ka(r.errors)){v.state.next({errors:{}});try{await ue(vt,Ue)}catch(pt){k=pt}}else xe&&await xe({...r.errors},Ue),Ee(),setTimeout(Ee);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ka(r.errors)&&!k,submitCount:r.submitCount+1,errors:r.errors}),k)throw k},$t=(ue,xe={})=>{Jt(n,ue)&&(_i(xe.defaultValue)?w(ue,zi(Jt(i,ue))):(w(ue,xe.defaultValue),bn(i,ue,zi(xe.defaultValue))),xe.keepTouched||pi(r.touchedFields,ue),xe.keepDirty||(pi(r.dirtyFields,ue),r.isDirty=xe.defaultValue?X(ue,zi(Jt(i,ue))):X()),xe.keepError||(pi(r.errors,ue),h.isValid&&E()),v.state.next({...r}))},qt=(ue,xe={})=>{const Ue=ue?zi(ue):i,k=zi(Ue),vt=ka(ue),pt=vt?i:k;if(xe.keepDefaultValues||(i=Ue),!xe.keepValues){if(xe.keepDirtyValues){const Ut=new Set([...l.mount,...Object.keys(np(i,a))]);for(const lr of Array.from(Ut))Jt(r.dirtyFields,lr)?bn(pt,lr,Jt(a,lr)):w(lr,Jt(pt,lr))}else{if(CO&&_i(ue))for(const Ut of l.mount){const lr=Jt(n,Ut);if(lr&&lr._f){const dr=Array.isArray(lr._f.refs)?lr._f.refs[0]:lr._f.ref;if(k1(dr)){const hr=dr.closest("form");if(hr){hr.reset();break}}}}if(xe.keepFieldsRef)for(const Ut of l.mount)w(Ut,Jt(pt,Ut));else n={}}a=t.shouldUnregister?xe.keepDefaultValues?zi(i):{}:zi(pt),v.array.next({values:{...pt}}),v.state.next({values:{...pt}})}l={mount:xe.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!xe.keepIsValid||!!xe.keepDirtyValues,o.watch=!!t.shouldUnregister,v.state.next({submitCount:xe.keepSubmitCount?r.submitCount:0,isDirty:vt?!1:xe.keepDirty?r.isDirty:!!(xe.keepDefaultValues&&!Oc(ue,i)),isSubmitted:xe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:vt?{}:xe.keepDirtyValues?xe.keepDefaultValues&&a?np(i,a):r.dirtyFields:xe.keepDefaultValues&&ue?np(i,ue):xe.keepDirty?r.dirtyFields:{},touchedFields:xe.keepTouched?r.touchedFields:{},errors:xe.keepErrors?r.errors:{},isSubmitSuccessful:xe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},xt=(ue,xe)=>qt(_s(ue)?ue(a):ue,xe),Dt=(ue,xe={})=>{const Ue=Jt(n,ue),k=Ue&&Ue._f;if(k){const vt=k.refs?k.refs[0]:k.ref;vt.focus&&(vt.focus(),xe.shouldSelect&&_s(vt.select)&&vt.select())}},It=ue=>{r={...r,...ue}},kr={control:{register:je,unregister:$e,getFieldState:ge,handleSubmit:Oe,setError:Pe,_subscribe:We,_runSchema:N,_focusError:Ee,_getWatch:R,_getDirty:X,_setValid:E,_setFieldArray:S,_setDisabledField:Tt,_setErrors:C,_getFieldArray:P,_reset:qt,_resetDefaultValues:()=>_s(t.defaultValues)&&t.defaultValues().then(ue=>{xt(ue,t.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:Q,_disableForm:st,_subjects:v,_proxyFormState:h,get _fields(){return n},get _formValues(){return a},get _state(){return o},set _state(ue){o=ue},get _defaultValues(){return i},get _names(){return l},set _names(ue){l=ue},get _formState(){return r},get _options(){return t},set _options(ue){t={...t,...ue}}},subscribe:Pt,trigger:ee,register:je,handleSubmit:Oe,watch:tt,setValue:w,getValues:oe,reset:xt,resetField:$t,clearErrors:ye,unregister:$e,setError:Pe,setFocus:Dt,getFieldState:ge};return{...kr,formControl:kr}}function ME(e={}){const t=cn.useRef(void 0),r=cn.useRef(void 0),[n,i]=cn.useState({isDirty:!1,isValidating:!1,isLoading:_s(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:_s(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!_s(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=N_e(e);t.current={...l,formState:n}}const a=t.current.control;return a._options=e,m_e(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),cn.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),cn.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),cn.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),cn.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),cn.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==n.isDirty&&a._subjects.state.next({isDirty:o})}},[a,n.isDirty]),cn.useEffect(()=>{e.values&&!Oc(e.values,r.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),r.current=e.values,i(o=>({...o}))):a._resetDefaultValues()},[a,e.values]),cn.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=p_e(n,a),t.current}const BF=(e,t,r)=>{if(e&&"reportValidity"in e){const n=Jt(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},fz=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?BF(n.ref,r,e):n.refs&&n.refs.forEach(i=>BF(i,r,e))}},M_e=(e,t)=>{t.shouldUseNativeValidation&&fz(e,t);const r={};for(const n in e){const i=Jt(t.fields,n),a=Object.assign(e[n]||{},{ref:i&&i.ref});if(I_e(t.names||Object.keys(e),n)){const o=Object.assign({},Jt(r,n));bn(o,"root",a),bn(r,n,o)}else bn(r,n,a)}return r},I_e=(e,t)=>e.some(r=>r.startsWith(t+"."));var P_e=function(e,t){for(var r={};e.length;){var n=e[0],i=n.code,a=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:a,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(h){return h.errors.forEach(function(p){return e.push(p)})}),t){var c=r[o].types,f=c&&c[n.code];r[o]=iz(o,t,r,i,f?[].concat(f,n.message):n.message)}e.shift()}return r},IE=function(e,t,r){return r===void 0&&(r={}),function(n,i,a){try{return Promise.resolve((function(o,l){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(f){return a.shouldUseNativeValidation&&fz({},a),{errors:{},values:r.raw?n:f}})}catch(f){return l(f)}return c&&c.then?c.then(void 0,l):c})(0,function(o){if((function(l){return Array.isArray(l?.errors)})(o))return{values:{},errors:M_e(P_e(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},on;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function r(i){throw new Error}e.assertNever=r,e.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},e.find=(i,a)=>{for(const o of i)if(a(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}e.joinValues=n,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(on||(on={}));var FF;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(FF||(FF={}));const tr=on.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Tc=e=>{switch(typeof e){case"undefined":return tr.undefined;case"string":return tr.string;case"number":return Number.isNaN(e)?tr.nan:tr.number;case"boolean":return tr.boolean;case"function":return tr.function;case"bigint":return tr.bigint;case"symbol":return tr.symbol;case"object":return Array.isArray(e)?tr.array:e===null?tr.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?tr.promise:typeof Map<"u"&&e instanceof Map?tr.map:typeof Set<"u"&&e instanceof Set?tr.set:typeof Date<"u"&&e instanceof Date?tr.date:tr.object;default:return tr.unknown}},Mt=on.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class mu extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(a){return a.message},n={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const f=o.path[c];c===o.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(r(o))):l[f]=l[f]||{_errors:[]},l=l[f],c++}}};return i(this),n}static assert(t){if(!(t instanceof mu))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,on.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];r[a]=r[a]||[],r[a].push(t(i))}else n.push(t(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}mu.create=e=>new mu(e);const bC=(e,t)=>{let r;switch(e.code){case Mt.invalid_type:e.received===tr.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case Mt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,on.jsonStringifyReplacer)}`;break;case Mt.unrecognized_keys:r=`Unrecognized key(s) in object: ${on.joinValues(e.keys,", ")}`;break;case Mt.invalid_union:r="Invalid input";break;case Mt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${on.joinValues(e.options)}`;break;case Mt.invalid_enum_value:r=`Invalid enum value. Expected ${on.joinValues(e.options)}, received '${e.received}'`;break;case Mt.invalid_arguments:r="Invalid function arguments";break;case Mt.invalid_return_type:r="Invalid function return type";break;case Mt.invalid_date:r="Invalid date";break;case Mt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:on.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case Mt.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case Mt.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case Mt.custom:r="Invalid input";break;case Mt.invalid_intersection_types:r="Intersection results could not be merged";break;case Mt.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case Mt.not_finite:r="Number must be finite";break;default:r=t.defaultError,on.assertNever(e)}return{message:r}};let D_e=bC;function L_e(){return D_e}const B_e=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,a=[...r,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const c=n.filter(f=>!!f).slice().reverse();for(const f of c)l=f(o,{data:t,defaultError:l}).message;return{...i,path:a,message:l}};function Xt(e,t){const r=L_e(),n=B_e({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===bC?void 0:bC].filter(i=>!!i)});e.common.issues.push(n)}class po{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const i of r){if(i.status==="aborted")return wr;i.status==="dirty"&&t.dirty(),n.push(i.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const i of r){const a=await i.key,o=await i.value;n.push({key:a,value:o})}return po.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const i of r){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return wr;a.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(n[a.value]=o.value)}return{status:t.value,value:n}}}const wr=Object.freeze({status:"aborted"}),cg=e=>({status:"dirty",value:e}),qo=e=>({status:"valid",value:e}),UF=e=>e.status==="aborted",kF=e=>e.status==="dirty",Fp=e=>e.status==="valid",z1=e=>typeof Promise<"u"&&e instanceof Promise;var ir;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(ir||(ir={}));class $c{constructor(t,r,n,i){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const jF=(e,t)=>{if(Fp(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new mu(e.common.issues);return this._error=r,this._error}}};function Gr(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:i}}class rn{get description(){return this._def.description}_getType(t){return Tc(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Tc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new po,ctx:{common:t.parent.common,data:t.data,parsedType:Tc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(z1(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Tc(t)},i=this._parseSync({data:t,path:n.path,parent:n});return jF(n,i)}"~validate"(t){const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Tc(t)};if(!this["~standard"].async)try{const n=this._parseSync({data:t,path:[],parent:r});return Fp(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(n=>Fp(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Tc(t)},i=this._parse({data:t,path:n.path,parent:n}),a=await(z1(i)?i:Promise.resolve(i));return jF(n,a)}refine(t,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{const o=t(i),l=()=>a.addIssue({code:Mt.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,i)=>t(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(t){return new jp({schema:this,typeName:Nr.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return zc.create(this,this._def)}nullable(){return zp.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return fl.create(this)}promise(){return X1.create(this,this._def)}or(t){return V1.create([this,t],this._def)}and(t){return H1.create(this,t,this._def)}transform(t){return new jp({...Gr(this._def),schema:this,typeName:Nr.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new TC({...Gr(this._def),innerType:this,defaultValue:r,typeName:Nr.ZodDefault})}brand(){return new aye({typeName:Nr.ZodBranded,type:this,...Gr(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new AC({...Gr(this._def),innerType:this,catchValue:r,typeName:Nr.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return IO.create(this,t)}readonly(){return RC.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const F_e=/^c[^\s-]{8,}$/i,U_e=/^[0-9a-z]+$/,k_e=/^[0-9A-HJKMNP-TV-Z]{26}$/i,j_e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,z_e=/^[a-z0-9_-]{21}$/i,V_e=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,H_e=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,X_e=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,q_e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let KR;const G_e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,W_e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,$_e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Y_e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Z_e=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,K_e=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dz="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Q_e=new RegExp(`^${dz}$`);function hz(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function J_e(e){return new RegExp(`^${hz(e)}$`)}function eye(e){let t=`${dz}T${hz(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function tye(e,t){return!!((t==="v4"||!t)&&G_e.test(e)||(t==="v6"||!t)&&$_e.test(e))}function rye(e,t){if(!V_e.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function nye(e,t){return!!((t==="v4"||!t)&&W_e.test(e)||(t==="v6"||!t)&&Y_e.test(e))}class Pc extends rn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==tr.string){const a=this._getOrReturnCtx(t);return Xt(a,{code:Mt.invalid_type,expected:tr.string,received:a.parsedType}),wr}const n=new po;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),Xt(i,{code:Mt.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),Xt(i,{code:Mt.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const o=t.data.length>a.value,l=t.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(t,i),o?Xt(i,{code:Mt.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Xt(i,{code:Mt.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")X_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Xt(i,{validation:"email",code:Mt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")KR||(KR=new RegExp(q_e,"u")),KR.test(t.data)||(i=this._getOrReturnCtx(t,i),Xt(i,{validation:"emoji",code:Mt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")j_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Xt(i,{validation:"uuid",code:Mt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")z_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Xt(i,{validation:"nanoid",code:Mt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")F_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Xt(i,{validation:"cuid",code:Mt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")U_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Xt(i,{validation:"cuid2",code:Mt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")k_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Xt(i,{validation:"ulid",code:Mt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Xt(i,{validation:"url",code:Mt.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Xt(i,{validation:"regex",code:Mt.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),Xt(i,{code:Mt.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),Xt(i,{code:Mt.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),Xt(i,{code:Mt.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?eye(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Xt(i,{code:Mt.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?Q_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Xt(i,{code:Mt.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?J_e(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Xt(i,{code:Mt.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?H_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Xt(i,{validation:"duration",code:Mt.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?tye(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Xt(i,{validation:"ip",code:Mt.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?rye(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),Xt(i,{validation:"jwt",code:Mt.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?nye(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Xt(i,{validation:"cidr",code:Mt.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?Z_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Xt(i,{validation:"base64",code:Mt.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?K_e.test(t.data)||(i=this._getOrReturnCtx(t,i),Xt(i,{validation:"base64url",code:Mt.invalid_string,message:a.message}),n.dirty()):on.assertNever(a);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(i=>t.test(i),{validation:r,code:Mt.invalid_string,...ir.errToObj(n)})}_addCheck(t){return new Pc({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...ir.errToObj(t)})}url(t){return this._addCheck({kind:"url",...ir.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...ir.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...ir.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...ir.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...ir.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...ir.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...ir.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...ir.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...ir.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...ir.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...ir.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...ir.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...ir.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...ir.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...ir.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...ir.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r?.position,...ir.errToObj(r?.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...ir.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...ir.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...ir.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...ir.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...ir.errToObj(r)})}nonempty(t){return this.min(1,ir.errToObj(t))}trim(){return new Pc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Pc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Pc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Pc.create=e=>new Pc({checks:[],typeName:Nr.ZodString,coerce:e?.coerce??!1,...Gr(e)});function iye(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,a=Number.parseInt(e.toFixed(i).replace(".","")),o=Number.parseInt(t.toFixed(i).replace(".",""));return a%o/10**i}class Up extends rn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==tr.number){const a=this._getOrReturnCtx(t);return Xt(a,{code:Mt.invalid_type,expected:tr.number,received:a.parsedType}),wr}let n;const i=new po;for(const a of this._def.checks)a.kind==="int"?on.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),Xt(n,{code:Mt.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(n=this._getOrReturnCtx(t,n),Xt(n,{code:Mt.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(n=this._getOrReturnCtx(t,n),Xt(n,{code:Mt.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?iye(t.data,a.value)!==0&&(n=this._getOrReturnCtx(t,n),Xt(n,{code:Mt.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),Xt(n,{code:Mt.not_finite,message:a.message}),i.dirty()):on.assertNever(a);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,ir.toString(r))}gt(t,r){return this.setLimit("min",t,!1,ir.toString(r))}lte(t,r){return this.setLimit("max",t,!0,ir.toString(r))}lt(t,r){return this.setLimit("max",t,!1,ir.toString(r))}setLimit(t,r,n,i){return new Up({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:ir.toString(i)}]})}_addCheck(t){return new Up({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:ir.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ir.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ir.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ir.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ir.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:ir.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:ir.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ir.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ir.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&on.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Up.create=e=>new Up({checks:[],typeName:Nr.ZodNumber,coerce:e?.coerce||!1,...Gr(e)});class Hg extends rn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==tr.bigint)return this._getInvalidInput(t);let n;const i=new po;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(n=this._getOrReturnCtx(t,n),Xt(n,{code:Mt.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(n=this._getOrReturnCtx(t,n),Xt(n,{code:Mt.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),Xt(n,{code:Mt.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):on.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Xt(r,{code:Mt.invalid_type,expected:tr.bigint,received:r.parsedType}),wr}gte(t,r){return this.setLimit("min",t,!0,ir.toString(r))}gt(t,r){return this.setLimit("min",t,!1,ir.toString(r))}lte(t,r){return this.setLimit("max",t,!0,ir.toString(r))}lt(t,r){return this.setLimit("max",t,!1,ir.toString(r))}setLimit(t,r,n,i){return new Hg({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:ir.toString(i)}]})}_addCheck(t){return new Hg({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ir.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ir.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ir.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ir.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:ir.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Hg.create=e=>new Hg({checks:[],typeName:Nr.ZodBigInt,coerce:e?.coerce??!1,...Gr(e)});class zF extends rn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==tr.boolean){const n=this._getOrReturnCtx(t);return Xt(n,{code:Mt.invalid_type,expected:tr.boolean,received:n.parsedType}),wr}return qo(t.data)}}zF.create=e=>new zF({typeName:Nr.ZodBoolean,coerce:e?.coerce||!1,...Gr(e)});class Xg extends rn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==tr.date){const a=this._getOrReturnCtx(t);return Xt(a,{code:Mt.invalid_type,expected:tr.date,received:a.parsedType}),wr}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return Xt(a,{code:Mt.invalid_date}),wr}const n=new po;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),Xt(i,{code:Mt.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),Xt(i,{code:Mt.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):on.assertNever(a);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Xg({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:ir.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:ir.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Xg.create=e=>new Xg({checks:[],coerce:e?.coerce||!1,typeName:Nr.ZodDate,...Gr(e)});class VF extends rn{_parse(t){if(this._getType(t)!==tr.symbol){const n=this._getOrReturnCtx(t);return Xt(n,{code:Mt.invalid_type,expected:tr.symbol,received:n.parsedType}),wr}return qo(t.data)}}VF.create=e=>new VF({typeName:Nr.ZodSymbol,...Gr(e)});class HF extends rn{_parse(t){if(this._getType(t)!==tr.undefined){const n=this._getOrReturnCtx(t);return Xt(n,{code:Mt.invalid_type,expected:tr.undefined,received:n.parsedType}),wr}return qo(t.data)}}HF.create=e=>new HF({typeName:Nr.ZodUndefined,...Gr(e)});class XF extends rn{_parse(t){if(this._getType(t)!==tr.null){const n=this._getOrReturnCtx(t);return Xt(n,{code:Mt.invalid_type,expected:tr.null,received:n.parsedType}),wr}return qo(t.data)}}XF.create=e=>new XF({typeName:Nr.ZodNull,...Gr(e)});class qF extends rn{constructor(){super(...arguments),this._any=!0}_parse(t){return qo(t.data)}}qF.create=e=>new qF({typeName:Nr.ZodAny,...Gr(e)});class GF extends rn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return qo(t.data)}}GF.create=e=>new GF({typeName:Nr.ZodUnknown,...Gr(e)});class Yc extends rn{_parse(t){const r=this._getOrReturnCtx(t);return Xt(r,{code:Mt.invalid_type,expected:tr.never,received:r.parsedType}),wr}}Yc.create=e=>new Yc({typeName:Nr.ZodNever,...Gr(e)});class WF extends rn{_parse(t){if(this._getType(t)!==tr.undefined){const n=this._getOrReturnCtx(t);return Xt(n,{code:Mt.invalid_type,expected:tr.void,received:n.parsedType}),wr}return qo(t.data)}}WF.create=e=>new WF({typeName:Nr.ZodVoid,...Gr(e)});class fl extends rn{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),i=this._def;if(r.parsedType!==tr.array)return Xt(r,{code:Mt.invalid_type,expected:tr.array,received:r.parsedType}),wr;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(o||l)&&(Xt(r,{code:o?Mt.too_big:Mt.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(Xt(r,{code:Mt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(Xt(r,{code:Mt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>i.type._parseAsync(new $c(r,o,r.path,l)))).then(o=>po.mergeArray(n,o));const a=[...r.data].map((o,l)=>i.type._parseSync(new $c(r,o,r.path,l)));return po.mergeArray(n,a)}get element(){return this._def.type}min(t,r){return new fl({...this._def,minLength:{value:t,message:ir.toString(r)}})}max(t,r){return new fl({...this._def,maxLength:{value:t,message:ir.toString(r)}})}length(t,r){return new fl({...this._def,exactLength:{value:t,message:ir.toString(r)}})}nonempty(t){return this.min(1,t)}}fl.create=(e,t)=>new fl({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Nr.ZodArray,...Gr(t)});function ip(e){if(e instanceof vi){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=zc.create(ip(n))}return new vi({...e._def,shape:()=>t})}else return e instanceof fl?new fl({...e._def,type:ip(e.element)}):e instanceof zc?zc.create(ip(e.unwrap())):e instanceof zp?zp.create(ip(e.unwrap())):e instanceof bd?bd.create(e.items.map(t=>ip(t))):e}class vi extends rn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=on.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==tr.object){const f=this._getOrReturnCtx(t);return Xt(f,{code:Mt.invalid_type,expected:tr.object,received:f.parsedType}),wr}const{status:n,ctx:i}=this._processInputParams(t),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Yc&&this._def.unknownKeys==="strip"))for(const f in i.data)o.includes(f)||l.push(f);const c=[];for(const f of o){const h=a[f],p=i.data[f];c.push({key:{status:"valid",value:f},value:h._parse(new $c(i,p,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof Yc){const f=this._def.unknownKeys;if(f==="passthrough")for(const h of l)c.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(f==="strict")l.length>0&&(Xt(i,{code:Mt.unrecognized_keys,keys:l}),n.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const h of l){const p=i.data[h];c.push({key:{status:"valid",value:h},value:f._parse(new $c(i,p,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const f=[];for(const h of c){const p=await h.key,v=await h.value;f.push({key:p,value:v,alwaysSet:h.alwaysSet})}return f}).then(f=>po.mergeObjectSync(n,f)):po.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return ir.errToObj,new vi({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{const i=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:ir.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new vi({...this._def,unknownKeys:"strip"})}passthrough(){return new vi({...this._def,unknownKeys:"passthrough"})}extend(t){return new vi({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new vi({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Nr.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new vi({...this._def,catchall:t})}pick(t){const r={};for(const n of on.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new vi({...this._def,shape:()=>r})}omit(t){const r={};for(const n of on.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new vi({...this._def,shape:()=>r})}deepPartial(){return ip(this)}partial(t){const r={};for(const n of on.objectKeys(this.shape)){const i=this.shape[n];t&&!t[n]?r[n]=i:r[n]=i.optional()}return new vi({...this._def,shape:()=>r})}required(t){const r={};for(const n of on.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof zc;)a=a._def.innerType;r[n]=a}return new vi({...this._def,shape:()=>r})}keyof(){return pz(on.objectKeys(this.shape))}}vi.create=(e,t)=>new vi({shape:()=>e,unknownKeys:"strip",catchall:Yc.create(),typeName:Nr.ZodObject,...Gr(t)});vi.strictCreate=(e,t)=>new vi({shape:()=>e,unknownKeys:"strict",catchall:Yc.create(),typeName:Nr.ZodObject,...Gr(t)});vi.lazycreate=(e,t)=>new vi({shape:e,unknownKeys:"strip",catchall:Yc.create(),typeName:Nr.ZodObject,...Gr(t)});class V1 extends rn{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new mu(l.ctx.common.issues));return Xt(r,{code:Mt.invalid_union,unionErrors:o}),wr}if(r.common.async)return Promise.all(n.map(async a=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const c of n){const f={...r,common:{...r.common,issues:[]},parent:null},h=c._parseSync({data:r.data,path:r.path,parent:f});if(h.status==="valid")return h;h.status==="dirty"&&!a&&(a={result:h,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new mu(c));return Xt(r,{code:Mt.invalid_union,unionErrors:l}),wr}}get options(){return this._def.options}}V1.create=(e,t)=>new V1({options:e,typeName:Nr.ZodUnion,...Gr(t)});function xC(e,t){const r=Tc(e),n=Tc(t);if(e===t)return{valid:!0,data:e};if(r===tr.object&&n===tr.object){const i=on.objectKeys(t),a=on.objectKeys(e).filter(l=>i.indexOf(l)!==-1),o={...e,...t};for(const l of a){const c=xC(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===tr.array&&n===tr.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const o=e[a],l=t[a],c=xC(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===tr.date&&n===tr.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class H1 extends rn{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=(a,o)=>{if(UF(a)||UF(o))return wr;const l=xC(a.value,o.value);return l.valid?((kF(a)||kF(o))&&r.dirty(),{status:r.value,value:l.data}):(Xt(n,{code:Mt.invalid_intersection_types}),wr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}H1.create=(e,t,r)=>new H1({left:e,right:t,typeName:Nr.ZodIntersection,...Gr(r)});class bd extends rn{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==tr.array)return Xt(n,{code:Mt.invalid_type,expected:tr.array,received:n.parsedType}),wr;if(n.data.length<this._def.items.length)return Xt(n,{code:Mt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),wr;!this._def.rest&&n.data.length>this._def.items.length&&(Xt(n,{code:Mt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new $c(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(a).then(o=>po.mergeArray(r,o)):po.mergeArray(r,a)}get items(){return this._def.items}rest(t){return new bd({...this._def,rest:t})}}bd.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new bd({items:e,typeName:Nr.ZodTuple,rest:null,...Gr(t)})};class $F extends rn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==tr.map)return Xt(n,{code:Mt.invalid_type,expected:tr.map,received:n.parsedType}),wr;const i=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(([l,c],f)=>({key:i._parse(new $c(n,l,n.path,[f,"key"])),value:a._parse(new $c(n,c,n.path,[f,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const f=await c.key,h=await c.value;if(f.status==="aborted"||h.status==="aborted")return wr;(f.status==="dirty"||h.status==="dirty")&&r.dirty(),l.set(f.value,h.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const f=c.key,h=c.value;if(f.status==="aborted"||h.status==="aborted")return wr;(f.status==="dirty"||h.status==="dirty")&&r.dirty(),l.set(f.value,h.value)}return{status:r.value,value:l}}}}$F.create=(e,t,r)=>new $F({valueType:t,keyType:e,typeName:Nr.ZodMap,...Gr(r)});class qg extends rn{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==tr.set)return Xt(n,{code:Mt.invalid_type,expected:tr.set,received:n.parsedType}),wr;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Xt(n,{code:Mt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Xt(n,{code:Mt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const a=this._def.valueType;function o(c){const f=new Set;for(const h of c){if(h.status==="aborted")return wr;h.status==="dirty"&&r.dirty(),f.add(h.value)}return{status:r.value,value:f}}const l=[...n.data.values()].map((c,f)=>a._parse(new $c(n,c,n.path,f)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new qg({...this._def,minSize:{value:t,message:ir.toString(r)}})}max(t,r){return new qg({...this._def,maxSize:{value:t,message:ir.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}qg.create=(e,t)=>new qg({valueType:e,minSize:null,maxSize:null,typeName:Nr.ZodSet,...Gr(t)});class YF extends rn{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}YF.create=(e,t)=>new YF({getter:e,typeName:Nr.ZodLazy,...Gr(t)});class SC extends rn{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return Xt(r,{received:r.data,code:Mt.invalid_literal,expected:this._def.value}),wr}return{status:"valid",value:t.data}}get value(){return this._def.value}}SC.create=(e,t)=>new SC({value:e,typeName:Nr.ZodLiteral,...Gr(t)});function pz(e,t){return new kp({values:e,typeName:Nr.ZodEnum,...Gr(t)})}class kp extends rn{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return Xt(r,{expected:on.joinValues(n),received:r.parsedType,code:Mt.invalid_type}),wr}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return Xt(r,{received:r.data,code:Mt.invalid_enum_value,options:n}),wr}return qo(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return kp.create(t,{...this._def,...r})}exclude(t,r=this._def){return kp.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}kp.create=pz;class ZF extends rn{_parse(t){const r=on.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==tr.string&&n.parsedType!==tr.number){const i=on.objectValues(r);return Xt(n,{expected:on.joinValues(i),received:n.parsedType,code:Mt.invalid_type}),wr}if(this._cache||(this._cache=new Set(on.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=on.objectValues(r);return Xt(n,{received:n.data,code:Mt.invalid_enum_value,options:i}),wr}return qo(t.data)}get enum(){return this._def.values}}ZF.create=(e,t)=>new ZF({values:e,typeName:Nr.ZodNativeEnum,...Gr(t)});class X1 extends rn{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==tr.promise&&r.common.async===!1)return Xt(r,{code:Mt.invalid_type,expected:tr.promise,received:r.parsedType}),wr;const n=r.parsedType===tr.promise?r.data:Promise.resolve(r.data);return qo(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}X1.create=(e,t)=>new X1({type:e,typeName:Nr.ZodPromise,...Gr(t)});class jp extends rn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Nr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:o=>{Xt(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(n.data,a);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return wr;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?wr:c.status==="dirty"||r.value==="dirty"?cg(c.value):c});{if(r.value==="aborted")return wr;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?wr:l.status==="dirty"||r.value==="dirty"?cg(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,a);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?wr:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?wr:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Fp(o))return wr;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Fp(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:r.value,value:l})):wr);on.assertNever(i)}}jp.create=(e,t,r)=>new jp({schema:e,typeName:Nr.ZodEffects,effect:t,...Gr(r)});jp.createWithPreprocess=(e,t,r)=>new jp({schema:t,effect:{type:"preprocess",transform:e},typeName:Nr.ZodEffects,...Gr(r)});class zc extends rn{_parse(t){return this._getType(t)===tr.undefined?qo(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}zc.create=(e,t)=>new zc({innerType:e,typeName:Nr.ZodOptional,...Gr(t)});class zp extends rn{_parse(t){return this._getType(t)===tr.null?qo(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}zp.create=(e,t)=>new zp({innerType:e,typeName:Nr.ZodNullable,...Gr(t)});class TC extends rn{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===tr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}TC.create=(e,t)=>new TC({innerType:e,typeName:Nr.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Gr(t)});class AC extends rn{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return z1(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new mu(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new mu(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}AC.create=(e,t)=>new AC({innerType:e,typeName:Nr.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Gr(t)});class KF extends rn{_parse(t){if(this._getType(t)!==tr.nan){const n=this._getOrReturnCtx(t);return Xt(n,{code:Mt.invalid_type,expected:tr.nan,received:n.parsedType}),wr}return{status:"valid",value:t.data}}}KF.create=e=>new KF({typeName:Nr.ZodNaN,...Gr(e)});class aye extends rn{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class IO extends rn{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?wr:a.status==="dirty"?(r.dirty(),cg(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?wr:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(t,r){return new IO({in:t,out:r,typeName:Nr.ZodPipeline})}}class RC extends rn{_parse(t){const r=this._def.innerType._parse(t),n=i=>(Fp(i)&&(i.value=Object.freeze(i.value)),i);return z1(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}RC.create=(e,t)=>new RC({innerType:e,typeName:Nr.ZodReadonly,...Gr(t)});var Nr;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Nr||(Nr={}));const au=Pc.create,su=Up.create,CC=Xg.create;Yc.create;const oye=fl.create,PE=vi.create;V1.create;H1.create;bd.create;const OC=SC.create;kp.create;X1.create;zc.create;zp.create;const sye=PE({title:au().min(1,"标题不能为空").max(255,"标题长度不能超过255个字符"),intensity:su().min(0,"强度值不能小于0").max(1,"强度值不能大于1"),description:au().optional()}),lye=PE({title:au().optional(),minIntensity:su().min(0).max(1).optional(),maxIntensity:su().min(0).max(1).optional()}),uye=({initialData:e,onSubmit:t,onCancel:r,isSubmitting:n=!1})=>{const{register:i,handleSubmit:a,formState:{errors:o}}=ME({resolver:IE(sye),defaultValues:{title:e?.title||"",intensity:e?.intensity||0,description:""}}),l=c=>{t(c)};return A.jsxs("form",{onSubmit:a(l),className:"space-y-6",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsxs(Oi,{htmlFor:"title",children:["标题 ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx(gi,{id:"title",placeholder:"请输入情感标题",...i("title"),className:o.title?"border-red-500":""}),o.title&&A.jsx("p",{className:"text-sm text-red-500",children:o.title.message})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs(Oi,{htmlFor:"intensity",children:["强度值 ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx(gi,{id:"intensity",type:"number",min:"0",max:"1",step:"0.01",placeholder:"请输入强度值 (0-1)",...i("intensity",{setValueAs:c=>parseFloat(c)}),className:o.intensity?"border-red-500":""}),o.intensity&&A.jsx("p",{className:"text-sm text-red-500",children:o.intensity.message}),A.jsx("p",{className:"text-sm text-gray-500",children:"强度值范围：0.00 - 1.00，数值越大表示情感强度越高"})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(Oi,{htmlFor:"description",children:"描述"}),A.jsx(T3,{id:"description",rows:3,placeholder:"请输入情感描述（可选）",...i("description")}),o.description&&A.jsx("p",{className:"text-sm text-red-500",children:o.description.message})]}),A.jsxs("div",{className:"flex justify-end gap-2",children:[A.jsx($n,{type:"button",variant:"outline",onClick:r,disabled:n,children:"取消"}),A.jsx($n,{type:"submit",disabled:n,children:n?"保存中...":e?"更新":"创建"})]})]})},QF=({isOpen:e,onClose:t,onSubmit:r,initialData:n,isSubmitting:i=!1,title:a})=>{const o=a||(n?"编辑情感强度":"新建情感强度");return A.jsx(i8,{open:e,onOpenChange:t,children:A.jsxs(s3,{className:"max-w-md",children:[A.jsx(l3,{children:A.jsx(u3,{children:o})}),A.jsx(uye,{initialData:n,onSubmit:r,onCancel:t,isSubmitting:i})]})})},cye=({items:e,isLoading:t,onEdit:r,onDelete:n})=>{const i=Array.isArray(e)?e:[];if(t)return A.jsx(xs,{className:"p-6",children:A.jsx("div",{className:"text-center text-gray-500",children:"加载中..."})});if(i.length===0)return A.jsx(xs,{className:"p-6",children:A.jsx("div",{className:"text-center text-gray-500",children:'暂无数据，点击"新建情感强度"开始创建'})});const a=c=>{const f=typeof c=="number"?c:parseFloat(c);return isNaN(f)?0:f},o=c=>{const f=a(c);return f>=.7?"bg-green-100 text-green-800 border-green-300":f>=.4?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-red-100 text-red-800 border-red-300"},l=c=>{const f=a(c);return f>=.7?"高强度":f>=.4?"中强度":"低强度"};return A.jsx("div",{className:"space-y-4",children:i.map(c=>A.jsx(xs,{className:"p-6",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex-1",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[A.jsx("h3",{className:"text-lg font-medium",children:c.title}),A.jsx(v2,{variant:"outline",className:o(c.intensity),children:l(c.intensity)})]}),A.jsxs("div",{className:"text-sm text-gray-600",children:["强度值: ",a(c.intensity).toFixed(2)]}),A.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:A.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${a(c.intensity)*100}%`}})})]}),A.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[A.jsx($n,{variant:"outline",size:"sm",onClick:()=>r(c),children:A.jsx(ez,{className:"w-4 h-4"})}),A.jsx($n,{variant:"outline",size:"sm",onClick:()=>n(c),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:A.jsx(tz,{className:"w-4 h-4"})})]})]})},c.id))})},JF=e=>{let t;const r=new Set,n=(f,h)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const v=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),r.forEach(g=>g(t,v))}},i=()=>t,l={setState:n,getState:i,getInitialState:()=>c,subscribe:f=>(r.add(f),()=>r.delete(f))},c=t=e(n,i,l);return l},fye=(e=>e?JF(e):JF),dye=e=>e;function hye(e,t=dye){const r=cn.useSyncExternalStore(e.subscribe,cn.useCallback(()=>t(e.getState()),[e,t]),cn.useCallback(()=>t(e.getInitialState()),[e,t]));return cn.useDebugValue(r),r}const e5=e=>{const t=fye(e),r=n=>hye(t,n);return Object.assign(r,t),r},mz=(e=>e?e5(e):e5),vz=mz(e=>({items:[],isLoading:!1,error:null,searchTitle:"",searchMinIntensity:null,searchMaxIntensity:null,isCreateDialogOpen:!1,isEditDialogOpen:!1,editingItem:null,setItems:t=>e({items:t}),setLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),setSearchTitle:t=>e({searchTitle:t}),setSearchMinIntensity:t=>e({searchMinIntensity:t}),setSearchMaxIntensity:t=>e({searchMaxIntensity:t}),clearSearch:()=>e({searchTitle:"",searchMinIntensity:null,searchMaxIntensity:null}),openCreateDialog:()=>e({isCreateDialogOpen:!0}),closeCreateDialog:()=>e({isCreateDialogOpen:!1}),openEditDialog:t=>e({isEditDialogOpen:!0,editingItem:t}),closeEditDialog:()=>e({isEditDialogOpen:!1,editingItem:null})})),pye=({onSearch:e,onClear:t})=>{const{searchTitle:r,searchMinIntensity:n,searchMaxIntensity:i}=vz(),{register:a,handleSubmit:o,reset:l,formState:{isSubmitting:c}}=ME({resolver:IE(lye),defaultValues:{title:r,minIntensity:n||void 0,maxIntensity:i||void 0}}),f=p=>{e(p)},h=()=>{l({title:"",minIntensity:void 0,maxIntensity:void 0}),t()};return A.jsx(xs,{className:"p-6 mb-6",children:A.jsxs("form",{onSubmit:o(f),className:"space-y-4",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",children:"标题搜索"}),A.jsx(gi,{id:"title",placeholder:"请输入标题关键词",...a("title")})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"minIntensity",className:"block text-sm font-medium mb-2",children:"最小强度"}),A.jsx(gi,{id:"minIntensity",type:"number",min:"0",max:"1",step:"0.01",placeholder:"最小值 (0-1)",...a("minIntensity",{setValueAs:p=>p===""?void 0:parseFloat(p)})})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"maxIntensity",className:"block text-sm font-medium mb-2",children:"最大强度"}),A.jsx(gi,{id:"maxIntensity",type:"number",min:"0",max:"1",step:"0.01",placeholder:"最大值 (0-1)",...a("maxIntensity",{setValueAs:p=>p===""?void 0:parseFloat(p)})})]})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx($n,{type:"submit",disabled:c,children:"搜索"}),A.jsx($n,{type:"button",variant:"outline",onClick:h,children:"清除"})]})]})})};function gz(e,t){return function(){return e.apply(t,arguments)}}const{toString:mye}=Object.prototype,{getPrototypeOf:PO}=Object,{iterator:DE,toStringTag:_z}=Symbol,LE=(e=>t=>{const r=mye.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ns=e=>(e=e.toLowerCase(),t=>LE(t)===e),BE=e=>t=>typeof t===e,{isArray:tm}=Array,Vp=BE("undefined");function s0(e){return e!==null&&!Vp(e)&&e.constructor!==null&&!Vp(e.constructor)&&$a(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const yz=Ns("ArrayBuffer");function vye(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&yz(e.buffer),t}const gye=BE("string"),$a=BE("function"),Ez=BE("number"),l0=e=>e!==null&&typeof e=="object",_ye=e=>e===!0||e===!1,By=e=>{if(LE(e)!=="object")return!1;const t=PO(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(_z in e)&&!(DE in e)},yye=e=>{if(!l0(e)||s0(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Eye=Ns("Date"),bye=Ns("File"),xye=Ns("Blob"),Sye=Ns("FileList"),Tye=e=>l0(e)&&$a(e.pipe),Aye=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||$a(e.append)&&((t=LE(e))==="formdata"||t==="object"&&$a(e.toString)&&e.toString()==="[object FormData]"))},Rye=Ns("URLSearchParams"),[Cye,Oye,wye,Nye]=["ReadableStream","Request","Response","Headers"].map(Ns),Mye=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function u0(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),tm(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{if(s0(e))return;const a=r?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let l;for(n=0;n<o;n++)l=a[n],t.call(null,e[l],l,e)}}function bz(e,t){if(s0(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const Jf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xz=e=>!Vp(e)&&e!==Jf;function wC(){const{caseless:e,skipUndefined:t}=xz(this)&&this||{},r={},n=(i,a)=>{const o=e&&bz(r,a)||a;By(r[o])&&By(i)?r[o]=wC(r[o],i):By(i)?r[o]=wC({},i):tm(i)?r[o]=i.slice():(!t||!Vp(i))&&(r[o]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&u0(arguments[i],n);return r}const Iye=(e,t,r,{allOwnKeys:n}={})=>(u0(t,(i,a)=>{r&&$a(i)?e[a]=gz(i,r):e[a]=i},{allOwnKeys:n}),e),Pye=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Dye=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Lye=(e,t,r,n)=>{let i,a,o;const l={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)o=i[a],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&PO(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Bye=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Fye=e=>{if(!e)return null;if(tm(e))return e;let t=e.length;if(!Ez(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Uye=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&PO(Uint8Array)),kye=(e,t)=>{const n=(e&&e[DE]).call(e);let i;for(;(i=n.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},jye=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},zye=Ns("HTMLFormElement"),Vye=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),t5=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Hye=Ns("RegExp"),Sz=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};u0(r,(i,a)=>{let o;(o=t(i,a,e))!==!1&&(n[a]=o||i)}),Object.defineProperties(e,n)},Xye=e=>{Sz(e,(t,r)=>{if($a(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if($a(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},qye=(e,t)=>{const r={},n=i=>{i.forEach(a=>{r[a]=!0})};return tm(e)?n(e):n(String(e).split(t)),r},Gye=()=>{},Wye=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function $ye(e){return!!(e&&$a(e.append)&&e[_z]==="FormData"&&e[DE])}const Yye=e=>{const t=new Array(10),r=(n,i)=>{if(l0(n)){if(t.indexOf(n)>=0)return;if(s0(n))return n;if(!("toJSON"in n)){t[i]=n;const a=tm(n)?[]:{};return u0(n,(o,l)=>{const c=r(o,i+1);!Vp(c)&&(a[l]=c)}),t[i]=void 0,a}}return n};return r(e,0)},Zye=Ns("AsyncFunction"),Kye=e=>e&&(l0(e)||$a(e))&&$a(e.then)&&$a(e.catch),Tz=((e,t)=>e?setImmediate:t?((r,n)=>(Jf.addEventListener("message",({source:i,data:a})=>{i===Jf&&a===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Jf.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",$a(Jf.postMessage)),Qye=typeof queueMicrotask<"u"?queueMicrotask.bind(Jf):typeof process<"u"&&process.nextTick||Tz,Jye=e=>e!=null&&$a(e[DE]),Xe={isArray:tm,isArrayBuffer:yz,isBuffer:s0,isFormData:Aye,isArrayBufferView:vye,isString:gye,isNumber:Ez,isBoolean:_ye,isObject:l0,isPlainObject:By,isEmptyObject:yye,isReadableStream:Cye,isRequest:Oye,isResponse:wye,isHeaders:Nye,isUndefined:Vp,isDate:Eye,isFile:bye,isBlob:xye,isRegExp:Hye,isFunction:$a,isStream:Tye,isURLSearchParams:Rye,isTypedArray:Uye,isFileList:Sye,forEach:u0,merge:wC,extend:Iye,trim:Mye,stripBOM:Pye,inherits:Dye,toFlatObject:Lye,kindOf:LE,kindOfTest:Ns,endsWith:Bye,toArray:Fye,forEachEntry:kye,matchAll:jye,isHTMLForm:zye,hasOwnProperty:t5,hasOwnProp:t5,reduceDescriptors:Sz,freezeMethods:Xye,toObjectSet:qye,toCamelCase:Vye,noop:Gye,toFiniteNumber:Wye,findKey:bz,global:Jf,isContextDefined:xz,isSpecCompliantForm:$ye,toJSONObject:Yye,isAsyncFn:Zye,isThenable:Kye,setImmediate:Tz,asap:Qye,isIterable:Jye};function Fr(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}Xe.inherits(Fr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Xe.toJSONObject(this.config),code:this.code,status:this.status}}});const Az=Fr.prototype,Rz={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Rz[e]={value:e}});Object.defineProperties(Fr,Rz);Object.defineProperty(Az,"isAxiosError",{value:!0});Fr.from=(e,t,r,n,i,a)=>{const o=Object.create(Az);Xe.toFlatObject(e,o,function(h){return h!==Error.prototype},f=>f!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return Fr.call(o,l,c,r,n,i),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",a&&Object.assign(o,a),o};const e1e=null;function NC(e){return Xe.isPlainObject(e)||Xe.isArray(e)}function Cz(e){return Xe.endsWith(e,"[]")?e.slice(0,-2):e}function r5(e,t,r){return e?e.concat(t).map(function(i,a){return i=Cz(i),!r&&a?"["+i+"]":i}).join(r?".":""):t}function t1e(e){return Xe.isArray(e)&&!e.some(NC)}const r1e=Xe.toFlatObject(Xe,{},null,function(t){return/^is[A-Z]/.test(t)});function FE(e,t,r){if(!Xe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Xe.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,b){return!Xe.isUndefined(b[E])});const n=r.metaTokens,i=r.visitor||h,a=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Xe.isSpecCompliantForm(t);if(!Xe.isFunction(i))throw new TypeError("visitor must be a function");function f(_){if(_===null)return"";if(Xe.isDate(_))return _.toISOString();if(Xe.isBoolean(_))return _.toString();if(!c&&Xe.isBlob(_))throw new Fr("Blob is not supported. Use a Buffer instead.");return Xe.isArrayBuffer(_)||Xe.isTypedArray(_)?c&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function h(_,E,b){let S=_;if(_&&!b&&typeof _=="object"){if(Xe.endsWith(E,"{}"))E=n?E:E.slice(0,-2),_=JSON.stringify(_);else if(Xe.isArray(_)&&t1e(_)||(Xe.isFileList(_)||Xe.endsWith(E,"[]"))&&(S=Xe.toArray(_)))return E=Cz(E),S.forEach(function(C,M){!(Xe.isUndefined(C)||C===null)&&t.append(o===!0?r5([E],M,a):o===null?E:E+"[]",f(C))}),!1}return NC(_)?!0:(t.append(r5(b,E,a),f(_)),!1)}const p=[],v=Object.assign(r1e,{defaultVisitor:h,convertValue:f,isVisitable:NC});function g(_,E){if(!Xe.isUndefined(_)){if(p.indexOf(_)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(_),Xe.forEach(_,function(S,T){(!(Xe.isUndefined(S)||S===null)&&i.call(t,S,Xe.isString(T)?T.trim():T,E,v))===!0&&g(S,E?E.concat(T):[T])}),p.pop()}}if(!Xe.isObject(e))throw new TypeError("data must be an object");return g(e),t}function n5(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function DO(e,t){this._pairs=[],e&&FE(e,this,t)}const Oz=DO.prototype;Oz.append=function(t,r){this._pairs.push([t,r])};Oz.toString=function(t){const r=t?function(n){return t.call(this,n,n5)}:n5;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function n1e(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function wz(e,t,r){if(!t)return e;const n=r&&r.encode||n1e;Xe.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let a;if(i?a=i(t,r):a=Xe.isURLSearchParams(t)?t.toString():new DO(t,r).toString(n),a){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class i5{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Xe.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Nz={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},i1e=typeof URLSearchParams<"u"?URLSearchParams:DO,a1e=typeof FormData<"u"?FormData:null,o1e=typeof Blob<"u"?Blob:null,s1e={isBrowser:!0,classes:{URLSearchParams:i1e,FormData:a1e,Blob:o1e},protocols:["http","https","file","blob","url","data"]},LO=typeof window<"u"&&typeof document<"u",MC=typeof navigator=="object"&&navigator||void 0,l1e=LO&&(!MC||["ReactNative","NativeScript","NS"].indexOf(MC.product)<0),u1e=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",c1e=LO&&window.location.href||"http://localhost",f1e=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:LO,hasStandardBrowserEnv:l1e,hasStandardBrowserWebWorkerEnv:u1e,navigator:MC,origin:c1e},Symbol.toStringTag,{value:"Module"})),fa={...f1e,...s1e};function d1e(e,t){return FE(e,new fa.classes.URLSearchParams,{visitor:function(r,n,i,a){return fa.isNode&&Xe.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function h1e(e){return Xe.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function p1e(e){const t={},r=Object.keys(e);let n;const i=r.length;let a;for(n=0;n<i;n++)a=r[n],t[a]=e[a];return t}function Mz(e){function t(r,n,i,a){let o=r[a++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=a>=r.length;return o=!o&&Xe.isArray(i)?i.length:o,c?(Xe.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!l):((!i[o]||!Xe.isObject(i[o]))&&(i[o]=[]),t(r,n,i[o],a)&&Xe.isArray(i[o])&&(i[o]=p1e(i[o])),!l)}if(Xe.isFormData(e)&&Xe.isFunction(e.entries)){const r={};return Xe.forEachEntry(e,(n,i)=>{t(h1e(n),i,r,0)}),r}return null}function m1e(e,t,r){if(Xe.isString(e))try{return(t||JSON.parse)(e),Xe.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const c0={transitional:Nz,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,a=Xe.isObject(t);if(a&&Xe.isHTMLForm(t)&&(t=new FormData(t)),Xe.isFormData(t))return i?JSON.stringify(Mz(t)):t;if(Xe.isArrayBuffer(t)||Xe.isBuffer(t)||Xe.isStream(t)||Xe.isFile(t)||Xe.isBlob(t)||Xe.isReadableStream(t))return t;if(Xe.isArrayBufferView(t))return t.buffer;if(Xe.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return d1e(t,this.formSerializer).toString();if((l=Xe.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return FE(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return a||i?(r.setContentType("application/json",!1),m1e(t)):t}],transformResponse:[function(t){const r=this.transitional||c0.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(Xe.isResponse(t)||Xe.isReadableStream(t))return t;if(t&&Xe.isString(t)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?Fr.from(l,Fr.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fa.classes.FormData,Blob:fa.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Xe.forEach(["delete","get","head","post","put","patch"],e=>{c0.headers[e]={}});const v1e=Xe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),g1e=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||t[r]&&v1e[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},a5=Symbol("internals");function $v(e){return e&&String(e).trim().toLowerCase()}function Fy(e){return e===!1||e==null?e:Xe.isArray(e)?e.map(Fy):String(e)}function _1e(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const y1e=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function QR(e,t,r,n,i){if(Xe.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!Xe.isString(t)){if(Xe.isString(n))return t.indexOf(n)!==-1;if(Xe.isRegExp(n))return n.test(t)}}function E1e(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function b1e(e,t){const r=Xe.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,a,o){return this[n].call(this,t,i,a,o)},configurable:!0})})}let Ya=class{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function a(l,c,f){const h=$v(c);if(!h)throw new Error("header name must be a non-empty string");const p=Xe.findKey(i,h);(!p||i[p]===void 0||f===!0||f===void 0&&i[p]!==!1)&&(i[p||c]=Fy(l))}const o=(l,c)=>Xe.forEach(l,(f,h)=>a(f,h,c));if(Xe.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(Xe.isString(t)&&(t=t.trim())&&!y1e(t))o(g1e(t),r);else if(Xe.isObject(t)&&Xe.isIterable(t)){let l={},c,f;for(const h of t){if(!Xe.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[f=h[0]]=(c=l[f])?Xe.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,r)}else t!=null&&a(r,t,n);return this}get(t,r){if(t=$v(t),t){const n=Xe.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return _1e(i);if(Xe.isFunction(r))return r.call(this,i,n);if(Xe.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=$v(t),t){const n=Xe.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||QR(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function a(o){if(o=$v(o),o){const l=Xe.findKey(n,o);l&&(!r||QR(n,n[l],l,r))&&(delete n[l],i=!0)}}return Xe.isArray(t)?t.forEach(a):a(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const a=r[n];(!t||QR(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const r=this,n={};return Xe.forEach(this,(i,a)=>{const o=Xe.findKey(n,a);if(o){r[o]=Fy(i),delete r[a];return}const l=t?E1e(a):String(a).trim();l!==a&&delete r[a],r[l]=Fy(i),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Xe.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&Xe.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[a5]=this[a5]={accessors:{}}).accessors,i=this.prototype;function a(o){const l=$v(o);n[l]||(b1e(i,o),n[l]=!0)}return Xe.isArray(t)?t.forEach(a):a(t),this}};Ya.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Xe.reduceDescriptors(Ya.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Xe.freezeMethods(Ya);function JR(e,t){const r=this||c0,n=t||r,i=Ya.from(n.headers);let a=n.data;return Xe.forEach(e,function(l){a=l.call(r,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function Iz(e){return!!(e&&e.__CANCEL__)}function rm(e,t,r){Fr.call(this,e??"canceled",Fr.ERR_CANCELED,t,r),this.name="CanceledError"}Xe.inherits(rm,Fr,{__CANCEL__:!0});function Pz(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Fr("Request failed with status code "+r.status,[Fr.ERR_BAD_REQUEST,Fr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function x1e(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function S1e(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,a=0,o;return t=t!==void 0?t:1e3,function(c){const f=Date.now(),h=n[a];o||(o=f),r[i]=c,n[i]=f;let p=a,v=0;for(;p!==i;)v+=r[p++],p=p%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),f-o<t)return;const g=h&&f-h;return g?Math.round(v*1e3/g):void 0}}function T1e(e,t){let r=0,n=1e3/t,i,a;const o=(f,h=Date.now())=>{r=h,i=null,a&&(clearTimeout(a),a=null),e(...f)};return[(...f)=>{const h=Date.now(),p=h-r;p>=n?o(f,h):(i=f,a||(a=setTimeout(()=>{a=null,o(i)},n-p)))},()=>i&&o(i)]}const q1=(e,t,r=3)=>{let n=0;const i=S1e(50,250);return T1e(a=>{const o=a.loaded,l=a.lengthComputable?a.total:void 0,c=o-n,f=i(c),h=o<=l;n=o;const p={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:f||void 0,estimated:f&&l&&h?(l-o)/f:void 0,event:a,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(p)},r)},o5=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},s5=e=>(...t)=>Xe.asap(()=>e(...t)),A1e=fa.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,fa.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(fa.origin),fa.navigator&&/(msie|trident)/i.test(fa.navigator.userAgent)):()=>!0,R1e=fa.hasStandardBrowserEnv?{write(e,t,r,n,i,a){const o=[e+"="+encodeURIComponent(t)];Xe.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),Xe.isString(n)&&o.push("path="+n),Xe.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function C1e(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function O1e(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Dz(e,t,r){let n=!C1e(t);return e&&(n||r==!1)?O1e(e,t):t}const l5=e=>e instanceof Ya?{...e}:e;function xd(e,t){t=t||{};const r={};function n(f,h,p,v){return Xe.isPlainObject(f)&&Xe.isPlainObject(h)?Xe.merge.call({caseless:v},f,h):Xe.isPlainObject(h)?Xe.merge({},h):Xe.isArray(h)?h.slice():h}function i(f,h,p,v){if(Xe.isUndefined(h)){if(!Xe.isUndefined(f))return n(void 0,f,p,v)}else return n(f,h,p,v)}function a(f,h){if(!Xe.isUndefined(h))return n(void 0,h)}function o(f,h){if(Xe.isUndefined(h)){if(!Xe.isUndefined(f))return n(void 0,f)}else return n(void 0,h)}function l(f,h,p){if(p in t)return n(f,h);if(p in e)return n(void 0,f)}const c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(f,h,p)=>i(l5(f),l5(h),p,!0)};return Xe.forEach(Object.keys({...e,...t}),function(h){const p=c[h]||i,v=p(e[h],t[h],h);Xe.isUndefined(v)&&p!==l||(r[h]=v)}),r}const Lz=e=>{const t=xd({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:l}=t;if(t.headers=o=Ya.from(o),t.url=wz(Dz(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Xe.isFormData(r)){if(fa.hasStandardBrowserEnv||fa.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Xe.isFunction(r.getHeaders)){const c=r.getHeaders(),f=["content-type","content-length"];Object.entries(c).forEach(([h,p])=>{f.includes(h.toLowerCase())&&o.set(h,p)})}}if(fa.hasStandardBrowserEnv&&(n&&Xe.isFunction(n)&&(n=n(t)),n||n!==!1&&A1e(t.url))){const c=i&&a&&R1e.read(a);c&&o.set(i,c)}return t},w1e=typeof XMLHttpRequest<"u",N1e=w1e&&function(e){return new Promise(function(r,n){const i=Lz(e);let a=i.data;const o=Ya.from(i.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:f}=i,h,p,v,g,_;function E(){g&&g(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function S(){if(!b)return;const C=Ya.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),D={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:C,config:e,request:b};Pz(function(N){r(N),E()},function(N){n(N),E()},D),b=null}"onloadend"in b?b.onloadend=S:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(S)},b.onabort=function(){b&&(n(new Fr("Request aborted",Fr.ECONNABORTED,e,b)),b=null)},b.onerror=function(M){const D=M&&M.message?M.message:"Network Error",I=new Fr(D,Fr.ERR_NETWORK,e,b);I.event=M||null,n(I),b=null},b.ontimeout=function(){let M=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const D=i.transitional||Nz;i.timeoutErrorMessage&&(M=i.timeoutErrorMessage),n(new Fr(M,D.clarifyTimeoutError?Fr.ETIMEDOUT:Fr.ECONNABORTED,e,b)),b=null},a===void 0&&o.setContentType(null),"setRequestHeader"in b&&Xe.forEach(o.toJSON(),function(M,D){b.setRequestHeader(D,M)}),Xe.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),l&&l!=="json"&&(b.responseType=i.responseType),f&&([v,_]=q1(f,!0),b.addEventListener("progress",v)),c&&b.upload&&([p,g]=q1(c),b.upload.addEventListener("progress",p),b.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(h=C=>{b&&(n(!C||C.type?new rm(null,e,b):C),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const T=x1e(i.url);if(T&&fa.protocols.indexOf(T)===-1){n(new Fr("Unsupported protocol "+T+":",Fr.ERR_BAD_REQUEST,e));return}b.send(a||null)})},M1e=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,i;const a=function(f){if(!i){i=!0,l();const h=f instanceof Error?f:this.reason;n.abort(h instanceof Fr?h:new rm(h instanceof Error?h.message:h))}};let o=t&&setTimeout(()=>{o=null,a(new Fr(`timeout ${t} of ms exceeded`,Fr.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(f=>{f.unsubscribe?f.unsubscribe(a):f.removeEventListener("abort",a)}),e=null)};e.forEach(f=>f.addEventListener("abort",a));const{signal:c}=n;return c.unsubscribe=()=>Xe.asap(l),c}},I1e=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},P1e=async function*(e,t){for await(const r of D1e(e))yield*I1e(r,t)},D1e=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},u5=(e,t,r,n)=>{const i=P1e(e,t);let a=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:f,value:h}=await i.next();if(f){l(),c.close();return}let p=h.byteLength;if(r){let v=a+=p;r(v)}c.enqueue(new Uint8Array(h))}catch(f){throw l(f),f}},cancel(c){return l(c),i.return()}},{highWaterMark:2})},c5=64*1024,{isFunction:py}=Xe,L1e=(({Request:e,Response:t})=>({Request:e,Response:t}))(Xe.global),{ReadableStream:f5,TextEncoder:d5}=Xe.global,h5=(e,...t)=>{try{return!!e(...t)}catch{return!1}},B1e=e=>{e=Xe.merge.call({skipUndefined:!0},L1e,e);const{fetch:t,Request:r,Response:n}=e,i=t?py(t):typeof fetch=="function",a=py(r),o=py(n);if(!i)return!1;const l=i&&py(f5),c=i&&(typeof d5=="function"?(_=>E=>_.encode(E))(new d5):async _=>new Uint8Array(await new r(_).arrayBuffer())),f=a&&l&&h5(()=>{let _=!1;const E=new r(fa.origin,{body:new f5,method:"POST",get duplex(){return _=!0,"half"}}).headers.has("Content-Type");return _&&!E}),h=o&&l&&h5(()=>Xe.isReadableStream(new n("").body)),p={stream:h&&(_=>_.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(_=>{!p[_]&&(p[_]=(E,b)=>{let S=E&&E[_];if(S)return S.call(E);throw new Fr(`Response type '${_}' is not supported`,Fr.ERR_NOT_SUPPORT,b)})});const v=async _=>{if(_==null)return 0;if(Xe.isBlob(_))return _.size;if(Xe.isSpecCompliantForm(_))return(await new r(fa.origin,{method:"POST",body:_}).arrayBuffer()).byteLength;if(Xe.isArrayBufferView(_)||Xe.isArrayBuffer(_))return _.byteLength;if(Xe.isURLSearchParams(_)&&(_=_+""),Xe.isString(_))return(await c(_)).byteLength},g=async(_,E)=>{const b=Xe.toFiniteNumber(_.getContentLength());return b??v(E)};return async _=>{let{url:E,method:b,data:S,signal:T,cancelToken:C,timeout:M,onDownloadProgress:D,onUploadProgress:I,responseType:N,headers:j,withCredentials:re="same-origin",fetchOptions:Q}=Lz(_),X=t||fetch;N=N?(N+"").toLowerCase():"text";let R=M1e([T,C&&C.toAbortSignal()],M),P=null;const V=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let le;try{if(I&&f&&b!=="get"&&b!=="head"&&(le=await g(j,S))!==0){let ge=new r(E,{method:"POST",body:S,duplex:"half"}),ye;if(Xe.isFormData(S)&&(ye=ge.headers.get("content-type"))&&j.setContentType(ye),ge.body){const[Pe,tt]=o5(le,q1(s5(I)));S=u5(ge.body,c5,Pe,tt)}}Xe.isString(re)||(re=re?"include":"omit");const w=a&&"credentials"in r.prototype,z={...Q,signal:R,method:b.toUpperCase(),headers:j.normalize().toJSON(),body:S,duplex:"half",credentials:w?re:void 0};P=a&&new r(E,z);let H=await(a?X(P,Q):X(E,z));const ee=h&&(N==="stream"||N==="response");if(h&&(D||ee&&V)){const ge={};["status","statusText","headers"].forEach(We=>{ge[We]=H[We]});const ye=Xe.toFiniteNumber(H.headers.get("content-length")),[Pe,tt]=D&&o5(ye,q1(s5(D),!0))||[];H=new n(u5(H.body,c5,Pe,()=>{tt&&tt(),V&&V()}),ge)}N=N||"text";let oe=await p[Xe.findKey(p,N)||"text"](H,_);return!ee&&V&&V(),await new Promise((ge,ye)=>{Pz(ge,ye,{data:oe,headers:Ya.from(H.headers),status:H.status,statusText:H.statusText,config:_,request:P})})}catch(w){throw V&&V(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new Fr("Network Error",Fr.ERR_NETWORK,_,P),{cause:w.cause||w}):Fr.from(w,w&&w.code,_,P)}}},F1e=new Map,Bz=e=>{let t=e?e.env:{};const{fetch:r,Request:n,Response:i}=t,a=[n,i,r];let o=a.length,l=o,c,f,h=F1e;for(;l--;)c=a[l],f=h.get(c),f===void 0&&h.set(c,f=l?new Map:B1e(t)),h=f;return f};Bz();const IC={http:e1e,xhr:N1e,fetch:{get:Bz}};Xe.forEach(IC,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const p5=e=>`- ${e}`,U1e=e=>Xe.isFunction(e)||e===null||e===!1,Fz={getAdapter:(e,t)=>{e=Xe.isArray(e)?e:[e];const{length:r}=e;let n,i;const a={};for(let o=0;o<r;o++){n=e[o];let l;if(i=n,!U1e(n)&&(i=IC[(l=String(n)).toLowerCase()],i===void 0))throw new Fr(`Unknown adapter '${l}'`);if(i&&(Xe.isFunction(i)||(i=i.get(t))))break;a[l||"#"+o]=i}if(!i){const o=Object.entries(a).map(([c,f])=>`adapter ${c} `+(f===!1?"is not supported by the environment":"is not available in the build"));let l=r?o.length>1?`since :
`+o.map(p5).join(`
`):" "+p5(o[0]):"as no adapter specified";throw new Fr("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:IC};function e2(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new rm(null,e)}function m5(e){return e2(e),e.headers=Ya.from(e.headers),e.data=JR.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Fz.getAdapter(e.adapter||c0.adapter,e)(e).then(function(n){return e2(e),n.data=JR.call(e,e.transformResponse,n),n.headers=Ya.from(n.headers),n},function(n){return Iz(n)||(e2(e),n&&n.response&&(n.response.data=JR.call(e,e.transformResponse,n.response),n.response.headers=Ya.from(n.response.headers))),Promise.reject(n)})}const Uz="1.12.2",UE={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{UE[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const v5={};UE.transitional=function(t,r,n){function i(a,o){return"[Axios v"+Uz+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return(a,o,l)=>{if(t===!1)throw new Fr(i(o," has been removed"+(r?" in "+r:"")),Fr.ERR_DEPRECATED);return r&&!v5[o]&&(v5[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,o,l):!0}};UE.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function k1e(e,t,r){if(typeof e!="object")throw new Fr("options must be an object",Fr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const a=n[i],o=t[a];if(o){const l=e[a],c=l===void 0||o(l,a,e);if(c!==!0)throw new Fr("option "+a+" must be "+c,Fr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Fr("Unknown option "+a,Fr.ERR_BAD_OPTION)}}const Uy={assertOptions:k1e,validators:UE},el=Uy.validators;let od=class{constructor(t){this.defaults=t||{},this.interceptors={request:new i5,response:new i5}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=xd(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:a}=r;n!==void 0&&Uy.assertOptions(n,{silentJSONParsing:el.transitional(el.boolean),forcedJSONParsing:el.transitional(el.boolean),clarifyTimeoutError:el.transitional(el.boolean)},!1),i!=null&&(Xe.isFunction(i)?r.paramsSerializer={serialize:i}:Uy.assertOptions(i,{encode:el.function,serialize:el.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Uy.assertOptions(r,{baseUrl:el.spelling("baseURL"),withXsrfToken:el.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=a&&Xe.merge(a.common,a[r.method]);a&&Xe.forEach(["delete","get","head","post","put","patch","common"],_=>{delete a[_]}),r.headers=Ya.concat(o,a);const l=[];let c=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(r)===!1||(c=c&&E.synchronous,l.unshift(E.fulfilled,E.rejected))});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let h,p=0,v;if(!c){const _=[m5.bind(this),void 0];for(_.unshift(...l),_.push(...f),v=_.length,h=Promise.resolve(r);p<v;)h=h.then(_[p++],_[p++]);return h}v=l.length;let g=r;for(;p<v;){const _=l[p++],E=l[p++];try{g=_(g)}catch(b){E.call(this,b);break}}try{h=m5.call(this,g)}catch(_){return Promise.reject(_)}for(p=0,v=f.length;p<v;)h=h.then(f[p++],f[p++]);return h}getUri(t){t=xd(this.defaults,t);const r=Dz(t.baseURL,t.url,t.allowAbsoluteUrls);return wz(r,t.params,t.paramsSerializer)}};Xe.forEach(["delete","get","head","options"],function(t){od.prototype[t]=function(r,n){return this.request(xd(n||{},{method:t,url:r,data:(n||{}).data}))}});Xe.forEach(["post","put","patch"],function(t){function r(n){return function(a,o,l){return this.request(xd(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}od.prototype[t]=r(),od.prototype[t+"Form"]=r(!0)});let j1e=class kz{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(l=>{n.subscribe(l),a=l}).then(i);return o.cancel=function(){n.unsubscribe(a)},o},t(function(a,o,l){n.reason||(n.reason=new rm(a,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new kz(function(i){t=i}),cancel:t}}};function z1e(e){return function(r){return e.apply(null,r)}}function V1e(e){return Xe.isObject(e)&&e.isAxiosError===!0}const PC={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(PC).forEach(([e,t])=>{PC[t]=e});function jz(e){const t=new od(e),r=gz(od.prototype.request,t);return Xe.extend(r,od.prototype,t,{allOwnKeys:!0}),Xe.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return jz(xd(e,i))},r}const ci=jz(c0);ci.Axios=od;ci.CanceledError=rm;ci.CancelToken=j1e;ci.isCancel=Iz;ci.VERSION=Uz;ci.toFormData=FE;ci.AxiosError=Fr;ci.Cancel=ci.CanceledError;ci.all=function(t){return Promise.all(t)};ci.spread=z1e;ci.isAxiosError=V1e;ci.mergeConfig=xd;ci.AxiosHeaders=Ya;ci.formToJSON=e=>Mz(Xe.isHTMLForm(e)?new FormData(e):e);ci.getAdapter=Fz.getAdapter;ci.HttpStatusCode=PC;ci.default=ci;const{Axios:nbe,AxiosError:ibe,CanceledError:abe,isCancel:obe,CancelToken:sbe,VERSION:lbe,all:ube,Cancel:cbe,isAxiosError:fbe,spread:dbe,toFormData:hbe,AxiosHeaders:pbe,HttpStatusCode:mbe,formToJSON:vbe,getAdapter:gbe,mergeConfig:_be}=ci,H1e=({onRequest:e,onSseError:t,onSseEvent:r,responseTransformer:n,responseValidator:i,sseDefaultRetryDelay:a,sseMaxRetryAttempts:o,sseMaxRetryDelay:l,sseSleepFn:c,url:f,...h})=>{let p;const v=c??(E=>new Promise(b=>setTimeout(b,E)));return{stream:async function*(){let E=a??3e3,b=0;const S=h.signal??new AbortController().signal;for(;!S.aborted;){b++;const T=h.headers instanceof Headers?h.headers:new Headers(h.headers);p!==void 0&&T.set("Last-Event-ID",p);try{const C={redirect:"follow",...h,body:h.serializedBody,headers:T,signal:S};let M=new Request(f,C);e&&(M=await e(f,C));const I=await(h.fetch??globalThis.fetch)(M);if(!I.ok)throw new Error(`SSE failed: ${I.status} ${I.statusText}`);if(!I.body)throw new Error("No body in SSE response");const N=I.body.pipeThrough(new TextDecoderStream).getReader();let j="";const re=()=>{try{N.cancel()}catch{}};S.addEventListener("abort",re);try{for(;;){const{done:Q,value:X}=await N.read();if(Q)break;j+=X;const R=j.split(`

`);j=R.pop()??"";for(const P of R){const V=P.split(`
`),le=[];let w;for(const ee of V)if(ee.startsWith("data:"))le.push(ee.replace(/^data:\s*/,""));else if(ee.startsWith("event:"))w=ee.replace(/^event:\s*/,"");else if(ee.startsWith("id:"))p=ee.replace(/^id:\s*/,"");else if(ee.startsWith("retry:")){const oe=Number.parseInt(ee.replace(/^retry:\s*/,""),10);Number.isNaN(oe)||(E=oe)}let z,H=!1;if(le.length){const ee=le.join(`
`);try{z=JSON.parse(ee),H=!0}catch{z=ee}}H&&(i&&await i(z),n&&(z=await n(z))),r?.({data:z,event:w,id:p,retry:E}),le.length&&(yield z)}}}finally{S.removeEventListener("abort",re),N.releaseLock()}break}catch(C){if(t?.(C),o!==void 0&&b>=o)break;const M=Math.min(E*2**(b-1),l??3e4);await v(M)}}}()}},X1e=e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},q1e=e=>{switch(e){case"form":return",";case"pipeDelimited":return"|";case"spaceDelimited":return"%20";default:return","}},G1e=e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},zz=({allowReserved:e,explode:t,name:r,style:n,value:i})=>{if(!t){const l=(e?i:i.map(c=>encodeURIComponent(c))).join(q1e(n));switch(n){case"label":return`.${l}`;case"matrix":return`;${r}=${l}`;case"simple":return l;default:return`${r}=${l}`}}const a=X1e(n),o=i.map(l=>n==="label"||n==="simple"?e?l:encodeURIComponent(l):kE({allowReserved:e,name:r,value:l})).join(a);return n==="label"||n==="matrix"?a+o:o},kE=({allowReserved:e,name:t,value:r})=>{if(r==null)return"";if(typeof r=="object")throw new Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return`${t}=${e?r:encodeURIComponent(r)}`},Vz=({allowReserved:e,explode:t,name:r,style:n,value:i,valueOnly:a})=>{if(i instanceof Date)return a?i.toISOString():`${r}=${i.toISOString()}`;if(n!=="deepObject"&&!t){let c=[];Object.entries(i).forEach(([h,p])=>{c=[...c,h,e?p:encodeURIComponent(p)]});const f=c.join(",");switch(n){case"form":return`${r}=${f}`;case"label":return`.${f}`;case"matrix":return`;${r}=${f}`;default:return f}}const o=G1e(n),l=Object.entries(i).map(([c,f])=>kE({allowReserved:e,name:n==="deepObject"?`${r}[${c}]`:c,value:f})).join(o);return n==="label"||n==="matrix"?o+l:l},W1e=/\{[^{}]+\}/g,$1e=({path:e,url:t})=>{let r=t;const n=t.match(W1e);if(n)for(const i of n){let a=!1,o=i.substring(1,i.length-1),l="simple";o.endsWith("*")&&(a=!0,o=o.substring(0,o.length-1)),o.startsWith(".")?(o=o.substring(1),l="label"):o.startsWith(";")&&(o=o.substring(1),l="matrix");const c=e[o];if(c==null)continue;if(Array.isArray(c)){r=r.replace(i,zz({explode:a,name:o,style:l,value:c}));continue}if(typeof c=="object"){r=r.replace(i,Vz({explode:a,name:o,style:l,value:c,valueOnly:!0}));continue}if(l==="matrix"){r=r.replace(i,`;${kE({name:o,value:c})}`);continue}const f=encodeURIComponent(l==="label"?`.${c}`:c);r=r.replace(i,f)}return r},Y1e=({baseUrl:e,path:t,query:r,querySerializer:n,url:i})=>{const a=i.startsWith("/")?i:`/${i}`;let o=(e??"")+a;t&&(o=$1e({path:t,url:o}));let l=r?n(r):"";return l.startsWith("?")&&(l=l.substring(1)),l&&(o+=`?${l}`),o};function Z1e(e){const t=e.body!==void 0;if(t&&e.bodySerializer)return"serializedBody"in e?e.serializedBody!==void 0&&e.serializedBody!==""?e.serializedBody:null:e.body!==""?e.body:null;if(t)return e.body}const K1e=async(e,t)=>{const r=typeof t=="function"?await t(e):t;if(r)return e.scheme==="bearer"?`Bearer ${r}`:e.scheme==="basic"?`Basic ${btoa(r)}`:r},Q1e=({allowReserved:e,array:t,object:r}={})=>i=>{const a=[];if(i&&typeof i=="object")for(const o in i){const l=i[o];if(l!=null)if(Array.isArray(l)){const c=zz({allowReserved:e,explode:!0,name:o,style:"form",value:l,...t});c&&a.push(c)}else if(typeof l=="object"){const c=Vz({allowReserved:e,explode:!0,name:o,style:"deepObject",value:l,...r});c&&a.push(c)}else{const c=kE({allowReserved:e,name:o,value:l});c&&a.push(c)}}return a.join("&")},J1e=(e,t)=>t?t in e.headers||e.query?.[t]?!0:"Cookie"in e.headers&&e.headers.Cookie&&typeof e.headers.Cookie=="string"?e.headers.Cookie.includes(`${t}=`):!1:!1,eEe=async({security:e,...t})=>{for(const r of e){if(J1e(t,r.name))continue;const n=await K1e(r,t.auth);if(!n)continue;const i=r.name??"Authorization";switch(r.in){case"query":t.query||(t.query={}),t.query[i]=n;break;case"cookie":{const a=`${i}=${n}`;t.headers.Cookie="Cookie"in t.headers&&t.headers.Cookie?`${t.headers.Cookie}; ${a}`:a;break}case"header":default:t.headers[i]=n;break}}},g5=e=>{const t=e.axios?.defaults?.baseURL,r=e.baseURL&&typeof e.baseURL=="string"?e.baseURL:t;return Y1e({baseUrl:r,path:e.path,query:e.paramsSerializer?void 0:e.query,querySerializer:typeof e.querySerializer=="function"?e.querySerializer:Q1e(e.querySerializer),url:e.url})},_5=(e,t)=>{const r={...e,...t};return r.headers=DC(e.headers,t.headers),r},tEe=["common","delete","get","head","patch","post","put"],DC=(...e)=>{const t={};for(const r of e){if(!r||typeof r!="object")continue;const n=Object.entries(r);for(const[i,a]of n)if(tEe.includes(i)&&typeof a=="object")t[i]={...t[i],...a};else if(a===null)delete t[i];else if(Array.isArray(a))for(const o of a)t[i]=[...t[i]??[],o];else a!==void 0&&(t[i]=typeof a=="object"?JSON.stringify(a):a)}return t},Hz=(e={})=>({...e}),rEe=(e={})=>{let t=_5(Hz(),e),r;if(t.axios&&!("Axios"in t.axios))r=t.axios;else{const{auth:f,...h}=t;r=ci.create(h)}const n=()=>({...t}),i=f=>(t=_5(t,f),r.defaults={...r.defaults,...t,headers:DC(r.defaults.headers,t.headers)},n()),a=async f=>{const h={...t,...f,axios:f.axios??t.axios??r,headers:DC(t.headers,f.headers)};h.security&&await eEe({...h,security:h.security}),h.requestValidator&&await h.requestValidator(h),h.body!==void 0&&h.bodySerializer&&(h.body=h.bodySerializer(h.body));const p=g5(h);return{opts:h,url:p}},o=async f=>{const{opts:h,url:p}=await a(f);try{const v=h.axios,{auth:g,..._}=h,E=await v({..._,baseURL:"",data:Z1e(h),headers:h.headers,params:h.paramsSerializer?h.query:void 0,url:p});let{data:b}=E;return h.responseType==="json"&&(h.responseValidator&&await h.responseValidator(b),h.responseTransformer&&(b=await h.responseTransformer(b))),{...E,data:b??{}}}catch(v){const g=v;if(h.throwOnError)throw g;return g.error=g.response?.data??{},g}},l=f=>h=>o({...h,method:f}),c=f=>async h=>{const{opts:p,url:v}=await a(h);return H1e({...p,body:p.body,headers:p.headers,method:f,signal:p.signal,url:v})};return{buildUrl:g5,connect:l("CONNECT"),delete:l("DELETE"),get:l("GET"),getConfig:n,head:l("HEAD"),instance:r,options:l("OPTIONS"),patch:l("PATCH"),post:l("POST"),put:l("PUT"),request:o,setConfig:i,sse:{connect:c("CONNECT"),delete:c("DELETE"),get:c("GET"),head:c("HEAD"),options:c("OPTIONS"),patch:c("PATCH"),post:c("POST"),put:c("PUT"),trace:c("TRACE")},trace:l("TRACE")}},yu=rEe(Hz()),nEe=e=>(e?.client??yu).get({responseType:"json",url:"/api/sentiment-intensity",...e}),iEe=e=>(e.client??yu).post({responseType:"json",url:"/api/sentiment-intensity",...e,headers:{"Content-Type":"application/json",...e.headers}}),aEe=e=>(e?.client??yu).get({responseType:"json",url:"/api/sentiment-intensity/search",...e}),oEe=e=>(e.client??yu).delete({url:"/api/sentiment-intensity/{id}",...e}),sEe=e=>(e.client??yu).patch({responseType:"json",url:"/api/sentiment-intensity/{id}",...e,headers:{"Content-Type":"application/json",...e.headers}}),lEe=e=>(e?.client??yu).get({responseType:"json",url:"/api/sentiment-event",...e}),uEe=e=>(e.client??yu).post({responseType:"json",url:"/api/sentiment-event",...e,headers:{"Content-Type":"application/json",...e.headers}}),cEe=e=>(e.client??yu).delete({url:"/api/sentiment-event/{id}",...e}),fEe=e=>(e.client??yu).patch({responseType:"json",url:"/api/sentiment-event/{id}",...e,headers:{"Content-Type":"application/json",...e.headers}}),Sd={all:["sentiment-intensity"],lists:()=>[...Sd.all,"list"],search:e=>[...Sd.all,"search",e]},dEe=()=>kC({queryKey:Sd.lists(),queryFn:async()=>(await nEe()).data}),hEe=e=>kC({queryKey:Sd.search(e),queryFn:async()=>(await aEe({query:{...e.title&&{title:e.title},...e.minIntensity!==void 0&&{minIntensity:e.minIntensity},...e.maxIntensity!==void 0&&{maxIntensity:e.maxIntensity}}})).data,enabled:!!(e.title||e.minIntensity!==void 0||e.maxIntensity!==void 0)}),pEe=()=>{const e=Zc();return Xp({mutationFn:async t=>(await iEe({body:{title:t.title,intensity:t.intensity,...t.description&&{description:t.description}}})).data,onSuccess:()=>{e.invalidateQueries({queryKey:Sd.lists()})}})},mEe=()=>{const e=Zc();return Xp({mutationFn:async({id:t,data:r})=>(await sEe({path:{id:t.toString()},body:r})).data,onSuccess:()=>{e.invalidateQueries({queryKey:Sd.lists()})}})},vEe=()=>{const e=Zc();return Xp({mutationFn:async t=>{await oEe({path:{id:t.toString()}})},onSuccess:()=>{e.invalidateQueries({queryKey:Sd.lists()})}})},gEe=()=>{const{searchTitle:e,searchMinIntensity:t,searchMaxIntensity:r,isCreateDialogOpen:n,isEditDialogOpen:i,editingItem:a,setSearchTitle:o,setSearchMinIntensity:l,setSearchMaxIntensity:c,clearSearch:f,openCreateDialog:h,closeCreateDialog:p,openEditDialog:v,closeEditDialog:g}=vz(),{data:_=[],isLoading:E}=dEe(),b={title:e||void 0,minIntensity:t||void 0,maxIntensity:r||void 0},{data:S=[],isLoading:T}=hEe(b),C=pEe(),M=mEe(),D=vEe(),I=!!(e||t!==null||r!==null),N=I?S:_,j=I?T:E,re=V=>{o(V.title||""),l(V.minIntensity??null),c(V.maxIntensity??null)},Q=()=>{f()},X=async V=>{try{await C.mutateAsync(V),p(),hn.success("情感强度创建成功")}catch(le){hn.error("创建失败，请稍后重试"),console.error("Create error:",le)}},R=async V=>{if(a)try{await M.mutateAsync({id:a.id,data:V}),g(),hn.success("情感强度更新成功")}catch(le){hn.error("更新失败，请稍后重试"),console.error("Update error:",le)}},P=async V=>{if(V&&window.confirm(`确定要删除"${V.title}"吗？此操作不可撤销。`))try{await D.mutateAsync(V.id),hn.success("情感强度删除成功")}catch(le){hn.error("删除失败，请稍后重试"),console.error("Delete error:",le)}};return A.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[A.jsx(xs,{className:"p-6",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("h1",{className:"text-2xl font-bold mb-2",children:"情感强度管理"}),A.jsx("p",{className:"text-gray-600",children:"管理系统中的情感强度定义，用于情感分析和舆情监控。"})]}),A.jsxs($n,{onClick:h,children:[A.jsx(RO,{className:"w-4 h-4 mr-2"}),"新建情感强度"]})]})}),A.jsx(pye,{onSearch:re,onClear:Q}),I&&A.jsx(xs,{className:"p-4 bg-blue-50 border-blue-200",children:A.jsx("div",{className:"text-sm text-blue-800",children:T?"搜索中...":A.jsxs(A.Fragment,{children:["搜索结果：共找到 ",N.length," 条记录",e&&A.jsxs("span",{className:"ml-2",children:['标题包含"',e,'"']}),(t!==null||r!==null)&&A.jsxs("span",{className:"ml-2",children:["强度范围：",t!==null&&r!==null?`${t} - ${r}`:t!==null?`≥ ${t}`:`≤ ${r}`]})]})})}),A.jsx(cye,{items:N,isLoading:j,onEdit:v,onDelete:P}),A.jsx(QF,{isOpen:n,onClose:p,onSubmit:X,isSubmitting:C.isPending,title:"新建情感强度"}),A.jsx(QF,{isOpen:i,onClose:g,onSubmit:R,initialData:a,isSubmitting:M.isPending,title:"编辑情感强度"})]})},Xz=PE({title:au().min(1,"标题不能为空").max(500,"标题不能超过500个字符"),content:au().optional().or(OC("")),score:su().min(0,"情感分数不能小于0").max(1,"情感分数不能大于1"),latitude:su().min(-90,"纬度必须在-90到90之间").max(90,"纬度必须在-90到90之间"),longitude:su().min(-180,"经度必须在-180到180之间").max(180,"经度必须在-180到180之间"),address:au().max(500,"地址不能超过500个字符").optional().or(OC("")),source:au().min(1,"信息来源不能为空").max(200,"信息来源不能超过200个字符"),timestamp:CC(),hotness:su().min(1,"热度值不能小于1").max(10,"热度值不能大于10").optional(),tags:oye(au()).optional()}),_Ee=PE({title:au().optional().or(OC("")),minScore:su().min(0,"最小情感分数不能小于0").max(1,"最小情感分数不能大于1").optional(),maxScore:su().min(0,"最大情感分数不能小于0").max(1,"最大情感分数不能大于1").optional(),startTime:CC().optional(),endTime:CC().optional()});Xz.partial();const Kh="text-red-500",eu="border-red-500",yEe=({initialData:e,onSubmit:t,onCancel:r,isSubmitting:n=!1})=>{const[i,a]=U.useState([]),[o,l]=U.useState(""),{register:c,handleSubmit:f,setValue:h,formState:{errors:p}}=ME({resolver:IE(Xz),defaultValues:{title:e?.title||"",content:"",score:e?.score||.5,latitude:39.9042,longitude:116.4074,address:"",source:e?.source||"",timestamp:e?.timestamp?new Date(e.timestamp):new Date,hotness:1}}),v=b=>{t({...b,tags:i.length>0?i:void 0})},g=()=>{if(o.trim()&&!i.includes(o.trim())){const b=[...i,o.trim()];a(b),l("")}},_=b=>{a(i.filter((S,T)=>T!==b))},E=b=>{b.key==="Enter"&&(b.preventDefault(),g())};return A.jsxs("form",{onSubmit:f(v),className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsxs(Oi,{htmlFor:"title",children:["事件标题 ",A.jsx("span",{className:Kh,children:"*"})]}),A.jsx(gi,{id:"title",placeholder:"请输入事件标题",...c("title"),className:p.title?eu:""}),p.title&&A.jsx("p",{className:"text-sm text-red-500",children:p.title.message})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs(Oi,{htmlFor:"source",children:["信息来源 ",A.jsx("span",{className:Kh,children:"*"})]}),A.jsx(gi,{id:"source",placeholder:"如：新浪微博、今日头条等",...c("source"),className:p.source?eu:""}),p.source&&A.jsx("p",{className:"text-sm text-red-500",children:p.source.message})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(Oi,{htmlFor:"content",children:"事件内容"}),A.jsx(T3,{id:"content",rows:4,placeholder:"请输入事件的详细内容描述",...c("content"),className:p.content?eu:""}),p.content&&A.jsx("p",{className:"text-sm text-red-500",children:p.content.message})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsxs(Oi,{htmlFor:"score",children:["情感分数 ",A.jsx("span",{className:Kh,children:"*"})]}),A.jsx(gi,{id:"score",type:"number",min:"0",max:"1",step:"0.01",placeholder:"0.00 - 1.00",...c("score",{setValueAs:b=>parseFloat(b),onChange:b=>{const S=parseFloat(b.target.value)||0;h("score",S)}}),className:p.score?eu:""}),p.score&&A.jsx("p",{className:"text-sm text-red-500",children:p.score.message}),A.jsx("p",{className:"text-sm text-gray-500",children:"0=最负面，0.5=中性，1=最正面"})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(Oi,{htmlFor:"hotness",children:"事件热度"}),A.jsx(gi,{id:"hotness",type:"number",min:"1",max:"10",...c("hotness",{setValueAs:b=>b===""?void 0:parseInt(b)}),className:p.hotness?eu:""}),p.hotness&&A.jsx("p",{className:"text-sm text-red-500",children:p.hotness.message}),A.jsx("p",{className:"text-sm text-gray-500",children:"热度值：1-10，可选"})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs(Oi,{htmlFor:"timestamp",children:["事件时间 ",A.jsx("span",{className:Kh,children:"*"})]}),A.jsx(gi,{id:"timestamp",type:"datetime-local",...c("timestamp",{setValueAs:b=>new Date(b)}),className:p.timestamp?eu:""}),p.timestamp&&A.jsx("p",{className:"text-sm text-red-500",children:p.timestamp.message})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsxs(Oi,{htmlFor:"latitude",children:["纬度 ",A.jsx("span",{className:Kh,children:"*"})]}),A.jsx(gi,{id:"latitude",type:"number",step:"0.000001",placeholder:"如：39.9042",...c("latitude",{setValueAs:b=>parseFloat(b)}),className:p.latitude?eu:""}),p.latitude&&A.jsx("p",{className:"text-sm text-red-500",children:p.latitude.message})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs(Oi,{htmlFor:"longitude",children:["经度 ",A.jsx("span",{className:Kh,children:"*"})]}),A.jsx(gi,{id:"longitude",type:"number",step:"0.000001",placeholder:"如：116.4074",...c("longitude",{setValueAs:b=>parseFloat(b)}),className:p.longitude?eu:""}),p.longitude&&A.jsx("p",{className:"text-sm text-red-500",children:p.longitude.message})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(Oi,{htmlFor:"address",children:"地址描述"}),A.jsx(gi,{id:"address",placeholder:"如：北京市朝阳区某某路段",...c("address"),className:p.address?eu:""}),p.address&&A.jsx("p",{className:"text-sm text-red-500",children:p.address.message})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(Oi,{children:"事件标签"}),A.jsxs("div",{className:"flex gap-2 mb-2",children:[A.jsx(gi,{placeholder:"输入标签后按回车或点击添加",value:o,onChange:b=>l(b.target.value),onKeyPress:E}),A.jsx($n,{type:"button",variant:"outline",onClick:g,children:A.jsx(RO,{className:"w-4 h-4"})})]}),i.length>0&&A.jsx("div",{className:"flex flex-wrap gap-2",children:i.map((b,S)=>A.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-md text-sm",children:[b,A.jsx("button",{type:"button",onClick:()=>_(S),className:"text-blue-600 hover:text-blue-800",children:A.jsx(rz,{className:"w-3 h-3"})})]},S))})]}),A.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[A.jsx($n,{type:"button",variant:"outline",onClick:r,disabled:n,children:"取消"}),A.jsx($n,{type:"submit",disabled:n,children:n?"保存中...":e?"更新事件":"创建事件"})]})]})},EEe=({open:e,onClose:t,onSubmit:r,initialData:n,isSubmitting:i=!1,title:a})=>A.jsx(i8,{open:e,onOpenChange:t,children:A.jsxs(s3,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[A.jsx(l3,{children:A.jsx(u3,{children:a})}),A.jsx("div",{className:"py-4",children:A.jsx(yEe,{initialData:n||null,onSubmit:r,onCancel:t,isSubmitting:i})})]})}),bEe=({items:e,isLoading:t,onEdit:r,onDelete:n})=>{const i=Array.isArray(e)?e:[];if(t)return A.jsx(xs,{className:"p-6",children:A.jsx("div",{className:"text-center text-gray-500",children:"加载中..."})});if(i.length===0)return A.jsx(xs,{className:"p-6",children:A.jsx("div",{className:"text-center text-gray-500",children:"暂无舆情事件数据，点击“新建舆情事件”开始创建"})});const a=c=>c>=.7?"bg-green-100 text-green-800 border-green-300":c>=.3?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-red-100 text-red-800 border-red-300",o=c=>c>=.7?"正面":c>=.3?"中性":"负面",l=c=>new Date(c).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return A.jsx("div",{className:"space-y-4",children:i.map(c=>A.jsx(xs,{className:"p-6 hover:shadow-md transition-shadow",children:A.jsxs("div",{className:"flex items-start justify-between",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("div",{className:"flex items-start gap-3 mb-3",children:A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-medium mb-2 line-clamp-2",children:c.title}),A.jsx("div",{className:"flex items-center gap-2 mb-2",children:A.jsxs(v2,{variant:"outline",className:a(c.score),children:[o(c.score)," (",c.score.toFixed(2),")"]})})]})}),A.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 mb-3",children:[A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(e_e,{className:"w-4 h-4"}),l(c.timestamp)]}),A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(r_e,{className:"w-4 h-4"}),A.jsx("span",{children:"位置信息不可用"})]}),A.jsx(v2,{variant:"secondary",className:"text-xs",children:c.source})]}),A.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:A.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${c.score>=.7?"bg-green-500":c.score>=.3?"bg-yellow-500":"bg-red-500"}`,style:{width:`${c.score*100}%`}})}),A.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["情感分数: ",c.score.toFixed(2)]})]}),A.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[A.jsx($n,{variant:"outline",size:"sm",onClick:()=>r(c),children:A.jsx(ez,{className:"w-4 h-4"})}),A.jsx($n,{variant:"outline",size:"sm",onClick:()=>n(c),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:A.jsx(tz,{className:"w-4 h-4"})})]})]})},c.id))})},xEe=({onSearch:e,onClear:t,isSearching:r=!1})=>{const{register:n,handleSubmit:i,reset:a,formState:{errors:o},watch:l}=ME({resolver:IE(_Ee),defaultValues:{title:"",minScore:void 0,maxScore:void 0,startTime:void 0,endTime:void 0}}),c=l(),f=Object.values(c).some(v=>v!==void 0&&v!==""&&v!==null),h=v=>{const g={};v.title&&v.title.trim()&&(g.title=v.title.trim()),v.minScore!==void 0&&v.minScore!==null&&(g.minScore=v.minScore),v.maxScore!==void 0&&v.maxScore!==null&&(g.maxScore=v.maxScore),v.startTime&&(g.startTime=v.startTime),v.endTime&&(g.endTime=v.endTime),e(g)},p=()=>{a({title:"",minScore:void 0,maxScore:void 0,startTime:void 0,endTime:void 0}),t()};return A.jsxs(xs,{className:"p-6",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[A.jsx(SF,{className:"w-5 h-5 text-gray-600"}),A.jsx("h3",{className:"text-lg font-medium",children:"搜索舆情事件"})]}),A.jsxs("form",{onSubmit:i(h),className:"space-y-4",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx(Oi,{htmlFor:"title",children:"标题关键词"}),A.jsx(gi,{id:"title",placeholder:"输入标题关键词进行模糊搜索",...n("title"),className:o.title?"border-red-500":""}),o.title&&A.jsx("p",{className:"text-sm text-red-500",children:o.title.message})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(Oi,{htmlFor:"minScore",children:"最小情感分数"}),A.jsx(gi,{id:"minScore",type:"number",min:"0",max:"1",step:"0.01",placeholder:"0.00 - 1.00",...n("minScore",{setValueAs:v=>v===""?void 0:parseFloat(v)}),className:o.minScore?"border-red-500":""}),o.minScore&&A.jsx("p",{className:"text-sm text-red-500",children:o.minScore.message})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(Oi,{htmlFor:"maxScore",children:"最大情感分数"}),A.jsx(gi,{id:"maxScore",type:"number",min:"0",max:"1",step:"0.01",placeholder:"0.00 - 1.00",...n("maxScore",{setValueAs:v=>v===""?void 0:parseFloat(v)}),className:o.maxScore?"border-red-500":""}),o.maxScore&&A.jsx("p",{className:"text-sm text-red-500",children:o.maxScore.message})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(Oi,{htmlFor:"startTime",children:"开始时间"}),A.jsx(gi,{id:"startTime",type:"datetime-local",...n("startTime",{setValueAs:v=>v?new Date(v):void 0}),className:o.startTime?"border-red-500":""}),o.startTime&&A.jsx("p",{className:"text-sm text-red-500",children:o.startTime.message})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx(Oi,{htmlFor:"endTime",children:"结束时间"}),A.jsx(gi,{id:"endTime",type:"datetime-local",...n("endTime",{setValueAs:v=>v?new Date(v):void 0}),className:o.endTime?"border-red-500":""}),o.endTime&&A.jsx("p",{className:"text-sm text-red-500",children:o.endTime.message})]})]}),A.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[f&&A.jsxs($n,{type:"button",variant:"outline",onClick:p,disabled:r,children:[A.jsx(rz,{className:"w-4 h-4 mr-2"}),"清空"]}),A.jsxs($n,{type:"submit",disabled:r,children:[A.jsx(SF,{className:"w-4 h-4 mr-2"}),r?"搜索中...":"搜索"]})]})]})]})},Vc={all:["sentiment-event"],lists:()=>[...Vc.all,"list"],search:e=>[...Vc.all,"search",e],detail:e=>[...Vc.all,"detail",e]},SEe=()=>kC({queryKey:Vc.lists(),queryFn:async()=>(await lEe()).data}),TEe=()=>{const e=Zc();return Xp({mutationFn:async t=>(await uEe({body:{title:t.title,score:t.score,latitude:t.latitude,longitude:t.longitude,source:t.source,timestamp:t.timestamp.toISOString(),...t.content&&{content:t.content},...t.address&&{address:t.address},...t.hotness!==void 0&&{hotness:t.hotness},...t.tags&&t.tags.length>0&&{tags:t.tags}}})).data,onSuccess:()=>{e.invalidateQueries({queryKey:Vc.lists()})}})},AEe=()=>{const e=Zc();return Xp({mutationFn:async({id:t,data:r})=>(await fEe({path:{id:t.toString()},body:{...r.title&&{title:r.title},...r.score!==void 0&&{score:r.score},...r.latitude!==void 0&&{latitude:r.latitude},...r.longitude!==void 0&&{longitude:r.longitude},...r.source&&{source:r.source},...r.timestamp&&{timestamp:r.timestamp.toISOString()},...r.content!==void 0&&{content:r.content},...r.address!==void 0&&{address:r.address},...r.hotness!==void 0&&{hotness:r.hotness},...r.tags!==void 0&&{tags:r.tags}}})).data,onSuccess:(t,{id:r})=>{e.invalidateQueries({queryKey:Vc.lists()}),e.invalidateQueries({queryKey:Vc.detail(r)})}})},REe=()=>{const e=Zc();return Xp({mutationFn:async t=>{await cEe({path:{id:t.toString()}})},onSuccess:()=>{e.invalidateQueries({queryKey:Vc.lists()})}})},CEe=mz(e=>({searchParams:{},setSearchParams:t=>e({searchParams:t}),clearSearchParams:()=>e({searchParams:{}})})),OEe=()=>{const[e,t]=U.useState(!1),[r,n]=U.useState(null),{searchParams:i,setSearchParams:a,clearSearchParams:o}=CEe(),{data:l=[],isLoading:c,refetch:f}=SEe(),h=TEe(),p=AEe(),v=REe(),g=N=>{console.log("Search functionality temporarily disabled due to API type inconsistency:",N)},_=()=>{o()},E=()=>{n(null),t(!0)},b=N=>{n(N),t(!0)},S=async N=>{try{r?(await p.mutateAsync({id:r.id,data:N}),hn.success("舆情事件更新成功")):(await h.mutateAsync(N),hn.success("舆情事件创建成功")),t(!1),n(null)}catch(j){const re=r?"更新失败":"创建失败";hn.error(re),console.error(j)}},T=async N=>{if(confirm(`确定要删除舆情事件"${N.title}"吗？`))try{await v.mutateAsync(N.id),hn.success("舆情事件删除成功")}catch(j){hn.error("删除失败"),console.error(j)}},C=()=>{f()},M=()=>{t(!1),n(null)},D=h.isPending||p.isPending,I=Object.keys(i).length>0;return A.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("h1",{className:"text-2xl font-bold",children:"舆情事件管理"}),A.jsx("p",{className:"text-gray-600 mt-1",children:"管理和监控舆情事件数据，支持创建、编辑、删除和搜索功能"})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsxs($n,{variant:"outline",onClick:C,disabled:c,children:[A.jsx(n_e,{className:`w-4 h-4 mr-2 ${c?"animate-spin":""}`}),"刷新"]}),A.jsxs($n,{onClick:E,children:[A.jsx(RO,{className:"w-4 h-4 mr-2"}),"新建舆情事件"]})]})]}),A.jsx(xEe,{onSearch:g,onClear:_,isSearching:c}),I&&A.jsxs("div",{className:"flex items-center justify-between bg-blue-50 p-3 rounded-md",children:[A.jsxs("div",{className:"text-sm text-blue-600",children:["当前显示搜索结果，共找到 ",l.length," 条记录"]}),A.jsx($n,{variant:"ghost",size:"sm",onClick:_,children:"显示全部"})]}),A.jsx(bEe,{items:l,isLoading:c,onEdit:b,onDelete:T}),A.jsx(EEe,{open:e,onClose:M,onSubmit:S,initialData:r,isSubmitting:D,title:r?"编辑舆情事件":"新建舆情事件"})]})},nm=QX({component:sG}),wEe=Gp({getParentRoute:()=>nm,path:"/",component:BK}),NEe=Gp({getParentRoute:()=>nm,path:"/dashboard",component:i_e}),MEe=Gp({getParentRoute:()=>nm,path:"/dashboard-view",component:l_e}),IEe=Gp({getParentRoute:()=>nm,path:"/sentiment-intensity",component:gEe}),PEe=Gp({getParentRoute:()=>nm,path:"/sentiment-event",component:OEe}),DEe=nm.addChildren([wEe,NEe,MEe,IEe,PEe]),LEe=sq({routeTree:DEe,defaultPreload:"intent",scrollRestoration:!0}),qz=document.getElementById("root");if(!qz)throw new Error("Failed to find the root element");mq.createRoot(qz).render(A.jsx(U.StrictMode,{children:A.jsx(fH,{client:oG,children:A.jsxs(aG,{children:[A.jsx(cq,{router:LEe}),A.jsx(nG,{position:"top-right",toastOptions:{duration:4e3,style:{background:"var(--card)",color:"var(--foreground)",border:"1px solid var(--border)"}}}),!1]})})}));
//# sourceMappingURL=index-DDyUM3TC.js.map
