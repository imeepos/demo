# GeographicDistributionMap - åœ°ç†åˆ†å¸ƒå›¾ç»„ä»¶

## ğŸ“‹ ç»„ä»¶æ¦‚è¿°

GeographicDistributionMap æ˜¯ä¸“ä¸ºèˆ†æƒ…åœ°ç†åˆ†å¸ƒåˆ†æè®¾è®¡çš„åœ°å›¾ç»„ä»¶ï¼Œæä¾›ç›´è§‚çš„åœ°åŸŸæ•°æ®å¯è§†åŒ–ã€‚æ”¯æŒçƒ­åŠ›å›¾ã€æ°”æ³¡å›¾ã€åŒºåŸŸç€è‰²ç­‰å¤šç§å±•ç¤ºæ–¹å¼ï¼Œå¸®åŠ©ç”¨æˆ·äº†è§£èˆ†æƒ…åœ¨ä¸åŒåœ°åŒºçš„åˆ†å¸ƒç‰¹å¾ã€‚

### æ ¸å¿ƒä¸šåŠ¡åœºæ™¯

- èˆ†æƒ…åœ°åŸŸåˆ†å¸ƒåˆ†æ
- åŒºåŸŸå½±å“åŠ›å¯¹æ¯”
- çƒ­ç‚¹åœ°åŒºè¯†åˆ«ç›‘æ§
- åœ°ç†ç»´åº¦æ•°æ®é’»å–

## ğŸ¯ è®¾è®¡å‡†åˆ™

### åŸºäº shadcn/ui ç»„è£…ç­–ç•¥

```typescript
åŸºç¡€ç»„ä»¶ç»„åˆï¼š
- Card: åœ°å›¾å®¹å™¨å’Œæ§åˆ¶é¢æ¿
- Select: åœ°å›¾å±‚çº§å’Œæ•°æ®ç»´åº¦é€‰æ‹©
- Tooltip: åŒºåŸŸæ•°æ®è¯¦æƒ…æ‚¬æµ®æ˜¾ç¤º
- Badge: åŒºåŸŸæ ‡è¯†å’Œæ•°æ®æ ‡ç­¾
- Popover: åŒºåŸŸè¯¦ç»†ä¿¡æ¯å¼¹çª—
- Button: åœ°å›¾æ“ä½œå’Œå¯¼å‡ºæŒ‰é’®
- Slider: çƒ­åŠ›å›¾å¼ºåº¦è°ƒèŠ‚
- Tabs: åœ°å›¾è§†å›¾æ¨¡å¼åˆ‡æ¢
```

### è§†è§‰ä¸€è‡´æ€§è¦æ±‚

- æ¸…æ™°çš„åœ°ç†è¾¹ç•Œå’ŒåŒºåŸŸåˆ’åˆ†
- ç»Ÿä¸€çš„é¢œè‰²æ¢¯åº¦å’Œå›¾ä¾‹ç³»ç»Ÿ
- å“åº”å¼åœ°å›¾é€‚é…ä¸åŒå±å¹•
- ç®€æ´çš„äº¤äº’æ§ä»¶è®¾è®¡

### äº¤äº’è¡Œä¸ºè§„èŒƒ

- åœ°å›¾ç¼©æ”¾å’Œå¹³ç§»æ“ä½œ
- åŒºåŸŸç‚¹å‡»å’Œæ‚¬æµ®æ•ˆæœ
- å›¾å±‚åˆ‡æ¢å’Œæ•°æ®ç­›é€‰
- å¤šçº§åœ°ç†å•ä½é’»å–

## ğŸ”§ æ ¸å¿ƒç”¨é€”

### ä¸»è¦åŠŸèƒ½

1. **åˆ†å¸ƒå±•ç¤º**: èˆ†æƒ…æ•°æ®åœ¨åœ°å›¾ä¸Šçš„åˆ†å¸ƒå¯è§†åŒ–
2. **çƒ­åŠ›åˆ†æ**: åŸºäºæ•°æ®å¯†åº¦çš„çƒ­åŠ›å›¾å±•ç¤º
3. **åŒºåŸŸå¯¹æ¯”**: ä¸åŒåœ°åŒºæ•°æ®çš„å¯¹æ¯”åˆ†æ
4. **å±‚çº§é’»å–**: ä»å›½å®¶åˆ°çœå¸‚å¿çš„å¤šçº§é’»å–

### é€‚ç”¨ä¸šåŠ¡åœºæ™¯

- æ”¿åºœåŒºåŸŸèˆ†æƒ…ç›‘ç®¡
- ä¼ä¸šå¸‚åœºåŒºåŸŸåˆ†æ
- åª’ä½“å½±å“åŠ›åœ°åŸŸè¿½è¸ª
- å±æœºäº‹ä»¶åœ°ç†æ‰©æ•£ç›‘æ§

### ç”¨æˆ·äº¤äº’æµç¨‹

1. é€‰æ‹©åœ°å›¾è§†å›¾å’Œæ•°æ®ç»´åº¦
2. æŸ¥çœ‹æ•´ä½“åœ°åŸŸåˆ†å¸ƒæ¦‚å†µ
3. ç‚¹å‡»æˆ–ç¼©æ”¾æŸ¥çœ‹å…·ä½“åŒºåŸŸ
4. åˆ‡æ¢å›¾å±‚åˆ†æä¸åŒæŒ‡æ ‡
5. å¯¼å‡ºåœ°å›¾å’ŒåŒºåŸŸæ•°æ®

## ğŸ› ï¸ æŠ€æœ¯å®ç°

### ç»„è£…çš„åŸºç¡€ç»„ä»¶æ¸…å•

```typescript
import { Card, CardContent, CardHeader, CardTitle } from '../ui/card';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '../ui/select';
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from '../ui/tooltip';
import { Badge } from '../ui/badge';
import { Popover, PopoverContent, PopoverTrigger } from '../ui/popover';
import { Button } from '../ui/button';
import { Slider } from '../ui/slider';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '../ui/tabs';
import { Separator } from '../ui/separator';
```

### TypeScript æ¥å£å®šä¹‰

```typescript
interface GeographicDistributionMapProps {
  data?: GeographicData[];
  viewMode?: MapViewMode;
  mapLevel?: MapLevel;
  dataMetric?: DataMetric;
  className?: string;
  onRegionClick?: (region: RegionInfo) => void;
  onViewModeChange?: (mode: MapViewMode) => void;
  onMapLevelChange?: (level: MapLevel) => void;
  onDataMetricChange?: (metric: DataMetric) => void;
  onExport?: (format: ExportFormat) => void;
  showLegend?: boolean;
  showControls?: boolean;
  height?: number;
  colorScheme?: ColorScheme;
}

interface GeographicData {
  regionId: string;
  regionName: string;
  coordinates: [number, number];
  level: MapLevel;
  parentRegion?: string;
  values: Record<DataMetric, number>;
  metadata?: {
    population?: number;
    area?: number;
    events?: EventInfo[];
  };
}

interface RegionInfo {
  id: string;
  name: string;
  level: MapLevel;
  coordinates: [number, number];
  bounds: [[number, number], [number, number]];
  data: Record<DataMetric, number>;
  ranking?: {
    metric: DataMetric;
    rank: number;
    total: number;
  };
}

interface EventInfo {
  id: string;
  title: string;
  timestamp: Date;
  severity: 'low' | 'medium' | 'high' | 'critical';
  coordinates: [number, number];
}

type MapViewMode = 'heatmap' | 'bubble' | 'choropleth' | 'cluster';
type MapLevel = 'country' | 'province' | 'city' | 'district';
type DataMetric =
  | 'total'
  | 'positive'
  | 'negative'
  | 'neutral'
  | 'engagement'
  | 'reach';
type ColorScheme = 'default' | 'viridis' | 'plasma' | 'warm' | 'cool';
type ExportFormat = 'png' | 'svg' | 'pdf' | 'geojson';
```

### å…³é”®å®ç°é€»è¾‘

```typescript
const GeographicDistributionMap = forwardRef<HTMLDivElement, GeographicDistributionMapProps>(
  ({
    data = [],
    viewMode = 'heatmap',
    mapLevel = 'province',
    dataMetric = 'total',
    className,
    onRegionClick,
    onViewModeChange,
    onMapLevelChange,
    onDataMetricChange,
    onExport,
    showLegend = true,
    showControls = true,
    height = 500,
    colorScheme = 'default',
    ...props
  }, ref) => {
    const [selectedViewMode, setSelectedViewMode] = useState<MapViewMode>(viewMode);
    const [selectedMapLevel, setSelectedMapLevel] = useState<MapLevel>(mapLevel);
    const [selectedMetric, setSelectedMetric] = useState<DataMetric>(dataMetric);
    const [heatmapIntensity, setHeatmapIntensity] = useState([70]);
    const [selectedRegion, setSelectedRegion] = useState<RegionInfo | null>(null);

    // åœ°å›¾è§†å›¾æ¨¡å¼é€‰é¡¹
    const viewModeOptions = [
      { value: 'heatmap', label: 'çƒ­åŠ›å›¾', icon: 'ğŸ”¥', description: 'åŸºäºæ•°æ®å¯†åº¦çš„çƒ­åŠ›å±•ç¤º' },
      { value: 'bubble', label: 'æ°”æ³¡å›¾', icon: 'âšª', description: 'æ°”æ³¡å¤§å°è¡¨ç¤ºæ•°æ®é‡' },
      { value: 'choropleth', label: 'åŒºåŸŸå¡«å……', icon: 'ğŸ—ºï¸', description: 'åŒºåŸŸé¢œè‰²æ·±æµ…è¡¨ç¤ºæ•°æ®' },
      { value: 'cluster', label: 'èšç±»å›¾', icon: 'ğŸ¯', description: 'æ•°æ®ç‚¹èšç±»å±•ç¤º' }
    ];

    // åœ°å›¾å±‚çº§é€‰é¡¹
    const mapLevelOptions = [
      { value: 'country', label: 'å…¨å›½', zoom: 4 },
      { value: 'province', label: 'çœçº§', zoom: 6 },
      { value: 'city', label: 'å¸‚çº§', zoom: 8 },
      { value: 'district', label: 'åŒºå¿', zoom: 10 }
    ];

    // æ•°æ®æŒ‡æ ‡é€‰é¡¹
    const metricOptions = [
      { value: 'total', label: 'æ€»é‡', color: '#3b82f6' },
      { value: 'positive', label: 'æ­£é¢', color: '#22c55e' },
      { value: 'negative', label: 'è´Ÿé¢', color: '#ef4444' },
      { value: 'neutral', label: 'ä¸­æ€§', color: '#6b7280' },
      { value: 'engagement', label: 'äº’åŠ¨é‡', color: '#f59e0b' },
      { value: 'reach', label: 'è¦†ç›–é‡', color: '#8b5cf6' }
    ];

    // è·å–é¢œè‰²æ¢¯åº¦
    const getColorScale = (metric: DataMetric, scheme: ColorScheme) => {
      const baseColors = {
        default: ['#f0f9ff', '#0ea5e9', '#0369a1'],
        viridis: ['#440154', '#3b528b', '#21908c', '#5dc863', '#fde725'],
        plasma: ['#0d0887', '#7e03a8', '#cc4778', '#f89540', '#f0f921'],
        warm: ['#fff5f0', '#fe6100', '#dc2f02'],
        cool: ['#f0f9ff', '#0284c7', '#0c4a6e']
      };
      return baseColors[scheme] || baseColors.default;
    };

    // è®¡ç®—æ•°æ®ç»Ÿè®¡
    const getDataStatistics = () => {
      if (!data.length) return null;

      const values = data.map(d => d.values[selectedMetric] || 0);
      const max = Math.max(...values);
      const min = Math.min(...values);
      const avg = values.reduce((sum, val) => sum + val, 0) / values.length;
      const total = values.reduce((sum, val) => sum + val, 0);

      return { max, min, avg, total, count: data.length };
    };

    // å¤„ç†åŒºåŸŸç‚¹å‡»
    const handleRegionClick = (region: GeographicData) => {
      const regionInfo: RegionInfo = {
        id: region.regionId,
        name: region.regionName,
        level: region.level,
        coordinates: region.coordinates,
        bounds: [region.coordinates, region.coordinates], // ç®€åŒ–è¾¹ç•Œ
        data: region.values,
        ranking: {
          metric: selectedMetric,
          rank: data.findIndex(d => d.regionId === region.regionId) + 1,
          total: data.length
        }
      };

      setSelectedRegion(regionInfo);
      onRegionClick?.(regionInfo);
    };

    // å¤„ç†è§†å›¾æ¨¡å¼å˜åŒ–
    const handleViewModeChange = (mode: MapViewMode) => {
      setSelectedViewMode(mode);
      onViewModeChange?.(mode);
    };

    // æ¸²æŸ“åœ°å›¾å†…å®¹ï¼ˆå ä½ç¬¦ï¼Œå®é™…éœ€è¦é›†æˆåœ°å›¾åº“ï¼‰
    const renderMap = () => {
      const statistics = getDataStatistics();

      return (
        <div
          className="w-full bg-muted/20 rounded-lg flex items-center justify-center relative border-2 border-dashed border-muted-foreground/20"
          style={{ height: `${height}px` }}
        >
          <div className="text-center text-muted-foreground">
            <div className="text-3xl mb-2">ğŸ—ºï¸</div>
            <p className="font-medium">åœ°ç†åˆ†å¸ƒå›¾</p>
            <p className="text-sm">
              {viewModeOptions.find(opt => opt.value === selectedViewMode)?.label} -
              {mapLevelOptions.find(opt => opt.value === selectedMapLevel)?.label}
            </p>
            {statistics && (
              <div className="mt-2 text-xs">
                <p>{statistics.count} ä¸ªåŒºåŸŸ</p>
                <p>æ€»é‡: {statistics.total.toLocaleString()}</p>
              </div>
            )}
          </div>

          {/* çƒ­åŠ›å›¾å¼ºåº¦æ§åˆ¶ */}
          {selectedViewMode === 'heatmap' && (
            <div className="absolute top-4 right-4 bg-background/90 p-2 rounded-lg">
              <div className="text-xs mb-1">çƒ­åŠ›å¼ºåº¦</div>
              <Slider
                value={heatmapIntensity}
                onValueChange={setHeatmapIntensity}
                max={100}
                min={10}
                step={10}
                className="w-20"
              />
            </div>
          )}

          {/* æ¨¡æ‹Ÿæ•°æ®ç‚¹ */}
          {data.slice(0, 5).map((region, index) => (
            <TooltipProvider key={region.regionId}>
              <Tooltip>
                <TooltipTrigger asChild>
                  <div
                    className="absolute cursor-pointer transform -translate-x-1/2 -translate-y-1/2"
                    style={{
                      left: `${20 + index * 15}%`,
                      top: `${30 + index * 10}%`,
                    }}
                    onClick={() => handleRegionClick(region)}
                  >
                    <Badge
                      variant="outline"
                      className="hover:scale-110 transition-transform"
                    >
                      {region.regionName}
                    </Badge>
                  </div>
                </TooltipTrigger>
                <TooltipContent>
                  <div className="space-y-1">
                    <p className="font-medium">{region.regionName}</p>
                    <p className="text-sm">
                      {metricOptions.find(m => m.value === selectedMetric)?.label}:
                      {(region.values[selectedMetric] || 0).toLocaleString()}
                    </p>
                  </div>
                </TooltipContent>
              </Tooltip>
            </TooltipProvider>
          ))}
        </div>
      );
    };

    // æ¸²æŸ“å›¾ä¾‹
    const renderLegend = () => {
      const statistics = getDataStatistics();
      if (!statistics || !showLegend) return null;

      const colors = getColorScale(selectedMetric, colorScheme);

      return (
        <div className="space-y-2">
          <h4 className="font-medium text-sm">å›¾ä¾‹</h4>
          <div className="flex items-center space-x-2">
            <span className="text-xs">ä½</span>
            <div className="flex">
              {colors.map((color, index) => (
                <div
                  key={index}
                  className="w-4 h-4"
                  style={{ backgroundColor: color }}
                />
              ))}
            </div>
            <span className="text-xs">é«˜</span>
          </div>
          <div className="text-xs text-muted-foreground">
            èŒƒå›´: {statistics.min.toLocaleString()} - {statistics.max.toLocaleString()}
          </div>
        </div>
      );
    };

    return (
      <Card className={cn("w-full", className)} ref={ref} {...props}>
        <CardHeader className="pb-3">
          <div className="flex items-center justify-between">
            <CardTitle className="text-lg">åœ°ç†åˆ†å¸ƒ</CardTitle>
            {onExport && (
              <Select onValueChange={(format) => onExport(format as ExportFormat)}>
                <SelectTrigger className="w-20">
                  <SelectValue placeholder="å¯¼å‡º" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="png">PNG</SelectItem>
                  <SelectItem value="svg">SVG</SelectItem>
                  <SelectItem value="pdf">PDF</SelectItem>
                  <SelectItem value="geojson">GeoJSON</SelectItem>
                </SelectContent>
              </Select>
            )}
          </div>

          {/* æ§åˆ¶é¢æ¿ */}
          {showControls && (
            <div className="flex flex-wrap items-center gap-4">
              {/* è§†å›¾æ¨¡å¼ */}
              <div className="flex items-center space-x-2">
                <span className="text-sm text-muted-foreground">è§†å›¾:</span>
                <Tabs value={selectedViewMode} onValueChange={handleViewModeChange}>
                  <TabsList className="h-8">
                    {viewModeOptions.map(option => (
                      <TabsTrigger
                        key={option.value}
                        value={option.value}
                        className="text-xs px-2"
                      >
                        {option.icon}
                      </TabsTrigger>
                    ))}
                  </TabsList>
                </Tabs>
              </div>

              {/* åœ°å›¾å±‚çº§ */}
              <div className="flex items-center space-x-2">
                <span className="text-sm text-muted-foreground">å±‚çº§:</span>
                <Select
                  value={selectedMapLevel}
                  onValueChange={(value) => {
                    setSelectedMapLevel(value as MapLevel);
                    onMapLevelChange?.(value as MapLevel);
                  }}
                >
                  <SelectTrigger className="w-20">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent>
                    {mapLevelOptions.map(option => (
                      <SelectItem key={option.value} value={option.value}>
                        {option.label}
                      </SelectItem>
                    ))}
                  </SelectContent>
                </Select>
              </div>

              {/* æ•°æ®æŒ‡æ ‡ */}
              <div className="flex items-center space-x-2">
                <span className="text-sm text-muted-foreground">æŒ‡æ ‡:</span>
                <Select
                  value={selectedMetric}
                  onValueChange={(value) => {
                    setSelectedMetric(value as DataMetric);
                    onDataMetricChange?.(value as DataMetric);
                  }}
                >
                  <SelectTrigger className="w-20">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent>
                    {metricOptions.map(option => (
                      <SelectItem key={option.value} value={option.value}>
                        <div className="flex items-center space-x-2">
                          <div
                            className="w-3 h-3 rounded-full"
                            style={{ backgroundColor: option.color }}
                          />
                          <span>{option.label}</span>
                        </div>
                      </SelectItem>
                    ))}
                  </SelectContent>
                </Select>
              </div>
            </div>
          )}
        </CardHeader>

        <CardContent className="space-y-4">
          {/* åœ°å›¾ä¸»ä½“ */}
          <div className="relative">
            {renderMap()}
          </div>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            {/* å›¾ä¾‹ */}
            {renderLegend()}

            {/* ç»Ÿè®¡ä¿¡æ¯ */}
            {(() => {
              const stats = getDataStatistics();
              return stats ? (
                <div className="space-y-2">
                  <h4 className="font-medium text-sm">ç»Ÿè®¡ä¿¡æ¯</h4>
                  <div className="space-y-1 text-sm">
                    <div className="flex justify-between">
                      <span className="text-muted-foreground">åŒºåŸŸæ•°é‡:</span>
                      <span>{stats.count}</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-muted-foreground">æ€»è®¡:</span>
                      <span>{stats.total.toLocaleString()}</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-muted-foreground">å¹³å‡å€¼:</span>
                      <span>{Math.round(stats.avg).toLocaleString()}</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-muted-foreground">æœ€å¤§å€¼:</span>
                      <span>{stats.max.toLocaleString()}</span>
                    </div>
                  </div>
                </div>
              ) : null;
            })()}

            {/* é€‰ä¸­åŒºåŸŸä¿¡æ¯ */}
            {selectedRegion && (
              <div className="space-y-2">
                <h4 className="font-medium text-sm">é€‰ä¸­åŒºåŸŸ</h4>
                <div className="space-y-1 text-sm">
                  <div className="font-medium">{selectedRegion.name}</div>
                  <div className="text-muted-foreground">
                    {selectedRegion.level === 'province' && 'çœçº§'}
                    {selectedRegion.level === 'city' && 'å¸‚çº§'}
                    {selectedRegion.level === 'district' && 'åŒºå¿çº§'}
                  </div>
                  <div>
                    {metricOptions.find(m => m.value === selectedMetric)?.label}:
                    {(selectedRegion.data[selectedMetric] || 0).toLocaleString()}
                  </div>
                  {selectedRegion.ranking && (
                    <div className="text-muted-foreground">
                      æ’å: {selectedRegion.ranking.rank} / {selectedRegion.ranking.total}
                    </div>
                  )}
                </div>
              </div>
            )}
          </div>
        </CardContent>
      </Card>
    );
  }
);

GeographicDistributionMap.displayName = "GeographicDistributionMap";
```

### æ ·å¼å’ŒåŠ¨ç”»è§„èŒƒ

```css
/* åœ°å›¾äº¤äº’åŠ¨ç”» */
.map-region:hover {
  @apply transform scale-105 transition-transform duration-200;
}

/* çƒ­åŠ›ç‚¹åŠ¨ç”» */
.heatmap-point {
  @apply animate-pulse;
}

/* åŒºåŸŸé«˜äº®æ•ˆæœ */
.region-selected {
  @apply ring-2 ring-primary ring-offset-2;
}

/* å›¾ä¾‹æ¸å˜ */
.legend-gradient {
  background: linear-gradient(to right, var(--colors));
}

/* ç¼©æ”¾æ§åˆ¶åŠ¨ç”» */
.zoom-control {
  @apply transition-all duration-300 ease-in-out;
}
```

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨

```typescript
import { GeographicDistributionMap } from "@/components/widgets";

function GeographicPage() {
  const geoData = [
    {
      regionId: 'beijing',
      regionName: 'åŒ—äº¬å¸‚',
      coordinates: [116.4074, 39.9042] as [number, number],
      level: 'province' as const,
      values: {
        total: 1250,
        positive: 890,
        negative: 180,
        neutral: 180,
        engagement: 450,
        reach: 2100
      }
    },
    {
      regionId: 'shanghai',
      regionName: 'ä¸Šæµ·å¸‚',
      coordinates: [121.4737, 31.2304] as [number, number],
      level: 'province' as const,
      values: {
        total: 1180,
        positive: 820,
        negative: 210,
        neutral: 150,
        engagement: 380,
        reach: 1900
      }
    }
  ];

  const handleRegionClick = (region: RegionInfo) => {
    console.log('ç‚¹å‡»åŒºåŸŸ:', region.name);
    // è·³è½¬åˆ°åŒºåŸŸè¯¦æƒ…é¡µé¢
  };

  return (
    <GeographicDistributionMap
      data={geoData}
      viewMode="heatmap"
      mapLevel="province"
      dataMetric="total"
      onRegionClick={handleRegionClick}
      height={600}
      showLegend={true}
      showControls={true}
    />
  );
}
```

### é«˜çº§é…ç½®ç¤ºä¾‹

```typescript
function AdvancedGeographicAnalysis() {
  const [mapData, setMapData] = useState([]);
  const [currentLevel, setCurrentLevel] = useState<MapLevel>('province');

  const handleLevelChange = async (level: MapLevel) => {
    setCurrentLevel(level);
    const data = await fetchGeographicData(level);
    setMapData(data);
  };

  const handleExport = async (format: ExportFormat) => {
    await exportMap(mapData, format, {
      viewMode: 'heatmap',
      level: currentLevel,
      colorScheme: 'viridis'
    });
  };

  return (
    <GeographicDistributionMap
      data={mapData}
      viewMode="choropleth"
      mapLevel={currentLevel}
      dataMetric="negative"
      colorScheme="plasma"
      onMapLevelChange={handleLevelChange}
      onViewModeChange={(mode) => console.log('è§†å›¾æ¨¡å¼:', mode)}
      onDataMetricChange={(metric) => console.log('æ•°æ®æŒ‡æ ‡:', metric)}
      onExport={handleExport}
      height={700}
    />
  );
}
```

## ğŸ“– API æ–‡æ¡£

### Props æ¥å£

| å±æ€§               | ç±»å‹                           | é»˜è®¤å€¼     | æè¿°             |
| ------------------ | ------------------------------ | ---------- | ---------------- |
| data               | GeographicData[]               | []         | åœ°ç†æ•°æ®æ•°ç»„     |
| viewMode           | MapViewMode                    | 'heatmap'  | åœ°å›¾è§†å›¾æ¨¡å¼     |
| mapLevel           | MapLevel                       | 'province' | åœ°å›¾å±‚çº§         |
| dataMetric         | DataMetric                     | 'total'    | æ•°æ®æŒ‡æ ‡         |
| onRegionClick      | (region: RegionInfo) => void   | -          | åŒºåŸŸç‚¹å‡»å›è°ƒ     |
| onViewModeChange   | (mode: MapViewMode) => void    | -          | è§†å›¾æ¨¡å¼å˜åŒ–å›è°ƒ |
| onMapLevelChange   | (level: MapLevel) => void      | -          | åœ°å›¾å±‚çº§å˜åŒ–å›è°ƒ |
| onDataMetricChange | (metric: DataMetric) => void   | -          | æ•°æ®æŒ‡æ ‡å˜åŒ–å›è°ƒ |
| onExport           | (format: ExportFormat) => void | -          | å¯¼å‡ºå›è°ƒ         |
| showLegend         | boolean                        | true       | æ˜¯å¦æ˜¾ç¤ºå›¾ä¾‹     |
| showControls       | boolean                        | true       | æ˜¯å¦æ˜¾ç¤ºæ§åˆ¶é¢æ¿ |
| height             | number                         | 500        | åœ°å›¾é«˜åº¦         |
| colorScheme        | ColorScheme                    | 'default'  | é¢œè‰²æ–¹æ¡ˆ         |

### äº‹ä»¶å›è°ƒ

- `onRegionClick`: ç‚¹å‡»åœ°å›¾åŒºåŸŸæ—¶è§¦å‘
- `onViewModeChange`: è§†å›¾æ¨¡å¼åˆ‡æ¢æ—¶è§¦å‘
- `onMapLevelChange`: åœ°å›¾å±‚çº§å˜åŒ–æ—¶è§¦å‘
- `onDataMetricChange`: æ•°æ®æŒ‡æ ‡å˜åŒ–æ—¶è§¦å‘
- `onExport`: å¯¼å‡ºæ“ä½œæ—¶è§¦å‘

## ğŸ¨ æœ€ä½³å®è·µ

### è®¾è®¡å»ºè®®

1. é¢œè‰²ç¼–ç è¦ç›´è§‚ä¸”ç¬¦åˆè®¤çŸ¥ä¹ æƒ¯
2. åœ°å›¾äº¤äº’è¦æµç•…ä¸”å“åº”åŠæ—¶
3. å›¾ä¾‹å’Œæ ‡ç­¾è¦æ¸…æ™°æ˜“è¯»
4. å¤šå±‚çº§åˆ‡æ¢è¦ä¿æŒä¸Šä¸‹æ–‡è¿è´¯

### æ€§èƒ½ä¼˜åŒ–

1. å¤§æ•°æ®é‡æ—¶ä½¿ç”¨åœ°å›¾ç“¦ç‰‡å’Œèšç±»
2. åˆç†è®¾ç½®åœ°å›¾æ¸²æŸ“ç²¾åº¦
3. å¼‚æ­¥åŠ è½½åœ°ç†è¾¹ç•Œæ•°æ®
4. ç¼“å­˜å¸¸ç”¨çš„åœ°å›¾è§†å›¾çŠ¶æ€
